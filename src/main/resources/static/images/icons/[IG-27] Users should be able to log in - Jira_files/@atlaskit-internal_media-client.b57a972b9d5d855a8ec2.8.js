try{window.performance.mark("@atlaskit-internal_media-client.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["@atlaskit-internal_media-client","@atlaskit-internal_atlaskit-media-client"],{"./node_modules/@atlaskit/chunkinator/dist/es2019/chunkinator.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("./node_modules/rxjs/operators/tap.js"),o=n("./node_modules/rxjs/operators/concatMap.js"),i=n("./node_modules/rxjs/observable/fromPromise.js"),s=n("./node_modules/rxjs/observable/range.js"),a=n("./node_modules/rxjs/operators/map.js");var c=n("./node_modules/rxjs-async-map/out/index.js");function l(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}const d=e=>function(e){const t=new FileReader;return new Promise(((n,r)=>{t.onload=function(){n(this.result)},t.onerror=r,t.readAsArrayBuffer(e)}))}(e).then((e=>crypto.subtle.digest("SHA-1",e))).then(l)
;var u=n("./node_modules/rxjs/operators/bufferCount.js"),p=n("./node_modules/rxjs/observable/from.js");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=(e,t,n)=>Object(i.fromPromise)(async function(e){return"string"==typeof e?await fetch(e).then((e=>e.blob())):e}(e)).pipe(Object(o.concatMap)((e=>{
const{chunkSize:i}=t,{onProgress:l}=n,m=Math.ceil(e.size/i),h=function(e,{batchSize:t,prober:n}){return e.pipe(Object(u.bufferCount)(t),Object(o.concatMap)((e=>n(e).then((t=>e.map(((e,n)=>f(f({},e),{},{exists:t[n]}))))))),Object(o.concatMap)((e=>Object(p.from)(e))))}(((e,{hasher:t,concurrency:n})=>Object(c.asyncMap)((e=>t=>e(t).then((e=>({blob:t,hash:`${e}-${t.size}`}))))(t||d),n)(e))(((e,{size:t})=>{const n=Math.ceil(e.size/t);return Object(s.range)(0,n).pipe(Object(a.map)((n=>e.slice(n*t,(n+1)*t))))})(e,{size:i}),{concurrency:t.hashingConcurrency,hasher:t.hashingFunction}),{batchSize:t.probingBatchSize,prober:t.probingFunction});let b=0,y=((e,t)=>e.pipe(Object(c.asyncMap)((e=>e.exists?Promise.resolve(e):t.uploader(e).then((()=>e))),t.concurrency)))(h,{concurrency:t.uploadingConcurrency,uploader:t.uploadingFunction});return l&&(y=y.pipe(Object(r.tap)((()=>{b+=1,l(b/m)})))),
((e,t)=>e.pipe(Object(u.bufferCount)(t.batchSize)).pipe(Object(o.concatMap)((e=>t.processor?t.processor(e).then((()=>e)):Promise.resolve(e)))))(y,{batchSize:t.processingBatchSize,processor:t.processingFunction})}))),y=(e,t,n)=>b(e,t,n)},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/collection-fetcher.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("./node_modules/rxjs/ReplaySubject.js"),o=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/file-streams-cache.js"),i=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/file-state.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l={};class d{constructor(e){this.mediaStore=e}createFileStateObserver(e,t){const n=new r.ReplaySubject(1),o=a({id:e},t),s=Object(i.h)({data:o});return n.next(s),n}populateCache(e){e.forEach((e=>{const t=this.createFileStateObserver(e.id,e.details);Object(o.b)().set(e.id,t)}))}removeFromCache(e,t){const n=l[t].items.findIndex((t=>t.id===e));-1!==n&&(Object(o.b)().remove(e),l[t].items.splice(n,1))}getItems(e,t){l[e]||(l[e]=(()=>({items:[],subject:new r.ReplaySubject(1),isLoadingNextPage:!1}))());const n=l[e],o=n.subject
;return this.mediaStore.getCollectionItems(e,a(a({},t),{},{details:"full"})).then((e=>{const{contents:t,nextInclusiveStartKey:r}=e.data;this.populateCache(t),n.items=e.data.contents,n.nextInclusiveStartKey=r,o.next(n.items)})).catch((e=>o.error(e))),o}async removeFile(e,t,n){await this.mediaStore.removeCollectionFile(e,t,n),this.removeFromCache(e,t);const r=l[t];r.subject.next(r.items)}async loadNextPage(e,t){const n=l[e],r=!!n&&n.isLoadingNextPage;if(!n||!n.nextInclusiveStartKey||r)return;n.isLoadingNextPage=!0;const{nextInclusiveStartKey:o,items:i,subject:s}=l[e],c=await this.mediaStore.getCollectionItems(e,a(a({},t),{},{inclusiveStartKey:o,details:"full"})),{contents:d,nextInclusiveStartKey:u}=c.data;this.populateCache(d);const p=[...i,...c.data.contents];s.next(p),l[e]={items:p,nextInclusiveStartKey:u,subject:s,isLoadingNextPage:!1}}}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/error.js":function(e,t,n){"use strict"
;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js");class o extends r.a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:r}={}}=this;return{reason:e,id:t,collectionName:n,occurrenceKey:r}}}function i(e){return e instanceof o}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("./node_modules/rxjs/Subscription.js"),s=n("./node_modules/rxjs/observable/of.js"),a=n("./node_modules/rxjs/operators/map.js"),c=n("./node_modules/rxjs/operators/concatMap.js"),l=n("./node_modules/uuid/v4.js"),d=n.n(l),u=(n("./node_modules/setimmediate/setImmediate.js"),
n("./node_modules/@atlaskit/media-core/dist/es2019/index.js")),p=n("./node_modules/@atlaskit/media-common/dist/es2019/downloadUrl.js"),m=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-store/index.js"),f=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/file-state.js"),h=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/error.js"),b=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/uploader.js"),y=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/file-streams-cache.js"),v=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/globalMediaEventEmitter.js"),j=n("./node_modules/uuid-validate/index.js"),g=n.n(j),w=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/createFileDataLoader.js"),_=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/index.js")
;const O=(e,t)=>Object(f.a)(e)||"unknown"!==e.mediaType?{}:{mediaType:t};var x=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/observableToPromise.js"),k=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/getDimensionsFromBlob.js"),S=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/createFileStateSubject.js"),P=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByBrowser.js"),E=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/shouldFetchRemoteFileStates.js"),A=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/polling/index.js"),I=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/detectEmptyFile.js");function F(e,t){var n=Object.keys(e)
;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C{constructor(e){o()(this,"createDownloadFileStream",((e,t,n)=>{const r=Object(S.a)(),o=new A.a(Object(A.b)(this.mediaStore.featureFlags));return o.onError=e=>r.error(e),o.execute((async()=>{const i=await this.dataloader.load({id:e,collectionName:t});if(!i)throw new h.a("emptyItems",e,{collectionName:t,occurrenceKey:n})
;if(Object(I.a)(i))throw new h.a("zeroVersionFile",e,{collectionName:t,occurrenceKey:n});const s=Object(f.i)(e,i);switch(r.next(s),s.status){case"processing":o.next();break;case"processed":r.complete()}})),r})),this.mediaStore=e,this.dataloader=Object(w.a)(e)}getFileState(e,t={}){const{collectionName:n,occurrenceKey:r}=t;if(!g()(e)){const t=Object(S.a)();return t.error(new h.a("invalidFileId",e,{collectionName:n,occurrenceKey:r})),t}return Object(y.b)().getOrInsert(e,(()=>this.createDownloadFileStream(e,n)))}getCurrentState(e,t){return Object(x.a)(this.getFileState(e,t))}getArtifactURL(e,t,n){return this.mediaStore.getArtifactURL(e,t,n)}getFileBinaryURL(e,t){return this.mediaStore.getFileBinaryURL(e,t)}touchFiles(e,t){return this.mediaStore.touchFiles({descriptors:e},{collection:t}).then((({data:e})=>e))}generateUploadableFileUpfrontIds(e){const t=d()(),n=d()(),r={fileId:t,occurrenceKey:n,collection:e};return{id:t,occurrenceKey:n,
deferredUploadId:this.touchFiles([r],e).then((e=>e.created[0].uploadId))}}async uploadExternal(e,t){const n=this.generateUploadableFileUpfrontIds(t),{id:r,occurrenceKey:o}=n,i=Object(S.a)(),s=fetch(e).then((e=>e.blob())).catch((()=>{})),a=new Promise((async(e,t)=>{const n=await s;n||t("Could not fetch the blob"),e({value:n,origin:"remote"})})),c=e.split("/").pop()||"",l={status:"processing",name:c,size:0,mediaType:"unknown",mimeType:"",id:r,occurrenceKey:o,preview:a};return i.next(l),Object(y.b)().set(r,i),new Promise((async(e,l)=>{const d=await s;if(!d)return l("Could not download remote file");const{type:u,size:p}=d,m={content:d,mimeType:u,collection:t,name:c},f=Object(_.a)(u);i.next({status:"processing",name:c,size:p,mediaType:f,mimeType:u,id:r,occurrenceKey:o,preview:a}),this.upload(m,void 0,n);e({dimensions:await Object(k.a)(f,d),uploadableFileUpfrontIds:n})}))}upload(e,t,n){"string"==typeof e.content&&(e.content=(e=>{const t=e.split(",")[1],n=atob(t),r=[]
;for(let o=0;o<n.length;o+=512){const e=n.slice(o,o+512),t=e.split("").map(((t,n)=>e.charCodeAt(n))),i=new Uint8Array(t);r.push(i)}return new Blob(r,{type:"image/jpeg"})})(e.content));const{content:r,name:o="",collection:l}=e;n||(n=this.generateUploadableFileUpfrontIds(l));const d=n.id,u=n.occurrenceKey;let p,m="",f=0;const h=(e=>{if(e.content instanceof Blob){const t=e.content.type;return Object(_.a)(t)}return"unknown"})(e),v=Object(S.a)(),j=new i.Subscription;r instanceof Blob&&(f=r.size,m=r.type,Object(P.d)(r.type)&&(p={value:r,origin:"local"}));const g={id:d,occurrenceKey:u,name:o,size:f,mediaType:h,mimeType:m,preview:p},w=e=>{v.next(T(T({status:"uploading"},g),{},{progress:e}))},{cancel:x}=Object(b.a)(e,this.mediaStore,n,{onUploadFinish:e=>{if(e)return v.error(e);j.add(Object(E.b)(h,m,p).pipe(Object(c.concatMap)((e=>e?this.createDownloadFileStream(d,l,u).pipe(Object(a.map)((e=>T(T(T({},g),e),O(e,h))))):Object(s.of)(T({status:"processing",representations:{}},g))))).subscribe(v))},
onProgress:w});return Object(y.b)().set(d,v),setTimeout((()=>{w(0)}),0),t&&t.setAbort((()=>{x(),j.unsubscribe()})),v}async downloadBinary(e,t="download",n){const r=await this.mediaStore.getFileBinaryURL(e,n);Object(p.a)(r,{name:t}),v.a.emit("media-viewed",{fileId:e,isUserCollection:"recents"===n,viewingLevel:"download"})}async copyFile(e,t,n={}){const{authProvider:r,collection:o,id:i}=e,{authProvider:s,collection:a,replaceFileId:c,occurrenceKey:l}=t,{preview:d,mimeType:p}=n,h=t.mediaStore||new m.a({authProvider:s}),b={sourceFile:{id:i,collection:o,owner:Object(u.authToOwner)(await r({collectionName:o}))}},v={collection:a,replaceFileId:c,occurrenceKey:l},j=Object(y.b)();let g;try{const{data:e}=await h.copyFileWithToken(b,v),t=T(T({},e),p?{mimeType:p}:void 0),{id:n,mimeType:r}=t,o=r?Object(_.a)(r):"unknown",i=Object(f.h)({data:t}),s=j.get(n)||Object(S.a)(),c=!Object(f.a)(i)&&d?{preview:d}:{};return!Object(f.b)(i)&&r&&await Object(E.a)(o,r,d)?(s.next(T(T(T({},i),O(i,o)),c)),
g=this.createDownloadFileStream(n,a,l).subscribe({next:e=>s.next(T(T(T({},e),O(e,o)),!Object(f.a)(e)&&c)),error:e=>s.error(e),complete:()=>s.complete()})):Object(f.f)(i)||s.next(T(T({},i),!Object(f.a)(i)&&c)),j.has(n)||Object(y.b)().set(n,s),e}catch(w){if(g&&g.unsubscribe(),c){const e=j.get(c);e?e.error(w):j.set(i,Object(S.a)(w))}throw w}}}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-client.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}))
;var r=n("./node_modules/eventemitter2/lib/eventemitter2.js"),o=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-store/index.js"),i=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/collection-fetcher.js"),s=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/index.js"),a=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/stargate-client.js");class c{constructor(e,t){this.mediaClientConfig=e,this.featureFlags=t,this.mediaStore=new o.a({authProvider:e.authProvider},t),this.config=e,this.collection=new i.a(this.mediaStore),this.file=new s.a(this.mediaStore),this.eventEmitter=new r.EventEmitter2,this.stargate=new a.a(e.stargateBaseUrl)}getImage(e,t,n,r){return this.mediaStore.getImage(e,t,n,r)}getImageUrl(e,t){return this.mediaStore.getFileImageURL(e,t)}getImageUrlSync(e,t){
return this.mediaStore.getFileImageURLSync(e,t)}async getImageMetadata(e,t){return(await this.mediaStore.getImageMetadata(e,t)).metadata}async mobileUploadPromise(){if(this.mobileUpload)return this.mobileUpload;const e=await n.e("@atlaskit-internal_media-client-mobile-upload").then(n.bind(null,"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/mobile-upload.js"));return this.mobileUpload=new e.MobileUploadImpl(this.mediaStore),this.mobileUpload}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){return this.eventEmitter.emit(e,t)}}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-store/error.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js");class o extends r.a{constructor(e,t){super(e),
this.reason=e,this.innerError=t}get attributes(){const{reason:e,innerError:t}=this;return{reason:e,innerError:t}}}function i(e){return e instanceof o}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-store/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/constants.js"),s=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/artifacts.js"),a=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/index.js"),c=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/helpers.js"),l=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-store/error.js")
;const d=(e,t)=>new Promise(((n,r)=>{setTimeout(r,e,t)}));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={"max-age":i.a,allowAnimated:!0,mode:"crop"},h={limit:30,sortDirection:"desc"},b=(e,t=!1)=>p(p(p({},f),e),t?{width:4096,height:4096}:{}),y={Accept:"application/json","Content-Type":"application/json"};class v{constructor(e,t){
o()(this,"resolveAuth",(e=>(async(e,t,n=1e4)=>{let r;try{r=await Promise.race([e(t),d(n,new l.a("authProviderTimedOut"))])}catch(o){if(o instanceof l.a)throw o;throw new l.a("failedAuthProvider",o)}if(!r)throw new l.a("emptyAuth");return r})(this.config.authProvider,e))),o()(this,"resolveInitialAuth",(()=>(e=>{if(!e)throw new l.a("missingInitialAuth");return e})(this.config.initialAuth))),this.config=e,this.featureFlags=t}async getCollectionItems(e,t){const n={method:"GET",endpoint:"/collection/{collectionName}/items"},r=p(p({},n),{},{authContext:{collectionName:e},params:p(p({},h),t),headers:{Accept:"application/json"}}),o=await this.request(`/collection/${e}/items`,r),{data:{contents:i,nextInclusiveStartKey:s}}=await Object(c.b)(n)(o);return{data:{contents:i.filter((e=>e.details.size&&e.details.size>0)),nextInclusiveStartKey:s}}}async removeCollectionFile(e,t,n){const r={actions:[{action:"remove",item:{type:"file",id:e,occurrenceKey:n}}]},o=p(p({},{method:"PUT",
endpoint:"/collection/{collectionName}"}),{},{authContext:{collectionName:t},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});await this.request(`/collection/${t}`,o)}createUpload(e=1,t){const n={method:"POST",endpoint:"/upload"},r=p(p({},n),{},{authContext:{collectionName:t},params:{createUpTo:e},headers:{Accept:"application/json"}});return this.request("/upload",r).then(Object(c.b)(n))}async uploadChunk(e,t,n){const r=p(p({},{method:"PUT",endpoint:"/chunk/{etag}"}),{},{authContext:{collectionName:n},body:t});await this.request(`/chunk/${e}`,r)}probeChunks(e,t){const n={method:"POST",endpoint:"/chunk/probe"},r=p(p({},n),{},{authContext:{collectionName:t},headers:y,body:JSON.stringify({chunks:e})});return this.request("/chunk/probe",r).then(Object(c.b)(n))}createFileFromUpload(e,t={}){const n={method:"POST",endpoint:"/file/upload"},r=p(p({},n),{},{authContext:{collectionName:t.collection},params:t,headers:y,body:JSON.stringify(e)})
;return this.request("/file/upload",r).then(Object(c.b)(n))}touchFiles(e,t={}){const n={method:"POST",endpoint:"/upload/createWithFiles"},r=p(p({},n),{},{authContext:{collectionName:t.collection},headers:y,body:JSON.stringify(e)});return this.request("/upload/createWithFiles",r).then(Object(c.b)(n))}getFile(e,t={}){const n={method:"GET",endpoint:"/file/{fileId}"},r=p(p({},n),{},{authContext:{collectionName:t.collection},params:t});return this.request(`/file/${e}`,r).then(Object(c.b)(n))}async getFileImageURL(e,t){const{collection:n}=t||{},r=await this.resolveAuth({collectionName:n});return this.createFileImageURL(e,r,t)}getFileImageURLSync(e,t){const n=this.resolveInitialAuth();return this.createFileImageURL(e,n,t)}createFileImageURL(e,t,n){const r={params:b(n),auth:t};return Object(c.d)(`${t.baseUrl}/file/${e}/image`,r)}async getFileBinaryURL(e,t){const n=await this.resolveAuth({collectionName:t}),r={params:{dl:!0,collection:t,"max-age":i.a},auth:n}
;return Object(c.d)(`${n.baseUrl}/file/${e}/binary`,r)}async getArtifactURL(e,t,n){const r=Object(s.a)(e,t);if(!r)throw new Error(`artifact ${t} not found`);const o=await this.resolveAuth({collectionName:n}),a={params:{collection:n,"max-age":i.a},auth:o};return Object(c.d)(`${o.baseUrl}${r}`,a)}async getImage(e,t,n,r){let o;const i={method:"GET",endpoint:"/file/{fileId}/image"},s=p(p({},i),{},{authContext:{collectionName:t&&t.collection},params:b(t,r),headers:o});return this.request(`/file/${e}/image`,s,n).then(Object(c.a)(i))}async getItems(e,t){const n=e.map((e=>({type:"file",id:e,collection:t}))),r={method:"POST",endpoint:"/items"},o=p(p({},r),{},{authContext:{collectionName:t},headers:y,body:JSON.stringify({descriptors:n})});return this.request("/items",o).then(Object(c.b)(r))}async getImageMetadata(e,t){const n={method:"GET",endpoint:"/file/{fileId}/image/metadata"},r=p(p({},n),{},{authContext:{collectionName:t&&t.collection},params:t})
;return this.request(`/file/${e}/image/metadata`,r).then(Object(c.b)(n))}async appendChunksToUpload(e,t,n){const r=p(p({},{method:"PUT",endpoint:"/upload/{uploadId}/chunks"}),{},{authContext:{collectionName:n},headers:y,body:JSON.stringify(t)});await this.request(`/upload/${e}/chunks`,r)}copyFileWithToken(e,t){const n={method:"POST",endpoint:"/file/copy/withToken"},r=p(p({},n),{},{authContext:{collectionName:t.collection},params:t,headers:y,body:JSON.stringify(e)});return this.request("/file/copy/withToken",r).then(Object(c.b)(n))}async request(e,t={method:"GET",endpoint:void 0,authContext:{}},n){const{method:r,endpoint:o,authContext:i,params:s,headers:c,body:l,clientOptions:d}=t,u=await this.resolveAuth(i),p=await Object(a.a)(`${u.baseUrl}${e}`,{method:r,endpoint:o,auth:u,params:s,headers:c,body:l,clientOptions:d},n);return function(e){if(!e||!window||!window.sessionStorage)return
;window.sessionStorage.getItem("media-api-region")!==e&&window.sessionStorage.setItem("media-api-region",e)}(p.headers.get("x-media-region")),p}}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/stargate-client.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e){this.baseUrl=e||"/gateway/api"}async fetchToken(e){return(await fetch(`${this.baseUrl}/media/auth/smartedge`,{credentials:"include",headers:{"x-client-id":e}})).json()}isTokenExpired(e){const t=(new Date).getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0}}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/constants.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));const r="recents",o=2592e3,i=4096},
"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/file-streams-cache.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r{constructor(e){this.streams=e}has(e){return!!this.streams.find(e)}set(e,t){this.streams.set(e,t)}get(e){return this.streams.get(e)}getOrInsert(e,t){return this.has(e)||this.set(e,t()),this.get(e)}removeAll(){this.streams.removeAll()}remove(e){this.streams.remove(e)}get size(){return this.streams.size}}let o;const i=()=>{if(!o){const e=n("./node_modules/@atlaskit/media-core/dist/es2019/index.js").mediaState;o=new r(e.streams)}return o}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/globalMediaEventEmitter.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/@atlaskit/media-core/dist/es2019/index.js");const o={on(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.on(e,t)},off(e,t){
r.mediaState.eventEmitter&&r.mediaState.eventEmitter.off(e,t)},emit(e,t){if(r.mediaState.eventEmitter)return r.mediaState.eventEmitter.emit(e,t)}}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/identifier.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("./node_modules/deep-equal/index.js"),o=n.n(r);const i=e=>"file"===e.mediaItemType,s=e=>"external-image"===e.mediaItemType,a=(e,t)=>i(e)&&i(t)?e.id!==t.id||e.collectionName!==t.collectionName||e.occurrenceKey!==t.occurrenceKey:!o()(e,t)},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"MediaStore",(function(){return r.a})),n.d(t,"MediaStoreError",(function(){return o.a})),n.d(t,"isMediaStoreError",(function(){return o.b})),n.d(t,"UploadController",(function(){return i})),n.d(t,"isPreviewableType",(function(){
return s.b})),n.d(t,"isMediaCollectionItemFullDetails",(function(){return s.a})),n.d(t,"getArtifactUrl",(function(){return a.a})),n.d(t,"isMediaClientError",(function(){return c.b})),n.d(t,"getMediaClientErrorReason",(function(){return c.a})),n.d(t,"isUploadingFileState",(function(){return l.g})),n.d(t,"isProcessingFileState",(function(){return l.f})),n.d(t,"isProcessedFileState",(function(){return l.e})),n.d(t,"isErrorFileState",(function(){return l.a})),n.d(t,"isPreviewableFileState",(function(){return l.d})),n.d(t,"isFinalFileState",(function(){return l.b})),n.d(t,"isImageRepresentationReady",(function(){return l.c})),n.d(t,"mapMediaFileToFileState",(function(){return l.h})),n.d(t,"mapMediaItemToFileState",(function(){return l.i})),n.d(t,"getFileStreamsCache",(function(){return d.b})),n.d(t,"StreamsCache",(function(){return d.a})),n.d(t,"uploadFile",(function(){return u.a})),n.d(t,"request",(function(){return p.a})),n.d(t,"RequestError",(function(){return m.a})),
n.d(t,"isRequestError",(function(){return m.b})),n.d(t,"isRateLimitedError",(function(){return f.g})),n.d(t,"isAbortedRequestError",(function(){return f.f})),n.d(t,"mapResponseToJson",(function(){return f.i})),n.d(t,"mapResponseToBlob",(function(){return f.h})),n.d(t,"mapResponseToVoid",(function(){return f.j})),n.d(t,"createUrl",(function(){return f.d})),n.d(t,"PollingFunction",(function(){return h.a})),n.d(t,"isPollingError",(function(){return b.b})),n.d(t,"PollingError",(function(){return b.a})),n.d(t,"FileFetcherImpl",(function(){return y.a})),n.d(t,"FileFetcherError",(function(){return v.a})),n.d(t,"isFileFetcherError",(function(){return v.b})),n.d(t,"CollectionFetcher",(function(){return j.a})),n.d(t,"MediaClient",(function(){return g.a})),n.d(t,"StargateClient",(function(){return w.a})),n.d(t,"isImageRemote",(function(){return _.a})),n.d(t,"checkWebpSupport",(function(){return x})),n.d(t,"observableToPromise",(function(){return k.a})),n.d(t,"getDimensionsFromBlob",(function(){
return S.a})),n.d(t,"createFileStateSubject",(function(){return P.a})),n.d(t,"safeUnsubscribe",(function(){return E})),n.d(t,"isFileIdentifier",(function(){return A.c})),n.d(t,"isExternalImageIdentifier",(function(){return A.b})),n.d(t,"isDifferentIdentifier",(function(){return A.a})),n.d(t,"withMediaClient",(function(){return I.b})),n.d(t,"getMediaClient",(function(){return I.a})),n.d(t,"globalMediaEventEmitter",(function(){return F.a})),n.d(t,"isMediaBlobUrl",(function(){return T.c})),n.d(t,"getAttrsFromUrl",(function(){return T.b})),n.d(t,"addFileAttrsToUrl",(function(){return T.a})),n.d(t,"objectToQueryString",(function(){return T.d})),n.d(t,"RECENTS_COLLECTION",(function(){return U.c})),n.d(t,"MAX_RESOLUTION",(function(){return U.b})),n.d(t,"getMediaTypeFromMimeType",(function(){return B})),n.d(t,"isImageMimeTypeSupportedByBrowser",(function(){return L})),n.d(t,"isDocumentMimeTypeSupportedByBrowser",(function(){return D})),n.d(t,"isMimeTypeSupportedByBrowser",(function(){return N
})),n.d(t,"isImageMimeTypeSupportedByServer",(function(){return z})),n.d(t,"isDocumentMimeTypeSupportedByServer",(function(){return $})),n.d(t,"isAudioMimeTypeSupportedByServer",(function(){return q})),n.d(t,"isVideoMimeTypeSupportedByServer",(function(){return K})),n.d(t,"isUnknownMimeTypeSupportedByServer",(function(){return W})),n.d(t,"isMimeTypeSupportedByServer",(function(){return H}));var r=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-store/index.js"),o=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-store/error.js");class i{constructor(){}setAbort(e){this.abortFunction=e}abort(){this.abortFunction&&this.abortFunction()}}
var s=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/media.js"),a=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/artifacts.js"),c=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/errors/helpers.js"),l=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/file-state.js"),d=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/file-streams-cache.js"),u=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/uploader.js"),p=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/index.js"),m=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/errors.js"),f=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/helpers.js"),h=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/polling/index.js"),b=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/polling/errors.js"),y=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/index.js"),v=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/error.js"),j=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/collection-fetcher.js"),g=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-client.js"),w=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/stargate-client.js"),_=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/isImageRemote.js")
;let O;const x=()=>void 0!==O?Promise.resolve(O):new Promise((e=>{const t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=()=>{O=2===t.height,e(O)}}));var k=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/observableToPromise.js"),S=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/getDimensionsFromBlob.js"),P=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/createFileStateSubject.js");const E=e=>{console.warn("safeUnsubscribe() is deprecated and will be removed in the next media-client major version"),setTimeout((()=>e&&e.unsubscribe()),0)}
;var A=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/identifier.js"),I=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/with-media-client-hoc.js"),F=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/globalMediaEventEmitter.js"),T=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/url.js"),U=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/constants.js"),C=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/index.js"),M=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByBrowser.js"),R=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByServer.js");const B=C.a,L=M.c,D=M.b,N=M.d,z=R.c,$=R.b,q=R.a,K=R.f,W=R.e,H=R.d},
"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/artifacts.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{const n=e[t];if(n&&n.url)return n.url}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/errors/helpers.js":function(e,t,n){"use strict";function r(e){return e instanceof Object&&"attributes"in e&&e.attributes instanceof Object&&"reason"in e.attributes&&e instanceof Error}function o(e){return r(e)?e.attributes.reason:"unknown"}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}},
"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/file-state.js":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){
return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return f}));const s=e=>"uploading"===e.status,a=e=>"processing"===e.status,c=e=>"processed"===e.status,l=e=>"error"===e.status,d=e=>!l(e)&&!!e.preview,u=e=>["processed","failed-processing","error"].includes(e.status),p=e=>{switch(e.status){case"processing":case"processed":case"failed-processing":return!(!e.representations||!e.representations.image);default:return!1}},m=e=>{const{id:t,name:n,size:r,processingStatus:i,artifacts:s,mediaType:a,mimeType:c,representations:l,createdAt:d}=e.data,u={id:t,name:n,size:r,mediaType:a,mimeType:c,artifacts:s,representations:l,createdAt:d};switch(i){case"pending":case void 0:return o(o({},u),{},{status:"processing"});case"succeeded":return o(o({},u),{},{status:"processed"});case"failed":return o(o({},u),{},{status:"failed-processing"})}},f=(e,t)=>m({data:o({id:e},t)})},
"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/media.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaFeatureFlags.js");const o=(e,t)=>{const n=["audio","video","image"];return Object(r.a)("newCardExperience",t)?[...n,"doc"].indexOf(e)>-1:n.indexOf(e)>-1},i=e=>!!e.mediaType&&!!e.mimeType&&!!e.processingStatus},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/uploader.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("./node_modules/@atlaskit/chunkinator/dist/es2019/chunkinator.js"),o=n("./node_modules/rxjs/observable/from.js"),i=n("./node_modules/rxjs/operators/concatMap.js");let s=null;const a=async e=>(await(async()=>{if(!s)try{
const{WorkerHasher:e}=await n.e("ad1f88661f").then(n.bind(null,"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/hashing/workerHasher.js"));s=new e(3)}catch(e){const{SimpleHasher:t}=await n.e("0ee5498551").then(n.bind(null,"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/hashing/simpleHasher.js"));s=new t}return s})()).hash(e),c=(e,t)=>async n=>{const r=(await e.probeChunks(p(n),t)).data.results;return Object.values(r).map((e=>e.exists))},l=(e,t)=>n=>e.uploadChunk(n.hash,n.blob,t),d=(e,t,n)=>{let r=0;return async o=>{await e.appendChunksToUpload(await t,{chunks:p(o),offset:r},n),r+=o.length}},u=(e,t,n,s)=>{const{content:u,collection:p}=e,{deferredUploadId:m}=n,f=Object(r.a)(u,{hashingFunction:a,hashingConcurrency:5,probingBatchSize:100,chunkSize:4194304,uploadingConcurrency:3,uploadingFunction:l(t,p),probingFunction:c(t,p),processingBatchSize:1e3,processingFunction:d(t,m,p)},{onProgress(e){
s&&s.onProgress(e)}}),h=s&&s.onUploadFinish||(()=>{}),b=Object(o.from)(m).pipe(Object(i.concatMap)((r=>f.pipe(Object(i.concatMap)((()=>Object(o.from)((async(e,t,n,r)=>{const{collection:o,name:i,mimeType:s}=e,{id:a,occurrenceKey:c}=n;return t.createFileFromUpload({uploadId:r,name:i,mimeType:s},{occurrenceKey:c,collection:o,replaceFileId:a})})(e,t,n,r)))))))).subscribe({error:e=>h(e),complete:()=>h()});return{cancel:()=>{b.unsubscribe(),h("canceled")}}},p=e=>e.map((e=>e.hash))},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/createFileDataLoader.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("./node_modules/setimmediate/setImmediate.js");var r=n("./node_modules/@atlaskit/collab-provider/node_modules/dataloader/index.js"),o=n.n(r);const i=(e,t)=>t?`${e}-${t}`:e,s=(e,t)=>{const n=t.reduce(((e,t)=>{const{id:n,collection:r}=t;return e[i(n,r)]=(e=>e.error instanceof Error)(t)?t.error:t.details,e}),{});return e.map((e=>{
const{id:t,collectionName:r}=e,o=i(t,r);return n[o]||null}))};function a(e){return new o.a(function(e){return async t=>{const n="__media-single-file-collection__",r=t.reduce(((e,t)=>{const r=t.collectionName||n,o=e[r]||[];return-1===o.indexOf(t.id)&&o.push(t.id),e[r]=o,e}),{}),o=[];return await Promise.all(Object.keys(r).map((async t=>{const i=r[t],s=t===n?void 0:t;try{const t=await e.getItems(i,s);o.push(...t.data.items)}catch(a){i.forEach((e=>{o.push({id:e,collection:s,error:a})}))}}))),s(t,o)}}(e),{maxBatchSize:100})}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/createFileStateSubject.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/rxjs/ReplaySubject.js");const o=e=>{const t=new r.ReplaySubject(1);return e instanceof Error?t.error(e):e&&t.next(e),t}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/detectEmptyFile.js":function(e,t,n){
"use strict";n.d(t,"a",(function(){return r}));function r(e,t=Date.now()){const{artifacts:n,mediaType:r,mimeType:o,name:i,processingStatus:s,representations:a,size:c,createdAt:l}=e;if(!(n||r||o||i||s||a||c||"number"!=typeof l)){if(t-l>432e5)return!0}return!1}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/getDimensionsFromBlob.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/getVideoDimensionsFromBlob.js");const o=async(e,t)=>{switch(e){case"image":{const e=URL.createObjectURL(t);try{return await(e=>new Promise(((t,n)=>{const r=new Image;r.src=e,r.onload=()=>t({width:r.width,height:r.height}),r.onerror=n})))(e)}finally{URL.revokeObjectURL(e)}}case"video":return Object(r.a)(t);default:throw new Error(`Can't extract dimensions from ${e}`)}}},
"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/getVideoDimensionsFromBlob.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/video-snapshot/dist/es2015/index.js");const o=async(e,t=new r.a(e))=>{try{return await t.getDimensions()}finally{t.end()}}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/isImageRemote.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t=window.location.origin)=>{if(URL&&URL.prototype){const n=new URL(e);return!!n.host&&n.origin!==t}return!0}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/observableToPromise.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/rxjs/Subscription.js");const o=(e,t=new r.Subscription)=>new Promise(((n,r)=>t.add(e.subscribe({next:e=>{n(e),t.unsubscribe()},error:e=>{r(e),t.unsubscribe()
}}))))},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/polling/errors.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js");class o extends r.a{constructor(e,t){super(e),this.reason=e,this.attempts=t}get attributes(){const{reason:e,attempts:t}=this;return{reason:e,attempts:t}}}function i(e){return e instanceof o}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/polling/index.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}))
;var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaFeatureFlags.js"),s=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/polling/errors.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=e=>({
poll_intervalMs:Object(i.a)("poll_intervalMs",e),poll_maxAttempts:Object(i.a)("poll_maxAttempts",e),poll_backoffFactor:Object(i.a)("poll_backoffFactor",e),poll_maxIntervalMs:Object(i.a)("poll_maxIntervalMs",e)}),u=d(void 0);class p{constructor(e){o()(this,"poll_intervalMs",0),o()(this,"attempt",1),o()(this,"shouldIterate",!0),o()(this,"timeoutId",0),this.options=c(c({},u),e),this.poll_intervalMs=this.options.poll_intervalMs}async execute(e){const{poll_maxAttempts:t}=this.options;if(0===t)return this.fail(new s.a("pollingMaxAttemptsExceeded",this.attempt));try{if(this.shouldIterate=!1,await e(),!this.shouldIterate)return;if(this.attempt>=t)return this.fail(new s.a("pollingMaxAttemptsExceeded",this.attempt));this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout((()=>this.execute(e)),this.poll_intervalMs)}catch(n){this.fail(n)}}fail(e){const{onError:t}=this;this.cancel(),t&&t(e)}getIntervalMsForIteration(e){
let t=this.options.poll_intervalMs;if(1===e)return t;for(let n=2;n<=e;n++)t*=this.options.poll_backoffFactor;return Math.min(Math.round(t),this.options.poll_maxIntervalMs)}next(){this.shouldIterate=!0}cancel(){window.clearTimeout(this.timeoutId),this.timeoutId=0}}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/errors.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js");class o extends r.a{constructor(e,t,n){super(e),this.reason=e,this.metadata=t,this.innerError=n}get attributes(){const{reason:e,metadata:{method:t,endpoint:n,attempts:r,clientExhaustedRetries:o,statusCode:i}={},innerError:s}=this;return{reason:e,method:t,endpoint:n,attempts:r,clientExhaustedRetries:o,statusCode:i,innerError:s}}}function i(e){return e instanceof o}},
"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/helpers.js":function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"j",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return w}));var r=n("./node_modules/@atlaskit/media-core/dist/es2019/index.js"),o=n("./node_modules/query-string/index.js");var i=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/errors.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){
for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e instanceof Error&&"request_cancelled"===e.message||!!e&&"AbortError"===e.name}function d(e){return e instanceof TypeError}function u(e){return!!e&&Object(i.b)(e)&&429===e.attributes.statusCode||!!e&&!!e.message&&e.message.includes("429")}function p(e,{params:t,auth:n}){const{baseUrl:i,queryParams:s}=function(e){const t=e.indexOf("?");return t>0?{baseUrl:e.substring(0,t),queryParams:Object(o.parse)(e.substring(t+1,e.length))}:{baseUrl:e}}(e),c=n&&function(e){return Object(r.isClientBasedAuth)(e)?{
client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}(n),l=Object(o.stringify)(a(a(a({},s),t),c));return`${i}${l.length>0?`?${l}`:""}`}function m(e){return t=>e?a(a({},t||{}),function(e){return Object(r.isClientBasedAuth)(e)?{"X-Client-Id":e.clientId,Authorization:`Bearer ${e.token}`}:{"X-Issuer":e.asapIssuer,Authorization:`Bearer ${e.token}`}}(e)):t}async function f(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.json()}catch(t){throw new i.a("serverInvalidBody",{statusCode:e.status},t)}}async function h(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.blob()}catch(t){throw new i.a("serverInvalidBody",{statusCode:e.status},t)}}function b(){return console.warn("Helper is deprecated and will be remove in the next major version"),Promise.resolve()}function y(e){return async t=>{try{return await t.json()}catch(n){throw new i.a("serverInvalidBody",a(a({},e),{},{
statusCode:t.status}),n)}}}function v(e){return async t=>{try{return await t.blob()}catch(n){throw new i.a("serverInvalidBody",a(a({},e),{},{statusCode:t.status}),n)}}}const j={startTimeoutInMs:1e3,maxAttempts:5,factor:2};async function g(e,t,n={}){const r=a(a({},j),n),{startTimeoutInMs:o,maxAttempts:s,factor:c}=r;let u,p=0,m=o;const f=async()=>{await function(e){return new Promise((t=>setTimeout(t,e)))}(m),m*=c,p+=1};for(;p<s;)try{return await e()}catch(h){if(u=h,l(h))throw new i.a("clientAbortedRequest",t,h);if(!d(h)&&!Object(i.b)(h)||Object(i.b)(h)&&(!h.metadata||!h.metadata.statusCode||h.metadata.statusCode<500))throw h;await f()}if(Object(i.b)(u))throw function(e,t){const{reason:n,metadata:r,innerError:o}=e;return new i.a(n,a(a({},r),t),o)}(u,{attempts:p,clientExhaustedRetries:!0});throw new i.a("serverUnexpectedError",a(a({},t),{},{attempts:p,clientExhaustedRetries:!0}),u)}function w(e){return t=>{if(t.ok||t.status<400)return t;throw function(e,t){const{status:n}=t,r=function(e){
switch(e){case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 429:return"serverRateLimited";case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}(n);return new i.a(r,a(a({},e),{},{statusCode:n}))}(e,t)}}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/request/helpers.js");async function o(e,t={},n){const{method:o="GET",endpoint:i,auth:s,params:a,headers:c,body:l,clientOptions:d={}}=t,{retryOptions:u}=d,p={method:o,endpoint:i};return Object(r.e)((()=>fetch(Object(r.d)(e,{params:a}),{method:o,body:l,headers:Object(r.k)(s)(c),signal:n&&n.signal}).then(Object(r.c)(p))),p,u)}},
"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/shouldFetchRemoteFileStates.js":function(t,n,r){"use strict";r.d(n,"a",(function(){return c})),r.d(n,"b",(function(){return l}));var o=r("./node_modules/rxjs/observable/from.js"),i=r("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByBrowser.js"),s=r("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByServer.js"),a=r("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/getVideoDimensionsFromBlob.js");async function c(t,n,r){if(("doc"===t||!Object(i.d)(n)||!r)&&Object(s.d)(n))return!0;if("video"===t&&r){const t=(await r).value;if(!(t instanceof Blob))return!1;try{const{width:e,height:n}=await Object(a.a)(t);return!e&&!n}catch(e){return!0}}return!1}function l(e,t,n){return Object(o.from)(c(e,t,n))}},
"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/url.js":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return p}))
;const s="media-blob-url",a=e=>e.indexOf("media-blob-url=true")>-1,c=(e,t)=>{const n=e.get(t);return"string"!=typeof n||isNaN(parseInt(n))?void 0:parseInt(n)},l=(e,t)=>{const n=e.get(t);if(n)return decodeURIComponent(n)},d=e=>{const t=new URL(e).hash.replace("#",""),n=new URLSearchParams(t),r=n.get("id"),o=n.get("contextId");if(r&&o)return{id:r,contextId:o,collection:l(n,"collection"),alt:l(n,"alt"),height:c(n,"height"),width:c(n,"width"),size:c(n,"size"),name:l(n,"name"),mimeType:l(n,"mimeType")}},u=e=>Object.keys(e).filter((t=>void 0!==e[t]&&null!==e[t])).map((t=>{const n=e[t];if(null!=n)return`${encodeURIComponent(t)}=${encodeURIComponent(n.toString())}`})).join("&"),p=(e,t)=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return e;const n=o(o({},{[s]:"true"}),t);return`${e}#${u(n)}`}},"./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/utils/with-media-client-hoc.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),
n.d(t,"b",(function(){return p}));var r=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),i=n("./node_modules/react/index.js"),s=n.n(i),a=n("./node_modules/@atlaskit/collab-provider/node_modules/@atlaskit/media-client/dist/es2019/client/media-client.js");const c=["mediaClientConfig"];function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const d=new Map,u=(e,t)=>{let n=d.get(e);return n||(n=new a.a(e,t),d.set(e,n)),n},p=(e,t)=>class extends s.a.Component{render(){const n=this.props,{mediaClientConfig:r}=n,i=l(n,c),d=r?u(r,t):(e=>{const t={authProvider:()=>Promise.resolve({clientId:"",token:"",baseUrl:""})};return new a.a(t,e)})(t)
;return s.a.createElement(e,o()({},i,{mediaClient:d}))}}},"./node_modules/@atlaskit/collab-provider/node_modules/dataloader/index.js":function(e,t,n){"use strict";(function(t,n){var r,o=function(){function e(e,t){if("function"!=typeof e)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: "+e+".");this._batchLoadFn=e,this._maxBatchSize=function(e){if(e&&!1===e.batch)return 1;var t=e&&e.maxBatchSize;if(void 0===t)return 1/0;if("number"!=typeof t||t<1)throw new TypeError("maxBatchSize must be a positive number: "+t);return t}(t),this._batchScheduleFn=function(e){var t=e&&e.batchScheduleFn;if(void 0===t)return i;if("function"!=typeof t)throw new TypeError("batchScheduleFn must be a function: "+t);return t}(t),this._cacheKeyFn=function(e){var t=e&&e.cacheKeyFn;if(void 0===t)return function(e){return e};if("function"!=typeof t)throw new TypeError("cacheKeyFn must be a function: "+t);return t}(t),
this._cacheMap=function(e){if(e&&!1===e.cache)return null;var t=e&&e.cacheMap;if(void 0===t)return new Map;if(null!==t){var n=["get","set","delete","clear"].filter((function(e){return t&&"function"!=typeof t[e]}));if(0!==n.length)throw new TypeError("Custom cacheMap missing methods: "+n.join(", "))}return t}(t),this._batch=null}var t=e.prototype;return t.load=function(e){if(null==e)throw new TypeError("The loader.load() function must be called with a value,but got: "+String(e)+".");var t=function(e){var t=e._batch;if(null!==t&&!t.hasDispatched&&t.keys.length<e._maxBatchSize&&(!t.cacheHits||t.cacheHits.length<e._maxBatchSize))return t;var n={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=n,e._batchScheduleFn((function(){return function(e,t){if(t.hasDispatched=!0,0===t.keys.length)return void a(t);var n=e._batchLoadFn(t.keys)
;if(!n||"function"!=typeof n.then)return s(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: "+String(n)+"."));n.then((function(e){if(!c(e))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: "+String(e)+".");if(e.length!==t.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n"+String(t.keys)+"\n\nValues:\n"+String(e));a(t);for(var n=0;n<t.callbacks.length;n++){var r=e[n];r instanceof Error?t.callbacks[n].reject(r):t.callbacks[n].resolve(r)}})).catch((function(n){return s(e,t,n)}))}(e,n)})),n}(this),n=this._cacheMap,r=this._cacheKeyFn(e);if(n){
var o=n.get(r);if(o){var i=t.cacheHits||(t.cacheHits=[]);return new Promise((function(e){i.push((function(){return e(o)}))}))}}t.keys.push(e);var l=new Promise((function(e,n){t.callbacks.push({resolve:e,reject:n})}));return n&&n.set(r,l),l},t.loadMany=function(e){if(!c(e))throw new TypeError("The loader.loadMany() function must be called with Array<key> but got: "+e+".");for(var t=[],n=0;n<e.length;n++)t.push(this.load(e[n]).catch((function(e){return e})));return Promise.all(t)},t.clear=function(e){var t=this._cacheMap;if(t){var n=this._cacheKeyFn(e);t.delete(n)}return this},t.clearAll=function(){var e=this._cacheMap;return e&&e.clear(),this},t.prime=function(e,t){var n=this._cacheMap;if(n){var r,o=this._cacheKeyFn(e);if(void 0===n.get(o))t instanceof Error?(r=Promise.reject(t)).catch((function(){})):r=Promise.resolve(t),n.set(o,r)}return this},e}(),i="object"==typeof t&&"function"==typeof t.nextTick?function(e){r||(r=Promise.resolve()),r.then((function(){return t.nextTick(e)}))
}:n||setTimeout;function s(e,t,n){a(t);for(var r=0;r<t.keys.length;r++)e.clear(t.keys[r]),t.callbacks[r].reject(n)}function a(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function c(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&(0===e.length||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}e.exports=o}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate)},"./node_modules/@atlaskit/media-client/dist/es2019/client/collection-fetcher.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("./node_modules/rxjs/ReplaySubject.js"),o=n("./node_modules/@atlaskit/media-client/dist/es2019/file-streams-cache.js"),i=n("./node_modules/@atlaskit/media-client/dist/es2019/models/file-state.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l={};class d{constructor(e){this.mediaStore=e}createFileStateObserver(e,t){const n=new r.ReplaySubject(1),o=a({id:e},t),s=Object(i.h)({data:o});return n.next(s),n}populateCache(e){e.forEach((e=>{const t=this.createFileStateObserver(e.id,e.details);Object(o.b)().set(e.id,t)}))}removeFromCache(e,t){const n=l[t].items.findIndex((t=>t.id===e));-1!==n&&(Object(o.b)().remove(e),l[t].items.splice(n,1))}getItems(e,t){l[e]||(l[e]=(()=>({
items:[],subject:new r.ReplaySubject(1),isLoadingNextPage:!1}))());const n=l[e],o=n.subject;return this.mediaStore.getCollectionItems(e,a(a({},t),{},{details:"full"})).then((e=>{const{contents:t,nextInclusiveStartKey:r}=e.data;this.populateCache(t),n.items=e.data.contents,n.nextInclusiveStartKey=r,o.next(n.items)})).catch((e=>o.error(e))),o}async removeFile(e,t,n){await this.mediaStore.removeCollectionFile(e,t,n),this.removeFromCache(e,t);const r=l[t];r.subject.next(r.items)}async loadNextPage(e,t){const n=l[e],r=!!n&&n.isLoadingNextPage;if(!n||!n.nextInclusiveStartKey||r)return;n.isLoadingNextPage=!0;const{nextInclusiveStartKey:o,items:i,subject:s}=l[e],c=await this.mediaStore.getCollectionItems(e,a(a({},t),{},{inclusiveStartKey:o,details:"full"})),{contents:d,nextInclusiveStartKey:u}=c.data;this.populateCache(d);const p=[...i,...c.data.contents];s.next(p),l[e]={items:p,nextInclusiveStartKey:u,subject:s,isLoadingNextPage:!1}}}},
"./node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/error.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("./node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js");class o extends r.a{constructor(e,t,n){super(e),this.reason=e,this.id=t,this.metadata=n}get attributes(){const{reason:e,id:t,metadata:{collectionName:n,occurrenceKey:r}={}}=this;return{reason:e,id:t,collectionName:n,occurrenceKey:r}}}function i(e){return e instanceof o}},"./node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/index.js":function(t,n,r){"use strict";r.d(n,"a",(function(){return $}))
;var o=r("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=r.n(o),s=r("./node_modules/rxjs/Subscription.js"),a=r("./node_modules/rxjs/observable/of.js"),c=r("./node_modules/rxjs/operators/map.js"),l=r("./node_modules/rxjs/operators/concatMap.js"),d=r("./node_modules/uuid/v4.js"),u=r.n(d),p=r("./node_modules/@atlaskit/media-core/dist/es2019/index.js"),m=r("./node_modules/@atlaskit/media-common/dist/es2019/downloadUrl.js"),f=r("./node_modules/@atlaskit/media-client/dist/es2019/client/media-store/index.js"),h=r("./node_modules/@atlaskit/media-client/dist/es2019/models/file-state.js"),b=r("./node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/error.js"),y=r("./node_modules/@atlaskit/media-client/dist/es2019/uploader.js"),v=r("./node_modules/@atlaskit/media-client/dist/es2019/file-streams-cache.js"),j=r("./node_modules/@atlaskit/media-client/dist/es2019/globalMediaEventEmitter.js"),g=r("./node_modules/uuid-validate/index.js"),w=r.n(g),_=r("./node_modules/dataloader/index.js"),O=r.n(_)
;const x=(e,t)=>t?`${e}-${t}`:e,k=(e,t)=>{const n=t.reduce(((e,t)=>{const{id:n,collection:r}=t;return e[x(n,r)]=(e=>e.error instanceof Error)(t)?t.error:t.details,e}),{});return e.map((e=>{const{id:t,collectionName:r}=e,o=x(t,r);return n[o]||null}))};function S(e){return new O.a(function(e){return async t=>{const n="__media-single-file-collection__",r=t.reduce(((e,t)=>{const r=t.collectionName||n,o=e[r]||[];return-1===o.indexOf(t.id)&&o.push(t.id),e[r]=o,e}),{}),o=[];return await Promise.all(Object.keys(r).map((async t=>{const i=r[t],s=t===n?void 0:t;try{const t=await e.getItems(i,s);o.push(...t.data.items)}catch(a){i.forEach((e=>{o.push({id:e,collection:s,error:a})}))}}))),k(t,o)}}(e),{maxBatchSize:100})}var P=r("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/index.js");const E=(e,t)=>Object(h.a)(e)||"unknown"!==e.mediaType?{}:{mediaType:t}
;var A=r("./node_modules/@atlaskit/media-client/dist/es2019/utils/observableToPromise.js"),I=r("./node_modules/@atlaskit/media-client/dist/es2019/utils/getDimensionsFromBlob.js"),F=r("./node_modules/@atlaskit/media-client/dist/es2019/utils/createFileStateSubject.js"),T=r("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByBrowser.js"),U=r("./node_modules/rxjs/observable/from.js"),C=r("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByServer.js"),M=r("./node_modules/@atlaskit/media-client/dist/es2019/utils/getVideoDimensionsFromBlob.js");async function R(t,n,r){if(("doc"===t||!Object(T.d)(n)||!r)&&Object(C.d)(n))return!0;if("video"===t&&r){const t=(await r).value;if(!(t instanceof Blob))return!1;try{const{width:e,height:n}=await Object(M.a)(t);return!e&&!n}catch(e){return!0}}return!1}var B=r("./node_modules/@atlaskit/media-client/dist/es2019/utils/polling/index.js")
;var L=r("./node_modules/@atlaskit/media-common/dist/es2019/mediaFeatureFlags.js");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ${constructor(e){i()(this,"createDownloadFileStream",((e,t,n)=>{const r=Object(F.a)(),{featureFlags:o}=this.mediaStore,i={poll_intervalMs:Object(L.a)("poll_intervalMs",o),
poll_maxAttempts:Object(L.a)("poll_maxAttempts",o),poll_backoffFactor:Object(L.a)("poll_backoffFactor",o),poll_maxIntervalMs:Object(L.a)("poll_maxIntervalMs",o)},s=new B.a(i);return s.onError=e=>r.error(e),s.execute((async()=>{const o=await this.dataloader.load({id:e,collectionName:t});if(!o)throw new b.a("emptyItems",e,{collectionName:t,occurrenceKey:n});if(function(e,t=Date.now()){const{artifacts:n,mediaType:r,mimeType:o,name:i,processingStatus:s,representations:a,size:c,createdAt:l}=e;if(!(n||r||o||i||s||a||c||"number"!=typeof l)&&t-l>432e5)return!0;return!1}(o))throw new b.a("zeroVersionFile",e,{collectionName:t,occurrenceKey:n});const i=Object(h.i)(e,o);switch(r.next(i),i.status){case"processing":s.next();break;case"processed":r.complete()}})),r})),this.mediaStore=e,this.dataloader=S(e)}getFileState(e,t={}){const{collectionName:n,occurrenceKey:r}=t;if(!w()(e)){const t=Object(F.a)();return t.error(new b.a("invalidFileId",e,{collectionName:n,occurrenceKey:r})),t}
return Object(v.b)().getOrInsert(e,(()=>this.createDownloadFileStream(e,n)))}getCurrentState(e,t){return Object(A.a)(this.getFileState(e,t))}getArtifactURL(e,t,n){return this.mediaStore.getArtifactURL(e,t,n)}getFileBinaryURL(e,t){return this.mediaStore.getFileBinaryURL(e,t)}touchFiles(e,t){return this.mediaStore.touchFiles({descriptors:e},{collection:t}).then((({data:e})=>e))}generateUploadableFileUpfrontIds(e){const t=u()(),n=u()(),r={fileId:t,occurrenceKey:n,collection:e};return{id:t,occurrenceKey:n,deferredUploadId:this.touchFiles([r],e).then((e=>e.created[0].uploadId))}}async uploadExternal(e,t){const n=this.generateUploadableFileUpfrontIds(t),{id:r,occurrenceKey:o}=n,i=Object(F.a)(),s=fetch(e).then((e=>e.blob())).catch((()=>{})),a=new Promise((async(e,t)=>{const n=await s;n||t("Could not fetch the blob"),e({value:n,origin:"remote"})})),c=e.split("/").pop()||"",l={status:"processing",name:c,size:0,mediaType:"unknown",mimeType:"",id:r,occurrenceKey:o,preview:a};return i.next(l),
Object(v.b)().set(r,i),new Promise((async(e,l)=>{const d=await s;if(!d)return l("Could not download remote file");const{type:u,size:p}=d,m={content:d,mimeType:u,collection:t,name:c},f=Object(P.a)(u);i.next({status:"processing",name:c,size:p,mediaType:f,mimeType:u,id:r,occurrenceKey:o,preview:a}),this.upload(m,void 0,n);e({dimensions:await Object(I.a)(f,d),uploadableFileUpfrontIds:n})}))}upload(e,t,n){"string"==typeof e.content&&(e.content=(e=>{const t=e.split(",")[1],n=atob(t),r=[];for(let o=0;o<n.length;o+=512){const e=n.slice(o,o+512),t=e.split("").map(((t,n)=>e.charCodeAt(n))),i=new Uint8Array(t);r.push(i)}return new Blob(r,{type:"image/jpeg"})})(e.content));const{content:r,name:o="",collection:i}=e;n||(n=this.generateUploadableFileUpfrontIds(i));const d=n.id,u=n.occurrenceKey;let p,m="",f=0;const h=(e=>{if(e.content instanceof Blob){const t=e.content.type;return Object(P.a)(t)}return"unknown"})(e),b=Object(F.a)(),j=new s.Subscription;r instanceof Blob&&(f=r.size,m=r.type,
Object(T.d)(r.type)&&(p={value:r,origin:"local"}));const g={id:d,occurrenceKey:u,name:o,size:f,mediaType:h,mimeType:m,preview:p},w=e=>{b.next(N(N({status:"uploading"},g),{},{progress:e}))},{cancel:_}=Object(y.a)(e,this.mediaStore,n,{onUploadFinish:e=>{if(e)return b.error(e);j.add(function(e,t,n){return Object(U.from)(R(e,t,n))}(h,m,p).pipe(Object(l.concatMap)((e=>e?this.createDownloadFileStream(d,i,u).pipe(Object(c.map)((e=>N(N(N({},g),e),E(e,h))))):Object(a.of)(N({status:"processing",representations:{}},g))))).subscribe(b))},onProgress:w});return Object(v.b)().set(d,b),setTimeout((()=>{w(0)}),0),t&&t.setAbort((()=>{_(),j.unsubscribe()})),b}async downloadBinary(e,t="download",n){const r=await this.mediaStore.getFileBinaryURL(e,n);Object(m.a)(r,{name:t}),j.a.emit("media-viewed",{fileId:e,isUserCollection:"recents"===n,viewingLevel:"download"})}async copyFile(e,t,n={}){
const{authProvider:r,collection:o,id:i}=e,{authProvider:s,collection:a,replaceFileId:c,occurrenceKey:l}=t,{preview:d,mimeType:u}=n,m=t.mediaStore||new f.a({authProvider:s}),b={sourceFile:{id:i,collection:o,owner:Object(p.authToOwner)(await r({collectionName:o}))}},y={collection:a,replaceFileId:c,occurrenceKey:l},j=Object(v.b)();let g;try{const{data:e}=await m.copyFileWithToken(b,y),t=N(N({},e),u?{mimeType:u}:void 0),{id:n,mimeType:r}=t,o=r?Object(P.a)(r):"unknown",i=Object(h.h)({data:t}),s=j.get(n)||Object(F.a)(),c=!Object(h.a)(i)&&d?{preview:d}:{};return!Object(h.b)(i)&&r&&await R(o,r,d)?(s.next(N(N(N({},i),E(i,o)),c)),g=this.createDownloadFileStream(n,a,l).subscribe({next:e=>s.next(N(N(N({},e),E(e,o)),!Object(h.a)(e)&&c)),error:e=>s.error(e),complete:()=>s.complete()})):Object(h.f)(i)||s.next(N(N({},i),!Object(h.a)(i)&&c)),j.has(n)||Object(v.b)().set(n,s),e}catch(w){if(g&&g.unsubscribe(),c){const e=j.get(c);e?e.error(w):j.set(i,Object(F.a)(w))}throw w}}}},
"./node_modules/@atlaskit/media-client/dist/es2019/client/media-client.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("./node_modules/eventemitter2/lib/eventemitter2.js"),o=n("./node_modules/@atlaskit/media-client/dist/es2019/client/media-store/index.js"),i=n("./node_modules/@atlaskit/media-client/dist/es2019/client/collection-fetcher.js"),s=n("./node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/index.js"),a=n("./node_modules/@atlaskit/media-client/dist/es2019/client/stargate-client.js");class c{constructor(e,t){this.mediaClientConfig=e,this.featureFlags=t,this.mediaStore=new o.a({authProvider:e.authProvider},t),this.config=e,this.collection=new i.a(this.mediaStore),this.file=new s.a(this.mediaStore),this.eventEmitter=new r.EventEmitter2,this.stargate=new a.a(e.stargateBaseUrl)}getImage(e,t,n,r){return this.mediaStore.getImage(e,t,n,r)}getImageUrl(e,t){return this.mediaStore.getFileImageURL(e,t)}async getImageMetadata(e,t){
return(await this.mediaStore.getImageMetadata(e,t)).metadata}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){return this.eventEmitter.emit(e,t)}}},"./node_modules/@atlaskit/media-client/dist/es2019/client/media-store/error.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("./node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js");class o extends r.a{constructor(e,t){super(e),this.reason=e,this.innerError=t}get attributes(){const{reason:e,innerError:t}=this;return{reason:e,innerError:t}}}function i(e){return e instanceof o}},"./node_modules/@atlaskit/media-client/dist/es2019/client/media-store/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}))
;var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("./node_modules/@atlaskit/media-client/dist/es2019/constants.js"),s=n("./node_modules/@atlaskit/media-client/dist/es2019/models/artifacts.js"),a=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/request/index.js"),c=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/request/helpers.js"),l=n("./node_modules/@atlaskit/media-client/dist/es2019/client/media-store/error.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m={"max-age":i.a,allowAnimated:!0,mode:"crop"},f={limit:30,sortDirection:"desc"},h=(e,t=!1)=>u(u(u({},m),e),t?{width:4096,height:4096}:{}),b={Accept:"application/json","Content-Type":"application/json"};class y{constructor(e,t){o()(this,"resolveAuth",(e=>(async(e,t)=>{let n;try{n=await e(t)}catch(r){throw new l.a("failedAuthProvider",r)}return n})(this.config.authProvider,e))),this.config=e,this.featureFlags=t}async getCollectionItems(e,t){const n={method:"GET",endpoint:"/collection/{collectionName}/items"},r=u(u({},n),{},{authContext:{collectionName:e},params:u(u({},f),t),headers:{Accept:"application/json"}}),o=await this.request(`/collection/${e}/items`,r),{data:{contents:i,nextInclusiveStartKey:s}}=await Object(c.b)(n)(o);return{data:{
contents:i.filter((e=>e.details.size&&e.details.size>0)),nextInclusiveStartKey:s}}}async removeCollectionFile(e,t,n){const r={actions:[{action:"remove",item:{type:"file",id:e,occurrenceKey:n}}]},o=u(u({},{method:"PUT",endpoint:"/collection/{collectionName}"}),{},{authContext:{collectionName:t},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});await this.request(`/collection/${t}`,o)}createUpload(e=1,t){const n={method:"POST",endpoint:"/upload"},r=u(u({},n),{},{authContext:{collectionName:t},params:{createUpTo:e},headers:{Accept:"application/json"}});return this.request("/upload",r).then(Object(c.b)(n))}async uploadChunk(e,t,n){const r=u(u({},{method:"PUT",endpoint:"/chunk/{etag}"}),{},{authContext:{collectionName:n},body:t});await this.request(`/chunk/${e}`,r)}probeChunks(e,t){const n={method:"POST",endpoint:"/chunk/probe"},r=u(u({},n),{},{authContext:{collectionName:t},headers:b,body:JSON.stringify({chunks:e})})
;return this.request("/chunk/probe",r).then(Object(c.b)(n))}createFileFromUpload(e,t={}){const n={method:"POST",endpoint:"/file/upload"},r=u(u({},n),{},{authContext:{collectionName:t.collection},params:t,headers:b,body:JSON.stringify(e)});return this.request("/file/upload",r).then(Object(c.b)(n))}touchFiles(e,t={}){const n={method:"POST",endpoint:"/upload/createWithFiles"},r=u(u({},n),{},{authContext:{collectionName:t.collection},headers:b,body:JSON.stringify(e)});return this.request("/upload/createWithFiles",r).then(Object(c.b)(n))}getFile(e,t={}){const n={method:"GET",endpoint:"/file/{fileId}"},r=u(u({},n),{},{authContext:{collectionName:t.collection},params:t});return this.request(`/file/${e}`,r).then(Object(c.b)(n))}async getFileImageURL(e,t){const{collection:n}=t||{},r=await this.resolveAuth({collectionName:n}),o={params:h(t),auth:r};return Object(c.d)(`${r.baseUrl}/file/${e}/image`,o)}async getFileBinaryURL(e,t){const n=await this.resolveAuth({collectionName:t}),r={params:{dl:!0,
collection:t,"max-age":i.a},auth:n};return Object(c.d)(`${n.baseUrl}/file/${e}/binary`,r)}async getArtifactURL(e,t,n){const r=Object(s.a)(e,t);if(!r)throw new Error(`artifact ${t} not found`);const o=await this.resolveAuth({collectionName:n}),a={params:{collection:n,"max-age":i.a},auth:o};return Object(c.d)(`${o.baseUrl}${r}`,a)}async getImage(e,t,n,r){let o;const i={method:"GET",endpoint:"/file/{fileId}/image"},s=u(u({},i),{},{authContext:{collectionName:t&&t.collection},params:h(t,r),headers:o});return this.request(`/file/${e}/image`,s,n).then(Object(c.a)(i))}async getItems(e,t){const n=e.map((e=>({type:"file",id:e,collection:t}))),r={method:"POST",endpoint:"/items"},o=u(u({},r),{},{authContext:{collectionName:t},headers:b,body:JSON.stringify({descriptors:n})});return this.request("/items",o).then(Object(c.b)(r))}async getImageMetadata(e,t){const n={method:"GET",endpoint:"/file/{fileId}/image/metadata"},r=u(u({},n),{},{authContext:{collectionName:t&&t.collection},params:t})
;return this.request(`/file/${e}/image/metadata`,r).then(Object(c.b)(n))}async appendChunksToUpload(e,t,n){const r=u(u({},{method:"PUT",endpoint:"/upload/{uploadId}/chunks"}),{},{authContext:{collectionName:n},headers:b,body:JSON.stringify(t)});await this.request(`/upload/${e}/chunks`,r)}copyFileWithToken(e,t){const n={method:"POST",endpoint:"/file/copy/withToken"},r=u(u({},n),{},{authContext:{collectionName:t.collection},params:t,headers:b,body:JSON.stringify(e)});return this.request("/file/copy/withToken",r).then(Object(c.b)(n))}async request(e,t={method:"GET",endpoint:void 0,authContext:{}},n){const{method:r,endpoint:o,authContext:i,params:s,headers:c,body:l,clientOptions:d}=t,u=await this.resolveAuth(i),p=await Object(a.a)(`${u.baseUrl}${e}`,{method:r,endpoint:o,auth:u,params:s,headers:c,body:l,clientOptions:d},n);return function(e){if(!e||!window||!window.sessionStorage)return
;window.sessionStorage.getItem("media-api-region")!==e&&window.sessionStorage.setItem("media-api-region",e)}(p.headers.get("x-media-region")),p}}},"./node_modules/@atlaskit/media-client/dist/es2019/client/stargate-client.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e){this.baseUrl=e||"/gateway/api"}async fetchToken(e){return(await fetch(`${this.baseUrl}/media/auth/smartedge`,{credentials:"include",headers:{"x-client-id":e}})).json()}isTokenExpired(e){const t=(new Date).getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0}}},"./node_modules/@atlaskit/media-client/dist/es2019/constants.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));const r="recents",o=2592e3,i=4096},"./node_modules/@atlaskit/media-client/dist/es2019/file-streams-cache.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));class r{constructor(e){
this.streams=e}has(e){return!!this.streams.find(e)}set(e,t){this.streams.set(e,t)}get(e){return this.streams.get(e)}getOrInsert(e,t){return this.has(e)||this.set(e,t()),this.get(e)}removeAll(){this.streams.removeAll()}remove(e){this.streams.remove(e)}get size(){return this.streams.size}}let o;const i=()=>{if(!o){const e=n("./node_modules/@atlaskit/media-core/dist/es2019/index.js").mediaState;o=new r(e.streams)}return o}},"./node_modules/@atlaskit/media-client/dist/es2019/globalMediaEventEmitter.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/@atlaskit/media-core/dist/es2019/index.js");const o={on(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.on(e,t)},off(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.off(e,t)},emit(e,t){if(r.mediaState.eventEmitter)return r.mediaState.eventEmitter.emit(e,t)}}},"./node_modules/@atlaskit/media-client/dist/es2019/identifier.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),
n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var r=n("./node_modules/deep-equal/index.js"),o=n.n(r);const i=e=>"file"===e.mediaItemType,s=e=>"external-image"===e.mediaItemType,a=(e,t)=>i(e)&&i(t)?e.id!==t.id||e.collectionName!==t.collectionName||e.occurrenceKey!==t.occurrenceKey:!o()(e,t)},"./node_modules/@atlaskit/media-client/dist/es2019/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"MediaStore",(function(){return r.a})),n.d(t,"MediaStoreError",(function(){return o.a})),n.d(t,"isMediaStoreError",(function(){return o.b})),n.d(t,"UploadController",(function(){return i.a})),n.d(t,"isPreviewableType",(function(){return s.b})),n.d(t,"isMediaCollectionItemFullDetails",(function(){return s.a})),n.d(t,"getArtifactUrl",(function(){return a.a})),n.d(t,"isMediaClientError",(function(){return c.b})),n.d(t,"getMediaClientErrorReason",(function(){return c.a})),n.d(t,"isUploadingFileState",(function(){return l.g})),n.d(t,"isProcessingFileState",(function(){return l.f
})),n.d(t,"isProcessedFileState",(function(){return l.e})),n.d(t,"isErrorFileState",(function(){return l.a})),n.d(t,"isPreviewableFileState",(function(){return l.d})),n.d(t,"isFinalFileState",(function(){return l.b})),n.d(t,"isImageRepresentationReady",(function(){return l.c})),n.d(t,"mapMediaFileToFileState",(function(){return l.h})),n.d(t,"mapMediaItemToFileState",(function(){return l.i})),n.d(t,"getFileStreamsCache",(function(){return d.b})),n.d(t,"StreamsCache",(function(){return d.a})),n.d(t,"uploadFile",(function(){return u.a})),n.d(t,"request",(function(){return p.a})),n.d(t,"RequestError",(function(){return m.a})),n.d(t,"isRequestError",(function(){return m.b})),n.d(t,"isRateLimitedError",(function(){return f.g})),n.d(t,"isAbortedRequestError",(function(){return f.f})),n.d(t,"mapResponseToJson",(function(){return f.i})),n.d(t,"mapResponseToBlob",(function(){return f.h})),n.d(t,"mapResponseToVoid",(function(){return f.j})),n.d(t,"createUrl",(function(){return f.d})),
n.d(t,"PollingFunction",(function(){return h.a})),n.d(t,"isPollingError",(function(){return b.b})),n.d(t,"PollingError",(function(){return b.a})),n.d(t,"FileFetcherImpl",(function(){return y.a})),n.d(t,"FileFetcherError",(function(){return v.a})),n.d(t,"isFileFetcherError",(function(){return v.b})),n.d(t,"CollectionFetcher",(function(){return j.a})),n.d(t,"MediaClient",(function(){return g.a})),n.d(t,"StargateClient",(function(){return w.a})),n.d(t,"isImageRemote",(function(){return _})),n.d(t,"checkWebpSupport",(function(){return x})),n.d(t,"observableToPromise",(function(){return k.a})),n.d(t,"getDimensionsFromBlob",(function(){return S.a})),n.d(t,"createFileStateSubject",(function(){return P.a})),n.d(t,"safeUnsubscribe",(function(){return E})),n.d(t,"isFileIdentifier",(function(){return A.c})),n.d(t,"isExternalImageIdentifier",(function(){return A.b})),n.d(t,"isDifferentIdentifier",(function(){return A.a})),n.d(t,"withMediaClient",(function(){return I.b})),
n.d(t,"getMediaClient",(function(){return I.a})),n.d(t,"globalMediaEventEmitter",(function(){return F.a})),n.d(t,"isMediaBlobUrl",(function(){return T.c})),n.d(t,"getAttrsFromUrl",(function(){return T.b})),n.d(t,"addFileAttrsToUrl",(function(){return T.a})),n.d(t,"objectToQueryString",(function(){return T.d})),n.d(t,"RECENTS_COLLECTION",(function(){return U.c})),n.d(t,"MAX_RESOLUTION",(function(){return U.b})),n.d(t,"getMediaTypeFromMimeType",(function(){return B})),n.d(t,"isImageMimeTypeSupportedByBrowser",(function(){return L})),n.d(t,"isDocumentMimeTypeSupportedByBrowser",(function(){return D})),n.d(t,"isMimeTypeSupportedByBrowser",(function(){return N})),n.d(t,"isImageMimeTypeSupportedByServer",(function(){return z})),n.d(t,"isDocumentMimeTypeSupportedByServer",(function(){return $})),n.d(t,"isAudioMimeTypeSupportedByServer",(function(){return q})),n.d(t,"isVideoMimeTypeSupportedByServer",(function(){return K})),n.d(t,"isUnknownMimeTypeSupportedByServer",(function(){return W})),
n.d(t,"isMimeTypeSupportedByServer",(function(){return H}))
;var r=n("./node_modules/@atlaskit/media-client/dist/es2019/client/media-store/index.js"),o=n("./node_modules/@atlaskit/media-client/dist/es2019/client/media-store/error.js"),i=n("./node_modules/@atlaskit/media-client/dist/es2019/upload-controller.js"),s=n("./node_modules/@atlaskit/media-client/dist/es2019/models/media.js"),a=n("./node_modules/@atlaskit/media-client/dist/es2019/models/artifacts.js"),c=n("./node_modules/@atlaskit/media-client/dist/es2019/models/errors/helpers.js"),l=n("./node_modules/@atlaskit/media-client/dist/es2019/models/file-state.js"),d=n("./node_modules/@atlaskit/media-client/dist/es2019/file-streams-cache.js"),u=n("./node_modules/@atlaskit/media-client/dist/es2019/uploader.js"),p=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/request/index.js"),m=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/request/errors.js"),f=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/request/helpers.js"),h=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/polling/index.js"),b=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/polling/errors.js"),y=n("./node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/index.js"),v=n("./node_modules/@atlaskit/media-client/dist/es2019/client/file-fetcher/error.js"),j=n("./node_modules/@atlaskit/media-client/dist/es2019/client/collection-fetcher.js"),g=n("./node_modules/@atlaskit/media-client/dist/es2019/client/media-client.js"),w=n("./node_modules/@atlaskit/media-client/dist/es2019/client/stargate-client.js")
;const _=(e,t=window.location.origin)=>{if(URL&&URL.prototype){const n=new URL(e);return!!n.host&&n.origin!==t}return!0};let O;const x=()=>void 0!==O?Promise.resolve(O):new Promise((e=>{const t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=()=>{O=2===t.height,e(O)}}));var k=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/observableToPromise.js"),S=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/getDimensionsFromBlob.js"),P=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/createFileStateSubject.js");const E=e=>{console.warn("safeUnsubscribe() is deprecated and will be removed in the next media-client major version"),setTimeout((()=>e&&e.unsubscribe()),0)}
;var A=n("./node_modules/@atlaskit/media-client/dist/es2019/identifier.js"),I=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/with-media-client-hoc.js"),F=n("./node_modules/@atlaskit/media-client/dist/es2019/globalMediaEventEmitter.js"),T=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/url.js"),U=n("./node_modules/@atlaskit/media-client/dist/es2019/constants.js"),C=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/index.js"),M=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByBrowser.js"),R=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByServer.js");const B=C.a,L=M.c,D=M.b,N=M.d,z=R.c,$=R.b,q=R.a,K=R.f,W=R.e,H=R.d},"./node_modules/@atlaskit/media-client/dist/es2019/models/artifacts.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{const n=e[t];if(n&&n.url)return n.url}},
"./node_modules/@atlaskit/media-client/dist/es2019/models/errors/helpers.js":function(e,t,n){"use strict";function r(e){return e instanceof Object&&"attributes"in e&&e.attributes instanceof Object&&"reason"in e.attributes&&e instanceof Error}function o(e){return r(e)?e.attributes.reason:"unknown"}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},"./node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}},"./node_modules/@atlaskit/media-client/dist/es2019/models/file-state.js":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return f}))
;const s=e=>"uploading"===e.status,a=e=>"processing"===e.status,c=e=>"processed"===e.status,l=e=>"error"===e.status,d=e=>!l(e)&&!!e.preview,u=e=>["processed","failed-processing","error"].includes(e.status),p=e=>{switch(e.status){case"processing":case"processed":case"failed-processing":return!(!e.representations||!e.representations.image);default:return!1}},m=e=>{const{id:t,name:n,size:r,processingStatus:i,artifacts:s,mediaType:a,mimeType:c,representations:l,createdAt:d}=e.data,u={id:t,name:n,size:r,mediaType:a,mimeType:c,artifacts:s,representations:l,createdAt:d};switch(i){case"pending":case void 0:return o(o({},u),{},{status:"processing"});case"succeeded":return o(o({},u),{},{status:"processed"});case"failed":return o(o({},u),{},{status:"failed-processing"})}},f=(e,t)=>m({data:o({id:e},t)})},"./node_modules/@atlaskit/media-client/dist/es2019/models/media.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}))
;var r=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaFeatureFlags.js");const o=(e,t)=>{const n=["audio","video","image"];return Object(r.a)("newCardExperience",t)?[...n,"doc"].indexOf(e)>-1:n.indexOf(e)>-1},i=e=>!!e.mediaType&&!!e.mimeType&&!!e.processingStatus},"./node_modules/@atlaskit/media-client/dist/es2019/upload-controller.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(){}setAbort(e){this.abortFunction=e}abort(){this.abortFunction&&this.abortFunction()}}},"./node_modules/@atlaskit/media-client/dist/es2019/uploader.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("./node_modules/@atlaskit/chunkinator/dist/es2019/chunkinator.js"),o=n("./node_modules/rxjs/observable/from.js"),i=n("./node_modules/rxjs/operators/concatMap.js");let s=null;const a=async e=>(await(async()=>{if(!s)try{
const{WorkerHasher:e}=await n.e("3d11798d60").then(n.bind(null,"./node_modules/@atlaskit/media-client/dist/es2019/utils/hashing/workerHasher.js"));s=new e(3)}catch(e){const{SimpleHasher:t}=await n.e("cb7763cce7").then(n.bind(null,"./node_modules/@atlaskit/media-client/dist/es2019/utils/hashing/simpleHasher.js"));s=new t}return s})()).hash(e),c=(e,t)=>async n=>{const r=(await e.probeChunks(p(n),t)).data.results;return Object.values(r).map((e=>e.exists))},l=(e,t)=>n=>e.uploadChunk(n.hash,n.blob,t),d=(e,t,n)=>{let r=0;return async o=>{await e.appendChunksToUpload(await t,{chunks:p(o),offset:r},n),r+=o.length}},u=(e,t,n,s)=>{const{content:u,collection:p}=e,{deferredUploadId:m}=n,f=Object(r.a)(u,{hashingFunction:a,hashingConcurrency:5,probingBatchSize:100,chunkSize:4194304,uploadingConcurrency:3,uploadingFunction:l(t,p),probingFunction:c(t,p),processingBatchSize:1e3,processingFunction:d(t,m,p)},{onProgress(e){s&&s.onProgress(e)}
}),h=s&&s.onUploadFinish||(()=>{}),b=Object(o.from)(m).pipe(Object(i.concatMap)((r=>f.pipe(Object(i.concatMap)((()=>Object(o.from)((async(e,t,n,r)=>{const{collection:o,name:i,mimeType:s}=e,{id:a,occurrenceKey:c}=n;return t.createFileFromUpload({uploadId:r,name:i,mimeType:s},{occurrenceKey:c,collection:o,replaceFileId:a})})(e,t,n,r)))))))).subscribe({error:e=>h(e),complete:()=>h()});return{cancel:()=>{b.unsubscribe(),h("canceled")}}},p=e=>e.map((e=>e.hash))},"./node_modules/@atlaskit/media-client/dist/es2019/utils/createFileStateSubject.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/rxjs/ReplaySubject.js");const o=e=>{const t=new r.ReplaySubject(1);return e instanceof Error?t.error(e):e&&t.next(e),t}},"./node_modules/@atlaskit/media-client/dist/es2019/utils/getDimensionsFromBlob.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/getVideoDimensionsFromBlob.js")
;const o=async(e,t)=>{switch(e){case"image":{const e=URL.createObjectURL(t);try{return await(e=>new Promise(((t,n)=>{const r=new Image;r.src=e,r.onload=()=>t({width:r.width,height:r.height}),r.onerror=n})))(e)}finally{URL.revokeObjectURL(e)}}case"video":return Object(r.a)(t);default:throw new Error(`Can't extract dimensions from ${e}`)}}},"./node_modules/@atlaskit/media-client/dist/es2019/utils/getVideoDimensionsFromBlob.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/video-snapshot/dist/es2015/index.js");const o=async(e,t=new r.a(e))=>{try{return await t.getDimensions()}finally{t.end()}}},"./node_modules/@atlaskit/media-client/dist/es2019/utils/observableToPromise.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./node_modules/rxjs/Subscription.js");const o=(e,t=new r.Subscription)=>new Promise(((n,r)=>t.add(e.subscribe({next:e=>{n(e),t.unsubscribe()},error:e=>{r(e),t.unsubscribe()}}))))},
"./node_modules/@atlaskit/media-client/dist/es2019/utils/polling/errors.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("./node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js");class o extends r.a{constructor(e,t){super(e),this.reason=e,this.attempts=t}get attributes(){const{reason:e,attempts:t}=this;return{reason:e,attempts:t}}}function i(e){return e instanceof o}},"./node_modules/@atlaskit/media-client/dist/es2019/utils/polling/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaFeatureFlags.js"),s=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/polling/errors.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={poll_intervalMs:Object(i.a)("poll_intervalMs"),poll_maxAttempts:Object(i.a)("poll_maxAttempts"),poll_backoffFactor:Object(i.a)("poll_backoffFactor"),poll_maxIntervalMs:Object(i.a)("poll_maxIntervalMs")};class u{constructor(e){o()(this,"poll_intervalMs",0),o()(this,"attempt",1),o()(this,"shouldIterate",!0),o()(this,"timeoutId",0),this.options=c(c({},d),e),this.poll_intervalMs=this.options.poll_intervalMs}async execute(e){
const{poll_maxAttempts:t}=this.options;if(0===t)return this.fail(new s.a("pollingMaxAttemptsExceeded",this.attempt));try{if(this.shouldIterate=!1,await e(),!this.shouldIterate)return;if(this.attempt>=t)return this.fail(new s.a("pollingMaxAttemptsExceeded",this.attempt));this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout((()=>this.execute(e)),this.poll_intervalMs)}catch(n){this.fail(n)}}fail(e){const{onError:t}=this;this.cancel(),t&&t(e)}getIntervalMsForIteration(e){let t=this.options.poll_intervalMs;if(1===e)return t;for(let n=2;n<=e;n++)t*=this.options.poll_backoffFactor;return Math.min(Math.round(t),this.options.poll_maxIntervalMs)}next(){this.shouldIterate=!0}cancel(){window.clearTimeout(this.timeoutId),this.timeoutId=0}}},"./node_modules/@atlaskit/media-client/dist/es2019/utils/request/errors.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}))
;var r=n("./node_modules/@atlaskit/media-client/dist/es2019/models/errors/index.js");class o extends r.a{constructor(e,t,n){super(e),this.reason=e,this.metadata=t,this.innerError=n}get attributes(){const{reason:e,metadata:{method:t,endpoint:n,attempts:r,clientExhaustedRetries:o,statusCode:i}={},innerError:s}=this;return{reason:e,method:t,endpoint:n,attempts:r,clientExhaustedRetries:o,statusCode:i,innerError:s}}}function i(e){return e instanceof o}},"./node_modules/@atlaskit/media-client/dist/es2019/utils/request/helpers.js":function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"j",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return w}))
;var r=n("./node_modules/@atlaskit/media-core/dist/es2019/index.js"),o=n("./node_modules/query-string/index.js");var i=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/request/errors.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e instanceof Error&&"request_cancelled"===e.message||!!e&&"AbortError"===e.name}
function d(e){return e instanceof TypeError}function u(e){return!!e&&Object(i.b)(e)&&429===e.attributes.statusCode||!!e&&!!e.message&&e.message.includes("429")}function p(e,{params:t,auth:n}){const{baseUrl:i,queryParams:s}=function(e){const t=e.indexOf("?");return t>0?{baseUrl:e.substring(0,t),queryParams:Object(o.parse)(e.substring(t+1,e.length))}:{baseUrl:e}}(e),c=n&&function(e){return Object(r.isClientBasedAuth)(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}(n),l=Object(o.stringify)(a(a(a({},s),t),c));return`${i}${l.length>0?`?${l}`:""}`}function m(e){return t=>e?a(a({},t||{}),function(e){return Object(r.isClientBasedAuth)(e)?{"X-Client-Id":e.clientId,Authorization:`Bearer ${e.token}`}:{"X-Issuer":e.asapIssuer,Authorization:`Bearer ${e.token}`}}(e)):t}async function f(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.json()}catch(t){throw new i.a("serverInvalidBody",{statusCode:e.status},t)}}
async function h(e){console.warn("Helper is deprecated and will be remove in the next major version");try{return await e.blob()}catch(t){throw new i.a("serverInvalidBody",{statusCode:e.status},t)}}function b(){return console.warn("Helper is deprecated and will be remove in the next major version"),Promise.resolve()}function y(e){return async t=>{try{return await t.json()}catch(n){throw new i.a("serverInvalidBody",a(a({},e),{},{statusCode:t.status}),n)}}}function v(e){return async t=>{try{return await t.blob()}catch(n){throw new i.a("serverInvalidBody",a(a({},e),{},{statusCode:t.status}),n)}}}const j={startTimeoutInMs:1e3,maxAttempts:5,factor:2};async function g(e,t,n={}){const r=a(a({},j),n),{startTimeoutInMs:o,maxAttempts:s,factor:c}=r;let u,p=0,m=o;const f=async()=>{await function(e){return new Promise((t=>setTimeout(t,e)))}(m),m*=c,p+=1};for(;p<s;)try{return await e()}catch(h){if(u=h,l(h))throw new i.a("clientAbortedRequest",t,h)
;if(!d(h)&&!Object(i.b)(h)||Object(i.b)(h)&&(!h.metadata||!h.metadata.statusCode||h.metadata.statusCode<500))throw h;await f()}if(Object(i.b)(u))throw function(e,t){const{reason:n,metadata:r,innerError:o}=e;return new i.a(n,a(a({},r),t),o)}(u,{attempts:p,clientExhaustedRetries:!0});throw new i.a("serverUnexpectedError",a(a({},t),{},{attempts:p,clientExhaustedRetries:!0}),u)}function w(e){return t=>{if(t.ok||t.status<400)return t;throw function(e,t){const{status:n}=t,r=function(e){switch(e){case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 429:return"serverRateLimited";case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}(n);return new i.a(r,a(a({},e),{},{statusCode:n}))}(e,t)}}},"./node_modules/@atlaskit/media-client/dist/es2019/utils/request/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}))
;var r=n("./node_modules/@atlaskit/media-client/dist/es2019/utils/request/helpers.js");async function o(e,t={},n){const{method:o="GET",endpoint:i,auth:s,params:a,headers:c,body:l,clientOptions:d={}}=t,{retryOptions:u}=d,p={method:o,endpoint:i};return Object(r.e)((()=>fetch(Object(r.d)(e,{params:a}),{method:o,body:l,headers:Object(r.k)(s)(c),signal:n&&n.signal}).then(Object(r.c)(p))),p,u)}},"./node_modules/@atlaskit/media-client/dist/es2019/utils/url.js":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return p}));const s="media-blob-url",a=e=>e.indexOf("media-blob-url=true")>-1,c=(e,t)=>{const n=e.get(t);return"string"!=typeof n||isNaN(parseInt(n))?void 0:parseInt(n)},l=(e,t)=>{const n=e.get(t);if(n)return decodeURIComponent(n)},d=e=>{const t=new URL(e).hash.replace("#",""),n=new URLSearchParams(t),r=n.get("id"),o=n.get("contextId");if(r&&o)return{id:r,contextId:o,collection:l(n,"collection"),alt:l(n,"alt"),height:c(n,"height"),width:c(n,"width"),size:c(n,"size"),name:l(n,"name"),mimeType:l(n,"mimeType")}},u=e=>Object.keys(e).filter((t=>void 0!==e[t]&&null!==e[t])).map((t=>{const n=e[t];if(null!=n)return`${encodeURIComponent(t)}=${encodeURIComponent(n.toString())}`
})).join("&"),p=(e,t)=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return e;const n=o(o({},{[s]:"true"}),t);return`${e}#${u(n)}`}},"./node_modules/@atlaskit/media-client/dist/es2019/utils/with-media-client-hoc.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var r=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),i=n("./node_modules/react/index.js"),s=n.n(i),a=n("./node_modules/@atlaskit/media-client/dist/es2019/client/media-client.js");const c=["mediaClientConfig"];function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const d=new Map,u=(e,t)=>{let n=d.get(e);return n||(n=new a.a(e,t),
d.set(e,n)),n},p=(e,t)=>class extends s.a.Component{render(){const n=this.props,{mediaClientConfig:r}=n,i=l(n,c),d=r?u(r,t):(e=>{const t={authProvider:()=>Promise.resolve({clientId:"",token:"",baseUrl:""})};return new a.a(t,e)})(t);return s.a.createElement(e,o()({},i,{mediaClient:d}))}}},"./node_modules/@atlaskit/media-common/dist/es2019/downloadUrl.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t)=>{const n=!!window.MSInputMethodContext&&!!document.documentMode,r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),o="media-download-iframe",i=document.createElement("a");let s=document.getElementById(o);s||(s=document.createElement("iframe"),s.style.display="none",s.id=o,s.name=o,document.body.appendChild(s)),i.href=e,t&&t.name&&(i.download=t.name),i.target=n||r?"_blank":o,document.body.appendChild(i),i.click(),document.body.removeChild(i)}},"./node_modules/@atlaskit/media-common/dist/es2019/mediaFeatureFlags.js":function(t,n,r){"use strict"
;r.d(n,"a",(function(){return s}));const o=t=>{try{return"undefined"!=typeof window&&window.localStorage?window.localStorage.getItem(t):null}catch(e){}return null},i={newCardExperience:!1,zipPreviews:!1,captions:!1,folderUploads:!1,codeViewer:!1,poll_intervalMs:3e3,poll_maxAttempts:30,poll_backoffFactor:1.25,poll_maxIntervalMs:2e5};function s(t,n){const r=o(t);if(null!==r)try{return JSON.parse(r)}catch(e){}return n&&t in n?n[t]:i[t]}Object.keys(i).forEach((e=>{const t=o(e);null!==t&&console.info(`%c* LOCAL * MediaFeatureFlag.${e} = ${t}`,"font-weight:bold;color:cyan")}))},"./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByBrowser.js"),o=n("./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByServer.js")
;const i=e=>(e=>["application/x-archive","application/x-cpio","application/x-shar","application/x-iso9660-image","application/x-sbx","application/x-tar","application/x-bzip2","application/gzip","application/x-gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/zstd","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-freearc","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/java-archive","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/x-ms-wim","application/x-xar","application/zip","application/x-zoo","application/x-par2"].indexOf(e.toLowerCase())>-1)(e)?"archive":Object(r.c)(e)||Object(o.c)(e)?"image":Object(r.b)(e)||Object(o.b)(e)?"doc":Object(r.a)(e)||Object(o.a)(e)?"audio":Object(r.e)(e)||Object(o.f)(e)?"video":"unknown"
},"./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByBrowser.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return a}));const r=e=>["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/webp"].indexOf(e.toLowerCase())>-1,o=e=>"application/pdf"===e.toLowerCase(),i=e=>["audio/aac","audio/flac","audio/mp4","audio/mpeg","audio/ogg","audio/x-ogg","audio/wav","audio/x-wav"].indexOf(e.toLowerCase())>-1,s=e=>["video/mp4","video/quicktime"].indexOf(e.toLowerCase())>-1,a=e=>o(e)||r(e)||i(e)||s(e)},"./node_modules/@atlaskit/media-common/dist/es2019/mediaTypeUtils/isMimeTypeSupportedByServer.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return a})),
n.d(t,"d",(function(){return c}))
;const r=e=>["image/bmp","image/x-windows-bmp","application/dicom","image/gif","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/png","application/png","application/x-png","application/vnd.adobe.photoshop","image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd","image/tiff","image/x-tif","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/svg+xml","image/heif","image/heif-sequence","image/heic","image/heic-sequence"].indexOf(e.toLowerCase())>-1,o=e=>["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/vnd.adobe.illustrator","application/vnd.ms-office","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-excel.template.macroenabled.12","application/vnd.ms-excel.addin.macroenabled.12","application/vnd.ms-excel.sheet.macroenabled","application/vnd.ms-excel.template.macroenabled","application/vnd.ms-excel.addin.macroenabled","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/x-vnd.oasis.opendocument.presentation","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.oasis.opendocument.spreadsheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-master","application/x-vnd.oasis.opendocument.text","application/x-vnd.oasis.opendocument.text-template","application/x-vnd.oasis.opendocument.text-master","application/vnd.wordperfect","text/csv","text/x-diff","text/x-perl","text/x-python","text/x-ruby","text/rtf","text/richtext","text/plain","application/txt","application/rtf","application/x-rtf","application/postscript"].indexOf(e.toLowerCase())>-1,i=e=>["audio/aac","audio/x-hx-aac-adts","audio/vnd.dolby.dd-raw","audio/aiff","audio/x-aiff","audio/x-monkeys-audio","audio/x-ape","audio/basic","audio/flac","audio/mp4","audio/midi","audio/x-matroska","audio/x-mod","audio/mpeg","audio/ogg","audio/x-ogg","audio/x-pn-realaudio","audio/wav","audio/x-wav","audio/x-ms-wma"].indexOf(e.toLowerCase())>-1,s=e=>["video/3gpp","video/3gpp2","video/x-ms-asf","video/avi","video/msvideo","video/x-msvideo","video/x-dv","video/x-flv","video/m2ts","video/x-m4v","video/x-matroska","video/quicktime","video/mp4","video/mpeg","video/ogg","video/x-ogg","video/webm","video/x-ms-wmv"].indexOf(e.toLowerCase())>-1,a=e=>["binary/octet-stream"].indexOf(e.toLowerCase())>-1,c=e=>r(e)||o(e)||i(e)||s(e)||a(e)
},"./node_modules/@atlaskit/media-core/dist/es2019/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"mediaState",(function(){return o})),n.d(t,"isClientBasedAuth",(function(){return i})),n.d(t,"isAsapBasedAuth",(function(){return s})),n.d(t,"authToOwner",(function(){return a}));var r=n("./node_modules/eventemitter2/lib/eventemitter2.js");const o={streams:new(n("./node_modules/lru-fast/lru.js").LRUCache)(1e3),stateDeferreds:new Map,eventEmitter:new r.EventEmitter2};function i(e){return!!e.clientId}function s(e){return!!e.asapIssuer}const a=e=>{if(s(e))return e;return{id:e.clientId,baseUrl:e.baseUrl,token:e.token}}},"./node_modules/dataloader/index.js":function(e,t,n){(function(t,n){var r,o=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"function"!=typeof t)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: "+t+".")
;this._batchLoadFn=t,this._options=n,this._promiseCache=function(e){var t=e&&e.cacheMap;if(!t)return new Map;var n=["get","set","delete","clear"].filter((function(e){return t&&"function"!=typeof t[e]}));if(0!==n.length)throw new TypeError("Custom cacheMap missing methods: "+n.join(", "));return t}(n),this._queue=[]}return e.prototype.load=function(e){var t=this;if(null==e)throw new TypeError("The loader.load() function must be called with a value,but got: "+String(e)+".");var n=this._options,r=!n||!1!==n.batch,o=!n||!1!==n.cache,a=n&&n.cacheKeyFn,c=a?a(e):e;if(o){var l=this._promiseCache.get(c);if(l)return l}var d=new Promise((function(n,o){t._queue.push({key:e,resolve:n,reject:o}),1===t._queue.length&&(r?i((function(){return s(t)})):s(t))}));return o&&this._promiseCache.set(c,d),d},e.prototype.loadMany=function(e){var t=this;if(!Array.isArray(e))throw new TypeError("The loader.loadMany() function must be called with Array<key> but got: "+e+".");return Promise.all(e.map((function(e){
return t.load(e)})))},e.prototype.clear=function(e){var t=this._options&&this._options.cacheKeyFn,n=t?t(e):e;return this._promiseCache.delete(n),this},e.prototype.clearAll=function(){return this._promiseCache.clear(),this},e.prototype.prime=function(e,t){var n=this._options&&this._options.cacheKeyFn,r=n?n(e):e;if(void 0===this._promiseCache.get(r)){var o=t instanceof Error?Promise.reject(t):Promise.resolve(t);this._promiseCache.set(r,o)}return this},e}(),i="object"==typeof t&&"function"==typeof t.nextTick?function(e){r||(r=Promise.resolve()),r.then((function(){return t.nextTick(e)}))}:n||setTimeout;function s(e){var t=e._queue;e._queue=[];var n=e._options&&e._options.maxBatchSize;if(n&&n>0&&n<t.length)for(var r=0;r<t.length/n;r++)a(e,t.slice(r*n,(r+1)*n));else a(e,t)}function a(e,t){var n=t.map((function(e){return e.key})),r=(0,e._batchLoadFn)(n)
;if(!r||"function"!=typeof r.then)return c(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: "+String(r)+"."));r.then((function(e){if(!Array.isArray(e))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: "+String(e)+".");if(e.length!==n.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n"+String(n)+"\n\nValues:\n"+String(e));t.forEach((function(t,n){var r=t.resolve,o=t.reject,i=e[n];i instanceof Error?o(i):r(i)}))})).catch((function(n){return c(e,t,n)}))}function c(e,t,n){t.forEach((function(t){var r=t.key,o=t.reject;e.clear(r),o(n)}))}e.exports=o
}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate)},"./node_modules/deep-equal/index.js":function(t,n,r){var o=r("./node_modules/object-keys/index.js"),i=r("./node_modules/is-arguments/index.js"),s=r("./node_modules/object-is/index.js"),a=r("./node_modules/is-regex/index.js"),c=r("./node_modules/regexp.prototype.flags/index.js"),l=r("./node_modules/is-date-object/index.js"),d=Date.prototype.getTime;function u(t,n,r){var f=r||{};return!!(f.strict?s(t,n):t===n)||(!t||!n||"object"!=typeof t&&"object"!=typeof n?f.strict?s(t,n):t==n:function(t,n,r){var s,f;if(typeof t!=typeof n)return!1;if(p(t)||p(n))return!1;if(t.prototype!==n.prototype)return!1;if(i(t)!==i(n))return!1;var h=a(t),b=a(n);if(h!==b)return!1;if(h||b)return t.source===n.source&&c(t)===c(n);if(l(t)&&l(n))return d.call(t)===d.call(n);var y=m(t),v=m(n);if(y!==v)return!1;if(y||v){if(t.length!==n.length)return!1
;for(s=0;s<t.length;s++)if(t[s]!==n[s])return!1;return!0}if(typeof t!=typeof n)return!1;try{var j=o(t),g=o(n)}catch(e){return!1}if(j.length!==g.length)return!1;for(j.sort(),g.sort(),s=j.length-1;s>=0;s--)if(j[s]!=g[s])return!1;for(s=j.length-1;s>=0;s--)if(!u(t[f=j[s]],n[f],r))return!1;return!0}(t,n,f))}function p(e){return null==e}function m(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}t.exports=u},"./node_modules/define-properties/index.js":function(t,n,r){"use strict";var o=r("./node_modules/object-keys/index.js"),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,a=Array.prototype.concat,c=Object.defineProperty,l=c&&function(){var t={};try{for(var n in c(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(e){return!1}}(),d=function(e,t,n,r){(!(t in e)||function(e){return"function"==typeof e&&"[object Function]"===s.call(e)
}(r)&&r())&&(l?c(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},u=function(e,t){var n=arguments.length>2?arguments[2]:{},r=o(t);i&&(r=a.call(r,Object.getOwnPropertySymbols(t)));for(var s=0;s<r.length;s+=1)d(e,r[s],t[r[s]],n[r[s]])};u.supportsDescriptors=!!l,t.exports=u},"./node_modules/es-abstract/GetIntrinsic.js":function(t,n,r){"use strict";var o,i=TypeError,s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(e){s=null}var a=function(){throw new i},c=s?function(){try{return a}catch(e){try{return s(arguments,"callee").get}catch(t){return a}}}():a,l=r("./node_modules/has-symbols/index.js")(),d=Object.getPrototypeOf||function(e){return e.__proto__},u=o,p=o,m=o,f=o,h="undefined"==typeof Uint8Array?o:d(Uint8Array),b={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":l?d([][Symbol.iterator]()):o,"%ArrayPrototype%":Array.prototype,
"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":p,"%AsyncFunctionPrototype%":o,"%AsyncGenerator%":o,"%AsyncGeneratorFunction%":m,"%AsyncGeneratorPrototype%":o,"%AsyncIteratorPrototype%":f&&l&&Symbol.asyncIterator?f[Symbol.asyncIterator]():o,"%Atomics%":"undefined"==typeof Atomics?o:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?o:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?o:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,
"%Float32Array%":"undefined"==typeof Float32Array?o:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?o:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?o:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?o:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":o,"%GeneratorFunction%":u,"%GeneratorPrototype%":o,"%Int8Array%":"undefined"==typeof Int8Array?o:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?o:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?o:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?o:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?o:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?o:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?d(d([][Symbol.iterator]())):o,"%JSON%":"object"==typeof JSON?JSON:o,
"%JSONParse%":"object"==typeof JSON?JSON.parse:o,"%Map%":"undefined"==typeof Map?o:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l?d((new Map)[Symbol.iterator]()):o,"%MapPrototype%":"undefined"==typeof Map?o:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?o:Promise,"%PromisePrototype%":"undefined"==typeof Promise?o:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?o:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?o:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?o:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?o:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?o:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,
"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?o:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?o:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l?d((new Set)[Symbol.iterator]()):o,"%SetPrototype%":"undefined"==typeof Set?o:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":l?d(""[Symbol.iterator]()):o,"%StringPrototype%":String.prototype,"%Symbol%":l?Symbol:o,"%SymbolPrototype%":l?Symbol.prototype:o,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":c,"%TypedArray%":h,"%TypedArrayPrototype%":h?h.prototype:o,"%TypeError%":i,"%TypeErrorPrototype%":i.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?o:Uint8Array,
"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?o:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?o:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?o:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?o:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?o:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?o:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?o:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?o:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?o:WeakSet.prototype
},y=r("./node_modules/function-bind/index.js").call(Function.call,String.prototype.replace),v=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,j=/\\(\\)?/g,g=function(e){var t=[];return y(e,v,(function(e,n,r,o){t[t.length]=r?y(o,j,"$1"):n||e})),t},w=function(e,t){if(!(e in b))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===b[e]&&!t)throw new i("intrinsic "+e+" exists, but is not available. Please file an issue!");return b[e]};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=g(e),r=w("%"+(n.length>0?n[0]:"")+"%",t),o=1;o<n.length;o+=1)if(null!=r)if(s&&o+1>=n.length){var a=s(r,n[o]);if(!t&&!(n[o]in r))throw new i("base intrinsic for "+e+" exists, but the property is not available.");r=a?a.get||a.value:r[n[o]]}else r=r[n[o]]
;return r}},"./node_modules/es-abstract/helpers/callBind.js":function(e,t,n){"use strict";var r=n("./node_modules/function-bind/index.js"),o=n("./node_modules/es-abstract/GetIntrinsic.js")("%Function%"),i=o.apply,s=o.call;e.exports=function(){return r.apply(s,arguments)},e.exports.apply=function(){return r.apply(i,arguments)}},"./node_modules/eventemitter2/lib/eventemitter2.js":function(e,t,n){(function(r){var o;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(i){var s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==i?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function l(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var o=new Error(n);o.name="MaxListenersExceededWarning",o.emitter=this,o.count=e,r.emitWarning(o)}else console.error(n),console.trace&&console.trace()}function d(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,
c.call(this,e)}function u(e,t,n,r){if(!n)return[];var o,i,s,a,c,l,d,p=[],m=t.length,f=t[r],h=t[r+1];if(r===m&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(o=0,i=n._listeners.length;o<i;o++)e&&e.push(n._listeners[o]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(p=p.concat(u(e,t,n[s],r+1)));return p}if("**"===f){for(s in(d=r+1===m||r+2===m&&"*"===h)&&n._listeners&&(p=p.concat(u(e,t,n,m))),n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!d&&(p=p.concat(u(e,t,n[s],m))),p=p.concat(u(e,t,n[s],r))):p=s===h?p.concat(u(e,t,n[s],r+2)):p.concat(u(e,t,n[s],r)));return p}p=p.concat(u(e,t,n[f],r+1))}if((a=n["*"])&&u(e,t,a,r+1),c=n["**"])if(r<m)for(s in c._listeners&&u(e,t,c,m),c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===h?u(e,t,c[s],r+2):s===f?u(e,t,c[s],r+1):((l={})[s]=c[s],u(e,t,{"**":l},r+1)));else c._listeners?u(e,t,c,m):c["*"]&&c["*"]._listeners&&u(e,t,c["*"],m)
;return p}function p(e,t){for(var n=0,r=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var o=this.listenerTree,s=e.shift();s!==i;){if(o[s]||(o[s]={}),o=o[s],0===e.length)return o._listeners?("function"==typeof o._listeners&&(o._listeners=[o._listeners]),o._listeners.push(t),!o._listeners.warned&&this._maxListeners>0&&o._listeners.length>this._maxListeners&&(o._listeners.warned=!0,l.call(this,o._listeners.length,s))):o._listeners=t,!0;s=e.shift()}return!0}d.EventEmitter2=d,d.prototype.delimiter=".",d.prototype.setMaxListeners=function(e){e!==i&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},d.prototype.event="",d.prototype.once=function(e,t){return this._once(e,t,!1)},d.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},d.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},d.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},
d.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},d.prototype._many=function(e,t,n,r){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}return i._origin=n,this._on(e,i,r),o},d.prototype.emit=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,o,i,s=arguments.length;if(this._all&&this._all.length){if(i=this._all.slice(),s>3)for(t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];for(r=0,n=i.length;r<n;r++)switch(this.event=e,s){case 1:i[r].call(this,e);break;case 2:i[r].call(this,e,arguments[1]);break;case 3:i[r].call(this,e,arguments[1],arguments[2]);break;default:i[r].apply(this,t)}}if(this.wildcard){i=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();u.call(this,i,c,this.listenerTree,0)}else{if("function"==typeof(i=this._events[e])){switch(this.event=e,s){case 1:
i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];i.apply(this,t)}return!0}i&&(i=i.slice())}if(i&&i.length){if(s>3)for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];for(r=0,n=i.length;r<n;r++)switch(this.event=e,s){case 1:i[r].call(this);break;case 2:i[r].call(this,arguments[1]);break;case 3:i[r].call(this,arguments[1],arguments[2]);break;default:i[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},d.prototype.emitAsync=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,o,i,s=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),o=1;o<c;o++)t[o]=arguments[o];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:
s.push(this._all[r].call(this,e));break;case 2:s.push(this._all[r].call(this,e,arguments[1]));break;case 3:s.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[r].apply(this,t))}}if(this.wildcard){i=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();u.call(this,i,l,this.listenerTree,0)}else i=this._events[e];if("function"==typeof i)switch(this.event=e,c){case 1:s.push(i.call(this));break;case 2:s.push(i.call(this,arguments[1]));break;case 3:s.push(i.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];s.push(i.apply(this,t))}else if(i&&i.length){if(i=i.slice(),c>3)for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];for(r=0,n=i.length;r<n;r++)switch(this.event=e,c){case 1:s.push(i[r].call(this));break;case 2:s.push(i[r].call(this,arguments[1]));break;case 3:s.push(i[r].call(this,arguments[1],arguments[2]));break;default:s.push(i[r].apply(this,t))}
}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},d.prototype.on=function(e,t){return this._on(e,t,!1)},d.prototype.prependListener=function(e,t){return this._on(e,t,!0)},d.prototype.onAny=function(e){return this._onAny(e,!1)},d.prototype.prependAny=function(e){return this._onAny(e,!0)},d.prototype.addListener=d.prototype.on,d.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},d.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||a.call(this),this.emit("newListener",e,t),this.wildcard?(p.call(this,e,t),
this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,l.call(this,this._events[e].length,e))):this._events[e]=t,this)},d.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();r=u.call(this,null,o,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var c=r[a];if(n=c._listeners,s(n)){for(var l=-1,d=0,p=n.length;d<p;d++)if(n[d]===t||n[d].listener&&n[d].listener===t||n[d]._origin&&n[d]._origin===t){l=d;break}if(l<0)continue;return this.wildcard?c._listeners.splice(l,1):this._events[e].splice(l,1),
0===n.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this.emit("removeListener",e,t))}return function e(t){if(t!==i){var n=Object.keys(t);for(var r in n){var o=n[r],s=t[o];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&e(t[o]),0===Object.keys(s).length&&delete t[o])}}}(this.listenerTree),this},d.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(n=0,r=(t=this._all).length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||a.call(this),this
;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=u.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var o=n[r];o._listeners=null}else this._events&&(this._events[e]=null);return this},d.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return u.call(this,t,n,this.listenerTree,0),t}return this._events||a.call(this),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},d.prototype.eventNames=function(){return Object.keys(this._events)},d.prototype.listenerCount=function(e){return this.listeners(e).length},d.prototype.listenersAny=function(){return this._all?this._all:[]},(o=function(){return d}.call(t,n,t,e))===i||(e.exports=o)}()}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/function-bind/implementation.js":function(e,t,n){"use strict"
;var r="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,i=Object.prototype.toString,s="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||i.call(t)!==s)throw new TypeError(r+t);for(var n,a=o.call(arguments,1),c=function(){if(this instanceof n){var r=t.apply(this,a.concat(o.call(arguments)));return Object(r)===r?r:this}return t.apply(e,a.concat(o.call(arguments)))},l=Math.max(0,t.length-a.length),d=[],u=0;u<l;u++)d.push("$"+u);if(n=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(c),t.prototype){var p=function(){};p.prototype=t.prototype,n.prototype=new p,p.prototype=null}return n}},"./node_modules/function-bind/index.js":function(e,t,n){"use strict";var r=n("./node_modules/function-bind/implementation.js");e.exports=Function.prototype.bind||r},"./node_modules/has-symbols/index.js":function(e,t,n){"use strict";(function(t){var r=t.Symbol,o=n("./node_modules/has-symbols/shams.js")
;e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&o())))}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/has-symbols/shams.js":function(e,t,n){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1
;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},"./node_modules/is-arguments/index.js":function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=Object.prototype.toString,i=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o.call(e)},s=function(e){return!!i(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==o.call(e)&&"[object Function]"===o.call(e.callee)},a=function(){return i(arguments)}();i.isLegacyArguments=s,e.exports=a?i:s},"./node_modules/is-date-object/index.js":function(t,n,r){"use strict";var o=Date.prototype.getDay,i=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(s?function(t){try{return o.call(t),!0}catch(e){return!1}
}(t):"[object Date]"===i.call(t))}},"./node_modules/is-regex/index.js":function(t,n,r){"use strict";var o,i,s,a,c=r("./node_modules/has-symbols/index.js")()&&"symbol"==typeof Symbol.toStringTag;if(c){o=Function.call.bind(Object.prototype.hasOwnProperty),i=Function.call.bind(RegExp.prototype.exec),s={};var l=function(){throw s};a={toString:l,valueOf:l},"symbol"==typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=l)}var d=Object.prototype.toString,u=Object.getOwnPropertyDescriptor;t.exports=c?function(t){if(!t||"object"!=typeof t)return!1;var n=u(t,"lastIndex");if(!(n&&o(n,"value")))return!1;try{i(t,a)}catch(e){return e===s}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===d.call(e)}},"./node_modules/lru-fast/lru.js":function(e,t){function n(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}n.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),
e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},n.prototype.put=function(e,t){var n=this._keymap[e];return n?(n.value=t,void this._markEntryAsUsed(n)):(this._keymap[e]=n={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=n,n.older=this.newest):this.oldest=n,this.newest=n,this.size++,this.size>this.limit?this.shift():void 0)},n.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},n.prototype.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return this._markEntryAsUsed(n),t?n:n.value},n.prototype.find=function(e){return this._keymap[e]},n.prototype.set=function(e,t){var n,r=this.get(e,!0);return r?(n=r.value,r.value=t):(n=this.put(e,t))&&(n=n.value),n},n.prototype.remove=function(e){var t=this._keymap[e]
;if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},n.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?n.prototype.keys=function(){return Object.keys(this._keymap)}:n.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},n.prototype.forEach=function(e,t,n){var r;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(r=this.newest;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.oldest;r;)e.call(t,r.key,r.value,this),r=r.newer},n.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,n=this.oldest;n;)e[t++]={key:n.key,value:n.value},n=n.newer;return e},n.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ")
;return e},"object"==typeof this&&(this.LRUCache=n)},"./node_modules/object-is/index.js":function(e,t,n){"use strict";var r=function(e){return e!=e};e.exports=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!r(e)||!r(t))}},"./node_modules/object-keys/implementation.js":function(t,n,r){"use strict";var o;if(!Object.keys){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=r("./node_modules/object-keys/isArguments.js"),c=Object.prototype.propertyIsEnumerable,l=!c.call({toString:null},"toString"),d=c.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},m={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,
$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!m["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{p(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();o=function(t){var n=null!==t&&"object"==typeof t,r="[object Function]"===s.call(t),o=a(t),c=n&&"[object String]"===s.call(t),m=[];if(!n&&!r&&!o)throw new TypeError("Object.keys called on a non-object");var h=d&&r;if(c&&t.length>0&&!i.call(t,0))for(var b=0;b<t.length;++b)m.push(String(b));if(o&&t.length>0)for(var y=0;y<t.length;++y)m.push(String(y));else for(var v in t)h&&"prototype"===v||!i.call(t,v)||m.push(String(v));if(l)for(var j=function(t){if("undefined"==typeof window||!f)return p(t);try{return p(t)}catch(e){return!1}}(t),g=0;g<u.length;++g)j&&"constructor"===u[g]||!i.call(t,u[g])||m.push(u[g]);return m}}t.exports=o},
"./node_modules/object-keys/index.js":function(e,t,n){"use strict";var r=Array.prototype.slice,o=n("./node_modules/object-keys/isArguments.js"),i=Object.keys,s=i?function(e){return i(e)}:n("./node_modules/object-keys/implementation.js"),a=Object.keys;s.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return o(e)?a(r.call(e)):a(e)}):Object.keys=s;return Object.keys||s},e.exports=s},"./node_modules/object-keys/isArguments.js":function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},"./node_modules/regexp.prototype.flags/implementation.js":function(e,t,n){"use strict";var r=Object,o=TypeError;e.exports=function(){
if(null!=this&&this!==r(this))throw new o("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e}},"./node_modules/regexp.prototype.flags/index.js":function(e,t,n){"use strict";var r=n("./node_modules/define-properties/index.js"),o=n("./node_modules/es-abstract/helpers/callBind.js"),i=n("./node_modules/regexp.prototype.flags/implementation.js"),s=n("./node_modules/regexp.prototype.flags/polyfill.js"),a=n("./node_modules/regexp.prototype.flags/shim.js"),c=o(i);r(c,{getPolyfill:s,implementation:i,shim:a}),e.exports=c},"./node_modules/regexp.prototype.flags/polyfill.js":function(e,t,n){"use strict";var r=n("./node_modules/regexp.prototype.flags/implementation.js"),o=n("./node_modules/define-properties/index.js").supportsDescriptors,i=Object.getOwnPropertyDescriptor,s=TypeError;e.exports=function(){
if(!o)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=i(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof/a/.dotAll)return e.get}return r}},"./node_modules/regexp.prototype.flags/shim.js":function(e,t,n){"use strict";var r=n("./node_modules/define-properties/index.js").supportsDescriptors,o=n("./node_modules/regexp.prototype.flags/polyfill.js"),i=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,c=Object.getPrototypeOf,l=/a/;e.exports=function(){if(!r||!c)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=o(),t=c(l),n=i(t,"flags");return n&&n.get===e||s(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},"./node_modules/rxjs-async-map/out/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/rxjs/Observable.js");t.Observable=r.Observable
;var o=n("./node_modules/rxjs/operators/mergeMap.js"),i=n("./node_modules/rxjs-async-map/out/notify.js");t.asyncMap=function(e,t){return o.mergeMap(function(e){var t=new Array,n=function(){var e=t.findIndex((function(e){return!e.notifyIfReady()}));e>0&&t.splice(0,e)};return function(o){return new r.Observable((function(r){t.push(i.notify(e(o),r,n))}))}}(e),t)}},"./node_modules/rxjs-async-map/out/notify.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notify=function(e,t,n){var r={notifyIfReady:function(){return!1}};return e.then((function(e){r.notifyIfReady=function(){return t.next(e),t.complete(),!0},n(r)}),(function(e){r.notifyIfReady=function(){return t.error(e),!0},n(r)})),r}},"./node_modules/rxjs/ReplaySubject.js":function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)
},o=n("./node_modules/rxjs/Subject.js"),i=n("./node_modules/rxjs/scheduler/queue.js"),s=n("./node_modules/rxjs/Subscription.js"),a=n("./node_modules/rxjs/operators/observeOn.js"),c=n("./node_modules/rxjs/util/ObjectUnsubscribedError.js"),l=n("./node_modules/rxjs/SubjectSubscription.js"),d=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new u(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError||this.isStopped?t=s.Subscription.EMPTY:(this.observers.push(e),t=new l.SubjectSubscription(this,e)),r&&e.add(e=new a.ObserveOnSubscriber(e,r))
;for(var o=n.length,i=0;i<o&&!e.closed;i++)e.next(n[i].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||i.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(e-r[i].time<n);)i++;return o>t&&(i=Math.max(i,o-t)),i>0&&r.splice(0,i),r},t}(o.Subject);t.ReplaySubject=d;var u=function(){return function(e,t){this.time=e,this.value=t}}()},"./node_modules/rxjs/observable/RangeObservable.js":function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=function(e){function t(t,n,r){e.call(this),this.start=t,this._count=n,this.scheduler=r}return r(t,e),t.create=function(e,n,r){return void 0===e&&(e=0),void 0===n&&(n=0),new t(e,n,r)},
t.dispatch=function(e){var t=e.start,n=e.index,r=e.count,o=e.subscriber;n>=r?o.complete():(o.next(t),o.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))},t.prototype._subscribe=function(e){var n=0,r=this.start,o=this._count,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{index:n,count:o,start:r,subscriber:e});for(;;){if(n++>=o){e.complete();break}if(e.next(r++),e.closed)break}},t}(n("./node_modules/rxjs/Observable.js").Observable);t.RangeObservable=o},"./node_modules/rxjs/observable/fromPromise.js":function(e,t,n){"use strict";var r=n("./node_modules/rxjs/observable/PromiseObservable.js");t.fromPromise=r.PromiseObservable.create},"./node_modules/rxjs/observable/range.js":function(e,t,n){"use strict";var r=n("./node_modules/rxjs/observable/RangeObservable.js");t.range=r.RangeObservable.create},"./node_modules/rxjs/operators/bufferCount.js":function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){
this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=n("./node_modules/rxjs/Subscriber.js");t.bufferCount=function(e,t){return void 0===t&&(t=null),function(n){return n.lift(new i(e,t))}};var i=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?a:s}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),s=function(e){function t(t,n){e.call(this,t),this.bufferSize=n,this.buffer=[]}return r(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(o.Subscriber),a=function(e){function t(t,n,r){e.call(this,t),this.bufferSize=n,this.startBufferEvery=r,this.buffers=[],this.count=0}return r(t,e),t.prototype._next=function(e){
var t=this,n=t.bufferSize,r=t.startBufferEvery,o=t.buffers,i=t.count;this.count++,i%r==0&&o.push([]);for(var s=o.length;s--;){var a=o[s];a.push(e),a.length===n&&(o.splice(s,1),this.destination.next(a))}},t.prototype._complete=function(){for(var t=this.buffers,n=this.destination;t.length>0;){var r=t.shift();r.length>0&&n.next(r)}e.prototype._complete.call(this)},t}(o.Subscriber)},"./node_modules/rxjs/operators/concatMap.js":function(e,t,n){"use strict";var r=n("./node_modules/rxjs/operators/mergeMap.js");t.concatMap=function(e,t){return r.mergeMap(e,t,1)}},"./node_modules/rxjs/operators/tap.js":function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=n("./node_modules/rxjs/Subscriber.js");t.tap=function(e,t,n){return function(r){return r.lift(new i(e,t,n))}};var i=function(){function e(e,t,n){this.nextOrObserver=e,
this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))},e}(),s=function(e){function t(t,n,r,i){e.call(this,t);var s=new o.Subscriber(n,r,i);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return r(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(o.Subscriber)},"./node_modules/rxjs/scheduler/QueueAction.js":function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}
e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n("./node_modules/rxjs/scheduler/AsyncAction.js").AsyncAction);t.QueueAction=o},"./node_modules/rxjs/scheduler/QueueScheduler.js":function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=function(e){function t(){
e.apply(this,arguments)}return r(t,e),t}(n("./node_modules/rxjs/scheduler/AsyncScheduler.js").AsyncScheduler);t.QueueScheduler=o},"./node_modules/rxjs/scheduler/queue.js":function(e,t,n){"use strict";var r=n("./node_modules/rxjs/scheduler/QueueAction.js"),o=n("./node_modules/rxjs/scheduler/QueueScheduler.js");t.queue=new o.QueueScheduler(r.QueueAction)},"./node_modules/uuid-validate/index.js":function(e,t,n){(function(t){for(var n=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i,r=[],o=0;o<256;o++)r[o]=(o+256).toString(16).substr(1);e.exports=function(e,o){var s;if(t.isBuffer(e))s=function(e,t){var n=t||0,o=r;return o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]}(e);else{if("[object String]"!==Object.prototype.toString.call(e))return!1;s=e}if(s=s.toLowerCase(),!n.test(s))return!1;if(void 0===o)o=i(s);else if(i(s)!==o)return!1;switch(o){
case 1:case 2:return!0;case 3:case 4:case 5:return-1!==["8","9","a","b"].indexOf(s.charAt(19));default:throw new Error("Invalid version provided.")}};var i=e.exports.version=function(e){return 0|e.charAt(14)}}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/video-snapshot/dist/es2015/index.js":function(e,t,n){"use strict";var r=n("./node_modules/tslib/tslib.es6.js"),o="undefined"!=typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=function(){function e(e){var t=this;this.loadVideo=function(e){return void 0===e&&(e=0),new Promise((function(n,r){var i=document.createElement("video");if(i.preload="metadata",i.src=t.videoUrl,i.muted=!0,0===e)i.play();else{if("number"==typeof e)i.currentTime=e;else if("string"==typeof e){var s=i.duration;i.currentTime=t.getSmartTime(e,s)}o&&i.play()}i.addEventListener("timeupdate",(function e(){i.removeEventListener("timeupdate",e),i.pause(),n(i)})),
i.addEventListener("error",(function(){r(new Error("failed to load video"))}))}))},this.getDimensions=function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.loadVideo()];case 1:return[2,{width:(e=t.sent()).videoWidth,height:e.videoHeight}]}}))}))};var n=URL.createObjectURL(e);this.videoUrl=n}return e.prototype.takeSnapshot=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.loadVideo(e)];case 1:if(t=r.sent(),n=document.createElement("canvas"),!t.videoWidth&&!t.videoHeight)throw new Error("error retrieving video dimensions");if(n.width=t.videoWidth,n.height=t.videoHeight,!(o=n.getContext("2d")))throw new Error("error creating canvas context");return o.drawImage(t,0,0,n.width,n.height),[2,n.toDataURL()]}}))}))},e.prototype.end=function(){this.revoke()},
e.prototype.revoke=function(){URL.revokeObjectURL(this.videoUrl)},e.prototype.getSmartTime=function(e,t){return void 0===t&&(t=0),{start:0,middle:t/2,end:t}[e]},e}();t.a=i}}]);try{window.__jsEvalStop("@atlaskit-internal_media-client.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/@atlaskit-internal_media-client.c3b3004d0b91e42a4eff.8.js.map