;try{window.performance.mark('com.atlassian.jira.gadgets,com.pyxis.greenhopper.jira_batch_file_eval:start');} catch(e){};;
/* module-key = 'com.atlassian.gadgets.publisher:dashboard-item-common', location = 'gadgets-publisher-plugin/dashboard-item/common/dashboard-item-common.soy' */
// This file was automatically generated from dashboard-item-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Atlassian.DashboardItem.Common.Templates.
 */

if (typeof Atlassian == 'undefined') { var Atlassian = {}; }
if (typeof Atlassian.DashboardItem == 'undefined') { Atlassian.DashboardItem = {}; }
if (typeof Atlassian.DashboardItem.Common == 'undefined') { Atlassian.DashboardItem.Common = {}; }
if (typeof Atlassian.DashboardItem.Common.Templates == 'undefined') { Atlassian.DashboardItem.Common.Templates = {}; }


Atlassian.DashboardItem.Common.Templates.config = function(opt_data, opt_ignored) {
  return '<div class="dashboard-item-preferences-config"><div class="dashboard-item-error"></div><form action="#" method="post" class="aui">' + soy.$$filterNoAutoescape(opt_data.fields) + '<div class="buttons-container"><div class="buttons"><input class="button submit" type="submit" value="' + soy.$$escapeHtml('Save') + '">' + ((opt_data.isConfigured) ? '<input class="aui-button aui-button-link cancel" type="button" value="' + soy.$$escapeHtml('Cancel') + '">' : '') + '</div></div></form></div>';
};
if (goog.DEBUG) {
  Atlassian.DashboardItem.Common.Templates.config.soyTemplateName = 'Atlassian.DashboardItem.Common.Templates.config';
}


Atlassian.DashboardItem.Common.Templates.refreshInterval = function(opt_data, opt_ignored) {
  var output = '';
  var prefixedId__soy16 = opt_data.prefix + opt_data.id;
  output += '<div class="field-group ' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(prefixedId__soy16) + '">' + soy.$$escapeHtml('Auto refresh') + '</label><div class="checkbox"><label><input type="checkbox" id="' + soy.$$escapeHtml(prefixedId__soy16) + '" name="' + soy.$$escapeHtml(opt_data.id) + '" value="15" class="checkbox" ' + ((opt_data.value != 'false' && opt_data.value != '') ? 'checked="checked"' : '') + '>' + soy.$$escapeHtml('Update every 15 minutes') + '</label></div><div class="description">&nbsp;</div></div>';
  return output;
};
if (goog.DEBUG) {
  Atlassian.DashboardItem.Common.Templates.refreshInterval.soyTemplateName = 'Atlassian.DashboardItem.Common.Templates.refreshInterval';
}
;
;
/* module-key = 'com.atlassian.jira.gadgets:filter-picker-component', location = 'jira-gadgets-plugin/static/components/filterpicker/FilterPicker.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.DashboardItem&&(JIRA.DashboardItem={}),"undefined"==typeof JIRA.DashboardItem.Common&&(JIRA.DashboardItem.Common={}),"undefined"==typeof JIRA.DashboardItem.Common.Config&&(JIRA.DashboardItem.Common.Config={}),"undefined"==typeof JIRA.DashboardItem.Common.Config.Templates&&(JIRA.DashboardItem.Common.Config.Templates={}),JIRA.DashboardItem.Common.Config.Templates.filterPicker=function(e,a){var t="",o=e.prefix+e.id;return t+='<div class="field-group '+soy.$$escapeHtml(e.id)+'"><label for="'+soy.$$escapeHtml(o)+'">'+soy.$$escapeHtml("Saved Filter:")+'<span class="aui-icon icon-required"> '+soy.$$escapeHtml("required")+'</span></label><select class="select" id="'+soy.$$escapeHtml(o)+'" name="'+soy.$$escapeHtml(e.id)+'"></select><div class="error">'+soy.$$escapeHtml("No Filter selected")+'</div><input class="hidden" id="filter_'+soy.$$escapeHtml(o)+'_id"/><input class="hidden" id="filter_'+soy.$$escapeHtml(o)+'_name"/><div class="description"><a id="filter_'+soy.$$escapeHtml(o)+'_advance" class="advanced-search" href="#" title="'+soy.$$escapeHtml("Click here to select/change filter or project.")+'" target="_parent">'+soy.$$escapeHtml("Advanced Search")+"</a></div></div>"};;
;
/* module-key = 'com.atlassian.jira.gadgets:filter-picker-component', location = 'jira-gadgets-plugin/static/components/filterpicker/FilterPicker.js' */
define("jira-dashboard-items/components/filter-picker",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jira/util/events","wrm/context-path","underscore","jquery","jira/ajs/ajax/smart-ajax","jira/ajs/select/single-select"],function(l,a,o,c,u,d,f,v){"use strict";return function(){function n(e,r,i){function t(){var e=d("#filter_"+r+"_id").attr("value");0===e.indexOf("filter-")&&(e=e.substr(7));var t=d("#filter_"+r+"_name").text(),t=new l({value:e,label:t});i.setSelection(t,!0);o.trigger("gadget-advancedsearchfilter-selected")}var n=e.find("#filter_"+r+"_id");n.on("DOMAttrModified",t);(window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver)&&(s=new MutationObserver(t)).observe(n[0],{attributes:!0});e.find("#filter_"+r+"_advance").click(function(e){var t=c()+"/secure/FilterPickerPopup.jspa?showProjects=false&field="+r,i="filter_"+r.replace(new RegExp("-","g"),"")+"_window";window.open(t,i,"width=800, height=500, resizable, scrollbars=yes").focus();e.preventDefault()})}var s;return{init:function(e){var t=e.element,i=e.selectedValue,r=this;this.select=new v({element:t,itemAttrDisplayed:"label",revertOnInvalid:!0,removeDuplicates:!0,submitInputVal:!1,showDropdownButton:!0,removeOnUnSelect:!1,matchingStrategy:"(^|(.*))({0})(.*)",ajaxOptions:{url:c()+"/rest/gadget/1.0/pickers/filters",query:!0,data:{fieldName:"quickfind"},formatResponse:function(e){var t=[];if(e.filters&&e.filters.length){var i=new a;u.each(e.filters,function(e){i.addItem(new l({value:e.id,label:e.name}))});t.push(i)}return t}}});if(i){r.select.disable();f.makeRequest({method:"GET",url:c()+"/rest/api/2/filter/"+i,success:function(e){r.select.setSelection(new l({value:i,label:e.name}))},complete:function(){r.select.enable()}})}n(e.parentElement,t.attr("id"),r.select);this.errorField=t.parents(".field-group").find(".error");r.select.hideErrorMessage=function(){};r.select.showErrorMessage=function(){};return this},getValue:function(){return this.select.lastSelection?{id:this.select.lastSelection.value(),label:this.select.lastSelection.label()}:null},validate:function(){if(this.select.lastSelection&&this.select.lastSelection.value()){this.errorField.hide();return!0}this.errorField.show();return!1},disconnectObserver:function(){s&&s.disconnect()}}}});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-class-names', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/class-names.js' */
("undefined"===typeof window?global:window).__17e04bba0bef0009cc832216dc2470d2=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={NO_VALUE:"aui-restfultable-editable-no-value",NO_ENTRIES:"aui-restfultable-no-entires",RESTFUL_TABLE:"aui-restfultable",ROW:"aui-restfultable-row",READ_ONLY:"aui-restfultable-readonly",ACTIVE:"aui-restfultable-active",ALLOW_HOVER:"aui-restfultable-allowhover",FOCUSED:"aui-restfultable-focused",MOVEABLE:"aui-restfultable-movable",
DISABLED:"aui-restfultable-disabled",SUBMIT:"aui-restfultable-submit",CANCEL:"aui-restfultable-cancel",EDIT_ROW:"aui-restfultable-editrow",CREATE:"aui-restfultable-create",DRAG_HANDLE:"aui-restfultable-draghandle",ORDER:"aui-restfultable-order",EDITABLE:"aui-restfultable-editable",ERROR:"error",DELETE:"aui-restfultable-delete",LOADING:"loading"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-create-view', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/custom-create-view.js' */
("undefined"===typeof window?global:window).__226d5785d36c6f3d2eaa19d9b986ea68=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-edit-view', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/custom-edit-view.js' */
("undefined"===typeof window?global:window).__a88f71998f64176b4467b73bf7f68708=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-read-view', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/custom-read-view.js' */
("undefined"===typeof window?global:window).__54897143fc7cd42cd80d313dd2bfdf55=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-data-keys', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/data-keys.js' */
("undefined"===typeof window?global:window).__b68b83266eb028cf402de39c4933799b=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={ENABLED_SUBMIT:"enabledSubmit",ROW_VIEW:"RestfulTable_Row_View"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-jquery-serializetoobject', location = 'auiplugin/node_modules/@atlassian/aui/src/js-vendor/jquery/serializetoobject.js' */
("undefined"===typeof window?global:window).__c972538512dcf935ab0c75d63e2e3cff=function(){jQuery.fn.serializeObject=function(){var a={};this.find(":input:not(:button):not(:submit):not(:radio):not('select[multiple]')").each(function(){""!==this.name&&(null===this.value&&(this.value=""),a[this.name]=this.value.match(/^(tru|fals)e$/i)?"true"==this.value.toLowerCase():this.value)});this.find("input:radio:checked").each(function(){a[this.name]=this.value});this.find("select[multiple]").each(function(){var c=
jQuery(this),b=c.val();a[this.name]=c.data("aui-ss")?b?b[0]:"":null!==b?b:[]});return a};return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-events', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/events.js' */
("undefined"===typeof window?global:window).__f9e062e0834111cb42fed4e788d40075=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={REORDER_SUCCESS:"RestfulTable.reorderSuccess",ROW_ADDED:"RestfulTable.rowAdded",ROW_REMOVED:"RestfulTable.rowRemoved",EDIT_ROW:"RestfulTable.switchedToEditMode",SERVER_ERROR:"RestfulTable.serverError",CREATED:"created",UPDATED:"updated",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",SAVE:"save",MODAL:"modal",MODELESS:"modeless",CANCEL:"cancel",
CONTENT_REFRESHED:"contentRefreshed",RENDER:"render",FINISHED_EDITING:"finishedEditing",VALIDATION_ERROR:"validationError",SUBMIT_STARTED:"submitStarted",SUBMIT_FINISHED:"submitFinished",INITIALIZED:"initialized",ROW_INITIALIZED:"rowInitialized",ROW_EDIT:"editRow"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-throbber', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/throbber.js' */
("undefined"===typeof window?global:window).__f736a94af005df464b5cb85d70aeb4be=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){return'<span class="aui-restfultable-throbber"></span>'};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-edit-row', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/edit-row.js' */
("undefined"===typeof window?global:window).__306e5d088ae3093bce3a4ccc028d1000=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var g={};"use strict";Object.defineProperty(g,"__esModule",{value:!0});var j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c=f(__307d3e18fd611f85395c67cddeb1fe24);__c972538512dcf935ab0c75d63e2e3cff;var k=
f(__e3ce9f42f29f6bd2118d84461512f4a4),l=f(__17e04bba0bef0009cc832216dc2470d2),m=f(__b68b83266eb028cf402de39c4933799b),n=f(__f9e062e0834111cb42fed4e788d40075);f(__d74c881c8f23921c15438d0f30c99f80);var o=f(__f736a94af005df464b5cb85d70aeb4be);g.default=k.default.View.extend({tagName:"tr",events:{focusin:"_focus",click:"_focus",keyup:"_handleKeyUpEvent"},initialize:function(a){this.$el=(0,c.default)(this.el);this._event=n.default;this.classNames=l.default;this.dataKeys=m.default;this.columns=a.columns;
this.isCreateRow=a.isCreateRow;this.allowReorder=a.allowReorder;this.events["click ."+this.classNames.CANCEL]="_cancel";this.delegateEvents();a.isUpdateMode?this.isUpdateMode=!0:(this._modelClass=a.model,this.model=new this._modelClass);this.fieldFocusSelector=a.fieldFocusSelector;this.bind(this._event.CANCEL,function(){this.disabled=true}).bind(this._event.SAVE,function(a){this.disabled||this.submit(a)}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,function(){this.$el.removeClass(this.classNames.FOCUSED);
this.disable()}).bind(this._event.SUBMIT_STARTED,function(){this._submitStarted()}).bind(this._event.SUBMIT_FINISHED,function(){this._submitFinished()})},defaultColumnRenderer:function(a){if(!1!==a.allowEdit)return(0,c.default)("<input type='text' />").addClass("text").attr({name:a.name,value:a.value});if(a.value)return document.createTextNode(a.value)},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},_handleKeyUpEvent:function(a){27===a.keyCode&&this.trigger(this._event.CANCEL)},
_cancel:function(a){this.trigger(this._event.CANCEL);a.preventDefault();return this},_submitStarted:function(){this.submitting=!0;this.showLoading().disable().delegateEvents({});return this},_submitFinished:function(){this.submitting=!1;this.hideLoading().enable().delegateEvents(this.events);return this},_focus:function(a){this.hasFocus()||this.trigger(this._event.FOCUS,a.target.name);return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(a){this.enable();
a?a=this.$el.find(this.fieldFocusSelector(a)):(a=this.$el.find(this.classNames.ERROR+":first"),a=0===a.length?this.$el.find(":input:text:first"):a.parent().find(":input"));this.$el.addClass(this.classNames.FOCUSED);a.focus().trigger("select");return this},disable:function(){var a,b;c.default.browser.mozilla&&(b=this.$el.find(":submit"),b.length&&(a=(0,c.default)("<input type='submit' class='"+this.classNames.SUBMIT+"' />").addClass(b.attr("class")).val(b.val()).data(this.dataKeys.ENABLED_SUBMIT,b),
b.replaceWith(a)));this.$el.addClass(this.classNames.DISABLED).find(":submit").attr("disabled","disabled");return this},enable:function(){var a,b;c.default.browser.mozilla&&(a=this.$el.find(this.classNames.SUBMIT),(b=a.data(this.dataKeys.ENABLED_SUBMIT))&&a.length&&a.replaceWith(b));this.$el.removeClass(this.classNames.DISABLED).find(":submit").removeAttr("disabled");return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);
return this},hasUpdates:function(){return!!this.mapSubmitParams(this.serializeObject())},serializeObject:function(){var a=this.$el;return a.serializeObject?a.serializeObject():a.serialize()},mapSubmitParams:function(a){return this.model.changedAttributes(a)},submit:function(a){var b=this,h;document.activeElement!==window&&(0,c.default)(document.activeElement).blur();if(this.isUpdateMode){if(h=this.mapSubmitParams(this.serializeObject()),!h)return b.trigger(b._event.CANCEL)}else this.model.clear(),
h=this.mapSubmitParams(this.serializeObject());this.trigger(this._event.SUBMIT_STARTED);this.model.save(h,{success:function(){b.isUpdateMode?b.trigger(b._event.UPDATED,b.model,a):(b.trigger(b._event.CREATED,b.model.toJSON()),b.model=new b._modelClass,b.render({errors:{},values:{}}),b.trigger(b._event.FOCUS));b.trigger(b._event.SUBMIT_FINISHED)},error:function(a,c,h){400===h.status&&(b.renderErrors(c.errors),b.trigger(b._event.VALIDATION_ERROR,c.errors));b.trigger(b._event.SUBMIT_FINISHED)},silent:!0});
return this},renderError:function(a,b){return(0,c.default)("<div />").attr("data-field",a).addClass(this.classNames.ERROR).text(b)},renderErrors:function(a){var b=this;this.$("."+this.classNames.ERROR).remove();a&&c.default.each(a,function(a,c){b.$el.find("[name='"+a+"']").closest("td").append(b.renderError(a,c))});return this},render:function(a){var b=this;this.$el.empty();this.allowReorder&&(0,c.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(b.$el);
c.default.each(this.columns,function(f,d){var e,i;e=a.values[d.id];var g=[{name:d.id,value:e,allowEdit:d.allowEdit},a.values,b.model];e&&b.$el.attr("data-"+d.id,e);e=b.isCreateRow&&d.createView?(new d.createView({model:b.model})).render(g[0]):d.editView?(new d.editView({model:b.model})).render(g[0]):b.defaultColumnRenderer.apply(b,g);i=(0,c.default)("<td />");"object"===("undefined"===typeof e?"undefined":j(e))&&e.done?e.done(function(a){i.append(a)}):i.append(e);d.styleClass&&i.addClass(d.styleClass);
i.appendTo(b.$el)});this.$el.append(this.renderOperations(a.update,a.values)).addClass(this.classNames.ROW+" "+this.classNames.EDIT_ROW);this.trigger(this._event.RENDER,this.$el,a.values);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this},renderOperations:function(a){var b=(0,c.default)('<td class="aui-restfultable-operations" />');a?b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Update"})).append((0,
c.default)('<a class="aui-button aui-button-link" href="#" />').addClass(this.classNames.CANCEL).text("Cancel").attr({accesskey:this.cancelAccessKey})):b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Add"}));return b.add((0,c.default)('<td class="aui-restfultable-status" />').append((0,o.default)()))}});return g=g["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-events', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/events.js' */
("undefined"===typeof window?global:window).__1a99a68c34e660050a094f87fb28903d=function(){function g(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){(0,h.default)(j.default).trigger(a,b)}function e(a,b){(0,h.default)(j.default).bind(a,b)}function f(a,b,c){(0,h.default)(b).trigger(a,c);d(a,c);b.id&&d(b.id+"-"+a,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.triggerEvtForInst=b.triggerEvt=b.bindEvt=void 0;var h=g(__307d3e18fd611f85395c67cddeb1fe24),a;a=__c8cfa00f1eba9ac7af89ee3d0d33961d;
if(!a||!a.__esModule){var c={};if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(c[i]=a[i]);c.default=a;a=c}var j=g(__fd277fcde858b82a198666a405e85600),c=g(__4d02fe17b8e885a34493e34af3d145dd);b.bindEvt=e=a.fn(e,"bindEvt",{sinceVersion:"5.8.0"});b.triggerEvt=d=a.fn(d,"triggerEvt",{sinceVersion:"5.8.0"});b.triggerEvtForInst=f=a.fn(f,"triggerEvtForInst",{sinceVersion:"5.8.0"});(0,c.default)("bindEvt",e);(0,c.default)("triggerEvt",d);(0,c.default)("triggerEvtForInst",f);b.bindEvt=
e;b.triggerEvt=d;b.triggerEvtForInst=f;return b}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-entry-model', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/entry-model.js' */
("undefined"===typeof window?global:window).__928a2470c59a6ae17c3b26224648a948=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var i={};"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=f(__307d3e18fd611f85395c67cddeb1fe24),m=__1a99a68c34e660050a094f87fb28903d,
j=f(__922acd0053a6de3ea4c53d8902766ab6),h=f(__e3ce9f42f29f6bd2118d84461512f4a4),n=f(__f9e062e0834111cb42fed4e788d40075),k=h.default.Model.extend({sync:function(a,b,d){var e=this,c=d.error;d.error=function(a){e._serverErrorHandler(a,this);c&&c.apply(this,arguments)};return h.default.sync.apply(h.default,arguments)},save:function(a,b){var b=b||{},d=this,e,c=b.error,f=b.success;b.error=function(a,b){var e=g.default.parseJSON(b.responseText||b.data);c&&c.call(d,d,e,b)};this.isNew()?h.default.Model.prototype.save.call(this,
a,b):a&&(e=k.extend({url:this.url()}),e=new e({id:this.id}),e.save=h.default.Model.prototype.save,b.success=function(a,b){d.clear().set(a.toJSON());f&&f.call(d,d,b)},e.save(a,b))},destroy:function(a){var a=a||{},b=this,d=this.url(),e;a.data&&(e=g.default.param(a.data));""!==e&&(d=d+"?"+e);g.default.ajax({url:d,type:"DELETE",dataType:"json",contentType:"application/json",success:function(c){b.collection&&b.collection.remove(b);a.success&&a.success.call(b,c)},error:function(c){b._serverErrorHandler(c,
this);a.error&&a.error.call(b,c)}});return this},changedAttributes:function(a){var b={},d=this.toJSON();g.default.each(a,function(a,c){d[a]?d[a]&&d[a]!==c&&("object"===("undefined"===typeof c?"undefined":l(c))?j.default.isEqual(c,d[a])||(b[a]=c):b[a]=c):"string"===typeof c?""!==g.default.trim(c)&&(b[a]=c):g.default.isArray(c)?0!==c.length&&(b[a]=c):b[a]=c});if(!j.default.isEmpty(b))return this.addExpand(b),b},addExpand:function(){},_serverErrorHandler:function(a,b){var d;400!==a.status&&(d=g.default.parseJSON(a.responseText||
a.data),(0,m.triggerEvtForInst)(n.default.SERVER_ERROR,this,[d,a,b]))},fetch:function(a){a=a||{};this.clear();h.default.Model.prototype.fetch.call(this,a)}});i.default=k;return i=i["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-row', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table/row.js' */
("undefined"===typeof window?global:window).__db1289144ca525c25c4d90561fcced7d=function(){function e(a){return a&&a.__esModule?a:{"default":a}}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var b=e(__307d3e18fd611f85395c67cddeb1fe24),j;var c=__8eca5e5171c0c22be18ea931ed65c747;if(c&&c.__esModule)j=c;else{var k={};if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(k[d]=c[d]);k.default=c;j=k}d=e(__e3ce9f42f29f6bd2118d84461512f4a4);var l=e(__17e04bba0bef0009cc832216dc2470d2),
m=e(__b68b83266eb028cf402de39c4933799b),n=e(__f9e062e0834111cb42fed4e788d40075);e(__d74c881c8f23921c15438d0f30c99f80);var o=e(__f736a94af005df464b5cb85d70aeb4be);h.default=d.default.View.extend({tagName:"tr",events:{"click .aui-restfultable-editable":"edit"},initialize:function(a){a=a||{};this._event=n.default;this.classNames=l.default;this.dataKeys=m.default;this.columns=a.columns;this.allowEdit=a.allowEdit;this.allowDelete=a.allowDelete;if(!this.events["click .aui-restfultable-editable"])throw Error("It appears you have overridden the events property. To add events you will need to usea work around. https://github.com/documentcloud/backbone/issues/244");
this.index=a.index||0;this.deleteConfirmation=a.deleteConfirmation;this.allowReorder=a.allowReorder;this.$el=(0,b.default)(this.el);this.bind(this._event.CANCEL,function(){this.disabled=!0}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,function(){this.unfocus()}).bind(this._event.MODAL,function(){this.$el.addClass(this.classNames.ACTIVE)}).bind(this._event.MODELESS,function(){this.$el.removeClass(this.classNames.ACTIVE)})},renderDragHandle:function(){return'<span class="'+
this.classNames.DRAG_HANDLE+'"></span></td>'},defaultColumnRenderer:function(a){if(a.value)return document.createTextNode(a.value.toString())},sync:function(a){var b=this;this.model.addExpand(a);this.showLoading();this.model.save(a,{success:function(){b.hideLoading().render();b.trigger(b._event.UPDATED)},error:function(){b.hideLoading()}});return this},refresh:function(a,b){var c=this;this.showLoading();this.model.fetch({success:function(){c.hideLoading().render();a&&a.apply(this,arguments)},error:function(){c.hideLoading();
b&&b.apply(this,arguments)}});return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(){(0,b.default)(this.el).addClass(this.classNames.FOCUSED);return this},unfocus:function(){(0,b.default)(this.el).removeClass(this.classNames.FOCUSED);return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);return this},edit:function(a){a=(0,b.default)(a.target).is("."+
this.classNames.EDITABLE)?(0,b.default)(a.target).attr("data-field-name"):(0,b.default)(a.target).closest("."+this.classNames.EDITABLE).attr("data-field-name");this.trigger(this._event.ROW_EDIT,a);return this},renderOperations:function(){var a=this;if(!1!==this.allowDelete)return(0,b.default)("<a href='#' class='aui-button' />").addClass(this.classNames.DELETE).text("Delete").click(function(b){b.preventDefault();a.destroy()})},destroy:function(){if(this.deleteConfirmation){var a=
j.popup(400,200,"delete-entity-"+this.model.get("id"));a.element.html(this.deleteConfirmation(this.model.toJSON()));a.show();a.element.find(".cancel").click(function(){a.hide()});a.element.find("form").submit(_.bind(function(b){a.hide();this.model.destroy();b.preventDefault()},this))}else this.model.destroy()},render:function(){var a=this,c=this.model.toJSON(),e=(0,b.default)("<td class='aui-restfultable-operations' />").append(this.renderOperations({},c)),d=(0,b.default)("<td class='aui-restfultable-status' />").append((0,
o.default)());this.$el.removeClass(this.classNames.DISABLED+" "+this.classNames.FOCUSED+" "+this.classNames.LOADING+" "+this.classNames.EDIT_ROW).addClass(this.classNames.READ_ONLY).empty();this.allowReorder&&(0,b.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(a.$el);this.$el.attr("data-id",this.model.id);b.default.each(this.columns,function(e,f){var g,d=(0,b.default)("<td />");g=c[f.id];var i=f.fieldName||f.id,h=[{name:i,value:g,allowEdit:f.allowEdit},
c,a.model];g&&a.$el.attr("data-"+f.id,g);g=f.readView?(new f.readView({model:a.model})).render(h[0]):a.defaultColumnRenderer.apply(a,h);if(!1!==a.allowEdit&&!1!==f.allowEdit){if(i=(0,b.default)("<span />").addClass(a.classNames.EDITABLE).append('<span class="aui-icon aui-icon-small aui-iconfont-edit"></span>').append(g).attr("data-field-name",i),d=(0,b.default)("<td />").append(i).appendTo(a.$el),!g||""==b.default.trim(g))d.addClass(a.classNames.NO_VALUE),i.html((0,b.default)("<em />").text(this.emptyText||
"Enter value"))}else d.append(g);f.styleClass&&d.addClass(f.styleClass);d.appendTo(a.$el)});this.$el.append(e).append(d).addClass(this.classNames.ROW+" "+this.classNames.READ_ONLY);this.trigger(this._event.RENDER,this.$el,c);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this}});return h=h["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table', location = 'auiplugin/node_modules/@atlassian/aui/src/js/aui/restful-table.js' */
("undefined"===typeof window?global:window).__abf29ef092b15abcf6c6c04fa65a04b4=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function l(a,b,c){(0,e.default)(b).trigger(a,c);(0,e.default)(document).trigger(a,c);b.id&&(a=b.id+"_"+a,(0,e.default)(document).trigger(a,c))}var m={};"use strict";Object.defineProperty(m,"__esModule",{value:!0});var e=f(__307d3e18fd611f85395c67cddeb1fe24),n;var h=__cf890abdf040e0993fb71f2f839bc972;if(h&&h.__esModule)n=h;else{var j={};if(null!=h)for(var k in h)Object.prototype.hasOwnProperty.call(h,
k)&&(j[k]=h[k]);j.default=h;n=j}var o=f(__e3ce9f42f29f6bd2118d84461512f4a4),r=f(__17e04bba0bef0009cc832216dc2470d2);k=f(__226d5785d36c6f3d2eaa19d9b986ea68);var h=f(__a88f71998f64176b4467b73bf7f68708),j=f(__54897143fc7cd42cd80d313dd2bfdf55),s=f(__b68b83266eb028cf402de39c4933799b),t=f(__306e5d088ae3093bce3a4ccc028d1000),p=f(__928a2470c59a6ae17c3b26224648a948),u=f(__f9e062e0834111cb42fed4e788d40075),w=f(__4d02fe17b8e885a34493e34af3d145dd);f(__d74c881c8f23921c15438d0f30c99f80);var q=f(__db1289144ca525c25c4d90561fcced7d),
v=f(__f736a94af005df464b5cb85d70aeb4be),g=o.default.View.extend({initialize:function(a){var b=this;b.options=e.default.extend(!0,b._getDefaultOptions(a),a);b.id=this.options.id;b._event=u.default;b.classNames=r.default;b.dataKeys=s.default;this.$table=(0,e.default)(a.el).addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(b.classNames.LOADING);this.$table.wrapAll("<form class='aui' action='#' />");this.$thead=(0,e.default)("<thead/>");this.$theadRow=
(0,e.default)("<tr />").appendTo(this.$thead);this.$tbody=(0,e.default)("<tbody/>");if(!this.$table.length)throw Error("RestfulTable: Init failed! The table you have specified ["+this.$table.selector+"] cannot be found.");if(!this.options.columns)throw Error("RestfulTable: Init failed! You haven't provided any columns to render.");this.showGlobalLoading();this.options.columns.forEach(function(a){var d=e.default.isFunction(a.header)?a.header():a.header;"undefined"===typeof d&&(n.warn("You have not specified [header] for column ["+
a.id+"]. Using id for now..."),d=a.id);b.$theadRow.append("<th>"+d+"</th>")});b.$theadRow.append("<th></th><th></th>");this._models=this._createCollection();this._rowClass=this.options.views.row;this.editRows=[];this.$table.closest("form").submit(function(a){b.focusedRow&&b.focusedRow.trigger(b._event.SAVE);a.preventDefault()});this.options.allowReorder&&(this.$theadRow.prepend("<th />"),this.$tbody.sortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(a,d){var i=(0,e.default)("<div/>").attr("class",
d.attr("class")).addClass(b.classNames.MOVEABLE);d.children().each(function(){var a=(0,e.default)(this),b=parseInt(0+a.css("border-left-width"),10),c=parseInt(0+a.css("border-right-width"),10),b=a[0].clientWidth+b+c;i.append((0,e.default)("<div/>").html(a.html()).attr("class",a.attr("class")).width(b))});i=(0,e.default)("<div class='aui-restfultable-readonly'/>").append(i);i.css({left:d.offset().left});i.appendTo(document.body);return i},start:function(a,d){var i=d.helper[0].clientHeight,f=d.placeholder.find("td");
d.item.addClass(b.classNames.MOVEABLE).children().each(function(a){(0,e.default)(this).width(f.eq(a).width())});var g='<td colspan="'+b.getColumnCount()+'">&nbsp;</td>';d.placeholder.html(g).css({height:i,visibility:"visible"});b.getRowFromElement(d.item[0]).trigger(b._event.MODAL)},stop:function(a,d){if((0,e.default)(d.item[0]).is(":visible"))d.item.removeClass(b.classNames.MOVEABLE).children().attr("style",""),d.placeholder.removeClass(b.classNames.ROW),b.getRowFromElement(d.item[0]).trigger(b._event.MODELESS)},
update:function(a,d){var e={row:b.getRowFromElement(d.item[0]),item:d.item,nextItem:d.item.next(),prevItem:d.item.prev()};b.move(e)},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8E3}),this.$tbody.bind("selectstart mousedown",function(a){return!(0,e.default)(a.target).is("."+b.classNames.DRAG_HANDLE)}));!1!==this.options.allowCreate&&(this._createRow=(new this.options.views.editRow({columns:this.options.columns,isCreateRow:!0,model:this.options.model.extend({url:function(){return b.options.resources.self}}),
cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey,allowReorder:this.options.allowReorder,fieldFocusSelector:this.options.fieldFocusSelector})).bind(this._event.CREATED,function(a){b.options.addPosition==void 0&&b.options.createPosition==="bottom"||b.options.addPosition==="bottom"?b.addRow(a):b.addRow(a,0)}).bind(this._event.VALIDATION_ERROR,function(){this.trigger(b._event.FOCUS)}).render({errors:{},values:{}}),this.$create=(0,e.default)('<tbody class="'+this.classNames.CREATE+
'" />').append(this._createRow.el),this._applyFocusCoordinator(this._createRow),this._createRow.trigger(this._event.FOCUS));this._models.bind("remove",function(a){b.getRows().forEach(function(d){if(d.model===a){d.hasFocus()&&b._createRow&&b._createRow.trigger(b._event.FOCUS);b.removeRow(d)}})});this.fetchInitialResources()},fetchInitialResources:function(){var a=this;e.default.isFunction(this.options.resources.all)?this.options.resources.all(function(b){a.populate(b)}):e.default.get(this.options.resources.all,
function(b){a.populate(b)})},move:function(a){var b=this,c=function(a){return a.length?{after:b.getRowFromElement(a).model.url()}:{position:"First"}};a.row&&(c=b.options.reverseOrder?c(a.nextItem):c(a.prevItem),e.default.ajax({url:a.row.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(c),complete:function(){a.row.hideLoading()},success:function(a){AJS.triggerEvtForInst(b._event.REORDER_SUCCESS,b,[a])},error:function(a){var c=e.default.parseJSON(a.responseText||
a.data);AJS.triggerEvtForInst(b._event.SERVER_ERROR,b,[c,a,this])}}),a.row.showLoading())},_createCollection:function(){var a=this;return new (this.options.Collection.extend({sort:function(b){b||(b={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.tableRows=a.getRows();this.models=this.sortBy(this.comparator);this.tableRows=void 0;b.silent||this.trigger("refresh",this,b);return this},remove:function(b,c){this.tableRows=a.getRows();o.default.Collection.prototype.remove.apply(this,
arguments);this.tableRows=void 0;return this}}))([],{comparator:function(b){var c;(void 0!==this.tableRows?this.tableRows:a.getRows()).some(function(a,e){if(a.model.id===b.id)return c=e,!0});return c}})},populate:function(a){this.options.reverseOrder&&a.reverse();this.hideGlobalLoading();a&&a.length?(this._models.reset([],{silent:!0}),this.renderRows(a),this.isEmpty()&&this.showNoEntriesMsg()):this.showNoEntriesMsg();this.$table.append(this.$thead);"bottom"===this.options.createPosition?this.$table.append(this.$tbody).append(this.$create):
this.$table.append(this.$create).append(this.$tbody);this.$table.removeClass(this.classNames.LOADING).trigger(this._event.INITIALIZED,[this]);l(this._event.INITIALIZED,this,[this]);this.options.autoFocus&&this.$table.find(":input:text:first").focus()},showGlobalLoading:function(){this.$loading||(this.$loading=(0,e.default)('<div class="aui-restfultable-init">'+(0,v.default)()+'<span class="aui-restfultable-loading">'+this.options.loadingMsg+"</span></div>"));this.$loading.is(":visible")||this.$loading.insertAfter(this.$table);
return this},hideGlobalLoading:function(){this.$loading&&this.$loading.remove();return this},addRow:function(a,b){var c,d;if(!a.id)throw Error("RestfulTable.addRow: to add a row values object must contain an id. Maybe you are not returning it from your restend point?Recieved:"+JSON.stringify(a));d=new this.options.model(a);c=this._renderRow(d,b);this._models.add(d);this.removeNoEntriesMsg();l(this._event.ROW_ADDED,this,[c,this]);return this},removeRow:function(a){this._models.remove(a.model);a.remove();
this.isEmpty()&&this.showNoEntriesMsg();l(this._event.ROW_REMOVED,this,[a,this])},isEmpty:function(){return 0===this._models.length},getModels:function(){return this._models},getTable:function(){return this.$table},getTableBody:function(){return this.$tbody},getCreateRow:function(){return this._createRow},getColumnCount:function(){var a=2;this.allowReorder&&++a;return this.options.columns.length+a},getRowFromElement:function(a){return(0,e.default)(a).data(this.dataKeys.ROW_VIEW)},showNoEntriesMsg:function(){this.$noEntries&&
this.$noEntries.remove();this.$noEntries=(0,e.default)("<tr>").addClass(this.classNames.NO_ENTRIES).append((0,e.default)("<td>").attr("colspan",this.getColumnCount()).text(this.options.noEntriesMsg)).appendTo(this.$tbody);return this},removeNoEntriesMsg:function(){this.$noEntries&&0<this._models.length&&this.$noEntries.remove();return this},getRows:function(){var a=this,b=[];this.$tbody.find("."+this.classNames.READ_ONLY).each(function(){var c=(0,e.default)(this).data(a.dataKeys.ROW_VIEW);c&&b.push(c)});
return b},_renderRow:function(a,b){var c=this,d=this.$tbody.find("."+this.classNames.READ_ONLY),e,f;f=new this._rowClass({model:a,columns:this.options.columns,allowEdit:this.options.allowEdit,allowDelete:this.options.allowDelete,allowReorder:this.options.allowReorder,deleteConfirmation:this.options.deleteConfirmation});this.removeNoEntriesMsg();f.bind(this._event.ROW_EDIT,function(a){l(this._event.EDIT_ROW,{},[this,c]);c.edit(this,a)});e=f.render().$el;-1!==b&&("number"===typeof b&&0!==d.length?e.insertBefore(d[b]):
this.$tbody.append(e));e.data(this.dataKeys.ROW_VIEW,f);f.bind(this._event.MODAL,function(){c.$table.removeClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("disable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents({})})});f.bind(this._event.MODELESS,function(){c.$table.addClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("enable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents()})});this._applyFocusCoordinator(f);this.trigger(this._event.ROW_INITIALIZED,
f);return f},isRowBeingEdited:function(a){var b=!1;this.editRows.some(function(c){if(c.el===a.el)return b=!0});return b},_applyFocusCoordinator:function(a){var b=this;a.hasFocusBound||(a.hasFocusBound=!0,a.bind(this._event.FOCUS,function(){b.focusedRow&&b.focusedRow!==a&&b.focusedRow.trigger(b._event.BLUR);b.focusedRow=a;a instanceof q.default&&b._createRow&&b._createRow.enable()}));return this},_removeEditRow:function(a){a=e.default.inArray(a,this.editRows);this.editRows.splice(a,1);return this},
_shiftFocusAfterEdit:function(){0<this.editRows.length?this.editRows[this.editRows.length-1].trigger(this._event.FOCUS):this._createRow&&this._createRow.trigger(this._event.FOCUS);return this},_saveEditRowOnBlur:function(){return 1>=this.editRows.length},dismissEditRows:function(){this.editRows.forEach(function(a){a.hasUpdates()||a.trigger(this._event.FINISHED_EDITING)},this)},edit:function(a,b){var c=this,d=new this.options.views.editRow({el:a.el,columns:this.options.columns,isUpdateMode:!0,allowReorder:this.options.allowReorder,
fieldFocusSelector:this.options.fieldFocusSelector,model:a.model,cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey}),e=a.model.toJSON();e.update=!0;d.render({errors:{},update:!0,values:e}).bind(c._event.UPDATED,function(b,d){c._removeEditRow(this);this.unbind();a.render().delegateEvents();a.trigger(c._event.UPDATED);!1!==d&&c._shiftFocusAfterEdit()}).bind(c._event.VALIDATION_ERROR,function(){this.trigger(c._event.FOCUS)}).bind(c._event.FINISHED_EDITING,function(){c._removeEditRow(this);
a.render().delegateEvents();this.unbind()}).bind(c._event.CANCEL,function(){c._removeEditRow(this);this.unbind();a.render().delegateEvents();c._shiftFocusAfterEdit()}).bind(c._event.BLUR,function(){c.dismissEditRows();c._saveEditRowOnBlur()&&this.trigger(c._event.SAVE,!1)});this._applyFocusCoordinator(d);d.trigger(c._event.FOCUS,b);c._createRow&&c._createRow.disable();this.editRows.push(d);return d},renderRows:function(a){var b=this._models.comparator,c=[];this._models.comparator=void 0;a=_.map(a,
function(a){a=new this.options.model(a);c.push(this._renderRow(a,-1).el);return a},this);this._models.add(a,{silent:!0});this._models.comparator=b;this.removeNoEntriesMsg();this.$tbody.append(c);return this},_getDefaultOptions:function(a){return{model:a.model||p.default,allowEdit:!0,views:{editRow:t.default,row:q.default},Collection:o.default.Collection.extend({url:a.resources.self,model:a.model||p.default}),allowReorder:!1,fieldFocusSelector:function(a){return":input[name="+a+"], #"+a},loadingMsg:a.loadingMsg||
"Loading"}}});g.ClassNames=r.default;g.CustomCreateView=k.default;g.CustomEditView=h.default;g.CustomReadView=j.default;g.DataKeys=s.default;g.EditRow=t.default;g.EntryModel=p.default;g.Events=u.default;g.Row=q.default;g.Throbber=v.default;(0,w.default)("RestfulTable",g);m.default=g;return m=m["default"]}.call(this);;
;
/* module-key = 'jira.webresources:aui-restfultable-amd-shim', location = '/static/lib/amd-shims/aui-restfultable-amd.js' */
define("aui/restful-table",function(){return AJS.RestfulTable});;
;
/* module-key = 'com.atlassian.jira.gadgets:column-picker-component', location = 'jira-gadgets-plugin/static/components/columnpicker/ColumnPicker.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.DashboardItem&&(JIRA.DashboardItem={}),"undefined"==typeof JIRA.DashboardItem.Common&&(JIRA.DashboardItem.Common={}),"undefined"==typeof JIRA.DashboardItem.Common.Config&&(JIRA.DashboardItem.Common.Config={}),"undefined"==typeof JIRA.DashboardItem.Common.Config.Templates&&(JIRA.DashboardItem.Common.Config.Templates={}),JIRA.DashboardItem.Common.Config.Templates.columnPicker=function(e,o){var s="",t=e.id+"-table",a=e.id+"-select",n=e.prefix+t,i=e.prefix+a;return s+='<div class="field-group '+soy.$$escapeHtml(t)+'"><label for="'+soy.$$escapeHtml(n)+'">'+soy.$$escapeHtml("Columns to display")+'<span class="aui-icon icon-required"> '+soy.$$escapeHtml("required")+'</span></label><table class="column-picker-order" id="'+soy.$$escapeHtml(n)+'"></table><div class="description">'+soy.$$escapeHtml("Drag-drop to reorder the fields.")+'</div><div class="error">'+soy.$$escapeHtml("You must select at least one field.")+'</div></div><div class="field-group '+soy.$$escapeHtml(a)+'"><select class="select" id="'+soy.$$escapeHtml(i)+'" name="'+soy.$$escapeHtml(e.id)+'"></select><div class="description">'+soy.$$escapeHtml("Add fields to the list above by selecting them.")+"</div></div>"},JIRA.DashboardItem.Common.Config.Templates.deleteColumnButton=function(e,o){return'<button class="aui-button aui-button-subtle"><span class="aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml("Delete")+"</span></button>"};;
;
/* module-key = 'com.atlassian.jira.gadgets:column-picker-component', location = 'jira-gadgets-plugin/static/components/columnpicker/ColumnPicker.js' */
define("jira-dashboard-items/components/column-picker",["aui/restful-table","jira/util/formatter","jira/ajs/list/item-descriptor","wrm/context-path","underscore","jquery","jira/ajs/ajax/smart-ajax","jira/ajs/select/single-select"],function(l,r,s,e,d,u,c,m){"use strict";function n(n,l){var t=n.errorContainer,a=n.columnNames,o=[];c.makeRequest({url:e()+"/rest/gadget/1.0/availableColumns",method:"GET",success:function(e){e.availableColumns&&e.availableColumns.length&&d.each(e.availableColumns,function(e){o.push(new s(e))});if("--Default--"===a)d.each(e.defaultColumns,function(e){l.addRow({id:e.value,label:e.label})});else{e=a.split("|");d.each(e,function(t){var e=d.find(o,function(e){return e.value()===t});e&&l.addRow({id:e.value(),label:e.label()})})}i.enable()},error:function(e){!function(e,t){u(e).empty();AJS.messages.error(e,{title:"Error",body:"<p>"+c.buildSimpleErrorContent(t)+"</p>",closeable:!1});u(e).show()}(t,e)},complete:function(){n.onContentLoaded&&n.onContentLoaded()}});var i=new m({element:n.fieldElement,itemAttrDisplayed:"label",revertOnInvalid:!0,submitInputVal:!1,showDropdownButton:!0,suggestions:function(n){return d.filter(o,function(e){var t=l._models.get(e.value()),e=-1<e.label().toLocaleLowerCase().indexOf(n.toLocaleLowerCase());return!t&&e})}});i.disable();i.model.$element.on("selected",function(e,t){i.clear();if(t.value()&&!l._models.get(t.value())){l.addRow({id:t.value(),label:t.label()});n.onContentLoaded&&n.onContentLoaded()}});return i}return function(){return{init:function(e){var t=this;this.tableElement=e.tableElement;this.table=function(e){var t=l.EntryModel.extend({destroy:function(){this.collection.remove(this)}}),n=l.Row.extend({initialize:function(e){e=d.extend({},e,{allowReorder:!0});l.Row.prototype.initialize.call(this,e)},renderOperations:function(){return u(JIRA.DashboardItem.Common.Config.Templates.deleteColumnButton()).click(d.bind(function(e){e.preventDefault();this.destroy()},this))}}),o=new l({el:e,allowReorder:!1,allowEdit:!1,allowCreate:!1,autoFocus:!1,model:t,resources:{all:function(e){e([])}},columns:[{id:"label",header:""}],views:{row:n}});o.$thead.detach();o.$theadRow.prepend("<th />");o.$tbody.sortable({handle:"."+o.classNames.DRAG_HANDLE,helper:function(e,t){var a=u("<div/>").addClass(o.classNames.MOVEABLE+" "+t.attr("class"));t.children().each(function(e){var t=u(this),n=parseInt(0+t.css("border-left-width"),10),l=parseInt(0+t.css("border-right-width"),10),l=t[0].clientWidth+n+l;a.append(u("<div/>").html(t.html()).addClass(t.attr("class")).width(l))});(a=u("<div class='aui-restfultable-readonly'/>").append(a)).css({left:t.offset().left});a.appendTo(document.body);return a},start:function(e,t){var n=t.helper[0].clientHeight,l=t.placeholder.find("td");t.item.addClass(o.classNames.MOVEABLE).children().each(function(e){u(this).width(l.eq(e).width())});var a='<td colspan="'+o.getColumnCount()+'">&nbsp;</td>';t.placeholder.html(a).css({height:n,visibility:"visible"});o.getRowFromElement(t.item[0]).trigger(o._event.MODAL)},stop:function(e,t){if(u(t.item[0]).is(":visible")){t.item.removeClass(o.classNames.MOVEABLE).children().attr("style","");t.placeholder.removeClass(o.classNames.ROW);o.getRowFromElement(t.item[0]).trigger(o._event.MODELESS)}},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8e3});o.$tbody.bind("selectstart mousedown",function(e){return!u(e.target).is("."+o.classNames.DRAG_HANDLE)});return o}(e.tableElement);this.select=n(e,this.table);this.table.getColumnValues=function(){return d.map(t.table.$table.find("tr"),function(e){return u(e).attr("data-id")})};return this},getValue:function(){return this.table.getColumnValues().join("|")},validate:function(){var e=this.tableElement.parents(".field-group").find(".error");if(0<this.table._models.length){e.hide();return!0}e.show();return!1}}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:search-results-component', location = 'jira-gadgets-plugin/static/components/searchresults/SearchResults.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.DashboardItem&&(JIRA.DashboardItem={}),"undefined"==typeof JIRA.DashboardItem.Common&&(JIRA.DashboardItem.Common={}),"undefined"==typeof JIRA.DashboardItem.Common.SearchResults&&(JIRA.DashboardItem.Common.SearchResults={}),"undefined"==typeof JIRA.DashboardItem.Common.SearchResults.Templates&&(JIRA.DashboardItem.Common.SearchResults.Templates={}),JIRA.DashboardItem.Common.SearchResults.Templates.errorResult=function(e,s){return'<div class="empty-results search-results-dashboard-item">'+aui.message.error({content:"<p>"+soy.$$escapeHtml("Error occurred running search.")+"</p>"})+"</div>"},JIRA.DashboardItem.Common.SearchResults.Templates.noResults=function(e,s){return'<div class="empty-results search-results-dashboard-item">'+soy.$$escapeHtml("Search returned no results.")+"</div>"},JIRA.DashboardItem.Common.SearchResults.Templates.resultsTable=function(e,s){return'<div class="results-wrap search-results-dashboard-item"><div class="search-results-dashboard-item-issue-table '+(1==e.pagination?"paging-table":"")+'">'+soy.$$filterNoAutoescape(e.table)+"</div></div>"},JIRA.DashboardItem.Common.SearchResults.Templates.searchLink=function(e,s){return'<a href="'+soy.$$escapeHtml(e.href)+'" '+(e.title?'title="'+soy.$$escapeHtml(e.title)+'"':"")+">"+soy.$$escapeHtml(e.issueCount)+"</a>"};;
;
/* module-key = 'com.atlassian.jira.gadgets:search-results-component', location = 'jira-gadgets-plugin/static/components/searchresults/SearchResults.js' */
define("jira-dashboard-items/components/search-results",["jira/fragments/issueActionsFragment","jira/ajs/dropdown/dropdown","wrm/context-path","jquery","underscore","backbone"],function(p,f,g,h,a,e){"use strict";return function(s){var r,o=s.context,i=s.preferences,n=s.gadgetId&&s.reportGadgetMetrics?s.reportGadgetMetrics:h.noop,l={num:i.num,tableContext:s.tableContext||"jira.table.cols.dashboard",addDefault:!1,columnNames:i.columnNames.split("|"),enableSorting:!0,paging:!0,showActions:!0},d=!0===s.shouldUseCache?"max-age=30":"no-cache, max-age=2";!function(e){var t=a.indexOf(e.columnNames,"--Default--");if(-1!==t){e.addDefault=!0;e.columnNames.splice(t,1)}}(l);function c(e,t,a){o.empty();e.table="<div>"+e.table+"</div>";(n=h(e.table)).find("#issuetable").removeAttr("id").addClass("issue-table");n.find("[id]").removeAttr("id");e.table=n.html();if(0!=e.displayed){var r,n=e.displayed===e.total;o.append(JIRA.DashboardItem.Common.SearchResults.Templates.resultsTable({pagination:n,table:e.table}));n=o.find(".results-count-link");e.url?r=g()+e.url:i.jql&&(r=g()+"/issues/?jql="+encodeURIComponent(i.jql));r&&n.replaceWith(JIRA.DashboardItem.Common.SearchResults.Templates.searchLink({href:r,title:e.title,issueCount:n.html()}));h("th.sortable",o).each(function(){this.onclick=null}).click(function(e){e.preventDefault();o.find(".search-results-dashboard-item-issue-table").addClass("loading");i.sortBy=h(this).attr("rel");m.trigger("sorted",{sortBy:i.sortBy})});h(".pagination a",o).click(function(e){e.preventDefault();o.find(".search-results-dashboard-item-issue-table").addClass("loading");i.startIndex=h(this).attr("rel");u()});h(".issue-link, .tinylink, .lozenge, .external-link",o).click(function(e){var t=h(e.target).closest("td").attr("class")||"unknown";m.trigger("onIssueLinkClick",{event:e,type:t})});f.create({trigger:".issue-actions-trigger",autoScroll:!1,ajaxOptions:{dataType:"json",cache:!1,formatSuccess:p}});s.onContentLoaded&&setTimeout(s.onContentLoaded,500)}else s.onEmptyResult?s.onEmptyResult(e,t,a):o.empty().append(JIRA.DashboardItem.Common.SearchResults.Templates.noResults())}function u(){n(s.gadgetId,"gadget-mark","Unspecified","fetchData","start");var e=h.extend({},l,{sortBy:i.sortBy&&""!==i.sortBy?i.sortBy:null,startIndex:i.startIndex||0}),t=r+"?"+h.param(e);if(window.DASHBOARD_GADGET_PRELOADED_DATA&&window.DASHBOARD_GADGET_PRELOADED_DATA[t]){var a=window.DASHBOARD_GADGET_PRELOADED_DATA[t];delete window.DASHBOARD_GADGET_PRELOADED_DATA[t];n(s.gadgetId,"gadget-mark","Unspecified","fetchData","end");c.apply(this,[a]);return h.Deferred().resolve(a)}return h.ajax({url:r,type:"GET",contentType:"application/json",dataType:"json",cache:!0,headers:{"Cache-control":d},data:e,error:function(e,t,a){n(s.gadgetId,"gadget-mark","Unspecified","fetchData","end");s.onError?s.onError(e,t,a):o.empty().append(JIRA.DashboardItem.Common.SearchResults.Templates.errorResult())},success:function(){n(s.gadgetId,"gadget-mark","Unspecified","fetchData","end");c.apply(this,arguments)},complete:s.onContentLoaded})}var m=a.extend({render:function(){if(i.filterId){r=g()+"/rest/gadget/1.0/issueTable/filter";l.filterId=i.filterId;return u()}if(i.jql){r=g()+"/rest/gadget/1.0/issueTable/jql";l.jql=i.jql;return u()}throw new Error("Unable to render search results. filterId or jql are required.")}},e.Events);return m}});;
;
/* module-key = 'com.atlassian.jira.gadgets:search-results-component', location = 'jira-gadgets-plugin/static/components/searchresults/SearchResultsConfig.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.DashboardItem&&(JIRA.DashboardItem={}),"undefined"==typeof JIRA.DashboardItem.Common&&(JIRA.DashboardItem.Common={}),"undefined"==typeof JIRA.DashboardItem.Common.SearchResults&&(JIRA.DashboardItem.Common.SearchResults={}),"undefined"==typeof JIRA.DashboardItem.Common.SearchResults.Templates&&(JIRA.DashboardItem.Common.SearchResults.Templates={}),JIRA.DashboardItem.Common.SearchResults.Templates.config=function(e,s){return""+Atlassian.DashboardItem.Common.Templates.config({isConfigured:e.preferences.isConfigured,fields:"<fieldset>"+JIRA.DashboardItem.Common.SearchResults.Templates.numberResults({prefix:e.prefix,id:"number-results",value:e.preferences.num})+JIRA.DashboardItem.Common.Config.Templates.columnPicker({prefix:e.prefix,id:"fields-to-display"})+Atlassian.DashboardItem.Common.Templates.refreshInterval({prefix:e.prefix,id:"refresh-interval",value:e.preferences.refresh})+"</fieldset>"})},JIRA.DashboardItem.Common.SearchResults.Templates.numberResults=function(e,s){var a="",t=e.prefix+e.id;return a+='<div class="field-group '+soy.$$escapeHtml(e.id)+'"><label for="'+soy.$$escapeHtml(t)+'">'+soy.$$escapeHtml("Number of Results:")+'<span class="aui-icon icon-required"> '+soy.$$escapeHtml("required")+'</span></label><input class="text" type="text" id="'+soy.$$escapeHtml(t)+'" name="'+soy.$$escapeHtml(e.id)+'" value="'+soy.$$escapeHtml(e.value)+'"><div class="error">'+soy.$$escapeHtml("Provided value must be a number")+'</div><div class="description">'+soy.$$escapeHtml("Number of results to display (maximum of 50).")+"</div></div>"};;
;
/* module-key = 'com.atlassian.jira.gadgets:search-results-component', location = 'jira-gadgets-plugin/static/components/searchresults/SearchResultsConfig.js' */
define("jira-dashboard-items/components/search-results-config",["jira-dashboard-items/components/column-picker","jquery","underscore"],function(s,d,u){"use strict";return function(i){var o=d(i.context),a=i.preferences;return{renderConfig:function(){var e=(Math.random()+1).toString(36).substring(7)+"-";o.empty().html(JIRA.DashboardItem.Common.SearchResults.Templates.config({prefix:e,preferences:{num:a.num,refresh:a.refresh,isConfigured:a.isConfigured}}));var r=o.find("form"),t=(new s).init({errorContainer:o.find(".dashboard-item-error"),tableElement:r.find("#"+e+"fields-to-display-table"),fieldElement:r.find("#"+e+"fields-to-display-select"),columnNames:a.columnNames,onContentLoaded:i.onContentLoaded});function n(){var e=function(){var e=r.find("input[name=number-results]"),n=e.val();if(0<n&&n<=50){e.parents(".field-group").find(".error").hide();return!0}e.parents(".field-group").find(".error").show();return!1}(),n=t.validate();return e&&n}r.on("submit",u.bind(function(e){e.preventDefault();if(n()){e=d(e.target);i.onSave({num:e.find("input[name=number-results]").val(),refresh:i.gadgetAPI.getRefreshFieldValue("refresh-interval"),columnNames:t.getValue()})}else i.onContentLoaded()},this));r.find(".buttons-container .cancel").on("click",u.bind(function(){i.onCancel()},this));return r}}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:wrm-gadget-browser-metrics', location = 'jira-gadgets-plugin/static/dashboarditem/common/WrmGadgetMetrics.js' */
define("jira-dashboard-items/wrm-gadget-browser-metrics",["internal/browser-metrics","jira/featureflags/feature-manager"],function(i,t){function r(t,r,e){this.marks={};this.key=t;this.gadgetId=""+r;this.reportGadgetMetrics=e}function a(){return window&&window.performance&&window.performance.now()}r.prototype={markStart:function(t){this.marks.start=a();window.__SPA__&&"function"==typeof this.reportGadgetMetrics&&this.reportGadgetMetrics(this.gadgetId,"gadget-start",t)},report:function(t){var r=this;if(r.key&&r.marks.start)if(window.__SPA__)"function"==typeof this.reportGadgetMetrics&&this.reportGadgetMetrics(this.gadgetId,"gadget-rendering-finished",t);else{var e=a();i.start({key:r.key,isInitial:!0,reporters:function(){return{gadgetStart:r.marks.start,gadgetDuration:e-r.marks.start}}});i.end({key:r.key})}},reportCustomMarkStart:function(t){window.__SPA__&&this.reportGadgetMetrics(this.gadgetId,"gadget-mark","Unspecified",t,"start")},reportCustomMarkEnd:function(t){window.__SPA__&&this.reportGadgetMetrics(this.gadgetId,"gadget-mark","Unspecified",t,"end")}};return r});;
;
/* module-key = 'com.atlassian.jira.gadgets:dashboard-item-common-resources', location = 'jira-gadgets-plugin/static/dashboarditem/common/DashboardItemCommonFunctions.js' */
define("jira-dashboard-items/common-functions",["underscore","jira/analytics/web-client"],function(r,n){function t(e,t){return String.fromCharCode(t)}return{projectFilterBackwardCompatible:function(e){var t=r.extend({},e);if(t.projectOrFilterId&&(!t.type||!t.id)){t.name=t.projectOrFilterId;e=t.projectOrFilterId.split("-");if(2===e.length){t.type=e[0];t.id=e[1]}}delete t.projectOrFilterId;return t},getSafeLegacyProjectOrFilterId:function(e){!(e=r.extend({},e)).projectOrFilterId&&e.type&&e.id&&(e.projectOrFilterId=e.type+"-"+e.id);delete e.id;delete e.type;return e},sendClickAnalyticsEvent:function(e,t){n.sendUIEvent({action:"clicked",actionSubject:"link",actionSubjectId:t,source:"dashboardScreen",attributes:{gadgetType:e}})},unescapeString:function(e){return e.replace(/&#([0-9]+);/g,t)}}});;
;
/* module-key = 'com.atlassian.jira.gadgets:filter-results-dashboard-item-resources', location = 'jira-gadgets-plugin/static/dashboarditem/filterresults/FilterResults.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.DashboardItem&&(JIRA.DashboardItem={}),"undefined"==typeof JIRA.DashboardItem.FilterResults&&(JIRA.DashboardItem.FilterResults={}),"undefined"==typeof JIRA.DashboardItem.FilterResults.Templates&&(JIRA.DashboardItem.FilterResults.Templates={}),JIRA.DashboardItem.FilterResults.Templates.filterErrorResult=function(e,t){var s='<div class="empty-results search-results-dashboard-item">',a='<a href="'+soy.$$escapeHtml(AJS.contextPath())+"/issues/?filter="+soy.$$escapeHtml(e.filterId)+'">';return s+=aui.message.error({content:"<p>"+soy.$$filterNoAutoescape(AJS.format("The filter configured for this gadget could not be retrieved. Please verify it is still valid on the {0}issue navigator{1}.",a,"</a>"))+"</p>"})+"</div>"},JIRA.DashboardItem.FilterResults.Templates.noResults=function(e,t){var s='<div class="empty-results search-results-dashboard-item">',a='<a href="'+soy.$$escapeHtml(e.href)+'" '+(e.title?'title="'+soy.$$escapeHtml(e.title)+'"':"")+">";return s+=soy.$$filterNoAutoescape(AJS.format("No matching {0}issues{1} found.",a,"</a>"))+"</div>"};;
;
/* module-key = 'com.atlassian.jira.gadgets:filter-results-dashboard-item-resources', location = 'jira-gadgets-plugin/static/dashboarditem/filterresults/FilterResults.js' */
define("jira-dashboard-items/filter-results",["jira/util/formatter","wrm/context-path","jquery","underscore","jira-dashboard-items/components/filter-picker","jira-dashboard-items/components/search-results-config","jira-dashboard-items/components/search-results","internal/browser-metrics","jira-dashboard-items/wrm-gadget-browser-metrics","jira-dashboard-items/common-functions"],function(d,a,o,l,n,f,c,e,I,h){"use strict";function t(e){this.API=e;this.rendered=0}t.prototype.render=function(t,r){var i=this,e=new I("jira.gadgets.filter-results",this.API.getGadgetId(),this.API.reportGadgetMetrics);if(0===i.rendered){e.markStart("View");i.rendered+=1}var s=i.API.gadget?i.API.gadget.amdModule:"UNKNOWN_GADGET";i.API.showLoadingBar();var n=o.extend({},r);n.filterId=void 0!==n.filterId?n.filterId.replace("filter-",""):n.filterId;this.searchResults=new c({gadgetId:this.API.getGadgetId(),context:t,preferences:n,onContentLoaded:this.API.resize.bind(this.API),reportGadgetMetrics:this.API.reportGadgetMetrics?this.API.reportGadgetMetrics.bind(this.API):o.noop,onEmptyResult:function(){t.append(JIRA.DashboardItem.FilterResults.Templates.noResults({href:a()+"/issues/?filter="+n.filterId}));i.API.resize()},onError:function(){t.empty().append(JIRA.DashboardItem.FilterResults.Templates.filterErrorResult({filterId:n.filterId}));i.API.resize()},shouldUseCache:i.API.shouldUseCache});this.searchResults.render().done(function(e){e&&e.title&&i.API.setTitle(d.format("Filter Results: {0}",e.title))}).always(this.API.hideLoadingBar.bind(this.API)).always(function(){if(1===i.rendered){e.report("View");i.rendered+=1}});this.searchResults.on("sorted",function(e){r.sortBy=e.sortBy;i.API.isEditable()?i.API.savePreferences(r):i.render(t,r)});this.searchResults.on("onIssueLinkClick",function(e){h.sendClickAnalyticsEvent(s,e.type)});i.API.initRefresh(n,l.bind(i.render,i,t,n))};t.prototype.renderEdit=function(e,t){var r=this,i=new f({context:e,preferences:t,onContentLoaded:function(){r.API.hideLoadingBar();r.API.resize()},onCancel:this.API.closeEdit.bind(this.API),onSave:function(e){if(r.filterPicker.validate()){var t=r.filterPicker.getValue();e.filterId=t.id;r.API.savePreferences(e)}else r.API.resize()},gadgetAPI:r.API}).renderConfig(),s=r.API.getGadgetId()+"-";i.find("fieldset:first").prepend(JIRA.DashboardItem.Common.Config.Templates.filterPicker({prefix:s,id:"saved-filter"}));this.filterPicker=(new n).init({errorContainer:e.find(".dashboard-item-error"),element:i.find("#"+s+"saved-filter"),selectedValue:void 0!==t.filterId?t.filterId.replace("filter-",""):t.filterId,parentElement:i});this.API.once("afterRender",function(){e.width()<350&&i.addClass("top-label");r.API.showLoadingBar()})};return t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:dashboard-item-chart-common', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartColors.js' */
define("jira-agile/rapid/ui/chart/chart-colors",function(){"use strict";var e={estimate:"#89c495",trend:"#3b73af",scope:"#cccccc",completed:"#3b7fc4",issueCount:"#205081",unestimated:"#815b3a",unestimatedPercent:"#d04437",timeSpent:"#14892c",nonWorkingDays:"#f2f2f2",nonWorkingDaysWallboard:"#333",dashedMarking:"#000",releaseDate:"#999",wallboard:{backgroundColor:"#000",borderColor:"#999",textColor:"#999",tickColor:"#999"}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:dashboard-item-chart-common', location = 'jira-agile-module/dashboarditem/common/ui/chart/chart-utils.js' */
"use strict";define("jira-agile/dashboarditem/common/ui/chart/chart-utils",["underscore"],function(r){return{momentDateFormat:"LL",momentTimeFormat:"LLL",renderUTCMillisAsDate:function(r){return this.renderUTCMillisInFormat(r,this.momentTimeFormat)},renderUTCMillisInFormat:function(r,t){return moment.utc(r).format(t)},renderStatisticText:function(r,t,e){var i=t?Math.abs(r):r;if("duration"===e){var n=!t&&r<0?"-":"";return i=Math.abs(i),n+GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(i)}return GH.NumberFormat.format(i)}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:dashboard-item-chart-common', location = 'jira-agile-module/dashboarditem/common/ui/chart/chart-controller.js' */
"use strict";function _classCallCheck(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(r,e,t){return e&&n(r.prototype,e),t&&n(r,t),r}}();define("jira-agile/dashboarditem/common/ui/chart/chart-controller",["underscore","jira-agile/rapid/ui/chart/chart-colors"],function(n,r){var e=function(){function e(n){_classCallCheck(this,e),this.env=n}return _createClass(e,[{key:"getNonWorkingBlocks",value:function(){var e=this.env.burndownRate.getNonWorkingDays();return n.map(e,function(n){return{xaxis:{from:n.start,to:n.end},color:r.nonWorkingDays}})}}]),e}();return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:dashboard-item-chart-common', location = 'jira-agile-module/dashboarditem/common/ui/chart/chart.js' */
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();define("jira-agile/dashboarditem/common/ui/chart/chart",["jquery"],function(e){var n=function(){function n(e){_classCallCheck(this,n),this.env=e,this.defaultOptions={colors:["#9eb6d4","#afd8f8","#cb4b4b","#4da74d","#9440ed"],grid:{backgroundColor:"#fff",borderColor:"#bbb",borderWidth:1,internalLineWidth:0,labelMargin:2,minBorderMargin:1},legend:{container:"#"+this.env.wrapperId+" #ghx-chart-legend",noColumns:1},shadowSize:0,xaxis:{tickLength:4},yaxis:{tickLength:4}}}return _createClass(n,[{key:"draw",value:function(n,r,t,a){r=e(r);var i=e.extend(!0,{},this.defaultOptions);return a&&e.extend(!0,i,a),e.plot(r,t,i)}}]),n}();return n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:dashboard-item-chart-common', location = 'jira-agile-module/dashboarditem/common/ui/chart/flot-chart-utils.js' */
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();define("jira-agile/dashboarditem/sprintburndown/common/ui/chart/flot-chart-utils",[],function(){var t=function(){function t(e){_classCallCheck(this,t),this.env=e}return _createClass(t,[{key:"setAndAlignAxisLabels",value:function(t,e){var r=AJS.$(this.env.wrapperElement);r.find(".ghx-axis-x").text(t),r.find(".ghx-axis-y").find(".ghx-inner").text(e)}},{key:"calculateYAxis",value:function(t,e){return"duration"===e.renderer?this.createYAxisForDuration(t):"issueCount"===e.typeId?this.createYAxisForIssueCount(t):{tickFormatter:this.numberFormatter.bind(this)}}},{key:"issueCountFormatter",value:function(t,e){return t.toFixed(0)}},{key:"durationFormatter",value:function(t,e){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(t,{timeFormat:GH.TimeFormatDisplays.HOURS,durationUnit:GH.TimeFormatDurationUnits.SECONDS})}},{key:"numberFormatter",value:function(t,e){return GH.NumberFormat.format(t)}},{key:"createYAxisForIssueCount",value:function(t){var e={tickFormatter:this.issueCountFormatter.bind(this)};if(t<15)e.minTickSize=1;else{var r=8;e.tickSize=Math.ceil(t/r)}return e}},{key:"createYAxisForDuration",value:function(t){var e=8,r=parseInt(t/e,10);0===t&&(r=3600);var n=r%3600;return 0!==n&&(r+=3600-n),{tickSize:r,tickFormatter:this.durationFormatter.bind(this)}}}]),t}();return t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:dashboard-item-chart-common', location = 'jira-agile-module/dashboarditem/common/analytics/report-sla-tracker.js' */
"use strict";var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};define("jira-agile/dashboarditem/common/analytics/report-sla-tracker",["jira/analytics/web-client","jira/util/unsafe-logger","jquery"],function(t,e,a){var r="jira-software",i="report-critical-data-failed-unknown-reason",n="report-critical-data-failed-with-status-code",o="report-failed-elements-missing",s="report-failed-unknown-report",u="timeout",c={burndown:"sprintBurndown",unknown:"unknown"},d=function(t,e,a){var r=e&&e.status;if(r)400===r||401===r||403===r?b({reportName:t,attributes:a||{}}):404===r||(r>400&&r<500?b({reportName:t,attributes:a||{}}):l({reason:n,reportName:t,statusCode:r.toString(),attributes:a||{}}));else{var o=(e&&e.statusText)===u,s=0===(e&&e.readyState),c=(e&&e.aborted)===!0;if(o||s||c)return void p({reportName:t,attributes:{isClientTimeout:o,readyStateWasUnopened:s,isAborted:c}});l({reason:i,reportName:t,attributes:a||{}})}},l=function(e){var a=e.reason,i=e.reportName,n=e.statusCode,o=e.attributes;t.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskFail",attributes:_extends({task:f(i),analyticsSource:i,application:r,edition:GH.Util.getEdition(r),isClassic:!0,isGadget:!0,failureReason:a,statusCode:n},o)})},p=function(e){var a=e.reportName,i=e.attributes;t.sendOperationalEvent({source:"ui",actionSubject:"reports",action:"networkFail",attributes:_extends({task:f(a),analyticsSource:a,application:r,edition:GH.Util.getEdition(r),isClassic:!0,isGadget:!0},i)})},b=function(e){var a=e.reportName,i=e.attributes;t.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:_extends({task:f(a),analyticsSource:a,application:r,edition:GH.Util.getEdition(r),isClassic:!0,isGadget:!0},i)})},f=function(t){return"view"+(t[0].toUpperCase()+t.substring(1))},v=function(t){var e=a(".ghx-chart-view",t).length,r=a(".ghx-chart-content .info",t).length;m(e,r,c.burndown)},m=function(t,e,a){t||e?b({reportName:a,attributes:{isChart:!!t,isBlankExperience:!!e}}):l({reason:o,reportName:a})};return{reportNames:c,checkReportAndFireSlaEvent:function(t,e,a,r,i,n){if(e)return void d(t,e,a);switch(t){case c.burndown:return void v(n);default:return void l({reason:s,reportName:c.unknown})}}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-gadget-common', location = 'jira-agile-module/includes/js/gadgets/rapid/greenhopper-rapid-common.soy' */
// This file was automatically generated from greenhopper-rapid-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.gadgets.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.gadgets == 'undefined') { GH.tpl.gadgets = {}; }


GH.tpl.gadgets.renderBasicHeader = function(opt_data, opt_ignored) {
  return '' + ((opt_data.title && opt_data.showTitle) ? '<h2 class="gg-name">' + soy.$$escapeHtml(opt_data.title) + ((opt_data.subtitle && opt_data.showSubtitle) ? '<span class="gg-divider">:&nbsp;</span>' : '') + '</h2>' : '') + ((opt_data.subtitle && opt_data.showSubtitle) ? '<h3 class="gg-subtitle">' + ((opt_data.subtitleLabel) ? '<span class="gg-subtitle-label">' + soy.$$escapeHtml(opt_data.subtitleLabel) + ':</span> ' : '') + ((opt_data.subtitleLink) ? '<a href="' + soy.$$escapeHtml(opt_data.subtitleLink) + '" title="' + soy.$$escapeHtml(opt_data.subtitle) + '" class="version-link">' + soy.$$escapeHtml(opt_data.subtitle) + '</a>' : soy.$$escapeHtml(opt_data.subtitle)) + '<span class=\'ghx-version-report-version-status\'></span></h3>' : '');
};
if (goog.DEBUG) {
  GH.tpl.gadgets.renderBasicHeader.soyTemplateName = 'GH.tpl.gadgets.renderBasicHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-gadget-common', location = 'jira-agile-module/includes/js/gadgets/greenhopper-common.js' */
AJS.$.namespace("GH.gadget.utils"),GH.gadget.utils.getViewName=function(){var e=new RegExp("[\\?&]view=([^&#]*)"),t=e.exec(window.location.href);return t?t[1].toLowerCase():""},GH.gadget.utils.isWallboardView=function(){var e=GH.gadget.utils.getViewName();return"wallboard"==e},GH.gadget.utils.insertHeaderElements=function(e,t){if(e&&e.length&&!(e.length<1)){var a="<h2>";AJS.$(e).each(function(e,t){e>0&&(a+=" : "),a+=t}),a+="</h2>",AJS.$(a).prependTo(t)}},GH.gadget.utils.getProjectLink=function(e,t){return e.getBaseUrl()+"/browse/"+t},GH.gadget.utils.getVersionLink=function(e,t,a){return GH.gadget.utils.getProjectLink(e,t)+"/fixforversion/"+a},GH.gadget.utils.redirectParent=function(e){window.top.location.href=e},GH.gadget.utils.getProjectLinkMarkup=function(e,t){var a=GH.gadget.utils.getProjectLink(e,t.key);return'<a href="'+a+'"><strong>'+AJS.escapeHTML(String(t.name))+"</strong> ("+t.key+")</a>"},GH.gadget.utils.getVersionLinkMarkup=function(e,t,a){if(a.id)var n=GH.gadget.utils.getVersionLink(e,t.key,a.id);else var n=GH.gadget.utils.getProjectLink(e,t.key);return'<a href="'+n+'" class="gg-days-version"><strong>'+a.name+"</strong></a>"},GH.gadget.utils.getProjectVersionHeaderElements=function(e,t){var a=[],n=t.project,i=t.version,l="true"==e.getPref("showProjectName");l&&a.push(GH.gadget.utils.getProjectLinkMarkup(e,n));var r="true"==e.getPref("showVersionName");return r&&a.push(GH.gadget.utils.getVersionLinkMarkup(e,n,i)),a},GH.gadget.utils.addProjectVersionHeader=function(e,t,a){var n=GH.gadget.utils.getProjectVersionHeaderElements(e,t);GH.gadget.utils.insertHeaderElements(n,a)},GH.gadget.utils.showInlineWarning=function(e,t){var a=e.getView();a.empty(),AJS.messages.warning(a,{autoHide:!1,shadowed:!1,closeable:!1,body:t}),e.resize()},AJS.$.namespace("GH.gadget.fields"),GH.gadget.fields.sectionTitle=function(e,t,a){return{label:"none",id:t,type:"callbackBuilder",callback:function(t){t.parent().children("label").remove(),t.parent().children("#-error").remove();var n="<h3>"+e.getMsg(a)+"</h3>";t.append(AJS.$(n))}}},GH.gadget.fields.checkbox=function(e,t,a,n,i){return{userpref:t,label:e.getMsg(a),id:"checkbox_"+t,type:"callbackBuilder",callback:function(l){l.addClass("checkbox").wrap('<fieldset class="group" />'),l.parent().siblings("label").remove(),l.closest(".field-group").removeClass("field-group"),l.removeClass("builder-container");var r=t+"_checkbox",s=n?" checked":"",c='<input type="checkbox" class="checkbox" id="'+r+'" '+s+" />";c+='<label for="'+r+'">'+e.getMsg(a)+"</label>",c+='<input type="hidden" id="'+t+'" name="'+t+'" value="'+n+'" />',l.append(AJS.$(c)),AJS.$("#"+r,l).each(function(){var e=this,a=AJS.$(e);a.change(function(){var a="#"+t;AJS.$(a).attr("value",e.checked)})}),i&&l.append(AJS.$("<div/>").addClass("description").text(e.getMsg(i)))}}},GH.gadget.fields.updateVersionSelectOptions=function(e,t,a,n,i){var l=AJS.$("#"+a);l.empty();var r=AJS.$.ajax({key:"versions",url:"/rest/greenhopper/1.0/versionBoard-list/generate",data:{showUnscheduled:n,projectId:t},success:function(t){r=t;var n=e.getPref(a);if(i){var s="auto",c=AJS.$("<option />").addClass("next-release-option").val(s).text(e.getMsg("gh.gadget.days.remaining.autoOption"));n==s&&c.attr("selected","selected"),l.append(c)}AJS.$(r.versionOptions).each(function(){if(!i||""!=this.value){var e=AJS.$("<option/>").attr("value",this.value).text(this.label);l.append(e),n==this.value&&e.attr("selected","selected")}})}})},GH.gadget.fields.updateFieldSelectOptions=function(e,t,a,n){var i=AJS.$("#"+a);i.empty();AJS.$.ajax({key:"fields",url:"/rest/greenhopper/1.0/watched-fields/generate",data:{projectId:t,showSystem:n},success:function(t){if(t){var n=t.fields,l=e.getPref(a);AJS.$(n).each(function(){var e=AJS.$("<option/>").attr("value",this.value).text(this.label);i.append(e),l==this.value&&e.attr("selected","selected")})}}})},GH.gadget.fields.updateContextSelectionOptions=function(e,t,a){var n=AJS.$("#"+a);n.empty();var i=AJS.$.ajax({key:"contexts",url:"/rest/greenhopper/1.0/context-list/generate",data:{projectId:t,returnIds:!0},success:function(t){var l=e.getPref(a).split("|");i=t,AJS.$(i.contextOptions).each(function(){var e=AJS.$("<option/>").attr("value",this.value).text(this.label);n.append(e);for(var t=0,a=l.length;t<a;t++)l[t]==this.value&&e.attr("selected","selected")})}})},GH.gadget.fields.updateTBMappingSelectionOptions=function(e,t,a){var n=AJS.$("#"+a);n.empty();AJS.$.ajax({key:"tbmapping",url:"/rest/greenhopper/1.0/tbmapping-list/generate",data:{projectId:t},success:function(t){var i=e.getPref(a).split("|");tbMapping=t,AJS.$(tbMapping.tbMappingOptions).each(function(){var t=AJS.$("<option/>").attr("value",this.value).text(e.getMsg(this.label));n.append(t);for(var a=0,l=i.length;a<l;a++)i[a]==this.value&&t.attr("selected","selected")})}})},GH.gadget.fields.projectPicker=function(e,t,a){return{userpref:t,label:e.getMsg("gadget.common.project.label"),id:"project_picker_"+t,type:"callbackBuilder",callback:function(n){n.append(AJS.$("<select/>").attr({id:t,name:t}).addClass("select"));var i=AJS.$("#"+t);i.empty();var l=e.getPref(t);AJS.$(a).each(function(){var e=AJS.$("<option/>").attr("value",this.value).text(this.label);i.append(e),this.value==l&&(e.attr({selected:"selected"}),selectedProjectId=this.value)})}}},GH.gadget.fields.versionPicker=function(e,t,a,n,i){return{userpref:a,label:e.getMsg("gh.gadget.common.version"),id:"version_picker_"+a,type:"callbackBuilder",callback:function(l){l.append(AJS.$("<select>").attr({id:a,name:a}).addClass("select"));var r=AJS.$("#"+t);GH.gadget.fields.updateVersionSelectOptions(e,r.val(),a,n,i),r.change(function(t){GH.gadget.fields.updateVersionSelectOptions(e,r.val(),a,n,i)})}}},GH.gadget.fields.fieldPicker=function(e,t,a,n){var i="";return i=n?e.getMsg("gh.gadget.task.board.count"):e.getMsg("gh.gadget.custom.field.burndown.field.label"),{userpref:a,label:i,id:"field_picker_"+a,type:"callbackBuilder",callback:function(i){i.append(AJS.$("<select>").attr({id:a,name:a}).addClass("select"));var l=AJS.$("#"+t);GH.gadget.fields.updateFieldSelectOptions(e,l.val(),a,n),l.change(function(t){GH.gadget.fields.updateFieldSelectOptions(e,l.val(),a,n)})}}},GH.gadget.fields.contextPicker=function(e,t,a,n){return{userpref:a,label:e.getMsg("gh.gadget.common.context"),id:"context_picker_"+a,type:"callbackBuilder",callback:function(i){var l={id:a,name:a},r="select";n&&(l.multiple="multiple",l.size="4",r="multi-select"),i.append(AJS.$("<select>").attr(l).addClass(r));var s=AJS.$("#"+t);GH.gadget.fields.updateContextSelectionOptions(e,s.val(),a),s.change(function(t){GH.gadget.fields.updateContextSelectionOptions(e,s.val(),a)})}}},GH.gadget.fields.tbMappingPicker=function(e,t,a){return{userpref:a,label:e.getMsg("gh.gadget.common.tbcolumns"),id:"tbMapping_picker_"+a,type:"callbackBuilder",callback:function(n){var i={id:a,name:a},l="select";i.multiple="multiple",i.size="4",l="multi-select",n.append(AJS.$("<select>").attr(i).addClass(l));var r=AJS.$("#"+t);GH.gadget.fields.updateTBMappingSelectionOptions(e,r.val(),a),r.change(function(t){GH.gadget.fields.updateTBMappingSelectionOptions(e,r.val(),a)})}}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-gadget-common', location = 'jira-agile-module/includes/js/gadgets/rapid/greenhopper-rapid-common.js' */
AJS.$.namespace("GH.gadget.rapid.fields"),GH.gadget.rapid.fields.rapidViewPicker=function(e,t,a){return{userpref:t,label:e.getMsg("gh.gadget.userpref.rapid.view"),id:"rapid_view_picker_"+t,type:"callbackBuilder",callback:function(i){i.append(AJS.$("<select/>").attr({id:t,name:t}).addClass("select"));var d=AJS.$("#"+t);d.empty();var r=e.getPref(t);a.sort(GH.RapidBoard.viewModelComparator),AJS.$(a).each(function(){var e=AJS.$("<option/>").attr("value",this.id).text(this.name);d.append(e),this.id==r&&e.attr({selected:"selected"})}),d.change(function(){var e=d.find("option:selected").attr("value");AJS.$(AJS).trigger("config.rapidViewChanged",{rapidViewId:e})})}}},GH.gadget.rapid.fields.getSelectedRapidViewId=function(e){return AJS.$("#"+e).find("option:selected").attr("value")},GH.gadget.rapid.fields.quickFilterPicker=function(e,t,a){function i(a,i){AJS.$.ajax({url:GH.Ajax.buildRestUrl("/gadgets/rapidview/pool/quickfilters/")+a,type:"GET",dataType:"json",success:function(a){var d=e.getPref(t).split("|");i.empty(),AJS.$(a).each(function(){var e=AJS.$("<option/>").attr("value",this.id).text(this.name);i.append(e);for(var t=0,a=d.length;t<a;t++)d[t]==this.id&&e.attr("selected","selected")})}})}return{userpref:t,label:e.getMsg("gh.gadget.userpref.quick.filter"),id:"quick_filter_picker_"+t,type:"callbackBuilder",callback:function(e){var d={id:t,name:t},r="multi-select";d.multiple="multiple",d.size="4";var n=AJS.$("<select>").attr(d).addClass(r);e.append(n),AJS.$("<input/>").attr({name:t,type:"hidden",value:"none"}).appendTo(e);var l=GH.gadget.rapid.fields.getSelectedRapidViewId(a);i(l,n),AJS.$(AJS).bind("config.rapidViewChanged",function(e,t){i(t.rapidViewId,n)})}}},GH.gadget.rapid.fields.sprintPicker=function(e,t,a,i,d){function r(a,r){d(a).done(function(a){var d=e.getPref(t);if(r.empty(),i){var n="auto",l=AJS.$("<option />").addClass("next-release-option").val(n).text(e.getMsg("gh.gadget.sprint.option.auto"));d==n&&l.attr("selected","selected"),r.append(l)}AJS.$.each(a,function(e,t){var a=AJS.$("<option/>").attr("value",t.id).text(t.name);r.append(a),d==t.id&&a.attr("selected","selected")})})}return{userpref:t,label:e.getMsg("gh.gadget.userpref.rapid.view"),id:"sprint_picker_"+t,type:"callbackBuilder",callback:function(e){var i={id:t,name:t},d="select",n=AJS.$("<select>").attr(i).addClass(d);e.append(n);var l=GH.gadget.rapid.fields.getSelectedRapidViewId(a);r(l,n),AJS.$(AJS).bind("config.rapidViewChanged",function(e,t){r(t.rapidViewId,n)})}}},GH.gadget.rapid.fields.versionPicker=function(e,t,a,i){function d(a,d){i(a).done(function(a){var i=e.getPref(t);d.empty(),AJS.$.each(a,function(e,t){var a=AJS.$("<option/>").attr("value",t.id).text(t.name);d.append(a),i==t.id&&a.attr("selected","selected")}),GADGET.GH.versionListUpdatedHandler&&GADGET.GH.versionListUpdatedHandler(a)})}return{userpref:t,label:e.getMsg("gh.gadget.userpref.version"),id:"version_picker_"+t,type:"callbackBuilder",callback:function(e){var i={id:t,name:t},r="select",n=AJS.$("<select>").attr(i).addClass(r);e.append(n);var l=GH.gadget.rapid.fields.getSelectedRapidViewId(a);d(l,n),AJS.$(AJS).bind("config.rapidViewChanged",function(e,t){d(t.rapidViewId,n)})}}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-gadget-common', location = 'jira-agile-module/includes/js/gadgets/rapid/greenhopper-rapid-server.js' */
AJS.$.namespace("GH.gadget.rapid.server"),GH.gadget.rapid.server.wrapDeferredWith=function(r,e){var d=AJS.$.Deferred();return r.done(function(r){d.resolve(e(r))}).fail(d.reject),d.promise()},GH.gadget.rapid.server.doLoadSprintsByBoardId=function(r){return GH.Ajax.get({url:"/sprintquery/"+r,deferErrorHandling:!0,data:{includeFutureSprints:!1}},"sprintsByBoard")},GH.gadget.rapid.server.doLoadVersionByBoardId=function(r){return GH.Ajax.get({url:"/xboard/plan/backlog/versions.json",data:{rapidViewId:r}},"versionsListForReport")},GH.gadget.rapid.server.doLoadConfigByBoardId=function(r){return GH.Ajax.get({url:"/xboard/config.json",data:{rapidViewId:r},deferErrorHandling:!0})},GH.gadget.rapid.server.loadOpenSprintsByBoardId=function(r){return GH.gadget.rapid.server.wrapDeferredWith(GH.gadget.rapid.server.doLoadSprintsByBoardId(r),function(r){return _.where(r.sprints,{state:"ACTIVE"})})},GH.gadget.rapid.server.loadVersionsByBoardId=function(r){if(!r){var e=AJS.$.Deferred();return setTimeout(function(){e.resolve([])}),e.promise()}return GH.gadget.rapid.server.wrapDeferredWith(GH.gadget.rapid.server.doLoadVersionByBoardId(r),function(r){var e=[];return _.each(r.versionData.versionsPerProject,function(d,a){e.push(_.map(d,function(e){var d=_.findWhere(r.projects,{id:parseInt(a,10)});return{id:e.id,name:e.name,projectKey:d.key}}))}),_.flatten(e)})},GH.gadget.rapid.server.loadConfigByBoardId=function(r){return GH.gadget.rapid.server.wrapDeferredWith(GH.gadget.rapid.server.doLoadConfigByBoardId(r),function(r){return r.currentViewConfig})};;
;
/* module-key = 'jira.webresources:bundles-experiment-feature-flags', location = '/js/featureflags/bundles-experiment-feature-manager.js' */
define("jira/featureflags/bundles-experiment-feature-manager",["jira/util/data/meta","jira/featureflags/feature-manager"],function(e,t){"use strict";const a="jsw.growth.confluence.bundles.activation",n="variation-1",r="variation-2",i="not-enrolled",u=t.getFlagValue(a)||i;return{BUNDLES_LAUNCH_DARKLY_FEATURE_FLAG:a,shouldCreateSpace:function(){return[n,r].indexOf(u)!==-1},getBundleExperimentCohort:function(){return u}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-global-message" class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml('Refresh') + '</a>' + ((opt_data.showIgnore) ? '<span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml('Ignore') + '</a>' : '') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/Events.js' */
define("jira-agile/rapid/events",["require"],function(t){function n(t){return t?e.extend(t,n.prototype):t=this,t._bindings=[],t}var e=t("underscore");return n.prototype={on:function(t,n,e){return e&&this._off({type:t,context:e}),this._bindings.push({type:t,handler:n,context:e}),this},off:function(t){return e.isString(t)?this._off({type:t}):e.isFunction(t)?this._off({handler:t}):e.isObject(t)&&this._off({context:t}),this},_off:function(t){this._bindings=e.reject(this._bindings,function(n){var e=!t.type||t.type===n.type,i=!t.context||t.context===n.context,r=!t.handler||t.handler===n.handler;return e&&i&&r})},trigger:function(t){var n=Array.prototype.slice.call(arguments,1);return e.each(this._bindings,function(e){e.type===t&&e.handler.apply(e.context,n)}),this}},n}),AJS.namespace("GH.Events",null,require("jira-agile/rapid/events"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/GlobalEvents.js' */
define("jira-agile/rapid/global-events",["require"],function(e){"use strict";var i=e("jira-agile/rapid/events");return new i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/gh-config.js' */
AJS.namespace("GH.Config"),GH.Config.isSampleDataAvailable=!1,GH.Config.setSampleDataAvailable=function(a){GH.Config.isSampleDataAvailable=a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/Ajax.js' */
define("jira-agile/rapid/ajax",["jira/util/top-same-origin-window"],function(e){"use strict";var r={};return r.CONTEXT_PATH=AJS.contextPath(),r.REST_URL_BASE="/rest/greenhopper/1.0",r.PUBLIC_REST_URL_BASE="/rest/agile/1.0",r.xhrRegistery={},r.stallTimeout=300,r.get=function(e,t){AJS.$.extend(e,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!_.isUndefined(GH.gadget)}});var n=r._executeGet(e,t);return n.pipe(function(e,r,t){return AJS.$.Deferred().resolveWith(this,[e.success,r,t])})},r.post=function(e){return e=r._getSettings(e,!0),AJS.$.extend(e,{type:"POST",contentType:"application/json"}),r._executeStore(e)},r.put=function(e){return e=r._getSettings(e,!0),e.type="PUT",r._executeStore(e)},r.del=function(e){return e=r._getSettings(e,!0),e.type="DELETE",r._executeStore(e)},r._getSettings=function(e,t){return!e.bareUrl&&e.url&&(e.bareUrl=r.buildRestUrl(e.url)),e.bareUrl&&(e.url=e.bareUrl),e.dataType||(e.dataType="json"),e.data&&t&&(e.data=JSON.stringify(e.data)),e.contentType="application/json",e},r._getXhrData=function(e){var t={timestamp:0};return e&&(t=r.xhrRegistery[e]?r.xhrRegistery[e]:r.xhrRegistery[e]=t),t},r._executeGet=function(e,t){e=r._getSettings(e);var n=r._getXhrData(t);n.xhr&&(n.xhr.abort(),delete n.xhr,delete n.xhrAbort,delete n.timeoutId);var o=n.timestamp;if(n.timestamp=(new Date).getTime(),n.timestamp-o<r.stallTimeout){var s,a=AJS.$.Deferred(),u=function(){s=r._executeGet(e,t),s.then(a.resolve,a.reject)};n.timeoutId=window.setTimeout(u,r.stallTimeout),n.xhr=a.promise(),n.xhr.abort=function(){s?s.abort.apply(s,arguments):clearTimeout(n.timeoutId)}}else n.xhr=r.makeRequest(e);return n.xhrAbort=n.xhr.abort,n.xhr.abort=function(){var e=n.xhr,r=n.xhrAbort;if(e&&r)return r.apply(e,arguments)},n.xhr.done(function(){n.xhr&&delete n.xhr}).fail(function(){n.xhr&&delete n.xhr}),n.xhr},r._executeStore=function(e){if(e=e||{},e.data&&"string"==typeof e.data&&/\?\?/.test(e.data)){var t="\\u003F\\u003F";e.data=e.data.replace(/\?\?/g,t)}return e.dataType="json",r.makeRequest(e)},r.makeRequest=function(e){var t=AJS.$.Deferred();e=_.extend(e,{success:function(){t.resolveWith(this,arguments)},error:function(){t.rejectWith(this,arguments)}});var n=t.promise(JIRA.SmartAjax.makeRequest(e)),o=n.abort;n.abort=function(e){return n.abortMarker="timeout"!==e,o.apply(n,arguments)};var s=n.pipe(r._generateDoneInterceptor(),r._generateFailInterceptor(e.errorsNoAutoEscape));return e.deferErrorHandling||s.fail(r._generateErrorHandler(e.onGlobalError,e.errorContextMap,e.contextualErrorRenderer,e.globalErrorDismissable)),s},r._generateDoneInterceptor=function(){return function(e,t,n){return e=e||{},e=r._createExtendedResult(e),r.matchesCurrentUser(n)?e.isSuccess()?AJS.$.Deferred().resolveWith(this,[e,t,n]):AJS.$.Deferred().rejectWith(this,[e,n,t,null]):r._handleCurrentUserChanged(n)}},r._generateFailInterceptor=function(e){return function(t,n,o){if(t.abortMarker)return AJS.$.Deferred();if(!r.matchesCurrentUser(t))return r._handleCurrentUserChanged(t);var s={},a=null;if(t.responseText)try{s=JSON.parse(t.responseText)}catch(u){}return s.errors||s.errorMessages?a=r._convertJiraErrors(s,e):s.message&&(a=r._convertFrameworkErrors(s)),a||(a=r._convertGenericErrors(t,o)),AJS.$.Deferred().rejectWith(this,[a,t,n,o])}},r.handleContextualErrors=function(e,r,t){return r=r||{},!!e.hasContextualErrors()&&(AJS.$(e.getContextualErrors()).each(function(n,o){var s=r[o.contextId];if(s)if(AJS.$.isFunction(s))s(o,e);else{s=AJS.$(s),s.siblings(".ghx-error").remove();var a;a=t?t(o):GH.tpl.rapid.notification.renderContextualErrors({errors:o.errors}),s.after(a)}else AJS.$(o.errors).each(function(r,t){e.addGlobalError(t)})}),!0)},r.handleGlobalErrors=function(e,r,t){return!!e.hasGlobalErrors()&&(GH.Notification.showErrors({errors:e.getGlobalErrors()},t),r&&r instanceof Function&&r(e),!0)},r.buildRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),r.buildBareRestUrl(r.REST_URL_BASE+e)},r.buildPublicRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),r.buildBareRestUrl(r.PUBLIC_REST_URL_BASE+e)},r.buildBareRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),r.CONTEXT_PATH+e},r._createExtendedResult=function(e){return e?r._extendResult({success:e}):r._extendResult({success:!0})},r._extendResult=function(e){return AJS.$.extend(e,{getGlobalErrors:function(){return e.error?e.error.errors:null},getContextualErrors:function(){return e.error?e.error.contextualErrors:null},hasGlobalErrors:function(){return e.error&&e.error.errors&&e.error.errors.length>0},hasContextualErrors:function(){return e.error&&e.error.contextualErrors},addGlobalError:function(r){e.error||(e.error={}),e.error.errors||(e.error.errors=[]),e.error.errors[e.error.errors.length]=r},getSuccessObject:function(){return e.success},isSuccess:function(){return!e.error}})},r._generateErrorHandler=function(e,t,n,o){return function(s){r.handleContextualErrors(s,t,n),r.handleGlobalErrors(s,e,o)}},r._convertJiraErrors=function(e,t){var n=e.errorMessages?e.errorMessages:[];n=_.map(n,function(e){return{message:e,noAutoescape:t}});var o=e.errors?e.errors:{};o=_.map(o,function(e,r){return{contextId:r,errors:[{message:e,noAutoescape:t}]}});var s={error:{errors:n,contextualErrors:o}};return r._extendResult(s)},r._convertFrameworkErrors=function(e){var t={error:{errors:[{message:e.message}],contextualErrors:[]}};return r._extendResult(t)},r._convertGenericErrors=function(e,t){var n=r._extendResult({});return 0===e.status&&"abort"===t?n.addGlobalError({message:"Ajax.error.timeout"}):t&&n.addGlobalError({message:t}),n},r._hasUsernameResponseHeader=function(e){return!!e.getResponseHeader("X-AUSERNAME")},r._hasUserAccountIdResponseHeader=function(e){return!!e.getResponseHeader("X-AACCOUNTID")},r._getUserForResponse=function(e){return e.getResponseHeader("X-AUSERNAME")?decodeURIComponent(e.getResponseHeader("X-AUSERNAME")):"anonymous"},r._getAccountIdForResponse=function(e){return e.getResponseHeader("X-AACCOUNTID")?decodeURIComponent(e.getResponseHeader("X-AACCOUNTID")):"anonymous"},function(){var e=require("jira/util/data/meta");r.getUserFromAJS=function(){var r=e.get("remote-user");return r?r:"anonymous"},r.getAccountIdFromAJS=function(){var r=e.get("atlassian-account-id");return r?r:"anonymous"}}(),r.matchesCurrentUser=function(e){return!e.getResponseHeader||!e.getAllResponseHeaders||!r._hasUserAccountIdResponseHeader(e)||r.getAccountIdFromAJS()===r._getAccountIdForResponse(e)||204===e.status&&!e.getAllResponseHeaders()&&AJS.$.browser.msie},r._handleCurrentUserChanged=function(t){var n=(r.getUserFromAJS(),r._getUserForResponse(t),r.getAccountIdFromAJS()),o=r._getAccountIdForResponse(t),s="anonymous"!==n&&"anonymous"===o;if(s){var a=GH.Navigation.getLoginUrl();require("jira/container-api").navigate(a,function(){location.href=a})}else e(window).location.reload();return AJS.$.Deferred()},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/ui/notification/Notification.js' */
!function(){var e=require("jira/util/top-same-origin-window"),i=function(){return e(window).document};AJS.namespace("GH.Notification"),GH.Notification.autoHideEnabled=!0;var t=Object.freeze({INFO:"info",SUCCESS:"success"});GH.Notification.showErrors=function(e,i){var t=GH.Notification.prepareNotificationDiv(),o=GH.tpl.rapid.notification.renderErrorMessages(e);"undefined"==typeof i&&(i=!0),AJS.messages.error(t,{title:"Error",body:o,closeable:i}),GH.Notification._divStyle(t)&&t.css(GH.Notification._divStyle(t)),t.show()},GH.Notification.showError=function(e,i,t){var o=GH.Notification.prepareNotificationDiv();"undefined"==typeof t&&(t=!0),AJS.messages.error(o,{title:e,body:i,closeable:t}),GH.Notification._divStyle(o)&&o.css(GH.Notification._divStyle(o)),o.show()},GH.Notification.showWarnings=function(e,i){var t={autoHide:!0,autoHideDelay:5e3,preRendered:!1,showTitle:!1};i=_.extend({},t,i);var o,a=GH.Notification.prepareNotificationDiv();o=i.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e});var n={body:o,closeable:!0};i.showTitle&&(n.title="Warning"),AJS.messages.warning(a,n),GH.Notification._divStyle(a)&&a.css(GH.Notification._divStyle(a)),a.show(),i.autoHide&&GH.Notification.autoHideEnabled&&setTimeout(function(){a.hide()},i.autoHideDelay)},GH.Notification.showWarning=function(e){var i=GH.Notification.prepareNotificationDiv();AJS.messages.warning(i,{body:e,closeable:!0}),GH.Notification._divStyle(i)&&i.css(GH.Notification._divStyle(i)),i.show()},GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()},GH.Notification.handleDateFormatMismatchError=function(e){var i='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';i+="Advanced Settings",i+="</a>";var t=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",i);GH.Notification.showWarnings(t,{autoHide:!1,preRendered:!0})},GH.Notification.auiMessage=function(e){var i=_.extend({type:"generic",icon:!0,messageHtml:!1},e);return GH.tpl.rapid.notification.renderAuiMessage({type:i.type,title:i.title,icon:i.icon,messageHtml:i.messageHtml,message:i.message})},GH.Notification.Handler={_defaultNotificationHandler:function(){var e=AJS.$("<div/>").addClass("global-msg");return AJS.$(".global-msg",i()).remove(),AJS.$("body",i()).append(e),e},_defaultDivStyleHandler:function(e){return{marginLeft:-e.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(e){this._customDivStyleHandler=e,this._useDefault=!1},_useDefault:!0,setCustomNotificationHandler:function(e){this._customNotificationHandler=e,this._useDefault=!1},removeCustomHandlers:function(){this._useDefault=!0},getNotificationHandler:function(){return this._useDefault||null==this._customNotificationHandler?this._defaultNotificationHandler:this._customNotificationHandler},getDivStyleHandler:function(){return this._useDefault||null==this._customDivStyleHandler?this._defaultDivStyleHandler:this._customDivStyleHandler}},GH.Notification._divStyle=function(e){var i=GH.Notification.Handler.getDivStyleHandler();return i(e)},GH.Notification.prepareNotificationDiv=function(){var e=GH.Notification.Handler.getNotificationHandler();return e()},GH.Notification.showSuccess=function(e,i){o(t.SUCCESS,e,i)},GH.Notification.showInfo=function(e,i){o(t.INFO,e,i)};var o=function(e,t,o){clearTimeout(GH.Notification.current);var a={timeout:5e3,closeable:!0,shadowed:!0};o=_.extend(a,o,{body:t});var n=GH.Notification.prepareNotificationDiv();AJS.messages[e](n,o),GH.Notification._divStyle(n)&&n.css(GH.Notification._divStyle(n)),n.show(),GH.Notification.autoHideEnabled&&(GH.Notification.current=setTimeout(function(){AJS.$(".global-msg",i()).hide()},o.timeout))};GH.Notification.showIssueMessage=function(e){var i=JIRA.SessionStorage,t=null,o=null;e||(e=i.getItem("selectedIssueId")),e&&(o=i.getItem("selectedIssueKey"),t=i.getItem("selectedIssueMsg"),GH.Notification.showIssueMessageImpl(e,t,o)),i.removeItem("selectedIssueId"),i.removeItem("selectedIssueKey"),i.removeItem("selectedIssueMsg")},GH.Notification.showIssueMessageImpl=function(e,i,t){i||(i="thanks_issue_updated");var o=AJS.params[i];o&&t&&(o=AJS.format(o,t),GH.Notification.showSuccess(o))},GH.Notification.addPageLoadMessage=function(e,i){var t=GH.storage.get("gh.pageloadmessages",!0)||[];t.push({message:e,type:i||"success"}),GH.storage.put("gh.pageloadmessages",t,!0)},GH.Notification._displayPageLoadMessages=function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var i=e[0].type,t="";switch(_.each(e,function(e){t.length>0&&(t+="<br>"),t+=e.message}),i){case"warning":GH.Notification.showWarning(t);break;case"success":default:GH.Notification.showSuccess(t)}GH.storage.put("gh.pageloadmessages",null,!0)}};var a=null;GH.Notification.showBoardUpdatedMessage=function(){var e=void 0,i=AJS.$.Deferred();if(0===AJS.$(".aui-flag[aria-hidden=false]").length){var t=GH.tpl.rapid.notification.renderGHtvMessage({showIgnore:!1});a=AJS.flag({type:"info",body:t}),e=AJS.$(t)}var o=function(e){e.preventDefault(),GH.Notification.clearBoardUpdatedMessage(),i.resolve()};return AJS.$(".js-refresh-now").off("click",o).click(o),i.promise()},GH.Notification.clearBoardUpdatedMessage=function(){a&&a.close()},GH.Notification.isBoardUpdatedMessageVisible=function(){var e=AJS.$("#ghx-update-message");return e.length>0},AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/state/storage.js' */
AJS.namespace("GH.storage"),GH.storage.get=function(e,t){var r;if(r=t?sessionStorage.getItem(e):localStorage.getItem(e),"string"!=typeof r)return r;try{return JSON.parse(r)}catch(o){return}},GH.storage.put=function(e,t,r){if(null===t||void 0===t)r?sessionStorage.removeItem(e):localStorage.removeItem(e);else try{r?sessionStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,JSON.stringify(t))}catch(o){return!1}return!0},window.localStorage&&window.sessionStorage||(GH.storage.get=function(){return null},GH.storage.put=function(){return!1});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/Validation.js' */
AJS.namespace("GH.Validation"),GH.Validation.notBlank=function(r,t,n){var a=GH.Validation.applyRules(r,t,n,function(){return AJS.$.trim(AJS.$(r).val()).length>0});return a},GH.Validation.maxLength=function(r,t,n,a){var i=GH.Validation.applyRules(r,n,a,function(){return AJS.$.trim(AJS.$(r).val()).length<=t});return i},GH.Validation.isPositiveInteger=function(r,t,n){var a=GH.Validation.applyRules(r,t,n,function(){return/^\d*$/.test(AJS.$.trim(AJS.$(r).val()))});return a},GH.Validation.applyRules=function(r,t,n,a){r=AJS.$(r),errorCtx=n?AJS.$(n):r;var i=a.call(this);return!!i||(GH.Validation.showContextualErrors(errorCtx,t),!1)},GH.Validation.showContextualErrors=function(r,t,n,a,i){GH.Validation.clearContextualErrors(r),r.after(GH.tpl.rapid.notification.renderContextualErrors({errors:[{message:AJS.I18n.getText(t,n,a,i)}]}))},GH.Validation.clearContextualErrors=function(r){r=AJS.$(r),r.find(".ghx-error").remove(),r.siblings(".ghx-error").remove()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/gh-helppaths.js' */
AJS.namespace("GH.HelpPaths"),GH.HelpPaths.getHelpPath=function(e){return null};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/gh-message.js' */
AJS.namespace("GH.Message"),GH.Message.showIssueMessage=function(e){var s=JIRA.SessionStorage,a=null,t=null;e||e||(e=s.getItem("selectedIssueId")),e&&(t=s.getItem("selectedIssueKey"),a=s.getItem("selectedIssueMsg"),GH.Message.showIssueMessageImpl(e,a,t)),s.removeItem("selectedIssueId"),s.removeItem("selectedIssueKey"),s.removeItem("selectedIssueMsg")},GH.Message.showIssueMessageImpl=function(e,s,a){s||(s="thanks_issue_updated");var t=AJS.params[s];t&&a&&(t=AJS.format(t,a),GH.Message.showSuccess(t))},GH.Message.prepareNotificationDiv=function(){var e=AJS.$("#gh-notification");return 0==e.length&&(e=AJS.$('<div id="gh-notification"></div>'),AJS.$("#gh").append(e)),e.text(""),e},GH.Message.preparePresistentNotificationDiv=function(){var e=AJS.$("#gh-persistent-notification");return 0==e.length&&(e=AJS.$('<div id="gh-persistent-notification"></div>'),AJS.$("#gh").append(e)),e.text(""),e},GH.Message.showSuccess=function(e){var s=GH.Message.prepareNotificationDiv();AJS.messages.success(s,{body:e}),s.show(),setTimeout('AJS.$("#gh-notification").hide()',5e3)},GH.Message.showWarning=function(e){var s=GH.Message.prepareNotificationDiv();AJS.messages.warning(s,{body:e,closeable:!0}),s.show()},GH.Message.showPersistentWarning=function(e){var s=GH.Message.preparePresistentNotificationDiv();AJS.messages.warning(s,{body:e,closeable:!0}),s.show()},GH.Message.addPageLoadMessage=function(e,s){var a=GH.storage.get("gh.pageloadmessages",!0)||[];a.push({message:e,type:s||"success"}),GH.storage.put("gh.pageloadmessages",a,!0)},GH.Message._displayPageLoadMessages=function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var s=e[0].type,a="";switch(_.each(e,function(e){a.length>0&&(a+="<br>"),a+=e.message}),s){case"warning":GH.Message.showWarning(a);break;case"success":default:GH.Message.showSuccess(a)}GH.storage.put("gh.pageloadmessages",null,!0)}},AJS.$(document).ready(function(){GH.Message.showIssueMessage(),GH.storage&&GH.Message._displayPageLoadMessages()}),AJS.$(document).ready(function(){var e=AJS.$("#footer"),s=e.find(".footer-body:first ul:first"),a=e.find("#ghx-footer");s.before(a),a.css({visibility:""})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/Util.js' */
AJS.namespace("GH.Util"),GH.Util.getPluginKey=function(){return AJS.$('meta[name="ghx-plugin-key"]').attr("content")},GH.Util.getEdition=function(e){var r=JSON.parse(jQuery('meta[name="ajs-product-editions"]').attr("content"));switch(r[e]){case"f":return"jedi";case"s":return"standard";case"p":return"premium";default:return"unlicensed"}},GH.Util.wrapPreventDefault=function(e,r){return function(n){return n.preventDefault(),e.apply(r||this,arguments)}},GH.Util.andThenSplice=function(){return{_needsSplice:Array.prototype.slice.call(arguments)}},GH.Util.andThen=function(e){var r=[{trigger:"resolveWith",on:"done",filter:arguments[1]},{trigger:"rejectWith",on:"fail",filter:arguments[2]},{trigger:"notifyWith",on:"progress",filter:arguments[3]}];return AJS.$.Deferred(function(n){_.each(r,function(r){var t=r.on,i=r.trigger,o=_.isFunction(r.filter)&&r.filter;e[t](function(){var e=o&&o.apply(this,arguments);if(e&&_.isFunction(e.promise))e.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var r;r=e&&_.isArray(e._needsSplice)?e._needsSplice:o?[e]:arguments,n[i](_.isFunction(this.promise)?n.promise():this,r)}})})}).promise()},AJS.$._OriginalDeferred=AJS.$.Deferred,AJS.$.Deferred=function(e){return AJS.$._OriginalDeferred(function(r){r.andThen=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),GH.Util.andThen.apply(this,e)};var n=r.promise;r.promise=function(){var e=n.apply(this,arguments);return e.andThen=function(){var r=Array.prototype.slice.call(arguments);return r.unshift(e),GH.Util.andThen.apply(this,r)},e},e&&e.call(r,r)})},GH.Util.indexOf=function(e,r,n){var t=-1;return n&&(e=e.slice().reverse()),_.some(e,function(i,o){return!!r(i,o)&&(t=n?e.length-1-o:o,!0)}),t},GH.Util.swapArrayItems=function(e,r,n){var t;return!!(e&&r!==n&&Math.min(r,n)>=0&&Math.max(r,n)<e.length)&&(t=e[n],e[n]=e[r],e[r]=t,!0)},GH.Util.roundToDecimalPlaces=function(e,r){if("number"!=typeof e||e===Math.round(e))return e;if(0===r)return Math.round(e);var n=e.toString();if(n.indexOf("e")>=0)return e;var t=e<0,i=n.split("."),o=+i[1].charAt(r);if(i[1]=i[1].substr(0,r),o>5||!t&&5===o){var a=/^0*/.exec(i[1])[0];i[1]=a+(+i[1]+1),i[1].length>r&&(a?i[1]=i[1].substr(i[1].length-r):(i[0]=+i[0]+1,i[1]=0))}return parseFloat(i.join("."))},GH.Util.promiseCast=function(e){if(e&&AJS.$.isFunction(e.promise)){var r=new Promise(function(r,n){e.done(function(e){return r(e)}),e.fail(function(r){return n(e)})});return r}return e&&"function"==typeof e.then?e:new Promise(function(r){return r(e)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/UserData.js' */
define("jira-agile/rapid/user-data",["jira/util/data/meta"],function(e){"use strict";var r={};return r.remoteUser=e.get("remote-user"),r.loggedIn=!!r.remoteUser,r.hasUser=function(){return r.loggedIn},r.getUserName=function(){return r.remoteUser},r.canCreateProject=function(){return r.userConfig.canCreateProject},r.canCreateBoard=function(){return r.userConfig&&r.userConfig.canCreateBoard},r.setGlobalConfig=function(e){r.quickCreateDefaultIssueTypeId=e.quickCreateDefaultIssueTypeId,r.setUserConfig(e.userConfig)},r.getUserConfig=function(){return r.userConfig},r.setUserConfig=function(e){r.userConfig=e},r}),AJS.namespace("GH.UserData",null,require("jira-agile/rapid/user-data"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/features/feature-flags.js' */
define("jira-agile/features/feature-flags",[],function(){var e=function(e,a){return{key:e,fallback:a}};return{EPIC_CREATE_IMPROVEMENT:e("agile.epic.create.improvement",!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/gh/navigation/Navigation.js' */
!function(){AJS.namespace("GH.Navigation");var a=require("jira-agile/rapid/ajax");GH.Navigation.gotoDefaultRapidBoardPage=function(a,i){window.location.href=GH.Navigation.getDefaultRapidBoardPageUrl(a,i)},GH.Navigation.gotoDefaultRapidBoardPageAfterSprintStarted=function(a){window.location.href=GH.Navigation.getCanonicRapidBoardPageUrl(a)+"&sprintStarted=true"},GH.Navigation.getDefaultRapidBoardPageUrl=function(a,i){var n=_.isUndefined(i)?"":"&view="+i;return GH.Navigation.getCanonicRapidBoardPageUrl(a)+n},GH.Navigation.getCanonicRapidBoardPageUrl=function(i){return a.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+i},GH.Navigation.getLoginUrl=function(){return a.CONTEXT_PATH+"/login.jsp?os_destination="+encodeURIComponent(window.location.href)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:number-formatting', location = 'jira-agile-module/includes/js/rapid/NumberFormat.js' */
GH.NumberFormat={},GH.NumberFormat.groupingSeparator=",",GH.NumberFormat.decimalSeparator=".",GH.NumberFormat.format=function(r){if(_.isNumber(r)){r=GH.Util.roundToDecimalPlaces(r,2);var t=r<<0,a=r.toString().split(".")[1],e=function(r){return r.split("").reverse().join("")},o=e(e(t.toString()).replace(/(\d{3})(?=\d)/g,"$1"+GH.NumberFormat.groupingSeparator));return o+(a?GH.NumberFormat.decimalSeparator+a:"")}},GH.NumberFormat.formatExponential=function(r){if(_.isNumber(r)){var t=Math.abs(r).toFixed(0).length-1,a=r/Math.pow(10,t);return GH.NumberFormat.format(a)+"e"+GH.NumberFormat.format(t)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:time-formatting', location = 'jira-agile-module/includes/js/rapid/TimeFormat.js' */
GH.TimeFormatDisplays={},GH.TimeFormatDisplays.PRETTY="pretty",GH.TimeFormatDisplays.DAYS="days",GH.TimeFormatDisplays.HOURS="hours",GH.TimeFormatDisplays.MOST_SIGNIFICANT="most-significant",GH.TimeFormatDurationUnits={},GH.TimeFormatDurationUnits.SECONDS="seconds",GH.TimeFormatDurationUnits.MILLISECONDS="millis",GH.TimeFormat={},GH.TimeFormat.timeTrackingConfigOpts={hoursPerDay:8,daysPerWeek:5,timeFormat:GH.TimeFormatDisplays.PRETTY,symbols:{week:"w",day:"d",hour:"h",minute:"m"}},GH.TimeFormat.normalDisplayOpts={hoursPerDay:24,daysPerWeek:7,timeFormat:GH.TimeFormatDisplays.PRETTY,symbols:{week:"w",day:AJS.I18n.getText("core.durationutils.unit.day"),hour:AJS.I18n.getText("core.durationutils.unit.hour"),minute:AJS.I18n.getText("core.durationutils.unit.minute")}},GH.TimeFormat.formatMinuteDuration=function(t){return GH.TimeFormat.formatDuration(t?6e4*t:0)},GH.TimeFormat.formatShortMinuteDuration=function(t){return GH.TimeFormat.formatShortDuration(t?6e4*t:0)},GH.TimeFormat.formatDuration=function(t){t||(t=0);var r=Math.floor(t/864e5),o=t-864e5*r,a=Math.floor(o/36e5);o-=36e5*a;var e=Math.floor(o/6e4),i="";return r>0&&(i+=r+" ",i+=r>1?AJS.format(AJS.I18n.getText("core.dateutils.days"),r):AJS.format(AJS.I18n.getText("core.dateutils.day"),r)),a>0&&(i.length>0&&(i+=" "),i+=a+" ",i+=a>1?AJS.format(AJS.I18n.getText("core.dateutils.hours"),a):AJS.format(AJS.I18n.getText("core.dateutils.hour"),a)),(t>0||0===i.length)&&(i.length>0&&(i+=" "),i+=e+" ",i+=0===e||e>1?AJS.format(AJS.I18n.getText("core.dateutils.minutes"),e):AJS.format(AJS.I18n.getText("core.dateutils.minute"),e)),i},GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration=function(t,r){return _.isUndefined(r)&&(r={durationUnit:GH.TimeFormatDurationUnits.SECONDS}),GH.TimeFormat._formatShortDuration(t,_.extend({},GH.TimeFormat.timeTrackingConfigOpts,r))},GH.TimeFormat.formatShortDuration=function(t){return GH.TimeFormat._formatShortDuration(t,_.extend({},GH.TimeFormat.normalDisplayOpts,{durationUnit:GH.TimeFormatDurationUnits.MILLISECONDS}))},GH.TimeFormat.formatSensibleShortDuration=function(t){var r=GH.TimeFormat._formatShortDuration(t,_.extend({},GH.TimeFormat.normalDisplayOpts,{durationUnit:GH.TimeFormatDurationUnits.MILLISECONDS,dropMinutesIfLongerThanADay:!0}));return 0===r.length&&(r=GH.TimeFormat.getZeroMinutesShortFormat()),r},GH.TimeFormat.getZeroMinutesShortFormat=function(){return AJS.I18n.getText("core.durationutils.unit.minute",0)},GH.TimeFormat._formatShortDuration=function(t,r){if(t||(t=0),0===t)return"0";var o=GH.TimeFormat.normalDisplayOpts;r=_.isUndefined(r)?{}:r,r=_.extend({},o,r);var a,e,i,m,n,s=6e4,u=60*s,l=r.hoursPerDay*u,T=r.daysPerWeek*l;r.durationUnit===GH.TimeFormatDurationUnits.SECONDS&&(t*=1e3),a=Math.floor(t/T),n=t%T,e=Math.floor(n/l),n%=l,i=Math.floor(n/u),n%=u,m=Math.floor(n/s),r.dropMinutesIfLongerThanADay&&e>0&&(m=0);var f=[];r.timeFormat===GH.TimeFormatDisplays.PRETTY?f=[{val:a,fmt:r.symbols.week},{val:e,fmt:r.symbols.day},{val:i,fmt:r.symbols.hour},{val:m,fmt:r.symbols.minute}]:r.timeFormat===GH.TimeFormatDisplays.DAYS?(e=GH.Util.roundToDecimalPlaces(t/l,2),f=[{val:e,fmt:r.symbols.day}]):r.timeFormat===GH.TimeFormatDisplays.HOURS?(i=GH.Util.roundToDecimalPlaces(t/u,2),f=[{val:i,fmt:r.symbols.hour}]):r.timeFormat===GH.TimeFormatDisplays.MOST_SIGNIFICANT&&(f=a>0?[{val:GH.Util.roundToDecimalPlaces(t/T,1),fmt:r.symbols.week}]:e>0?[{val:GH.Util.roundToDecimalPlaces(t/l,1),fmt:r.symbols.day}]:i>0?[{val:GH.Util.roundToDecimalPlaces(t/u,1),fmt:r.symbols.hour}]:[{val:m<1?"":GH.Util.roundToDecimalPlaces(t/s,1),fmt:r.symbols.minute}]);var D=function(t){var r="";return _.each(t,function(t){if(t.val>0){r.length>0&&(r+=" ");var o=t.fmt;o.indexOf("{0}")<0&&(o="{0}"+o);var a=GH.NumberFormat.format(t.val);r+=AJS.format(o,a)}}),!r&&t.length&&(r=AJS.format(_.last(t).fmt,"< 1")),r};return D(f)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-burndown-dashboard-item-resources', location = 'jira-agile-module/dashboarditem/sprintburndown/sprint-burndown-chart-model.js' */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();define("jira-agile/dashboarditem/sprintburndown/sprint-burndown-chart-model",["require","underscore","jira-agile/rapid/ui/chart/chart-colors","jira-agile/dashboarditem/common/ui/chart/chart-utils"],function(e,t,a,i){var n=function(){function e(t){_classCallCheck(this,e),this.env=t,this.rawData={},this.timelineData={},this.series=[],this.seriesData={},this.yAxisData={}}return _createClass(e,[{key:"setRawData",value:function(e){this.rawData=e,this.env.burndownRate.setRateData(e.workRateData),this.prepareData()}},{key:"getStatistic",value:function(){return this.rawData.statisticField}},{key:"getWarning",value:function(){return this.rawData.warningMessage}},{key:"isEmpty",value:function(){return 0===Object.keys(this.rawData.changes).length}},{key:"isTimeTracking",value:function(){return"timeestimate"===this.getStatistic().fieldId}},{key:"prepareData",value:function(){var e=this.isTimeTracking(),t=this.getStatisticConsumer(e);this.timelineData=this.env.burndownTimelineProducer.calculateTimelineData(this.rawData,t),this.calculateSeries()}},{key:"getStatisticConsumer",value:function(e){return e?this.env.burndownTimelineProducer.timeTrackingStatisticConsumer:this.env.burndownTimelineProducer.estimateStatisticConsumer}},{key:"renderStatisticText",value:function(e,t){return i.renderStatisticText(e,t,this.getStatistic().renderer)}},{key:"calculateSeries",value:function(){var e=this.timelineData,i=e.timeline;if(!t.isEmpty(i)){var n=i[0],r=[];r.push(this.calculateGuidelineSeries({startTime:e.startTime,startValue:n.values.estimate,endTime:e.endTime}));var s=["estimate"];this.isTimeTracking()&&s.push("timeSpent");var u={},l={};if(t.each(s,function(e){u[e]=[],l[e]=[]}),t.each(i,function(e){e.openCloseEntries||t.each(s,function(a){e.deltas&&t.isNumber(e.deltas[a])&&0!==e.deltas[a]&&(u[a].push([e.time,e.values[a]-e.deltas[a]]),l[a].push({})),u[a].push([e.time,e.values[a]]),l[a].push(e)})}),!e.completeTime){var c=t.last(i);t.each(s,function(t){u[t].push([Math.max(e.startTime,e.now),c.values[t]])})}this.isTimeTracking()&&r.push({id:"timeSpent",data:u.timeSpent,color:"#14892c",label:"Time Spent"}),r.push({id:"estimate",data:u.estimate,color:"#d04437",label:"Remaining Values"});var o=void 0;o=a.nonWorkingDays,r.push({id:"markings",color:o,data:[],label:"Non-Working Days"});var h=0;t.each(s,function(t){h=Math.max(h,e.maxValues[t]||0)}),this.calculateYAxis(h),this.series=r,this.seriesData=l}}},{key:"calculateYAxis",value:function(e){this.yAxisData=this.env.flotChartUtils.calculateYAxis(e,this.getStatistic())}},{key:"getSeries",value:function(){return this.series}},{key:"getYAxis",value:function(){return this.yAxisData}},{key:"calculateGuidelineSeries",value:function(e){var a=this,i=e.startValue,n=this.env.burndownRate.getRateDefinitions(),r=this.env.burndownRate.limitToTimeRange(n,e.startTime,e.endTime),s=this.calculateTimePerUnit(r,i),u=[[e.startTime,e.startValue]].concat(t.map(r,function(n){if(n.rate===a.env.burndownRate.WORKING_DAY){var r=n.start-n.end,u=r/s;i-=u}return[t.min([n.end,e.endTime]),t.max([i,0])]}));return u=t.reject(u,function(e){return 0===e.length}),{id:"guideline",data:u,color:"#999",label:"Guideline"}}},{key:"calculateTimePerUnit",value:function(e,a){var i=this.env.burndownRate.limitToWorkingDays(e),n=t.reduce(i,function(e,t){return e+(t.start-t.end)},0);return n/a}},{key:"hasAnyWorkingDays",value:function(){return this.env.burndownRate.getWorkingDays().length>0}}]),e}();return n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-burndown-dashboard-item-resources', location = 'jira-agile-module/dashboarditem/sprintburndown/sprint-burndown-chart-view.js' */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();define("jira-agile/dashboarditem/sprintburndown/sprint-burndown-chart-view",["jquery","underscore","jira-agile/rapid/ui/chart/chart-colors","jira/analytics/web-client"],function(e,t,n,r){var i=JIRA.DashboardItem.SprintBurndown.Templates,a=function(){function n(e){_classCallCheck(this,n),this.env=e}return _createClass(n,[{key:"showChart",value:function(){if(this.env.burndownChartModel.getWarning()&&this.showWarning(this.env.burndownChartModel.getWarning()),!this.env.burndownChartModel.isEmpty()){var n=e(".ghx-chart-content",this.env.wrapperElement);if(!this.env.burndownChartModel.hasAnyWorkingDays()){var a=this.env.preferences?this.env.preferences.rapidViewId:"INVALID_ID";return n.html(i.infoBox({message:AJS.format("All of the days within this sprint are {0}configured as non-working days{1}. To display a Burndown Chart some days need to be working days.",'<a href="'+AJS.contextPath()+"/secure/RapidView.jspa?tab=time&rapidView="+a+'">',"</a>"),title:"Chart cannot be displayed",type:"info"}))}e(".ghx-chart-view",n).height(n.width()/(16/9));var o=this.env.burndownChartModel.getSeries();t.isEmpty(o)&&n.prepend(i.infoBox({message:"There are no sprints currently in progress."})),this.env.flotChartUtils.setAndAlignAxisLabels("Time",this.env.burndownChartModel.getStatistic().name);var s=e(".ghx-chart-view",this.env.wrapperElement);this.env.chart.draw(this.env.preferences.rapidViewId,s,o,this.getDefaultPlotOptions());var h={attributes:{boardId:this.env.preferences.rapidViewId,boardType:"scrum",reportType:"agile",isGadget:!0},action:"viewed",actionSubject:"report",actionSubjectId:"burndownChart",source:"burndownChartScreen"};r.sendTrackEvent(h)}}},{key:"getDefaultPlotOptions",value:function(){return{xaxis:{mode:"time"},yaxis:this.env.burndownChartModel.getYAxis(),mouseEnterExitEvents:!0,legend:{container:null,backgroundOpacity:.5,position:"ne"},series:{lines:{show:!0,lineWidth:2},points:{show:!1},shadowSize:0},grid:{color:"#333",borderWidth:1,borderColor:"#999",tickColor:"#eee",markings:this.env.chartController.getNonWorkingBlocks()}}}}]),n}();return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-burndown-dashboard-item-resources', location = 'jira-agile-module/dashboarditem/sprintburndown/sprint-burndown-rate.js' */
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();define("jira-agile/dashboarditem/sprintburndown/sprint-burndown-rate",["underscore"],function(t){var n=function(){function n(t){_classCallCheck(this,n),this.env=t,this.WORKING_DAY=1,this.NON_WORKING_DAY=0,this.rateData=null}return _createClass(n,[{key:"setRateData",value:function(t){this.rateData=t}},{key:"getRateDefinitions",value:function(){return this.rateData.rates}},{key:"getNonWorkingDays",value:function(){var t=this.getRateDefinitions();return this.limitToNonWorkingDays(t)}},{key:"getWorkingDays",value:function(){var t=this.getRateDefinitions();return this.limitToWorkingDays(t)}},{key:"limitToWorkingDays",value:function(n){var e=this;return t.filter(n,function(t){return t.rate===e.WORKING_DAY})}},{key:"limitToNonWorkingDays",value:function(n){var e=this;return t.filter(n,function(t){return t.rate===e.NON_WORKING_DAY})}},{key:"limitToTimeRange",value:function(n,e,r){var a=t.reject(n,function(t){return r<t.start||t.end<e});return t.map(a,function(t){return{start:Math.max(e,t.start),rate:t.rate,end:Math.min(r,t.end)}})}}]),n}();return n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-burndown-dashboard-item-resources', location = 'jira-agile-module/dashboarditem/sprintburndown/sprint-burndown-timeline-producer.js' */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();define("jira-agile/dashboarditem/sprintburndown/sprint-burndown-timeline-producer",["require","underscore"],function(e,t){var a=function(){function e(){_classCallCheck(this,e),this.dataFields=["realValue","estimate"]}return _createClass(e,[{key:"processChange",value:function(e,t){t.statC?(e.values.oldEstimateFieldValue=t.statC.oldValue,e.values.estimateFieldValue=t.statC.newValue,e.estimateChange=!0):e.estimateChange=!1,e.isInChart&&!e.burned?e.values.estimate=e.values.estimateFieldValue:e.values.estimate=e.values.estimateFieldValue?0:e.values.estimateFieldValue}},{key:"beforeProcessChange",value:function(e,t,a){}},{key:"afterProcessChange",value:function(e,t,a){}},{key:"beforeSprintStart",value:function(e){}},{key:"copyToCurrentState",value:function(e,t){}}]),e}(),n=function(){function e(){_classCallCheck(this,e),this.dataFields=["estimate","timeSpent"]}return _createClass(e,[{key:"processChange",value:function(e,a){a.timeC&&(t.isUndefined(a.timeC.timeSpent)?e.timeChange=!1:e.isInChart&&(e.values.timeSpent=(e.values.timeSpent||0)+(a.timeC.timeSpent||0),e.timeChange=!0),t.isUndefined(a.timeC.newEstimate)?e.estimateChange=!1:(e.values.estimate=(e.values.estimate||0)+((a.timeC.newEstimate||0)-(a.timeC.oldEstimate||0)),e.estimateChange=!0))}},{key:"beforeProcessChange",value:function(e,t,a){this.removeExpiredEstimateChanges(e,t)}},{key:"afterProcessChange",value:function(e,t,a){this.addEstimateChange(e,t,a)}},{key:"beforeSprintStart",value:function(e){t.each(e.issueState,function(e){t.isUndefined(e.values.timeSpent)||(e.values.timeSpent=0)}),e.maxValues.timeSpent=0,e.currentValues.timeSpent=0}},{key:"copyToCurrentState",value:function(e,a){e.estimateDeltas=t.clone(a.estimateDeltas)}},{key:"removeExpiredEstimateChanges",value:function(e,a){e.estimateDeltas||(e.estimateDeltas=[]),e.estimateDeltas=t.reject(e.estimateDeltas,function(e){return e.date<=a})}},{key:"addEstimateChange",value:function(e,t,a){if(e.estimateDeltas||(e.estimateDeltas=[]),a.timeC&&a.timeC.changeDate){var n=a.timeC.changeDate,i=(a.timeC.newEstimate||0)-(a.timeC.oldEstimate||0);e.estimateDeltas.push({worklogDate:t,date:n,issueKey:a.key,delta:i,change:a})}}},{key:"getAffectingEstimateChanges",value:function(e,a){return a.timeC&&a.timeC.changeDate?t.filter(e.estimateDeltas,function(e){return a.timeC.changeDate<e.date}):[]}}]),e}(),i=function(){function e(t){_classCallCheck(this,e),this.env=t,this.timeTrackingStatisticConsumer=new n,this.estimateStatisticConsumer=new a}return _createClass(e,[{key:"calculateTimelineData",value:function(e,a){var n={timeline:[]};if(e.startTime===e.endTime)return n;var i=!t.isUndefined(e.completeTime)&&e.completeTime,s=this.calculateTimeline(e.startTime,i,e.changes,e.openCloseChanges,a,e.estimatableIssueKeys);return n.timeline=s.timeline,n.now=e.now,n.startTime=e.startTime,n.endTime=e.endTime,n.completeTime=i,n.maxValues=s.maxValues,n.statisticField=e.statisticField,n.finalIssueStates=s.issueState,n}},{key:"calculateTimeline",value:function(e,a,n,i,s,u){var r={issueState:{},timeline:[],currentValues:{},maxValues:{},pastSprintStart:!1,statisticConsumer:s,estimatableIssueKeys:u};this.addStatisticValueDeltas({},r.currentValues,1,s);for(var l=t.keys(n),o=i?t.keys(i):[],c=0,m=0;m<l.length;m++){var d=l[m],C=parseInt(d,10);if(!r.pastSprintStart&&e<=C&&(this.addSprintStartTimelineEntry(r,e),r.pastSprintStart=!0),a&&a<C)break;var h=n[d],v=this.processTimeChanges(r,h,C);if(r.pastSprintStart&&v){if(o.length>0)for(var f=o[c];f<d;){var p=parseInt(f,10),S=i[f];this.addSprintStateChangeTimelineEntry(r,p,S),c++,f=o[c]}this.addChangeTimelineEntry(r,C,v.issues,v.deltas)}}return r.pastSprintStart||(this.addSprintStartTimelineEntry(r,e),r.pastSprintStart=!0),a&&this.addSprintCompleteTimelineEntry(r,a),r}},{key:"addSprintStartTimelineEntry",value:function(e,a){e.statisticConsumer.beforeSprintStart(e);var n=this.getTimelineEntryForCurrentState(e,a);n.initial=!0,e.timeline.push(n),e.maxValues=t.clone(e.currentValues)}},{key:"getCurrentState",value:function(e,a,n){var i=t.clone(a);return i.values=t.clone(a.values),n&&(i.deltas=n,e.statisticConsumer.copyToCurrentState(i,a)),i}},{key:"processTimeChanges",value:function(e,a,n){var i=this,s={},u=[];return t.each(a,function(a){var r={},l=e.issueState[a.key];l||(l={key:a.key,isInChart:!1,burned:!1,values:{},estimatable:t.contains(e.estimatableIssueKeys,a.key)},e.issueState[a.key]=l),i.removeStatisticValues(l,r,e.statisticConsumer),i.removeStatisticValues(l,s,e.statisticConsumer),e.statisticConsumer.beforeProcessChange(l,n,a);var o=l.isInChart||!1;if(i.processInChartChanges(l,a),e.statisticConsumer.processChange(l,a),i.addStatisticValues(l,r,e.statisticConsumer),i.addStatisticValues(l,s,e.statisticConsumer),o||l.isInChart){var c=i.getCurrentState(e,l,r);c.change=a,u.push(c)}e.statisticConsumer.afterProcessChange(l,n,a)}),!t.isEmpty(u)&&(this.addStatisticValueDeltas(s,e.currentValues,1,e.statisticConsumer),{issues:u,deltas:s})}},{key:"processInChartChanges",value:function(e,a){t.isUndefined(a.added)?e.scopeChange=!1:(e.inScope=a.added,e.scopeChange=!0),a.column?(a.column.done===!1&&(a.column.notDone=!0),a.column.notDone===!1&&(a.column.done=!0),a.column.notDone?(e.column="notDone",t.isBoolean(a.column.done)?e.oldColumn="done":e.oldColumn=void 0):a.column.done?(e.column="done",t.isBoolean(a.column.notDone)?e.oldColumn="notDone":e.oldColumn=void 0):(e.column=void 0,t.isBoolean(a.column.notDone)?e.oldColumn="notDone":e.oldColumn="done"),e.columnChange=!0):e.columnChange=!1,e.isInChart=!(!e.column||!e.inScope),e.burned="done"===e.column}},{key:"addStatisticValues",value:function(e,t,a){e.isInChart&&this.addStatisticValueDeltas(e.values,t,1,a)}},{key:"removeStatisticValues",value:function(e,t,a){e.isInChart&&this.addStatisticValueDeltas(e.values,t,-1,a)}},{key:"addStatisticValueDeltas",value:function(e,a,n,i){n||(n=1),t.each(i.dataFields,function(t){a[t]=(a[t]||0)+(e[t]||0)*n})}},{key:"getMaxStatisticValues",value:function(e,a,n){var i={};return t.each(n.dataFields,function(t){i[t]=e[t]>a[t]?e[t]:a[t]}),i}},{key:"addSprintStateChangeTimelineEntry",value:function(e,t,a){var n={time:t,issues:{},values:{},deltas:{},openCloseInstances:a};e.timeline.push(n)}},{key:"addChangeTimelineEntry",value:function(e,a,n,i){var s={time:a,issues:n,values:t.clone(e.currentValues),deltas:i};e.timeline.push(s),e.maxValues=this.getMaxStatisticValues(e.maxValues,e.currentValues,e.statisticConsumer)}},{key:"addSprintCompleteTimelineEntry",value:function(e,t){var a=this.getTimelineEntryForCurrentState(e,t);a.complete=!0,e.timeline.push(a)}},{key:"getTimelineEntryForCurrentState",value:function(e,a){var n=this,i=[];t.each(e.issueState,function(t){t.isInChart&&i.push(n.getCurrentState(e,t))});var s={time:a,issues:i,values:t.clone(e.currentValues)};return s}}]),e}();return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-burndown-dashboard-item-resources', location = 'jira-agile-module/dashboarditem/sprintburndown/sprint-burndown-environment.js' */
"use strict";function _classCallCheck(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function r(r,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}return function(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),n}}();define("jira-agile/dashboarditem/sprintburndown/sprint-burndown-environment",["jira-agile/dashboarditem/common/ui/chart/chart-controller","jira-agile/dashboarditem/common/ui/chart/chart","jira-agile/dashboarditem/sprintburndown/common/ui/chart/flot-chart-utils","jira-agile/dashboarditem/sprintburndown/sprint-burndown-rate","jira-agile/dashboarditem/sprintburndown/sprint-burndown-timeline-producer","jira-agile/dashboarditem/sprintburndown/sprint-burndown-chart-model","jira-agile/dashboarditem/sprintburndown/sprint-burndown-chart-view"],function(r,n,t,e,i,a,o){var s=function(){function s(h){_classCallCheck(this,s),this.chartController=new r(this),this.chart=new n(this),this.flotChartUtils=new t(this),this.burndownRate=new e(this),this.burndownTimelineProducer=new i(this),this.burndownChartModel=new a(this),this.burndownChartView=new o(this),this.wrapperId=h}return _createClass(s,[{key:"setRenderData",value:function(r,n){this.preferences=n,this.wrapperElement=r}}]),s}();return s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-burndown-dashboard-item-resources', location = 'jira-agile-module/dashboarditem/sprintburndown/sprint-burndown.soy' */
// This file was automatically generated from sprint-burndown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.DashboardItem.SprintBurndown.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.DashboardItem == 'undefined') { JIRA.DashboardItem = {}; }
if (typeof JIRA.DashboardItem.SprintBurndown == 'undefined') { JIRA.DashboardItem.SprintBurndown = {}; }
if (typeof JIRA.DashboardItem.SprintBurndown.Templates == 'undefined') { JIRA.DashboardItem.SprintBurndown.Templates = {}; }


JIRA.DashboardItem.SprintBurndown.Templates.ElementWithLabels = function(opt_data, opt_ignored) {
  return '<div class="field-group ' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.label) ? '<label for="' + soy.$$escapeHtml(opt_data.prefix + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + '</label>' : '') + soy.$$filterNoAutoescape(opt_data.element) + '<div class="error"></div>' + ((opt_data.description) ? '<div class="description">' + soy.$$escapeHtml(opt_data.description) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.SprintBurndown.Templates.ElementWithLabels.soyTemplateName = 'JIRA.DashboardItem.SprintBurndown.Templates.ElementWithLabels';
}


JIRA.DashboardItem.SprintBurndown.Templates.Select = function(opt_data, opt_ignored) {
  var output = '<select class="' + soy.$$escapeHtml(opt_data.isMultiple ? 'select multi-select' : 'select') + '" id="' + soy.$$escapeHtml(opt_data.prefix + opt_data.id) + '" name="' + soy.$$escapeHtml(opt_data.id) + '"' + ((opt_data.isMultiple) ? ' multiple="multiple"' : '') + '>';
  var optionList34 = opt_data.options;
  var optionListLen34 = optionList34.length;
  for (var optionIndex34 = 0; optionIndex34 < optionListLen34; optionIndex34++) {
    var optionData34 = optionList34[optionIndex34];
    output += '<option value="' + soy.$$escapeHtml(optionData34.value) + '"' + ((('' + ('|' + opt_data.preferences[opt_data.id] + '|')).indexOf('' + ('|' + optionData34.value + '|')) != -1) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData34.label) + '</option>';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.SprintBurndown.Templates.Select.soyTemplateName = 'JIRA.DashboardItem.SprintBurndown.Templates.Select';
}


JIRA.DashboardItem.SprintBurndown.Templates.CheckboxWithLabel = function(opt_data, opt_ignored) {
  return '<div class="checkbox"><input id="' + soy.$$escapeHtml(opt_data.prefix + opt_data.id) + '" name="' + soy.$$escapeHtml(opt_data.id) + '" type="checkbox" class="checkbox"' + ((opt_data.preferences[opt_data.id] == true) ? ' checked' : '') + '><label for="' + soy.$$escapeHtml(opt_data.prefix + opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + '</label></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.SprintBurndown.Templates.CheckboxWithLabel.soyTemplateName = 'JIRA.DashboardItem.SprintBurndown.Templates.CheckboxWithLabel';
}


JIRA.DashboardItem.SprintBurndown.Templates.wrapper = function(opt_data, opt_ignored) {
  return '<div class="sprint-burndown-dashboard-item"></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.SprintBurndown.Templates.wrapper.soyTemplateName = 'JIRA.DashboardItem.SprintBurndown.Templates.wrapper';
}


JIRA.DashboardItem.SprintBurndown.Templates.configuration = function(opt_data, opt_ignored) {
  var output = '<div class="sprint-burndown-configuration"><div class="dashboard-item-error"></div><form action="#" method="post" class="aui">';
  var fieldList64 = opt_data.fields;
  var fieldListLen64 = fieldList64.length;
  for (var fieldIndex64 = 0; fieldIndex64 < fieldListLen64; fieldIndex64++) {
    var fieldData64 = fieldList64[fieldIndex64];
    output += soy.$$filterNoAutoescape(fieldData64);
  }
  output += '<div class="buttons-container"><div class="buttons"><input class="button submit" type="submit" value="' + soy.$$escapeHtml('Save') + '">' + ((opt_data.preferences.isConfigured) ? '<input class="aui-button aui-button-link cancel" type="button" value="' + soy.$$escapeHtml('Cancel') + '">' : '') + '</div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.DashboardItem.SprintBurndown.Templates.configuration.soyTemplateName = 'JIRA.DashboardItem.SprintBurndown.Templates.configuration';
}


JIRA.DashboardItem.SprintBurndown.Templates.render = function(opt_data, opt_ignored) {
  return '<div class="sprint-burndown-dashboard-item"><div class="ghx-chart-header">' + ((opt_data.board || opt_data.sprint) ? '<div class="board-sprint-title">' + ((opt_data.board) ? '<h2>' + soy.$$escapeHtml(opt_data.board) + '</h2>' : '') + ((opt_data.sprint) ? '<h3><span>' + soy.$$escapeHtml('Sprint') + ':</span> ' + soy.$$escapeHtml(opt_data.sprint) + '</h3>' : '') + '</div>' : '') + '</div><div class="ghx-chart-content"><div class="ghx-chart-view"></div><div class="ghx-axis-x ghx-axis"></div><div class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.SprintBurndown.Templates.render.soyTemplateName = 'JIRA.DashboardItem.SprintBurndown.Templates.render';
}


JIRA.DashboardItem.SprintBurndown.Templates.infoBox = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-' + soy.$$escapeHtml(opt_data.type || 'info') + '">' + ((opt_data.title) ? '<p><strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + '<p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div>';
};
if (goog.DEBUG) {
  JIRA.DashboardItem.SprintBurndown.Templates.infoBox.soyTemplateName = 'JIRA.DashboardItem.SprintBurndown.Templates.infoBox';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-sprint-burndown-dashboard-item-resources', location = 'jira-agile-module/dashboarditem/sprintburndown/sprint-burndown.js' */
"use strict";define("jira-dashboard-items/sprint-burndown",["jquery","underscore","jira/util/formatter","jira-agile/dashboarditem/sprintburndown/sprint-burndown-environment","jira-agile/dashboarditem/common/analytics/report-sla-tracker"],function(e,t,r,n,a){var o="auto",i=function(e,t,r){return r.map(function(r){var n=Object.assign({prefix:e.prefix,preferences:t},r);return e.templates.ElementWithLabels(Object.assign({},n,{element:e.templates[r.type](Object.assign({},n,r.data))}))})},s=function(e){e.observer&&e.observer.disconnect(),clearTimeout(e.refreshTimeout),clearTimeout(e.refreshDebounce)},d=function(e){e.API.hideLoadingBar(),e.API.resize()},p=function(e,t){e.observer.observe(t[0]),d(e),e.API.reportGadgetMetrics(e.API.getGadgetId(),"gadget-rendering-finished","View")},c=function(e){return[{label:"Next Sprint Due (auto)",value:o}].concat(e)},l=function(e,t,n){var a=null==e||!e.status;a&&console.error(e),n.html(t.templates.infoBox({message:a?"Oops - an error has occurred":403===e.status?"The requested board cannot be viewed because it either does not exist or you do not have permission to view it.":"We couldn\'t load the sprints list for the selected board.",type:"warning"})),d(t),t.API.reportGadgetMetrics(t.API.getGadgetId(),"gadget-rendering-finished","ErrorMessage")},g=function(e,t){this.gadgetKey="sprint-burndown",this.formFields=["rapidViewId","showRapidViewName","sprintId","showSprintName","refresh"],this.refreshOptions=[{label:"Never",value:"false"},{label:r.format("Every {0} Minutes",15),value:"15"},{label:r.format("Every {0} Minutes",30),value:"30"},{label:r.format("Every {0} Hour",1),value:"60"},{label:r.format("Every {0} Hours",2),value:"120"}],this.API=e,this.options=t||{},this.prefix=this.API.getGadgetId()+"-"+this.gadgetKey+"-",this.env=new n("gadget-"+this.API.getGadgetId()),this.templates=JIRA.DashboardItem.SprintBurndown.Templates};return g.prototype.loadOpenSprints=function(t){var r=e.Deferred();return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/sprintquery/"+t,data:{includeFutureSprints:!1,preferCacheable:!1,gadget:!0},cache:!1,headers:{"Cache-Control":"max-age=30","X-Atlassian-GreenHopper-Gadget":!0}}).done(function(e){var t=((e||{}).sprints||[]).flatMap(function(e){return"ACTIVE"===e.state?[{label:e.name,value:e.id}]:[]});r.resolve(t)}).fail(r.reject),r},g.prototype.loadRapidBoardConfig=function(t){return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/xboard/config?rapidViewId="+t,headers:{"X-Atlassian-GreenHopper-Gadget":!0}})},g.prototype.loadScopeChangeBurndownChart=function(t,r){return e.ajax({method:"GET",url:AJS.contextPath()+"/rest/greenhopper/1.0/rapid/charts/scopechangeburndownchart.json",data:{rapidViewId:t,sprintId:r.value},headers:{"X-Atlassian-GreenHopper-Gadget":!0}})},g.prototype.tryIt=function(e){var t=this;try{e.call(t)}catch(r){l(r,t,t.env.wrapperElement)}},g.prototype.render=function(t,n){var o=this;o.API.reportGadgetMetrics(o.API.getGadgetId(),"gadget-start","View");var i=n.rapidViewId,c=n.showRapidViewName,g=n.showSprintName,u=parseInt(n.sprintId,10);if(!n.isConfigured||!i)return t.html(o.templates.infoBox({message:"The selected sprint for this gadget is not currently active.",type:"error"})),d(o),void o.API.reportGadgetMetrics(o.API.getGadgetId(),"gadget-rendering-finished","ErrorMessage");o.env.setRenderData(t,n),o.API.showLoadingBar(),s(o);var h=function(e){return 0===t.closest("body").size()?void s(o):(o.hasObserved&&(clearTimeout(o.refreshDebounce),o.refreshDebounce=setTimeout(e,200)),void(o.hasObserved=!0))}.bind(o,o.render.bind(o,t,n));o.hasObserved=!1,o.observer=o.createResizeObserver(h),o.refreshTimeout=!n.refresh||isNaN(Number(n.refresh))?0:setTimeout(h,6e4*n.refresh),e.when(o.loadRapidBoardConfig(i),o.loadOpenSprints(i)).done(function(e,s){o.tryIt(function(){var d=e[0].currentViewConfig,h=isNaN(u)?s[0]:s.find(function(e){return e.value===u});if(t.html(o.templates.render({board:c&&d&&d.name,sprint:g&&h&&h.label})),h){var f=Date.now();return o.loadScopeChangeBurndownChart(i,h).done(function(e){o.tryIt(function(){o.env.burndownChartModel.setRawData(e),o.env.burndownChartView.showChart(),p(o,t),a.checkReportAndFireSlaEvent(a.reportNames.burndown)})}).fail(function(e){l(e,o,t),a.checkReportAndFireSlaEvent(a.reportNames.burndown,e,{requestTime:Date.now()-f,rapidViewId:n.rapidViewId,sprintId:n.sprintId})})}t.html(o.templates.infoBox({message:"There are no active sprints",type:"warning"})),p(o,t)})}).fail(function(e){return l(e,o,t)})},g.prototype.createResizeObserver=function(e){return new ResizeObserver(e)},g.prototype.renderEdit=function(t,n){var a=this;s(a),a.API.showLoadingBar(),a.API.setTitle("Sprint Burndown Gadget"),e.ajax({cache:!0,contentType:"application/json",headers:{"Cache-control":"max-age=5"},url:AJS.contextPath()+"/rest/greenhopper/1.0/rapidview"}).done(function(s){a.tryIt(function(){var p=s.views.concat().sort(function(e,t){return new Intl.Collator((void 0),{numeric:!0,sensitivity:"base"}).compare(e.name,t.name)}).map(function(e){return{label:e.name,value:e.id}}),l=(p.find(function(e){return e.value.toString()===n.rapidViewId})||p[0]).value;a.loadOpenSprints(l).done(function(s){a.tryIt(function(){t.html(a.templates.configuration({fields:i(a,n,[{id:"rapidViewId",type:"Select",label:"Board",data:{options:p}},{id:"showRapidViewName",type:"CheckboxWithLabel",data:{label:"Show board name"}},{id:"sprintId",type:"Select",label:"Sprint",data:{options:c(s)}},{id:"showSprintName",type:"CheckboxWithLabel",data:{label:"Show sprint name"}},{id:"refresh",type:"Select",description:"How often you would like this gadget to update",label:"Refresh Interval:",data:{options:a.refreshOptions}}]),preferences:n,prefix:a.prefix}));var d=e('[name="rapidViewId"]',t);d.on("change",function(s){a.API.showLoadingBar(),a.loadOpenSprints(s.target.value).done(function(s){return a.tryIt(function(){e(".sprintId",t).replaceWith(i(a,Object.assign({},n,{sprintId:o}),[{id:"sprintId",type:"Select",label:"Sprint",data:{options:c(s)}}])[0])})}).fail(function(e){console.error("Invalid response in config sprints fetch for "+a.prefix+":",e),t.html(a.templates.infoBox({message:"We couldn\'t load the sprints list for the selected board.",type:"error"}))})}),e(".cancel",t).on("click",function(){return a.API.closeEdit()}),e("form",t).on("submit",function(n){n.preventDefault(),e(".error",t).text("").hide();var o=e(".submit",t).prop("disabled",!0),i=a.formFields.reduce(function(r,n){var a=e('[name="'+n+'"]',t);return r[n]="INPUT"===a[0].tagName&&"checkbox"===a.prop("type")?a.prop("checked")?"true":"false":a.val(),r},{});e.ajax({cache:!0,contentType:"application/json",data:i,headers:{"Cache-control":"max-age=5"},url:AJS.contextPath()+"/rest/greenhopper/1.0/gadgets/rapidview/pool/validate"}).done(function(){a.tryIt(function(){return a.API.savePreferences(i)})}).fail(function(n){a.tryIt(function(){if(n&&n.responseText)try{var i=JSON.parse(n.responseText).errors;Object.keys(i).forEach(function(n){var o="projectOrFilterId"===n?a.projectFilterPickerId:n;e(".error",e("#"+a.prefix+o,t).parents(".field-group")).text(r.I18n.getText(i[n])||i[n]).show()})}catch(s){console.error("Settings validation error in "+a.prefix+":",s,n)}else console.error("Invalid response validating settings in "+a.prefix+":",n);o.prop("disabled",!1)})})})}),d(a)}).fail(function(e){console.error("Invalid response in config sprints fetch for "+a.prefix+":",e),t.html(a.templates.infoBox({message:"We couldn\'t load the sprints list for the selected board.",type:"error"})),d(a)})})}).fail(function(e){console.error("Invalid response in config board fetch for "+a.prefix+":",e),t.html(a.templates.infoBox({message:"We couldn\'t load your boards.",type:"error"})),d(a)})},g});;;try{window.performance.mark('com.atlassian.jira.gadgets,com.pyxis.greenhopper.jira_batch_file_eval:end');} catch(e){};