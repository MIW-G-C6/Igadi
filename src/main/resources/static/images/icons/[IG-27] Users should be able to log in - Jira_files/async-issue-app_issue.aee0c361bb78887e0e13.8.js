try{window.performance.mark("async-issue-app~issue.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-issue-app~issue"],{"./src/packages/issue-adjustments/issue-adjustments/src/common/utils/performance-analytics.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r}));var n=s("./node_modules/@atlassian/browser-metrics/dist/es2019/factory/index.js");const a=n.a.custom({key:"global-issue-create-all-adjustments-load"}),i=n.a.concurrent.custom({key:"global-issue-create-specific-adjustment-load"}),r=n.a.interaction({key:"global-issue-create-tti-with-adjustments"})},"./src/packages/issue-create/find-field/src/async.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),r=s("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js")
;const o=Object(i.f)((()=>s.e("async-issue-config-find-field").then(s.bind(null,"./src/packages/issue-create/find-field/src/index.js"))),{ssr:!1,moduleId:"./src/packages/issue-create/find-field/src/index.js"});t.a=e=>a.a.createElement(r.a,{id:"AsyncFindFieldModal",packageName:"jiraIssueConfigFindField",fallback:"flag",sendToPrivacyUnsafeSplunk:!0},a.a.createElement(i.a,{fallback:a.a.createElement(a.a.Fragment,null)},a.a.createElement(o,e)))},"./src/packages/issue-create/issue-create-modal/src/common/utils/performance-analytics/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/@atlassian/browser-metrics/dist/es2019/factory/index.js").a.interaction({key:"global-issue-create-modal",featureFlags:["issue.adjustments.global-issue-create","smite.forge.new-create-issue-dialog"]})},"./src/packages/issue-create/issue-create-modal/src/controllers/use-trigger-issue-create-modal/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return b
})),s.d(t,"b",(function(){return y})),s.d(t,"c",(function(){return O}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js"),c=s("./src/packages/issue-adjustments/issue-adjustments/src/common/utils/performance-analytics.js"),l=s("./src/packages/issue-create/issue-create-modal/src/common/utils/performance-analytics/index.js"),d=s("./src/packages/issue-create/issue-create-modal/src/feature-flags.js");function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable
}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){f(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b={isModalOpen:!1,isSubsequentLoad:!1,payload:null,id:"create-issue-dialog",title:null,sectionMessage:null,globalEventNamespaces:["QuickCreateIssue"],fieldsToAddInPublishedData:[],onIssueCreate:null,onClose:null,displayOnlyRequiredFields:!1},g={openIssueCreateModal:(e={})=>({setState:t,getState:s})=>{l.a.start(),Object(d.c)()&&c.c.start();t(m(m({},s()),{},{isModalOpen:!0},e))},closeIssueCreateModal:()=>({setState:e})=>{e(m(m({},b),{},{isModalOpen:!1,isSubsequentLoad:!0}))},
clearSectionMessage:()=>({setState:e,getState:t})=>{e(m(m({},t()),{},{sectionMessage:null}))}},h=Object(i.a)({name:"issue-create.issue-create-form.use-trigger-issue-create-modal",initialState:b,actions:g}),y=Object(r.a)(h),O=(Object(o.a)(h),e=>t=>{const[,{openIssueCreateModal:s,closeIssueCreateModal:n}]=y();return a.a.createElement(e,u({openIssueCreateModal:s,closeIssueCreateModal:n},t))})},"./src/packages/issue-create/issue-create-modal/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js")
;const a=()=>Object(n.b)("jsm.gic.split.request.types.selection",!1),i=()=>Object(n.b)("issue.adjustments.global-issue-create",!1),r=()=>Object(n.b)("jfp.perf.defer-flags-finalise",!1),o=()=>Object(n.b)("jsm-unassigned-request-type-gic-fix_9wguu",!1),c=()=>Object(n.b)("smite.forge.new-create-issue-dialog",!1)},"./src/packages/issue-create/new-issue-create-trigger/src/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g})),s.d(t,"b",(function(){return h}));var n=s("./node_modules/lodash/isEmpty.js"),a=s.n(n),i=s("./node_modules/url-parse/index.js"),r=s.n(i);const o={singleLineTextFields:{value:{fieldId:"ID",text:null},type:"array"},epicLinkField:{value:{fieldId:"ID",epicLink:{issueKey:null}},type:"object"},sprintsField:{value:{fieldId:"ID",sprints:[{sprintId:null}]},type:"object"},priority:{value:{priorityId:"ID"},type:"object"},datePickerFields:{value:{fieldId:"ID",date:{formattedDate:null}},type:"array"},dateTimePickerFields:{value:{fieldId:"ID",dateTime:{
formattedDateTime:null}},type:"array"},labelsFields:{value:{fieldId:"ID",labels:[{name:null}]},type:"array"},singleSelectUserPickerFields:{value:{fieldId:"ID",user:{accountId:null}},type:"array"}},c={summary:"singleLineTextFields",epic:"epicLinkField",duedate:"datePickerFields",plannedStartDate:"dateTimePickerFields",plannedEndDate:"dateTimePickerFields",labels:"labelsFields",sprint:"sprintsField",assignee:"singleSelectUserPickerFields",reporter:"singleSelectUserPickerFields"},l=["fieldsToRetain","pid","issuetype","requestype"];function d(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const f=e=>Array.isArray(e)?e[0]:e,b=(e,t,s)=>"string"==typeof e?"ID"===e?t:e:Object.keys(e).reduce(((n,a)=>{const i=e[a];if(Array.isArray(i)){const e=Array.isArray(s)?s:[s];return p(p({},n),{},{[a]:e.map((e=>b(i[0],t,e)))})}return p(p({},n),{},{[a]:null===i?f(s):b(e[a],t,s)})}),{}),g=e=>{const t="A"===e.nodeName?e:e.querySelector("a");if(t){
const e=t.getAttribute("href"),{query:s}=r()(e,(e=>new URLSearchParams(e))),n={prefilledFields:{}},i=t.getAttribute("data-pid")||s.get("pid"),o=t.getAttribute("data-issue-type")||s.get("issuetype"),c=t.getAttribute("data-itsm-category")||s.get("itsmCategory");return i&&(n.prefilledFields.pid=i),o&&(n.prefilledFields.issuetype=o),c&&(n.prefilledFields.requestype=c),a()(n.prefilledFields)?{}:n}return{}},h=(e={})=>{const{prefilledFields:t,target:s=null}=e;let n=t;if(s){n=((e,t)=>null!=t?p(p({},e),t):e)(t,g(s).prefilledFields)}if(!a()(n)){const{fieldsToRetain:e=[],pid:t,issuetype:s,requestype:i}=n,r=d(n,l),u={};if(a()(t)||(u.project={projectId:f(t)}),a()(s)||(u.issueType={issueTypeId:f(s)}),a()(i)||(u.requestType={key:f(i)}),Object.keys(r).length>0){const{defaultValues:t,fieldIds:s}=(e=>{const t={},s=[];return Object.keys(e).forEach((n=>{const i=e[n];if(c[n]){const e=c[n],{type:r=null,value:l=null}=o[e];let d=null;if(!a()(i)&&l&&r)if(Array.isArray(i)||"object"!=typeof i)d=b(l,n,i),
s.push(n);else{const{fieldId:e,fieldValue:t}=i;d=b(l,e||n,t),s.push(e||n)}a()(d)||("array"===r?(t[e]=t[e]||[]).push(d):"object"===r&&(t[e]=d))}})),{defaultValues:t,fieldIds:s}})(r);a()(t)||(u.defaultValues=t),u.customFieldsToPreserveOnFormRecreation=[...e,...s]}return u}return null}},"./src/packages/issue-line-card/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=e=>e.preventDefault(),a=e=>e.stopPropagation(),i=e=>(e=>0===e.button)(e)&&!(e.metaKey||e.ctrlKey)},"./src/packages/issue-line-card/src/ui/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/utils/constants/src/index.js")),c=s("./src/packages/issue/fields/field-base/src/services/field-config-service/context.js"),l=s("./src/packages/issue/fields/assignee/src/ui/popover/main.js"),d=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const p=d.default.div.withConfig({componentId:"m20dat-0"})`display:flex;align-items:center;`,m=Object(d.default)(p).withConfig({componentId:"m20dat-1"})`padding-left:${u.e}px;`;var f=s("./src/packages/issue-line-card/src/common/utils.js");const b=Object(n.memo)((({issueKey:e})=>a.a.createElement(m,{role:"button",onClick:f.b,onFocus:f.c},a.a.createElement(l.default,{issueKey:e}))));var g=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),h=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");const y=d.default.div.withConfig({componentId:"opcd8l-0"
})`width:${3.5*u.e}px;height:${3.5*u.e}px;padding:0;box-sizing:border-box;cursor:default;`,O=Object(n.memo)((({assigneeUrl:e,assigneeDisplayName:t,hideTooltipOnMouseDown:s})=>a.a.createElement(m,null,a.a.createElement(y,null,a.a.createElement(h.a,{content:t||"",hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(g.a,{name:t||"",src:e||"",size:"small"})))))),j=e=>{Object(f.b)(e),Object(f.c)(e)},v=Object(n.memo)((({errorInlineMessage:e})=>a.a.createElement(m,{onClick:f.c,onMouseDown:j},e)));var E=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),w=s("./src/packages/issue/fields/number/src/services/index.js"),k=s("./src/packages/issue/fields/number/src/ui/view/main.js"),C=s("./src/packages/issue/fields/number/src/ui/async.js");const S=d.default.div.withConfig({componentId:"sc-172pupp-0"})`& > div > div{margin-left:0;}`,I=Object(E.h)((()=>s.e("async-issue-field-number").then(s.bind(null,"./src/packages/issue/fields/number/src/index.js"))),{
moduleId:"./src/packages/issue/fields/number/src/index.js"}),T=Object(n.memo)((({issueKey:e,estimateFieldId:t})=>{const[{value:s}]=Object(w.a)({issueKey:e,fieldKey:t}),n=a.a.createElement(k.a,{isEditable:!0,value:s});return a.a.createElement(S,{role:"button",onClick:f.b,onFocus:f.c},a.a.createElement(C.a,{packageName:"issue",fallback:n},a.a.createElement(I,{issueKey:e,fieldKey:t})))}));var _=s("./node_modules/react-resource-router/build/esm/index.js"),P=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const x=d.default.a.withConfig({componentId:"sc-1w02eb5-0"})`outline:none;margin-left:${u.e}px;color:${P.a.B400};font-weight:500;font-size:12px;text-decoration:${e=>e.isDone?"line-through":"none"};white-space:nowrap;`,{DONE:D}=o.a,A=Object(n.memo)((({issueKey:e,issueLink:t,remoteServerHostname:s,statusCategory:i,hideTooltipOnMouseDown:r})=>{const{push:o}=Object(_.r)(),c=void 0===s?null:s,l=Object(n.useCallback)((e=>{e.preventDefault(),
null!=t&&Object(f.a)(e)?o(t):window.open(t,"_blank")}),[t,o]);return a.a.createElement(h.a,{content:c,hideTooltipOnMouseDown:r,position:"bottom"},a.a.createElement(x,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.key",href:t,isDone:i===D,onClick:l},e))}));var M=s("./node_modules/@atlaskit/icon/glyph/list.js"),L=s.n(M),R=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),N=s("./src/packages/platform/controllers/intl/src/index.js"),F=s("./node_modules/react-intl/lib/index.es.js"),U=Object(F.defineMessages)({issueTypeTitle:{id:"issue-line-card.issue-type.issue-type-title",defaultMessage:"Issue type: {issueTypeName}"}});const V=Object(d.default)(p).withConfig({componentId:"epk7j3-0"})`cursor:grab;`,K=Object(d.default)(p).withConfig({componentId:"epk7j3-1"})`cursor:not-allowed;&:hover{opacity:0.5;}`,$=d.default.div.withConfig({componentId:"epk7j3-2"
})``,W=Object(n.memo)((({issueTypeName:e,issueTypeIconUrl:t,isDraggable:s,isActionVisible:n,restrictedReorderingMessage:i,onHandleUserClickAnalytics:r})=>{const o=Object(N.c)().formatMessage(U.issueTypeTitle,{issueTypeName:e}),c=""!==i,l=!s&&c?K:V,d=e||"";return a.a.createElement(h.a,{content:!s&&c?String(i):d,hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement($,{onClick:()=>null==r?void 0:r("typeIcon")},(s||c)&&n?a.a.createElement(l,null,a.a.createElement(L.a,{label:o,size:"small"})):a.a.createElement(p,null,a.a.createElement(R.a,{alt:o,url:t}))))}));var B=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js");const H=Object(n.memo)((()=>a.a.createElement(m,null,a.a.createElement(B.a,{size:"small"}))));var G=Object(F.defineMessages)({issuePriorityTitle:{id:"issue-line-card.priority.issue-priority-title",defaultMessage:"Priority: {issuePriorityName}"}});const q=Object(n.memo)((({issuePriorityUrl:e,issuePriorityName:t,hideTooltipOnMouseDown:s})=>{
const n=Object(N.c)().formatMessage(G.issuePriorityTitle,{issuePriorityName:t});return a.a.createElement(h.a,{content:t||"",hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(p,null,a.a.createElement(R.a,{alt:n,url:e,width:20,height:20})))}));var z=s("./src/packages/issue/fields/summary/src/ui/view/inline-read/main.js");const Y=d.default.div.withConfig({componentId:"sc-5n3vuw-0"})`margin-left:${1.25*u.e}px;flex:1;overflow:hidden;`,Q=({value:e,isInlineEditEnabled:t})=>a.a.createElement(Y,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary"},a.a.createElement(z.a,{isEditable:!1,value:null!=e?e:null,isInlineEditEnabled:t}));Q.displayName="SummaryReadOnly";var J=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),Z=s("./node_modules/@atlaskit/icon/glyph/editor/close.js"),X=s.n(Z),ee=Object(F.defineMessages)({remoteLinkDeleteLinkTooltip:{id:"issue-line-card.remove-button.remote-link-delete-link-tooltip",
defaultMessage:"Unlink remote issue"},issueLinkDeleteLinkTooltip:{id:"issue-line-card.remove-button.issue-link-delete-link-tooltip",defaultMessage:"Unlink issue"}});const te=Object(d.default)(p).withConfig({componentId:"sc-1ol2n7p-0"})`width:${4*u.e}px;height:100%;margin-left:${u.e/4}px;margin-right:-${u.e}px;`,se=Object(n.memo)((({issueKey:e,globalId:t,isRemote:s,shouldShowRemoveAction:i,onDelete:r})=>{const o=Object(N.c)(),c=Object(n.useCallback)((s=>{s.stopPropagation(),null!=e&&r(e,t)}),[t,e,r]),l=i?o.formatMessage(s?ee.remoteLinkDeleteLinkTooltip:ee.issueLinkDeleteLinkTooltip):null;return a.a.createElement(h.a,{content:l,position:"bottom"},a.a.createElement(te,null,i&&a.a.createElement(J.a,{iconBefore:a.a.createElement(X.a,{label:""}),onClick:c,tabIndex:-1,appearance:"subtle",spacing:"none"})))}))
;var ne=s("./src/packages/issue/fields/status/src/ui/main.js"),ae=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),ie=Object(F.defineMessages)({remoteIssueUneditableStatusTooltip:{id:"issue-line-card.status.remote-issue-uneditable-status-tooltip",defaultMessage:"Remote issue can't be transitioned here. Select to view the issue, then change the status."}});const re=Object(n.memo)((({issueKey:e,statusName:t,statusId:s,statusCategoryId:n,isRemote:i,isInteractive:r,hideTooltipOnMouseDown:o,projectType:c,onEditStatus:l})=>{const d=Object(N.c)(),u=!0===i&&!0!==r?d.formatMessage(ie.remoteIssueUneditableStatusTooltip):null;return a.a.createElement(m,{onClick:f.b,onFocus:f.c},a.a.createElement(h.a,{content:u,hideTooltipOnMouseDown:o,position:"bottom"},a.a.createElement(ae.a,{sourceName:"childIssuesPanel"},a.a.createElement(ne.a,{isEditable:r,appearance:"lozenge",issueKey:e,projectType:c,initialValue:{id:s,name:t,statusCategory:{id:n}},
onSuccess:l}))))})),oe=Object(d.default)(p).withConfig({componentId:"scrk7g-0"})`width:100%;height:100%;position:relative;`,ce=Object(d.default)(p).withConfig({componentId:"scrk7g-1"})`padding-right:${u.e/2}px;`;var le=s("./src/packages/issue/fields/summary/src/ui/main.js"),de=s("./src/packages/issue/fields/summary/src/common/constants.js");const ue=d.default.div.withConfig({componentId:"sc-16gohof-0"})`flex:1;margin-left:${1.25*u.e}px;min-width:0;`,pe=Object(n.memo)((({issueKey:e})=>a.a.createElement(ue,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary"},a.a.createElement(le.a,{issueKey:e,appearance:de.b
})))),{statusCategoryForId:me}=o.a,fe=Object(n.memo)((({additionalItems:e,assigneeDisplayName:t,assigneeUrl:s,canRemove:i=!0,errorInlineMessage:o,estimateFieldId:l,globalId:d,hasError:u=!1,isActive:p=!1,isDraggable:m=!1,isFocused:f=!1,isHovering:g=!1,isInlineEditEnabled:h=!1,isInteractive:y=!0,isLoading:j=!1,isRemote:E=!1,issueKey:w,issueLink:k,issuePriorityName:C,issuePriorityUrl:S,issueSummary:I,issueTypeIconUrl:_,issueTypeName:P,onDelete:x=r.a,onEdit:D=r.a,onHandleUserClickAnalytics:M,projectType:L,remoteServerHostname:R,restrictedReorderingMessage:N="",statusCategory:F,statusCategoryId:U,statusId:V,statusName:K})=>{const[$]=Object(c.a)({issueKey:w,fieldKey:"assignee"}),[B]=Object(c.a)({issueKey:w,fieldKey:"summary"}),G=Object(n.useRef)(null),[z,Y]=Object(n.useState)(!1),J=!p&&(g||f),Z=i&&(p||g||f),X=Object(n.useCallback)((e=>D({statusId:e.id,statusName:e.name,statusCategory:me(e.statusCategory.id),statusCategoryId:e.statusCategory.id})),[D]),ee=Object(n.useCallback)((()=>{
G.current&&clearTimeout(G.current),G.current=setTimeout((()=>{Y(!0)}),200)}),[Y]),te=Object(n.useCallback)((()=>{G.current&&(clearTimeout(G.current),G.current=null,Y(!1))}),[Y]),ne=Object(n.useCallback)((()=>{Y(!0)}),[Y]);return a.a.createElement(oe,{isFocused:f,isHovering:g,onMouseEnter:ee,onMouseLeave:te,onFocus:ne},a.a.createElement(W,{issueTypeName:P,issueTypeIconUrl:_,isDraggable:m,isActionVisible:J,restrictedReorderingMessage:N,onHandleUserClickAnalytics:M}),a.a.createElement(A,{issueKey:w,issueLink:k,hideTooltipOnMouseDown:m,isActive:p,remoteServerHostname:R,statusCategory:F}),h&&(B||z)?a.a.createElement(pe,{issueKey:w}):a.a.createElement(Q,{value:I,isInlineEditEnabled:h}),null==e?void 0:e.map(((e,t)=>a.a.createElement(ce,{key:t},e))),null!=S&&a.a.createElement(q,{issuePriorityUrl:S,issuePriorityName:C,hideTooltipOnMouseDown:m}),void 0!==l&&a.a.createElement(T,{issueKey:w,estimateFieldId:l}),h&&($||z)?a.a.createElement(b,{issueKey:w}):a.a.createElement(O,{assigneeDisplayName:t,
assigneeUrl:s,hideTooltipOnMouseDown:m}),void 0!==F&&void 0!==K&&void 0!==V&&void 0!==U&&a.a.createElement(re,{hideTooltipOnMouseDown:m,isInteractive:y,isRemote:E,issueKey:w,projectType:L,statusCategoryId:U,statusId:V,statusName:K,onEditStatus:X}),j&&a.a.createElement(H,null),(u||o)&&a.a.createElement(v,{errorInlineMessage:o}),x!==r.a&&!j&&!u&&a.a.createElement(se,{issueKey:w,isRemote:E,shouldShowRemoveAction:Z,globalId:d,onDelete:x}))}));t.a=fe},"./src/packages/issue/analytics/src/services/suggestions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return d}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),a=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=(e,t,s,i,o)=>{const c=r(r({},o),{},{elapsedTimeMs:n.d.now()-s});i&&Object(a.b)(i({action:e,actionSubject:t}),`${t} ${e}`,c)},l=(e,t,s,n)=>{c("succeeded",`${e}Suggestions`,t,s,n)},d=(e,t,s,n)=>{c("failed",`${e}Suggestions`,t,s,n)}},"./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"e",(function(){return r})),
s.d(t,"d",(function(){return o}));const n="issue",a={comment:"comment",worklog:"worklog",description:"description",environment:"environment",customfield:"customfield",issue:n},i="DESC",r={FILENAME:"FILENAME",CREATED:"CREATED",FILESIZE:"FILESIZE",MIMETYPE:"MIMETYPE"},o=r.CREATED},"./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return c})),s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return p}));var n=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),a=s("./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){
o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c={isDownloading:!1,isFetching:!1,error:null,totalCount:void 0,deletableCount:void 0,visibleAttachments:[]
},l=()=>"\n  query attachmentsQuery($issueKey: String, $startAt: Long, $maxResults: Long, $orderField: AttachmentsOrderField, $orderDirection: OrderDirection) {\n    viewIssue(issueKey: $issueKey) {\n        attachments(startAt: $startAt, maxResults: $maxResults, orderField: $orderField, orderDirection: $orderDirection) {\n            nodes {\n                id\n                filename\n                mimetype\n                mediaApiFileId\n                createdDate\n                filesize\n                parentName\n                parentId\n                author {\n                    accountId\n                }\n                isParentCommentJsdInternal\n            }\n            totalCount\n            deletableCount\n        }\n    }\n  }",d={startAt:0,maxResults:6,orderField:a.d,orderDirection:a.c},u=async(e,t,s)=>{var a,i;const o=r(r({},d),s),c=await Object(n.d)(`${t}/rest/gira/1/`,{body:JSON.stringify({query:l(),variables:r({issueKey:e},o)})
}),u=null==c||null===(a=c.data)||void 0===a||null===(i=a.viewIssue)||void 0===i?void 0:i.attachments;return u&&u.nodes&&void 0!==u.totalCount?c.data.viewIssue.attachments:null},p=async(e,t)=>Object(n.a)(`${e}/rest/api/2/attachment/${t}`)},"./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return v}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/ui/flags/src/services/index.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js"),l=s("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js");const d=(e,t)=>e.issueAttachments[t]||c.c,u=Object(o.a)(l.a,{
selector:(e,t)=>d(e,t).isFetching}),p=Object(o.a)(l.a,{selector:(e,t)=>d(e,t).error}),m=Object(o.a)(l.a,{selector:e=>e.meta.orderDirection}),f=Object(o.a)(l.a,{selector:e=>e.meta.orderField}),b=Object(o.a)(l.a,{selector:(e,t)=>d(e,t).totalCount}),g=Object(o.a)(l.a,{selector:(e,t)=>d(e,t).deletableCount}),h=Object(o.a)(l.a,{selector:e=>e.meta.startAt}),y=Object(o.a)(l.a,{selector:(e,t)=>d(e,t).visibleAttachments}),O=Object(o.a)(l.a,{selector:null}),j=()=>{const[,e]=O(),t=Object(i.c)(""),{showFlag:s}=Object(a.f)(),{setOrderDirection:o,setOrderField:c,setTotalCount:l,setDeletableCount:d,setVisibleAttachments:u,addNewAttachments:p,deleteAttachment:m,getAttachments:f,refreshAttachments:b}=e,g=Object(n.useCallback)((async(e,n,a)=>{try{await m(e,n,t,a)}catch{s({type:"error",title:r.a.deleteFailedTitle,description:r.a.deleteFailedDescription})}}),[m,t,s]);return[null,{setOrderDirection:o,setOrderField:c,setTotalCount:l,setDeletableCount:d,setVisibleAttachments:u,addNewAttachments:p,
getAttachments:Object(n.useCallback)((async(e,s)=>{await f(e,t,s)}),[t,f]),deleteAttachment:g,refreshAttachments:Object(n.useCallback)((async(e,s)=>{await b(e,t,s)}),[t,b])}]},v=(e,t)=>{const[,s]=j(),[a]=u(e),[i]=p(e),[r]=m(),[o]=f(),[c]=h(),[l]=b(e),[d]=g(e),[O]=y(e),{getAttachments:v}=s;Object(n.useEffect)((()=>{void 0!==l||a||i||v(e,t)}),[i,v,e,a,t,l]);return[{error:i,meta:{orderDirection:r,orderField:o,startAt:c},value:{attachments:O,totalCount:l||0,deletableCount:d||0},loading:a},s]}},"./src/packages/issue/attachments/issue-attachments-base/src/services/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return M}));var a={};n.r(a),n.d(a,"setIsDownloading",(function(){return A})),n.d(a,"setDeleteAllDialogOpen",(function(){return _})),n.d(a,"setIsFetching",(function(){return f})),n.d(a,"setOrderDirection",(function(){return g})),n.d(a,"setOrderField",(function(){return h})),n.d(a,"setStartAt",(function(){return j})),n.d(a,"setTotalCount",(function(){return y})),
n.d(a,"setDeletableCount",(function(){return O})),n.d(a,"setVisibleAttachments",(function(){return v})),n.d(a,"addNewAttachments",(function(){return E})),n.d(a,"getAttachments",(function(){return w})),n.d(a,"deleteAttachment",(function(){return k})),n.d(a,"refreshAttachments",(function(){return C}));var i=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=n("./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js"),o=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),c=n("./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js"),l=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js");const d=()=>Object(l.b)("issue.details.2af.error-cleanup.group-1",!1);function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)
}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const f=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:p(p({},a.issueAttachments),{},{[e]:p(p({},a.issueAttachments[e]||c.c),{},{isFetching:t})})})},b=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:p(p({},a.issueAttachments),{},{[e]:p(p({},a.issueAttachments[e]||c.c),{},{error:t})})})},g=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:p(p({},n),{},{orderDirection:e})})},h=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:p(p({},n),{},{orderField:e})})
},y=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:p(p({},a.issueAttachments),{},{[e]:p(p({},a.issueAttachments[e]||c.c),{},{totalCount:t})})})},O=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:p(p({},a.issueAttachments),{},{[e]:p(p({},a.issueAttachments[e]||c.c),{},{deletableCount:t})})})},j=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:p(p({},n),{},{startAt:e})})},v=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:p(p({},a.issueAttachments),{},{[e]:p(p({},a.issueAttachments[e]||c.c),{},{visibleAttachments:t})})})},E=(e,t)=>({setState:s,getState:n})=>{const a=n(),i=a.issueAttachments[e]?a.issueAttachments[e].visibleAttachments:[],r=a.issueAttachments[e]&&a.issueAttachments[e].totalCount||0,o=t.concat(i),l=r+t.length;s({issueAttachments:p(p({},a.issueAttachments),{},{[e]:p(p({},a.issueAttachments[e]||c.c),{},{visibleAttachments:o,totalCount:l})})})},w=(t,s,n)=>async({dispatch:a})=>{a(f(t,!0)),a(b(t,null));try{
const e=await Object(c.b)(t,s,n);if(e)a(y(t,e.totalCount)),"number"==typeof e.deletableCount&&a(O(t,e.deletableCount)),a(v(t,e.nodes)),a(g((null==n?void 0:n.orderDirection)||r.c)),a(h((null==n?void 0:n.orderField)||r.d)),a(j((null==n?void 0:n.startAt)||0));else{const e="Failed to fetch issue attachments";a(b(t,new Error(e))),o.a.safeErrorWithoutCustomerData("issue.attachments.fetch-attachments",e)}}catch(e){a(b(t,e)),o.a.safeErrorWithoutCustomerData("issue.attachments.fetch-attachments",e.toString())}a(f(t,!1))},k=(e,t,s,n)=>async({dispatch:a,getState:i})=>{const r=i().issueAttachments[e];if(d()&&!r)return;const{totalCount:o,visibleAttachments:l}=r;if(void 0!==o){a(v(e,l.filter((e=>e.id!==t)))),a(y(e,o-1));try{await Object(c.a)(s,t),a(w(e,s,n))}catch(u){throw a(w(e,s,n)),u}}},C=(e,t,s)=>({dispatch:n,getState:a})=>{const i=a(),r=i.issueAttachments[e];if(d()&&!r)return;const{startAt:o}=i.meta,{isFetching:c}=r;(!c||s&&s.startAt!==o)&&n(w(e,t,s))};function S(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function I(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach((function(t){T(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function T(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:I(I({},n),{},{isDeleteAllDialogOpen:e})})};function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}
function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const A=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:x(x({},a.issueAttachments),{},{[e]:x(x({},a.issueAttachments[e]),{},{isDownloading:t})})})},M=Object(i.a)({name:"issue-attachments",initialState:{issueAttachments:{},meta:{orderDirection:r.c,orderField:r.d,startAt:0,isDeleteAllDialogOpen:!1}},actions:a})},"./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({
gotIt:{id:"issue-attachments-base.services.got-it",defaultMessage:"Got it"},tryAgain:{id:"issue-attachments-base.services.try-again",defaultMessage:"Try again"},downloadStartTitle:{id:"issue-attachments-base.services.download-start-title",defaultMessage:"Downloading attachments"},downloadStartDescription:{id:"issue-attachments-base.services.download-start-description",defaultMessage:"This might take a while. When we\u2019re done, your attachments will be in a zip file on your device."},downloadFailedTitle:{id:"issue-attachments-base.services.download-failed-title",defaultMessage:"We couldn\u2019t download your attachments"},downloadFailedDescription:{id:"issue-attachments-base.services.download-failed-description",defaultMessage:"We didn\u2019t finish downloading your attachments for {issueKey}. Check your connection and then try again."},downloadFailedExceedFileSizeDescription:{id:"issue-attachments-base.services.download-failed-exceed-file-size-description",
defaultMessage:"The total size of {issueKey}'s attachments is too large to download. Try downloading each attachment individually."},deleteFailedTitle:{id:"issue-attachments-base.services.delete-failed-title",defaultMessage:"Attachment could not be deleted"},deleteFailedDescription:{id:"issue-attachments-base.services.delete-failed-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}})},"./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg":function(e,t,s){e.exports=s.p+"assets/cloud.45c69da8a128cc239c19035695bab30d.8.svg"},"./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg":function(e,t,s){e.exports=s.p+"assets/search.1cc781b7e8848ea0f1d2dc40004f854f.8.svg"},"./src/packages/issue/base-components/base-select/src/ui/format-option-label/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./node_modules/@atlaskit/theme/dist/es2019/constants.js"),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const d=r.default.div.withConfig({componentId:"xkgbo7-0"})`display:flex;align-items:center;`,u=r.default.div.withConfig({componentId:"xkgbo7-1"})`flex-direction:column;display:flex;width:100%;`,p=r.default.div.withConfig({componentId:"xkgbo7-2"})`margin-right:${l.e}px;display:flex;`,m=r.default.div.withConfig({componentId:"xkgbo7-3"})``,f=r.default.div.withConfig({componentId:"xkgbo7-4"})`font-size:${o.fontSizeSmall}px;color:${c.a.N300};`,b=e=>{const{option:{label:t,iconUrl:s,description:n},optionContext:r}=e;return a.a.createElement(d,null,Boolean(s)&&a.a.createElement(p,null,a.a.createElement(i.a,{
appearance:"square",size:"xsmall",src:s,borderColor:"transparent"})),a.a.createElement(u,null,a.a.createElement(m,null,t),"menu"===r&&Boolean(n)&&a.a.createElement(f,null,n)))};b.displayName="SelectOptionWithAvatarAndDescription";const g=(e,{context:t})=>a.a.createElement(b,{option:e,optionContext:t});g.displayName="formatOptionLabel"},"./src/packages/issue/base-components/base-select/src/ui/styled.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"f",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=(s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"));function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=n.default.span.withConfig({componentId:"sc-13tydo8-0"})`display:flex;align-items:center;`,l=n.default.span.withConfig({componentId:"sc-13tydo8-1"})`display:flex;padding-right:${a.e}px;`,d=n.default.span.withConfig({componentId:"sc-13tydo8-2"})`display:flex;`,u=Object(n.default)(c).withConfig({componentId:"sc-13tydo8-3"})`justify-content:center;`,p={menuPortal:e=>r(r({},e),{},{zIndex:a.f.modal})},m=n.default.div.withConfig({
componentId:"sc-13tydo8-4"})`${e=>"top"===e.errorMessagePosition?`margin-bottom: ${.75*a.e}px;`:""};`},"./src/packages/issue/base-components/base-select/src/ui/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const i=(e,t)=>"string"==typeof e&&e.toLowerCase().includes(t),r=(e,t)=>{if(e.data&&!0===e.data.__isNew__)return!0;const s=t.trim().toLowerCase();return!("string"!=typeof e.label||!i(e.label,s))||!(!e.data||!e.data.filterValues)&&e.data.filterValues.some((e=>i(e,s)))},o=(e,...t)=>{const s=e||{};if(0===t.length)return s;const i=function(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},s);return t.forEach((e=>{e&&Object.keys(e).forEach((t=>{const s=i[t],n=e[t];i[t]=s?(e,...t)=>n(s(e,...t),...t):n}))})),i}},"./src/packages/issue/ecosystem-service/src/services/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return u}));var n={};s.r(n),s.d(n,"setEcosystem",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=e=>({setState:t})=>{e&&t(e)},o=Object(a.a)({name:"issue-view-layout-ecosystem-service",initialState:{activityPanels:{},canInstallAddons:!1,contentPanels:{},backgroundScripts:[],ecosystemOnDate:0,glances:{},
operations:[]},actions:n}),c=Object(i.a)(o),l=Object(i.a)(o,{selector:null}),d=()=>{const[e]=c();return[e.glances]},u=()=>{const[,{setEcosystem:e}]=l();return[void 0,{setEcosystem:e}]}},"./src/packages/issue/epic-color/src/common/constants.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"l",(function(){return o})),s.d(t,"k",(function(){return c})),s.d(t,"i",(function(){return l})),s.d(t,"j",(function(){return d})),s.d(t,"h",(function(){return u})),s.d(t,"f",(function(){return p})),s.d(t,"g",(function(){return m})),s.d(t,"c",(function(){return f})),s.d(t,"e",(function(){return b})),s.d(t,"b",(function(){return g})),s.d(t,"a",(function(){return h}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const r={PURPLE:i.a.P200,BLUE:i.a.B200,GREEN:i.a.G200,TEAL:i.a.T200,YELLOW:i.a.Y200,ORANGE:i.a.R200,GREY:i.a.N200,DARK_PURPLE:i.a.P400,DARK_BLUE:i.a.B400,DARK_GREEN:i.a.G400,DARK_TEAL:i.a.T400,
DARK_YELLOW:i.a.Y400,DARK_ORANGE:i.a.R400,DARK_GREY:i.a.N700},o=a()(r),c={purple:"PURPLE",dark_purple:"DARK_PURPLE",blue:"BLUE",dark_blue:"DARK_BLUE",green:"GREEN",dark_green:"DARK_GREEN",teal:"TEAL",dark_teal:"DARK_TEAL",yellow:"YELLOW",dark_yellow:"DARK_YELLOW",orange:"ORANGE",dark_orange:"DARK_ORANGE",grey:"GREY",dark_grey:"DARK_GREY"},l=a()(c),d={"ghx-label-1":"DARK_GREY","ghx-label-2":"DARK_YELLOW","ghx-label-3":"YELLOW","ghx-label-4":"DARK_BLUE","ghx-label-5":"DARK_TEAL","ghx-label-6":"GREEN","ghx-label-7":"PURPLE","ghx-label-8":"DARK_PURPLE","ghx-label-9":"ORANGE","ghx-label-10":"BLUE","ghx-label-11":"TEAL","ghx-label-12":"GREY","ghx-label-13":"DARK_GREEN","ghx-label-14":"DARK_ORANGE"},u=a()(d),p={color_1:"DARK_GREY",color_2:"DARK_YELLOW",color_3:"YELLOW",color_4:"DARK_BLUE",color_5:"DARK_TEAL",color_6:"GREEN",color_7:"PURPLE",color_8:"DARK_PURPLE",color_9:"ORANGE",color_10:"BLUE",color_11:"TEAL",color_12:"GREY",color_13:"DARK_GREEN",color_14:"DARK_ORANGE"},m=a()(p),f={
"ghx-label-1":"color_1","ghx-label-2":"color_2","ghx-label-3":"color_3","ghx-label-4":"color_4","ghx-label-5":"color_5","ghx-label-6":"color_6","ghx-label-7":"color_7","ghx-label-8":"color_8","ghx-label-9":"color_9","ghx-label-10":"color_10","ghx-label-11":"color_11","ghx-label-12":"color_12","ghx-label-13":"color_13","ghx-label-14":"color_14"},b={DARK_GREY:"grey",DARK_YELLOW:"yellow",YELLOW:"yellowLight",DARK_BLUE:"blue",DARK_TEAL:"teal",GREEN:"greenLight",PURPLE:"purpleLight",DARK_PURPLE:"purple",ORANGE:"redLight",BLUE:"blueLight",TEAL:"tealLight",GREY:"greyLight",DARK_GREEN:"green",DARK_ORANGE:"red"},g={color_1:"grey",color_2:"yellow",color_3:"yellowLight",color_4:"blue",color_5:"teal",color_6:"greenLight",color_7:"purpleLight",color_8:"purple",color_9:"redLight",color_10:"blueLight",color_11:"tealLight",color_12:"greyLight",color_13:"green",color_14:"red"},h={PURPLE:{primary:i.a.P200,secondary:i.a.P500,text:i.a.P500,textBackground:i.a.P50,border:i.a.P400,line:i.a.P300,
primaryGradient:i.a.P75,hasContrastSecondaryGradient:!0},BLUE:{primary:i.a.B200,secondary:i.a.B500,text:i.a.B500,textBackground:i.a.B50,border:i.a.B400,line:i.a.B300,primaryGradient:i.a.B75,hasContrastSecondaryGradient:!0},GREEN:{primary:i.a.G200,secondary:i.a.G500,text:i.a.G500,textBackground:i.a.G50,border:i.a.G400,line:i.a.G300,primaryGradient:i.a.G75,hasContrastSecondaryGradient:!0},TEAL:{primary:i.a.T200,secondary:i.a.T500,text:i.a.T500,textBackground:i.a.T50,border:i.a.T400,line:i.a.T300,primaryGradient:i.a.T75,hasContrastSecondaryGradient:!0},YELLOW:{primary:i.a.Y200,secondary:i.a.Y500,text:i.a.Y500,textBackground:i.a.Y50,border:i.a.Y400,line:i.a.Y300,primaryGradient:i.a.Y75,hasContrastSecondaryGradient:!0},ORANGE:{primary:i.a.R200,secondary:i.a.R500,text:i.a.R500,textBackground:i.a.R50,border:i.a.R400,line:i.a.R300,primaryGradient:i.a.R75,hasContrastSecondaryGradient:!0},GREY:{primary:i.a.N200,secondary:i.a.N500,text:i.a.N500,textBackground:i.a.N30,border:i.a.N700,
line:i.a.N500,primaryGradient:i.a.N50,hasContrastSecondaryGradient:!0},DARK_PURPLE:{primary:i.a.P400,secondary:i.a.P200,text:i.a.N0,textBackground:i.a.P400,border:i.a.P100,line:i.a.P300,primaryGradient:i.a.P100,hasContrastSecondaryGradient:!1},DARK_BLUE:{primary:i.a.B400,secondary:i.a.B200,text:i.a.N0,textBackground:i.a.B400,border:i.a.B200,line:i.a.B100,primaryGradient:i.a.B100,hasContrastSecondaryGradient:!1},DARK_GREEN:{primary:i.a.G400,secondary:i.a.G200,text:i.a.N0,textBackground:i.a.G400,border:i.a.G200,line:i.a.G300,primaryGradient:i.a.G200,hasContrastSecondaryGradient:!1},DARK_TEAL:{primary:i.a.T400,secondary:i.a.T200,text:i.a.N0,textBackground:i.a.T400,border:i.a.T200,line:i.a.T300,primaryGradient:i.a.T100,hasContrastSecondaryGradient:!1},DARK_YELLOW:{primary:i.a.Y400,secondary:i.a.Y200,text:i.a.N0,textBackground:i.a.Y400,border:i.a.Y200,line:i.a.Y300,primaryGradient:i.a.Y100,hasContrastSecondaryGradient:!1},DARK_ORANGE:{primary:i.a.R400,secondary:i.a.R200,text:i.a.N0,
textBackground:i.a.R400,border:i.a.R100,line:i.a.R300,primaryGradient:i.a.R100,hasContrastSecondaryGradient:!1},DARK_GREY:{primary:i.a.N700,secondary:i.a.N300,text:i.a.N0,textBackground:i.a.N500,border:i.a.N100,line:i.a.N500,primaryGradient:i.a.N100,hasContrastSecondaryGradient:!1}}},"./src/packages/issue/epic-color/src/common/types.js":function(e,t,s){"use strict";s.d(t,"g",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"h",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return d}));const n="PURPLE",a="BLUE",i="GREEN",r="GREY",o={PURPLE:n,DARK_PURPLE:"DARK_PURPLE",BLUE:a,DARK_BLUE:"DARK_BLUE",GREEN:i,DARK_GREEN:"DARK_GREEN",TEAL:"TEAL",DARK_TEAL:"DARK_TEAL",YELLOW:"YELLOW",DARK_YELLOW:"DARK_YELLOW",ORANGE:"ORANGE",DARK_ORANGE:"DARK_ORANGE",GREY:r,DARK_GREY:"DARK_GREY"},c={SERVER_PURPLE:"purple",SERVER_DARK_PURPLE:"dark_purple",
SERVER_BLUE:"blue",SERVER_DARK_BLUE:"dark_blue",SERVER_GREEN:"green",SERVER_DARK_GREEN:"dark_green",SERVER_TEAL:"teal",SERVER_DARK_TEAL:"dark_teal",SERVER_YELLOW:"yellow",SERVER_DARK_YELLOW:"dark_yellow",SERVER_ORANGE:"orange",SERVER_DARK_ORANGE:"dark_orange",SERVER_GREY:"grey",SERVER_DARK_GREY:"dark_grey"},l={GHX_LABEL_1:"ghx-label-1",GHX_LABEL_2:"ghx-label-2",GHX_LABEL_3:"ghx-label-3",GHX_LABEL_4:"ghx-label-4",GHX_LABEL_5:"ghx-label-5",GHX_LABEL_6:"ghx-label-6",GHX_LABEL_7:"ghx-label-7",GHX_LABEL_8:"ghx-label-8",GHX_LABEL_9:"ghx-label-9",GHX_LABEL_10:"ghx-label-10",GHX_LABEL_11:"ghx-label-11",GHX_LABEL_12:"ghx-label-12",GHX_LABEL_13:"ghx-label-13",GHX_LABEL_14:"ghx-label-14"},d={AGILE_COLOR_1:"color_1",AGILE_COLOR_2:"color_2",AGILE_COLOR_3:"color_3",AGILE_COLOR_4:"color_4",AGILE_COLOR_5:"color_5",AGILE_COLOR_6:"color_6",AGILE_COLOR_7:"color_7",AGILE_COLOR_8:"color_8",AGILE_COLOR_9:"color_9",AGILE_COLOR_10:"color_10",AGILE_COLOR_11:"color_11",AGILE_COLOR_12:"color_12",
AGILE_COLOR_13:"color_13",AGILE_COLOR_14:"color_14"}},"./src/packages/issue/epic-color/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return u})),s.d(t,"a",(function(){return p})),s.d(t,"k",(function(){return m})),s.d(t,"h",(function(){return f})),s.d(t,"f",(function(){return b})),s.d(t,"j",(function(){return g})),s.d(t,"i",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"d",(function(){return O})),s.d(t,"g",(function(){return v}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./src/packages/issue/epic-color/src/common/constants.js"),r=s("./src/packages/issue/epic-color/src/common/types.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=e=>{if(null==e)return r.d.PURPLE;if(e in r.d)return e;const t=i.k[e];if(t)return t;const s=i.f[e];if(s)return s;const n=i.j[e];return n||r.d.PURPLE},u=e=>{if(null==e)return r.h.SERVER_PURPLE;if(e in r.h)return e;const t=i.i[e];if(t)return t;const s=i.i[i.f[e]];if(s)return s;const n=i.i[i.j[e]];return n||r.h.SERVER_PURPLE},p=e=>{if(null===e)return i.h[r.d.PURPLE];if(e in r.c)return e;const t=i.h[e];if(t)return t;const s=i.h[i.k[e]];if(s)return s;const n=i.h[i.f[e]];return n||i.h[r.d.PURPLE]},m=(e,t)=>{const s=c(c({},i.a),t)
;return(t?Object.keys(t).concat(Object.keys(r.d)):Object.keys(r.d)).reduce(((t,n)=>c(c({},t),{},{[n]:e(s[n])})),{})},f=e=>i.d[e]||i.d.PURPLE,b=e=>a()(i.d)[e]||"PURPLE",g=e=>""!==e&&null!=e&&i.k[e]?i.k[e]:"PURPLE",h=e=>i.i[e],y=e=>""!==e&&null!=e&&i.j[e]?i.j[e]:"PURPLE",O=e=>i.h[e],j=m((e=>e.primary)),v=()=>[{label:"purple",value:j[r.d.PURPLE]},{label:"blue",value:j[r.d.BLUE]},{label:"green",value:j[r.d.GREEN]},{label:"teal",value:j[r.d.TEAL]},{label:"yellow",value:j[r.d.YELLOW]},{label:"orange",value:j[r.d.ORANGE]},{label:"grey",value:j[r.d.GREY]},{label:"darkPurple",value:j[r.d.DARK_PURPLE]},{label:"darkBlue",value:j[r.d.DARK_BLUE]},{label:"darkGreen",value:j[r.d.DARK_GREEN]},{label:"darkTeal",value:j[r.d.DARK_TEAL]},{label:"darkYellow",value:j[r.d.DARK_YELLOW]},{label:"darkOrange",value:j[r.d.DARK_ORANGE]},{label:"darkGrey",value:j[r.d.DARK_GREY]}]},"./src/packages/issue/fields/assignee/src/common/assets/add.png":function(e,t,s){
e.exports=s.p+"assets/add.cb4b04e861ca3b9ce2a2c8032dde1c45.8.png"},"./src/packages/issue/fields/assignee/src/common/ui/read-view/popover/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),r=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),o=s("./src/packages/platform/controllers/intl/src/index.js"),c=s("./src/packages/issue/fields/assignee/src/common/utils.js"),l=s("./node_modules/react-intl/lib/index.es.js"),d=Object(l.defineMessages)({assigneeTooltip:{id:"issue-field-assignee.common.read-view.popover.assignee-tooltip",defaultMessage:"Assignee: {name}"}}),u=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const m=u.default.div.withConfig({componentId:"sc-149xdr6-0"})`width:${3.5*p.e}px;height:${3.5*p.e}px;padding:0;box-sizing:border-box;cursor:default;`,f=({value:e})=>{
const t=Object(o.c)(),s=Object(c.c)(t),n=e||s,l="__UNASSIGNED_ID__"===n.accountId?n.displayName:t.formatMessage(d.assigneeTooltip,{name:n.displayName}),u=Object(c.d)(n);return a.a.createElement(m,null,a.a.createElement(r.a,{content:l},a.a.createElement(i.a,{size:"small",src:u,name:l,borderColor:"transparent"})))};f.displayName="AssigneePickerView";t.a=f},"./src/packages/issue/fields/assignee/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"e",(function(){return d})),s.d(t,"d",(function(){return u})),s.d(t,"g",(function(){return p}));var n=s("./src/packages/issue/fields/assignee/src/messages.js"),a=s("./src/packages/issue/fields/assignee/src/common/assets/add.png"),i=s.n(a);const r=({formatMessage:e})=>({accountId:"__UNASSIGNED_ID__",displayName:e(n.a.unassignedOption),avatarUrls:{}}),o=({formatMessage:e})=>({accountId:"-1",
displayName:e(n.a.automaticOption),avatarUrls:{}}),c=({formatMessage:e},t)=>({accountId:"__INVITE_PEOPLE_ID__",displayName:e(t?n.a.invitePeopleOptionAdmin:n.a.invitePeopleOption),avatarUrls:{"48x48":i.a}}),l=({accountId:e,displayName:t,avatarUrls:s,emailAddress:n})=>({id:e||"",name:t,avatarUrl:s["48x48"],byline:n}),d=({id:e,name:t,avatarUrl:s})=>({accountId:e,displayName:t,avatarUrls:{"48x48":s}}),u=({avatarUrls:e})=>e["48x48"],p=(e,t,s)=>({accountId:e,displayName:t,avatarUrls:{"48x48":s}})},"./src/packages/issue/fields/assignee/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js");const a=()=>Object(n.a)().getVariantValue("invite.from.assign",{default:"not-enrolled",oneOf:["not-enrolled","control","variation"],shouldTrackExposureEvent:!1}),i=()=>"variation"===a()},
"./src/packages/issue/fields/assignee/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({unassignedOption:{id:"issue-field-assignee.unassigned-option",defaultMessage:"Unassigned"},automaticOption:{id:"issue-field-assignee.automatic-option",defaultMessage:"Automatic"},assignToMe:{id:"issue-field-assignee.assign-to-me",defaultMessage:"Assign to me"},searchForAssignee:{id:"issue-field-assignee.search-for-assignee",defaultMessage:"Search for assignee"},invitePeopleOption:{id:"issue-field-assignee.invite-people-option",defaultMessage:"Add teammate to Jira"},invitePeopleOptionAdmin:{id:"issue-field-assignee.invite-people-option-admin",defaultMessage:"Invite teammate to Jira"}})},"./src/packages/issue/fields/assignee/src/services/assignee-options/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return f}))
;var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),i=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),r=s("./src/packages/platform/controllers/tenant-context/src/components/is-admin/index.js"),o=s("./src/packages/platform/services/user/src/main.js"),c=s("./src/packages/issue/fields/assignee/src/common/utils.js"),l=s("./src/packages/issue/fields/assignee/src/feature-flags.js"),d=s("./src/packages/issue/fields/assignee/src/messages.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){m(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const f=(e,t,s,u,m,f,b)=>{const[g,h]=Object(n.useState)(!1),y=Object(r.a)(),O=Object(c.c)(s),j=Object(c.a)(s),v=Object(c.f)(e||O),[{data:E}]=Object(o.b)(),{createAnalyticsEvent:w}=Object(i.a)(),k=E?p(p({},Object(c.f)(E)),{},{publicName:s.formatMessage(d.a.assignToMe)}):null,C=void 0===m||""===m,S=C?Boolean(null==e?void 0:e.accountId):O.displayName.toLowerCase().startsWith((m||"").toLowerCase());let I=!1;!0===b&&(I=C?Boolean("-1"!==(null==e?void 0:e.accountId)):j.displayName.toLowerCase().startsWith((m||"").toLowerCase()))
;const T=null!==k&&v.id===k.id,_=t.some((e=>null!==k&&e.accountId===k.id)),P=C?!T&&(u||_):_,x=t.filter((e=>!(C&&e.accountId===v.id||null!==k&&e.accountId===k.id))).map(c.f),D=[];!0===f&&!C&&x.length<3&&(g||(h(!0),((e,t,s)=>{if(null==e)return;const n=e({action:"exposed",actionSubject:"feature"}),i={fieldId:"assignee",flagKey:"invite.from.assign",value:Object(l.a)(),userRole:s?"admin":"basic",suggestionsCount:t,source:"assigneeField"};Object(a.b)(n,"feature exposed",i)})(w,x.length,y)),Object(l.b)()&&(((e,t,s)=>{if(null==e)return;const n=e({action:"rendered",actionSubject:"inviteItem"}),i={fieldId:"assignee",userRole:s?"admin":"basic",suggestionsCount:t,source:"assigneeField"};Object(a.h)(n,"inviteItem rendered",i)})(w,x.length,y),D.push(Object(c.f)(Object(c.b)(s,y)))));const A=[...S?[Object(c.f)(O)]:[],...I?[Object(c.f)(j)]:[],...P&&null!==k?[k]:[],...x,...D];return[v,A]}},"./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/get.js"),i=s.n(a),r=s("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js"),o=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),c=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),l=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),d=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),u=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),p=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}const b=async(e,t)=>{const s=await Object(c.b)(((e,t)=>`${e}/rest/api/3/issue/${t}?fields=assignee`)(e,t),function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){f(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},r.a)),{assignee:n}=s.fields;return n};t.a=({issueKey:e,onSuccess:t,onFailure:s})=>{const a=p.c,[{value:r}]=Object(l.a)(e,a),c=i()(r,"schema.type","user"),[,{setFieldValue:m}]=Object(d.b)({issueKey:e,fieldKey:p.c}),f=Object(n.useCallback)((s=>{s&&"-1"===s.accountId?b("",e).then((s=>{m(e,p.c,s),null==t||t(s)})).catch((e=>{Object(o.a)({meta:{id:"currentAssigneeFetch",packageName:"jiraIssueFieldAssignee"},error:e,sendToPrivacyUnsafeSplunk:!0}),null==t||t(s)})):null==t||t(s)
}),["",e,t,m]),[{value:g,error:h},{saveValue:y,resetError:O}]=Object(u.a)({fieldKey:a,issueKey:e,fieldType:c,initialValue:null,onSuccess:f,onFailure:s});return[{value:g,error:h,fieldConfig:r},{saveValue:y,resetError:O}]}},"./src/packages/issue/fields/assignee/src/services/users-query/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");t.a=e=>{const[t,s]=Object(n.useState)([]),[r,o]=Object(n.useState)(void 0),[c,l]=Object(n.useState)(!1),d=Object(n.useRef)(""),u=Object(n.useCallback)(((t="")=>{if(["",null,void 0].includes(e))return Promise.resolve([]);const n=`${e||""}${t}`;return l(!0),d.current=t,r&&o(void 0),Object(i.a)(n).then((e=>{t===d.current&&s(e)})).catch((e=>{t===d.current&&o(e),a.h.safeErrorWithoutCustomerData("issue.fields.assigne","Failed to fetch users",e)})).finally((()=>l(!1)))}),[e,r]);return[{data:t,
error:r,loading:c},u]}},"./src/packages/issue/fields/assignee/src/ui/popover/main.js":function(e,t,s){"use strict";s.r(t)
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),c=s("./src/packages/issue/fields/assignee/src/common/ui/read-view/popover/main.js"),l=s("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js"),d=s("./node_modules/lodash/debounce.js"),u=s.n(d),p=s("./node_modules/@atlaskit/user-picker/dist/es2019/components/PopupUserPicker.js"),m=s("./src/packages/platform/controllers/intl/src/index.js"),f=s("./src/packages/invite-people-drawer/src/controllers/index.js"),b=s("./src/packages/issue/fields/assignee/src/common/utils.js"),g=s("./src/packages/issue/fields/assignee/src/feature-flags.js"),h=s("./src/packages/issue/fields/assignee/src/messages.js"),y=s("./src/packages/issue/fields/assignee/src/services/assignee-options/index.js"),O=s("./src/packages/issue/fields/assignee/src/services/users-query/index.js"),j=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),v=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const E="rgba(9, 30, 66, 0.36)",w=j.default.button.withConfig({componentId:"sc-16sulhw-0"})`display:block;background:transparent;border:0;outline:0;padding:0;margin:0;border-radius:50%;box-shadow:0 0 0 2px transparent;& > div{cursor:pointer;}span:first-of-type::after{opacity:${({active:e})=>e?1:0};background-color:${({active:e})=>e?E:"transparent"};}&:active{box-shadow:0 0 0 2px transparent !important;}&:focus,&:focus-within{box-shadow:0 0 0 2px ${v.a.B100};}&:hover span:first-of-type::after{opacity:1;background-color:${E};}`,k=({shouldPreloadAssignToMe:e=!1,autoCompleteUrl:t,value:s=null,onFocus:i,onBlur:r,onChange:o,searchDebounceTimeout:l=300,enablePeopleInvite:d=!0})=>{const j=Object(m.c)(),v=Object(n.useRef)({previousQuery:void 0}).current,[{data:E,loading:k},C]=Object(O.a)(t||""),[S,I]=Object(y.a)(s,E,j,e,v.previousQuery,d,!0),[,{openDrawer:T}]=Object(f.c)(),_=Object(n.useMemo)((()=>u()((e=>{e!==v.previousQuery&&C(e),v.previousQuery=e
}),l)),[C,l,v.previousQuery]),P=Object(n.useCallback)((e=>{null==i||i(e),E&&E.length||C()}),[i,E,C]),x=Object(n.useCallback)((e=>{null==r||r(e),v.previousQuery=void 0}),[r,v]),D=Object(n.useCallback)(((e,t)=>{if(!e||Array.isArray(e))return;if(Object(g.b)()&&d&&"__INVITE_PEOPLE_ID__"===e.id)return T("assignee"),void(null==o||o(s,t));const n="__UNASSIGNED_ID__"===e.id?null:E.find((({accountId:t})=>t===e.id))||Object(b.e)(e);null==o||o(n,t)}),[d,o,T,E,s]);return a.a.createElement(p.a,{fieldId:null,placeholder:j.formatMessage(h.a.searchForAssignee),isLoading:k,options:I,target:({ref:e,isOpen:t})=>a.a.createElement(w,{innerRef:e,active:t},a.a.createElement(c.a,{value:s})),value:S,onFocus:P,onBlur:x,onChange:D,onInputChange:_})};k.displayName="AssigneePickerEdit";var C=k;const S=["issueKey","onChange"];function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e
}).apply(this,arguments)}function T(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const _=Object(r.a)("assigneePickerEdit",{onChange:"changed"})(C);t.default=e=>{let{issueKey:t,onChange:s}=e,r=T(e,S);const[{value:d}]=Object(i.a)(t,o.c),[{value:u},{saveValue:p}]=Object(l.a)({issueKey:t}),{autoCompleteUrl:m,isEditable:f=!1}=d||{},b=Object(n.useCallback)(((e,t,n)=>{null==s||s(e,t),p(e,null,n)}),[s,p]);return f?a.a.createElement(_,I({autoCompleteUrl:m,value:u,onChange:b},r)):a.a.createElement(c.a,{value:u})}},"./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r
})),s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return c}));var n=s("./node_modules/lodash/memoize.js"),a=s.n(n);const i=e=>{if(!e)return null;const{id:t,value:s,child:n}=e;return{value:t,label:s,child:n&&{value:n.id,label:n.value}}},r=a()((e=>e.map((({id:e,value:t})=>({value:e,label:t}))))),o=a()((e=>e.reduce(((e,{id:t,children:s})=>(e[t]=s?r(s):[],e)),{}))),c=e=>{if(!e)return null;const{label:t,value:s}=e,n=e.child||void 0;return{id:s,value:t,child:n&&{id:n.value,value:n.label}}}},"./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/form/dist/es2019/messages.js"),r=s("./node_modules/@atlaskit/select/dist/es2019/Select.js"),o=s("./src/packages/platform/controllers/intl/src/index.js"),c=s("./src/packages/issue/base-components/base-select/src/ui/styled.js"),l=s("./node_modules/react-intl/lib/index.es.js"),d=Object(l.defineMessages)({noOptionsSelected:{id:"issue-field-cascading-select.cascading-select-view.no-options-selected",defaultMessage:"None"},errorMessage:{id:"issue-field-cascading-select.cascading-select-view.error-message",defaultMessage:"The value could not be saved"}}),u=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const m=u.default.div.withConfig({componentId:"oz9751-0"})`display:flex;flex-direction:${e=>e.areOptionsOnSameRow?"row":"column"};`,f=u.default.div.withConfig({componentId:"oz9751-1"
})`flex-basis:0;flex-grow:1;`,b=Object(u.default)(f).withConfig({componentId:"oz9751-2"})`margin-top:${e=>e.areOptionsOnSameRow?0:p.e/2+"px"};margin-left:${e=>e.areOptionsOnSameRow?p.e/2+"px":0};`,g=(e,t)=>!e||0===t.length;function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=e=>{
const{value:t,allowedValues:s,allowedChildValues:l,onChange:u,isInvalid:p=!1,areOptionsOnSameRow:h=!1,autoFocus:O=!0,onCloseMenuOnScroll:j,isDropdownMenuFixedAndLayered:v}=e,E=Object(o.c)(),[w,k]=(e=>{if(!e)return[null,null];const{label:t,value:s}=e;return[{label:t,value:s},e.child||null]})(t),[C,S]=Object(n.useState)(w),[I,T]=Object(n.useState)(k),[_,P]=Object(n.useState)(w&&l[w.value]||[]),[x,D]=Object(n.useState)(g(t,_)),A=Object(n.useRef)(null);return a.a.createElement(a.a.Fragment,null,p&&a.a.createElement(i.a,null,E.formatMessage(d.errorMessage)),a.a.createElement(m,{areOptionsOnSameRow:h},a.a.createElement(f,null,a.a.createElement(r.a,{defaultValue:w,value:C,options:s,onChange:(e,{action:s},n)=>{switch(T(null),s){case"select-option":u(e,null,n),S(e),P(l[e.value]||[]),D(g(t,_)),A&&A.current&&A.current.focus();break;case"clear":u(null,null,n),S(null),P([])}},isClearable:!0,autoFocus:O,openMenuOnFocus:!0,placeholder:E.formatMessage(d.noOptionsSelected),closeMenuOnScroll:j,
menuPosition:!0===v?"fixed":void 0,styles:!0===v?c.f:void 0})),_.length>0&&a.a.createElement(b,{areOptionsOnSameRow:h},a.a.createElement(r.a,{defaultValue:k,value:I,options:_,onChange:(e,{action:t},s)=>{switch(t){case"select-option":u(y(y({},C),{},{child:e}),null,s),T(e);break;case"clear":u(C,null,s),T(null)}},isClearable:!0,autoFocus:x,openMenuOnFocus:!0,placeholder:E.formatMessage(d.noOptionsSelected),ref:A,closeMenuOnScroll:j,menuPosition:!0===v?"fixed":void 0,styles:!0===v?c.f:void 0}))))}},"./src/packages/issue/fields/cascading-select-custom-field/src/ui/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),o=s("./src/packages/platform/controllers/intl/src/index.js"),c=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),l=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),d=s("./src/packages/issue/fields/components/inline-edit/src/ui/index.js"),u=s("./src/packages/issue/fields/components/field-pin/src/index.js"),p=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js"),m=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),f=s("./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js")
;var g=s("./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js"),h=s("./node_modules/react-intl/lib/index.es.js"),y=Object(h.defineMessages)({noOptionsSelected:{id:"issue-field-cascading-select.no-options-selected",defaultMessage:"None"}}),O=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const j=O.default.div.withConfig({componentId:"sc-35ifnv-0"})`z-index:300;position:relative;`,v=O.default.div.withConfig({componentId:"sc-35ifnv-1"})`display:flex;line-height:1;max-width:100%;word-break:break-word;padding-top:7px;padding-bottom:7px;position:relative;left:6px;`,E=O.default.div.withConfig({componentId:"sc-35ifnv-2"})`margin-left:-8px;margin-top:-8px;width:100%;`,w=["label","isEditable","isMobile","allowedValues","areOptionsOnSameRow","showPinButton","onCloseMenuOnScroll","isDropdownMenuFixedAndLayered"];function k(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const C=(e,t)=>e&&e.child?`${e.label} - ${e.child.label}`:e?e.label:t.formatMessage(y.noOptionsSelected),S=e=>{const{label:t,isEditable:s,isMobile:h,allowedValues:y,areOptionsOnSameRow:O,showPinButton:S,onCloseMenuOnScroll:I,isDropdownMenuFixedAndLayered:T}=e,_=k(e,w),P=Object(o.c)(),[{value:x,error:D},{saveValue:A}]=Object(c.a)(_),[M,L]=Object(n.useState)(Object(f.a)(x)),[R,N]=Object(n.useState)(Object(f.a)(x)),[F,U]=Object(n.useState)(!1),[V,K]=Object(n.useState)(C(M,P)),[$,W]=Object(n.useState)([]),[B,H]=Object(n.useState)({}),G=Object(n.useCallback)((e=>{K(C(e,P))}),[P]),q=()=>{W(Object(f.b)(y)),H(Object(f.c)(y)),U(!0)},z=e=>{A(Object(f.d)(M),null,e),U(!1),G(M),Object(m.h)(e,"cascadingSelect",{
hasChild:!(!M||!M.child||null==M.child),isEmpty:!M}),N(M)},Y=()=>{U(!1),L(R)},Q=async e=>{L(e)},J=()=>a.a.createElement(j,null,a.a.createElement(g.a,{value:M,onCloseMenuOnScroll:I,isDropdownMenuFixedAndLayered:T,allowedValues:$,allowedChildValues:B,onChange:Q,isInvalid:!!D,areOptionsOnSameRow:O,isEditable:s}));return Object(n.useEffect)((()=>{G(M)}),[M,G]),Object(n.useEffect)((()=>{D&&U(!0)}),[D]),Object(n.useEffect)((()=>{L(Object(f.a)(x))}),[x]),a.a.createElement(l.d,null,a.a.createElement(l.b,null,a.a.createElement(l.c,null,t),!0===S&&a.a.createElement(u.a,{fieldId:_.fieldKey,label:t})),a.a.createElement(l.g,{isEditing:F},a.a.createElement(r.a,{onEscape:Y},(()=>Object(b.b)("issue.details.inline-edit-bump",!1))()?a.a.createElement(E,null,a.a.createElement(d.a,{defaultValue:"",readView:()=>{let e;return e=M?V:a.a.createElement(p.b,null,V),a.a.createElement(v,null,e)},editView:J,isEditable:s,onCancel:Y,onConfirm:z,onEdit:q,isEditing:F,readViewFitContainerWidth:!h
})):a.a.createElement(i.a,{isLabelHidden:!0,label:t,readView:(()=>M?a.a.createElement("div",null,V):a.a.createElement(p.b,null,V))(),editView:s?J():null,onConfirm:z,onCancel:Y,onEditRequested:q,isEditing:F,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!h}))))};S.displayName="CascadingSelectInlineEditView",S.defaultProps={initialValue:null,isMobile:!1,areOptionsOnSameRow:!1,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"};t.a=S},"./src/packages/issue/fields/components/error-flag/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),r=s("./src/packages/platform/ui/flags/src/ui/index.js");const o=({error:e,title:t,description:s})=>{if(!e)return null;if(e instanceof i.a){const n=e.message||e.errors&&e.errors[0]&&e.errors[0].error||s;return a.a.createElement(r.a,{flag:{type:"warning",title:t,description:n}})}
return a.a.createElement(r.a,{flag:{type:"error",title:t,description:s}})};o.displayName="ErrorFlag"},"./src/packages/issue/fields/components/field-heading/src/styled.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return o})),s.d(t,"d",(function(){return d})),s.d(t,"g",(function(){return u})),s.d(t,"i",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"f",(function(){return g})),s.d(t,"e",(function(){return h})),s.d(t,"b",(function(){return O})),s.d(t,"a",(function(){return j}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),r=s("./src/packages/issue/fields/components/field-pin/src/styled.js");const o=n.keyframes`from{opacity:0;}to{opacity:1;}`,c=n.keyframes`from{opacity:1;}to{opacity:0;}`,l=n.css`white-space:nowrap;overflow:hidden;text-overflow:ellipsis;`,d=n.default.div.withConfig({
componentId:"sc-183o9qd-0"})`display:flex;flex-wrap:wrap;margin-bottom:${2*i.e}px;word-break:break-word;`,u=n.default.div.withConfig({componentId:"sc-183o9qd-1"})`& > div > div > div > div > div > div{min-height:${4*i.e}px;}& > div > div > div > div > div > div > div{${e=>e.isFixFocusRing?"border-color: transparent":""} ${e=>e.isEditing?"":`padding: 0 0 0 ${.75*i.e}px;`} ${e=>!e.isEditing&&e.fixedHeight?`height: ${4*i.e}px`:""}}flex-grow:1;width:${60}%;box-sizing:border-box;`,p=n.css`${r.a}{visibility:hidden;animation:${c} 0.15s linear forwards;}:hover ${r.a}{visibility:visible;animation:${o} 0.15s linear forwards;}`,m=n.css`${p} position:relative;flex-grow:1;box-sizing:border-box;padding-right:${3*i.e}px;min-width:${15*i.e}px;width:${40}%;padding-top:${i.e}px;max-width:${21.25*i.e}px;line-height:1;`,f=n.css`${p} margin-bottom:${.5*i.e}px !important;display:flex;align-items:center;`,b=n.default.h2.withConfig({componentId:"sc-183o9qd-2"
})`box-sizing:border-box;font-weight:500;${a.d.h200()};color:${a.a.N800};`,g=n.default.h2.withConfig({componentId:"sc-183o9qd-3"})`font-weight:500;${l};${a.d.h200()};color:${a.a.N800};`,h=n.default.div.withConfig({componentId:"sc-183o9qd-4"})`${f}`,y=n.css`${b}{display:inline;}${r.a}{display:inline;position:absolute;}`,O=n.default.div.withConfig({componentId:"sc-183o9qd-5"})`${m} ${y}`,j=(Object(n.default)(O).withConfig({componentId:"sc-183o9qd-6"})`padding:0;`,n.default.div.withConfig({componentId:"sc-183o9qd-7"})`height:${3*i.e}px;margin-left:${.25*i.e}px;margin-right:-${.25*i.e}px;margin-top:-${.5*i.e}px;position:relative;`);n.default.div.withConfig({componentId:"sc-183o9qd-8"})`display:flex;align-items:center;margin-right:${1.25*i.e}px;height:${1.5*i.e}px;`},"./src/packages/issue/fields/components/field-pin/src/assets/pin-unfilled.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n);function i(){return(i=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const r=e=>a.a.createElement("svg",i({},e,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),a.a.createElement("path",{fill:"currentColor",
d:"M3.58176938,7.87928392 L8.11122851,12.4014141 L8.25734637,12.2555315 L8.18428744,12.1825901 C7.49835823,11.4978426 7.49835823,10.387565 8.18428744,9.70273982 L10.299184,7.5911928 C10.8579797,7.03331193 11.6995968,6.9299201 12.363196,7.28100178 L12.563933,7.08062671 L8.9111421,3.43373045 L8.71048291,3.63410553 C9.06208387,4.29665994 8.95852537,5.13692246 8.39972959,5.6948111 L6.28483307,7.80634258 C5.59890386,8.4911678 4.48684425,8.4911678 3.80093838,7.80634258 L3.72787945,7.73340123 L3.58176938,7.87928392 Z M5.48118484,7.00402665 L7.59615917,4.8924874 C7.83821064,4.65079444 7.83821064,4.25893086 7.59615917,4.01723789 L7.45004131,3.87135521 C7.28867366,3.71023174 7.28867366,3.44898677 7.45004131,3.28785554 L8.61890638,2.12084842 C8.78035183,1.95971719 9.04201017,1.95971719 9.20337782,2.12084842 L13.8789159,6.78887687 C14.0403614,6.9500081 14.0403614,7.21125308 13.8789159,7.37238431 L12.7100508,8.53940696 C12.5486832,8.70051489 12.2870249,8.70051489 12.1255794,8.53940696 L11.9794615,8.39352427 C11.7374101,8.1517847 11.3448837,8.1517847 11.1028322,8.39352427 L8.98785786,10.5050169 C8.74580639,10.7467565 8.74580639,11.1385735 8.98785786,11.380313 L9.5723293,11.9638438 C9.73369695,12.1249517 9.73369695,12.3861889 9.5723293,12.5472968 L8.40346423,13.7143583 C8.24201878,13.8754662 7.98036044,13.8754662 7.81899279,13.7143583 L5.48655339,11.3856729 L2.99050556,13.8776413 C2.91355638,13.9544666 2.80936765,13.9978896 2.70054953,13.9985111 L2.4264735,14 C2.20319639,14.0012299 2.01931974,13.8252074 2.01121246,13.6024217 L2.00027307,13.3019562 C1.99610272,13.1873785 2.03985249,13.0762963 2.12104205,12.9951986 L4.60988514,10.5103768 L2.26677088,8.17104929 C2.10537989,8.00994136 2.10537989,7.74862648 2.26677088,7.58752632 L3.4356593,6.42051921 C3.59705028,6.25938797 3.85870862,6.25938797 4.02009961,6.42051921 L4.60454771,7.00402665 C4.8466303,7.24571961 5.23912559,7.24571961 5.48118484,7.00402665 Z"
}));r.displayName="PinUnfilled",t.a=r},"./src/packages/issue/fields/components/field-pin/src/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return E}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/ui/flags/src/services/index.js"),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),l=s("./node_modules/@atlaskit/icon/dist/es2019/components/icon.js"),d=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),u=s("./src/packages/platform/controllers/intl/src/index.js");function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const m=e=>a.a.createElement("svg",p({},e,{
xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),a.a.createElement("path",{fill:"currentColor",
d:"M5.48121736,7.00404408 L7.59617451,4.89248498 C7.83826329,4.65078605 7.83826329,4.2589269 7.59617451,4.01722797 L7.45004745,3.8713518 C7.28862892,3.71022438 7.28862892,3.44898234 7.45004745,3.28784713 L8.61890792,2.12084557 C8.78032645,1.95971814 9.04199766,1.95971814 9.20333816,2.12084557 L13.8789361,6.78886738 C14.0403546,6.94999481 14.0403546,7.21123684 13.8789361,7.37239542 L12.7100756,8.53937361 C12.5486571,8.70053219 12.2869859,8.70053219 12.1255674,8.53937361 L11.9795183,8.39348187 C11.7374295,8.15178294 11.3449227,8.15178294 11.102834,8.39348187 L8.9878534,10.5050565 C8.74576463,10.7467555 8.74576463,11.1385523 8.9878534,11.3802512 L9.57236166,11.9638182 C9.73370217,12.1248989 9.73370217,12.3861487 9.57236166,12.5473073 L8.40342317,13.7142855 C8.24208266,13.8754441 7.98041145,13.8754441 7.81899293,13.7142855 L5.48655377,11.3856258 L2.99050379,13.8776251 C2.91356278,13.9544266 2.8093702,13.9978903 2.70055118,13.9985135 L2.42647516,14 C2.20319644,14.0012397 2.01932444,13.8251258 2.0112106,13.6023547 L2.00027253,13.3019252 C1.99610639,13.187346 2.03985869,13.076272 2.12104386,12.9951864 L4.60989281,10.5103532 L2.26677303,8.17102227 C2.10538571,8.00986368 2.10538571,7.74861386 2.26677303,7.58753317 L3.43565691,6.42050825 C3.59705203,6.25938082 3.85871544,6.25938082 4.02010275,6.42050825 L4.6045486,7.00404408 C4.84663737,7.245743 5.23912858,7.245743 5.48121736,7.00404408 Z"
}));m.displayName="PinFilled";var f=m,b=s("./src/packages/issue/fields/components/field-pin/src/assets/pin-unfilled.js"),g=s("./node_modules/react-intl/lib/index.es.js"),h=Object(g.defineMessages)({pinField:{id:"issue-field-pin.pin-field",defaultMessage:"Pin to top"},unpinField:{id:"issue-field-pin.unpin-field",defaultMessage:"Unpin"},fieldPinned:{id:"issue-field-pin.field-pinned",defaultMessage:"{fieldLabel} pinned to top."},errorTooManyPinnedTitle:{id:"issue-field-pin.error-too-many-pinned-title",defaultMessage:"Too many pinned fields"},errorTooManyPinnedText:{id:"issue-field-pin.error-too-many-pinned-text",defaultMessage:"You've reached the maximum number of fields you can pin in this project. Please unpin a field first, to pin this field to the top"}}),y=s("./src/packages/issue/fields/components/field-pin/src/styled.js");const O=Object(n.memo)((e=>{const{isPinned:t=!1,onClick:s}=e,{formatMessage:n}=Object(u.c)(),i=n(t?h.unpinField:h.pinField),r=t?f:b.a,o=t?y.b:y.c
;return a.a.createElement(y.a,{"data-test-id":"issue-field-pin.field-pin",onClick:s},a.a.createElement(d.a,{content:i},a.a.createElement(o,{className:"issue-details-pin-icon-wrapper"},a.a.createElement(l.b,{label:i,glyph:r}))))}));O.displayName="FieldPin";var j=O,v=s("./src/packages/issue/fields/components/field-pin/src/utils.js");const E=e=>{const{fieldId:t,label:s=""}=e,n=Object(r.g)(),[l,d]=Object(v.c)(n),{createAnalyticsEvent:u}=Object(o.a)(),{showFlag:p}=Object(i.f)();if(!n)return null;const m=Object(v.b)(l,t);return a.a.createElement(j,{onClick:()=>{const e=[...l];let n=-1;m?(n=e.indexOf(t),e.splice(n,1)):e.push(t);const a=d(e);(({isPinned:e,newPinnedFieldLength:t,pinnedFieldPosition:s,setPinSuccess:n,savedFieldIdLength:a})=>{const i={isPinned:e,newPinnedFieldCount:t,pinnedFieldPosition:s,setPinSuccess:n,savedFieldIdLength:a},r=u({action:"clicked",actionSubject:"button",actionSubjectId:"pinnedFieldButton"});Object(c.h)(r,"pinnedFields",i)})({isPinned:!m,
newPinnedFieldLength:e.length,pinnedFieldPosition:m?n:e.indexOf(t),setPinSuccess:a,savedFieldIdLength:Object(v.a)(e).length}),m||p(a?{type:"success",title:[h.fieldPinned,{fieldLabel:s}]}:{title:h.errorTooManyPinnedTitle,description:h.errorTooManyPinnedText,type:"error"})},isPinned:m})};E.displayName="FieldPin"},"./src/packages/issue/fields/components/field-pin/src/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.div.withConfig({componentId:"sc-11c4jgx-0"})`cursor:pointer;margin-left:${.25*i.e}px;flex-shrink:0;`,o=n.default.div.withConfig({componentId:"sc-11c4jgx-1"})`color:${a.a.Y300};&:hover{color:${a.a.Y200};}`,c=n.default.div.withConfig({
componentId:"sc-11c4jgx-2"})`color:${a.a.N80};&:hover{color:${a.a.N800};}`},"./src/packages/issue/fields/components/field-pin/src/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return c}));var n=s("./src/packages/issue/user-preferences-services/src/main.js"),a=s("./src/packages/issue/project-context-service/src/main.js");const i="jira.user.issue.details.pinned-fields",r=(e,t)=>!(!e||!Array.isArray(e||!t))&&e.includes(t),o=e=>0===e.filter((e=>"string"==typeof e&&""!==e)).length?"null":e.join(","),c=e=>{const t=(e=>e?`${i}.${e}`:i)(Object(a.g)(e)),[s,r]=Object(n.b)(t);return[(e=>null==e||""===e||"null"===e?[]:e.trim().split(","))(s),e=>{const t=o(e);return e.length>0?!(t.length>255)&&(r.setValue(t),!0):(r.deleteValue(),!0)}]}},"./src/packages/issue/fields/components/inline-edit/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}))
;var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js");const a=()=>Object(n.b)("issue.details.inline-edit-bump",!1)},"./src/packages/issue/fields/components/inline-edit/src/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const i=n.default.div.withConfig({componentId:"fzg7o6-0"})`margin-left:-${a.e}px;margin-top:-${a.e}px;padding-right:${a.e/2}px;& div[data-read-view-fit-container-width]{width:100%;min-height:32px;${({hasValue:e})=>e?"padding: 0":"padding: 6px 0px"}}`,r=n.default.div.withConfig({componentId:"fzg7o6-1"})`word-break:break-word;position:relative;left:${a.e-2}px;`},"./src/packages/issue/fields/components/inline-edit/src/ui/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return _}))
;var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),a=s("./src/packages/issue/fields/components/inline-edit/src/feature-flags.js"),i=s("./node_modules/react/index.js"),r=s.n(i),o=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=s("./node_modules/@atlaskit/inline-edit--next/dist/es2019/inline-edit.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),p=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js");const m=Object(u.a)("EnterEscapeHandler",{onEnter:"entered",onEscape:"escaped"})(l.a),f=Object(u.a)("EscapeHandler",{onEscape:"escaped"})(l.a),b=Object(u.a)("EnterHandler",{onEnter:"entered"})(l.a),g=o.default.div.withConfig({
componentId:"sc-1ef2pga-0"})`& > form > div > div > button:focus{box-shadow:none;}`,h=o.default.div.withConfig({componentId:"sc-1ef2pga-1"})`margin-top:${d.e}px;`,y=(e,t)=>{const{createAnalyticsEvent:s}=Object(p.a)();return Object(i.useCallback)((()=>{"function"==typeof e&&e(s(t))}),[e,s,t])},O=e=>{const{actionSubject:t="fieldInlineEdit",isEditable:s=!1,isLabelHidden:n=!0,isEditing:a=!1,readView:o,editView:l,onEnter:d,onEscape:u,onConfirm:p,onCancel:O,onEdit:j,onEditRequested:v}=e,E=y(d,{action:"entered",actionSubject:t}),w=y(u,{action:"escaped",actionSubject:t}),k=y(v||j,{action:"focused",actionSubject:t}),C=y(O,{action:"canceled",actionSubject:t}),S=Object(i.useCallback)(((e,s)=>{"function"==typeof p&&p(s.update({action:"confirmed",actionSubject:t}))}),[t,p]),I="function"==typeof o?o:()=>o,T=Object(i.useMemo)((()=>"function"==typeof l?l:()=>l),[l]),_=Object(i.useCallback)(((e,t)=>null===l?null:d&&u?r.a.createElement(m,{onEnter:E,onEscape:w},T(e,t)):d?r.a.createElement(b,{onEnter:E
},T(e,t)):u?r.a.createElement(f,{onEscape:w},T(e,t)):T(e,t)),[l,d,u,E,w,T]),P={defaultValue:"defaultValue"in e?e.defaultValue:e.value,onConfirm:S,readView:I,editView:_,isEditing:a,onCancel:C,onEdit:k,isRequired:e.isRequired,analyticsContext:e.analyticsContext,cancelButtonLabel:e.cancelButtonLabel,confirmButtonLabel:e.confirmButtonLabel,editButtonLabel:e.editButtonLabel,hideActionButtons:"hideActionButtons"in e?e.hideActionButtons:e.areActionButtonsHidden,keepEditViewOpenOnBlur:"keepEditViewOpenOnBlur"in e?e.keepEditViewOpenOnBlur:e.isConfirmOnBlurDisabled,label:!0===n?void 0:e.label,readViewFitContainerWidth:"readViewFitContainerWidth"in e?e.readViewFitContainerWidth:e.isFitContainerWidthReadView,startWithEditViewOpen:e.startWithEditViewOpen,validate:e.validate};return s?r.a.createElement(g,null,r.a.createElement(c.a,P)):r.a.createElement(h,null,I())};var j=Object(i.memo)(O),v=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js")
;const E=["actionSubject","isEditable","isEditing","readView","editView","onEnter","onEscape","onConfirm","onCancel","onEdit"];function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const C=Object(u.a)("EnterEscapeHandler",{onEnter:"entered",onEscape:"escaped"})(l.a),S=Object(u.a)("EscapeHandler",{onEscape:"escaped"})(l.a),I=e=>{
const{actionSubject:t,isEditable:s,isEditing:n=!1,readView:a=null,editView:o=null,onEnter:c,onEscape:l,onConfirm:d,onCancel:u,onEdit:p}=e,m=k(e,E),f=Object(i.useCallback)(((e,s)=>e.update({action:s,actionSubject:t})),[t]),b=Object(i.useCallback)(((e,t)=>{c&&c(f(t,"entered"))}),[c,f]),g=Object(i.useCallback)(((e,t)=>{l&&l(f(t,"escaped"))}),[l,f]),h=Object(i.useCallback)((e=>{p&&p(f(e,"focused"))}),[p,f]),y=Object(i.useCallback)((e=>{d&&d(f(e,"confirmed"))}),[d,f]),O=Object(i.useCallback)((e=>{u&&u(f(e,"canceled"))}),[u,f]),j=Object(i.useCallback)((()=>null===o?null:c?r.a.createElement(C,{onEnter:b,onEscape:g},o):r.a.createElement(S,{onEscape:g},o)),[o,c,b,g]);return r.a.createElement("div",null,r.a.createElement(v.a,w({label:"",isEditing:n,readView:a,editView:!0===s?j():null,onConfirm:y,onCancel:O,onEditRequested:h},m)))};I.displayName="FieldInlineEditStateLess",I.defaultProps={actionSubject:"fieldInlineEdit",disableEditViewFieldBase:!0,isEditable:!1,isEditing:!1,
isConfirmOnBlurDisabled:!1,isCompact:!0,isLabelHidden:!0,shouldConfirmOnEnter:!0};var T=Object(i.memo)(I);const _=Object(n.a)(a.a,j,T)},"./src/packages/issue/fields/components/timestamp/src/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./node_modules/lodash/noop.js"),l=s.n(c),d=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js")),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),p=s("./src/packages/platform/controllers/intl/src/index.js")
;var m=s("./src/packages/issue/user-preferences-services/src/main.js"),f=s("./src/packages/platform/utils/datetime/src/index.js"),b=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),g=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),h=s("./src/packages/platform/services/user/src/main.js");const y=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.span.withConfig({componentId:"sc-6vgjjy-0"})`cursor:${({canSwitchDisplaySetting:e})=>e?"pointer":"default"};${({extraStyles:e})=>e.always};${({canSwitchDisplaySetting:e,extraStyles:{whenDisplaySettingSwitchable:t}})=>e?t:""};`;y.displayName="TimestampWrapper";const O=e=>(e=>(Date.now()-new Date(e))/864e5)(e)<8?"RELATIVE":"ABSOLUTE",j=e=>{
const{value:t,extraStyles:s={},tooltipPosition:r="top"}=e,[{data:c}]=Object(h.b)(),j=(c?c.timeZone:void 0)||Object(f.a)(),v="RELATIVE"===O(t),{createAnalyticsEvent:E}=Object(b.a)(),{formatDate:w}=Object(p.c)(),[k,{setValue:C}]=Object(m.b)("jira.user.issue.details.timestamp-display-setting"),S=o()(k)||""===k?"RELATIVE":k,I=Object(n.useMemo)((()=>w(t,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZone:j})),[w,j,t]),T=Object(n.useCallback)((()=>{const e=E({action:"clicked",actionSubject:"button"});Object(g.h)(e,"absoluteTimeButton"),C("RELATIVE").catch((e=>{u.h.safeErrorWithoutCustomerData("issue.fields.components.timestamp","Failed to set timestamp display to RELATIVE",e)}))}),[E,C]),_=Object(n.useCallback)((()=>{const e=E({action:"clicked",actionSubject:"button"});Object(g.h)(e,"relativeTimeButton"),C("ABSOLUTE").catch((e=>{u.h.safeErrorWithoutCustomerData("issue.fields.components.timestamp","Failed to set timestamp display to ABSOLUTE",e)}))
}),[E,C]),P=Object(n.useCallback)((e=>a.a.createElement(y,{canSwitchDisplaySetting:e,onClick:e?T:l.a,extraStyles:s},I)),[s,I,T]),x=Object(n.useCallback)((()=>a.a.createElement(y,{canSwitchDisplaySetting:!0,onClick:_,extraStyles:s},a.a.createElement(d.a,{tag:"span",content:I,position:r},a.a.createElement(i.FormattedRelative,{value:t})))),[s,I,_,r,t]);return v&&"RELATIVE"===S?x():P(v)};j.displayName="TimestampView";var v=j;t.a=v},"./src/packages/issue/fields/components/user-picker/src/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/debounce.js"),r=s.n(i),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js"),d=s("./node_modules/@atlaskit/user-picker/dist/es2019/components/UserPicker.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),p=s("./src/packages/invite-people-drawer/src/controllers/index.js"),m=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js");const b=()=>Object(f.a)().getVariantValue("invite.from.assign",{default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1}),g=()=>"variation"===b(),h=["displayName"];function y(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){v(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const E={id:"USER_PICKER_EMPTY",name:""
},w=(e,t)=>null!=e&&(null==t||""===t||e.toLowerCase().includes(t.toLowerCase()));class k extends n.Component{constructor(...e){super(...e),this.state={suggestions:[],isDropdownVisible:!0,wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1,query:null},this.wasUnmounted=!1,this.invitePeopleExposeEventFired=!1,this.onChange=e=>{if(!e||Array.isArray(e)||this.isCurrentValue(e))return;const t=e.id,s=this.props.initialOptions.find((e=>e.id===t));s?this.props.onChange(s.id?s:null):"USER_PICKER_EMPTY"===t?this.props.onChange(null):g()&&!0===this.props.enablePeopleInvite&&"__INVITE_PEOPLE_ID__"===t?Object(p.b)("assignee",{createAnalyticsEvent:this.props.createAnalyticsEvent}):this.props.onChange(e)},this.onSuggestionSelect=(e,t)=>{this.setState({suggestions:[],wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1}),this.onChange(Array.isArray(e)?null:e),this.props.onSelection(t)},this.onBlur=()=>{this.setState({suggestions:[],isDropdownVisible:!1,wasFocused:!1,isLoading:!1,
wasQueryCleared:!1}),this.state.wasCleared?this.onSuggestionSelect(E):this.props.onCancel()},this.onFocus=e=>{this.setState({isDropdownVisible:!0,isLoading:!0,wasFocused:!0,wasCleared:!1}),this.requestSuggestions(e)},this.onQueryChange=(e,t)=>{this.setState({wasFocused:!1,isLoading:!0,query:e||"",wasQueryCleared:!e}),this.debouncedRequestSuggestion(t)},this.onClear=()=>{this.setState({wasCleared:!0}),this.onChange(E)},this.getEmptyValue=()=>this.props.emptyOption?j(j({},this.props.emptyOption),{},{id:"USER_PICKER_EMPTY"}):null,this.getInvitePeopleValue=()=>this.props.invitePeopleOption?j(j({},this.props.invitePeopleOption),{},{id:"__INVITE_PEOPLE_ID__"}):null,this.getInitialAndEmptyOptionSuggestions=()=>{const{initialOptions:e,emptyOption:t}=this.props,{wasFocused:s,wasQueryCleared:n}=this.state,a=s&&e.length>0,i=t&&!a&&n,r=this.getEmptyValue();return[...a?e:[],...!0===i&&r?[r]:[]]},this.debouncedRequestSuggestion=r()((e=>this.requestSuggestions(e)),300),this.requestSuggestions=e=>{
const{onDataRequest:t,fetchSuggestions:s}=this.props,{query:n}=this.state;t(null===n);const a=n||"";return s(a,e).then((e=>this.handleSuggestions(e,a))).catch((()=>[]))},this.isMatchingQuery=e=>{const{query:t,isLoading:s}=this.state,{displayName:n,name:a}=e;return!s||w(n,t)||w(a,t)},this.getSuggestions=()=>{const{createAnalyticsEvent:e,enablePeopleInvite:t,fieldId:s}=this.props,{query:n,isLoading:a}=this.state,i=n||"",r=this.getInitialAndEmptyOptionSuggestions(),o=r.map((e=>e.id)),c=this.state.suggestions.filter((e=>!o.includes(e.id)&&this.isMatchingQuery(e))),l=[...r,...c],d=this.getInvitePeopleValue(),p=[];return!a&&!0===t&&d&&i&&l.length<=2&&(this.invitePeopleExposeEventFired||(((e,t,s)=>{if(null==e)return;const n=e({action:"exposed",actionSubject:"feature"}),a={fieldId:t,flagKey:"invite.from.assign",value:b(),userRole:"true"===Object(u.d)("ajs-is-admin")?"admin":"basic",suggestionsCount:s,source:"assigneeField"};Object(m.b)(n,"feature exposed",a)})(e,s,l.length),
this.invitePeopleExposeEventFired=!0),g()&&(((e,t,s)=>{if(null==e)return;const n=e({action:"rendered",actionSubject:"inviteItem"}),a={fieldId:t,userRole:"true"===Object(u.d)("ajs-is-admin")?"admin":"basic",suggestionsCount:s,source:"assigneeField"};Object(m.h)(n,"inviteItem rendered",a)})(e,s,l.length),p.push(d))),[...l,...p].map((e=>{const{displayName:t}=e,s=y(e,h);return t?j(j({},s),{},{publicName:t}):s}))},this.handleSuggestions=(e,t)=>{const{isDropdownVisible:s,query:n}=this.state,a=t===(n||"");if(this.wasUnmounted||!s||!a)return;const i=this.state.wasFocused?e.filter((e=>!this.isCurrentValue(e))):e;this.setState({isLoading:!1,suggestions:i}),this.props.onDataLoaded(null===n,i.length)}}componentWillUnmount(){this.wasUnmounted=!0,this.debouncedRequestSuggestion.cancel()}isCurrentValue(e){return e?this.props.value?e.id===this.props.value.id:"USER_PICKER_EMPTY"===e.id:null===this.props.value}render(){const e=this.getSuggestions(),t=this.props.value||this.getEmptyValue()
;return a.a.createElement(d.a,{value:t,options:e,open:this.state.isDropdownVisible,fieldId:this.props.fieldId,menuMinWidth:this.props.menuMinWidth,menuPortalTarget:this.props.portalElement,width:this.props.width,appearance:"compact",isClearable:!!this.props.value,isDisabled:this.props.isDisabled,placeholder:this.props.placeholder,isLoading:this.state.isLoading&&this.state.isDropdownVisible,onBlur:this.onBlur,onClear:this.onClear,onFocus:this.onFocus,onInputChange:this.onQueryChange,onSelection:this.onSuggestionSelect})}}k.displayName="UserPickerView",k.displayName="UserPickerView",k.defaultProps={isDisabled:!1,value:null,initialOptions:[],emptyOption:null,invitePeopleOption:null,enablePeopleInvite:!1,width:void 0,menuMinWidth:void 0,portalElement:void 0,fetchSuggestions:()=>Promise.resolve([]),onChange:c.a,onCancel:c.a,onSelection:c.a,onDataRequest:c.a,onDataLoaded:c.a};t.a=Object(l.a)()(k)},
"./src/packages/issue/fields/date-time/src/services/use-date-time-field/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s("./node_modules/react/index.js"),s("./node_modules/react-magnetic-di/lib/esm/index.js");var n=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),a=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const i=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:i})=>{var r;const[{value:o}]=Object(n.a)(e,t),c=null!==(r=null==o?void 0:o.schema.type)&&void 0!==r?r:"datetime",[{loading:l,value:d,error:u},{saveValue:p,resetError:m}]=Object(a.a)({fieldKey:t,issueKey:e,fieldType:c,initialValue:null,onSuccess:s,onFailure:i});return[{loading:l,value:d,error:u,fieldConfig:o},{saveValue:p,resetError:m}]}},"./src/packages/issue/fields/date-time/src/ui/edit/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,"DateTimeFieldEditView",(function(){return g}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/isNaN.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DateTimePicker.js")),c=s("./src/packages/platform/utils/constants/src/datetimepicker-available-times.js"),l=s("./src/packages/compatibility/src/main.js"),d=s("./src/packages/issue/format-date/src/common/utils.js"),u=s("./src/packages/platform/services/user-current/src/main.js"),p=s("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js"),m=s("./node_modules/moment-timezone/index.js"),f=s.n(m);const b=(e,t,s,n)=>{const a=f.a.tz(e,n);return a.isValid()&&null!=e&&""!==e?{dateValue:a.format("YYYY-MM-DD"),timeValue:a.format("HH:mm"),zoneValue:a.format("ZZ")}:{dateValue:t,timeValue:s,zoneValue:f()().tz(n).format("ZZ")}},g=({autoFocus:e,isDisabled:t,isInvalid:s,timeZone:i,onParseValue:m=b,value:f,onChange:g,datePickerSelectProps:h={}})=>{
const y=Object(p.a)(),{data:{user:{timeZone:O=null}}}=Object(u.a)(),j=void 0!==i?i:O,v=Object(n.useCallback)((e=>{const t=Object(l.a)(null!=e?e:"");r()(Date.parse(t))?null==g||g(null):null==g||g(t)}),[g]),E=Object(n.useCallback)(((e,t,s,n)=>m(e,t,s,null!=j?j:n)),[m,j]),w=Object(d.a)(y);return a.a.createElement(o.a,{locale:w,autoFocus:e,defaultIsOpen:!1,isDisabled:t,isInvalid:s,value:f||"",onChange:v,timeIsEditable:!0,parseValue:null!=j?E:void 0,timePickerSelectProps:{formatCreateLabel:e=>e,filterOption:(e,t)=>!t||e.value===t||e.label===t},times:c.a,datePickerSelectProps:h})};g.displayName="DateTimeFieldEditView"},"./src/packages/issue/fields/date-time/src/ui/main.js":function(e,t,s){"use strict";s.r(t),s.d(t,"ACTION_SUBJECT",(function(){return O})),s.d(t,"DateTimeField",(function(){return j}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/utils/types/src/general.js")),r=s("./src/packages/issue/fields/components/error-flag/src/main.js"),o=s("./src/packages/issue/fields/components/inline-edit/src/styled.js"),c=s("./src/packages/issue/fields/components/inline-edit/src/ui/index.js"),l=s("./src/packages/issue/fields/components/inline-edit/src/feature-flags.js"),d=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),u=s("./src/packages/issue/fields/date-time/src/services/use-date-time-field/index.js"),p=s("./src/packages/issue/fields/date-time/src/ui/edit/index.js"),m=s("./node_modules/react-intl/lib/index.es.js"),f=Object(m.defineMessages)({errorTitle:{id:"issue-field-date-time.error-title",defaultMessage:"We couldn't set the date"},errorMessage:{id:"issue-field-date-time.error-message",defaultMessage:"Check your connection, then give it another try."}}),b=s("./src/packages/issue/fields/date-time/src/ui/view/index.js")
;const g=["fieldKey","issueKey","timeZone","isEditing","onFormatDateTime","onParseValue","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText"];function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const O="dateTimeFieldInlineEdit",j=e=>{var t
;let{fieldKey:s,issueKey:m,timeZone:j,isEditing:v,onFormatDateTime:E,onParseValue:w,onCancel:k,onEdit:C,onEscape:S,onConfirm:I,onEnter:T,onUpdate:_,readView:P,editView:x,noValueText:D}=e,A=y(e,g);const[M,L]=Object(n.useState)(!1),R=Object(n.useCallback)((e=>{null==_||_(e),L(!1)}),[_]),[{value:N,error:F,fieldConfig:U},{saveValue:V,resetError:K}]=Object(u.a)({issueKey:Object(i.m)(m),fieldKey:s,onSuccess:R}),[$,W]=Object(n.useState)(N),B=null!==(t=null==U?void 0:U.isEditable)&&void 0!==t&&t;Object(n.useEffect)((()=>{F&&L(!0),M||W(N)}),[F,M,N]);const H=Object(n.useCallback)((e=>{$!==N?V($,null,e):L(!1),Object(d.h)(e)}),[V,$,N]),G=Object(n.useCallback)((e=>{K(),L(!1),W(N),Object(d.h)(e)}),[K,N]),q=Object(n.useCallback)((e=>{G(e),null==k||k(e)}),[k,G]),z=Object(n.useCallback)((e=>{H(e),null==I||I(e)}),[I,H]),Y=Object(n.useCallback)((e=>{L(!0),Object(d.h)(e),null==C||C(e)}),[C]),Q=Object(n.useCallback)((e=>{G(e),null==S||S(e)}),[S,G]),J=Object(n.useCallback)((e=>{K(),W(e)
}),[K,W]),Z=()=>void 0!==P?P:a.a.createElement(b.DateTimeFieldReadView,{timeZone:j,value:N,noValueText:D,onFormatDateTime:E}),X=a.a.createElement(o.b,null,Z()),ee=()=>void 0!==x?x:a.a.createElement(p.DateTimeFieldEditView,{value:$,onChange:J,isInvalid:!!F,onParseValue:w,timeZone:j});return a.a.createElement(a.a.Fragment,null,null!=F&&a.a.createElement(r.a,{error:F,title:f.errorTitle,description:f.errorMessage}),Object(l.a)()?a.a.createElement(o.a,{isEditing:M},a.a.createElement(c.a,h({areActionButtonsHidden:!0,actionSubject:O,isEditable:B,isEditing:null!=v?v:M,readView:X,editView:B?ee():null,onCancel:q,onConfirm:z,onEdit:Y,onEscape:Q},A))):a.a.createElement(c.a,h({areActionButtonsHidden:!0,actionSubject:O,isEditable:B,isEditing:null!=v?v:M,readView:Z(),editView:B?ee():null,onCancel:q,onConfirm:z,onEdit:Y,onEscape:Q},A)))}},"./src/packages/issue/fields/date-time/src/ui/view/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,"DateTimeFieldReadView",(function(){return p}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/controllers/intl/src/index.js")),r=s("./src/packages/issue/format-date/src/main.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=Object(o.defineMessages)({defaultNoValueText:{id:"issue-field-date-time.default-no-value-text",defaultMessage:"None"}}),l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const u=l.default.span.withConfig({componentId:"vag4j7-0"})`color:${d.a.N200};`,p=({timeZone:e,value:t,noValueText:s,onFormatDateTime:n})=>{const{formatMessage:o}=Object(i.c)(),{formatDateTime:l}=Object(r.a)(e);return null==t||""===t?a.a.createElement(u,null,null!=s?s:o(c.defaultNoValueText)):n?n(t):l(t)}},"./src/packages/issue/fields/field-base/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i})),
s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return c}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const a=()=>Object(n.b)("jsw.nextgen.search-field.changeboarding-board",!1),i=()=>Object(n.b)("jsw.nextgen.search-field.changeboarding",!1),r=()=>Object(n.b)("issue.details.field-config-consolidated",!1),o=()=>Object(n.b)("issue.details.use-edit-field-is-mounted-set-state",!1),c=()=>Object(n.b)("issue.details.bento-10304-use-edit-field-backwards-compatible-legacy-events",!1)},"./src/packages/issue/fields/field-base/src/services/custom-field-key-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"));const i=(e,t)=>{const[{value:s}]=Object(a.c)(e)
;return Object(n.useMemo)((()=>s&&Object.keys(s).filter((e=>s[e].schema.custom===t))||[]),[s,t])}},"./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return O}))
;var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),l=s("./src/packages/issue/issue-view-legacy-events/src/services/legacy-events/main.js"),d=s("./src/packages/platform/utils/react-hooks/use-is-mounted/src/common/utils/index.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),p=s("./src/packages/issue/fields/field-base/src/feature-flags.js"),m=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),f=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/utils.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const y=e=>{const{issueKey:t,fieldKey:s,fieldType:a,initialValue:l,saveField:b=f.c,addValuesToField:g=f.a,removeValuesFromField:h=f.b,onSubmit:y=i.a,onSuccess:O=i.a,onFailure:j=i.a}=e,v=Object(p.d)()?Object(d.a)():Object(n.useRef)(!0),[E,{setFieldValue:w}]=Object(m.b)({issueKey:t,fieldKey:s}),k=void 0!==E?E:l,[C,S]=Object(n.useState)(null),[I,T]=Object(n.useState)(!1),_=Object(p.d)()?Object(n.useCallback)((()=>{v.current&&S(null)
}),[S,v]):Object(n.useCallback)((()=>S(null)),[S]),P=Object(n.useCallback)((async(e,n,i,l,d,m)=>{const b={editOperationType:n,fieldKey:s,fieldType:a,isBoardSearchFieldChangeboardingEnabled:Object(p.b)(),isBacklogSearchFieldChangeboardingEnabled:Object(p.a)()},g=Object(f.d)(Object(o.i)(s)(s),Object(o.i)(a)(a));Object(p.d)()?v.current&&(T(!0),S(null)):(T(!0),S(null));try{y(k,i,d,m),w(t,s,l),await e(t,s,i,""),O(i),g.stop(),Object(u.f)(m,"field updated",b),Object(u.b)(m,"field updateSucceeded",b)}catch(h){j(h,i),w(t,s,k),Object(p.d)()?v.current&&S(h):S(h);const e=h instanceof c.a;e||o.h.safeErrorWithoutCustomerData("issue-field.save-value",`Failed to update field ${s} of type ${a}`,new r.a({event:h,type:"update",category:"issue",app:"issue-field",eventNameSuffix:"issue.error"})),g.cancel(),Object(u.b)(m,"field updateFailed",{fieldKey:s,fieldType:a,isValidationError:e,isClientFetchError:Object(c.c)(h)})}Object(p.d)()?v.current&&T(!1):T(!1)
}),[s,a,y,k,w,v,t,"",O,j]),x=Object(n.useCallback)((async(e,t,s)=>{await P(b,"set",e,e,t,s)}),[P,b]),D=Object(n.useCallback)((async(e,t,s,n)=>{await P(g,"add",e,t,s,n)}),[P,g]),A=Object(n.useCallback)((async(e,t,s,n)=>{await P(h,"remove",e,t,s,n)}),[P,h]);return[{value:k,loading:I,error:C},{saveValue:x,addValues:D,removeValues:A,resetError:_}]},O=e=>Object(p.e)()?(e=>{const{fieldKey:t,issueId:s,onSubmit:a=i.a,onSuccess:r=i.a,onFailure:o=i.a}=e,[,{fieldChanged:c,fieldChangeFailed:d,fieldChangeRequested:u}]=Object(l.a)(),p=Object(n.useCallback)(((e,n,i,r)=>{a(e,n,i,r),s&&u(s,t,n)}),[u,t,s,a]),m=Object(n.useCallback)((e=>{r(e),s&&c(s,t,e)}),[c,t,s,r]),f=Object(n.useCallback)(((e,n)=>{o(e,n),s&&d(s,t)}),[d,t,s,o]);return y(g(g({},e),{},{onSubmit:p,onSuccess:m,onFailure:f}))})(e):y(e)},"./src/packages/issue/fields/field-base/src/services/edit-field-service/utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){
return c})),s.d(t,"d",(function(){return l}));var n=s("./src/packages/platform/observability/browser-metrics/src/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const i=(e,t)=>({fields:{[e]:t}}),r=async(e,t,s,n)=>Object(a.e)(`${n}/rest/api/3/issue/${e}/`,{body:JSON.stringify(i(t,s))}),o=async(e,t,s,n)=>{const i={update:{[t]:[{operation:"add",value:s}]}};return Object(a.e)(`${n}/rest/api/3/issue/${e}/`,{body:JSON.stringify(i)})},c=async(e,t,s,n)=>{const i={update:{[t]:[{operation:"remove",value:s}]}};return Object(a.e)(`${n}/rest/api/3/issue/${e}/`,{body:JSON.stringify(i)})},l=(e,t)=>{const s=Object(n.b)(),a={key:"issue-field.save-value",reporters:[()=>({fieldKey:e,fieldType:t})]};return s.start(a),{stop:()=>s.stop(a),cancel:()=>s.cancel(a.key)}}},"./src/packages/issue/fields/field-base/src/services/field-config-service/context.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return f})),s.d(t,"a",(function(){return g})),s.d(t,"b",(function(){return h
}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/merge.js"),i=s.n(a),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u={setIssueConfig:(e,t)=>({setState:s})=>{s({[e]:t})},
setIssuesConfig:e=>({setState:t})=>{t(e.reduce(((e,t)=>l(l({},e),t)),{}))},mergeIssueConfig:(e,t)=>({setState:s,getState:n})=>{s({[e]:i()({},n()[e],t)})},mergeIssuesConfig:e=>({setState:t,getState:s})=>{const n=e.reduce(((e,t)=>l(l({},e),t)),{});t(i()({},s(),n))}},p=Object(r.a)({name:"issue-field-config",initialState:{},actions:u}),m=Object(n.createSelector)(((e,t)=>e[t.issueKey]),(e=>e)),f=Object(o.a)(p,{selector:m}),b=Object(n.createSelector)(((e,t)=>e[t.issueKey]),((e,t)=>t.fieldKey),((e,t)=>null==e?e:e[t]?e[t]:null)),g=Object(o.a)(p,{selector:b}),h=Object(o.a)(p,{selector:null})},"./src/packages/issue/fields/field-base/src/services/field-config-service/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return f})),s.d(t,"a",(function(){return g})),s.d(t,"b",(function(){return h}))
;var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),i=s("./src/packages/issue/fields/field-base/src/feature-flags.js"),r=s("./src/packages/issue/fields/field-base/src/services/field-config-service/context.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const d=()=>'\n  query fieldConfigurationQuery($issueKey: String) {\n    issue(issueIdOrKey: $issueKey, latestVersion: true, screen: "view") {\n      fields {\n        key\n        schema {\n          type\n          custom\n          customId\n          system\n          renderer\n        }\n        autoCompleteUrl\n        allowedValues\n        operations\n        required\n        editable\n        title\n      }\n    }\n  }',u=async e=>{const t=await Object(a.d)("/rest/graphql/1/",{body:JSON.stringify({query:d(),variables:{issueKey:e}})});return t&&t.data&&t.data.issue&&t.data.issue.fields?t.data.issue.fields.reduce(((e,t)=>c(c({},e),{},{[t.key]:{autoCompleteUrl:t.autoCompleteUrl,allowedValues:t.allowedValues,isEditable:t.editable,isRequired:t.required,schema:t.schema,title:t.title}})),{}):null},p=new Set,m=(()=>{const e=new Set;return t=>{const[s,{setIssueConfig:a}]=Object(r.c)({issueKey:t}),[i,o]=Object(n.useState)(!e.has(t)&&void 0===s),c=Object(n.useCallback)((async()=>{o(!0),
e.add(t);const s=await u(t);a(t,s),e.delete(t),o(!1)}),[t,a]);return Object(n.useEffect)((()=>{void 0===s&&c()}),[t,s,c]),[{value:s,loading:i}]}})(),f=e=>Object(i.c)()?(e=>{const[t,{setIssueConfig:s}]=Object(r.c)({issueKey:e}),[a,i]=Object(n.useState)(!p.has(e)&&void 0===t),o=Object(n.useCallback)((async()=>{i(!0),p.add(e);const t=await u(e);s(e,t),p.delete(e),i(!1)}),[e,s]);return Object(n.useEffect)((()=>{void 0!==t||p.has(e)||o()}),[e,t,o]),[{value:t,loading:a}]})(e):m(e),b=(()=>{const e=new Set;return(t,s)=>{const[a,{setIssueConfig:i}]=Object(r.a)({issueKey:t,fieldKey:s}),[o,c]=Object(n.useState)(!e.has(t)&&void 0===a),l=Object(n.useCallback)((async()=>{c(!0),e.add(t);const s=await u(t);i(t,s),e.delete(t),c(!1)}),[t,i,c]);return Object(n.useEffect)((()=>{void 0!==a||e.has(t)||l()}),[t,a,l]),[{value:a,loading:o}]}})(),g=(e,t)=>Object(i.c)()?((e,t)=>{const[{value:s,loading:n}]=f(e);if(null==s)return[{value:s,loading:n}];const a=s[t];return a?[{value:a,loading:n}]:[{value:null,
loading:n}]})(e,t):b(e,t),h=()=>{const[,e]=Object(r.b)();return[null,Object(n.useMemo)((()=>({setIssueConfig:(t,s)=>e.setIssueConfig(t,s),setIssuesConfig:t=>e.setIssuesConfig(t),mergeIssueConfig:(t,s)=>e.mergeIssueConfig(t,s),mergeIssuesConfig:t=>e.mergeIssuesConfig(t)})),[e])]}},"./src/packages/issue/fields/field-base/src/services/field-flags-service/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/utils/fetch/src/utils/errors.js")),i=s("./src/packages/platform/ui/flags/src/services/index.js");const r=()=>{const{showFlag:e}=Object(i.f)();return{onSuccess:Object(n.useCallback)(((t,s)=>{e({type:"success",title:t,description:s})}),[e]),onFailure:Object(n.useCallback)(((t,s)=>{e({type:"error",title:t,description:s})}),[e])}},o=()=>{const{showFlag:e}=Object(i.f)();return{
onSuccess:Object(n.useCallback)((({title:t,description:s})=>{e({type:"success",title:t,description:s})}),[e]),onFailure:Object(n.useCallback)((({error:t,title:s,description:n})=>{if(t instanceof a.a){const a=((e,t)=>{var s;const n=e.message||(null===(s=e.errors[0])||void 0===s?void 0:s.error);return n?{id:"field-flags-service.server-validation-error-message",defaultMessage:n}:t})(t,n);e({type:"warning",title:s,description:a})}else e({type:"error",title:s,description:n})}),[e])}}},"./src/packages/issue/fields/field-base/src/services/field-value-service/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return b})),s.d(t,"d",(function(){return g})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return y})),s.d(t,"e",(function(){return j}))
;var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/merge.js"),i=s.n(a),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p={
setFieldValue:(e,t,s)=>({setState:n,getState:a})=>{n({[e]:d(d({},a()[e]),{},{[t]:s})})},getFieldValue:(e,t)=>({getState:s})=>s()[e]&&s()[e][t],setIssue:(e,t)=>({setState:s})=>{s({[e]:t})},mergeIssue:(e,t)=>({setState:s,getState:n})=>{s({[e]:i()({},n()[e],t)})},setIssues:e=>({setState:t})=>{const s={};e.forEach((e=>{Object.assign(s,e)})),t(s)},mergeIssues:e=>({setState:t,getState:s})=>{const n={};e.forEach((e=>{Object.assign(n,e)})),t(i()({},s(),n))}},m=Object(r.a)({name:"issue-fields",initialState:{},actions:p}),f=(e,{issueKey:t,fieldKey:s})=>e[t]&&e[t][s],b=Object(o.a)(m,{selector:f}),g=Object(o.a)(m,{selector:(e,t)=>e[t]}),h=Object(o.a)(m,{selector:(e,{issueKeys:t,fieldKey:s})=>(t||[]).map((t=>f(e,{fieldKey:s,issueKey:t})))}),y=Object(c.a)(m,{selector:f}),O=Object(o.a)(m,{selector:null}),j=()=>{const[,e]=O();return[null,Object(n.useMemo)((()=>({setIssue:(t,s)=>e.setIssue(t,s),setFieldValue:(t,s,n)=>e.setFieldValue(t,s,n),getFieldValue:(t,s)=>e.getFieldValue(t,s),
mergeIssue:(t,s)=>e.mergeIssue(t,s),setIssues:t=>e.setIssues(t),mergeIssues:t=>e.mergeIssues(t)})),[e])]}},"./src/packages/issue/fields/flagged/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));s("./node_modules/react-magnetic-di/lib/esm/index.js");var n=s("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js"),a=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),i=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),r=s("./src/packages/issue/fields/flagged/src/services/utils.js");const o=(e,t,s,a)=>((e,t,s)=>Object(n.a)((e=>`${e}/rest/greenhopper/1.0/xboard/issue/flag/flag.json`)(e),{method:"POST",body:JSON.stringify({flag:s,issueKeys:[t],commentVisibility:"",comment:""})}).toPromise().then((()=>{})))(a,e,Object(r.a)(s)),c=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:n})=>{const[r]=Object(a.a)(e,t),[{value:c,error:l},{saveValue:d,resetError:u}]=Object(i.a)({fieldKey:t,
issueKey:e,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:flagged",initialValue:null,saveField:o,onSuccess:s,onFailure:n});return[{value:c,error:l,fieldConfig:r},{saveValue:d,resetError:u}]}},"./src/packages/issue/fields/flagged/src/services/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=e=>!!e&&e.length>0,a=e=>e?[{value:!0}]:null},"./src/packages/issue/fields/issue-type/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js")),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,onSuccess:t,onFailure:s})=>{
const[{value:n}]=Object(i.a)(e,"issuetype"),o=a()(n,"schema.type","issuetype"),[{value:c,error:l,loading:d},{saveValue:u,resetError:p}]=Object(r.a)({fieldKey:"issuetype",issueKey:e,fieldType:o,initialValue:null,onSuccess:t,onFailure:s});return[{value:c,error:l,fieldConfig:n,loading:d},{saveValue:u,resetError:p}]}},"./src/packages/issue/fields/labels/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i}));const n=e=>e?e.map((e=>({value:e,label:e}))):[],a=e=>e.map((({value:e})=>e)),i=e=>{const{suggestions:t}=e;return t?t.map((({label:e})=>({label:e,value:e}))):[]}},"./src/packages/issue/fields/labels/src/services/suggestions/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l}));var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js")),i=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),r=s("./src/packages/issue/analytics/src/services/suggestions/index.js"),o=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js");const c=async(e,t,s)=>{let n=`${e}${encodeURIComponent(t)}`;return null!=s&&(n=`${n}&sessionId=${s}`),Object(i.b)(n)},l=e=>{const{fieldId:t,getSuggestions:s=c}=e,[i,l]=Object(n.useState)(!1),{createAnalyticsEvent:d}=Object(o.a)(),u=Object(n.useCallback)((async(e,n,i)=>{const o=a.d.now(),c=n.length;try{const a=await s(e,n,i);return"labels"===t&&Object(r.b)("labels",o,d,{sessionId:i,queryLength:c}),l(!1),a}catch(u){throw"labels"===t&&Object(r.a)("labels",o,d,{sessionId:i}),l(!1),u}}),[d,t,s,l]);return[{isLoadingSuggestions:i},Object(n.useMemo)((()=>({getLabelsSuggestions:u,setIsLoadingSuggestions:l})),[u,l])]}},"./src/packages/issue/fields/labels/src/ui/edit/main.js":function(e,t,s){
"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/debounce.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/uuid/index.js")),c=s.n(o),l=s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js"),d=s("./src/packages/platform/controllers/intl/src/index.js"),u=s("./src/packages/issue/base-components/base-select/src/ui/styled.js"),p=s("./src/packages/issue/base-components/base-select/src/ui/utils.js"),m=s("./src/packages/platform/ui/smart-select-with-context/src/main.js"),f=s("./src/packages/issue/fields/labels/src/common/utils.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js")
;var g=s("./src/packages/issue/fields/labels/src/services/suggestions/main.js"),h=s("./node_modules/lodash/isNil.js"),y=s.n(h),O=s("./src/packages/platform/observability/analytics-legacy-gasv2-utils/src/hash-attribute.js"),j=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),v=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),E=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),w=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),k=s("./node_modules/lodash/flatMap.js"),C=s.n(k);const S=e=>Object(O.a)(e.toString()).toString(),I=e=>e.filter((e=>e.value)).map((({value:e})=>S(e))),T=e=>C()(e.map((e=>e.options))),_=e=>e.filter((e=>e.value)).map((({value:e})=>null!=e?`${e}`.length:0));function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function D(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach((function(t){A(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function A(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const M=Object(v.a)("select",{onChange:"valueChanged",onInputChange:"inputChanged",onMenuOpen:"menuOpened",onMenuClose:"menuClosed"})(l.a),L=e=>{
const{fieldId:t,isLoading:s,onChange:i,onInputChange:r,options:o,value:l,sessionId:d}=e,u=Object(n.useRef)(!0),p=Object(n.useRef)(d),m=Object(n.useRef)(0),[f,b]=Object(n.useState)(T(o)),[g,h]=Object(n.useState)(""),[v,k]=Object(n.useState)(""),{createAnalyticsEvent:C}=Object(E.a)(),x=Object(n.useCallback)((e=>{const n=y()(l)?[]:l;let a=((e,t)=>e.filter((e=>"string"==typeof e.value&&e.value.toLowerCase().includes((t||"").toLowerCase())||"string"==typeof e.label&&e.label.toLowerCase().includes((t||"").toLowerCase()))))(f,e);const i=a.length;a=a.slice(0,20);const r=I(a);return{fieldId:t,isLoading:s,optionsLength:i,componentName:"select",packageName:"@atlaskit/select",optionValuesSafeForAnalytics:!1,options:r,optionsLengths:_(a),queryLength:e.length,queryHash:""===e?e:Object(O.a)(e),selectedOptions:I(n),selectedOptionsLengths:_(n),sessionId:p.current,truncationSize:20}}),[t,f,s,p,l]),A=Object(n.useCallback)((e=>{const t=[];return f.forEach(((s,n)=>{s.value===e.value&&t.push(n)})),
t.length>0?t[0]:-1}),[f]),L=Object(n.useCallback)(((e,t,s)=>{const n=D(D({},x(t)),s);Object(w.h)(e,n)}),[x]),R=Object(n.useCallback)(((e,t,s,n)=>{const a=D(D({},x(v)),n);Object(w.f)(e,`${s} ${t}`,a)}),[x,v]),N=Object(n.useCallback)((()=>{void 0===p.current&&(p.current=c.a.v4()),m.current=j.d.now(),R(C({action:"started"}),"started","optionSelectionSession")}),[C,R,p,m]),F=Object(n.useCallback)((()=>{if(void 0!==p.current){const e=m.current,t=0===e?j.d.now()-e:0;R(C({action:"ended"}),"ended","optionSelectionSession",{elapsedTime:t})}p.current=void 0,m.current=0}),[C,R,p,m]),U=Object(n.useCallback)((()=>{F(),N()}),[F,N]),V=Object(n.useCallback)(((e,t,s)=>{"set-value"===t.action&&h(v),k(e),s.update({action:"changed",actionSubject:"filter"}),L(s,e)}),[L,v,k,h]),K=Object(n.useCallback)((e=>{e.update({action:"loaded",actionSubject:"options"}),L(e,v)}),[L,v]),$=Object(n.useCallback)(((e,t)=>{t.update({action:"created",actionSubject:"option"});const s=p.current;U(),L(t,g,{
selectedOption:S(e.value),sessionId:s})}),[L,g,U,p]),W=Object(n.useCallback)(((e,t)=>{t.update({action:"removed",actionSubject:"option"}),L(t,v,{removedItem:e?S(e.value):void 0})}),[L,v]),B=Object(n.useCallback)(((e,t)=>{t.update({action:"changed",actionSubject:"option"});const s=p.current;U(),L(t,g,{selectedOption:S(e.value),selectedOptionLength:null!==e.value?`${e.value}`.length:0,selectedOrder:A(e),sessionId:s})}),[L,A,g,U,p]),H=Object(n.useCallback)(((e,t,s)=>{const n=Array.isArray(e)?e[e.length-1]:e;switch(t.action){case"create-option":null!==n&&$(n,s);break;case"remove-value":case"pop-value":case"deselect-option":W(t.removedValue||t.option,s);break;case"select-option":null!==n&&B(n,s)}i&&i(e,t)}),[$,W,B,i]),G=Object(n.useCallback)(((e,t,s)=>{"input-change"!==t.action&&"set-value"!==t.action||V(e,t,s),r(e,p.current)}),[V,r,p]);return Object(n.useEffect)((()=>(N(),V("",{action:"fake-action"},C({})),()=>{F()})),[]),Object(n.useEffect)((()=>{b(T(o)),u.current?u.current=!1:K(C({}))
}),[o]),a.a.createElement(M,P({},e,{onChange:H,onInputChange:G}))};L.displayName="CreatableSelectWithAnalyticsView";var R=L,N=s("./node_modules/react-intl/lib/index.es.js"),F=Object(N.defineMessages)({empty:{id:"issue-field-labels.edit.empty",defaultMessage:"No matches found"},failedFetch:{id:"issue-field-labels.edit.failed-fetch",defaultMessage:"Search failed. Please try again."},placeholder:{id:"issue-field-labels.edit.placeholder",defaultMessage:"Select label"},createNewItem:{id:"issue-field-labels.edit.create-new-item",defaultMessage:"New label"},loading:{id:"issue-field-labels.edit.loading",defaultMessage:"Searching..."},recent:{id:"issue-field-labels.edit.recent",defaultMessage:"Recent labels"},all:{id:"issue-field-labels.edit.all",defaultMessage:"All labels"}});function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
const V=Object(m.a)(l.a),K=e=>{const{autoCompleteUrl:t,autoFocus:s,onChange:i,onFocus:o,onBlur:l,spacing:m,value:h,options:y,cachedOptions:O=[],formatCreateLabel:j,noOptionsMessage:v,loadingMessage:E,onCloseMenuOnScroll:w,isDropdownMenuFixedAndLayered:k,issueId:C,projectId:S,getSuggestions:I,fetchSuggestionsOnMount:T=!0,fieldId:_="labels",isInvalid:P=!1,smartRank:x=!1,menuPosition:D}=e,[A,M]=Object(n.useState)(!1),[L,N]=Object(n.useState)(),[K,$]=Object(n.useState)(),[W,B]=Object(n.useState)(!1),H=Object(n.useRef)(""),G=Object(n.useRef)(c.a.v4()),{formatMessage:q}=Object(d.c)(),[{isLoadingSuggestions:z},{getLabelsSuggestions:Y,setIsLoadingSuggestions:Q}]=Object(g.b)({fieldId:_,getSuggestions:I}),J=Object(n.useCallback)((()=>a.a.createElement(u.b,null,q(F.failedFetch))),[q]),Z=Object(n.useCallback)((async(e="")=>{try{const s=await Y(t,e,G.current);if(Q(!1),H.current===e){const t=Object(f.c)(s);N(t),""===e&&$(t)}}catch(s){Q(!1),B(!0),N([{label:J(),value:"",isDisabled:!0}])}
}),[t,J,Y,H,G,B,Q]);Object(n.useMemo)((()=>{T&&(y||K?y&&!K?($(y),N(y)):(H.current="",Q(!0),Z()):(Q(!0),Z()))}),[]);const X=Object(n.useMemo)((()=>[{label:q(F.recent),options:O},{label:q(F.all),options:L||[]}]),[O,q,L]),ee=Object(n.useCallback)(r()(Z,300),[]),te=Object(n.useCallback)((e=>`${e} (${void 0!==j?j:q(F.createNewItem)})`),[j,q]),se=Object(n.useCallback)((()=>void 0!==v?v:q(F.empty)),[q,v]),ne=Object(n.useCallback)((()=>void 0!==E?E:q(F.loading)),[q,E]),ae=Object(n.useCallback)(((e,t)=>!!W||Object(p.a)(e,t||"")),[W]),ie=Object(n.useCallback)((e=>{ee.cancel(),B(!1),e?(H.current=e,Q(!0),ee(e)):(H.current="",Q(!1),N(K))}),[ee,K,Q,N]),re=Object(n.useCallback)((e=>{M(!0),!1===T&&(Q(!0),Z("")),o&&o(e)}),[T,Z,o,Q,M]),oe=Object(n.useCallback)((e=>{M(!1),l&&l(e)}),[l]),ce=(()=>Object(b.b)("issue.details.extracted-field.labels.with-smarts-hoc",!1))(),le=ce?V:R,de=ce?{issueId:C,projectId:S,smartRank:x}:{};let ue
;return ue=(()=>Object(b.b)("issue.details.dot-dialog-fields-milestone-1",!1))()&&"string"==typeof D?D:!0===k?"fixed":void 0,a.a.createElement(le,U({isMulti:!0,autoFocus:s,fieldId:_,options:X,value:h,menuIsOpen:A,onBlur:oe,menuPosition:ue,styles:!0===k?u.f:void 0,onFocus:re,noOptionsMessage:se,closeMenuOnScroll:w,loadingMessage:ne,placeholder:q(F.placeholder),onInputChange:ie,onChange:i,spacing:m,isLoading:A&&z,filterOption:ae,formatCreateLabel:te,validationState:!0===P?"error":null,sessionId:G.current},de))};K.displayName="LabelsEdit";t.a=K},"./src/packages/issue/fields/labels/src/ui/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/get.js"),r=s.n(i),o=s("./node_modules/lodash/isEqual.js"),c=s.n(o),l=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/utils/constants/src/analytics-sources.js")),d=s("./src/packages/platform/utils/types/src/general.js"),u=s("./src/packages/platform/controllers/intl/src/index.js"),p=s("./src/packages/issue/issue-context-service/src/main.js"),m=s("./src/packages/issue/fields/field-base/src/services/field-flags-service/main.js"),f=s("./src/packages/issue/fields/components/inline-edit/src/feature-flags.js"),b=s("./src/packages/issue/fields/components/inline-edit/src/styled.js"),g=s("./src/packages/issue/fields/components/inline-edit/src/ui/index.js"),h=s("./src/packages/platform/utils/react-hooks/use-is-mounted/src/common/utils/index.js"),y=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),O=s("./src/packages/issue/fields/labels/src/common/utils.js"),j=s("./src/packages/cache/src/services/labels/index.js"),v=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),E=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js")
;var w=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),k=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),C=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");var S=s("./src/packages/issue/fields/labels/src/ui/edit/main.js"),I=s("./node_modules/react-intl/lib/index.es.js"),T=Object(I.defineMessages)({errorTitle:{id:"issue-field-labels.error-title",defaultMessage:"We couldn't set the labels value"},errorMessage:{id:"issue-field-labels.error-message",defaultMessage:"Check your connection, then give it another try."},noValueText:{id:"issue-field-labels.no-value-text",defaultMessage:"None"}}),_=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const P=_.default.div.withConfig({componentId:"pdch1v-0"})`padding:0;`,x=_.default.div.withConfig({componentId:"pdch1v-1"
})`${()=>Object(f.a)()?"padding: 0px;\n    word-break: break-word;\n    position: relative;\n    left: 6px;\n    ":""} & > div > span:first-child{margin-left:0;}`;var D=s("./node_modules/lodash/isEmpty.js"),A=s.n(D),M=s("./node_modules/@atlaskit/tag/dist/es2019/tag/internal/removable/index.js"),L=s("./node_modules/@atlaskit/tag-group/dist/es2019/TagGroup/index.js"),R=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js"),N=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jql/helpers.js");const F=(e,t)=>`/issues/?jql=${encodeURIComponent(`${(e=>{if(e.startsWith("customfield_"))return`cf[${e.substring("customfield_".length,e.length)}]`;return e})(e)} = ${Object(N.b)(t)}`)}`,U=e=>{const{fieldId:t,placeholder:s,value:n}=e;return A()(n)?a.a.createElement(R.b,null,s):a.a.createElement(L.a,null,n.map((e=>a.a.createElement(M.a,{key:e,isRemovable:!1,text:e,href:F(t,e)}))))};U.displayName="LabelsView";var V=U
;const K=["fieldKey","issueKey","label","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","showPinButton","projectId","issueId","getSuggestions","startWithEditViewOpen","menuPosition"];function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function W(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const B=Object(n.memo)((e=>{
const{fieldKey:t,issueKey:s,label:i,onCancel:o,onEdit:I,onEscape:_,onConfirm:D,onEnter:A,onUpdate:M,readView:L,editView:R,showPinButton:N,projectId:F,issueId:U,getSuggestions:B,startWithEditViewOpen:H=!1,menuPosition:G}=e,q=W(e,K),z=Object(h.a)(),Y=Object(p.a)(),{formatMessage:Q}=Object(u.c)(),[J,{addToCache:Z,removeFromCache:X}]=(()=>{const{createAnalyticsEvent:e}=Object(E.a)(),[t,s]=Object(n.useState)([]),a=Object(n.useCallback)((t=>{t.forEach((async t=>{try{const s=await j.a.get(t);Object(y.b)(e({}),"labelPickerCache set",{isFromCache:Boolean(null==s?void 0:s.label)}),t&&j.a.set(`${t}`,{label:t})}catch(s){v.a.safeErrorWithoutCustomerData("issue-view.labels.cache.set",s.message)}}))}),[e]),i=Object(n.useCallback)((t=>{t.forEach((async t=>{try{const s=await j.a.get(t);s&&(Object(y.b)(e({}),"labelPickerCache removed"),s&&j.a.remove(`${s.label}`))}catch(s){v.a.safeErrorWithoutCustomerData("issue-view.labels.cache.remove",s.message)}}))}),[e]);return Object(n.useEffect)((()=>{(async()=>{
const e=(e=>e.map((({label:e})=>({label:e,value:e}))))((e=>e.slice(-5).reverse())(await j.a.getAll()));s(e)})()}),[]),[t,{addToCache:a,removeFromCache:i}]})(),{onFailure:ee}=Object(m.a)(),te=Object(n.useCallback)((e=>{null!==e&&Z(e),M&&M(e)}),[Z,M]),[se,ne]=Object(n.useState)(H||!1),ae=Object(n.useCallback)(((e,t)=>{null!==t&&X(t),ee({error:e,title:T.errorTitle,description:T.errorMessage}),z.current&&ne(!0)}),[z,X,ee]),[{fieldConfig:ie,value:re},{resetError:oe,saveValue:ce}]=(e=>{const{fieldKey:t,issueId:s,issueKey:n,onSuccess:a,onFailure:i}=e,[{value:o}]=Object(w.a)(n,t),c=r()(o,"schema.type","array"),[{error:l,value:d},{resetError:u,saveValue:p}]=Object(k.a)({fieldType:c,issueId:s,issueKey:n,onSuccess:a,onFailure:i,initialValue:null,fieldKey:t||C.p});return[{error:l,value:d,fieldConfig:o},{resetError:u,saveValue:p}]})({fieldKey:t,onSuccess:te,onFailure:ae,issueId:U,issueKey:Object(d.m)(s)
}),[le,de]=Object(n.useState)(re),ue=r()(ie,"autoCompleteUrl",""),pe=r()(ie,"isEditable",!1),me=Y&&Y.value===l.a.MOBILE_ISSUE,fe=Object(n.useCallback)((e=>{c()(le,re)||ce(le,null,e),ne(!1),Object(y.h)(e)}),[ce,le,re]),be=Object(n.useCallback)((e=>{oe(),ne(!1),de(re),Object(y.h)(e)}),[oe,re]),ge=Object(n.useCallback)((e=>{be(e),o&&o(e)}),[be,o]),he=Object(n.useCallback)((e=>{fe(e),D&&D(e)}),[D,fe]),ye=Object(n.useCallback)((e=>{ne(!0),de(re),Object(y.h)(e),I&&I(e)}),[I,re]),Oe=Object(n.useCallback)((e=>{be(e),_&&_(e)}),[be,_]),je=Object(n.useCallback)((e=>{const t=e&&e.length>0?e.map((e=>e.value)):e;oe(),de(t)}),[oe,de]),ve=()=>void 0!==R?R:a.a.createElement(P,null,a.a.createElement(S.a,{autoFocus:!0,spacing:"compact",autoCompleteUrl:ue,onChange:je,cachedOptions:J,value:Object(O.a)(le),projectId:F,issueId:U,fieldId:t,getSuggestions:B,menuPosition:G})),Ee=()=>void 0!==L?L:a.a.createElement(x,null,a.a.createElement(V,{fieldId:t,placeholder:Q(T.noValueText),value:re}))
;return Object(f.a)()?a.a.createElement(b.a,{hasValue:re&&0!==re.length,isEditing:se},a.a.createElement(g.a,$({isEditable:pe,isEditing:se,isFitContainerWidthReadView:!me,label:i,readView:Ee(),editView:pe?ve():null,onCancel:ge,onConfirm:he,onEdit:ye,onEscape:Oe},q))):a.a.createElement(g.a,$({isEditable:pe,isEditing:se,isFitContainerWidthReadView:!me,label:i,readView:Ee(),editView:pe?ve():null,onCancel:ge,onConfirm:he,onEdit:ye,onEscape:Oe},q))}));B.displayName="LabelsField";t.a=B},"./src/packages/issue/fields/message-custom-field/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,fieldKey:t})=>{const[{value:s}]=Object(i.a)(e,t),n=a()(s,"schema.type","string"),[{value:o,error:c}]=Object(r.a)({fieldKey:t,
issueKey:e,fieldType:n,initialValue:null});return[{value:o,error:c,fieldConfig:s}]}},"./src/packages/issue/fields/number/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:n})=>{const[{value:o}]=Object(i.a)(e,t),c=a()(o,"schema.type","number"),[{value:l,error:d},{saveValue:u,resetError:p}]=Object(r.a)({fieldKey:t,issueKey:e,fieldType:c,initialValue:null,onSuccess:s,onFailure:n});return[{value:l,error:d,fieldConfig:o},{saveValue:u,resetError:p}]}},"./src/packages/issue/fields/number/src/ui/async.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-async-component/commonjs/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/issue/fields/number/src/ui/view/main.js");Object(i.asyncComponent)({resolve:()=>s.e("async-number-inline-edit-view").then(s.bind(null,"./src/packages/issue/fields/number/src/ui/main.js")),name:"AsyncIssueNumberField",LoadingComponent:c.a,ErrorComponent:c.a});const l=({children:e,fallback:t,packageName:s})=>a.a.createElement(o.a,{id:"issue-number-field",packageName:s,render:()=>t},a.a.createElement(r.a,{fallback:t},e));l.displayName="IssueNumberFieldBoundary"},"./src/packages/issue/fields/number/src/ui/main.js":function(e,t,s){"use strict";s.r(t),s.d(t,"actionSubject",(function(){return D}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/get.js"),r=s.n(i),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/issue/fields/components/error-flag/src/main.js"),l=s("./src/packages/issue/fields/components/inline-edit/src/feature-flags.js"),d=s("./src/packages/issue/fields/components/inline-edit/src/styled.js"),u=s("./src/packages/issue/fields/components/inline-edit/src/ui/index.js"),p=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),m=s("./src/packages/issue/fields/number/src/services/index.js"),f=s("./node_modules/@atlaskit/field-text/dist/esm/FieldTextStateless.js"),b=s("./node_modules/@atlaskit/icon/glyph/warning.js"),g=s.n(b),h=s("./node_modules/@atlaskit/textfield/dist/es2019/text-field.js"),y=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),O=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const j=y.default.div.withConfig({componentId:"sc-1xuu3bo-0"})`${()=>Object(l.a)()?"width: 100%":`width: ${8.5*O.e}px`};cursor:auto;`,v=y.default.div.withConfig({componentId:"sc-1xuu3bo-1"})`margin-left:-${O.e/2}px;margin-right:${O.e/2}px;`,E=["isInvalid","type","defaultValue"];function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const C=Object(n.memo)((e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,i=k(e,E),r=null===n?"":Number(n)
;return a.a.createElement(j,null,Object(l.a)()?a.a.createElement(h.a,w({appearance:"subtle",isCompact:!0,isInvalid:t,type:s,value:r,autoFocus:!0,elemAfterInput:!0===t?a.a.createElement(v,null,a.a.createElement(g.a,{size:"medium",primaryColor:"#FFAB00",label:""})):null},i)):a.a.createElement(f.a,w({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:r},i)))}));var S=s("./node_modules/react-intl/lib/index.es.js"),I=Object(S.defineMessages)({errorTitle:{id:"issue-field-number.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-number.error-message",defaultMessage:"Check your connection, then give it another try."}}),T=s("./src/packages/issue/fields/number/src/ui/view/main.js");const _=["fieldKey","issueKey","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText"];function P(){return(P=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const D="numberInlineEdit";t.default=Object(n.memo)((e=>{const{fieldKey:t,issueKey:s,onCancel:i,onEdit:f,onEscape:b,onConfirm:g,onEnter:h,onUpdate:y,readView:O,editView:j,noValueText:v}=e,E=x(e,_),[w,k]=Object(n.useState)(!1),[{value:S,error:A,fieldConfig:M},{saveValue:L,resetError:R}]=Object(m.a)({issueKey:Object(o.m)(s),fieldKey:t,onSuccess:e=>{y&&y(e),k(!1)}}),N=r()(M,"schema.type","number"),[F,U]=Object(n.useState)(S),V=!!M&&M.isEditable
;Object(n.useEffect)((()=>{A&&k(!0),w||U(S)}),[A,w,S]);const K=Object(n.useCallback)((e=>{F!==S?L(F,null,e):k(!1),Object(p.h)(e)}),[L,F,S]),$=Object(n.useCallback)((e=>{R(),k(!1),U(S),Object(p.h)(e)}),[R,S]),W=Object(n.useCallback)((e=>{$(e),i&&i(e)}),[i,$]),B=Object(n.useCallback)((e=>{K(e),g&&g(e)}),[g,K]),H=Object(n.useCallback)((e=>{k(!0),Object(p.h)(e),f&&f(e)}),[f]),G=Object(n.useCallback)((e=>{$(e),b&&b(e)}),[b,$]),q=Object(n.useCallback)((e=>{Object(l.a)()?Object(p.h)(e):K(e),h&&h(e)}),[h,K]),z=Object(n.useCallback)((e=>{R();const t=""===e.target.value?null:parseFloat(Number(e.target.value).toFixed(3));U(t)}),[R,U]),Y=()=>void 0!==j?j:a.a.createElement(C,{defaultValue:F,onChange:z,type:N,isInvalid:!!A}),Q=()=>void 0!==O?O:a.a.createElement(T.a,{isEditable:V,value:S});return a.a.createElement(a.a.Fragment,null,A&&a.a.createElement(c.a,{error:A,title:I.errorTitle,description:I.errorMessage}),Object(l.a)()?a.a.createElement(d.a,{isEditing:w},a.a.createElement(u.a,P({
actionSubject:D,isEditable:V,isEditing:w,readView:a.a.createElement(d.b,null,Q()),editView:V?Y():null,onCancel:W,onConfirm:B,onEdit:H,onEscape:G,onEnter:q},E))):a.a.createElement(u.a,P({actionSubject:D,isEditable:V,isEditing:w,readView:Q(),editView:V?Y():null,onCancel:W,onConfirm:B,onEdit:H,onEscape:G,onEnter:q},E)))}))},"./src/packages/issue/fields/number/src/ui/view/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),r=s("./src/packages/platform/controllers/intl/src/index.js"),o=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const l=o.default.div.withConfig({componentId:"sc-6lzgpj-0"})`cursor:pointer;&:hover > span{color:${c.a.N800};background-color:${c.a.N90};}`,d=o.default.div.withConfig({componentId:"sc-6lzgpj-1"
})`border:2px solid transparent;`,u=({isEditable:e,value:t})=>{const{formatNumber:s}=Object(r.c)();if(void 0===t)return null;const n=null===t?"-":s(t),o=a.a.createElement(i.a,null,n),c=e?a.a.createElement(l,null,o):o;return a.a.createElement(d,null,c)};u.displayName="NumberView"},"./src/packages/issue/fields/original-estimate/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const a=()=>Object(n.b)("jsw.agility.original-estimate.inline-edit",!1)},"./src/packages/issue/fields/original-estimate/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return d}))
;var n=s("./node_modules/query-string/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),o=s("./src/packages/issue/format-time/src/common/utils/seconds-to-whole-minute-time-string/index.js"),c=s("./src/packages/platform/utils/xsrf-token/src/index.js");const l=async({issueId:e,newValue:t,baseUrl:s,timeTrackingValue:i})=>{const r=(e=>{const t=null!=(null==e?void 0:e.timeSpentSeconds),s=null!=(null==e?void 0:e.remainingEstimateSeconds)&&(null==e?void 0:e.remainingEstimateSeconds)!==(null==e?void 0:e.originalEstimateSeconds);return t||s})(i),l=null!==t?Object(o.a)(t):null;return Object(a.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(n.stringify)({issueId:e,timetracking_originalestimate:l,
timetracking_targetsubfield:r?"timetracking_originalestimate":void 0,fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(c.a)()})})},d=({issueKey:e,issueId:t,fieldId:s,timeTrackingValue:n,onSuccess:a,onFailure:o})=>{const[{value:c}]=Object(i.a)(e,s),d=(null==c?void 0:c.schema.system)||"",[{value:u,error:p},{saveValue:m,resetError:f}]=Object(r.a)({fieldKey:s,issueKey:e,fieldType:d,initialValue:null,saveField:(e,s,a,i)=>l({issueId:t,newValue:a,baseUrl:i,timeTrackingValue:n}),onSuccess:a,onFailure:o});return[{value:u,error:p,fieldConfig:c},{saveValue:m,resetError:f}]}},"./src/packages/issue/fields/original-estimate/src/ui/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/platform/controllers/intl/src/index.js"),o=s("./src/packages/issue/fields/components/error-flag/src/main.js"),c=s("./src/packages/issue/fields/components/inline-edit/src/ui/index.js"),l=s("./src/packages/issue/fields/components/inline-edit/src/feature-flags.js"),d=s("./src/packages/issue/format-time/src/index.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),p=s("./src/packages/time-tracking-formatter/src/main.js"),m=s("./node_modules/react-intl/lib/index.es.js"),f=Object(m.defineMessages)({errorTitle:{id:"issue-field-original-estimate.error-title",defaultMessage:"We couldn't set the original estimate value"},errorMessage:{id:"issue-field-original-estimate.error-message",defaultMessage:"Check your connection, then give it another try."}
}),b=s("./src/packages/issue/fields/original-estimate/src/services/index.js"),g=s("./src/packages/issue/issue-view/src/views/field/single-line-text/single-line-text-field-view.js"),h=s("./src/packages/issue/fields/original-estimate/src/feature-flags.js"),y=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),O=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const j=y.default.div.withConfig({componentId:"sc-12r4yhg-0"})`width:${({isBacklogTimeEstimationInlineEditEnabled:e})=>e?14.5*O.e:8.5*O.e}px;cursor:auto;`,v=({isInvalidInput:e,invalidTimeFormatMessage:t,placeholder:s,value:n,onChange:i})=>a.a.createElement(j,{isBacklogTimeEstimationInlineEditEnabled:Object(h.a)()},a.a.createElement(g.a,{compact:!0,type:"text",value:n,placeholder:s,onChange:i,invalidMessage:e?t:void 0}));v.displayName="OriginalEstimateEdit";var E=v;y.default.div.withConfig({componentId:"sc-1dfnwwu-0"})`& > div:first-child{margin-left:0;}`
;const w=y.default.div.withConfig({componentId:"sc-1dfnwwu-1"})`width:100%;margin-left:-8px;margin-top:-8px;${e=>e.isEditing?"\n            & form > div > div > div {\n                padding-bottom: 4px;\n                padding-left: 6px;\n                > div {\n                    width: 100%;\n                }\n            }\n            ":"\n            & form > div > div > div {\n                padding: 6px 0px;\n            }"}`,k=y.default.div.withConfig({componentId:"sc-1dfnwwu-2"})`word-break:break-word;position:relative;left:6px;`;var C=s("./src/packages/issue/fields/original-estimate/src/ui/view/main.js");const S=["isMobile","config","editView","fieldId","issueId","issueKey","onUpdate","placeholder","readView","timeTrackingValue","invalidTimeFormatMessage","onCancel","onConfirm","onEdit","onEnter","onEscape"];function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){P(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function x(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const D="originalEstimateInlineEdit";t.a=Object(n.memo)((e=>{var t;const{isMobile:s,config:m,editView:g,fieldId:h,issueId:y,issueKey:O,onUpdate:j,placeholder:v,readView:T,timeTrackingValue:P,invalidTimeFormatMessage:A,onCancel:M,onConfirm:L,onEdit:R,onEnter:N,onEscape:F}=e,U=x(e,S),[{value:V,error:K,fieldConfig:$},{saveValue:W,resetError:B}]=Object(b.b)({fieldId:h,issueId:y&&Object(i.k)(y),issueKey:Object(i.m)(O),onSuccess:j,timeTrackingValue:P}),[H,G]=Object(n.useState)(!1),[q,z]=Object(n.useState)(null),[Y,Q]=Object(n.useState)(""),[J,Z]=Object(n.useState)(!1),X=Object(r.c)(),ee=Object(n.useMemo)((()=>{const e=_(_({},X),{},{formatMessage:({defaultMessage:e})=>e||""});return Object(p.a)(q||0,{workingHoursPerDay:m.hoursPerDay,workingDaysPerWeek:m.daysPerWeek,timeFormat:m.format||"pretty",
defaultUnit:m.defaultUnit},e)}),[m,X,q]),te=Object(n.useMemo)((()=>Object(p.a)(q||0,{workingHoursPerDay:m.hoursPerDay,workingDaysPerWeek:m.daysPerWeek,timeFormat:m.format||"pretty",defaultUnit:m.defaultUnit},X)),[m,X,q]);Object(n.useEffect)((()=>{Q(ee)}),[ee]),Object(n.useEffect)((()=>{z(V)}),[V]),Object(n.useEffect)((()=>{K&&G(!0)}),[K]);const se=null!==(t=null==$?void 0:$.isEditable)&&void 0!==t&&t,ne=Object(n.useCallback)((e=>{if(Y!==ee)if(Object(d.b)(m)(Y)){const t=Object(d.c)(m)(Y);W(t,null,e),Object(u.h)(e),Z(!1),G(!1)}else Z(!0),G(!0);else G(!1)}),[Y,ee,m,W]),ae=Object(n.useCallback)((e=>{B(),Z(!1),G(!1),Q(ee),z(V),Object(u.h)(e)}),[V,B,ee]),ie=Object(n.useCallback)((e=>{ae(e),null==M||M(e)}),[M,ae]),re=Object(n.useCallback)((e=>{ne(e),null==L||L(e)}),[ne,L]),oe=Object(n.useCallback)((e=>{G(!0),Object(u.h)(e),null==R||R(e)}),[R]),ce=Object(n.useCallback)((e=>{ae(e),null==F||F(e)}),[F,ae]),le=Object(n.useCallback)((e=>{ne(e),null==N||N(e)}),[N,ne]),de=Object(n.useCallback)((e=>{
const{value:t}=e.target;Z(!1),B(),Q(t)}),[B,Q]),ue=Object(n.useCallback)((()=>Object(l.a)()?a.a.createElement(k,null,a.a.createElement(C.a,{value:te,isEditable:se})):a.a.createElement(C.a,{value:te,isEditable:se})),[se,te]),pe=Object(n.useCallback)((()=>a.a.createElement(E,{isInvalidInput:J,invalidTimeFormatMessage:A,placeholder:v,value:Y,onChange:de})),[Y,A,J,de,v]);return a.a.createElement(a.a.Fragment,null,K&&(()=>K?a.a.createElement(o.a,{error:K,title:f.errorTitle,description:f.errorMessage}):null)(),Object(l.a)()?a.a.createElement(w,{isEditing:H},a.a.createElement(c.a,I({actionSubject:D,isEditable:se,isEditing:H,readView:ue(),editView:se?pe():null,onCancel:ie,onConfirm:re,onEdit:oe,onEscape:ce},U))):a.a.createElement(c.a,I({actionSubject:D,isEditable:se,isEditing:H,readView:ue(),editView:se?pe():null,onCancel:ie,onConfirm:re,onEdit:oe,onEscape:ce,onEnter:le},U)))}))},"./src/packages/issue/fields/original-estimate/src/ui/view/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),r=s("./src/packages/issue/fields/original-estimate/src/feature-flags.js"),o=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const l=o.default.div.withConfig({componentId:"sc-1a0lf4i-0"})`cursor:pointer;&:hover > span{color:${c.a.N800};background-color:${c.a.N90};}`,d=o.default.div.withConfig({componentId:"sc-1a0lf4i-1"})`display:inline-block;border:2px solid transparent;`,u=({isEditable:e=!1,value:t})=>{if(!Object(r.a)())return a.a.createElement(i.a,null,t);const s=a.a.createElement(i.a,null,t);return a.a.createElement(d,null,e?a.a.createElement(l,null,s):s)};u.displayName="OriginalEstimateView";t.a=u},"./src/packages/issue/fields/project/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){
return i}));const n=e=>({label:e.name,value:e.key,iconUrl:e.avatarUrls["48x48"],projectId:e.id}),a=e=>e.map(n),i=({label:e,value:t,iconUrl:s})=>({key:t,name:e,avatarUrls:{"48x48":s}})},"./src/packages/issue/fields/resolution/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=e=>({id:e.value,name:e.label}),a=e=>({value:e.id,label:e.name}),i=(e,t)=>e?t.reduce(((t,s)=>(s.id!==e.id&&t.push(a(s)),t)),[]):(e=>e.map((e=>a(e))))(t)},"./src/packages/issue/fields/resolution/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return _}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/ui/flags/src/services/index.js")),r=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),o=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),c=s("./src/packages/issue/fields/resolution/src/common/utils.js"),l=s("./node_modules/react-intl/lib/index.es.js"),d=Object(l.defineMessages)({editResolutionFailedTitle:{id:"issue-field-resolution.edit-resolution-failed-title",defaultMessage:"We couldn't update {issueKey}'s resolution"},editResolutionFailedDescription:{id:"issue-field-resolution.edit-resolution-failed-description",defaultMessage:"Check your connection, then try again."}
}),u=s("./src/packages/issue/fields/resolution/src/services/main.js"),p=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),m=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),f=s.n(m),b=s("./node_modules/@atlaskit/select/dist/es2019/PopupSelect/PopupSelect.js"),g=s("./node_modules/@atlaskit/icon/glyph/check.js"),h=s.n(g),y=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),O=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),j=s("./src/packages/platform/controllers/intl/src/index.js"),v=Object(l.defineMessages)({readViewMessage:{id:"issue-field-resolution.read.read-view-message",defaultMessage:"You cannot edit the resolution field"},unresolvedResolution:{id:"issue-field-resolution.read.unresolved-resolution",defaultMessage:"Unresolved"}}),E=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),w=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const k=25*w.e,C=E.default.div.withConfig({
componentId:"sc-1tohg2d-0"})`padding:${e=>e.addPadding?`0 ${2*w.e}px 0 12px`:0};display:flex;align-items:center;height:${4*w.e}px;`,S=E.default.span.withConfig({componentId:"sc-1tohg2d-1"})`color:${e=>e.isDarkText?y.a.N500:y.a.N90};display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:${k}px;${e=>e.isDisabled?":hover { cursor: not-allowed; }":""};`,I=({value:e,isLabelClickEnabled:t})=>{const{formatMessage:s}=Object(j.c)(),n=e,i=(null==e?void 0:e.name)||s(v.unresolvedResolution),r=n?a.a.createElement(h.a,{size:"medium",label:i,primaryColor:y.a.G400}):null;return a.a.createElement(C,{addPadding:!t},r,(e=>{const i=a.a.createElement(S,{isDisabled:!t,isDarkText:t||!!n},e);return t?i:a.a.createElement(O.a,{content:s(v.readViewMessage),position:"top"},i)})(i))};I.displayName="ResolutionReadView";const T=({value:e=null,allowedOptions:t,onChange:s})=>a.a.createElement(b.a,{options:t||[],value:e,target:({ref:t})=>a.a.createElement(p.a,{ref:t,
iconAfter:a.a.createElement(f.a,{label:"open"}),appearance:"subtle"},a.a.createElement(I,{value:e?Object(c.b)(e):null,isLabelClickEnabled:!0})),onChange:s,isSearchable:!1,searchThreshold:99999});T.displayName="ResolutionEditView";const _=({issueKey:e})=>{const{showFlag:t}=Object(i.f)(),{createAnalyticsEvent:s}=Object(r.a)(),l=Object(n.useCallback)((()=>{t({type:"error",title:[d.editResolutionFailedTitle,{issueKey:e}],description:d.editResolutionFailedDescription})}),[e,t]),[{value:p,fieldConfig:m},{saveValue:f}]=Object(u.a)({issueKey:e,onFailure:l}),{allowedValues:b=[],isEditable:g=!1}=m||{},h=Object(n.useMemo)((()=>p?Object(c.c)(p):null),[p]),y=Object(n.useMemo)((()=>Object(c.a)(p,b)),[b,p]),O=g&&y.length>=1,j=Object(n.useCallback)((e=>{const t=Object(c.b)(e),n=s({action:"changed",actionSubject:"select"});Object(o.h)(n,"resolutionField"),f(t,null,n)}),[s,f]);return null==m?null:O?a.a.createElement(T,{onChange:j,allowedOptions:y,value:h}):a.a.createElement(I,{value:p,
isLabelClickEnabled:!1})}},"./src/packages/issue/fields/resolution/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js")),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,onFailure:t})=>{const[{value:s}]=Object(i.a)(e,"resolution"),n=a()(s,"schema.type","resolution"),[{error:o,value:c,loading:l},{resetError:d,saveValue:u}]=Object(r.a)({fieldType:n,issueKey:e,initialValue:null,fieldKey:"resolution",onFailure:t});return[{error:o,value:c,loading:l,fieldConfig:s},{resetError:d,saveValue:u}]}},"./src/packages/issue/fields/security-level/src/common/ui/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}))
;var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=n.default.div.withConfig({componentId:"sc-16wuws5-0"})`display:flex;align-items:center;color:${e=>e.isActive?a.a.N0:e.hasSecurityLevel?a.a.R400:null};`},"./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return w})),s.d(t,"a",(function(){return C})),s.d(t,"c",(function(){return S}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),r=s("./node_modules/@atlaskit/icon/dist/es2019/components/icon.js"),o=s("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const d={1:"default",2:"default",3:"success",4:"inprogress"},u={
default:c.a.N40,success:c.a.G50,inprogress:c.a.B50},p={default:c.a.N500,success:c.a.G500,inprogress:c.a.B500},m={default:c.a.N70,success:c.a.G400,inprogress:c.a.B400},f={default:c.a.N800,success:c.a.N0,inprogress:c.a.N0},b=l.default.span.withConfig({componentId:"e5aw6j-0"})`display:flex;align-items:center;> div{display:flex;line-height:initial;outline:0;> span{padding:2px 0;vertical-align:text-bottom;color:${e=>p[d[e.statusCategoryId]]};background-color:${e=>u[d[e.statusCategoryId]]};${e=>e.hasHoverState?`&:hover {\n                        color: ${f[d[e.statusCategoryId]]};\n                        background-color: ${m[d[e.statusCategoryId]]};\n                    }`:""};}}`,g=l.default.div.withConfig({componentId:"e5aw6j-1"})`display:flex;align-items:center;`,h=["ariaLabel","error","isEditable","isOpen","targetRef"];function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function v(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function E(){return(E=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const w="issue.fields.status.common.ui.status-lozenge.",k=e=>a.a.createElement("svg",E({},e,{width:"13",height:"13",viewBox:"5 5 13 13"}),a.a.createElement("path",{d:"M8.292 10.293a1.009 1.009 0 0 0 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 0 0 0-1.419.987.987 0 0 0-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 0 0-1.406 0z",fill:"currentColor",fillRule:"evenodd"}));k.displayName="customChevronDownGlyph";const C=({status:{name:e,statusCategory:t},isEditable:s,hasHoverState:n,targetRef:i,shouldShowDropdownIndication:c})=>a.a.createElement(b,{hasHoverState:n,statusCategoryId:t.id},a.a.createElement("div",{ref:i,"data-test-id":`${w}${t.id}`},!0===s||!0===c?(()=>a.a.createElement(o.a,null,a.a.createElement(g,null,e,a.a.createElement(r.b,{glyph:k,label:""}))))():a.a.createElement(o.a,null,e)))
;C.displayName="StatusLozenge";const S=e=>{const{ariaLabel:t,error:s,isEditable:n,isOpen:r,targetRef:o}=e,l=v(e,h);return a.a.createElement(i.a,{ref:o,appearance:"subtle","aria-label":t,"aria-expanded":r,isDisabled:!n,theme:(e,t)=>{const{buttonStyles:a,spinnerStyles:i}=e(t);return{buttonStyles:O(O(O({},a),{},{backgroundColor:"transparent",margin:0,width:"auto",height:"auto",padding:0,border:`2px solid ${s?c.a.R300:"transparent"}`,borderRadius:"5px"},!0===n?void 0:{cursor:"auto"}),{},{outline:0,boxShadow:`0 0 0 2px ${!0===r?c.a.B100:"transparent"}`,"& > span":{margin:0},"&:focus, &:focus-within":{boxShadow:`0 0 0 2px ${c.a.B100}`}}),spinnerStyles:i}}},a.a.createElement(C,E({},l,{isEditable:n})))};S.displayName="WrappedStatusLozenge"},"./src/packages/issue/fields/status/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"c",(function(){return p}))
;var n=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),a=s("./src/packages/platform/utils/constants/src/status-categories.js");const i=(e,t)=>e.to.id===t&&!0===e.isLooped,r=Object(n.a)(((e,t)=>e.filter((e=>!i(e,t)&&!((e,t)=>e.isGlobal&&e.to.id===t)(e,t))))),o=e=>e.every((e=>e.isGlobal)),c=(e,t)=>r(e||[],t),l=Object(n.a)(((e,t)=>(e||[]).filter((e=>i(e,t))))),d=Object(n.a)((e=>e.map((e=>({label:e.to.name,value:e.id,transition:e}))))),u=e=>d(e),p=(e,t,s)=>({id:e,name:t,statusCategory:{id:a.StatusCategoryIds[s]||a.StatusCategoryIds[a.StatusCategoryTypes.UNDEFINED],name:t}})},"./src/packages/issue/fields/status/src/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={TIME_TO_RENDER_OPTIONS:"jira.fe.issue.fields.status.time-to.render-options",TIME_TO_APPLY_SELECTED_OPTION:"jira.fe.issue.fields.status.time-to.reflect-selected",TIME_TO_CANCEL_DROPDOWN:"jira.fe.issue.fields.status.time-to.cancel-dropdown",
TIME_TO_OPEN_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.open-transition-screen",TIME_TO_CONFIRM_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.confirm-transition-screen",TIME_TO_CANCEL_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.cancel-transition-screen",TIME_TO_ERROR_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.error-transition-screen"}},"./src/packages/issue/fields/status/src/services/experience-descriptions/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return d}));var a=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),i=n("./src/packages/platform/utils/types/src/application.js"),r=n("./src/packages/platform/utils/types/src/edition.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=(t,s,n,o,l,d)=>{let u=null,p=null;if(null!==o)try{const{appEditions:e}=Object(a.f)();u=Object(i.f)(o),p=Object(r.f)(u,e)}catch(e){}const m={};return null!=l&&(m.errorMessage=l),null!=d&&(m.traceId=d),{experience:"transitionIssue",wasExperienceSuccesful:t,analyticsSource:n,application:u,edition:p,additionalAttributes:c(c({},m),{},{method:s})}}},"./src/packages/issue/fields/status/src/services/status-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return R}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./src/packages/platform/observability/browser-metrics/src/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),p=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),m=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),f=s("./src/packages/platform/ui/flags/src/ui/with-flag-service/index.js"),b=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),g=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js"),h=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),y=s("./src/packages/issue/workflow-transitions-services/src/main.js"),O=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),j=s("./src/packages/issue/fields/status/src/constants.js"),v=s("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js"),E=s("./node_modules/react-intl/lib/index.es.js")
;const w=Object(E.defineMessages)({title:{id:"issue-field-status.services.flags.transition-failed-error.main.title",defaultMessage:"We couldn't update the status"},description:{id:"issue-field-status.services.flags.transition-failed-error.main.description",defaultMessage:"Check your network connection, then try reloading the issue."}});var k=()=>({type:"error",title:w.title,description:w.description,isAutoDismiss:!0});const C=Object(E.defineMessages)({title:{id:"issue-field-status.services.flags.validation-error.main.title",defaultMessage:"Transition failed"}});var S=e=>({type:"warning",title:C.title,description:{id:"issue-field.status.services.flags.validation-error.main.description",defaultMessage:e},isAutoDismiss:!0});function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function T(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){P(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x=Object(o.b)(),D="#issue-workflow-transition-submit",A=(e,t,s)=>{const n=document.querySelector(e);n&&n.removeEventListener(t,s)};class M extends n.Component{static getDerivedStateFromProps(e,t){return t.loading||!e.value?null:{value:e.value}}constructor(e){super(e),this.componentDidUpdate=e=>{
this.props.initialValue&&e.initialValue&&e.initialValue.id!==this.props.initialValue.id&&this.props.initialValue.id!==this.state.value.id&&this.setState({loading:!1,value:this.props.initialValue})},this.isDialogOpened=!1,this.isDialogConfirmPressed=!1,this.onDialogContentReady=()=>{setTimeout((()=>{this.isDialogOpened?Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_ERROR_TRANSITION_SCREEN}):Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_OPEN_TRANSITION_SCREEN}),this.bindDialogFormHandlers(),this.isDialogOpened=!0,this.isDialogConfirmPressed=!1}))},this.bindDialogFormHandlers=()=>{((e,t,s)=>{A(e,t,s);const n=document.querySelector(e);n&&n.addEventListener(t,s)})(D,"click",this.onClickDialogConfirm)},this.unbindDialogFormHandlers=()=>{A(D,"click",this.onClickDialogConfirm)},this.handleBeforeDialogHide=()=>{this.isDialogOpened&&!this.isDialogConfirmPressed&&(this.cancelScreenBrowserMetricsEvents(),Object(o.c)().markStartOfInteraction({key:j.a.TIME_TO_CANCEL_TRANSITION_SCREEN}),
setTimeout((()=>{Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_CANCEL_TRANSITION_SCREEN})}))),this.unbindDialogFormHandlers(),this.isDialogOpened=!1,this.isDialogConfirmPressed=!1},this.cancelScreenBrowserMetricsEvents=()=>{[j.a.TIME_TO_ERROR_TRANSITION_SCREEN,j.a.TIME_TO_CONFIRM_TRANSITION_SCREEN,j.a.TIME_TO_OPEN_TRANSITION_SCREEN].forEach((e=>{Object(o.c)().cancel({key:e},!0)}))},this.onClickDialogConfirm=()=>{Object(o.c)().markStartOfInteraction({key:j.a.TIME_TO_CONFIRM_TRANSITION_SCREEN,cancelExisting:!0}),Object(o.c)().markStartOfInteraction({key:j.a.TIME_TO_ERROR_TRANSITION_SCREEN,cancelExisting:!0}),this.isDialogConfirmPressed=!0},this.resetError=()=>this.setState({error:null}),this.submit=(e,t)=>{const s=this.state.value,n=e.to;this.setState({loading:!0,value:n}),this.props.onSubmit(s,n,{transition:e},t)},this.success=({status:e,event:t,viaDialog:s=!1})=>{this.setState({loading:!1,lastSavedValue:e}),
this.props.fieldValueActions.setFieldValue(this.props.issueKey,"status",e),this.props.onSuccess(e,s,t),Object(O.f)(t,"statusField transitioned","statusField"),Object(d.a)(Object(v.a)(!0,"POST","Issue View Status Service",this.props.projectType)),s&&Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_CONFIRM_TRANSITION_SCREEN})},this.failure=(e,t)=>{this.setState({error:e,loading:!1,value:this.state.lastSavedValue||this.props.value||this.props.initialValue}),this.props.onFailure();const s=e instanceof p.a;s?this.props.flagService.showFlag(S(e.message)):this.props.flagService.showFlag(k()),Object(O.b)(t,"statusField postTransitionFailed",{validationError:s,message:e.message}),Object(h.a)(e)?Object(d.a)(Object(v.a)(!1,"POST","Issue View Status Service",this.props.projectType,e.message,e.traceId)):Object(d.a)(Object(v.a)(!0,"POST","Issue View Status Service",this.props.projectType))},this.cancel=()=>{this.setState({loading:!1,value:this.props.value||this.props.initialValue}),
this.props.onEditCancel(),this.props.workflowTransitionsActions.setTransitionInProgress(!1)},this.transitionStatus=async(e,t)=>{const{issueKey:s,baseUrl:n}=this.props,a=e.to;this.submit(e,t);try{e.hasScreen?new l.default({baseUrl:n,issueKey:s,transitionId:e.id}).onDialogSuccess((()=>this.success({status:a,event:t,viaDialog:!0}))).onDialogCancel((()=>this.cancel())).show():(x.start({key:"issue-field.status.post-transition"}),await Object(m.d)(`${n}/rest/api/2/issue/${s}/transitions`,{body:JSON.stringify({transition:e})}),x.stop({key:"issue-field.status.post-transition"}),this.success({status:a,event:t}))}catch(i){x.cancel("issue-field.status.post-transition"),u.a.safeErrorWithoutCustomerData("issue-field.status.post-transition",i),this.failure(i,t)}},this.api={transitionStatus:this.transitionStatus,resetError:this.resetError};const t=e.value||e.initialValue;if(null==t)throw new Error("Either value or initialValue prop is required.");this.state={value:t,lastSavedValue:t,loading:!1,
error:null}}componentDidMount(){Object(c.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({bind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)})).catch(r.a),Object(g.a)("dialogContentReady",this.onDialogContentReady),Object(g.a)("Dialog.beforeHide",this.handleBeforeDialogHide)}componentWillUnmount(){Object(c.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({unbind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)})).catch(r.a),Object(g.b)("dialogContentReady",this.onDialogContentReady),Object(g.b)("Dialog.beforeHide",this.handleBeforeDialogHide),this.unbindDialogFormHandlers(),this.isDialogOpened=!1}render(){return this.props.children(_(_({},this.state),this.api))}}M.displayName="StatusService",M.defaultProps={onSubmit:r.a,onSuccess:r.a,onFailure:r.a,onEditStart:r.a,onEditCancel:r.a};const L=e=>{
const[,t]=Object(y.a)();return a.a.createElement(b.a,{issueKey:e.issueKey,fieldKey:"status"},((s,n)=>a.a.createElement(M,I({value:s},e,{fieldValueActions:n,workflowTransitionsActions:t}))))};L.displayName="StatusWithValueService";const R=Object(f.a)(L)},"./src/packages/issue/fields/status/src/services/status-transitions-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");const i=async e=>{try{return await Object(a.a)(`/rest/api/2/issue/${e}/transitions?sortByOpsBarAndStatus=true`)}catch(t){return n.a.safeErrorWithoutCustomerData("issue.status-field.fetch-transitions",t.toString()),null}}},"./src/packages/issue/fields/status/src/services/transitions-query/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/ui/error-boundary/src/main.js"),r=s("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),o=s("./src/packages/issue/fields/status/src/services/transitions-query/main.js");const c=e=>a.a.createElement(i.a,{id:"issue.fields.status.transitions-query"},a.a.createElement(r.a,{id:"fields.status.transitions-query",packageName:"jiraIssueFieldStatus",sendToPrivacyUnsafeSplunk:!0},a.a.createElement(o.a,e)));c.displayName="WrappedTransitionsQuery"},"./src/packages/issue/fields/status/src/services/transitions-query/main.js":function(t,s,n){"use strict";n.d(s,"b",(function(){return S})),n.d(s,"a",(function(){return P}));var a=n("./node_modules/react/index.js"),i=n.n(a),r=(n("./node_modules/react-magnetic-di/lib/esm/index.js"),
n("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js")),o=n("./src/packages/platform/observability/browser-metrics/src/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),l=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),d=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),u=n("./src/packages/issue/issue-view/src/common/util/errors/index.js"),p=n("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),m=n("./src/packages/issue/workflow-transitions-services/src/main.js"),f=n("./src/packages/issue/workflow-transitions-services/src/context.js"),b=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),g=n("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=e=>y(y({id:parseInt(e.id,10),name:e.name,hasScreen:e.hasScreen,isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional},"boolean"==typeof e.isLooped&&{isLooped:e.isLooped}),{},{to:{id:parseInt(e.to.id,10),name:e.to.name,description:"",statusCategory:{id:e.to.statusCategory.id}},from:null}),v=e=>y(y({id:String(e.id),name:e.name,hasScreen:e.hasScreen,
isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional},"boolean"==typeof e.isLooped&&{isLooped:e.isLooped}),{},{to:{id:String(e.to.id),name:e.to.name,statusCategory:{id:e.to.statusCategory.id}}});function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const C=Object(o.b)(),S=(e,t)=>`${e}/rest/api/2/issue/${t}/transitions?sortByOpsBarAndStatus=true`,I=(e,t,s,n)=>{const a="string"==typeof s?Object(g.a)(e,"GET","Issue View BaseTransitionsQuery",t||null,s,n):Object(g.a)(e,"GET","Issue View BaseTransitionsQuery",t||null);Object(c.a)(a)},T=t=>{const{status:s,issueKey:n,baseUrl:i,projectType:r,preFetch:o,createAnalyticsEvent:c,isSaving:f}=t,[g,h]=Object(m.c)(),y=Object(a.useRef)(!1),[O]=Object(d.d)(n),E=Object(a.useCallback)((async t=>{if(!y.current){y.current=!0,h({loading:!0,error:null});try{C.start({key:"issue-field.status.fetch-transitions"});const e=((e=[])=>e.filter((e=>!!e.to&&!!e.to.statusCategory)))((await Object(l.a)(S(i,n))).transitions);C.stop({key:"issue-field.status.fetch-transitions"}),Object(b.g)(t,"statusField transitionsFetched","statusField",{count:e.length}),I(!0,r),h({data:e.map(j),loading:!1,error:null})}catch(e){C.cancel("issue-field.status.fetch-transitions"),
Object(u.a)("issue-field.status.fetch-transitions",e.toString(),e,{}),Object(p.a)(e)?I(!1,r,`${e.name||""} ${e.message}`.trim(),e.traceId):I(!0,r),h({data:null,loading:!1,error:e})}y.current=!1}}),[i,n,r,h,O]);return Object(a.useEffect)((()=>{!0===o&&c&&E(c({}))}),[n,o,c,h,E]),Object(a.useEffect)((()=>{f?h({data:null}):!f&&!0===o&&c&&E(c({}))}),[f,s,o,c,h,E]),t.children(w(w({},g),{},{data:g.data?g.data.map(v):null,fetch:E}))},_=e=>i.a.createElement(f.a,{scope:e.issueKey},i.a.createElement(T,e));_.displayName="ScopedTransitionsQuery";const P=Object(r.a)()(_)},"./src/packages/issue/fields/status/src/services/use-status-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js")),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");const c=({issueKey:e,onSuccess:t,onFailure:s})=>{const[n]=Object(i.a)(e,o.v),c=a()(n.value,"scheme.type",o.v),[{value:l,loading:d,error:u},{saveValue:p,resetError:m}]=Object(r.a)({fieldKey:o.v,issueKey:e,fieldType:c,initialValue:null,onSuccess:t,onFailure:s});return[{value:l,loading:d,error:u,fieldConfig:n},{saveValue:p,resetError:m}]}},"./src/packages/issue/fields/status/src/ui/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return jt}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/platform/ui/error-boundary/src/index.js"),l=s("./src/packages/platform/utils/types/src/general.js"),d=s("./src/packages/platform/services/providers-container-context/src/index.js"),u=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),p=s("./src/packages/issue/fields/status/src/services/status-service/main.js"),m=s("./src/packages/issue/fields/status/src/services/transitions-query/index.js"),f=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),g=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),h=s("./src/packages/platform/utils/constants/src/project-types.js")
;const y=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t||"ADMINISTER"===e&&t,O=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t;function j(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?j(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const w=(e,t)=>`\n    query nextGenViewWorkflowQuery {\n        permissions(issueKey:"${e}", keys:["VIEW_READONLY_WORKFLOW", "ADMINISTER"]) {\n            key\n            havePermission\n        }\n        viewIssue(issueKey: "${e}") {\n            fields {\n                ... on IssueTypeField {\n                    fieldKey\n                    id\n                }\n            }\n        }\n        ${t?`project(projectKey: "${t}") {\n            projectId\n            simplified\n            type\n        }`:""}\n    }\n`,k=(e,t,s,n)=>Object(g.a)((e=>`${e}/rest/gira/latest/`)(e),{method:"POST",body:JSON.stringify({query:w(t,s)})}).then((e=>(({data:e},t)=>{if(!e||!e.permissions||!e.viewIssue)return;const{permissions:s,project:n,viewIssue:a}=e,i=!0===(n&&n.simplified||t)?y:O,r=a.fields.find((e=>"issuetype"===e.fieldKey)),o={hasPermission:s.some(i),issueTypeId:Object(l.o)(r?r.id:"")};return n&&(o.projectId=Object(l.r)(String(n.projectId)),o.projectType=Object(h.k)(n.type),
o.isSimplified=n.simplified),o})(e,n)));class C extends n.Component{constructor(e){super(e),this.fetch=async()=>{const{baseUrl:e,projectKey:t,issueKey:s,isSimplified:n}=this.props;this.request();try{const a=await k(e,s,t,n);this.success(a)}catch(a){b.a.safeErrorWithoutCustomerData("issue-field.status.fetch-view-workflow",a),this.failure(a)}},this.request=()=>{this.setState({error:void 0,loading:!0,data:void 0})},this.success=e=>{this.setState({loading:!1,data:e})},this.failure=e=>{this.setState({error:e,loading:!1})},this.state={data:void 0,loading:!1,error:void 0}}render(){return this.props.children(v(v({},this.state),{},{fetch:this.fetch}))}}C.displayName="ViewWorkflowService";const S=["data"];function I(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){P(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x={data:void 0,loading:!1,error:void 0,fetch:()=>Promise.resolve()},D=e=>{const{ViewWorkflowService:t,ContainerContextSubscriber:s,baseUrl:n,issueKey:i,children:r}=e,o=i?Object(f.a)(i):null
;return i&&o?a.a.createElement(s,null,(({data:e})=>{const s=((e,t)=>{if(!e||!e.project)return;const s=e.project;return s.key===t?{projectId:Object(l.r)(s.id.toString()),projectType:s.type,isSimplified:s.isSimplified}:void 0})(e,o);return a.a.createElement(t,{baseUrl:n,issueKey:i,projectKey:s?void 0:o,isSimplified:s&&s.isSimplified},(e=>{let{data:t}=e,n=I(e,S);const a=s||t?_(_({},s),t):void 0;return r(_({data:a},n))}))})):r(_({},x))};D.displayName="ViewWorkflowContextService",D.defaultProps={ViewWorkflowService:C}
;var A=D,M=s("./node_modules/react-intl/lib/index.es.js"),L=s("./node_modules/@atlaskit/select/dist/es2019/PopupSelect/PopupSelect.js"),R=s("./src/packages/platform/observability/browser-metrics/src/index.js"),N=s("./src/packages/common-legacy-do-not-add-anything-new/src/blanket/index.js"),F=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),U=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),V=s("./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js"),K=s("./src/packages/issue/fields/status/src/common/utils.js"),$=s("./src/packages/issue/fields/status/src/constants.js"),W=s("./src/packages/issue/fields/status/src/ui/status-view/messages.js"),B=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),H=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),G=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const q=H.default.div.withConfig({componentId:"z7i8na-0"})`padding:${G.e}px;text-align:center;`,z=()=>a.a.createElement(q,null,a.a.createElement(B.a,null));z.displayName="LoadingSpinner";var Y=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),Q=s.n(Y),J=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const Z=H.keyframes`to{box-shadow:0 0 0 10px rgba(0,0,0,0);}`,X=H.default.div.withConfig({componentId:"sc-1wah291-0"})`display:inline-flex;border-radius:3px;box-shadow:0 0 0 0 ${J.a.G400};animation:${e=>e.shouldShow?`${Z} 1.45s cubic-bezier(0.5, 0, 0, 1)`:"none"};`;class ee extends n.Component{constructor(...e){super(...e),this.state={shouldShow:!1}}componentDidUpdate(e){e.status.statusCategory.id!==this.props.status.statusCategory.id&&this.setState({shouldShow:3===this.props.status.statusCategory.id})}render(){return a.a.createElement(X,{shouldShow:this.state.shouldShow},this.props.children)}}ee.displayName="Pulse"
;var te=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),se=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js");const ne=e=>`\n    &:not(:active), &:disabled {\n        background: ${e.background} !important;\n        color: ${e.color} !important;\n    }\n    \n    &:hover:not(:active) {\n        background: ${e.backgroundHover} !important;\n        color: ${e.color} !important;\n    }\n`,ae={default:{background:J.a.N20A,backgroundHover:J.a.N30A,color:J.a.N400},todo:{background:J.a.N40,backgroundHover:J.a.N50,color:J.a.N800},inProgress:{background:J.a.B400,backgroundHover:J.a.B500,color:J.a.N0},done:{background:J.a.G400,backgroundHover:J.a.G500,color:J.a.N0}},ie=Object(te.a)(se.a,{target:"elro8wh0"})("font-weight:600;",(e=>!e.isSelected&&ne(ae.default)),";"),re=Object(te.a)(se.a,{target:"elro8wh1"})("font-weight:600;",(e=>!e.isSelected&&ne(ae.todo)),";"),oe=Object(te.a)(se.a,{target:"elro8wh2"
})("font-weight:600;",(e=>!e.isSelected&&ne(ae.inProgress)),";"),ce=Object(te.a)(se.a,{target:"elro8wh3"})("font-weight:600;",(e=>!e.isSelected&&ne(ae.done)),";"),le=e=>{const{ariaLabel:t,isEditable:s,isOpen:n,status:i,targetRef:r,statusButtonRef:o}=e,c=(e=>{switch(e){case 2:return re;case 3:return ce;case 4:return oe;default:return ie}})(i.statusCategory.id);return a.a.createElement("div",{ref:r},a.a.createElement(ee,{status:i},a.a.createElement(c,{ref:o,"aria-label":t,"aria-expanded":n,isDisabled:!s,iconAfter:a.a.createElement(Q.a,{label:""})},i.name)))};le.displayName="StatusButton";var de=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),ue=s.n(de),pe=s("./src/packages/platform/controllers/intl/src/index.js"),me=Object(M.defineMessages)({globalTransition:{id:"issue-field-status.status-view.transition.with-label.global-transition",defaultMessage:"Transition to"}});const fe=H.default.div.withConfig({componentId:"sc-1ta161u-0"})`display:flex;`,be=H.default.span.withConfig({
componentId:"sc-1ta161u-1"})`flex-grow:1;`,ge=H.default.span.withConfig({componentId:"sc-1ta161u-2"})`flex-shrink:0;display:flex;`,he=H.default.div.withConfig({componentId:"sc-1ta161u-3"})`display:inline-flex;align-items:center;`,ye=e=>{const t=Object(pe.c)();return a.a.createElement(fe,null,a.a.createElement(be,null,((e,t)=>e.isGlobal?e.name!==e.to.name?e.name:t.formatMessage(me.globalTransition):e.name)(e.transition,t)),a.a.createElement(ge,null,a.a.createElement(he,null,a.a.createElement(ue.a,{label:"",size:"small"})),a.a.createElement(V.a,{status:e.transition.to})))};ye.displayName="TransitionWithLabel";const Oe=e=>a.a.createElement(V.a,{status:e.transition.to});Oe.displayName="TransitionWithoutLabel";const je=e=>e.hasLabel?a.a.createElement(ye,{transition:e.transition}):a.a.createElement(Oe,{transition:e.transition}),ve=Object(F.a)("statusField",{onOpen:"openDropdown",onChange:"transitionSelected"})(L.a);class Ee extends n.Component{constructor(...e){super(...e),this.state={
isOpen:!1},this.onChildWrapperRefUpdate=e=>{this.childWrapperRef=e},this.wasChanged=!1,this.onChange=(e,t,s)=>{const{hasScreen:n}=e.transition;this.wasChanged=!0,Object(R.c)().markStartOfInteraction({key:$.a.TIME_TO_APPLY_SELECTED_OPTION,cancelExisting:!0}),n&&Object(R.c)().markStartOfInteraction({key:$.a.TIME_TO_OPEN_TRANSITION_SCREEN,cancelExisting:!0}),Object(U.h)(s,"transitionSelectedStatusField",{hasScreen:n}),this.props.onChange(e.transition,s)},this.onOpen=e=>{Object(R.c)().markStartOfInteraction({key:$.a.TIME_TO_RENDER_OPTIONS,cancelExisting:!0}),Object(U.h)(e,"openDropdownStatusField"),this.props.onOpen(e),this.setState({isOpen:!0})},this.onClose=()=>{this.wasChanged||Object(R.c)().markStartOfInteraction({key:$.a.TIME_TO_CANCEL_DROPDOWN,cancelExisting:!0}),this.wasChanged=!1,this.props.onClose(),this.setState({isOpen:!1})},this.childWrapperRef=void 0}componentDidUpdate(e,t){const{transitions:s,isSaving:n}=this.props,{isOpen:a}=this.state
;!0===e.isSaving&&!1===n&&this.childWrapperRef&&this.childWrapperRef.children.length>0&&this.childWrapperRef.children[0].focus();const i=!t.isOpen&&a,r=null===e.transitions&&s;i&&!s&&Object(R.c)().markTimeToFeedback({key:$.a.TIME_TO_RENDER_OPTIONS}),(i&&s||a&&r)&&setTimeout((()=>{Object(R.c)().markTimeToFinishTask({key:$.a.TIME_TO_RENDER_OPTIONS})}));t.isOpen&&!a&&setTimeout((()=>{Object(R.c)().markTimeToFinishTask({key:$.a.TIME_TO_APPLY_SELECTED_OPTION}),Object(R.c)().markTimeToFinishTask({key:$.a.TIME_TO_CANCEL_DROPDOWN})}))}componentWillUnmount(){Object.keys($.a).forEach((e=>{Object(R.c)().cancel({key:$.a[e]},!0)}))}renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}){const{intl:{formatMessage:i},value:r}=this.props;return t?a.a.createElement(N.a,{border:!1},a.a.createElement(V.c,{targetRef:n,status:r,error:s})):a.a.createElement(V.c,{ariaLabel:`${r.name} - ${i(W.a.changeStatus)}`,error:s,hasHoverState:!0,isEditable:e,isOpen:this.state.isOpen,status:r,targetRef:n})}
renderButton({isEditable:e,isSaving:t,targetRef:s}){const{intl:{formatMessage:n},value:i,statusButtonRef:r}=this.props,o=a.a.createElement(le,{ariaLabel:`${i.name} - ${n(W.a.changeStatus)}`,isEditable:e,isOpen:this.state.isOpen,status:i,targetRef:s,statusButtonRef:r});return t?a.a.createElement(N.a,null,o):o}renderWithFocusWrapper(e){return a.a.createElement("div",{ref:this.onChildWrapperRefUpdate},e)}renderTarget({isEditable:e,isSaving:t,error:s,targetRef:n}){const{appearance:i,value:r}=this.props;if(r){if("lozenge"===i)return this.renderWithFocusWrapper(this.renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}));if("button"===i)return this.renderWithFocusWrapper(this.renderButton({isEditable:e,isSaving:t,targetRef:n}))}return a.a.createElement("div",null)}render(){const{footer:e,isLoading:t,isEditable:s,isSaving:n,error:i,value:r,intl:{formatMessage:o},transitions:c}=this.props,l=null!=c,d=Object(K.a)(c,r.id),u=Object(K.d)(d||[]);return n||!s?this.renderTarget({isSaving:n,
isEditable:s,error:i}):a.a.createElement(ve,{noOptionsMessage:()=>o(l?W.a.noPermission:W.a.cannotLoadTransitions),formatOptionLabel:e=>a.a.createElement(je,{transition:e.transition,hasLabel:!u}),options:Object(K.e)(d||[]),target:({ref:e})=>this.renderTarget({isEditable:s,isSaving:n,error:i,targetRef:e}),isLoading:t,isDisabled:!s,searchThreshold:99999,onChange:this.onChange,onOpen:this.onOpen,onClose:this.onClose,closeMenuOnSelect:!0,components:{LoadingMessage:()=>a.a.createElement(z,null)},popperProps:{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:5,rootBoundary:"document"}}],strategy:"fixed"},footer:e})}}Ee.displayName="StatusView",Ee.defaultProps={isEditable:!0,isSaving:!1,onChange:r.a,onOpen:r.a,onClose:r.a}
;var we=Object(M.injectIntl)(Ee),ke=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),Ce=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),Se=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),Ie=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Te=Object(M.defineMessages)({errorMessage:{id:"issue-field-status.common.view-workflow.error.error-message",defaultMessage:"Couldn\u2019t find the workflow."},tryAgain:{id:"issue-field-status.common.view-workflow.error.try-again",defaultMessage:"Try again"}});const _e=H.default.div.withConfig({componentId:"ycn99o-0"})`height:${6*G.e}px;border-top:2px solid ${J.a.N40};display:flex;align-items:center;padding:0 ${1.5*G.e}px;justify-content:center;`,Pe=H.default.div.withConfig({componentId:"ycn99o-1"
})`display:flex;flex-grow:1;height:100%;`,xe=H.default.div.withConfig({componentId:"ycn99o-2"})`margin-right:${G.e}px;`;function De(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ae(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?De(Object(s),!0).forEach((function(t){Me(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):De(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Me(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Le extends n.Component{constructor(...e){super(...e),this.onRetry=(e,t)=>{Object(U.h)(t,"retryViewWorkflowButton"),this.props.onRetry(e)}}render(){
const{intl:{formatMessage:e}}=this.props;return a.a.createElement(Ce.a,{sourceName:"viewWorkflowError",sourceType:Se.f},a.a.createElement(_e,null,a.a.createElement(xe,null,e(Te.errorMessage)),a.a.createElement(Pe,null,a.a.createElement(ke.a,{appearance:"link",spacing:"none",onClick:this.onRetry,theme:(e,t)=>{const s=e(t);return Ae(Ae({},s),{},{buttonStyles:Ae(Ae({},s.buttonStyles),{},{alignItems:"center"})})}},e(Te.tryAgain))),a.a.createElement(Ie.b,null)))}}Le.displayName="Error";var Re=Object(M.injectIntl)(Le),Ne=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),Fe=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/create-event.js"),Ue=s("./src/packages/platform/ui/flags/src/ui/subscriber/index.js"),Ve=s("./src/packages/wrm/src/async-wrm.js"),Ke=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),$e=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),We=Object(M.defineMessages)({
viewWorkflow:{id:"issue-field-status.common.view-workflow.button.view-workflow",defaultMessage:"View workflow"}});const Be=H.default.div.withConfig({componentId:"sc-1wnuph0-0"})`height:${6*G.e}px;border-top:2px solid ${J.a.N40};`,He=H.default.div.withConfig({componentId:"sc-1wnuph0-1"})`display:flex;flex-grow:1;height:100%;`;function Ge(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(s),!0).forEach((function(t){ze(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ge(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ze(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,
configurable:!0,writable:!0}):e[t]=s,e}const Ye=({content:e,children:t})=>e?a.a.createElement(Ke.a,{tag:"span",content:e},t):t,Qe=({isDisabled:e,isLoading:t,isInitialLoading:s,onClick:n,onMount:i,tooltipContent:r})=>{const o=Object(pe.c)(),c=!0===e&&!s;return a.a.createElement(Be,null,a.a.createElement($e.a,{onMount:i}),a.a.createElement(Ye,{content:r},a.a.createElement(He,null,a.a.createElement(ke.a,{testId:"issue-field-status.common.ui.view-workflow.button.view-workflow",shouldFitContainer:!0,appearance:"subtle",spacing:"none",isDisabled:e,isLoading:t,onClick:n,theme:(e,t)=>{const s=e(t);return qe(qe({},s),{},{buttonStyles:qe(qe({},s.buttonStyles),{},{alignItems:"center",textAlign:"left",color:c?J.a.N70:J.a.N900,padding:`0 ${1.5*G.e}px`})})}},o.formatMessage(We.viewWorkflow)))))};Qe.displayName="ViewWorkflowButton";var Je=Qe,Ze=Object(M.defineMessages)({noPermission:{id:"issue-field-status.common.view-workflow.no-permission",
defaultMessage:"You don't have permission to view this workflow."},loading:{id:"issue-field-status.common.view-workflow.loading",defaultMessage:"Looks like your connection is slow. We\u2019re still finding this workflow."}}),Xe=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js"),et=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const tt=e=>{if(e.data&&e.data.viewIssue&&e.data.viewIssue.workflow)return{workflowName:e.data.viewIssue.workflow.name,currentStepId:e.data.viewIssue.workflow.step.id};throw new Error("TransformError")};function st(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?st(Object(s),!0).forEach((function(t){at(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):st(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function at(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class it extends n.Component{constructor(...e){super(...e),this.state={data:void 0,error:void 0,loading:!1},this.load=async()=>{this.onLoading();const{baseUrl:e,issueKey:t}=this.props;try{this.fireAnalytics();const s=await((e,t)=>Object(et.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:"\nquery classicViewWorkflowQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        workflow {\n            name\n            step {\n                id\n            }\n        }\n    }\n}\n",variables:{issueKey:t}})}).then(tt))(e,t);this.onLoadSucceeded(s)}catch(s){
b.a.safeErrorWithoutCustomerData("issue-field.status.classic-view-workflow-service.fetch","Failed to fetch classic view workflow data.",{errorReason:s.message&&"TransformError"===s.message?"transform":"fetch"}),this.onLoadFailed(s)}}}componentDidMount(){!0===this.props.shouldLoadOnMount&&this.load()}onLoading(){this.setState({data:void 0,error:void 0,loading:!0})}onLoadSucceeded(e){this.setState({data:e,error:void 0,loading:!1})}onLoadFailed(e){this.setState({data:void 0,error:e,loading:!1})}fireAnalytics(){const e=this.props.createAnalyticsEvent({action:"requested"});Object(U.b)(e,"classicViewWorkflowData requested")}render(){return this.props.children(nt(nt({},this.state),{},{retry:this.load}))}}it.displayName="ClassicViewWorkflowService",it.defaultProps={shouldLoadOnMount:!0};const rt=Object(Xe.a)()(it),ot=Object(M.defineMessages)({title:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.title",defaultMessage:"We couldn't load the workflow"},description:{
id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.description",defaultMessage:"Check your connection, then try reloading the page."}});var ct=()=>({type:"error",title:ot.title,description:ot.description});class lt extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1,isRefetching:!1,isModalMounted:!1},this.modalApi=void 0,this.onClick=(e,t,s,n)=>{Object(U.h)(e,"viewWorkflowTrigger",{isSimplifiedProject:!1}),this.modalApi&&s&&n&&(this.setState({isLoadingModal:!0,isRefetching:!1}),this.modalApi.then((e=>{e.showDialog(s,n),window.dispatchEvent(Object(Fe.a)("resize")),this.setState({isModalMounted:!0})})).catch((()=>{t&&t(ct()),this.setState({isLoadingModal:!1})})))},this.onRetry=(e,t)=>(e.stopPropagation(),this.setState({isRefetching:!0}),t().then((()=>this.setState({isRefetching:!1})))),this.onMount=e=>{const{hasPermission:t}=this.props;Object(U.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!1})}}
componentDidMount(){const e="workflow-designer/view-classic-project-workflow";this.modalApi=Object(Ne.a)({name:e,tentatives:0,shouldLogError:!1}).catch((()=>(Object(Ve.a)(["wr!com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer"]),Object(Ne.a)({name:e}))))}getTooltipMessage(e){const{isServiceRefetching:t,intl:s,hasPermission:n}=this.props;return t||e?s.formatMessage(Ze.loading):n?"":s.formatMessage(Ze.noPermission)}render(){const{isServiceLoading:e,isServiceRefetching:t,issueKey:s,baseUrl:n,hasPermission:i,FlagServiceSubscriber:r,ClassicViewWorkflowService:o}=this.props,{isLoadingModal:c,isModalMounted:l,isRefetching:d}=this.state,u=c&&!l,p=!i||u,m=u||t||d;return a.a.createElement(r,null,(({showFlag:t})=>a.a.createElement(o,{issueKey:s,baseUrl:n,shouldLoadOnMount:i},(({data:s,error:n,loading:i,retry:r})=>{if(n)return a.a.createElement(Re,{onRetry:e=>{this.onRetry(e,r)}});const o=s?s.workflowName:null,c=s?s.currentStepId:null;return a.a.createElement(Je,{
onMount:this.onMount,tooltipContent:this.getTooltipMessage(e||i),isDisabled:p||i,isLoading:m,isInitialLoading:e||i,onClick:(e,s)=>this.onClick(s,t,o,c)})}))))}}lt.displayName="ViewWorkflowClassic",lt.defaultProps={ClassicViewWorkflowService:rt,FlagServiceSubscriber:Ue.a};var dt=Object(M.injectIntl)(lt);class ut extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1},this.onMount=e=>{const{hasPermission:t}=this.props;Object(U.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!0})},this.onClick=(e,t)=>{Object(U.h)(t,"viewWorkflowTrigger",{isSimplifiedProject:!0}),this.setState({isLoadingModal:!0});const{issueTypeId:s=Object(l.o)(""),projectId:n=Object(l.r)(""),onOpenModal:a}=this.props;a(s,n)}}getTooltipMessage(){const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,intl:n}=this.props;return e||t?n.formatMessage(Ze.loading):!0!==s?n.formatMessage(Ze.noPermission):""}render(){
const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,isModalMounted:n}=this.props,{isLoadingModal:i}=this.state,r=i&&!n,o=!0!==s||r,c=t||r,l=this.getTooltipMessage();return a.a.createElement(Je,{onMount:this.onMount,tooltipContent:l,isDisabled:o,isLoading:c,isInitialLoading:e,onClick:this.onClick})}}ut.displayName="ViewWorkflowSimplified",ut.defaultProps={hasPermission:!1};var pt=Object(M.injectIntl)(ut);class mt extends n.Component{constructor(...e){super(...e),this.state={isWorkflowServiceRefetching:!1},this.onWorkflowServiceRefetch=async(e,t)=>{e.stopPropagation(),this.setState({isWorkflowServiceRefetching:!0}),await t(),this.setState({isWorkflowServiceRefetching:!1})}}render(){const{baseUrl:e,issueKey:t,isModalMounted:s,onOpenModal:n,workflowServiceApi:i}=this.props,{isWorkflowServiceRefetching:r}=this.state,{data:o,loading:c,error:l,fetch:d}=i;if(l)return a.a.createElement(Re,{onRetry:e=>{this.onWorkflowServiceRefetch(e,d)}});if(!o)return null
;const{isSimplified:u,projectId:p,issueTypeId:m,hasPermission:f}=o;return!0===u?a.a.createElement(pt,{projectId:p,issueTypeId:m,isModalMounted:s,hasPermission:f,isServiceLoading:c,isServiceRefetching:r,onOpenModal:n}):a.a.createElement(dt,{baseUrl:e,issueKey:t,hasPermission:f,isServiceLoading:c,isServiceRefetching:r})}}mt.displayName="ViewWorkflow";var ft=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),bt=s("./src/packages/platform/ui/modal/src/index.js");const gt=({children:e,packageName:t})=>a.a.createElement(bt.a,{id:"workflow-readonly-modal",metricKey:"WORKFLOW_READONLY_MODAL_LOAD_START_MARK_KEY",packageName:t},e);gt.displayName="WorkflowReadonlyModalBoundary";const ht=Object(ft.f)((()=>s.e("async-issue-workflow-readonly-modal").then(s.bind(null,"./src/packages/issue/workflow-readonly-modal/src/index.js"))),{moduleId:"./src/packages/issue/workflow-readonly-modal/src/index.js"});class yt extends n.Component{constructor(...e){super(...e),this.state={shouldMountWorkflow:!1}}
static getDerivedStateFromProps(e,t){return{shouldMountWorkflow:t.shouldMountWorkflow||e.isOpen}}render(){const{issueKey:e,issueTypeId:t,baseUrl:s,locale:n,cloudId:i,projectId:r,isOpen:o,onModalMounted:c,onClose:l}=this.props,{shouldMountWorkflow:d}=this.state;return d&&a.a.createElement(gt,{packageName:"issue"},a.a.createElement(ft.b,{until:o},a.a.createElement(ht,{onMounted:c,issueKey:e,issueTypeId:t,baseUrl:s,locale:n,isOpen:o,cloudId:i,projectId:r,onClose:l})))}}yt.displayName="WorkflowModal";var Ot=yt;class jt extends n.Component{constructor(...e){super(...e),this.state={isWorkflowModalOpen:!1,isWorkflowModalMounted:!1,issueTypeId:Object(l.o)(""),projectId:Object(l.r)("")},this.statusButtonRef=Object(n.createRef)(),this.onOpenModal=(e,t)=>{this.setState({isWorkflowModalOpen:!0,issueTypeId:e,projectId:t})},this.onCloseModal=()=>{this.setState({isWorkflowModalOpen:!1},(()=>{var e;null!==(e=this.statusButtonRef)&&void 0!==e&&e.current&&this.statusButtonRef.current.focus()}))},
this.onModalMounted=()=>{this.setState({isWorkflowModalMounted:!0})}}render(){const{issueKey:e,projectType:t,isEditable:s,isOptimistic:n,initialValue:i,appearance:r,onSubmit:l,onSuccess:d,onFailure:u,onEditStart:f,onEditCancel:b,value:g,TenantContextSubscriber:h,ContainerContextSubscriber:y,preFetchTransitions:O,ViewWorkflowContextService:j}=this.props;return a.a.createElement(h,null,(({tenantContext:h})=>h?a.a.createElement(p.a,{value:g,projectType:t,initialValue:i,issueKey:e,baseUrl:h.baseUrl,onSubmit:l,onSuccess:d,onFailure:u,onEditStart:f,onEditCancel:b},(({value:i,loading:l,transitionStatus:d,error:u,resetError:p})=>a.a.createElement(m.a,{issueKey:e,baseUrl:h.baseUrl,status:i,isSaving:l,preFetch:O,projectType:t},(({data:t,loading:m,fetch:g})=>a.a.createElement(j,{ContainerContextSubscriber:y,baseUrl:h.baseUrl,issueKey:e},(y=>a.a.createElement(a.a.Fragment,null,a.a.createElement(we,{statusButtonRef:this.statusButtonRef,value:i,isEditable:s,isLoading:m||l,isSaving:!0!==n&&l,
appearance:r,transitions:t,onOpen:e=>{f(),g(e);!0!==(y.data&&void 0!==y.data.hasPermission)&&y.fetch(),p()},onClose:b,onChange:d,error:u,footer:a.a.createElement(o.a,{id:"issue-field-view-workflow"},a.a.createElement(mt,{baseUrl:h.baseUrl,issueKey:e,workflowServiceApi:y,onOpenModal:this.onOpenModal,isModalMounted:this.state.isWorkflowModalMounted}))}),a.a.createElement(c.b,null,a.a.createElement(Ot,{onModalMounted:this.onModalMounted,issueKey:e,issueTypeId:this.state.issueTypeId,baseUrl:h.baseUrl,locale:h.locale,cloudId:h.cloudId,projectId:this.state.projectId,isOpen:this.state.isWorkflowModalOpen,onClose:this.onCloseModal}))))))))):null))}}jt.displayName="StatusField",jt.defaultProps={isOptimistic:!0,TenantContextSubscriber:u.b,ContainerContextSubscriber:d.a,ViewWorkflowContextService:A,preFetchTransitions:!1,projectType:null,onEditStart:r.a,onEditCancel:r.a,onSubmit:r.a,onSuccess:r.a,onFailure:r.a}},
"./src/packages/issue/fields/status/src/ui/status-view/actions/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/utils/types/src/general.js")),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/project-context-service/src/main.js"),d=s("./src/packages/issue/fields/status/src/common/utils.js"),u=s("./src/packages/issue/fields/status/src/services/status-service/main.js"),p=s("./src/packages/issue/fields/status/src/services/transitions-query/index.js"),m=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),f=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),b=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),g=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),h=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js");const y=Object(f.a)("button",{onClick:"clicked"})(m.a),O=e=>{const{createAnalyticsEvent:t}=Object(b.a)()
;return a.a.createElement(a.a.Fragment,null,a.a.createElement(y,{onClick:(s,n)=>{const a=t({action:"clicked",actionSubject:"button"});Object(g.h)(a,"loopActionsButton"),e.onClick(e.transition,n)}},e.transition.name),a.a.createElement(h.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"loopActions",attributes:{controlType:"button"}}))}
;var j=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),v=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),E=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),w=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),k=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),C=s.n(k),S=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),I=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),T=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),_=s("./src/packages/platform/controllers/intl/src/index.js"),P=s("./node_modules/react-intl/lib/index.es.js"),x=Object(P.defineMessages)({actions:{id:"issue-field-status.status-view.actions.actions-menu.actions",defaultMessage:"Actions"}}),D=s("./node_modules/styled-components/dist/styled-components.browser.esm.js")
;const A=D.default.span.withConfig({componentId:"sc-8mzk26-0"})`padding-right:${.75*T.e}px;`,M=D.default.div.withConfig({componentId:"sc-8mzk26-1"})`margin-right:-${T.e}px;`,L=["buttonStyles"];function R(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function N(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?R(Object(s),!0).forEach((function(t){F(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function U(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const V=Object(f.a)("dropdownItem",{onClick:"clicked"})(v.a),K=e=>{const{transitions:t,onSelect:s}=e,{createAnalyticsEvent:i}=Object(b.a)(),{formatMessage:r}=Object(_.c)(),[o,c]=Object(n.useState)(!1);if(0===t.length)return null;return a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,{trigger:a.a.createElement(j.a,{appearance:"subtle",isSelected:o,iconAfter:a.a.createElement(M,null,a.a.createElement(C.a,{label:""})),theme:(e,t)=>{const s=e(t),{buttonStyles:n}=s;return N(N({},U(s,L)),{},{buttonStyles:N(N({},n),{},{padding:`0 ${T.e/2}px 0 ${T.e}px`,margin:`0 ${T.e/2}px 0 ${T.e/2}px`,backgroundColor:o?S.a.N400:S.a.N20,"&:hover":{backgroundColor:o?S.a.N500:S.a.N30,padding:`0 ${T.e/2}px 0 ${T.e}px`},"&:active":{
backgroundColor:o?S.a.N500:S.a.B50,padding:`0 ${T.e/2}px 0 ${T.e}px`}})})}},a.a.createElement(A,null,r(x.actions))),isOpen:o,onOpenChange:()=>{c(!o)}},a.a.createElement(w.a,null,t.map((e=>a.a.createElement(I.a,{key:e.id,content:e.name},a.a.createElement(V,{onClick:(t,n)=>((e,t,n)=>{const a=i({action:"clicked",actionSubject:"dropdown"});Object(g.h)(a,"loopActionsMenu"),s(e,n)})(e,0,n)},e.name)))))),a.a.createElement(h.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"loopActions",attributes:{controlType:"menu"}}))},$=D.keyframes`0%{opacity:0;max-height:0;}50%{max-height:${5*T.e}px;}100%{opacity:1;}`,W=D.default.div.withConfig({componentId:"sc-1oa307m-0"})`display:inline-flex;overflow:hidden;animation-duration:0.5s;animation-iteration-count:1;animation-name:${e=>e.animationEnabled?$:"none"};animation-timing-function:linear;white-space:nowrap;text-overflow:ellipsis;`,B=({initialStatusValue:e,onSubmit:t,onSuccess:s})=>{
const i=Object(c.g)(),m=Object(o.c)(""),f=Object(c.i)(),b=Object(l.i)(f),[g,h]=Object(n.useState)(!1);return a.a.createElement(u.a,{projectType:b||null,issueKey:i,baseUrl:m,onSubmit:t,onSuccess:(...e)=>{h(!0),s(...e)},onFailure:r.a,onEditStart:r.a,onEditCancel:r.a,initialValue:e},(({value:e,loading:t,transitionStatus:s})=>a.a.createElement(p.a,{issueKey:i,baseUrl:m,status:e,isSaving:t,preFetch:!0,projectType:b},(({data:t})=>{const n=Object(d.b)(t,e.id);return 0===n.length?null:1===n.length?a.a.createElement(W,{animationEnabled:g},a.a.createElement(O,{transition:n[0],onClick:s})):a.a.createElement(W,{animationEnabled:g},a.a.createElement(K,{transitions:n,onSelect:s}))}))))};B.displayName="Actions";t.a=B},"./src/packages/issue/fields/status/src/ui/status-view/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({noPermission:{id:"issue-field-status.status-view.no-permission",
defaultMessage:"You don't have permission to transition this issue"},cannotLoadTransitions:{id:"issue-field-status.status-view.cannot-load-transitions",defaultMessage:"We couldn't load the statuses and transitions"},changeStatus:{id:"issue-field-status.status-view.change-status",defaultMessage:"Change status"}})},"./src/packages/issue/fields/summary/src/common/constants.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n="INLINE",a="HEADER"},"./src/packages/issue/fields/summary/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,onSuccess:t,onFailure:s})=>{
const[n]=Object(i.a)(e,"summary"),o=a()(n.value,"schema.type","string"),[{value:c,error:l},{saveValue:d,resetError:u}]=Object(r.a)({fieldKey:"summary",issueKey:e,fieldType:o,initialValue:null,onSuccess:t,onFailure:s});return[{value:c,error:l,fieldConfig:n},{saveValue:d,resetError:u}]}},"./src/packages/issue/fields/summary/src/ui/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js")),r=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),c=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),l=s("./src/packages/platform/utils/types/src/general.js"),d=s("./src/packages/platform/controllers/intl/src/index.js"),u=s("./src/packages/issue/fields/components/error-flag/src/main.js"),p=s("./src/packages/issue/fields/components/inline-edit/src/ui/index.js"),m=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),f=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}
function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const y={action:"confirmed",actionSubject:"inlineEdit",attributes:{componentName:"inlineEdit"}},O=g(g({},y),{},{action:"cancelled"});var j=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const v=()=>Object(j.b)("issue.details.inline-edit-bump",!1)
;var E=s("./src/packages/issue/fields/summary/src/services/index.js"),w=s("./node_modules/@atlaskit/icon/glyph/warning.js"),k=s.n(w),C=s("./node_modules/@atlaskit/inline-dialog/dist/es2019/InlineDialog/index.js"),S=s("./node_modules/@atlaskit/textfield/dist/es2019/text-field.js"),I=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js"),T=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),P=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const x=T.default.div.withConfig({componentId:"sc-1r9nmzv-0"
})`display:flex;flex:1 0 auto;justify-content:space-between;overflow:hidden;align-items:center;margin-left:${1.25*P.e}px;border-color:${e=>e.isInvalid?_.a.R400:null};border-style:${e=>e.isInvalid?"solid":"none"};border-radius:${e=>e.isInvalid?"3px":null};border-width:${e=>e.isInvalid?"2px":null};`,D=Object(n.memo)((({defaultValue:e,passedRef:t,onChange:s,isInvalid:i,invalidMessage:r})=>{const o=Object(n.useCallback)((e=>{s(e.target.value)}),[s]),[c,l]=Object(n.useState)(!1),d=Object(n.useCallback)((()=>{l(!0)}),[]),u=Object(n.useCallback)((()=>{l(!1)}),[]),p=!!v()&&Object(n.useContext)(I.b),m=i?a.a.createElement(k.a,{size:"medium",primaryColor:"#FFAB00",label:""}):null;return a.a.createElement(a.a.Fragment,null,a.a.createElement(C.a,{content:r,isOpen:c&&!!r,placement:v()&&!0===p?"auto-start":"right"},a.a.createElement(x,{isInvalid:i},a.a.createElement(S.a,{type:"text",value:null===e?"":e,onChange:o,label:"",ref:t,appearance:i?"none":"subtle",onBlur:u,onFocus:d,isCompact:!0,autoFocus:!0
}),m)))}));var A=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),M=s("./node_modules/@atlaskit/textarea/dist/es2019/text-area.js"),L=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-area/index.js");const R=T.css`@media screen and (-webkit-min-device-pixel-ratio:0){word-break:break-word;}@media screen and (-webkit-transition){word-break:break-word;}@-moz-document url-prefix(){overflow-wrap:anywhere;}`,N=T.default.h1.withConfig({componentId:"sc-1rgscgt-0"})`${_.d.h700()};width:100%;margin:0;padding:0;color:${_.a.heading};${R};`,F=T.default.div.withConfig({componentId:"sc-1rgscgt-1"})`> textarea{${_.d.h700()};margin:0;color:${_.a.heading};${R};line-height:28px !important;}width:100%;`,U=T.default.div.withConfig({componentId:"sc-1o7n9ab-0"
})`display:flex;align-items:center;line-height:1;max-width:100%;word-break:break-word;position:relative;span{position:absolute;right:8px;}`,V=Object(n.memo)((({defaultValue:e,passedRef:t,onChange:s,isInvalid:i,invalidMessage:r})=>{const[o,c]=Object(n.useState)(i),l=!!v()&&Object(n.useContext)(I.b);Object(n.useEffect)((()=>{c(i)}),[i]);const d=Object(n.useCallback)((e=>{s(e.target.value)}),[s]),u=Object(n.useCallback)((()=>{!0===i&&c(!0)}),[i]),p=Object(n.useCallback)((()=>{c(!1)}),[]);return a.a.createElement(C.a,{content:r,isOpen:!0===i&&o,placement:v()&&!0===l?"auto-start":"right"},a.a.createElement(U,null,a.a.createElement(F,{ref:t,"data-test-id":"issue.views.issue-base.foundation.summary.heading.writeable"},a.a.createElement(M.a,{autoFocus:!0,isInvalid:i,value:e||"",onChange:d,onFocus:u,onBlur:p,rows:1})),!0===i&&a.a.createElement(k.a,{size:"medium",primaryColor:"#FFAB00",label:""})))})),K=Object(n.memo)((({defaultValue:e,passedRef:t,onChange:s})=>a.a.createElement(N,{innerRef:t,
"data-test-id":"issue.views.issue-base.foundation.summary.heading.writeable"},a.a.createElement(L.a,{shouldAutoFocus:!0,value:e,onChange:s})))),$=Object(A.a)(v,V,K);var W=s("./node_modules/react-intl/lib/index.es.js"),B=Object(W.defineMessages)({errorEmpty:{id:"issue-field-summary.error-empty",defaultMessage:"You must specify a summary of the issue."},errorTitle:{id:"issue-field-summary.error-title",defaultMessage:"We couldn't save the issue summary."},errorMessage:{id:"issue-field-summary.error-message",defaultMessage:"Check your connection, then give it another try."},editButtonLabel:{id:"issue-field-summary.edit-button-label",defaultMessage:"Edit summary"},extendedEditButtonLabel:{id:"issue-field-summary.extended-edit-button-label",defaultMessage:"{inputFieldValue}- edit summary"}}),H=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js");T.default.div.withConfig({componentId:"h4ph0t-0"})`& > div:first-child{margin-left:0;}`
;const G=T.default.div.withConfig({componentId:"h4ph0t-1"})`display:flex;line-height:1;max-width:100%;word-break:break-word;padding-top:6px;padding-bottom:6px;position:relative;left:6px;`,q=T.default.div.withConfig({componentId:"h4ph0t-2"})`width:100%;margin-left:-8px;margin-top:-8px;> div{width:100%;padding-right:8px;}`,z=Object(T.default)(H.a).withConfig({componentId:"h4ph0t-3"})`width:100%;`,Y=({value:e})=>{const t=null===e?"":e.toString();return a.a.createElement(N,{"data-test-id":"issue.views.issue-base.foundation.summary.heading"},t)};Y.displayName="SummaryView";var Q=s("./src/packages/issue/fields/summary/src/ui/view/inline-read/main.js");t.a=Object(n.memo)((e=>{var t
;const{onCancel:s,onEdit:b,onEscape:g,onConfirm:h,onEnter:j,onUpdate:w,readView:k,editView:C,issueKey:S,source:I,onFailure:T,onRenderSuccess:_,onEditFailure:P,appearance:x="INLINE"}=e,A=I&&I.value===r.a.MOBILE_ISSUE,[M,L]=Object(n.useState)(!1),[R,N]=Object(n.useState)(!1),{formatMessage:F}=Object(d.c)(),U=R?F(B.errorEmpty):void 0,V=Object(n.useRef)(),K=Object(n.useRef)(),{createAnalyticsEvent:W}=Object(m.a)(),[{value:H,error:J,fieldConfig:{value:Z,loading:X}},{saveValue:ee,resetError:te}]=Object(E.a)({issueKey:Object(l.m)(S),onSuccess:e=>{w&&w(e)},onFailure:e=>{e instanceof c.a||e instanceof TypeError||Object(c.c)(e)||(T&&T(e,K.current),M&&P&&P("summary",e.message))}}),se=null!==(t=null==Z?void 0:Z.title)&&void 0!==t?t:"",[ne,ae]=Object(n.useState)(H),ie=!!Z&&Z.isEditable;Object(n.useEffect)((()=>{_&&_()}),[]),Object(n.useEffect)((()=>{K.current=H,J&&L(!0),M||ae(H)}),[J,M,H]);const re=Object(n.useCallback)((e=>{ne!==H?(ee(ne,null,e),L(!1)):L(!1),Object(f.h)(e)
}),[ee,ne,H]),oe=Object(n.useCallback)((e=>{te(),L(!1),ae(H),Object(f.h)(e)}),[te,H]),ce=Object(n.useCallback)((e=>{document&&document.activeElement&&document.activeElement.blur(),N(!1),oe(e),s&&s(e)}),[s,oe]),le=Object(n.useCallback)((e=>{null!==ne&&""!==ne?(document&&document.activeElement&&document.activeElement.blur(),re(e),h&&h(e,ne)):R||N(!0)}),[R,h,re,ne]),de=Object(n.useCallback)((e=>{L(!0),Object(f.h)(e),b&&b(e)}),[b]),ue=Object(n.useCallback)((e=>{te();const t=""===e?null:e.toString();null!==t&&N(!1),ae(t)}),[te,ae]),pe=Object(n.useCallback)((e=>{oe(e),g&&g(e)}),[g,oe]),me=Object(n.useCallback)((e=>{re(e),j&&j(e)}),[j,re]),fe=Object(n.useCallback)((()=>{const e=W(y);le(e)}),[W,le]),be=Object(n.useCallback)((e=>{e.preventDefault(),e.stopPropagation();const t=W(O);ce(t)}),[W,ce]),ge=Object(n.useCallback)((()=>{if(!ie)return null;const e="INLINE"===x?a.a.createElement(D,{passedRef:V,defaultValue:ne,onChange:ue,isInvalid:R,invalidMessage:U}):a.a.createElement($,{passedRef:V,
defaultValue:ne,onChange:ue,isInvalid:R,invalidMessage:U});return void 0!==C&&"function"==typeof C?Object(n.createElement)(C,{passedRef:V,defaultValue:ne,onChange:ue}):a.a.createElement(z,{onEnter:fe,onEscape:be},e)}),[ie,x,ne,ue,R,U,fe,be,C]),he=()=>{const e="INLINE"===x?null:a.a.createElement(Y,{value:H});return void 0!==k&&"function"==typeof k?Object(n.createElement)(k,{value:H}):e};if(V.current&&M&&R){const e=V.current,t=e instanceof HTMLElement?e.querySelector("textarea"):void 0,s="INLINE"===x?e:t,n=document?document.activeElement:null;s&&s!==n&&s.focus()}const ye=()=>null!==H?F(B.extendedEditButtonLabel,{inputFieldValue:H}):F(B.editButtonLabel),Oe=a.a.createElement(a.a.Fragment,null,J&&a.a.createElement(u.a,{error:J,title:B.errorTitle,description:B.errorMessage}),v()?a.a.createElement(q,null,a.a.createElement(p.a,{defaultValue:ne,readView:()=>a.a.createElement(G,null,he()),editView:ge,onCancel:ce,onConfirm:le,onEnter:me,onEscape:pe,onEdit:de,readViewFitContainerWidth:!A,
isEditing:M,isEditable:ie,editButtonLabel:ye(),confirmButtonLabel:F(o.a.confirmButtonLabel,{fieldName:se}),cancelButtonLabel:F(o.a.cancelButtonLabel,{fieldName:se})})):a.a.createElement(i.a,{label:se,isLabelHidden:!0,defaultValue:ne,readView:he(),editView:ge(),onCancel:ce,onConfirm:le,onEditRequested:de,onEnter:me,onEscape:pe,isFitContainerWidthReadView:!A,isEditable:ie,isEditing:M,invalidMessage:U,isInvalid:R,editButtonLabel:ye(),confirmButtonLabel:F(o.a.confirmButtonLabel,{fieldName:se}),cancelButtonLabel:F(o.a.cancelButtonLabel,{fieldName:se}),disableEditViewFieldBase:"INLINE"===x}));return"HEADER"===x||M?Oe:a.a.createElement(Q.a,{value:ne,setIsEditing:L,isEditable:ie,isConfigLoading:X})}))},"./src/packages/issue/fields/summary/src/ui/view/inline-read/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return j}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),c=s("./node_modules/@atlaskit/icon/glyph/editor/edit.js"),l=s.n(c),d=s("./node_modules/@atlaskit/side-navigation/dist/es2019/components/Item/link-item.js"),u=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),p=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),m=s("./src/packages/platform/controllers/intl/src/index.js"),f=s("./node_modules/react-intl/lib/index.es.js"),b=Object(f.defineMessages)({editSummary:{id:"issue-field-summary.inline-read.edit-summary",defaultMessage:"Edit Summary"},noPermission:{id:"issue-field-summary.inline-read.no-permission",defaultMessage:"Contact your admin for the Edit Issues permission to edit this summary"}});function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const O=e=>h(h({},e),{},{display:"flex",padding:"0 6px 1px",backgroundColor:"transparent",border:"2px solid transparent",color:u.a.N800,"&:hover":{color:u.a.N800,backgroundColor:"transparent",cursor:"pointer",textDecoration:"underline"},"&:focus, &:active":{color:u.a.N800,outline:"none",boxShadow:"none",backgroundColor:"transparent"},"& [data-item-elem-after]":{marginLeft:"8px",opacity:"1"},"& span":{flexGrow:0},
'&[aria-disabled="true"]':{cursor:"not-allowed",backgroundColor:"transparent!important",textDecoration:"none"},"& [data-item-title]:hover":{textDecoration:"underline"},"& button":{height:"24px",width:"24px"}}),j=({value:e,setIsEditing:t,isEditable:s,isConfigLoading:i,isInlineEditEnabled:c=!0})=>{const f=null===e?"":e.toString(),[g,h]=Object(n.useState)(!1),{formatMessage:y}=Object(m.c)(),j=Object(n.useCallback)((()=>{h(!0)}),[]),v=Object(n.useCallback)((()=>{h(!1)}),[]);return a.a.createElement(p.a,{content:f,position:"bottom",hideTooltipOnMouseDown:!0},a.a.createElement(d.a,{cssFn:O,onClick:r.a,onMouseOver:j,onMouseLeave:v,onFocus:j,iconAfter:c&&g&&a.a.createElement(p.a,{content:(()=>void 0===i||i?"":y(!i&&s?b.editSummary:b.noPermission))()},a.a.createElement(o.a,{onClick:e=>{e.stopPropagation(),v(),s&&t&&t(!0)},iconAfter:a.a.createElement(l.a,{size:"medium",label:y(b.editSummary),primaryColor:s?void 0:u.a.N60}),appearance:void 0===i||i||!s?"link":"subtle",onBlur:v})),tabIndex:"0"
},f))};j.displayName="InlineSummaryRead"},"./src/packages/issue/fields/team/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({errorTitle:{id:"issue-field-team.error-title",defaultMessage:"We couldn't set the team value"},errorMessage:{id:"issue-field-team.error-message",defaultMessage:"Check your connection, then give it another try."},teamErrorViewTooltip:{id:"issue-field-team.team-error-view-tooltip",defaultMessage:"This team may have been deleted, or you do not have access"},teamErrorViewText:{id:"issue-field-team.team-error-view-text",defaultMessage:"Not available"},placeholderTeamEditSelectorNonfinal:{id:"issue-field-team.placeholder-team-edit-selector-nonfinal",defaultMessage:"Find a team..."}})},"./src/packages/issue/fields/team/src/ui/edit-mode/main.js":function(e,t,s){"use strict";s.r(t)
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/user-picker/dist/es2019/components/smart-user-picker/components/index.js"),r=s("./src/packages/platform/controllers/intl/src/index.js"),o=s("./src/packages/issue/base-components/base-select/src/ui/styled.js"),c=s("./src/packages/issue/fields/team/src/messages.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,
enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=e=>{const{formatMessage:t}=Object(r.c)(),{siteId:s,defaultValue:n,isClearable:l=!0,isDisabled:u=!1,autoFocus:p=!1,width:m="100%",debounceTime:f=300,onChange:b,placeholder:g=t(c.a.placeholderTeamEditSelectorNonfinal),isDropdownMenuFixedAndLayered:h=!1,styles:y}=e;let O=y;return!0===h&&(O=d(d({},o.f),y||{})),a.a.createElement(i.a,{width:m,autoFocus:p,appearance:"compact",debounceTime:f,fieldId:"team",includeGroups:!1,includeTeams:!0,includeUsers:!1,isClearable:l,isMulti:!1,isDisabled:u,productKey:"jira",siteId:s,value:n,onChange:b,placeholder:g,menuPosition:!0===h?"fixed":void 0,styles:O})};p.displayName="TeamPickerEdit",t.default=p},"./src/packages/issue/fields/voters/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({fetchVotersListFailedTitle:{id:"issue-field-voters.fetch-voters-list-failed-title",defaultMessage:"We couldn't load the voters list"},
fetchVotersListFailedDescription:{id:"issue-field-voters.fetch-voters-list-failed-description",defaultMessage:"Check your connection, then give it another try."},updateVoteFailedTitle:{id:"issue-field-voters.update-vote-failed-title",defaultMessage:"We couldn't update your vote status"},updateVoteFailedDescription:{id:"issue-field-voters.update-vote-failed-description",defaultMessage:"Check your connection, then try clicking vote again."},addVoteLabel:{id:"issue-field-voters.add-vote-label",defaultMessage:"Vote for this issue"},removeVoteLabel:{id:"issue-field-voters.remove-vote-label",defaultMessage:"Remove Vote"},voteOptionsTooltip:{id:"issue-field-voters.vote-options-tooltip",defaultMessage:"Vote options"},emptyVotersMessage:{id:"issue-field-voters.empty-voters-message",defaultMessage:"No one has voted for this issue"},votersListLabel:{id:"issue-field-voters.voters-list-label",defaultMessage:"Voted for this issue"}})},
"./src/packages/issue/fields/voters/src/services/voters-list-service/context.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return p}));var n={};s.r(n),s.d(n,"setVoters",(function(){return o})),s.d(n,"setLoggedInUserAction",(function(){return c}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const o=e=>({setState:t})=>{t({voters:e})},c=e=>({setState:t})=>{t({loggedInUserAction:e})},l=Object(a.a)({name:"issue-voters",initialState:{voters:[],loggedInUserAction:void 0},actions:n}),d=Object(i.a)(l,{selector:e=>e.voters}),u=Object(i.a)(l,{selector:e=>e.loggedInUserAction}),p=Object(r.a)(l)},"./src/packages/issue/fields/voters/src/services/voters-list-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return O}))
;var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/services/common/src/use-service/index.js")),i=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),r=s("./src/packages/platform/ui/flags/src/services/index.js"),o=s("./src/packages/issue/issue-context-service/src/main.js"),c=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),l=s("./src/packages/platform/services/user/src/main.js"),d=s("./src/packages/issue/fields/voters/src/messages.js"),u=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js");const p="ADDED",m="REMOVED";var f=s("./src/packages/platform/utils/types/src/general.js");const b=e=>({id:Object(f.a)(e.accountId),displayName:e.displayName,avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"]});function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const O=()=>{const[{data:e}]=Object(l.b)(),[t,{setVoters:s}]=Object(u.c)(),[f,{setLoggedInUserAction:g}]=Object(u.b)(),y=Object(o.g)(),{showFlag:O}=Object(r.f)(),[j,{setFieldValue:v}]=Object(c.b)({issueKey:y,fieldKey:"votes"
}),[E,w]=Object(n.useState)(!1),k=Object(n.useCallback)((()=>Object(i.b)(`/rest/api/3/issue/${y}/votes`)),["",y]),{loading:C,error:S,data:I,fetch:T}=Object(a.a)(k),_=Object(n.useMemo)((()=>I&&I.voters?I.voters.map(b):t),[I]);Object(n.useEffect)((()=>{I&&I.voters&&(s(_),w(!0))}),[I,s,_]);const P=Object(n.useMemo)((()=>{const t=e?b(e):null;switch(f){case p:return((e,t)=>t&&-1===e.findIndex((e=>e.id===t.id))?[...e,t].sort(((e,t)=>e.displayName.localeCompare(t.displayName))):e)(_,t);case m:return((e,t)=>t?e.filter((e=>e.id!==t.id)):e)(_,t);default:return _}}),[e,f,_]);Object(n.useEffect)((()=>{S&&O({type:"error",title:d.a.fetchVotersListFailedTitle,description:d.a.fetchVotersListFailedDescription})}),[S,O]),Object(n.useEffect)((()=>{if(E&&j.votes!==P.length){const e=void 0===f;v(y,"votes",h(h({},j),{},{votes:P.length,hasVoted:e?j.hasVoted:f===p}))}w(!1)}),[E]);const x=Object(n.useCallback)((()=>{g(p)}),[g]),D=Object(n.useCallback)((()=>{g(m)}),[g]),A=Object(n.useCallback)((()=>{C||T()
}),[T,C]),M=Object(n.useMemo)((()=>({setLoggedInUserActionVote:x,setLoggedInUserActionUnvote:D,refreshVoters:A})),[x,A,D]);return[{voters:P,isFetching:C,error:S},M]}},"./src/packages/issue/fields/voters/src/ui/button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),r=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/icon/glyph/like.js")),o=s.n(r),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),d=s("./node_modules/@atlassian/react-transitive-number/index.js"),u=s.n(d),p=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),f=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const b=m.default.span.withConfig({componentId:"x994fw-0"
})`display:flex;align-items:center;${e=>e.hasVoted&&!e.isSelected?`color: ${f.a.B500};`:""}`,g=m.default.span.withConfig({componentId:"x994fw-1"})`display:flex;`,h=m.default.span.withConfig({componentId:"x994fw-2"})`min-width:${e=>e.hasVoters?"15px":"0"};`,y=({isSelected:e=!1})=>{const t=Object(c.g)(),[{hasVoted:s,votes:n}]=Object(l.b)({issueKey:t,fieldKey:"votes"});return a.a.createElement(b,{hasVoted:s,isSelected:e},a.a.createElement(g,null,s?a.a.createElement(p.a,{label:"",size:"medium"}):a.a.createElement(o.a,{label:"",size:"medium"})),a.a.createElement(h,{hasVoters:0!==n},a.a.createElement(u.a,null,0!==n?n:"")))};y.displayName="VoteIcon";var O=y,j=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js");const v=Object(m.default)(j.a).withConfig({componentId:"sc-1jxbal8-0"})`&&{padding:0 4px;align-items:center;}`,E=({onClick:e,tooltip:t=null,isSelected:s=!1,isDisabled:n=!1})=>a.a.createElement(i.a,{content:t,position:"top"},a.a.createElement(v,{
onClick:e,isSelected:s,appearance:"subtle",spacing:"default","aria-label":t,"aria-expanded":s,isDisabled:n},a.a.createElement(O,{isSelected:s})));E.displayName="VoteButton";t.a=E},"./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/dist/es2019/components/icon.js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const o=e=>a.a.createElement("svg",r({},e,{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"}),a.a.createElement("defs",null,a.a.createElement("path",{id:"like-filled-a",
d:"M4.00029867,12.0000031 L4.00029867,19.0000031 C3.99379083,19.2619469 4.0938648,19.5154845 4.27800285,19.7035645 C4.46214091,19.8916445 4.71487577,19.9984685 4.97933941,20.0000031 L5.99875297,20.0000031 L5.99875297,11.0000031 L4.97933941,11.0000031 C4.71487577,11.0015345 4.46214091,11.1083586 4.27800285,11.2964386 C4.0938648,11.4845186 3.99379083,11.7380562 4.00029867,12.0000031 Z M19.2814088,11.0400031 C18.7031035,10.3648275 17.8537454,9.97663317 16.959972,9.97900342 L14.3256459,9.97900342 C14.3660187,9.79800348 14.4063915,9.61900354 14.4366711,9.4470036 C14.9514245,6.5130046 14.4366711,5.44700497 13.9320109,4.85300517 C13.4705845,4.31076256 12.7907146,3.99849428 12.0748615,4 C10.5305357,4.05274499 9.2630356,5.22781051 9.10745966,6.75100452 C8.71382472,8.59000389 8.6532655,8.75100384 8.13851212,9.47600359 L7.37142865,10.5650032 C7.13702441,10.900368 7.01037109,11.2980817 7.00807332,11.7060028 L7.00807332,17.9790007 C7.0094101,18.5107601 7.22390249,19.0202137 7.60436426,19.3952867 C7.98482603,19.7703597 8.50009148,19.9803277 9.03680723,19.9790426 L16.2837274,19.9790426 C17.7690249,19.9867984 19.0398298,18.9240081 19.2814088,17.4720009 L19.9576535,13.4720022 C20.1064636,12.6021375 19.8588502,11.7116379 19.2814088,11.0400031 Z"
})),a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("use",{fill:"currentColor",xlinkHref:"#like-filled-a"}),a.a.createElement("path",{fill:"inherit",d:"M17.2829545,17.140001 C17.2013522,17.6232979 16.7783039,17.9768163 16.2837274,17.9750077 L9.03680723,17.9750077 L9.03680723,11.7060028 L9.8038907,10.6170032 C10.5252697,9.572607 10.9727451,8.36664508 11.105914,7.1080044 C11.1422788,6.56547046 11.3606605,5.89943888 12.0748615,6.00000478 C12.7890625,6.10057068 12.6501741,7.91600412 12.4382168,9.10000372 C12.2228565,10.0810361 11.9326853,11.0444672 11.5702013,11.9820027 L16.959972,11.9740027 C17.2574249,11.9729101 17.5402185,12.1018688 17.7328364,12.3264423 C17.9254544,12.5510157 18.0082813,12.848334 17.9591992,13.1390023 L17.2829545,17.140001 Z"})));o.displayName="likeIconFilled";const c=({size:e,label:t,secondaryColor:s="#B3D4FF"})=>a.a.createElement(i.b,{glyph:o,size:e,label:t,secondaryColor:s});c.displayName="LikeIconFilled",t.a=c},
"./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/icon/glyph/like.js")),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),c=s("./src/packages/platform/controllers/intl/src/index.js"),l=s("./src/packages/issue/fields/voters/src/messages.js"),d=s("./node_modules/lodash/get.js"),u=s.n(d),p=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),m=s("./src/packages/platform/ui/flags/src/services/index.js"),f=s("./src/packages/platform/utils/types/src/general.js"),b=s("./src/packages/issue/issue-context-service/src/main.js"),g=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),h=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),y=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),O=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),j=s("./src/packages/issue/fields/voters/src/services/voters-list-service/main.js");function v(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const k=()=>{const e=Object(b.g)(),[,{setLoggedInUserActionVote:t,setLoggedInUserActionUnvote:s}]=Object(j.a)(),[a]=Object(g.a)(e,"votes"),i=u()(a.value,"schema.type","votes"),{showFlag:r}=Object(m.f)(),{createAnalyticsEvent:o}=Object(y.a)(),c=Object(n.useCallback)(((e,n)=>{r({type:"error",
title:l.a.updateVoteFailedTitle,description:l.a.updateVoteFailedDescription}),n.hasVoted?s():t()}),[r,s,t]),[{value:d,error:v},{saveValue:w,resetError:k}]=Object(h.a)({fieldKey:"votes",issueKey:e,fieldType:i,initialValue:{hasVoted:!1,votes:0},saveField:(t,s,n,a)=>(({issueKey:e,newValue:t,baseUrl:s})=>t.hasVoted?Object(p.d)(`${s}/rest/api/3/issue/${e}/votes`):Object(p.a)(`${s}/rest/api/3/issue/${e}/votes`))({issueKey:e,newValue:n,baseUrl:Object(f.c)(a)}),onFailure:c}),C=Object(n.useCallback)(((e=!1)=>{const n=!d.hasVoted,a=o({action:"clicked",actionSubject:"button"});Object(O.h)(a,n?"voteAdded":"voteRemoved",{viewMode:e?"showVotersList":"hideVotersList"}),n?t():s(),w(((e,t)=>E(E({},t),{},e?{votes:t.votes+1,hasVoted:!0}:{votes:t.votes-1,hasVoted:!1}))(n,d),null,a)}),[d,o,t,s,w]);return[{value:d,error:v,fieldConfig:a},{toggleValue:C,resetError:k}]}
;var C=s("./src/packages/issue/fields/voters/src/ui/button/index.js"),S=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),I=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),T=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js");const _=Object(I.default)(T.a).withConfig({componentId:"luf30j-0"})`&&&{padding:8px 12px 7px;}`,P=({onClick:e,isDropdownItem:t=!1,disableVotingProps:s={isDisabled:!1}})=>{const{isDisabled:i,tooltips:d}=s,{formatMessage:u}=Object(c.c)(),[{value:p},{toggleValue:m}]=k(),{buttonLabel:f,disabledTooltip:b}=Object(n.useMemo)((()=>p.hasVoted?{buttonLabel:u(l.a.removeVoteLabel),disabledTooltip:null==d?void 0:d.removeVote}:{buttonLabel:u(l.a.addVoteLabel),disabledTooltip:null==d?void 0:d.addVote}),[d,u,p.hasVoted]),g=Object(n.useCallback)((()=>{null==e||e(),m(t)}),[t,e,m]);return t?a.a.createElement(o.a,{content:i&&void 0!==b?b:null},a.a.createElement(_,{
elemBefore:p.hasVoted?a.a.createElement(r.a,{label:"",size:"medium"}):a.a.createElement(S.a,{label:"",size:"medium"}),onClick:g,isDisabled:i},f)):a.a.createElement(C.a,{tooltip:i?b:f,onClick:g,isDisabled:i})};P.displayName="VoteToggle";t.a=P},"./src/packages/issue/forge-service/src/services/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return u}));var n={};s.r(n),s.d(n,"setForge",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=e=>({setState:t})=>{t(e)},o=Object(a.a)({name:"issue-view-layout-forge-apps-service",initialState:{customField:[],issueAction:[],issueActivity:[],issueGlance:[],issuePanel:[],activeAction:null,customFieldType:[]},actions:n}),c=Object(i.a)(o),l=Object(i.a)(o,{selector:null}),d=()=>{const[e]=c();return[e.issueGlance]},u=()=>{const[,e]=l();return[void 0,e]}},
"./src/packages/issue/format-date/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./src/packages/platform/utils/constants/src/supported-locales.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const i="en-US",r=e=>{if("string"!=typeof e)return a.h.safeErrorWithoutCustomerData("jira-issue-format-date.standardize-locale",`Invalid input type for locale was passed in: ${e}. Falling back to en-US.`),i;const t=e.replace("_","-");switch(t){case"en":return"en-US";case"en-UK":return"en-GB";default:return n.a.includes(e)||a.h.safeWarnWithoutCustomerData("jira-issue-format-date.standardize-locale",`Discovered unsupported locale: ${e}. This value was not modified, but its use may lead to unpredictable behaviour for formatting.`),t}},o=e=>{try{return Intl.DateTimeFormat(i,{timeZone:e}),e}catch(t){
return void a.h.safeErrorWithoutCustomerData("jira-issue-format-date.verify-time-zone",`Invalid timeZone: ${String(e)}. Date time formatting cannot be performed with this value. Falling back to undefined`,t)}}},"./src/packages/issue/format-date/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/services/user-current/src/main.js")),i=s("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js");const r={day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"numeric"},o={day:"2-digit",month:"short",year:"numeric"};var c=s("./src/packages/issue/format-date/src/common/utils.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}
function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{DateTimeFormat:p}=Intl,m=e=>{const{data:{user:{timeZone:t}}}=Object(a.a)(),s=null!=e?e:t,l=Object(i.a)(),u=Object(c.a)(l),m=Object(c.b)(s),f=Object(n.useMemo)((()=>new p(u,d(d({},r),{},{timeZone:m}))),[u,m]),b=Object(n.useMemo)((()=>new p(u,d(d({},o),{},{timeZone:"UTC"}))),[u]);return{formatDateTime:Object(n.useCallback)((e=>{const t="string"==typeof e?new Date(e):e;return f.format(t)}),[f]),formatDateOnly:Object(n.useCallback)((e=>b.format(new Date(e))),[b])}}},
"./src/packages/issue/format-time/src/common/utils/seconds-to-whole-minute-time-string/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>`${Math.round(e/60)}m`},"./src/packages/issue/format-time/src/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return u}));var n=s("./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js"),a=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),i=s("./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js"),r=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),o=s("./src/packages/issue/issue-view/src/common/util/types/type-check/index.js");const c=e=>t=>Object(a.a)(e.daysPerWeek,e.hoursPerDay)(t||0),l=e=>t=>{let s=t.trim();if(Object(o.a)(s)){const{defaultUnit:t}=e
;s=`${s}${Object(n.a)(t)}`}return s},d=e=>t=>{const s=l(e)(t);return""===s||Object(i.a)(s)},u=e=>t=>{const s=l(e)(t);return d(e)(s)?Object(r.a)(e.daysPerWeek,e.hoursPerDay)(s):0}},"./src/packages/issue/issue-actions/activity-feed/src/messages.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./node_modules/react-intl/lib/index.es.js");const a=Object(n.defineMessages)({allActivity:{id:"issue-activity-feed.all-activity",defaultMessage:"All"},comments:{id:"issue-activity-feed.comments",defaultMessage:"Comments"},history:{id:"issue-activity-feed.history",defaultMessage:"History"},worklog:{id:"issue-activity-feed.worklog",defaultMessage:"Work log"},activity:{id:"issue-activity-feed.activity",defaultMessage:"Activity"},filterBy:{id:"issue-activity-feed.filter-by",defaultMessage:"Show:"}})},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/assets/Error.svg":function(e,t,s){
e.exports=s.p+"assets/Error.be0d40cfbcd6c064b92b9530fd4cf3ce.8.svg"},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),r=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/components/subscriber.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),d=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),u=s("./node_modules/lodash/countBy.js"),p=s.n(u),m=s("./node_modules/lodash/isEmpty.js"),f=s.n(m),b=s("./node_modules/@atlaskit/icon/glyph/check.js"),g=s.n(b),h=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),y=s.n(h),O=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),j=s.n(O),v=s("./node_modules/@atlaskit/select/dist/es2019/PopupSelect/PopupSelect.js"),E=s("./node_modules/@atlaskit/select/node_modules/react-select/dist/chunk-80640036.browser.esm.js"),w=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),k=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),C=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),S=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),I=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),T=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),_=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/view/feature-flags.js"),P=Object(o.defineMessages)({
publicTooltip:{id:"issue-comment-base.comment.comment-visibility.button.public-tooltip",defaultMessage:"Visible to all users"},optionsTooltip:{id:"issue-comment-base.comment.comment-visibility.button.options-tooltip",defaultMessage:"Only visible to {value}"}}),x=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const D=x.default.div.withConfig({componentId:"tdfngc-0"})`display:flex;align-items:center;${e=>e.removeIconMargin?`margin: 0 ${-C.e/2}px;`:null};`,A=x.default.div.withConfig({componentId:"tdfngc-1"})`white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:250px;${e=>e.flagChange?`margin-left: ${C.e/2}px;`:null};`,M=["buttonStyles"],L=["buttonStyles"];function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function F(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?N(Object(s),!0).forEach((function(t){U(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function U(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function V(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}
const K=(e,t)=>{const s=e(t),{buttonStyles:n}=s,a=V(s,M);return F({buttonStyles:F(F({},n),{},{maxWidth:"300px"})},a)},$=(e,t)=>{const s=e(t),{buttonStyles:n}=s,a=V(s,L);return F({buttonStyles:F(F({},n),{},{maxWidth:"300px"})},a)},W=({selectedOption:e,isSelected:t})=>{const s="public"===e.type,n=s?j.a:y.a,i=s?a.a.createElement(o.FormattedMessage,P.publicTooltip):a.a.createElement(o.FormattedMessage,R({},P.optionsTooltip,{values:{value:e.value}}));return a.a.createElement(k.a,{content:i,position:"left"},Object(_.a)()?a.a.createElement(I.a,{spacing:"default",theme:K,isSelected:t,shouldFitContainer:!0,iconBefore:a.a.createElement(D,{removeIconMargin:!s},a.a.createElement(n,{label:""}))},!s&&a.a.createElement(A,{flagChange:Object(_.a)()},e.value)):a.a.createElement(T.a,{spacing:"default",theme:$,isSelected:t,shouldFitContainer:!0,iconBefore:a.a.createElement(D,{removeIconMargin:!s},a.a.createElement(n,{label:""}))},!s&&a.a.createElement(A,null,e.value)))};W.displayName="TargetButton"
;var B=W,H=s("./src/packages/platform/controllers/intl/src/index.js"),G=Object(o.defineMessages)({errorMessage:{id:"issue-comment-base.comment.comment-visibility.error-image.error-message",defaultMessage:"We couldn't load the visibility options"}}),q=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/assets/Error.svg"),z=s.n(q);const Y=x.default.div.withConfig({componentId:"sc-1egl7pt-0"})`width:${25*C.e}px;`,Q=x.default.div.withConfig({componentId:"sc-1egl7pt-1"})`width:${10*C.e}px;height:${10*C.e}px;margin:12px 0;background:center no-repeat url(${z.a});`,J=x.default.div.withConfig({componentId:"sc-1egl7pt-2"})`display:flex;flex-direction:column;align-items:center;`,Z=x.default.p.withConfig({componentId:"sc-1egl7pt-3"})`color:${w.a.N200};text-align:center;`,X=()=>{const e=Object(H.c)();return a.a.createElement(Y,null,a.a.createElement(J,null,a.a.createElement(Q,null),a.a.createElement(Z,null,e.formatMessage(G.errorMessage))))}
;X.displayName="ErrorImage";var ee=X,te=Object(o.defineMessages)({visibleToAllUsers:{id:"issue-comment-base.comment.comment-visibility.visible-to-all-users",defaultMessage:"Visible to all users"},projectRolesLabel:{id:"issue-comment-base.comment.comment-visibility.project-roles-label",defaultMessage:"Project roles"},groupsLabel:{id:"issue-comment-base.comment.comment-visibility.groups-label",defaultMessage:"Groups"}}),se=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),ne=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/view/utils.js");function ae(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ie(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(s),!0).forEach((function(t){re(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ae(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function re(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const oe=(e,t,s)=>e.filter((e=>e.type===s)).map((e=>ie(ie({},e),{},{selected:!!e&&Object(ne.a)(e,t)}))),ce=e=>({label:"",options:[ie(ie({},se.a),{},{selected:"public"===e.type})]});var le=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js");const de=x.default.div.withConfig({componentId:"sc-1jxw4w7-0"})`display:flex;justify-content:center;align-items:center;height:${18*C.e}px;`,ue=()=>a.a.createElement(de,null,a.a.createElement(le.a,null));ue.displayName="LoadingSpinner";const pe=x.default.div.withConfig({componentId:"x1njga-0"})`display:flex;justify-content:left;align-items:center;`,me=x.default.span.withConfig({componentId:"x1njga-1"
})`padding:0 5px 0 0;flex-shrink:0;max-height:${3*C.e}px;`,fe=x.default.span.withConfig({componentId:"x1njga-2"})`margin-left:${C.e/2}px;max-height:${3*C.e}px;`,be=x.default.div.withConfig({componentId:"x1njga-3"})`font-size:11px;font-weight:initial;padding-top:4px;`,ge=x.default.div.withConfig({componentId:"x1njga-4"})`white-space:nowrap;overflow:hidden;text-overflow:ellipsis;`,he=x.default.div.withConfig({componentId:"x1njga-5"})`display:flex;justify-content:center;padding:${2*C.e}px;`,ye=x.default.div.withConfig({componentId:"x1njga-6"})`min-width:${4.5*C.e}px;margin-left:${C.e/2}px;`;function Oe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function je(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(s),!0).forEach((function(t){ve(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Oe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ve(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ee="commentVisibilityView",we=({label:e})=>e&&a.a.createElement(be,null,e),ke={container:e=>je(je({},e),{},{paddingBottom:"0",paddingTop:"0"}),group:e=>je(je({},e),{},{paddingBottom:"4px",paddingTop:"0"}),option:(e,{data:{selected:t},isFocused:s})=>{const n=s?w.a.N20:e.backgroundColor,a=t?w.a.B50:n;return je(je({},e),{},{backgroundColor:a})}},Ce=()=>({placement:"bottom-end",modifiers:[{name:"offset",options:{offset:[0,C.e]}},{name:"setZIndex",enabled:!0,phase:"read",fn:({state:e})=>{var t;return je(je({},e),{},{styles:je(je({},e.styles),{},{popper:je(je({},null===(t=e.styles)||void 0===t?void 0:t.popper),{},{zIndex:C.f.modal})})})}},{
name:"preventOverflow",options:{padding:5,escapeWithReference:!0}}]}),Se=Object(S.a)("commentVisibilitySelect",{onOpen:"opened",onChange:"changed"})(v.a),Ie=({value:e,selected:t,isPublic:s})=>{const n=s?j.a:y.a;return a.a.createElement(k.a,{content:e,delay:2e3},a.a.createElement(pe,null,a.a.createElement(me,null,a.a.createElement(n,{label:""})),a.a.createElement(ge,null,e),a.a.createElement(fe,null,t?a.a.createElement(g.a,{primaryColor:w.a.B500,label:""}):null)))};Ie.displayName="OptionLabel";const Te=({isLoading:e,options:t,initialValue:s,onChange:i,error:r,intl:{formatMessage:o}})=>{const c=e||r,[u,m]=Object(n.useState)(s),[b,g]=Object(n.useState)(!1),h=Object(n.useCallback)((()=>g(!0)),[]),y=Object(n.useCallback)((()=>g(!1)),[]),O="public"===s.type;if((c||f()(t))&&O)return null;const j=c||null==t?((e,t,s)=>{const n=[ce(t)];if(e){const a=e.type===t.type&&e.value===t.value;n.push({label:"group"===e.type?s(te.groupsLabel):s(te.projectRolesLabel),options:[ie(ie({},e),{},{selected:a})]})
}return n})(s,u,o):((e,t,s)=>[ce(s),{label:t(te.projectRolesLabel),options:oe(e,s,"role")},{label:t(te.groupsLabel),options:oe(e,s,"group")}])(t,o,u),v=c?{MenuList:e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(E.z.MenuList,e,e.children),a.a.createElement(he,null,r?a.a.createElement(ee,null):a.a.createElement(ue,null)))}:void 0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(l.a,{onMount:e=>Object(d.b)(e,"commentVisibilitySelect rendered")}),a.a.createElement(ye,null,a.a.createElement(Se,{onClose:y,onOpen:e=>{h();const s=p()(t,"type");Object(d.h)(e,Ee,{roleCount:s.role||0,groupCount:s.group||0,totalCount:null==t?1:t.length+1})},maxMenuWidth:300,minMenuWidth:175,maxMenuHeight:340,formatOptionLabel:({type:e,value:t,selected:s})=>{const n="public"===e;return a.a.createElement(Ie,{isPublic:n,selected:s,value:n?o(te.visibleToAllUsers):t})},popperProps:Ce(),components:v,styles:ke,formatGroupLabel:we,options:j,target:({ref:e})=>a.a.createElement("div",{ref:e
},a.a.createElement(B,{selectedOption:u,isSelected:b})),isLoading:e,error:r,onChange:(e,t,s)=>{(e=>{i(e),m(e)})((({type:e,value:t})=>({type:e,value:t}))(e)),Object(d.h)(s,Ee)},isSearchable:null!=t&&t.length+1>30,searchThreshold:30})))};var _e=Object(c.a)([o.injectIntl])((e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(l.a,{onMount:t=>{Object(d.b)(t,"commentVisibilitySelect mounted",{isLoading:e.isLoading})}}),a.a.createElement(Te,e))));const Pe=({initialValue:e,onChange:t})=>a.a.createElement(r.a,null,(({loading:s,error:n,data:i})=>a.a.createElement(_e,{initialValue:e,onChange:t,isLoading:s,error:n,options:i?i.commentVisibilities:null})));Pe.displayName="CommentVisibilitySelect";t.a=Object(i.a)()(Pe)},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/components/subscriber.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js"),a=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/store.js");t.a=Object(n.a)(a.a,{displayName:"CommentVisibilitiesSubscriber"})},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/store.js":function(e,t,s){"use strict";var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),i=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),r=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),o=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");const c=async(e,t)=>{const{errors:s,data:n}=await Object(r.a)(e).query({
query:"\nquery CommentVisibilitiesQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        commentVisibilities {\n            type\n            value\n        }\n    }\n}\n",variables:{issueKey:t}});if(s)throw new Error("GraphqlErrorResponse");if(n&&n.viewIssue&&n.viewIssue.commentVisibilities){return(e=>e.map(o.e))(n.viewIssue.commentVisibilities)}throw new Error("GraphqlNullData")};var l={fetch:()=>async({getState:e,setState:t},{issueKey:s,baseUrl:n,createAnalyticsEvent:r})=>{const o=e();if(!(o.loading||o.error||o.data)){t({loading:!0,error:null,data:null});try{const e=await c(n,s);t({loading:!1,error:null,data:{commentVisibilities:e}}),((e,t)=>{const s=e({action:"fetched"}),n={totalCount:t.length,roleCount:t.filter((e=>"role"===e.type)).length,groupCount:t.filter((e=>"group"===e.type)).length};Object(i.c)(s,"commentVisibilities fetched",n)})(r,e)}catch(l){(e=>{const t="GraphqlErrorResponse"===e.message||"GraphqlNullData"===e.message?e.message:"other"
;Object(a.a)("issue.fetch.comment-visibilities","An error occurred attempting to fetch comment visibilities from gira",e,{errorReason:t})})(l),t({loading:!1,error:l,data:null})}}}};t.a=Object(n.a)({name:"issue-view-comment-visibilities",initialState:{data:null,loading:!1,error:null},actions:l})},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/view/feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const a=()=>Object(n.b)("independent-bump-button-bento_6a9fd",!1)},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/view/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t)=>e.value===t.value&&e.type===t.type},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}))
;const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div.withConfig({componentId:"eo6prx-0"})`flex:1 1 100%;min-width:0;input{font:inherit;}`},"./src/packages/issue/issue-context-service/src/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return A})),s.d(t,"g",(function(){return M})),s.d(t,"f",(function(){return L})),s.d(t,"i",(function(){return R})),s.d(t,"a",(function(){return N})),s.d(t,"e",(function(){return F})),s.d(t,"k",(function(){return U})),s.d(t,"c",(function(){return V})),s.d(t,"b",(function(){return K})),s.d(t,"h",(function(){return $})),s.d(t,"j",(function(){return W})),s.d(t,"l",(function(){return B}));var n={};s.r(n),s.d(n,"setIssueContext",(function(){return m})),s.d(n,"mergeIssueContext",(function(){return f})),s.d(n,"getMaxTokenLength",(function(){return b})),s.d(n,"getIsLoadedWithPage",(function(){return g})),s.d(n,"getBackButtonUrl",(function(){return h})),s.d(n,"getIsSpaEnabled",(function(){return y})),
s.d(n,"getIssueKey",(function(){return O}));var a=s("./node_modules/react/index.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./node_modules/react-sweet-state/lib/esm/components/container.js"),l=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}
return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m=e=>({setState:t})=>{t(e)},f=e=>({getState:t,setState:s})=>{s(u(u({},t()),e))},b=()=>({getState:e})=>e().maxTokenLength,g=()=>({getState:e})=>e().isLoadedWithPage,h=()=>({getState:e})=>e().backButtonUrl,y=()=>({getState:e})=>e().isSpaEnabled,O=()=>({getState:e})=>e().issueKey,j={issueKey:Object(i.m)(""),issueId:void 0,isModal:!1,maxTokenLength:0,isLoadedWithPage:!1,rapidViewMap:void 0,estimationStatistic:void 0,isLoading:!1,viewMode:void 0,analyticsSource:void 0,backButtonUrl:void 0,boardId:void 0,boardType:void 0,isSpaEnabled:!1,loginRedirectUrl:void 0,onIssueKeyChange:void 0,rapidViewId:void 0,viewScreenId:void 0},v=Object(r.a)({name:"issue-context",initialState:j,actions:n}),E=(Object(o.a)(v,{selector:e=>e}),Object(o.a)(v,{selector:e=>e.issueKey})),w=Object(o.a)(v,{selector:e=>e.issueId}),k=Object(o.a)(v,{selector:e=>e.isModal}),C=Object(o.a)(v,{
selector:e=>e.viewScreenId}),S=Object(o.a)(v,{selector:e=>void 0!==e.analyticsSource?new l.a(e.analyticsSource):void 0}),I=Object(o.a)(v,{selector:e=>e.rapidViewMap}),T=(Object(o.a)(v,{selector:e=>e.maxTokenLength}),Object(o.a)(v,{selector:e=>e.isLoadedWithPage}),Object(o.a)(v,{selector:e=>e.estimationStatistic})),_=(Object(o.a)(v,{selector:e=>e.isLoading}),Object(o.a)(v,{selector:e=>e.viewMode}),Object(o.a)(v,{selector:e=>e.backButtonUrl})),P=(Object(o.a)(v,{selector:e=>e.boardId}),Object(o.a)(v,{selector:e=>e.boardType}),Object(o.a)(v,{selector:e=>e.isSpaEnabled}),Object(o.a)(v,{selector:e=>e.loginRedirectUrl}),Object(o.a)(v,{selector:e=>e.onIssueKeyChange})),x=Object(o.a)(v,{selector:e=>e.rapidViewId}),D=(Object(c.a)(v),Object(o.a)(v,{selector:null})),A=()=>{const[e]=k();return e},M=()=>{const[e]=E();return e},L=()=>{const[e]=w();return e},R=()=>{const[e]=E();return Object(i.s)(e.split("-")[0])},N=()=>{const[e]=S();return e},F=()=>{
const[,{setIssueContext:e,mergeIssueContext:t,getMaxTokenLength:s,getIsLoadedWithPage:n,getBackButtonUrl:i,getIsSpaEnabled:r,getIssueKey:o}]=D();return[void 0,Object(a.useMemo)((()=>({setIssueContext:e,mergeIssueContext:t,getMaxTokenLength:s,getIsLoadedWithPage:n,getBackButtonUrl:i,getIsSpaEnabled:r,getIssueKey:o})),[e,t,s,n,i,r,o])]},U=()=>{const[e]=I();return e},V=()=>{const[e]=T();return e},K=()=>{const[e]=_();return e},$=()=>{const[e]=P();return e},W=()=>{const[e]=x();return e},B=()=>{const[e]=C();return e}},"./src/packages/issue/issue-context-service/src/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n="VIEW_MODE_MODAL",a="VIEW_MODE_SIDEBAR"},"./src/packages/issue/issue-fetch-services-common/src/common/utils/permalinks.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n={COMMENTS:"focusedCommentId",WORKLOG:"focusedWorklogId"},a=e=>{if(!n[e])return null;return(()=>{
let e=window.location.search.slice(1);const t={};if(e){e=e.split("#")[0];const s=e.split("&");for(let e=0;e<s.length;e+=1){const n=s[e].split("="),a=n[0],i=void 0===n[1]||decodeURIComponent(n[1]);t[a]=i}}return t})()[n[e]]}},"./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>65536},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/activity-sort-order/index.js":function(e,t,s){"use strict";t.a=()=>"activitySortOrder"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/attachments/index.js":function(e,t,s){"use strict"
;t.a=()=>"attachments(orderDirection: DESC, orderField: CREATED, maxResults: 6) {\n            nodes {\n              id\n              filename\n              mimetype\n              mediaApiFileId\n              createdDate\n              filesize\n              parentName\n              author {\n                  accountId\n              }\n              parentId\n              isParentCommentJsdInternal\n            }\n            totalCount\n            deletableCount\n          }\n    "},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/comments/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/permalinks.js");t.a=({maxResults:e,startAt:t,orderBy:s,commentAmount:a})=>{const i=Object(n.a)("COMMENTS"),r=null!=i?`, commentId: ${i}`:""
;return`\n        comments (first: ${t}${""===r&&null!=e?`, maxResults: ${e}`:""}${null!=s?`, orderBy: "${s}"`:""}${r}${""!==r&&null!=a?`, commentAmount: ${a}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                visibility {\n                    type\n                    value\n                }\n                created\n                updated\n                jsdPublic\n                bodyAdf\n            }\n            totalCount\n            startIndex\n        }\n    `}},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/ecosystem/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}))
;const n=()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised\n      ${(()=>"forge {\n        panels {\n          id\n          instances {\n            id\n            collapsed\n            added\n          }\n        }\n      }")()}\n    }\n`,a=()=>"\n      ... on GlancesField {\n        fieldKey\n        value {\n          name\n          status\n          iframe {\n            addonKey\n            moduleKey\n            options\n          }\n          icon {\n            url\n          }\n          content\n          type\n        }\n      }\n"
},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-key/index.js":function(e,t,s){"use strict";t.a=()=>"\n    ... on IssueKeyField {\n        fieldKey\n        stringValue\n    }\n"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-sections/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n}))
;const n=()=>`\n  ${(()=>"\nfragment groupItems on GroupSectionItem {\n    ... on FieldSectionItem {\n      id\n    }\n    ... on PanelSectionItem {\n      id\n    }\n    ... on EcosystemSectionItem {\n      id\n    }\n    ... on ForgeSectionItem {\n      id\n    }\n  }")()}\n  ${(()=>"\n  fragment sectionItems on SectionItem {\n    type: __typename\n    ... on FieldSectionItem {\n      id\n    }\n    ... on TabLayout {\n      id\n      name\n      items {\n        ... on FieldSectionItem {\n          id\n        }\n      }\n    }\n    ... on PanelSectionItem {\n      id\n    }\n    ... on EcosystemSectionItem {\n      id\n    }\n    ... on ForgeSectionItem {\n      id\n    }\n    ... on GroupLayout {\n      id\n      name\n      items {\n        ...groupItems\n      }\n    }\n  }")()}\n  ${(()=>"\nfragment section on Section {\n    items {\n      ...sectionItems\n    }\n  }\n  ")()}\n  `
;t.a=()=>"\n  issueSections {\n    templateKey: __typename\n    ... on PrimarySecondaryContextSections {\n      contentSection {\n        ...section\n      }\n      primaryContextSection {\n        ...section\n      }\n      secondaryContextSection {\n        ...section\n      }\n    }\n    ... on JsdSections {\n      requestPortalSection {\n        ...section\n      }\n      contentSection {\n        ...section\n      }\n      primaryContextSection {\n        ...section\n      }\n      secondaryContextSection {\n        ...section\n      }\n    }\n  }\n  "},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/jira-settings/index.js":function(e,t,s){"use strict"
;t.a=()=>`\n        jiraSettings {\n          ${(()=>"\n          timeTracking {\n            isTimeTrackingEnabled\n            hoursPerDay\n            daysPerWeek\n            defaultUnit\n            format\n          }\n    ")()}\n          ${(()=>"\n          subtasks {\n            enabled\n          }\n    ")()}\n          issueLinkTypes {\n            id\n            name\n            inward\n            outward\n          }\n          newIssueViewTransitionSettings {\n            shouldDelayChangeboarding\n            newIssueViewTransitionLockingStatus\n         }\n        }\n    `},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/layout/index.js":function(e,t,s){"use strict";t.a=()=>"\n    layoutItems {\n        location\n        category\n        items {\n        itemId\n        type\n        }\n    }\n"},
"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/licensed-products/index.js":function(e,t,s){"use strict";t.a=()=>"\n    licensedProducts {\n        name\n        status\n    }\n"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/media-context/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js")
;t.a=()=>`mediaContext(issueKey: $issueKey) {\n    userToken {\n      token\n      id\n      issueId\n      tokenDurationInMins\n    }\n    uploadToken {\n      __typename\n      ... on MediaUploadToken {\n        endpointUrl\n        token\n        targetCollection\n        tokenDurationInMins\n        clientId\n      }\n      ... on FailedMediaUploadToken {\n        error\n      }\n    }\n    readToken(maxTokenLength: ${Object(n.a)()}) {\n      clientId\n      endpointUrl\n      tokensWithFiles {\n        files {\n          issueId\n          attachmentId\n          attachmentMediaApiId\n        }\n        token\n      }\n      tokenLifespanInSeconds\n    }\n  }`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/my-preferences/index.js":function(e,t,s){"use strict"
;t.a=e=>`\n    myPreferences(keys: [\n        "jira.user.issue.changeboarding.lastinteracted",\n        "jira.user.issue.clickthrough-banner.lastinteracted",\n        "jira.user.issue.attachment.view",\n        "jira.user.issue.details.pinned-fields.${e}",\n        "jira.user.issue.details.timestamp-display-setting",\n        "jira.user.issue.pinned-fields-banner.lastinteracted",\n        "jira.user.issue.shortcut-menu.onboarding.dismissed"\n    ])\n`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/permissions/index.js":function(e,t,s){"use strict"
;t.a=()=>`\n    permissions(issueKey:$issueKey, keys:["${(()=>["ADMINISTER","ADMINISTER_PROJECTS","ASSIGN_ISSUES","EDIT_ISSUES","SCHEDULE_ISSUES","ADD_COMMENTS","DELETE_ALL_COMMENTS","DELETE_OWN_COMMENTS","EDIT_ALL_COMMENTS","EDIT_OWN_COMMENTS","CREATE_ISSUES","DELETE_ISSUES","MOVE_ISSUES","MODIFY_REPORTER","CREATE_ATTACHMENTS","DELETE_ALL_ATTACHMENTS","DELETE_OWN_ATTACHMENTS","WORK_ON_ISSUES","ASSIGNABLE_USER","LINK_ISSUES","VIEW_VOTERS_AND_WATCHERS","MANAGE_WATCHERS","EDIT_ALL_WORKLOGS","EDIT_OWN_WORKLOGS","DELETE_ALL_WORKLOGS","DELETE_OWN_WORKLOGS","USER_PICKER","VIEW_DEV_TOOLS","SERVICEDESK_AGENT","RESOLVE_ISSUES","CREATE_SUBTASK","CLONE_ISSUE"])().join('","')}"]) {\n        key\n        havePermission\n    }\n`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/project/index.js":function(e,t,s){"use strict"
;t.a=()=>"\n    project(projectKey: $projectKey) {\n        id\n        newIssueViewLockedIn\n        issueTypes {\n            id\n            name\n            iconUrl\n            subtask\n        }\n    }\n"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/remote-links/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>"\n    remoteLinks {\n        isLinkingEnabled\n        remoteLinkedIssues {\n            preview {\n                id\n                issueId\n                globalId\n                href\n                applicationType\n                applicationName\n                relationship\n                title\n            }\n        }\n    }            \n"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/worklogs/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/permalinks.js")
;t.a=({startAt:e,orderBy:t,worklogAmount:s})=>{const a=null!=t?`, orderBy: "${t}"`:"",i=Object(n.a)("WORKLOG");if(null==i)return"";return`\n        worklogs (startAt: ${e}${a}${`, worklogId: ${i}`}${null!=s?`, worklogAmount: ${s}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                created\n                started\n                updated\n                comment\n                timeSpent\n                timeSpentSeconds\n            }\n            totalCount\n            startIndex\n        }\n    `}},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return y})),s.d(t,"d",(function(){return O})),
s.d(t,"b",(function(){return j})),s.d(t,"c",(function(){return v}))
;var n=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/media-context/index.js"),a=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/comments/index.js"),i=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/worklogs/index.js"),r=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/ecosystem/index.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-key/index.js"),c=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/attachments/index.js"),l=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/layout/index.js"),d=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-sections/index.js"),u=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/remote-links/index.js"),p=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/licensed-products/index.js"),m=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/jira-settings/index.js"),f=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/permissions/index.js"),b=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/my-preferences/index.js"),g=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/project/index.js"),h=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/activity-sort-order/index.js")
;const y="issueViewInteractiveQuery",O=e=>`${e}/rest/gira/1/`,j=e=>`\nquery ${y}($issueKey: String!, $projectKey: String)  {\n        ${Object(n.a)()}\n        viewIssue(issueKey: $issueKey) {\n            issueId\n            ${Object(a.a)({maxResults:5,startAt:0,orderBy:"-created",commentAmount:Math.floor(5)})}\n            ${Object(i.a)({startAt:0,worklogAmount:Math.floor(5)})}  \n            ${Object(r.a)()}\n            fields {\n                __typename\n                    ${Object(r.b)()}\n                    ${Object(o.a)()}\n            }\n            ${Object(c.a)()}\n            ${Object(l.a)()}            \n            ${Object(d.a)()}     \n            ${Object(u.a)()}\n        }\n        ${Object(p.a)()}\n        ${Object(m.a)()}\n        ${Object(f.a)()}\n        ${Object(b.a)(e)}\n        ${Object(g.a)()}\n        ${Object(h.a)()}\n    }\n    ${Object(d.b)()}\n    \n`,v=(e,t)=>({method:"POST",body:JSON.stringify({query:j(t),variables:{issueKey:e,projectKey:t}})})},
"./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return d}));let n=null;const a=()=>(n||(n=(()=>{const e=window.featureFlags;if(e)return e;const t=document.querySelector('meta[name="ajs-fe-feature-flags"]'),s=null==t?void 0:t.getAttribute("content");return null!=s?JSON.parse(s):null})()||(()=>{var e;return null!==(e=window.ssr__feFeatureFlags)&&void 0!==e?e:null})()||{}),n),i=(e,t=!1)=>{const s=a();return s[e]?!!s[e].value:t},r=(e,...t)=>{let s="";return t.forEach(((t,n)=>{s+=e[n],s+=t.toString()})),s+=e[e.length-1],s},o=()=>(()=>i("issue.details.field-description",!1))()?"description":"";var c=(e,t)=>r`query {
        issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
            id
            viewScreenId 
            fields {
                key
                title
                ${o()}
                editable
                required
                autoCompleteUrl
                allowedValues
                content
                renderedContent
                schema {
                    custom
                    system
                    ${(()=>"configuration {\n        key\n        value\n    }\n    ")()}
                    items
                    type
                    renderer
                }
                configuration
            }
            expandAssigneeInSubtasks
            expandAssigneeInIssuelinks
            expandTimeTrackingInSubtasks
            systemFields {
                descriptionAdf {
                    value
                }
                ${(()=>"environmentAdf {\n        value\n    }")()}
            }
            customFields {
                textareaAdf {
                    key
                    value
                }
            }            
            ${(()=>"tabs {\n        id\n        name\n        items {\n            id\n            type\n        }\n    }")()}
            ${(()=>"\n    isHybridAgilityProject\n    ")()}
            ${(()=>"\n    agile {\n        epic {\n          key\n        },\n    }")()}
        }
        ${(()=>i("jsm-project-archive-and-restore",!1))()?(e=>`\n        project(projectIdOrKey: "${e}") {\n            id\n            name\n            key\n            projectTypeKey\n            simplified\n            avatarUrls {\n                key\n                value\n            }\n            archived\n            deleted\n        }`)(t):(e=>`\n        project(projectIdOrKey: "${e}") {\n            id\n            name\n            key\n            projectTypeKey\n            simplified\n            avatarUrls {\n                key\n                value\n            }\n        }`)(t)}
    }`;const l=e=>`${e}/rest/graphql/1/`,d=(e,t)=>({method:"POST",body:JSON.stringify({query:c(e,t)})})},"./src/packages/issue/issue-fetch-services/src/common/utils/client.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");let a=null;const i=e=>(a||(a=(e=>({query:({query:t,variables:s,signal:a})=>Object(n.a)(`${e}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:t,variables:s}),signal:a})}))(e)),a)},"./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.s)(e.split("-")[0])},"./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/forge/forge-ui/src/utils/fetch-modules/index.js");const a=async e=>{
const t=Object(n.a)(e,["jira:issueAction","jira:issueGlance","jira:issuePanel","jira:issueActivity","jira:customField","jira:customFieldType"]),s=await t,[a,i,r,o,c,l]=s;return{issueAction:a,issueGlance:i,issuePanel:r,issueActivity:o,customField:c,customFieldType:l}}},"./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),a=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),i=s("./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js");t.a=async(e,t)=>{const s=Object(i.a)(t),r={issueKey:t,projectKey:s};return await Object(a.a)(e).query({query:Object(n.b)(s),variables:r})}},"./src/packages/issue/issue-fetch-services/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}))
;var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),a=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js");const i=(e,t,s)=>Object(n.a)(Object(a.b)(e),Object(a.a)(t,s))},"./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));s("./node_modules/rxjs/Observable.js");var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");const i=(e,t,s)=>`${e}/rest/api/2/attachment/read/issue/${t}/credentials?maxTokenLength=${s}`;var r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const c=(e,t,s,a)=>Object(n.a)(i(e,t,s),{perf:r.i,headersProcessor:a&&a(r.i.key)}).catch((e=>{
throw new o.a(e,i("{baseUrl}","{issueKey}","{maxTokenLength}"))})),l=(e,t,s,n)=>Object(a.a)(i(e,t,s),{perf:r.i,headersProcessor:n&&n(r.i.key)})},"./src/packages/issue/issue-fetch-services/src/services/issue-media-upload-permissions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");const i=(e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}/credentials`;var r=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const o=(e,t)=>Object(n.a)(i(e,t)).catch((e=>{throw new r.a(e,i("{baseUrl}","{issueKey}"))})),c=(e,t)=>Object(a.a)(i(e,t))},"./src/packages/issue/issue-glance/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return I}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),d=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),u=s("./src/packages/issue/fields/components/field-pin/src/index.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const b=p.default.div.withConfig({componentId:"sc-18lgajf-0"
})`position:relative;overflow:hidden;display:flex;border-radius:5px;margin:0 0 0 -${f.e}px;&:hover{background:${m.a.N20};cursor:pointer;}&:focus{box-shadow:0 0 0 2px ${m.a.B100};outline:0;background:${m.a.N20};}height:${4*f.e}px;align-items:center;`,g=p.default.div.withConfig({componentId:"sc-18lgajf-1"})`overflow:hidden;margin:${f.e}px 0 ${f.e}px ${f.e}px;height:${3*f.e}px;width:${3*f.e}px;align-items:center;`,h=Object(p.default)(g).withConfig({componentId:"sc-18lgajf-2"})`margin:0 0 0 ${f.e}px;padding-left:${.25*f.e}px;padding-right:${.25*f.e}px;`,y=p.default.div.withConfig({componentId:"sc-18lgajf-3"})`white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;padding-left:${f.e}px;line-height:inherit;`,O=p.default.div.withConfig({componentId:"sc-18lgajf-4"})`position:absolute;right:0;width:${7*f.e}px;height:${5*f.e}px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,${m.a.N20} 25%);`,j=p.default.div.withConfig({componentId:"sc-18lgajf-5"
})`position:absolute;right:0;margin:6px ${f.e}px ${f.e/2}px;height:26px;width:26px;background:${m.a.N30};color:${m.a.N60};border-radius:50%;align-items:center;padding:2px 0 0 2px;`,v=p.keyframes`0%{right:-28px;}100%{right:0;}`,E=p.default.div.withConfig({componentId:"sc-18lgajf-6"})`position:absolute;animation:${v} 0.15s ease-in-out;`;function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function k(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function C(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k(Object(s),!0).forEach((function(t){S(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class I extends n.Component{constructor(...e){super(...e),this.state={isHovering:!1},this.handleOpenGlancePanel=()=>{const{onClickPayload:e,title:t,onOpenPanel:s}=this.props;s(C(C({},e),{},{title:t}))},this.eventHandlers={onClick:this.handleOpenGlancePanel,onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})}}render(){const{title:e,Icon:t,content:s,showPinButton:n,itemId:i}=this.props,p=s.length<=170?s:`${s.substring(0,170).trim()}\u2026`,m=void 0!==i
;return a.a.createElement(d.d,null,e&&a.a.createElement(d.b,null,a.a.createElement(d.c,null,e),!0===n&&m&&a.a.createElement(u.a,{fieldId:i,label:e})),a.a.createElement(d.g,{fixedHeight:!0},a.a.createElement(o.a,{content:p},a.a.createElement(l.a,{onEnter:this.handleOpenGlancePanel},a.a.createElement(b,w({tabIndex:"0"},this.eventHandlers),t&&a.a.createElement(h,null,a.a.createElement(t,null)),a.a.createElement(y,null,s),this.state.isHovering&&a.a.createElement(c.a,{mountAnimation:E},a.a.createElement(O,null,a.a.createElement(j,null,a.a.createElement(r.a,{size:"medium",label:""})))))))))}}I.displayName="Glance",I.displayName="Glance",I.defaultProps={Icon:null}},"./src/packages/issue/issue-scroll/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return p}));var n={};s.r(n),s.d(n,"setScrollTarget",(function(){return r})),s.d(n,"getScrollTargetId",(function(){return o}))
;var a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js");const r=e=>({setState:t})=>{t({scrollTarget:e})},o=e=>({getState:t})=>{const s=t();return s.scrollTarget&&s.scrollTarget.type===e&&s.scrollTarget.id||null},c=Object(i.a)({name:"issue-scroll",initialState:{scrollTarget:null},actions:n}),l=Object(a.a)(c,{selector:e=>e.scrollTarget}),d=Object(a.a)(c,{selector:null}),u=()=>{const[e,{setScrollTarget:t,getScrollTargetId:s}]=l();return[{scrollTarget:e},{setScrollTarget:t,getScrollTargetId:s}]},p=()=>{const[,{setScrollTarget:e,getScrollTargetId:t}]=d();return[void 0,{setScrollTarget:e,getScrollTargetId:t}]}},"./src/packages/issue/issue-scroll/src/services/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=Object.freeze({COMMENT:"COMMENT",WORKLOG:"WORKLOG"})},"./src/packages/issue/issue-tabs/src/services/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),
s.d(t,"a",(function(){return p}));var n={};s.r(n),s.d(n,"setIssueTabs",(function(){return o}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js");const o=(e,t)=>({setState:s})=>{s({[String(e)]:t})},c=Object(r.a)({name:"issue-tabs",initialState:{},actions:n}),l=Object(i.a)(c,{selector:(e,t)=>e[String(t)]||{}}),d=Object(i.a)(c,{selector:null}),u=e=>{const[t]=l(e);return[{issueTabs:t}]},p=()=>{const[,e]=d();return[null,Object(a.useMemo)((()=>({setIssueTabs:(t,s)=>e.setIssueTabs(t,s)})),[e])]}},"./src/packages/issue/issue-view-layout-templates/components/item-list/src/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/issue/issue-context-service/src/main.js")),r=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),c=s("./src/packages/issue/issue-view-layout/src/services/main.js"),l=s("./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js"),d=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var m=({id:e,type:t,area:s,payload:r={}})=>{const m=Object(l.a)(),f=Object(i.g)(),[,{setIssueViewLayoutContextPanel:b}]=Object(c.a)(),{createAnalyticsEvent:g}=Object(d.a)(),h=Object(n.useCallback)((s=>{
Object(u.h)(g({}),"contextPanel viewed","issueContextPanel",{contextPanelKey:e,contextPanelType:t,tabItemsCount:s.tabItems?s.tabItems.length:0}),b(f,{payload:s,title:null==s?void 0:s.title,type:t,key:e})}),[g,e,t,b,f]);if(m[t]){const n=m[t].item;return a.a.createElement(n,p({},r,{key:e,fieldId:e,area:s,onOpenPanel:h}))}return o.a.safeErrorWithoutCustomerData("issue.views.issue-base.context",`Could not find a matching component for "${e}" of type "${t}"`),null},f=s("./src/packages/issue/issue-view-layout-templates/utils/src/main.js"),b=s("./src/packages/servicedesk/common/src/global-spotlight-target/index.js");const g=({items:e,area:t})=>{const s=Object(i.g)(),[{value:n}]=Object(r.c)(s);return e.map((e=>{if("CustomItem"===e.type)return a.a.createElement("div",{key:e.id},e.item);if(null==n)return null;const{type:s,id:i}=Object(f.a)(n[e.id],e);if(Object(f.e)({type:s,id:i}))return null;const r=e.globalRef?e.globalRef:"";let o={}
;"ecosystemGlance"!==e.type&&"forgeGlance"!==e.type||(o=e.payload);const c=a.a.createElement(m,{key:i,id:i,type:s,area:t,payload:o});return r?a.a.createElement(b.a,{id:r,key:i},c):c}))}},"./src/packages/issue/issue-view-layout-templates/utils/src/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return f})),s.d(t,"c",(function(){return b})),s.d(t,"e",(function(){return h})),s.d(t,"d",(function(){return y})),s.d(t,"f",(function(){return O}));var n=s("./node_modules/lodash/isArray.js"),a=s.n(n),i=s("./node_modules/lodash/isNil.js"),r=s.n(i),o=s("./node_modules/lodash/isPlainObject.js"),c=s.n(o),l=s("./src/packages/issue/issue-view/src/configurations.js"),d=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),u=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const m=e=>(()=>{
const e=Object(l.n)();return[...Object(l.e)().filter((e=>!l.f.includes(e))),...Object.keys(e).map((t=>e[t])),"com.atlassian.jira.plugin.system.customfieldtypes:flagged"]})().find((t=>t===e)),f=(e,t)=>{const{id:s}=t,n=(t.type,t.type);if("TabLayout"===n||"ecosystemGlance"===n||"forgeGlance"===n)return{type:n,id:s};if(Object(u.c)().includes(s))return{id:s,type:s};const a=Object(d.b)(e);if(null!==a)return{type:a,id:s};const i=(null==e?void 0:e.schema)||{},r=null!==i.system?i.system:"";return{type:m(i.custom)||r||i.type,id:s}},b=e=>{const t=e?e.schema:void 0;return t?m(t.custom)||t.system||t.type:void 0},g={ecosystemGlance:!0,forgeGlance:!0,"com.pyxis.greenhopper.jira:gh-epic-status":!0,"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":!0,assignee:!0,reporter:!0,description:!0,environment:!0,duedate:!0,priority:!0,labels:!0,components:!0,"com.pyxis.greenhopper.jira:gh-sprint":!0,"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":!0,
"com.pyxis.greenhopper.jira:gh-epic-link":!0,fixVersions:!0,versions:!0,timetracking:!0,timeoriginalestimate:!0,"com.atlassian.jira.plugin.system.customfieldtypes:labels":!0,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":!0,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":!0,"com.atlassian.jira.toolkit:participants":!0,"com.atlassian.jira.plugin.system.customfieldtypes:url":!0,"com.atlassian.jira.plugin.system.customfieldtypes:float":!0,"com.pyxis.greenhopper.jira:jsw-story-points":!0,"com.atlassian.jira.plugin.system.customfieldtypes:select":!0,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":!0,"com.atlassian.jira.plugin.system.customfieldtypes:version":!0,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":!0,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":!0,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":!0,"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":!0,
"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":!0,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":!0,"com.atlassian.jira.plugin.system.customfieldtypes:people":!0,"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":!0,"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":!0,"com.atlassian.jira.plugin.system.customfieldtypes:datetime":!0,"com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team":!0,"com.atlassian.teams:rm-teams-custom-field-team":!0,"com.atlassian.jpo:jpo-custom-field-parent":!0,"com.atlassian.jpo:jpo-custom-field-baseline-start":!0,"com.atlassian.jpo:jpo-custom-field-baseline-end":!0,"com.pyxis.greenhopper.jira:jsw-issue-color":!0,"com.atlassian.servicedesk:vp-origin":!0,"com.atlassian.servicedesk.approvals-plugin:sd-approvals":!0,"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":!0,"com.atlassian.servicedesk:sd-request-participants":!0,
"com.atlassian.servicedesk:sd-customer-organizations":!0,number:!0,string:!0,option2:!0,array:!0,datetime:!0,"com.atlassian.servicedesk.assets-plugin:assetfield":!0,"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":!0,"com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list":!0,"com.atlassian.jira.plugins.cmdb:cmdb-object-cftype":!0,"com.atlassian.servicedesk:sd-request-feedback":!0,user:!0,"group-list":!0,"array-string":!0,"com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield":!0,"com.atlassian.jira.plugin.system.customfieldtypes:project":!0,forgeCustomField:!0,KNOWLEDGE_BASE:!0,SLA_PANEL:!0,devSummary:!0,releases:!0,ASSET_ONBOARDING:!0,LINKED_ALERTS:!0,CHAT_CHANNEL:(()=>Object(p.b)("jsm-chat-channel-for-incident-management",!1))(),CONFERENCE_CALL:(()=>Object(p.b)("jsm-issue-view-conference-call-field",!1))(),"com.atlassian.jira.modules.servicemanagement.responders-entity:responders-entity-field-cftype":!0,
"com.atlassian.jira.toolkit:message":!0,"com.atlassian.jira.toolkit:viewmessage":!0,"com.pyxis.greenhopper.jira:gh-epic-label":!0},h=e=>!g[e.type],y=e=>r()(e)||a()(e)&&0===e.length||c()(e)&&0===Object.keys(e).length,O=(e,t)=>!!t&&!e},"./src/packages/issue/issue-view-layout/src/services/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return j})),s.d(t,"c",(function(){return v})),s.d(t,"b",(function(){return E})),s.d(t,"a",(function(){return w}));var n={};s.r(n),s.d(n,"setIssueViewLayout",(function(){return p})),s.d(n,"setIssueViewLayoutGlance",(function(){return m})),s.d(n,"setIssueViewLayoutContextPanel",(function(){return f}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const o=["templateKey"];function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function u(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const p=(e,t)=>({getState:s,setState:n})=>{
const{templateKey:a}=t,i=u(t,o);n({[String(e)]:l(l({},s()[String(e)]),{},{templateKey:a,sections:i})})},m=(e,t)=>({getState:s,setState:n})=>{n({[String(e)]:l(l({},s()[String(e)]),{},{glance:t})})},f=(e,t)=>({getState:s,setState:n})=>{n({[String(e)]:l(l({},s()[String(e)]),{},{contextPanel:t})})},b=Object(i.a)({name:"issue-view-layout-service",initialState:{},actions:n}),g=Object(r.a)(b,{selector:(e,t)=>{var s;return(null===(s=e[String(t)])||void 0===s?void 0:s.sections)||{}}}),h=(Object(r.a)(b,{selector:(e,t)=>{var s;return(null===(s=e[String(t)])||void 0===s?void 0:s.templateKey)||"default"}}),Object(r.a)(b,{selector:(e,t)=>{var s;return null===(s=e[String(t)])||void 0===s?void 0:s.glance}})),y=Object(r.a)(b,{selector:(e,t)=>{var s;return null===(s=e[String(t)])||void 0===s?void 0:s.contextPanel}}),O=Object(r.a)(b,{selector:null}),j=e=>{const[t]=g(e);return[t]},v=e=>{const[t]=h(e);return[t]},E=e=>{const[t]=y(e);return[t]},w=()=>{const[,e]=O();return[null,{
setIssueViewLayout:Object(a.useCallback)(((t,s)=>{e.setIssueViewLayout(t,s)}),[e]),setIssueViewLayoutGlance:Object(a.useCallback)(((t,s)=>{e.setIssueViewLayoutGlance(t,s)}),[e]),setIssueViewLayoutContextPanel:Object(a.useCallback)(((t,s)=>{e.setIssueViewLayoutContextPanel(t,s)}),[e])}]}},"./src/packages/issue/issue-view-legacy-events/src/services/legacy-events/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const i="FIELD_CHANGE_REQUESTED",r="FIELD_CHANGED",o="FIELD_CHANGE_FAILED",c={[i]:i,[o]:o,[r]:r};function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p={fieldChanged:(e,t,s)=>({getState:n})=>{n().eventHandlers.onChange.forEach((n=>{n({issueId:e,fieldId:t,meta:{fieldId:t,fieldValue:s},type:c.FIELD_CHANGED})}))},fieldChangeFailed:(e,t)=>({getState:s})=>{s().eventHandlers.onChange.forEach((s=>{s({issueId:e,meta:{fieldId:t},type:c.FIELD_CHANGE_FAILED})}))},fieldChangeRequested:(e,t,s)=>({getState:n})=>{n().eventHandlers.onChange.forEach((n=>{n({issueId:e,meta:{fieldId:t,fieldValue:s},type:c.FIELD_CHANGE_REQUESTED})}))},registerEventHandler:(e,t)=>({getState:s,setState:n})=>{if("function"!=typeof t)return()=>{};const{eventHandlers:a}=s(),i=a[e];return n({
eventHandlers:d(d({},a),{},{[e]:i.concat([t])})}),()=>{const{eventHandlers:a}=s(),i=a[e].filter((e=>e!==t));n({eventHandlers:d(d({},a),{},{[e]:i})})}}},m=Object(n.a)({name:"issue-view-legacy-events",initialState:{eventHandlers:{onChange:[]}},actions:p}),f=Object(a.a)(m,{selector:null})},"./src/packages/issue/issue-view/src/actions/activity-feed-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l}));var n=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js");const a={key:"JSDComments",type:"JSDComments",name:n.a.comments.defaultMessage},i={key:"Comments",type:"Comments",name:n.a.comments.defaultMessage},r=e=>({type:"SELECT_ACTIVITY_ITEM",payload:e}),o=e=>({type:"SELECT_INITIAL_ACTIVITY_ITEM",payload:e}),c=e=>({type:"SELECT_ACTIVITY_SORT_ORDER",payload:e}),l=e=>({
type:"UPDATE_ACTIVITY_SORT_ORDER_REQUEST",payload:e})},"./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t)=>({type:"APPLINK_AUTHENTICATION_REQUEST",payload:e,meta:{analyticsEvent:t}}),a=()=>({type:"APPLINK_AUTHENTICATION_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"i",(function(){return d})),s.d(t,"g",(function(){return u})),s.d(t,"j",(function(){return p}));const n=()=>({type:"SHOW_ASSIGN_ISSUE_PARENT_MODAL"}),a=()=>({type:"HIDE_ASSIGN_ISSUE_PARENT_MODAL"}),i=()=>({type:"FETCH_ISSUE_PARENTS_REQUEST"}),r=(e=[])=>({
type:"FETCH_ISSUE_PARENTS_SUCCESS",payload:e}),o=()=>({type:"FETCH_ISSUE_PARENTS_FAILURE"}),c=(e,t)=>({type:"SET_PARENT_REQUEST",payload:{issues:e,parentId:t}}),l=(e,t,s)=>({type:"SET_PARENT_OPTIMISTIC",payload:{issues:e,parentIssue:t,requestPromise:s}}),d=e=>({type:"UNSET_PARENT_REQUEST",payload:{issues:e}}),u=(e,t)=>({type:"SET_PARENT_SUCCESS",payload:{parentIssue:e,oldParentIdsByIssueIds:t}}),p=e=>({type:"UNSET_PARENT_SUCCESS",payload:{oldParentIdsByIssueIds:e}})},"./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c}));const n=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN",payload:e}),a=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END",payload:e}),i=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR",payload:e}),r=e=>({
type:"ATTACHMENT_JIRA_CREATE_SUCCESS",payload:e}),o=(e,t)=>({type:"ATTACHMENT_JIRA_CREATE_FAILURE",payload:{attachment:e,statusCode:t}}),c=e=>({type:"MEDIA_PICKER_ERROR",payload:e})},"./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=()=>({type:"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS"}),a=()=>({type:"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/card-cover-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"c",(function(){return o}));const n=e=>({type:"CARD_COVER_FETCH_SUCCESS",payload:{cardCover:e}}),a=()=>({type:"CARD_COVER_FETCH_FAILURE"}),i=(e,t)=>({type:"CARD_COVER_UPDATE_REQUEST",payload:{currentAttachmentId:e,attachmentId:t}}),r=()=>({type:"CARD_COVER_UPDATE_SUCCESS"}),o=e=>({
type:"CARD_COVER_UPDATE_FAILURE",payload:{attachmentId:e}})},"./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"d",(function(){return d}));const n=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST",payload:e}),a=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS",payload:e}),i=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_FAILURE",payload:e}),r=(e,t,s,n,a)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST",payload:{issueKey:e,issueId:t,currentType:s,targetType:n,analyticsEvent:a}}),o=(e,t)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS",payload:{issueKey:e,targetTypeName:t,fieldId:"issuetype"}}),c=e=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE",payload:e}),l=(e,t,s)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED",
payload:{issueId:e,currentType:t,targetType:s}}),d=e=>({type:"SHOW_ISSUE_TYPE_LIST",payload:e})},"./src/packages/issue/issue-view/src/actions/clone-modal-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=()=>({type:"SHOW_CLONE_MODAL"}),a=()=>({type:"HIDE_CLONE_MODAL"})},"./src/packages/issue/issue-view/src/actions/comment-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"B",(function(){return r})),s.d(t,"y",(function(){return o})),s.d(t,"D",(function(){return c})),s.d(t,"A",(function(){return l})),s.d(t,"C",(function(){return d})),s.d(t,"z",(function(){return u})),s.d(t,"x",(function(){return p})),s.d(t,"s",(function(){return m})),s.d(t,"r",(function(){return f})),s.d(t,"o",(function(){return b})),s.d(t,"n",(function(){return g})),s.d(t,"q",(function(){return h})),s.d(t,"p",(function(){return y})),s.d(t,"u",(function(){
return O})),s.d(t,"v",(function(){return j})),s.d(t,"t",(function(){return v})),s.d(t,"d",(function(){return E})),s.d(t,"i",(function(){return w})),s.d(t,"k",(function(){return k})),s.d(t,"j",(function(){return C})),s.d(t,"l",(function(){return S})),s.d(t,"m",(function(){return I})),s.d(t,"g",(function(){return T})),s.d(t,"h",(function(){return _})),s.d(t,"f",(function(){return P})),s.d(t,"G",(function(){return x})),s.d(t,"e",(function(){return D})),s.d(t,"w",(function(){return A})),s.d(t,"E",(function(){return M})),s.d(t,"F",(function(){return L}));const n=()=>({type:"ADD_COMMENT_FORM_EXPAND"}),a=()=>({type:"ADD_COMMENT_FORM_COLLAPSE"}),i=()=>({type:"ADD_COMMENT_FORM_CANCEL"}),r=(e,t,s)=>({type:"SAVE_COMMENT_RETRY",payload:{optimisticId:e,createdDate:t,isNewComment:s}}),o=e=>({type:"SAVE_COMMENT_EDIT",payload:{optimisticId:e}}),c=(e,t)=>({type:"SAVE_COMMENT_SUCCESS_WITH_PASTED_CONTENT",payload:{comment:e,pastedContent:t}}),l=(e,t)=>({type:"SAVE_COMMENT_REQUEST",payload:{comment:e,
analyticsEvent:t,updatedField:"comment"}}),d=(e,t,s,n,a)=>({type:"SAVE_COMMENT_SUCCESS",payload:{fieldId:"comment",comment:e,optimisticId:t,isNewComment:s,analyticsEvent:n},meta:a}),u=e=>({type:"SAVE_COMMENT_FAILURE",payload:e}),p=e=>({type:"SAVE_COMMENT_CANCEL",payload:{optimisticId:e}}),m=()=>({type:"FETCH_OLDER_COMMENTS_REQUEST"}),f=()=>({type:"FETCH_NEWER_COMMENTS_REQUEST"}),b=e=>({type:"FETCH_LATEST_COMMENTS_SUCCESS",payload:e}),g=()=>({type:"FETCH_LATEST_COMMENTS_FAILURE"}),h=e=>({type:"FETCH_MORE_COMMENTS_SUCCESS",payload:e}),y=()=>({type:"FETCH_MORE_COMMENTS_FAILURE"}),O=e=>({type:"FETCH_SORTED_COMMENTS_REQUEST",payload:e}),j=e=>({type:"FETCH_SORTED_COMMENTS_SUCCESS",payload:e}),v=()=>({type:"FETCH_SORTED_COMMENTS_FAILURE"}),E=(e,t)=>({type:"CHANGE_COMMENT_VISIBILITY",payload:{id:e,isInternal:t}}),w=(e,t)=>({type:"EDIT_COMMENT_BEGIN",payload:{id:e,isInternal:t}}),k=e=>({type:"EDIT_COMMENT_COLLAPSE",payload:{id:e,fieldId:"comment"}}),C=e=>({type:"EDIT_COMMENT_CANCEL",payload:{
id:e,fieldId:"comment"}}),S=(e,t)=>({type:"EDIT_COMMENT_UPDATE",payload:{id:e,value:t,fieldId:"comment"}}),I=(e,t)=>({type:"EDIT_COMMENT_VISIBILITY",payload:{id:e,visibility:t}}),T=(e,t)=>({type:"DELETE_COMMENT_REQUEST",payload:{id:e,analyticsEvent:t,updatedField:"comment"}}),_=e=>({type:"DELETE_COMMENT_SUCCESS",payload:{id:e,fieldId:"comment"}}),P=e=>({type:"DELETE_COMMENT_FAILURE",payload:e}),x=e=>({type:"SHOW_DELETE_COMMENT_MODAL",payload:e}),D=()=>({type:"DELETE_COMMENT_CANCEL"}),A=(e,t)=>({type:"PASTED_INTO_COMMENT_FORM",payload:{id:e,pastedContent:t}}),M=e=>({type:"SET_COMMENT_ATTACHMENT_IN_PROGRESS",payload:{isInProgress:e}}),L=e=>({type:"SET_COMMENT_SCROLL_STATUS",payload:{status:e}})},"./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){
return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return d})),s.d(t,"e",(function(){return u}));const n=()=>({type:"LINK_CONFLUENCE_PAGE_CLICKED"}),a=()=>({type:"LINK_CONFLUENCE_PAGE_CLOSED"}),i=()=>({type:"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED"}),r=(e,t)=>({type:"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{pageHref:e},meta:{analyticsEvent:t}}),o=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS",payload:{confluencePageLink:e}}),c=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_FAILED",payload:{errorMessage:e}}),l=e=>({type:"DELETE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{globalId:e}}),d=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_SUCCESS"}),u=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_FAILED"})},"./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"h",(function(){return r})),s.d(t,"i",(function(){return o})),
s.d(t,"g",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return d})),s.d(t,"f",(function(){return u}));const n=e=>({type:"ADD_CONTENT_PANEL_REQUEST",payload:e}),a=e=>({type:"ADD_CONTENT_PANEL_SUCCESS",payload:e}),i=e=>({type:"ADD_CONTENT_PANEL_FAILURE",payload:e}),r=e=>({type:"REMOVE_CONTENT_PANEL_REQUEST",payload:e}),o=e=>({type:"REMOVE_CONTENT_PANEL_SUCCESS",payload:e}),c=e=>({type:"REMOVE_CONTENT_PANEL_FAILURE",payload:e}),l=e=>({type:"CONTENT_PANEL_SELECTED",payload:e}),d=e=>({type:"CONTENT_PANEL_UNSELECT",payload:e}),u=()=>({type:"CONTENT_PANELS_CUSTOMISED_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=(e,t)=>({type:"ECOSYSTEM_SHOW_GLANCE",payload:{appKey:e,moduleKey:t}}),a=()=>({type:"ECOSYSTEM_HIDE_GLANCE"})},"./src/packages/issue/issue-view/src/actions/editor-actions.js":function(e,t,s){"use strict"
;s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i}));const n=()=>({type:"EDITOR_CHANGE_FAILURE"}),a=()=>({type:"EDITOR_EXPANDED_FAILURE"}),i=()=>({type:"EDITOR_SAVE_FAILURE"})},"./src/packages/issue/issue-view/src/actions/external-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return d}));var n=s("./src/packages/issue/issue-view/src/actions/comment-actions.js");const a="EDIT_FIELD",i=e=>({type:a,payload:{fieldId:e}}),r="ADD_COMMENT",o=()=>({type:r}),c="ASSIGN_TO_ME",l=()=>({type:c}),d=e=>{switch(e.type){case r:return Object(n.c)();case c:return(()=>({type:"ASSIGN_TO_ME_EXTERNAL"}))();case a:return(e=>({type:"FIELD_EDIT_REQUEST_EXTERNAL",payload:{fieldId:e}}))(e.payload.fieldId);default:throw new Error(`Unhandled external action type: ${e.type}`)}}},
"./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i}));const n=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_CONFLUENCE_APP_LINKS_SUCCESS",payload:e.applicationLinks}),i=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i}));const n=()=>({type:"FETCH_JIRA_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_JIRA_APP_LINKS_SUCCESS",payload:e}),i=()=>({type:"FETCH_JIRA_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}))
;const n=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST"}),a=e=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS",payload:e}),i=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_FAILED"})},"./src/packages/issue/issue-view/src/actions/forge-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"i",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return d})),s.d(t,"h",(function(){return u}));const n=e=>({type:"FETCH_FORGE_SUCCESS",payload:e}),a=e=>({type:"FORGE_ISSUE_ACTION_EXEC",payload:e}),i=()=>({type:"FORGE_ISSUE_ACTION_RENDERED"}),r=()=>({type:"FORGE_ISSUE_ACTION_CLOSE"}),o=e=>({type:"FORGE_ISSUE_PANEL_ADDED",payload:e}),c=e=>({type:"FORGE_NEW_ISSUE_PANEL_UNTRACK",payload:e}),l=e=>({type:"FORGE_ISSUE_PANEL_REMOVED",payload:e}),d=e=>({
type:"FORGE_ISSUE_PANEL_UPDATE_REQUEST",payload:e}),u=e=>({type:"FORGE_ISSUE_PANEL_UPDATED",payload:e})},"./src/packages/issue/issue-view/src/actions/issue-delete-actions.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));const n=()=>({type:"OPEN_DELETE_ISSUE_MODAL"}),a=()=>({type:"CLOSE_DELETE_ISSUE_MODAL"}),i=(e,t)=>({type:"DELETE_ISSUE_REQUEST",payload:{issueKey:e,analyticsEvent:t}}),r=e=>({type:"DELETE_ISSUE_SUCCESS",payload:e}),o=(e,t)=>({type:"DELETE_ISSUE_FAILURE",payload:{issueKey:e,error:t}})},"./src/packages/issue/issue-view/src/actions/issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return n})),s.d(t,"j",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"n",(function(){return c})),s.d(t,"p",(function(){return l})),
s.d(t,"m",(function(){return d})),s.d(t,"o",(function(){return p})),s.d(t,"l",(function(){return m})),s.d(t,"i",(function(){return f})),s.d(t,"h",(function(){return b})),s.d(t,"a",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"g",(function(){return y})),s.d(t,"q",(function(){return O})),s.d(t,"c",(function(){return j}));const n=e=>({type:"FETCH_LINKED_ISSUES_SUCCESS",payload:e}),a=e=>({type:"FETCH_LINKED_ISSUES_FAILURE",payload:e}),i=(e,t)=>({type:"DELETE_LINKED_ISSUE_REQUEST",payload:{linkedIssueId:e,analyticsEvent:t}}),r=(e,t)=>({type:"DELETE_LINKED_ISSUE_SUCCESS",payload:e,meta:t}),o=e=>({type:"DELETE_LINKED_ISSUE_FAILURE",payload:e}),c=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_REQUEST",payload:{newIssueLinks:e,analyticsEvent:s,requestAnalyticsEvent:t}}),l=(e,t)=>({type:"SAVE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,analyticsEvent:t}}),d=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:t,analyticsEvent:s}
}),u="SAVE_LINKED_ISSUE_RETRY",p=(e,t,s)=>({type:u,payload:{optimisticId:e,analyticsEvent:s,requestAnalyticsEvent:t}}),m=e=>({type:"SAVE_LINKED_ISSUE_CANCEL",payload:e}),f=(e,t,s,n)=>({type:"FETCH_LINKED_ISSUES_DATA_SUCCESS",payload:{issueLinks:e,linkedIssues:t,optimisticIds:s,optimisticLinks:n}}),b=(e,t)=>({type:"FETCH_LINKED_ISSUES_DATA_FAILURE",payload:{optimisticIds:e,error:t}}),g=()=>({type:"ADD_ISSUE_LINK_CLICKED"}),h=()=>({type:"ADD_ISSUE_LINK_CLOSED"}),y=()=>({type:"FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST"}),O=e=>({type:"SET_CREATE_LINKED_ISSUE_PERMISSION",payload:{canCreateLinkedIssue:e}}),j=e=>({type:"CREATE_LINKED_ISSUE_SUCCESS",payload:{newIssueLinks:e}})},"./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const n=({fromIssueKey:e,toIssueKey:t})=>({
type:"NAVIGATE_TO_NEW_ISSUE",payload:{fromIssueKey:e,toIssueKey:t}}),a=(e,t)=>({type:"NAVIGATE_TO_PROJECT",payload:{projectUrl:e,pushAction:t}}),i=e=>({type:"NAVIGATE_TO_SPRINT",payload:{sprintId:e}}),r=e=>({type:"LOAD_NEW_ISSUE",payload:{issueKey:e}}),o=(e,t)=>({type:"LOAD_RECENT_ISSUE",payload:{issueKey:e,issueState:t}})},"./src/packages/issue/issue-view/src/actions/login-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=()=>({type:"LOGIN"}),a=e=>({type:"LOGIN_SUCCESSFUL",payload:e})},"./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"g",(function(){return l})),s.d(t,"d",(function(){return d}));const n=(e,t)=>({type:"DELETE_REMOTE_LINKED_ISSUE_REQUEST",
payload:{globalId:e,analyticsEvent:t}}),a=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_SUCCESS",payload:e}),i=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_FAILURE",payload:e}),r=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_REQUEST",payload:{saveRemoteIssueLinkPayload:e,requestAnalyticsEvent:t,analyticsEvent:s}}),o=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,saveRemoteLinkResponse:t,analyticsEvent:s}}),c=(e,t,s,n)=>({type:"SAVE_REMOTE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:s,analyticsEvent:n,remoteIssueKey:t}}),l=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_RETRY",payload:{optimisticId:e,requestAnalyticsEvent:t,analyticsEvent:s}}),d=e=>({type:"SAVE_REMOTE_LINKED_ISSUE_CANCEL",payload:e})},"./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>({type:"SHARE_AS_COMMENT",payload:{value:e}}),a=()=>({type:"CLEAR_SHARED_AS_COMMENT_VALUES"})},
"./src/packages/issue/issue-view/src/actions/web-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return a})),s.d(t,"j",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"h",(function(){return d})),s.d(t,"i",(function(){return u})),s.d(t,"g",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"f",(function(){return f}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=()=>({type:"SHOW_CREATE_WEB_LINK_FORM"}),i=()=>({type:"HIDE_CREATE_WEB_LINK_FORM"}),r=(e,t,s)=>({type:"CREATE_WEB_LINK_REQUEST",payload:{optimisticId:Object(n.w)(`optimistic-web-link-${Date.now()}`),href:e,linkText:t,iconUrl:s}}),o=(e,t)=>({type:"CREATE_WEB_LINK_SUCCESS",payload:{optimisticId:e,webLink:t}}),c=e=>({type:"CREATE_WEB_LINK_FAILED",payload:{optimisticId:e}}),l=e=>({type:"CREATE_WEB_LINK_RETRY",payload:{optimisticId:e}}),d=e=>({
type:"DELETE_WEB_LINK_REQUEST",payload:{id:e}}),u=e=>({type:"DELETE_WEB_LINK_SUCCESS",payload:{id:e}}),p=e=>({type:"DELETE_WEB_LINK_FAILED",payload:{id:e}}),m=e=>({type:"CANCEL_FAILED_WEB_LINK_DELETION",payload:{id:e}}),f=e=>({type:"DELETE_OPTIMISTIC_WEB_LINK",payload:{id:e}})},"./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),o=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),c=s("./node_modules/react/index.js"),l=s.n(c),d=s("./node_modules/react-intl/lib/index.es.js"),u=s("./node_modules/lodash/noop.js"),p=s.n(u),m=s("./node_modules/@atlaskit/tabs/dist/es2019/components/Tabs.js"),f=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),b=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),g=Object(d.defineMessages)({replyToCustomer:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.reply-to-customer-button",defaultMessage:"Reply to customer"},addInternalNote:{
id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.add-internal-note-button",defaultMessage:"Add internal note"},loadingAttachments:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.loading-attachments",defaultMessage:"Loading attachments\u2026"}}),h=s("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),y=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),O=s.n(y),j=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),v=s("./src/packages/platform/controllers/intl/src/index.js"),E=Object(d.defineMessages)({addAttachmentLabel:{id:"issue.label-for-add-attachment-button",defaultMessage:"Add attachment"}}),w=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),k=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const C=w.default.span.withConfig({componentId:"chz5tj-0"
})`padding:${k.e/2}px;`,S=w.default.div.withConfig({componentId:"chz5tj-1"})`margin-left:auto;margin-right:${k.e}px;`,I=e=>{const{onClick:t,isCommentAttachmentInProgress:s}=e,{formatMessage:n}=Object(v.c)();return l.a.createElement(S,null,l.a.createElement(j.a,{content:n(E.addAttachmentLabel),position:"bottom"},l.a.createElement(b.a,{spacing:"none",appearance:"subtle-link",isLoading:s,iconBefore:l.a.createElement(C,null,l.a.createElement(O.a,{size:"medium",label:n(E.addAttachmentLabel)})),externalId:"attachment",onClick:t})))};I.displayName="AttachmentPicker";var T=I,_=Object(r.a)([Object(n.connect)((e=>({isCommentAttachmentInProgress:Object(o.x)(e)})),(e=>({onClick:()=>{e(Object(h.b)())}})))])(T),P=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const x=w.default.div.withConfig({componentId:"sc-1q7glz-0"
})`white-space:nowrap;border:1px solid ${P.a.N40};height:${5*k.e}px;box-sizing:border-box;padding:${k.e/2}px 0;border-radius:${k.a}px;display:flex;align-items:center;`,D=w.default.div.withConfig({componentId:"sc-1q7glz-1"})`padding:0 ${k.e}px;`;class A extends c.Component{renderReplyToCustomer(){const{onReplyToCustomer:e,intl:{formatMessage:t}}=this.props;return l.a.createElement(l.a.Fragment,null," / ",l.a.createElement(b.a,{appearance:"link",onClick:e},t(g.replyToCustomer)))}render(){const{onAddInternalNote:e,isCommentAttachmentInProgress:t,intl:{formatMessage:s},isPublicCommentAllowed:n}=this.props;return l.a.createElement(x,null,t?l.a.createElement(D,null,s(g.loadingAttachments)):l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{appearance:"link",onClick:e},s(g.addInternalNote)),n&&this.renderReplyToCustomer()),l.a.createElement(_,null))}}A.displayName="CollapsedEditorView";var M=Object(d.injectIntl)(A),L=Object(r.a)([Object(f.a)({onReplyToCustomer:"onReplyToCustomer",
onAddInternalNote:"onAddInternalNote"}),Object(n.connect)((e=>({isCommentAttachmentInProgress:Object(o.x)(e)})),{})])(M);const R=w.default.div.withConfig({componentId:"sc-1yyl89b-0"})`margin:0 -${k.e}px ${2*k.e}px;`,N="internal",F={public:{id:"public",label:l.a.createElement(d.FormattedMessage,g.replyToCustomer),content:l.a.createElement("div",null)},internal:{id:N,label:l.a.createElement(d.FormattedMessage,g.addInternalNote),content:l.a.createElement("div",null)}};class U extends c.Component{constructor(...e){super(...e),this.onReplyToCustomer=()=>{this.props.onCommentVisibilityChange(!1),this.expandEditor()},this.onAddInternalNote=()=>{this.props.onCommentVisibilityChange(!0),this.expandEditor()},this.onTabSelect=e=>{this.props.onCommentVisibilityChange(e.id===N)},this.expandEditor=()=>{const{isExpanded:e,onExpanded:t}=this.props;e||t&&t()}}getExpandedView(){
const{isInternal:e,isPublicCommentAllowed:t,children:s}=this.props,n=t&&!e?F.public:F.internal,a=t?[F.internal,F.public]:[F.internal];return l.a.createElement(l.a.Fragment,null,l.a.createElement(R,null,l.a.createElement(m.a,{tabs:a,selected:n,onSelect:this.onTabSelect})),s)}getCollapsedView(){return l.a.createElement(L,{onReplyToCustomer:this.onReplyToCustomer,onAddInternalNote:this.onAddInternalNote,isPublicCommentAllowed:this.props.isPublicCommentAllowed})}render(){const{isExpanded:e}=this.props;return e?this.getExpandedView():this.getCollapsedView()}}U.displayName="ServiceDeskCommentEditorContainer",U.defaultProps={isExpanded:!1,isInternal:!1,isPublicCommentAllowed:!1,onExpanded:p.a,onCommentVisibilityChange:p.a};var V=Object(d.injectIntl)(U);const K=["commentId"];function $(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}
function W(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$(Object(s),!0).forEach((function(t){B(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function B(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function H(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}t.a=Object(r.a)([Object(n.connect)(((e,t)=>({isInternal:Object(o.C)(t.commentId)(e),isPublicCommentAllowed:Object(i.f)(e)})),((e,t)=>({
onCommentVisibilityChange:s=>{e(Object(a.d)(t.commentId,s))}})),((e,t,s)=>{const{commentId:n}=s;return W(W(W({},H(s,K)),e),t)}))])(V)},"./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),r=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js"),c=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),d=s("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js");const p=Object(c.default)(u.a).withConfig({componentId:"hq7qvq-0"
})`flex-direction:column;width:100%;`,m=Object(c.default)(i.a).withConfig({componentId:"hq7qvq-1"})`display:flex;`,f=Object(c.default)(r.a).withConfig({componentId:"hq7qvq-2"})`width:9px;flex-shrink:0;`,b=Object(c.default)(r.a).withConfig({componentId:"hq7qvq-3"})`height:22px;`,g=Object(c.default)(d.a).withConfig({componentId:"hq7qvq-4"})`background-position:-2px -2px;border-bottom:${4*l.e}px solid white;flex-shrink:0;`,h=a.a.createElement(a.a.Fragment,null,a.a.createElement(g,null),a.a.createElement(f,null),a.a.createElement(i.a,null,a.a.createElement(i.a,{paddingTop:1,paddingBottom:5},a.a.createElement(o.a,{fontSize:14,lineHeight:16,intrusion:250})),a.a.createElement(i.a,{paddingTop:4,paddingBottom:0},a.a.createElement(o.a,{fontSize:24,lineHeight:24,intrusion:0})),a.a.createElement(b,null)));t.a=()=>a.a.createElement(p,null,a.a.createElement(r.b,null),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h))},
"./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/loading-button.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const c=r.default.div.withConfig({componentId:"sc-1ina8y9-0"})`margin:${2*o.e}px 0;`,l=({onClick:e,isDisabled:t,isLoading:s,numberToLoad:n,children:r})=>n<=0?null:a.a.createElement(c,null,a.a.createElement(i.a,{onClick:e,isDisabled:t,isLoading:s,shouldFitContainer:!0},r));l.displayName="LoadMoreButton";var d=l;t.a=d},"./src/packages/issue/issue-view/src/activity/common/styles/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"f",(function(){return d})),
s.d(t,"a",(function(){return u}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.span.withConfig({componentId:"sc-14pzwp3-0"})`font-weight:500;`;r.displayName="Emphasise";const o=n.default.span.withConfig({componentId:"sc-14pzwp3-1"})`grid-row:1;margin-left:${.5*i.e}px;white-space:nowrap;`;o.displayName="GridContainer";const c=n.default.div.withConfig({componentId:"sc-14pzwp3-2"})`margin:${3*i.e}px 0;`;n.default.span.withConfig({componentId:"sc-14pzwp3-3"})`margin-left:${i.e}px;`.displayName="TimestampContainer";const l=n.default.span.withConfig({componentId:"sc-14pzwp3-4"})`margin-left:-${i.e/2}px;display:grid;`,d=n.default.span.withConfig({componentId:"sc-14pzwp3-5"})`display:grid;`;d.displayName="GridContentContainer";const u={always:n.css`color:${a.a.N500};`,
whenDisplaySettingSwitchable:n.css`:hover{color:inherit;}`}},"./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js");const r=Object(n.createSelector)(a.H,(e=>e.worklog)),o=Object(n.createSelector)(i.i,(e=>e.remainingEstimateSeconds||0)),c=Object(n.createSelector)(r,(e=>e.loadingStage)),l=Object(n.createSelector)(r,(e=>e.highlightedWorklogId))},"./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}))
;var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),o=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js");class c extends n.Component{constructor(...e){super(...e),this.state={stackIndex:0},this.incrementStackIndex=()=>{this.setState({stackIndex:this.state.stackIndex+1})},this.decrementStackIndex=()=>{this.setState({stackIndex:this.state.stackIndex-1})}}componentDidMount(){Object(r.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({bind:e})=>{e("beforeShow",this.incrementStackIndex),e("Dialog.hide",this.decrementStackIndex)})).catch(i.a),Object(o.a)("show",this.incrementStackIndex),Object(o.a)("hide",this.decrementStackIndex)}componentWillUnmount(){Object(r.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({unbind:e})=>{e("beforeShow",this.incrementStackIndex),
e("Dialog.hide",this.decrementStackIndex)})).catch(i.a),Object(o.b)("show",this.incrementStackIndex),Object(o.b)("hide",this.decrementStackIndex)}render(){return this.props.children(this.state.stackIndex)}}c.displayName="AuiModalStackIndex"},"./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"i",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"e",(function(){return p}));const n="ISSUE_DETAILS",a={key:"FETCH_FIELD_DATA",prefix:n},i={key:"FETCH_INITIAL_COMMENTS",prefix:n},r={key:"FETCH_ISSUE_LINK_TYPES",prefix:n},o={key:"FETCH_SUBTASK_TYPES",prefix:n},c={key:"FETCH_LOAD_CONTEXT",prefix:n},l={key:"FETCH_USER_AUTH",prefix:n},d={key:"FETCH_VIEW_CONTEXT",prefix:n},u={key:"FETCH_ECOSYSTEM_EXTENSIONS",prefix:n
},p={key:"FETCH_ISSUE_PROPERTIES",prefix:n}},"./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return u}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),a=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=[a.g,a.a,a.e,a.d,a.i,a.f,a.c,a.b,a.h];let l;const d=()=>{c.forEach((e=>{const t=`BEGIN_${e.prefix}_${e.key}`,s=`END_${e.prefix}_${e.key}`;n.d.clearMarks&&(n.d.clearMarks(t),n.d.clearMarks(s))})),l=null,window.ISSUE_DATA_AVAILABLE=null},u=()=>(l||(l=(()=>c.reduce(((e,t)=>{const s=`BEGIN_${t.prefix}_${t.key}`,a=`END_${t.prefix}_${t.key}`,i=Object(n.g)(s,a);if(null!=i&&i>0){const o=r(r({},e),{},{[`${t.key}_NETWORK`]:i});return n.d.clearMarks&&(n.d.clearMarks(s),n.d.clearMarks(a)),o}return e}),{}))()),l)},"./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return d}))
;const n=()=>({type:"FETCH_ISSUE_REQUEST"}),a=e=>({type:"FETCH_ISSUE_SUCCESS",payload:e}),i=e=>({type:"FETCH_ISSUE_FAILURE",payload:e}),r=()=>({type:"REFRESH_ISSUE_REQUEST"}),o=e=>({type:"REFRESH_ISSUE_SUCCESS",payload:e}),c=()=>({type:"REFRESH_ECOSYSTEM_REQUEST"}),l=e=>({type:"REFRESH_ECOSYSTEM_SUCCESS",payload:e}),d=()=>({type:"FETCH_FORGE_REQUEST"})},"./src/packages/issue/issue-view/src/common/actions/worklog-actions.js":function(e,t,s){"use strict";s.d(t,"j",(function(){return n})),s.d(t,"k",(function(){return a})),s.d(t,"J",(function(){return i})),s.d(t,"K",(function(){return r})),s.d(t,"I",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"n",(function(){return l})),s.d(t,"o",(function(){return d})),s.d(t,"i",(function(){return u})),s.d(t,"F",(function(){return p})),s.d(t,"H",(function(){return m})),s.d(t,"G",(function(){return f})),s.d(t,"m",(function(){return b})),s.d(t,"l",(function(){return g})),s.d(t,"O",(function(){return h})),s.d(t,"P",(function(){return y
})),s.d(t,"N",(function(){return O})),s.d(t,"L",(function(){return j})),s.d(t,"p",(function(){return v})),s.d(t,"d",(function(){return E})),s.d(t,"v",(function(){return w})),s.d(t,"w",(function(){return k})),s.d(t,"u",(function(){return C})),s.d(t,"b",(function(){return S})),s.d(t,"r",(function(){return I})),s.d(t,"c",(function(){return T})),s.d(t,"s",(function(){return _})),s.d(t,"q",(function(){return P})),s.d(t,"t",(function(){return x})),s.d(t,"M",(function(){return D})),s.d(t,"g",(function(){return A})),s.d(t,"C",(function(){return M})),s.d(t,"E",(function(){return L})),s.d(t,"B",(function(){return R})),s.d(t,"e",(function(){return N})),s.d(t,"x",(function(){return F})),s.d(t,"y",(function(){return U})),s.d(t,"f",(function(){return V})),s.d(t,"z",(function(){return K})),s.d(t,"A",(function(){return $})),s.d(t,"h",(function(){return W})),s.d(t,"D",(function(){return B}));const n="state.FETCH_WORKLOGS_REQUEST",a="state.FETCH_WORKLOGS_REQUEST_INITIAL",i=(e,t,s)=>({type:a,payload:{
baseUrl:e,issueKey:t},meta:{analyticsEvent:s}}),r=(e,t,s)=>({type:"state.FETCH_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),o=()=>({type:"state.FETCH_WORKLOGS_FAILURE"}),c="state.ADD_WORKLOG_REQUEST",l=(e,t)=>({type:c,payload:{values:e},meta:{analyticsEvent:t}}),d=(e,t,s)=>({type:"state.ADD_WORKLOG_SUCCESS",payload:{worklogId:e,timeTracking:t},meta:s}),u="state.FETCH_SURROUNDING_WORKLOGS_BY_ID",p=e=>({type:u,payload:{worklogId:e}}),m=(e,t,s,n)=>({type:"state.FETCH_WORKLOGS_BY_ID_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,startIndex:s,totalWorklogs:n}}),f=()=>({type:"state.FETCH_WORKLOGS_BY_ID_FAILURE"}),b=()=>({type:"state.ADD_WORKLOG_FAILURE"}),g="state.UPDATE_TIME_REMAINING_REQUEST",h=(e,t)=>({type:g,payload:{timeRemaining:e},meta:{analyticsEvent:t}}),y=e=>({type:"state.UPDATE_TIME_REMAINING_SUCCESS",payload:{timeRemaining:e}}),O=()=>({type:"state.UPDATE_TIME_REMAINING_FAILURE"}),j=(e,t)=>({type:"state.OPEN_MODAL",payload:{modalType:e,worklogId:t}
}),v=()=>({type:"state.CLOSE_MODAL"}),E="state.EDIT_WORKLOG_REQUEST",w=(e,t,s)=>({type:E,payload:{worklogId:e,values:t},meta:{analyticsEvent:s}}),k=(e,t,s,n)=>({type:"state.EDIT_WORKLOG_SUCCESS",payload:{worklogs:e,worklogId:t,timeTrackingDeltas:s},meta:n}),C=()=>({type:"state.EDIT_WORKLOG_FAILURE"}),S="state.DELETE_WORKLOG_REQUEST",I=(e,t,s,n)=>({type:S,payload:{worklogId:e,timeRemaining:t,isAdjustTimeRemainingChecked:s},meta:{analyticsEvent:n}}),T="state.DELETE_WORKLOG_SUCCESS",_=(e,t)=>({type:T,payload:{worklogId:e,timeTrackingDeltas:t}}),P=()=>({type:"state.DELETE_WORKLOG_FAILURE"}),x=()=>({type:"state.DISPOSE_WORKLOG_APP"}),D=e=>({type:"SET_WORKLOG_SCROLL_STATUS",payload:{status:e}}),A="state.FETCH_SORTED_WORKLOGS_REQUEST",M=()=>({type:A}),L=e=>({payload:e,type:"state.FETCH_SORTED_WORKLOGS_SUCCESS"}),R=()=>({type:"state.FETCH_SORTED_WORKLOGS_FAILURE"}),N="state.FETCH_NEWER_SORTED_WORKLOGS_REQUEST",F=()=>({type:N}),U=e=>({type:"state.FETCH_NEWER_SORTED_WORKLOGS_SUCCESS",payload:e
}),V="state.FETCH_OLDER_SORTED_WORKLOGS_REQUEST",K=()=>({type:V}),$=e=>({type:"state.FETCH_OLDER_SORTED_WORKLOGS_SUCCESS",payload:e}),W="state.FETCH_SORTED_WORKLOGS_RETRY",B=()=>({type:W})},"./src/packages/issue/issue-view/src/common/component/editor/async.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),r=s("./src/packages/platform/ui/error-boundary/src/main.js"),o=s("./src/packages/issue/issue-view/src/common/component/renderer/index.js");const c=({defaultValue:e,mediaContext:t})=>a.a.createElement(o.a,{mediaContext:t,adf:e});c.displayName="IssueEditorReadonly";const l=({children:e,fallback:t,packageName:s})=>a.a.createElement(r.a,{id:"issue-editor",packageName:s,render:()=>t},a.a.createElement(i.a,{fallback:t},e));l.displayName="IssueEditorBoundary"},
"./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/isFunction.js"),r=s.n(i),o=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=(e,t,s)=>{const i=r()(e)?e:()=>e||null;class u extends n.Component{constructor(e){super(e),this.startTime=void 0,this.mountTime=void 0,this.startTime=c.d.now()}componentDidMount(){this.mountTime=c.d.now()}componentWillUnmount(){
const e=c.d.now(),t=e-this.startTime,n=this.mountTime-this.startTime,a=e-this.mountTime;t>0&&this.props.onWillUnmount(t,n,a,s)}render(){return i()}}u.displayName="LoadingWrapper",u.defaultProps={onWillUnmount:()=>{}};const p=Object(o.a)((e=>({onWillUnmount:(t,s,n,a)=>e("loading-component",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:t,initializationTime:s,mountingTime:n},a||{}))})))(u);return a.a.createElement(p,{externalId:t})}},"./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("./node_modules/lodash/clamp.js");const n={minute:"m",hour:"h",day:"d",week:"w"
},a=e=>n[e]||n.minute},"./src/packages/issue/issue-view/src/common/component/logged-time/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./src/packages/time-tracking-formatter/src/main.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js"),l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const p=l.default.div.withConfig({componentId:"qbld2j-0"})`${({isInlineEditBumpEnabled:e,isEditable:t})=>e&&t?`\n    padding: 0 6px;\n    min-height: ${3*u.e}px;\n        `:""} ${({isInlineEditBumpEnabled:e})=>e?"":"\n    width: 100%;\n    display: flex;\n    "}`,m=l.default.div.withConfig({componentId:"qbld2j-1"
})`flex-grow:1;margin-top:${({isInlineEditBumpEnabled:e})=>e?u.e/2:u.e/4}px;`,f=l.default.small.withConfig({componentId:"qbld2j-2"})`color:${d.a.N500};display:flex;justify-content:space-between;margin-top:0;font-size:${u.d}px;flex-wrap:wrap;`,b=l.default.span.withConfig({componentId:"qbld2j-3"})`margin-right:${u.e/2}px;`,g=l.default.span.withConfig({componentId:"qbld2j-4"})`cursor:pointer;`,h=l.default.span.withConfig({componentId:"qbld2j-5"})`font-weight:normal;`;class y extends n.Component{constructor(...e){super(...e),this.getTimeRemainingText=()=>{if(!this.props.value.remainingTime)return null;const e=this.secondsToTimeString(this.props.value.remainingTime);return a.a.createElement(g,null,a.a.createElement(i.FormattedMessage,{id:"issue.log-time.remaining-time",defaultMessage:"{time} remaining",values:{time:a.a.createElement(h,null,e)}}))},this.secondsToTimeString=e=>{const{config:t,intl:s}=this.props;return Object(r.a)(e,{workingHoursPerDay:t.hoursPerDay,
workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit},s)}}getTimeLoggedText(){if(this.props.value&&this.props.value.loggedTime){const e=this.secondsToTimeString(this.props.value.loggedTime);return a.a.createElement(i.FormattedMessage,{id:"issue.log-time.time-logged",defaultMessage:"{time} logged",values:{time:a.a.createElement(h,{"data-testid":"issue.issue-view.common.logged-time.value"},e)}})}return a.a.createElement(i.FormattedMessage,{id:"issue.log-time.no-time-logged",defaultMessage:"No time logged"})}render(){const{config:e,isDone:t,isCompact:s,value:n,estimatedTime:i,isEditable:r}=this.props;return a.a.createElement(p,{isInlineEditBumpEnabled:Object(o.isInlineEditBumpEnabled)(),isEditable:r},a.a.createElement(m,{isInlineEditBumpEnabled:Object(o.isInlineEditBumpEnabled)()},a.a.createElement(c.a,{value:n,estimatedTime:i,config:e,isDone:t,isCompact:s
}),a.a.createElement(f,null,a.a.createElement(b,null,this.getTimeLoggedText()),this.getTimeRemainingText())))}}y.displayName="LoggedTime",y.defaultProps={isCompact:!0,isDone:!1};t.a=Object(i.injectIntl)(y)},"./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),r=s("./node_modules/@atlaskit/icon/glyph/check-circle.js"),o=s.n(r),c=s("./node_modules/@atlaskit/icon/glyph/link.js"),l=s.n(c),d=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/index.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const f=p.default.div.withConfig({componentId:"sc-1a5vava-0"
})`padding-top:${m.e/4}px;opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(${-m.e}px,0);padding-left:${m.e/2}px;display:flex;align-items:flex-end;${e=>e.isVisible&&"\n        opacity: 1;\n        transform: translate(0, 0);\n    "};&:focus{opacity:1;transform:translate(0,0);}`;class b extends n.Component{constructor(...e){super(...e),this.state={isCopied:!1},this.onCopySuccess=e=>{this.setState({isCopied:e})},this.onCopyReset=()=>{this.setState({isCopied:!1})}}render(){const{id:e,label:t,fullIssueUrl:s,isVisible:n,onCopyClick:r}=this.props,{isCopied:c}=this.state;return a.a.createElement(f,{isVisible:n,className:"issue_view_permalink_button_wrapper"},a.a.createElement(u.a,{id:e,label:t,tooltipDelay:0,tooltipLabel:t,tooltipLabelPosition:"top",shouldFitContainer:!0,value:s,hideFieldText:!0,remountOnChange:!0,onCopyClick:r,onClickChange:e=>this.onCopySuccess(e),onCopyReset:this.onCopyReset},a.a.createElement(i.a,{appearance:"subtle-link",
iconBefore:c?a.a.createElement(o.a,{label:"",primaryColor:d.a.G500,size:"small"}):a.a.createElement(l.a,{size:"small",label:t}),spacing:"none"})))}}b.displayName="PermalinkButton"},"./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js");const a=e=>{const[t,s,a]=((e=!1)=>{const[t,s]=Object(n.useState)(e);return[t,()=>{s(!0)},()=>{s(!1)}]})(e.defaultIsVisible);return e.children({isVisible:t,show:s,hide:a})};a.defaultProps={defaultIsVisible:!1};t.a=a},"./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react/index.js"),i=s.n(a),r=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),o=s("./src/packages/time-tracking-formatter/src/main.js"),c=Object(n.defineMessages)({underOriginalEstimate:{
id:"issue.log-time.under-original-estimated-time-tooltip",defaultMessage:"{time} under original estimate"},overOriginalEstimate:{id:"issue.log-time.over-original-estimated-time-tooltip",defaultMessage:"{time} over original estimate"}}),l=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),d=s("./src/packages/issue/issue-view/src/feature-flags.js"),u=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const m=u.default.div.withConfig({componentId:"woebkr-0"})`padding:${p.e/2}px;background-color:transparent;border-radius:3px;${e=>e.hasPointerCursor?"cursor: pointer;":""};&:hover{background-color:${r.a.N60};}`,f=u.default.div.withConfig({componentId:"woebkr-1"
})`background-color:${r.a.N40};border-radius:${p.e/2}px;display:flex;height:${e=>e.isCompact?p.e/2:p.e}px;overflow:hidden;width:100%;${({isInlineEditBumpEnabled:e})=>e?`min-height: ${p.e/2}px !important;`:""};${e=>e.hasPointerCursor?"cursor: pointer;":""};`;class b extends a.Component{renderProgressBar(){return this.props.shouldHighlightOnHover?i.a.createElement(m,{hasPointerCursor:!!this.props.tooltip},i.a.createElement(f,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip,isInlineEditBumpEnabled:Object(d.isInlineEditBumpEnabled)()},this.props.children)):i.a.createElement(f,{isInlineEditBumpEnabled:Object(d.isInlineEditBumpEnabled)(),isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)}render(){return this.props.tooltip?i.a.createElement(l.a,{content:this.props.tooltip},this.renderProgressBar()):this.renderProgressBar()}}b.displayName="ProgressBar",b.defaultProps={isCompact:!0,shouldHighlightOnHover:!1,children:null,tooltip:null}
;const g=u.default.div.withConfig({componentId:"kzawm9-0"})`background-color:${e=>e.color};flex-shrink:0;width:${e=>e.width};transition:width 0.3s ease;&:first-child{border-top-left-radius:${p.e/2}px;border-bottom-left-radius:${p.e/2}px;}&:last-child{border-top-right-radius:${p.e/2}px;border-bottom-right-radius:${p.e/2}px;}`;class h extends a.Component{render(){const{color:e,proportion:t}=this.props,s=t>0?100*t+"%":"0";return i.a.createElement(g,{color:e,width:s})}}h.displayName="ProgressBarSegment",h.defaultProps={color:r.a.B400,proportion:0};const y=(e,t)=>{const{loggedTime:s,remainingTime:n}=e;return s&&void 0!==t?s+(n||0)-t:0};class O extends a.Component{constructor(...e){super(...e),this.secondsToTimeString=e=>{const{config:t,intl:s}=this.props;return Object(o.a)(e,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit},s)}}getTooltip(){const{value:e,estimatedTime:t}=this.props,s=y(e,t)
;return 0===s?null:s>0?this.props.intl.formatMessage(c.overOriginalEstimate,{time:this.secondsToTimeString(s)}):this.props.intl.formatMessage(c.underOriginalEstimate,{time:this.secondsToTimeString(-s)})}render(){const{value:e,estimatedTime:t,shouldHighlightOnHover:s}=this.props,{loggedTime:n=0}=e,a=((e,t=0)=>{const{loggedTime:s=0,remainingTime:n=0}=e;return Math.max(t,s+n)})(e,t),o=Math.max(y(e,t),0),c=a?(n-o)/a:0,l=a?o/a:0;return i.a.createElement(b,{tooltip:this.getTooltip(),isCompact:this.props.isCompact,shouldHighlightOnHover:s},i.a.createElement(h,{color:this.props.isDone?r.a.G300:r.a.B400,proportion:c}),i.a.createElement(h,{color:r.a.Y300,proportion:l}))}}O.displayName="ProgressTracker",O.defaultProps={isCompact:!0,isDone:!1,shouldHighlightOnHover:!1,value:{loggedTime:0}};t.a=Object(n.injectIntl)(O)},"./src/packages/issue/issue-view/src/common/component/renderer/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/flow.js"),r=s.n(i),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),l=s("./src/packages/issue/media-provider/src/controllers/with-media-provider/index.js"),d=s("./src/packages/platform/services/profilecard-provider/src/main.js"),u=s("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js"),p=s("./src/packages/platform/controllers/tenant-context/src/components/cloud-id/index.js"),m=s("./src/packages/issue/issue-view/src/feature-flags.js"),f=s("./node_modules/react-redux/es/index.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),g=s("./node_modules/@atlaskit/adf-schema/dist/es2019/schema/default-schema.js"),h=s("./node_modules/@atlaskit/editor-common/dist/es2019/provider-factory/provider-factory.js"),y=s("./node_modules/@atlaskit/renderer/dist/es2019/ui/Renderer/index.js"),O=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js"),j=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),v=s("./src/packages/common-legacy-do-not-add-anything-new/src/services/emoji.js"),E=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),w=s("./src/packages/issue/issue-view/src/media-feature-flags.js"),k=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js"),C=s("./src/packages/issue/issue-view/src/common/util/events/index.js")
;function S(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class T extends n.PureComponent{constructor(e){super(e),this.onInlineCardClicked=(e,t)=>{const{linkActions:s}=this.props,n=e||window.event;n.preventDefault();const a=n,i=Object(C.a)(a)||Object(C.e)(a);Object(j.a)(t,i,s.push)},this.onMentionClicked=(e,t,s)=>{const{linkActions:n,mentionEncoder:a}=this.props;if(a){s.stopPropagation();const t=s,i=t.metaKey||0!==t.button;Object(j.a)(a(e)||"",i,n.push)}},this.onContentSelected=e=>{e.target instanceof window.Element&&!Object(O.a)(e.target,e.currentTarget)&&!this.checkForMedia(e.target,e.currentTarget)||e.stopPropagation()},this.checkForMedia=(e,t)=>{var s,n,a,i,r,o,c,l,d,u;if(!e||e===t)return!1
;if(Object(m.isUsingUpdatedMediaClassIgnoredList)()){if(null!==(r=(o=e.className).includes)&&void 0!==r&&r.call(o,"rich-media-item")||null!==(c=(l=e.className).includes)&&void 0!==c&&c.call(l,"media-file-card-view")||null!==(d=(u=e.className).includes)&&void 0!==d&&d.call(u,"media-viewer-popup"))return!0}else if(null!==(s=(n=e.className).includes)&&void 0!==s&&s.call(n,"rich-media-item")||null!==(a=(i=e.className).includes)&&void 0!==a&&a.call(i,"MediaGroup")||"media-viewer-popup"===e.getAttribute("data-testid"))return!0;return this.checkForMedia(e.parentElement,t)},this.dataProviders=void 0,this.node=void 0,this.eventHandlers=void 0,this.isEmpty=()=>this.isAdfValueEmpty(),this.isAdfValueEmpty=()=>{const{adf:e}=this.props;return!e||Object(E.g)(e)},this.setNodeRef=e=>{this.node=e};const{contextIdentifier:t,mediaProvider:s,mentionProvider:n,profileCardProvider:a}=this.props;this.node=null,this.dataProviders=new h.a,this.dataProviders.setProvider("mediaProvider",s),
this.dataProviders.setProvider("mentionProvider",Promise.resolve(n)),this.dataProviders.setProvider("emojiProvider",Object(v.b)(this.props.cloudId,this.props.loggedInUserAccountId)),t&&this.dataProviders.setProvider("contextIdentifierProvider",Promise.resolve(t)),Object(m.isProfileCardProviderRendererEnabled)()&&this.dataProviders.setProvider("profilecardProvider",a),this.eventHandlers=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach((function(t){I(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({smartCard:{onClick:this.onInlineCardClicked}},Object(m.isProfileCardProviderRendererEnabled)()?{}:{mention:{onClick:this.onMentionClicked}})}render(){const{adf:e}=this.props
;return this.isEmpty()?a.a.createElement(k.b,null,this.props.placeholder):a.a.createElement("div",{role:"presentation",onClick:this.onContentSelected,onKeyPress:this.onContentSelected,ref:this.setNodeRef},a.a.createElement(y.a,{appearance:"comment",schema:g.a,document:Object(E.h)(e),dataProviders:this.dataProviders,eventHandlers:this.eventHandlers,allowAltTextOnImage:!0,media:{allowLinking:!0,featureFlags:Object(w.a)()},portal:this.node,analyticsEventSeverityTracking:Object(m.getTTRSeverityTrackingConfiguration)(),unsupportedContentLevelsTracking:Object(m.getUnsupportedContentLevelsTrackingConfiguration)(),useSpecBasedValidator:Object(m.isSpecBasedValidatorEnabled)()}))}}T.displayName="Renderer",T.displayName="Renderer",T.defaultProps={adf:void 0,placeholder:void 0,mentionEncoder:()=>""};const _=Object(f.connect)((e=>({cloudId:Object(b.i)(e),loggedInUserAccountId:Object(b.a)(e)})),{})(T);var P=Object(l.a)(Object(o.a)(_));function x(){return(x=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const D=r()(l.a,o.a)(T),A=e=>{const t=Object(u.a)(),s=Object(p.a)(),n=Object(d.a)();return a.a.createElement(D,x({},e,{cloudId:s,loggedInUserAccountId:t,profileCardProvider:n}))};A.displayName="Renderer";t.a=Object(c.a)(m.isProfileCardProviderRendererEnabled,A,P)},"./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"a",(function(){return d}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.div.withConfig({componentId:"qwux5g-0"
})`display:flex;align-items:baseline;flex-wrap:nowrap;justify-content:${e=>e.leftAlign?"normal":"space-between"};`,o=n.default.div.withConfig({componentId:"qwux5g-1"})`display:flex;justify-content:flex-start;align-items:baseline;max-width:100%;`,c=n.default.h2.withConfig({componentId:"qwux5g-2"})`${a.d.h400()};line-height:${3*i.e}px;color:${a.a.heading};overflow-wrap:break-word;min-width:0;`,l=n.default.div.withConfig({componentId:"qwux5g-3"})`display:flex;align-items:center;${e=>e.leftAlign?`margin-left: ${i.e}px`:""};`,d=n.default.div.withConfig({componentId:"qwux5g-4"})`${a.d.h100()};margin-left:${i.e}px;margin-top:0;flex-shrink:0;`},"./src/packages/issue/issue-view/src/common/constants/flags.js":function(e,t,s){"use strict";s.d(t,"i",(function(){return n})),s.d(t,"j",(function(){return a})),s.d(t,"k",(function(){return i})),s.d(t,"l",(function(){return r})),s.d(t,"t",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"p",(function(){return l})),s.d(t,"B",(function(){
return d})),s.d(t,"e",(function(){return u})),s.d(t,"M",(function(){return p})),s.d(t,"y",(function(){return m})),s.d(t,"J",(function(){return f})),s.d(t,"I",(function(){return b})),s.d(t,"C",(function(){return g})),s.d(t,"a",(function(){return h})),s.d(t,"K",(function(){return y})),s.d(t,"A",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"m",(function(){return v})),s.d(t,"z",(function(){return E})),s.d(t,"g",(function(){return w})),s.d(t,"f",(function(){return k})),s.d(t,"o",(function(){return C})),s.d(t,"b",(function(){return S})),s.d(t,"L",(function(){return I})),s.d(t,"w",(function(){return T})),s.d(t,"v",(function(){return _})),s.d(t,"s",(function(){return P})),s.d(t,"r",(function(){return x})),s.d(t,"D",(function(){return D})),s.d(t,"E",(function(){return A})),s.d(t,"F",(function(){return M})),s.d(t,"n",(function(){return L})),s.d(t,"q",(function(){return R})),s.d(t,"h",(function(){return N})),s.d(t,"G",(function(){return F})),s.d(t,"H",(function(){return U})),
s.d(t,"u",(function(){return V})),s.d(t,"x",(function(){return K}))
;const n="COMMENT_ADD_ERROR_GENERIC",a="COMMENT_ADD_ERROR_INVALID",i="COMMENT_CONTENT_EXCEEDED_ERROR",r="COMMENT_DELETE_ERROR",o="EDITOR_ERROR",c="ATTACHMENT_ADD_ERROR",l="DELETE_LINKED_ISSUE_ERROR",d="REMOTE_LINK_VALIDATION_ERROR",u="ATTACHMENT_DELETE_ERROR",p="WATCH_TOGGLE_UPDATE_ERROR",m="FETCH_WATCHERS_ERROR",f="STOP_WATCHING_SUCCESS",b="START_WATCHING_SUCCESS",g="REMOVE_WATCHER_ERROR",h="ADD_WATCHER_ERROR",y="SUBTASKS_REORDER_ERROR_GENERIC",O="LOG_WORK_CONFIRM_ERROR",j="ASSIGN_TO_ME_SUCCESS",v="CREATE_CHILD_ISSUE_ERROR",E="LINK_CHILD_ISSUE_ERROR",w="CHANGE_ISSUE_TYPE_SUCCESS",k="CHANGE_ISSUE_TYPE_ERROR",C="DELETE_ISSUE_ERROR",S="ADD_WORKLOG_FAILURE",I="UPDATE_TIME_REMAINING_FAILURE",T="EDIT_WORKLOG_SUCCESS",_="EDIT_WORKLOG_FAILURE",P="DELETE_WORKLOG_SUCCESS",x="DELETE_WORKLOG_FAILURE",D="RICH_CONTENT_FIELD_CONFIRM_ERROR",A="RICH_CONTENT_FIELD_MAXIMUM_LENGTH_EXCEEDED_ERROR",M="RICH_CONTENT_FIELD_REQUIRED_ERROR",L="DELETE_CONFLUENCE_PAGE_LINK_FAILED",R="DELETE_WEB_LINK_FAILED",N="CLICKTHROUGH_BANNER_DISMISS_SUCCESS",F="SAVE_APPROVAL_ANSWER_ERROR",U="SAVE_APPROVAL_ANSWER_SUCCESS",V="EDIT_EPIC_COLOUR_ERROR",K="FETCH_JIRA_APP_LINKS_ERROR"
},"./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return p})),s.d(t,"e",(function(){return O}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function r(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o=(e,t,s)=>{const a=s?s.type:"",i=Object(n.i)(e,t,a);return{appKey:i(e),moduleKey:i(t),statusType:i(a)}},c=(e,t)=>{let s=0;const a=e.reduce(((e,n)=>{e[n.appKey]||(e[n.appKey]={total:0,totalOnPage:0});const a=e[n.appKey];a.total+=1;const i=`${n.appKey}_${n.moduleKey}`;return t.includes(i)&&(a.totalOnPage+=1,s+=1),e}),{}),i=JSON.stringify(a);return{totalOnPage:s,total:e.length,data:Object(n.i)(i)(i)}},l=(e,t)=>{const s=Object(n.i)(e,t);return{appKey:s(e),moduleKey:s(t)}},d=(e,t)=>l(e,t),u=(e,t,s)=>i(i({},l(e,t)),{},{event:Object(n.i)(s)(s)}),p=(e,t)=>l(e,t),m=e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name}))),f=e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type}))),b=e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type,showByDefault:e.showByDefault}))),g=e=>e.map((e=>({name:e.name
}))),h=e=>"WEB_PANEL"===e.type,y=e=>"ISSUE_MODULE"===e.type,O=(e=[],t=[],s=[],a=[],i=0)=>{const r={glances:f(e),contentPanels:b(t),activityPanels:m(s),operations:g(a)},o=Object.keys(r).reduce(((e,t)=>r[t]&&r[t].length?e+r[t].length:e),0),c=JSON.stringify(r);return{totalGlances:e.filter(y).length,totalLegacyGlances:e.filter(h).length,totalContentPanels:t.filter(y).length,totalLegacyContentPanels:t.filter(h).length,totalActivityPanels:s.length,totalOperations:a.length,totalCustomIssueFields:i,totalModules:o,data:Object(n.i)(c)(c)}}},"./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=(e,t=0)=>{const s=e.lastIndexOf("-"),n=e.substr(s+1);return/^\d+$/.test(n)&&n.length>=t?e.substr(0,s):e},a=e=>{const t=e.match(/^(.*)-(\w+)-(\d+)$/);if(null==t)return null;const[,s,n,a]=t;return{extensionId:s,id:n,added:Number(a)}}},
"./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/lodash/noop.js"),a=s.n(n),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/deferred-globals.js");const r=()=>window.AJS&&window.AJS.dialog2,o=(e,t)=>{Object(i.b)().then((()=>((e,t)=>{r()&&window.AJS.dialog2.on(e,t)})(e,t))).catch(a.a)},c=(e,t)=>{Object(i.b)().then((()=>((e,t)=>{r()&&window.AJS.dialog2.off(e,t)})(e,t))).catch(a.a)}},"./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=()=>({type:"FETCH_UPLOAD_CONTEXT_REQUEST"}),a=e=>({type:"FETCH_UPLOAD_CONTEXT_SUCCESS",payload:e}),i=e=>({type:"FETCH_UPLOAD_CONTEXT_FAILURE",payload:{error:e}}),r=()=>({
type:"CHECK_UPLOAD_CONTEXT"})},"./src/packages/issue/issue-view/src/common/messages/drafts.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({draftIndicator:{id:"issue.draft-indicator-for-multiline-field",defaultMessage:"Unsaved changes"}})},"./src/packages/issue/issue-view/src/common/messages/flags.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({commentWorklogAttachmentFetchFailedTitle:{id:"issue.comment-worklog-attachment-fetch-failed-title",defaultMessage:"We couldn't find the {field}"},commentWorklogAttachmentFetchFailedDescription:{id:"issue.comment-worklog-attachment-fetch-failed-description",defaultMessage:"Reload the issue, then give it another try."}})},"./src/packages/issue/issue-view/src/common/messages/time.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(i.defineMessages)({logWork:{id:"issue.common.messages.time.log-work",defaultMessage:"Log work"},timeInputPlaceholder:{id:"issue.common.messages.time.time-input-placeholder",defaultMessage:"e.g. 2w 4d 6h 45m"},exampleFormat:{id:"issue.common.messages.time.time-input-format-tooltip.example",defaultMessage:"Use the format: {formatExample}"},weeks:{id:"issue.common.messages.time.time-input-format-tooltip.weeks",defaultMessage:"{w} = weeks"},days:{id:"issue.common.messages.time.time-input-format-tooltip.days",defaultMessage:"{d} = days"},hours:{id:"issue.common.messages.time.time-input-format-tooltip.hours",defaultMessage:"{h} = hours"},minutes:{id:"issue.common.messages.time.time-input-format-tooltip.minutes",defaultMessage:"{m} = minutes"}});const r=a.a.createElement(i.FormattedMessage,{id:"issue.common.messages.time.time-invalid-message",
defaultMessage:"You need to log time in the format {timeString}.",values:{timeString:a.a.createElement("b",null,"2w 4d 6h 45m")}})},"./src/packages/issue/issue-view/src/common/metrics/context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/issue-view/src/common/metrics/index.js");const i=e=>t=>{e&&e.onReadyForUser&&e.onReadyForUser();const{isInitialRender:s,lastTransitionStartTime:n}=t;s&&Object(a.k)(!0),Object(a.f)({isInitialRender:s,lastTransitionStartTime:n})},r=e=>t=>{e&&e.onInteractive&&e.onInteractive(),Object(a.e)(t)},o=e=>({onPreviewRendered:i(e),onInteractive:r(e)});let c=null;const l=e=>(c=Object(n.createContext)(o(e)),c),d=()=>c||Object(n.createContext)(o())},"./src/packages/issue/issue-view/src/common/metrics/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return z})),s.d(t,"a",(function(){return Q})),
s.d(t,"i",(function(){return J})),s.d(t,"h",(function(){return Z})),s.d(t,"g",(function(){return X})),s.d(t,"c",(function(){return ee})),s.d(t,"d",(function(){return te})),s.d(t,"e",(function(){return se})),s.d(t,"j",(function(){return ne})),s.d(t,"f",(function(){return ae})),s.d(t,"k",(function(){return ie}))
;var n=s("./node_modules/uuid/index.js"),a=s.n(n),i=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),r=s("./src/packages/platform/utils/constants/src/analytics-marks.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),l=s("./src/packages/platform/observability/event-delay-controller/src/main.js"),d=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/performance-marks-tools/index.js"),u=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js"),p=s("./src/packages/platform/observability/track-all-changes-sampling/src/main.js"),m=s("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js"),f=s("./src/packages/issue/issue-view/src/utils/performance-analytics/index.js"),b=s("./node_modules/reselect/lib/index.js"),g=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const h=Object(b.createSelector)((e=>e.timing),g.r,((e,t)=>t?void 0:e.server)),y=({isInitial:e,issueViewLoad:t})=>{let s=0,n=0;var a,i;if(e)s=null!==(a=window.ISSUE_DATA_AVAILABLE)&&void 0!==a?a:0,n=null!==(i=window.ISSUE_READY_FOR_DATA)&&void 0!==i?i:0;else if(t.marks){var r,o;const e=t.marks;n=null!==(r=e.ISSUE_START_FETCHING_DATA)&&void 0!==r?r:t.startTime,s=null!==(o=e.ISSUE_FETCHED_MARK)&&void 0!==o?o:0}return t.mark("ISSUE_DATA_AVAILABLE",s),t.mark("ISSUE_READY_FOR_DATA",n),{issueDataAvailable:s,issueReadyForData:n}};var O=s("./node_modules/lodash/isFunction.js"),j=s.n(O),v=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),E=s("./src/packages/issue/issue-view/src/feature-flags.js");const w=()=>{const e={};return Object.entries(E).forEach((([t,s])=>{j()(s)&&(e[t]=new v.a(s()))})),e}
;var k=s("./src/packages/platform/utils/permalinks/src/index.js"),C=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),S=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),I=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),T=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),_=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),P=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const A=e=>Object.values(Object(P.s)(e)).filter((e=>"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"===e.schema.custom)),M=e=>{const t=A(e);return 0===t.length?0:t.reduce(((e,t)=>e+((e=>0===e.length?0:Object.values(e).reduce(((e,t)=>{var s;return e+((null==t||null===(s=t.children)||void 0===s?void 0:s.length)||1)}),0))(t.allowedValues)||1)),0)},L=(e,t)=>()=>{const s=e.getState(),{permalinkType:n}=Object(k.b)()||{},a=Object(P.q)("children-issues")(s),i=t?t.getUserPreferenceValue("jira.user.issue.attachment.view"):null;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({visibleContextItem:Object(S.f)(s).length,conditionallyVisibleContextItems:Object(S.a)(s).length,
visibleContentItems:Object(S.e)(s).length,ecosystemGlances:Object(C.m)(s).length,ecosystemContentPanels:Object(C.b)(s).length,ecosystemActivityPanels:Object(C.a)(s).length,ecosystemOperations:Object(C.q)(s).length,ecosystemCustomsFields:Object(S.b)(s).length,childIssues:a?a.value.length:0,linkIssueCount:Object(T.b)(s),subtaskCount:Object(_.d)(s).length,commentsTotalCount:Object(I.K)(s),hasCommentPermalink:"Comments"===n,cascadingSelectCount:A(s).length,cascadingSelectOptionsTotalCount:M(s)},null!=i?{attachmentView:i}:{})};var R=s("./src/packages/platform/utils/constants/src/analytics-sources.js");class N{constructor(e){this.immutableState=void 0,this.isLoadedWithPage=void 0,this.hasLoadedEditor=!1,this.startTime=Math.floor(performance.now()),this.previewEnd=void 0,this.fmp=void 0,this.interactiveEnd=void 0,this.trueInteractiveEnd=void 0,this.immutableState=e,this.isLoadedWithPage=e.isLoadedWithPage}lazyMetricsProps(){return this.immutableState.lazyMetricsProps}getDataProvider(){
return this.immutableState.dataProvider}getIsFullIssue(){return"full-issue"===this.immutableState.analyticsSource}getIsLoadedWithPage(){return this.immutableState.isLoadedWithPage}setIsLoadedWithPage(e){this.isLoadedWithPage=e}getIsSPA(){return this.immutableState.isSPA}getIsRecentIssue(){return this.immutableState.isRecentIssue}getRecentIssuesCount(){return this.immutableState.recentIssuesCount}getAnalyticsSource(){return Object(v.c)(...R.b)(this.immutableState.analyticsSource)}getCorrelationId(){return this.immutableState.correlationId}getIssueScaleabilityReporter(){return this.immutableState.issueScaleabilityReporter}getStartTime(){return this.startTime}setPreviewEnd(e){this.previewEnd=null===e?0:Math.floor(e)}getPreviewEnd(){return this.previewEnd}setFMP(e){this.fmp=null===e?0:Math.floor(e)}getFMP(){return this.fmp}setInteractiveEnd(e){this.interactiveEnd=e}getInteractiveEnd(){return this.interactiveEnd}setTrueInteractiveEnd(e){this.trueInteractiveEnd=Math.floor(e)}
getTrueInteractiveEnd(){return Math.floor(this.trueInteractiveEnd)}getHasLoadedEditor(){return this.hasLoadedEditor}getIsInitial(){return this.getIsFullIssue()&&!this.getIsSPA()}getLocation(){const{route:e}=this.immutableState,t=null==e?void 0:e.name;return new v.a(t||"")}}var F=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),U=s("./src/packages/issue/issue-context-service/src/types.js");var V=(e=null)=>Object(c.i)("sidebar","modal","default")((e=>{switch(e){case U.a:return"modal";case U.b:return"sidebar";default:return null}})(e)||(()=>window.localStorage&&window.localStorage.getItem("gh.ghx-issue-fragment-view-mode")||"default")().replace(/"/g,""));const K=Object(b.createSelector)(F.e,F.H,F.w,((e,t,s)=>({analyticsKey:new v.a(e),viewMode:V(t),issueId:new v.a(s)})));function $(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function W(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$(Object(s),!0).forEach((function(t){B(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function B(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const H="issue.metrics";let G;const q=e=>{try{Object(o.f)(e)}catch(t){c.h.safeErrorWithoutCustomerData(H,"Setting performance mark failed",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}},z=()=>{q("ISSUE_FRAGMENT_READY_MARK")},Y=()=>{window.ISSUE_DATA_AVAILABLE=null,window.ISSUE_READY_FOR_DATA=null},Q=e=>{try{
const{isLoadedWithPage:t,isSPA:s,isRecentIssue:n,recentIssuesCount:i,dataProvider:r,analyticsSource:o,store:c,route:l}=e;G=new N({isLoadedWithPage:t,isSPA:s,isRecentIssue:n,analyticsSource:o,recentIssuesCount:i,correlationId:a.a.v4(),lazyMetricsProps:()=>K(c.getState()),timingDataReporter:()=>W(W({},h(c.getState())),Object(m.b)()),issueScaleabilityReporter:L(c,e.userPreferenceActions),dataProvider:r,route:l}),s&&Y(),f.b.mark("metrics_init")}catch(t){c.h.safeErrorWithoutCustomerData(H,"Failed to initialise issue metrics",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}},J=()=>{q("ISSUE_START_RENDERING_MARK"),f.b.mark("ISSUE_START_RENDERING_MARK")},Z=()=>{q("ISSUE_START_FETCHING_DATA"),f.b.mark("ISSUE_START_FETCHING_DATA")},X=()=>{window.ISSUE_READY_FOR_DATA||(window.ISSUE_READY_FOR_DATA=performance.now())},ee=()=>{window.ISSUE_DATA_AVAILABLE||(window.ISSUE_DATA_AVAILABLE=performance.now())},te=()=>{q("ISSUE_FETCHED_MARK"),f.b.mark("ISSUE_FETCHED_MARK")
},se=({lastTransitionTime:e})=>{const t=G.getIsFullIssue();if(G.setInteractiveEnd(performance.now()),G){const s=e||G.getStartTime();G.getIsFullIssue()&&Object(d.d)("product",u.b,!0),f.b.stop({stopTime:G.getInteractiveEnd(),customData:W(W(W(W(W({},G.getIssueScaleabilityReporter()()),w()),y({isInitial:G.getIsInitial(),issueViewLoad:f.b})),t?{}:{embeddedIssueFMP:Math.floor(G.getFMP()),embeddedIssueTTI:Math.floor(G.getInteractiveEnd()-s),analyticsSource:G.getAnalyticsSource()}),{isBentoRecentIssue:G.getIsRecentIssue(),bentoRecentIssuesCount:G.getRecentIssuesCount(),correlationId:G.getCorrelationId()})}),Y(),t||Object(p.b)()&&Object(l.c)()}},ne=(e=!1)=>{e||(f.a.start({startTime:performance.now()}),Object(p.b)()&&Object(l.b)()),f.b.start()},ae=({isInitialRender:e,lastTransitionStartTime:t})=>{const s=(()=>{const e=Object(o.e)(r.SPA_SSR_RENDERED_MARK);return null!=e?Math.floor(e.startTime):null})(),n=performance.now(),a=G.getStartTime();let i=0;i=G.getIsFullIssue()?e?s:n-(t||a):n-a,
f.b.mark("ISSUE_PREVIEW_RENDERED"),G.setFMP(i),G.setPreviewEnd(n),q("ISSUE_PREVIEW_RENDERED")},ie=e=>{G&&G.setIsLoadedWithPage(e)}},"./src/packages/issue/issue-view/src/common/model/comment-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={type:"public",value:""}},"./src/packages/issue/issue-view/src/common/model/confluence-page-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>"blogpost"===e?"blogpost":"page"},"./src/packages/issue/issue-view/src/common/model/ecosystem-constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n="CONNECT_ENTITY_TYPE",a=["FORGE_ENTITY_TYPE",n]},"./src/packages/issue/issue-view/src/common/model/linked-issue-type.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));const n="INWARD",a="OUTWARD",i="BOTH",r=e=>{switch(e.toUpperCase()){case n:return n;case a:return a;case i:default:return i}
},o={[n]:n,[a]:a,[i]:i}},"./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"b",(function(){return l}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const a=Object(n.b)("issue-changeboarding"),i="banner-seen-times",r="banner-first-seen-timestamp",o=()=>a.get(i)||0,c=e=>a.set(i,e),l=e=>a.set(r,e)},"./src/packages/issue/issue-view/src/common/service/issue/child-issue-transformer-new.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return p}));var n=s("./node_modules/lodash/find.js"),a=s.n(n),i=s("./src/packages/platform/utils/constants/src/status-categories.js"),r=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),o=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function c(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=(e,t)=>{const{fields:s}=e,n=a()(s,(e=>"issuetype"===e.schema.system)),c=a()(s,(e=>"priority"===e.schema.system)),d=a()(s,(e=>"summary"===e.schema.system)),u=a()(s,(e=>"status"===e.schema.system)),p=a()(s,(e=>"assignee"===e.schema.system)),m=p?(e=>{if(null!=e){const{avatarUrl:t,displayName:s}=Object(o.c)(e);return{assigneeUrl:t,
assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(p.value):{},f=a()(s,(e=>"com.pyxis.greenhopper.jira:jsw-story-points"===e.schema.custom)),b=a()(s,(e=>"timetracking"===e.schema.system)),g=a()(s,(e=>"created"===e.schema.system)),h=a()(s,(e=>"updated"===e.schema.system));return l(l({id:e.id,issueLink:Object(r.f)(t,e.key),issueTypeIconUrl:n&&n.value.iconUrl,issueTypeName:n&&n.value.name,issuePriorityUrl:c&&c.value&&c.value.iconUrl||void 0,issuePriorityName:c&&c.value&&c.value.name||void 0,issueKey:e.key,issueSummary:d&&d.value,statusCategory:u&&u.value&&Object(i.statusCategoryForId)(u.value.statusCategory.id),statusCategoryId:u&&u.value&&u.value.statusCategory.id,statusName:u&&u.value&&u.value.name||void 0,statusId:u&&u.value&&u.value.id||void 0,estimateFieldId:f&&f.key||void 0,estimateValue:f&&f.value||void 0,assigneeDisplayName:m.assigneeDisplayName,assigneeUrl:m.assigneeUrl,isLoading:!1,issueTimeTracking:b&&b.value||void 0},g&&g.value&&{
created:new Date(g.value)}),h&&h.value&&{updated:new Date(h.value)})},p=(e=[],t)=>e?e.map((e=>u(e,t))):[]},"./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"g",(function(){return p})),s.d(t,"f",(function(){return m})),s.d(t,"e",(function(){return f})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return g})),s.d(t,"c",(function(){return h}))
;var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const d="-created",u=e=>({id:e.id,author:e.author?Object(l.c)(e.author):null,updateAuthor:e.updateAuthor?Object(l.c)(e.updateAuthor):null,bodyAdf:e.body,bodyHtml:void 0,visibility:e.visibility,createdDate:Object(a.a)(e.created),updatedDate:e.updated?Object(a.a)(e.updated):null,edited:!!e.updated&&e.updated!==e.created,isInternal:!e.jsdPublic
}),p=({id:e,author:t,updateAuthor:s,visibility:n,created:i,updated:o,bodyAdf:c,renderedBody:d,jsdPublic:u})=>({id:e,author:t?Object(l.b)(t):null,updateAuthor:s?Object(l.b)(s):null,visibility:n,createdDate:Object(a.a)(i),updatedDate:o?Object(a.a)(o):null,edited:!!o&&o!==i,bodyAdf:Object(r.a)(c),bodyHtml:d,isInternal:!u}),m=e=>({comments:e.data.issueComments.nodes.map((e=>p(e))),totalComments:e.data.issueComments.totalCount}),f=({type:e,value:t})=>{switch(e?e.toLowerCase():null){case"group":return{value:t,type:"group"};case"role":return{value:t,type:"role"};default:{const s=`transformCommentVisibility: unknown comment visibility type received '${e}'`;return i.h.safeErrorWithoutCustomerData("issue.transform.comment",s,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(s)})),{value:t,type:"role"}}}},b=e=>{const t=e.author?e.author.id:null,s=e.updateAuthor?e.updateAuthor.id:null;return{id:e.id,authorId:t,updateAuthorId:s,bodyAdf:e.bodyAdf,bodyHtml:e.bodyHtml,
createdDate:e.createdDate,updatedDate:e.updatedDate,edited:e.edited,visibility:e.visibility?f(e.visibility):o.a,isInternal:e.isInternal}},g=(e,t,s,n)=>{const{comments:a}=e,i=a.filter((e=>e.author)).map((e=>e.author)),r=Math.max("FETCH_NEWER_COMMENTS_REQUEST"===n?s-a.length:s,0);return{users:Object(c.b)(i,"id"),comments:Object(c.b)(a.map(b),"id"),loadedComments:t+a.length,commentsStartIndex:r,totalComments:e.totalComments}},h=(e,t,s,n,a)=>{const{comments:i}=e,r=i.filter((e=>e.author)).map((e=>e.author));let o;return o="FETCH_NEWER_COMMENTS_REQUEST"===n?Math.max(a===d?s-i.length:s,0):Math.max(a===d?s:s-i.length,0),{users:Object(c.b)(r,"id"),comments:Object(c.b)(i.map(b),"id"),loadedComments:t+i.length,commentsStartIndex:o,totalComments:e.totalComments}}},"./src/packages/issue/issue-view/src/common/service/issue/customer-request-type-server.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/fetch/src/utils/requests.js")
;const a=async(e,t,s)=>{if(!t)throw new Error("Issue ID not available");return Object(n.d)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types/`)(e,t),{body:JSON.stringify({rtId:s})})}},"./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,
configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return b}));const r=(e,t)=>t.includes("http")?t:e+t,o=(e,t)=>{if(t&&"icon"===t.type){const s=a({},t);return s.value.label=r(e,t.value.label),s}return t},c=(e,t)=>{const s=Object.keys(t)[0];return a(a({},e),{},{[s]:a(a({},t[s]),e[s])})},l=e=>"string"==typeof e?JSON.parse(e):e,d=(e=[])=>e.map((e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},label:{type:"text",value:e.content||e.name},status:o(l(e.iframe.options).origin,e.status),type:e.type}}}))).reduce(c,{}),u=(e=[])=>e.map((e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},tooltip:e.tooltip,type:e.type,showByDefault:!!e.showByDefault}}
}))).reduce(c,{}),p=(e=[])=>e.map((({iframe:e,shouldReloadOnRefresh:t})=>({appKey:e.addonKey,moduleKey:e.moduleKey,options:l(e.options),shouldReloadOnRefresh:t}))),m=(e=[])=>e.map((e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options)}}}))).reduce(c,{}),f=(e=[])=>e.map((e=>({name:e.name,url:e.url,tooltip:e.tooltip,styleClass:e.styleClass}))),b=e=>({glances:d(e.glances),contentPanels:u(e.contentPanels),backgroundScripts:p(e.backgroundScripts),operations:f(e.operations),activityPanels:m(e.activityPanels),ecosystemOnDate:e.ecoSystemOnDate,canInstallAddons:e.canInstallAddons||!1})},"./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return p}))
;var n=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),a=s("./src/packages/platform/utils/permalinks/src/index.js"),i=s("./src/packages/platform/utils/permalinks/src/constants.js");const r=(e,t,s)=>`\n    comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", ${(()=>{const{hasPermalink:e,permalinkId:t}=Object(a.a)(i.a);return e?`commentId: ${t}`:""})()}) {\n        nodes {\n            id\n            author {\n                accountId\n                displayName\n                avatarUrl\n            }\n            updateAuthor {\n                accountId\n                displayName\n                avatarUrl\n            }\n            visibility {\n                type\n                value\n            }\n            created\n            updated\n            renderedBody\n            jsdPublic\n            bodyAdf\n        }\n        totalCount\n        startIndex\n    }\n`;function o(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=()=>r(5,0,"-created"),u=e=>{const{comments:t}=e;if(!t)return{users:{},comments:{},totalComments:0,commentsStartIndex:0,loadedComments:0};const{totalCount:s,startIndex:a}=t,i={data:{issueComments:t}};return c(c({},Object(n.b)(Object(n.f)(i),0,a)),{},{totalComments:s,commentsStartIndex:a})},p=(e,t,s,a,i)=>{const{comments:r}=e
;if(!r)return{users:{},comments:{},totalComments:0,commentsStartIndex:0,loadedComments:0};const{totalCount:o}=r,l={data:{issueComments:r}};return c(c({},Object(n.c)(Object(n.f)(l),t,s,a,i)),{},{totalComments:o})}},"./src/packages/issue/issue-view/src/common/service/issue/gira/index.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return oe})),s.d(t,"c",(function(){return ce})),s.d(t,"a",(function(){return le})),s.d(t,"b",(function(){return de}))
;var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/utils/fetch/src/utils.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js"),l=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),d=s("./src/packages/issue/issue-view/src/feature-flags.js"),u=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),p=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js")
;var m=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),f=s("./node_modules/lodash/flatten.js"),b=s.n(f),g=s("./node_modules/lodash/isNumber.js"),h=s.n(g),y=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),O=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),v=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js");function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){k(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const C=e=>{if(Object(d.is2afErrorCleanupGroup2Enabled)()&&!e||!e.ecosystem||!e.fields)return{ecosystem:{},issueContentPanels:Object(d.is2afErrorCleanupGroup2Enabled)()?void 0:[],forgeIssueProperties:{collapsedPanels:Object(d.is2afErrorCleanupGroup2Enabled)()?void 0:[]}};const{ecosystem:t}=e,s=Object(v.a)(e.fields,"GlancesField"),n=s?s.value.map((e=>w(w({},e),{},{status:e.status?JSON.parse(e.status):null}))):[],{forgeCollapsedPanels:a,forgePanelsKeys:i}=(e=>{const t=e.forge?b()((e.forge.panels||[]).map((e=>{const{id:t,instances:s}=e;return(Array.isArray(s)?s:[]).filter((({added:e})=>h()(e))).map((({added:e,id:s,collapsed:n})=>({key:Object(y.f)(t,s,e),
collapsed:n||!1})))}))):[];return{forgeCollapsedPanels:t.filter((({collapsed:e})=>e)).map((({key:e})=>e)),forgePanelsKeys:t.map((({key:e})=>e))}})(t),r=t?(t.contentPanels||[]).filter((e=>e.manuallyAddedToIssue)).map((e=>`${e.iframe.addonKey}_${Object(O.b)(e.iframe.moduleKey)}`)):[],o=t.contentPanelsCustomised?["issue.content.panel.customised.flag"]:[],c={contentPanels:t.contentPanels||[],operations:t.operations||[],activityPanels:t.activityPanels||[],backgroundScripts:t.backgroundScripts||[],ecoSystemOnDate:t.ecoSystemOnDate||0,contentPanelsCustomised:t.contentPanelsCustomised};return{ecosystem:Object(j.b)(w(w({},c),{},{glances:n,canInstallAddons:!1})),issueContentPanels:[...i,...r,...o],forgeIssueProperties:{collapsedPanels:a}}
},S=()=>"\n      timeTracking {\n        isTimeTrackingEnabled\n        hoursPerDay\n        daysPerWeek\n        defaultUnit\n      }\n",I=({shouldRefreshComments:e}={})=>`\n    query issueViewDynamicQuery($issueKey: String!) {\n        viewIssue(issueKey: $issueKey) {\n            ${!0===e?Object(m.a)():""}  \n            ${(()=>(()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised \n      ${(()=>"forge {\n        panels {\n          id\n          instances {\n            id\n            collapsed\n            added\n          }\n        }\n      }")()}\n    }\n`)())()}\n            fields {\n                __typename \n                    ${(()=>"\n  ... on GlancesField {\n    fieldKey\n    value {\n      name\n      status\n      iframe {\n        addonKey\n        moduleKey\n        options\n      }\n      icon {\n        url\n      }\n      content\n      type\n    }\n  }\n")()}\n            }\n        }\n        ${(()=>`\n    jiraSettings {\n      ${S()}\n      issueLinkTypes {\n        id\n        name\n        inward\n        outward\n      }\n    }\n`)()}\n        ${(()=>"\n    licensedProducts {\n        name\n        status\n    }\n")()}\n        activitySortOrder\n    }\n`
;function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){P(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x={isTimeTrackingEnabled:!1,daysPerWeek:5,hoursPerDay:8,defaultUnit:"minute",format:"pretty"},D=e=>({timeTrackingConfiguration:e.timeTracking||x});function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function M(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(Object(s),!0).forEach((function(t){L(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function L(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const R={CONTENT_VISIBLE:"visible",CONTENT_REQUEST:"request"},N={CONTEXT_PRIMARY:"primary",CONTEXT_SECONDARY:"secondary"},F={primary:[],secondary:[]},U=({itemId:e,type:t})=>({id:e,type:t}),V=e=>e.layoutItems.reduce(((e,{category:t,items:s})=>{const n=N[t];return void 0!==n?M(M({},e),{},{[`${n}`]:s.map(U)}):e}),F),K={visible:[],request:void 0},$=e=>e.layoutItems?e.layoutItems.reduce(((e,{category:t,items:s})=>{const n=R[t]
;return void 0!==n?M(M({},e),{},{[`${n}`]:s.map(U)}):e}),K):K;var W=s("./src/packages/platform/utils/types/src/license-state.js");function B(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function H(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B(Object(s),!0).forEach((function(t){G(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const q=(e=[],t)=>{const s=e.find((e=>e.name===t));switch(s&&s.status){case"ACTIVE":return W.a;case"SUSPENDED":return W.c;case"EXPIRED":return W.b;default:return W.d}
},z=(e=[])=>({licensedProducts:e.reduce(((e,t)=>H(H({},e),{},{[t.name]:"ACTIVE"===t.status})),{}),licenseStates:{core:q(e,"jira-core"),software:q(e,"jira-software"),serviceDesk:q(e,"jira-servicedesk")}});var Y=s("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js");var Q=s("./src/packages/issue/project-permissions-service/src/context.js"),J=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");function Z(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function X(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(s),!0).forEach((function(t){ee(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Z(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ee(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var te=s("./src/packages/rich-content/src/common/adf-parsing-utils.js");const se=e=>{const{accountId:t,displayName:s=null,avatarUrl:n=null}=e;return{accountId:t,displayName:s,avatarUrl:n}},ne=e=>{const t=e.map((e=>(e=>{const{id:t,author:s,updateAuthor:n,created:a,updated:i,started:r,comment:o,timeSpent:c}=e,l=i!==a;return{id:t,author:s?se(s):null,updateAuthor:l&&n?se(n):null,updated:l?i:null,started:r,timeSpent:c,comment:Object(te.a)(o)}})(e)));return{worklogs:Object(v.b)(t,"id")}};s("./src/packages/platform/utils/permalinks/src/index.js");function ae(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ie(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(s),!0).forEach((function(t){re(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ae(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function re(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const oe=e=>{const{activitySortOrder:t,viewIssue:s,licensedProducts:n,jiraSettings:a,permissions:i,myPreferences:r,mediaContext:o,project:c}=e;return ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie({},(e=>({attachments:e.attachments}))(s)),Object(m.b)(s)),(e=>{const{worklogs:t}=e;if(!t)return{worklogs:{},sortedWorklogIds:[],totalWorklogs:0,worklogsStartIndex:0};const{totalCount:s,startIndex:n,nodes:a}=t,{worklogs:i}=ne(a);return{worklogs:i,sortedWorklogIds:a.map((e=>e.id)),totalWorklogs:s,worklogsStartIndex:n}})(s)),C(s)),z(n)),(e=>{
const t=D(e),s=((e={issueLinkTypes:[]})=>{const t=[];return e.issueLinkTypes.forEach((e=>t.push(...(({id:e,inward:t,outward:s})=>{const n=[];return t&&t===s?n.push({id:e,label:t,direction:"BOTH"}):(n.push({id:e,label:t,direction:"INWARD"}),n.push({id:e,label:s,direction:"OUTWARD"})),n})(e)))),{issueLinkTypes:t}})({issueLinkTypes:e.issueLinkTypes||[]}),n=(e=>({subtasksConfiguration:e.subtasks}))(e),a=(e=>({newIssueViewTransitionSettings:e.newIssueViewTransitionSettings}))(e);return{jiraSettings:_(_(_(_({},t),s),n),a)}})(a)),(e=>e&&0!==e.length?Object(J.d)({permissions:e.reduce(((e,t)=>X(X({},e),{},{[t.key]:t})),{})}):{permissions:Q.a})(i)),(e=>e?{myPreferences:e}:Object.freeze({}))(r)),(e=>({issueTypes:e?e.issueTypes:[],newIssueViewLockedIn:Boolean(e&&e.newIssueViewLockedIn)}))(c)),{},{contextItemsCategories:V(s),contentItemsCategories:$(s),issueSections:s.issueSections},(e=>e?Object(Y.a)(e):{})(o)),(e=>{const{remoteLinks:t}=e;return t?{remoteLinks:t}:{remoteLinks:{isLinkingEnabled:!1,
remoteLinkedIssues:[]}}})(s)),{},{activitySortOrder:t})},ce=e=>{let t=0;const s=e=>e.path?e.path.join("."):e.locations?e.locations.map((e=>`line ${e.line}, column ${e.column}`)).join("&"):(t+=1,`error without path or location: ${t}`),n=e.reduce(((e,t)=>ie(ie({},e),{},{[s(t)]:t.message})),{});return new a.a({eventNameSuffix:"issue.error.gira",type:"fetch",app:"issue",event:n})},le=async(e,t,s)=>{const a=Object(p.a)(s,(()=>n.Observable.fromPromise(Object(c.a)(e,t)))).toPromise(),{data:l,errors:m}=await a;if(!l){const e=m?JSON.stringify(ce(m)):"No data returned from graphql call";throw new u.a(new Error(e),o.a)}if(l&&m&&i.h.safeErrorWithoutCustomerData("issue.fetch.gira","Failed to fetch some data from gira",ce(m)),!l.viewIssue){if(Object(d.isViewIssueSlaOnMissingGiraDataEnabled)()&&Array.isArray(m)&&m.length>0){const e=JSON.stringify(ce(m));throw new u.a(new r.a(500,`Call to gira returned empty viewIssue with errors: ${e}`),o.a)}
throw new u.a(new r.a(404,"Call to gira returned empty viewIssue"),o.a)}return oe(l)},de=async(e,t,s)=>{const n=await Object(l.a)(e).query({query:I(s),variables:{issueKey:t}}),{data:a,errors:r}=n;if(!a){const e=r?JSON.stringify(ce(r)):"No data returned from graphql call for dynamic data";throw new Error(e)}return a&&r&&i.h.safeErrorWithoutCustomerData("issue.fetch.gira.dynamic","Failed to fetch some data from gira for dynamic data fetch",ce(r)),(e=>{const{viewIssue:t,licensedProducts:s,jiraSettings:n,activitySortOrder:a}=e;return Object(d.is2afErrorCleanupGroup2Enabled)()?ie(ie(ie(ie(ie({},t&&t.comments&&Object(m.b)(t)),z(s)),t&&C(t)),D(n)),{},{activitySortOrder:a}):ie(ie(ie(ie(ie({},t&&t.comments?Object(m.b)(t):{}),z(s)),C(t)),D(n)),{},{activitySortOrder:a})})(a)}},"./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o}))
;const n=e=>e.length>0?e[0].token:null,a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,tokenIssueTimestamp:Date.now()-1e4,collection:null}),i=e=>null!=e.clientId&&null!=e.endpointUrl&&null!=e.token&&null!=e.tokenDurationInMins&&null!=e.targetCollection?{clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4}:null!=e.error?{error:e.error}:null,r=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*Number(e.tokenDurationInMins)*1e3,tokenIssueTimestamp:Date.now()-1e4}),o=({readToken:e,uploadToken:t,userToken:s})=>({viewContext:e?a(e):null,uploadContext:t?i(t):null,userAuth:s?r(s):null})},"./src/packages/issue/issue-view/src/common/service/issue/gira/util.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const r=(e,t)=>e.find((e=>e.__typename===t)),o=(e,t)=>e.reduce(((e,s)=>a(a({},e),{},{[s[t]]:s})),{})},"./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return k})),s.d(t,"a",(function(){return C})),s.d(t,"b",(function(){
return S})),s.d(t,"d",(function(){return I}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),l=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),m=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const f=(e,t)=>[e.retry(2),t.retry(2)]
;var b=s("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),g=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js"),h=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function j(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?j(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=(e,t,s,n,o)=>Object(l.a)(o,(()=>((e,t,s)=>Object(a.a)(Object(y.d)(e),Object(r.a)(t,s)))(e,t,s))).catch((e=>{throw new c.a(e,Object(y.d)(Object(i.c)("{baseUrl}")))})).map((e=>((e,t)=>{if(t.errors){const s=t.errors[0],n=new m.a(s.message);throw p.h.safeErrorWithoutCustomerData(e,"getGraphQlData: Error present in GraphQL response",new u.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:n})),n}return t.data})("issue.fetch.issue-fetch-server",e))).map((t=>Object(h.c)(t,e))),k=(e,t)=>{const s=Object(d.f)(e),a=Object(d.x)(e),i=Object(d.B)(e);Object(d.n)(e);return n.Observable.zip(...f(n.Observable.fromPromise(Object(b.b)(s,a,t)),w(s,a,i)),((e,t)=>v(v({},e),t)))},C=(e,t)=>{const s=Object(d.f)(e),a=Object(d.x)(e),i=Object(d.B)(e),r=(Object(d.n)(e),n.Observable.fromPromise(Object(b.a)(s,a,t&&t.issueGiraData)).catch((e=>{throw new c.a(e,o.a)
}))),l=w(s,a,i,0,t&&t.issueGraphqlData),u=Object(d.r)(e),p=Object(d.o)(e),m=!(u||p)?f(r,l):((e,t,s)=>[e.retry(2),t.retry(2),s.retry(2)])(r,l,Object(O.a)(s,i));return n.Observable.zip(...m,((e,t)=>v(v(v({},e),t),{},{issue:v(v({},t.issue),{},{contextItemsCategories:e.contextItemsCategories,contentItemsCategories:e.contentItemsCategories}),project:v(v({},t.project),{},{issueTypes:e.issueTypes})})))},S=(e,t,s)=>n.Observable.from(t).bufferCount(50).flatMap((t=>((e,t,s)=>Object(a.a)(Object(y.o)(e),{method:"POST",body:JSON.stringify({jql:t,fields:s})}).map(h.b))(e,`key in (${t.join(",")})`,s))).reduce(((e,t)=>[...e,...t]),[]),I=(e,t)=>Object(a.a)(Object(y.g)(e,t)).map((t=>t.fields.issuelinks&&Object(g.b)(e,t.fields.issuelinks)))},"./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return f})),s.d(t,"a",(function(){return b}))
;var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/platform/utils/constants/src/index.js"),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}
return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{statusCategoryForId:m}=i.a,f=(e,t=[])=>{let s={},n={};t&&t.filter(Boolean).forEach((({id:t,inwardIssue:i,outwardIssue:o,type:d})=>{let p,f,b=null;if(i?(f="inward",b=d.inward,p=i):o&&(f="outward",b=d.outward,p=o),b&&null!=p){const i={id:Object(r.k)(t),linkedIssueKey:p.key,direction:f,typeName:b,typeId:d.id};s=u(u({},s),{},{[t]:i});const o=((e,t)=>{const{id:s,key:n,fields:i}=e;return{id:s,issueKey:n,issueLink:Object(c.f)(t,e.key),issueSummary:i.summary,statusCategory:m(a()(e.fields,"status.statusCategory.id")),statusCategoryId:a()(e.fields,"status.statusCategory.id"),statusName:i.status&&i.status.name,statusId:i.status&&i.status.id,issuePriorityUrl:a()(i,"priority.iconUrl",null),issuePriorityName:a()(i,"priority.name",null),issueTypeIconUrl:a()(i,"issuetype.iconUrl",null),issueTypeName:a()(i,"issuetype.name",null),
assigneeDisplayName:i.assignee?Object(l.c)(i.assignee).displayName:null,assigneeUrl:i.assignee?Object(l.c)(i.assignee).avatarUrl:null}})(p,e);n=u(u({},n),{},{[o.issueKey]:o})}}));const i=s?Object.values(s).map((({linkedIssueKey:e})=>e)):[];return{issueLinks:s,linkedIssueKeys:i,linkedIssues:n}},b=e=>e.map((e=>{const{id:t,type:s}=e;return{id:t,type:s,inwardIssue:e.inwardIssue?Object(o.b)(e.inwardIssue):null,outwardIssue:e.outwardIssue?Object(o.b)(e.outwardIssue):null}}))},"./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return T})),s.d(t,"a",(function(){return x})),s.d(t,"c",(function(){return A})),s.d(t,"b",(function(){return M}));var n=s("./src/packages/platform/utils/constants/src/status-categories.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/platform/utils/types/src/general.js")
;var r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const m=(e,t)=>{const{fields:s}=e;return u(u({id:e.id,issueLink:Object(c.f)(t,e.key),issueTypeIconUrl:s.issuetype.iconUrl,issueTypeName:s.issuetype.name,issuePriorityUrl:s.priority&&s.priority.iconUrl||void 0,issuePriorityName:s.priority&&s.priority.name||void 0,issueKey:e.key,issueSummary:s.summary,statusCategory:Object(n.statusCategoryForId)(s.status.statusCategory.id),statusCategoryId:s.status.statusCategory.id,statusName:s.status.name,statusId:s.status.id},(e=>{if(null!=e){const{avatarUrl:t,displayName:s}=Object(l.c)(e);return{assigneeUrl:t,assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(s.assignee)),{},{isLoading:!1})};var f=s("./src/packages/issue/issue-view/src/common/service/issue/child-issue-transformer-new.js"),b=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");const g=(e=[],t)=>null===e?[]:e.map((e=>((e,t)=>({id:e.id,issueLink:Object(c.f)(t,e.key),issueTypeIconUrl:e.fields.issuetype.iconUrl,
issueTypeName:e.fields.issuetype.name,issuePriorityUrl:e.fields.priority&&e.fields.priority.iconUrl||void 0,issuePriorityName:e.fields.priority&&e.fields.priority.name||void 0,issueKey:e.key,issueSummary:e.fields.summary,statusCategory:Object(n.statusCategoryForId)(e.fields.status.statusCategory.id),statusCategoryId:e.fields.status.statusCategory.id,statusId:e.fields.status.id,statusName:e.fields.status.name,isLoading:!1,hasError:!1,assigneeUrl:e.fields.assignee?Object(l.c)(e.fields.assignee).avatarUrl:null,assigneeDisplayName:e.fields.assignee?Object(l.c)(e.fields.assignee).displayName:null,issueTimeTracking:e.fields.timetracking}))(e,t))),h=["content","renderedContent","configuration"];function y(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){v(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const E=e=>e?Object(a.a)(e):null,w=(e,t)=>e&&e[t],k=e=>e?{id:Object(i.k)(e.id),key:Object(i.m)(e.key),summary:e.fields.summary,issueTypeName:e.fields.issuetype?e.fields.issuetype.name:"",
issueTypeIconUrl:e.fields.issuetype?e.fields.issuetype.iconUrl:""}:null,C=e=>{if(e.project.avatarUrls){const t=e.project.avatarUrls.find((e=>"32x32"===e.key));return t?t.value:t}return e.project.avatarUrls},S=e=>e.archived?"PROJECT_ARCHIVED":e.deleted?"PROJECT_TRASHED":"PROJECT_ACTIVE",I=(e,t)=>{const s=(e=>e.reduce(((e,t)=>j(j({},e),{},{[t.key]:t})),{}))(e.issue.fields),a=(e=>t=>t?t.split(".").reduce(w,e):e)(s),i=a("subtasks.content"),r=a("parent-issue.content"),c=a("children-issues.content"),l=a("epic-issues.content"),d=a("portfolio-child-issues.content");let u=[];return c?u=Object(f.b)(c,t):l?u=Object(f.b)(l,t):d&&(u=((e=[],t)=>e?e.map((e=>m(e,t))):[])(d,t)),{project:{projectId:e.project.id,projectName:e.project.name,projectKey:e.project.key,projectType:e.project.projectTypeKey,isSimplified:e.project.simplified,avatarUrl:C(e),projectStatus:Object(o.isJsmProjectArchiveAndRestoreEnabled)()?S(e.project):void 0},createdDate:E(a("created.content")),updatedDate:E(a("updated.content")),
statuses:{[s.status.content.id]:{id:s.status.content.id,name:s.status.content.name,statusCategory:Object(n.statusCategoryForId)(s.status.content.statusCategory.id)}},issueLinks:s.issuelinks&&Object(b.b)(t,s.issuelinks.content),subtasks:g(i,t),parentIssue:k(r),childrenIssues:u}},T=e=>{const{permissions:{ADMINISTER:t,ADMINISTER_PROJECTS:s,ASSIGN_ISSUES:n,EDIT_ISSUES:a,SCHEDULE_ISSUES:i,ADD_COMMENTS:r,DELETE_ALL_COMMENTS:o,DELETE_OWN_COMMENTS:c,EDIT_ALL_COMMENTS:l,EDIT_OWN_COMMENTS:d,CREATE_ISSUES:u,CREATE_SUBTASK:p,CLONE_ISSUE:m,DELETE_ISSUES:f,MOVE_ISSUES:b,MODIFY_REPORTER:g,CREATE_ATTACHMENTS:h,DELETE_ALL_ATTACHMENTS:y,DELETE_OWN_ATTACHMENTS:O,WORK_ON_ISSUES:j,ASSIGNABLE_USER:v,LINK_ISSUES:E,VIEW_VOTERS_AND_WATCHERS:w,MANAGE_WATCHERS:k,EDIT_ALL_WORKLOGS:C,EDIT_OWN_WORKLOGS:S,DELETE_ALL_WORKLOGS:I,DELETE_OWN_WORKLOGS:T,USER_PICKER:_,VIEW_DEV_TOOLS:P,SERVICEDESK_AGENT:x,RESOLVE_ISSUES:D}}=e;return{permissions:{canAddComments:r.havePermission,canAdministerJira:t.havePermission,
canAdministerProject:s.havePermission,canAssignIssues:n.havePermission,canBeAssignedToIssues:v.havePermission,canCloneIssue:m.havePermission,canCreateAttachments:h.havePermission,canCreateChildren:u.havePermission,canCreateIssuesInClassicProjectEpic:u.havePermission,canCreateSubtask:p.havePermission,canDeleteAllAttachments:y.havePermission,canDeleteOwnAttachments:O.havePermission,canDeleteAllComments:o.havePermission,canDeleteOwnComments:c.havePermission,canDeleteIssue:f.havePermission,canEditAllComments:l.havePermission,canEditOwnComments:d.havePermission,canEditIssues:a.havePermission,canLinkIssues:E.havePermission,canLogWork:j.havePermission,canManageWatchers:k.havePermission,canMoveIssue:b.havePermission,canModifyReporter:g.havePermission,canScheduleIssues:i.havePermission,canViewWatchers:w.havePermission,canViewVoters:w.havePermission,canEditAllWorklogs:C.havePermission,canEditOwnWorklogs:S.havePermission,canDeleteAllWorklogs:I.havePermission,canDeleteOwnWorklogs:T.havePermission,
canBrowseUsers:_.havePermission,canViewDevTools:!(!P||!P.havePermission),canUseServiceDeskAgentFeatures:!(!x||!x.havePermission),canResolveIssues:D.havePermission}}},_=e=>{const{content:t,renderedContent:s,configuration:n}=e,a=y(e,h),i=void 0!==t||void 0!==s;return j(j(j(j({},i?{value:t}:null),i?{renderedValue:s}:null),n&&{configuration:n}),a)},P=(e,t)=>{const s=((e,t)=>{const s=e.issue.systemFields[`${t}Adf`],n=e.issue.customFields.textareaAdf.find((e=>e.key===t));return s||n||null})(e,t);let n;n=s&&s.value?{value:s.value}:{value:r.c};const a="string"==typeof n.value?JSON.parse(n.value):n.value;return Object(r.h)(a)},x=e=>{const t=new Set(e.issue.fields.filter((e=>"atlassian-wiki-renderer"===e.schema.renderer)).map((e=>e.key))),s=e.issue.customFields.textareaAdf.map((e=>e.key)).filter((e=>t.has(e))),n=[...["description","environment"].filter((e=>t.has(e)||"description"===e)),...s].map((t=>({key:t,value:P(e,t)})));return e.issue.fields.map((e=>{
const t=n.find((t=>t.key===e.key&&null!==t.value));return t?{[t.key]:j(j({},_(e)),{},{adfValue:t.value})}:{[e.key]:_(e)}})).reduce(((e,t)=>Object.assign(e,t)))},D=e=>e?e.reduce(((e,{id:t,name:s,items:n})=>j(j({},e),{},{[t]:{id:t,name:s,items:n}})),{}):{},A=(e,t)=>{const s=I(e,t),n={issue:j({id:e.issue.id,agile:e.issue.agile,fields:x(e),tabs:D(e.issue.tabs)},e.issue.viewScreenId?{viewScreenId:e.issue.viewScreenId}:null)};return j(j({},n),s)},M=({issues:e=[]}={})=>e},"./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js":function(e,t,s){"use strict";s.d(t,"q",(function(){return n})),s.d(t,"f",(function(){return r})),s.d(t,"j",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"o",(function(){return l})),s.d(t,"g",(function(){return d})),s.d(t,"p",(function(){return m})),s.d(t,"a",(function(){return f})),s.d(t,"i",(function(){return b})),s.d(t,"m",(function(){return g})),s.d(t,"n",(function(){return h})),s.d(t,"d",(function(){return y})),
s.d(t,"b",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"h",(function(){return v})),s.d(t,"l",(function(){return w})),s.d(t,"k",(function(){return k}));const n=e=>e,a=/^([A-Z][A-Z0-9]+)-([0-9]*)$/i,i=e=>{if(e){const t=a.exec(e);if(t&&3===t.length)return t[1]}},r=(e,t)=>`${e}/browse/${t}`,o=(e,t)=>`${e}/browse/${t}`,c=(e,t)=>`${e}/rest/api/2/issue/${t}`,l=e=>`${e}/rest/api/2/search`,d=(e,t)=>`${e}/rest/api/2/issue/${t}?fields=issuelinks`,u=(e,t,s,n)=>`${e}/rest/api/2/issue/picker?currentIssueKey=${s}&showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(n)}&currentJQL=${encodeURIComponent(t)}`,p="(resolution = Unresolved or statusCategory != Done) ORDER BY priority DESC, updated DESC",m=(e,t,s)=>{let n=`project in projectsWhereUserHasPermission("Link Issues") AND ${p}`;const a=i(s);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),u(e,n,t,s)},f=(e,t,s)=>{let n="";const a=i(s)
;return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),u(e,n,t,s)},b=(e,t)=>`${e}/rest/api/2/issue/createmeta?projectKeys=${t}&expand=projects.issuetypes.fields`,g=e=>`${e}/rest/api/2/issueLink`,h=(e,t)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/${t}/createIssueLink`,y=e=>`${e}/rest/graphql/1/`,O=e=>`${e}/rest/api/2/mypreferences?key=jira.user.issue.changeboarding.lastinteracted`,j=e=>`${e}/rest/confluenceIssueLink/1/confluence/applink`,v=(e,t)=>`${e}/rest/issueLinkAppLink/1/appLink/info?type=com.atlassian.applinks.api.application.jira.JiraApplicationType&issueIdOrKey=${t}`,E=(e,t,s,n)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/picker?showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(s)}&currentJQL=${encodeURIComponent(t)}&appId=${n}`,w=(e,t,s)=>{let n=p;const a=i(t);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),E(e,n,t,s)},k=(e,t,s)=>{let n="";const a=i(t)
;return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),E(e,n,t,s)}},"./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/query-string/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/constants/src/spa-routes.js"),r=s("./src/packages/issue/issue-context-service/src/types.js");const o=()=>a.a.parse(window.location.search).view||"",c=()=>o().includes("planning"),l=e=>e.name===i.c.RAPIDBOARD_BACKLOG||e.name===i.c.RAPIDBOARD_USER_BACKLOG,d=e=>e?e===r.b:c()||(()=>"detail"===o())()},"./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}))
;var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const l=e=>e.projects[0]?{subtaskTypes:e.projects[0].issuetypes.filter((e=>e.subtask)),issueTypes:e.projects[0].issuetypes}:{subtaskTypes:[],issueTypes:[]},d=(e,t,s)=>((e,t)=>Object(i.a)(e,{perf:r.f,headersProcessor:t&&t(r.f.key)}).map(l).catch((e=>(Object(o.a)("issue.issue-base.content.subtasks.type.subtasks-types-epic","Failed to fetch subtask types.",e,new a.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),n.Observable.of({subtaskTypes:[],issueTypes:[]})))))(Object(c.i)(e,t),s)},
"./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return m})),s.d(t,"a",(function(){return f})),s.d(t,"b",(function(){return g})),s.d(t,"d",(function(){return h}));var n=s("./node_modules/lodash/every.js"),a=s.n(n),i=s("./node_modules/lodash/has.js"),r=s.n(i),o=s("./node_modules/lodash/partial.js"),c=s.n(o),l=s("./src/packages/platform/utils/types/src/general.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=["accountId","displayName","avatarUrls","timeZone"],m=({accountId:e,displayName:t,avatarUrls:s,timeZone:n})=>({displayName:t,id:Object(l.a)(e),avatarUrl:s["48x48"],timeZone:n}),f=e=>{
const{applicationRoles:t}=e;return t&&t.items&&t.items.map((e=>e.key))||[]},b=e=>{const t=e.find((e=>"48x48"===e.key));return t&&t.value||null},g=e=>{const{accountId:t,displayName:s,avatarUrl:n,avatarUrls:a,timeZone:i}=e;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:t,displayName:s,avatarUrl:n||b(a)},i?{timeZone:i}:{})},h=e=>{if(!e)throw new Error("User is null or undefined");if(!(e&&a()(p,c()(r.a,e))))throw new Error(`User object is not expected shape, keys present: ${Object.keys(e).toString()}`);return e}},"./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js":function(e,t,s){"use strict"
;var n=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js");t.a=Object(n.a)((e=>t=>Object(a.isProfileCardProviderRendererEnabled)()?void 0:`${e}/people/${t}`))},"./src/packages/issue/issue-view/src/common/service/mentions/issue-user-team-mention-provider.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/query-string/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/platform/services/mention-provider/src/services/user-mention-provider/index.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0
}):e[t]=s,e}const l=e=>null==e||""===e?"":`${window.location.origin}/jira/people/team/${e}?ref=jira$&src=issue`,d=({accountId:e,teamId:t,name:s,avatarUrl:n,members:a,memberCount:r,includesYou:o})=>a?{id:Object(i.a)(t||""),name:s,accessLevel:"CONTAINER",userType:"TEAM",avatarUrl:n,context:{members:a.map((e=>(({accountId:e,name:t})=>({id:e,name:t}))(e))),memberCount:r||0,includesYou:o||!1,teamLink:l(t)}}:{name:s,mentionName:s,nickname:s,id:Object(i.a)(e||""),avatarUrl:n};class u extends r.a{constructor(e,t,s,a,i){super(e,t,s,i),this.teamHighlightEnabled=void 0,this.createTeamPath=void 0,this.mentionTypeaheadHighlightEnabled=()=>!0,this.mentionTypeaheadCreateTeamPath=()=>this.createTeamPath,this.getQueryString=(e,t)=>Object(n.stringify)(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){c(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({query:e||"",issueKey:this.issueKey,maxResults:20},t)),this.getUrl=e=>`${this.baseUrl}/rest/internal/2/userteam/mention/search?${e}`,this.createTeamPath=a}search(e,t){const s=this.getQueryString(e,t),n=this.getUrl(s);return this.activeSearches.add(e||""),Object(a.a)(n).mergeMap((e=>e.map(d))).reduce(((e,t)=>[...e,t]),[]).map((t=>({query:e||"",mentions:t}))).toPromise()}}},"./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/service/mentions/issue-user-team-mention-provider.js");const o=Object(n.createSelector)(a.f,a.x,a.a,i.F,((e,t,s,n)=>new r.a(e,t,s,`${e}/jira/people/search#createTeam`,n)))},"./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");t.a=n.default.div.withConfig({componentId:"sc-11nf1q5-0"
})`width:${5*a.e}px;height:${5*a.e}px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCA0MCA0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMnB4IGNpcmNsZSBpbnNpZGUgNDBweCByZWN0PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPjwvZGVmcz4gICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iMzJweC1jaXJjbGUtaW5zaWRlLTQwcHgtcmVjdCIgZmlsbD0iI0ZGRkZGRiI+ICAgICAgICAgICAgPHBhdGggZD0iTTAsMCBMNDAsMCBMNDAsNDAgTDAsNDAgTDAsMCBaIE0yMCw0IEMxMS4xNjM0NDQsNCA0LDExLjE2MzQ0NCA0LDIwIEM0LDI4LjgzNjU1NiAxMS4xNjM0NDQsMzYgMjAsMzYgQzI4LjgzNjU1NiwzNiAzNiwyOC44MzY1NTYgMzYsMjAgQzM2LDExLjE2MzQ0NCAyOC44MzY1NTYsNCAyMCw0IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+);`},
"./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");t.a=n.default.div.withConfig({componentId:"sc-1jbkwip-0"})`position:relative;width:100%;border-top:${e=>e.paddingTop}px solid ${a.a.N0};border-bottom:${e=>e.paddingBottom}px solid ${a.a.N0};`},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=n.keyframes`0%{background-position:-300px 0;}100%{background-position:2000px 0;}`,r=n.default.div.withConfig({componentId:"wde6c-0"})`background-color:${a.a.N0};background-image:none;`;t.b=n.default.div.withConfig({componentId:"wde6c-1"
})`animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:${i};animation-timing-function:linear;background-color:${a.a.N30};background-image:linear-gradient( to right,${a.a.N30} 10%,${a.a.N20} 30%,${a.a.N30} 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;`},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");t.a=n.default.div.withConfig({componentId:"sc-1ahh4md-0"})`width:100%;display:flex;position:relative;`},"./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");t.a=n.default.div.withConfig({componentId:"vf138n-0"
})`position:relative;height:${e=>e.fontSize}px;border-right:${e=>e.intrusion}px solid ${a.a.N0};border-top:${e=>(e.lineHeight-e.fontSize)/2}px solid ${a.a.N0};border-bottom:${e=>(e.lineHeight-e.fontSize)/2}px solid ${a.a.N0};`},"./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/@atlaskit/activity-provider/dist/es2019/api/ActivityResource.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js");const r=Object(n.createSelector)(i.i,(e=>new a.a("/gateway/api/graphql",e)))},"./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/types/src/application.js"),i=s("./src/packages/platform/utils/types/src/edition.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const c=Object(n.createSelector)(o.F,(e=>e?Object(a.f)(e):null)),l=Object(n.createSelector)([r.c,c],((e,t)=>t?Object(i.f)(t,e):null))},"./src/packages/issue/issue-view/src/common/state/selectors/comments-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/memoize.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=i()(((e,t,s)=>({objectId:e,containerId:t,childObjectId:s})),((...e)=>e.join("_"))),u=Object(n.createSelector)(r.w,o.C,((e,{commentId:t})=>t||"NEW_OPTIMISTIC_COMMENT"),((e,t,s)=>d(e,t,s))),p=i()(((e,t,s)=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({objectId:String(e),containerId:String(t)},"string"==typeof s&&{childObjectId:s})),((e,t,s)=>`${String(e)}-${String(t)}-${String(s)}`)),m=(e,t)=>{
const{objectId:s,containerId:n,childObjectId:a}=u(e,{commentId:t});return p(s,n,a)}},"./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return u})),s.d(t,"a",(function(){return p})),s.d(t,"f",(function(){return m})),s.d(t,"z",(function(){return f})),s.d(t,"x",(function(){return b})),s.d(t,"w",(function(){return g})),s.d(t,"B",(function(){return h})),s.d(t,"b",(function(){return y})),s.d(t,"i",(function(){return O})),s.d(t,"y",(function(){return j})),s.d(t,"v",(function(){return v})),s.d(t,"A",(function(){return w})),s.d(t,"D",(function(){return k})),s.d(t,"j",(function(){return C})),s.d(t,"p",(function(){return I})),s.d(t,"e",(function(){return _})),s.d(t,"r",(function(){return P})),s.d(t,"n",(function(){return x})),s.d(t,"o",(function(){return D})),s.d(t,"t",(function(){return A})),s.d(t,"q",(function(){return M})),s.d(t,"C",(function(){return L})),s.d(t,"l",(function(){return R})),s.d(t,"h",(function(){
return N})),s.d(t,"g",(function(){return F})),s.d(t,"F",(function(){return U})),s.d(t,"d",(function(){return K})),s.d(t,"s",(function(){return $})),s.d(t,"E",(function(){return W})),s.d(t,"H",(function(){return B})),s.d(t,"c",(function(){return H})),s.d(t,"u",(function(){return G})),s.d(t,"m",(function(){return Y})),s.d(t,"G",(function(){return J}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),i=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js"),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/platform/utils/types/src/license-state.js"),l=s("./src/packages/issue/issue-view/src/configurations.js"),d=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js")
;const u=e=>e.context,p=Object(n.createSelector)(u,(e=>e.atlassianAccountId)),m=Object(n.createSelector)(u,(e=>e.baseUrl)),f=Object(n.createSelector)(u,(e=>e.loginRedirectUrl)),b=Object(n.createSelector)(u,(e=>Object(o.m)(e.issueKey))),g=Object(n.createSelector)(u,(e=>e.issueId)),h=Object(n.createSelector)(b,(e=>Object(d.a)(e))),y=Object(n.createSelector)(u,(e=>void 0!==e.analyticsSource?new a.a(e.analyticsSource):void 0)),O=Object(n.createSelector)(u,(e=>e.cloudId||Object(o.d)(""))),j=(Object(n.createSelector)(u,(e=>e.isAnonymous)),
Object(n.createSelector)(u,(e=>e.locale))),v=Object(n.createSelector)(u,(e=>e.issueActions||[])),E=Object(n.createSelector)(u,(e=>e.contextItemCategories)),w=Object(n.createSelector)(E,(e=>e.primary)),k=Object(n.createSelector)(E,(e=>e.secondary)),C=Object(n.createSelector)(u,(e=>e.contentItemCategories.visible||[])),S=Object(n.createSelector)(w,k,((e,t)=>e.concat(t))),I=Object(n.createSelector)(C,((e,t)=>t),((e,t)=>e.map((e=>e.id)).includes(t))),T=Object(n.createSelector)(S,((e,t)=>t),((e,t)=>e.includes(t))),_=(Object(n.createSelector)(I,T,((e,t)=>e?"content":t?"context":"foundation")),Object(n.createSelector)(u,(e=>e.applicationKey))),P=Object(n.createSelector)(y,(e=>!!e&&e.value===i.a.MOBILE_ISSUE)),x=Object(n.createSelector)(_,(e=>e===Object(l.l)().applicationKey||e===Object(l.o)().applicationKey)),D=(Object(n.createSelector)(_,(e=>e===Object(l.m)().applicationKey)),
Object(n.createSelector)(y,(e=>!!e&&e.value===i.a.BITBUCKET_ISSUE))),A=Object(n.createSelector)(_,(e=>e===Object(l.k)().applicationKey)),M=Object(n.createSelector)(u,(e=>!!e.ecosystemEnabled)),L=Object(n.createSelector)(u,(e=>e.rapidViewId)),R=Object(n.createSelector)(u,(e=>e.estimationStatistic||null)),N=Object(n.createSelector)(u,(e=>e.boardType)),F=Object(n.createSelector)(u,(e=>e.boardId)),U=Object(n.createSelector)(u,(e=>e.siteAdminStatus)),V=(Object(n.createSelector)(u,(e=>e.productCrossSellConfig)),
Object(n.createSelector)(u,(e=>e.licensedProducts))),K=Object(n.createSelector)(u,(e=>e.appPermissions)),$=Object(n.createSelector)(u,(e=>e.isModal)),W=Object(n.createSelector)($,P,((e,t)=>!e&&!t)),B=Object(n.createSelector)(u,(e=>e.viewMode)),H=Object(n.createSelector)(u,(e=>e.appEditions)),G=Object(n.createSelector)(V,(e=>e&&!0===e["is.origo.jira.tempo-plugin"])),q=Object(n.createSelector)(u,(e=>e.licenseStates)),z=Object(n.createSelector)(q,(e=>e&&e.software===c.a)),Y=Object(n.createSelector)(V,z,((e,t)=>e[r.a.JIRA_SOFTWARE]&&t)),Q=Object(n.createSelector)(q,(e=>e&&e.serviceDesk===c.a)),J=Object(n.createSelector)(V,Q,((e,t)=>e&&e[r.a.JIRA_SERVICEDESK]&&t))},"./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js":function(e,t,s){"use strict";s.d(t,"s",(function(){return g})),s.d(t,"u",(function(){return y})),s.d(t,"e",(function(){return O})),s.d(t,"b",(function(){return j})),s.d(t,"q",(function(){return v})),s.d(t,"x",(function(){return E})),
s.d(t,"z",(function(){return w})),s.d(t,"y",(function(){return k})),s.d(t,"w",(function(){return C})),s.d(t,"a",(function(){return S})),s.d(t,"B",(function(){return I})),s.d(t,"p",(function(){return T})),s.d(t,"C",(function(){return _})),s.d(t,"m",(function(){return P})),s.d(t,"l",(function(){return x})),s.d(t,"d",(function(){return D})),s.d(t,"c",(function(){return A})),s.d(t,"E",(function(){return M})),s.d(t,"r",(function(){return L})),s.d(t,"o",(function(){return R})),s.d(t,"n",(function(){return N})),s.d(t,"h",(function(){return F})),s.d(t,"g",(function(){return U})),s.d(t,"i",(function(){return V})),s.d(t,"A",(function(){return K})),s.d(t,"D",(function(){return $})),s.d(t,"f",(function(){return W})),s.d(t,"F",(function(){return B})),s.d(t,"j",(function(){return H})),s.d(t,"k",(function(){return G})),s.d(t,"I",(function(){return z})),s.d(t,"J",(function(){return Y})),s.d(t,"H",(function(){return Q})),s.d(t,"G",(function(){return J})),s.d(t,"t",(function(){return X})),
s.d(t,"v",(function(){return ee}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/find.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),c=s("./src/packages/issue/issue-view/src/configurations.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){b(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function b(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const g=e=>e.fields||{},h=(e,t)=>i()(t,(t=>(t.schema&&t.schema.custom)===e)),y=(e,t)=>{let s=t[e];const n=Object(c.n)();if(!s&&Object.keys(n).includes(e)){const a=n[e];s=h(a,t)}return s},O=e=>Object(n.createSelector)(g,(t=>h(e,t))),j=e=>Object(n.createSelector)(O(e),(e=>{const t=e?e.key.match(/customfield_(\d+)$/i):null;return t?+t[1]:null
})),v=e=>Object(n.createSelector)(g,(t=>y(e,t))),E=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes(o.l))),w=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes("subtasks"))),k=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes("portfolio-child-issues"))),C=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes("children-issues"))),S=(Object(n.createSelector)(g,(e=>Object.keys(e).map((t=>y(t,e))).filter(Boolean))),Object(n.createSelector)(g,(e=>Object.keys(e)))),I=e=>!!e&&e.editable,T=e=>Object(n.createSelector)(v(e),(e=>e&&e.schema&&e.schema.configuration&&e.schema.configuration.reduce(((e,{key:t,value:s})=>f(f({},e),{},{[t]:s})),{}))),_=e=>Object(n.createSelector)(v(e),(e=>I(e))),P=e=>Object(n.createSelector)(v(e),(t=>t&&t.title?t.title:(r.h.safeWarnWithoutCustomerData("issue.field.selector",`${e} does not have a field title`),
""))),x=e=>Object(n.createSelector)(v(e),(e=>e&&e.key)),D=e=>Object(n.createSelector)(v(e),(e=>e&&e.autoCompleteUrl)),A=e=>Object(n.createSelector)(v(e),(e=>e?e.allowedValues:[])),M=e=>Object(n.createSelector)(v(e),(e=>!!e&&e.required)),L=e=>Object(n.createSelector)(v(e),(e=>e&&Object(u.a)(e))),R=e=>Object(n.createSelector)(v(e),(e=>e&&e.value)),N=e=>Object(n.createSelector)(v(e),(e=>e&&Object(p.a)(e))),F=e=>Object(n.createSelector)(v(e),(e=>e&&Object(d.a)(e))),U=e=>Object(n.createSelector)(v(e),(e=>e&&Object(d.b)(e))),V=e=>Object(n.createSelector)(v(e),(e=>e&&e.renderedValue)),K=e=>!!e&&void 0!==e.editingValue,$=e=>Object(n.createSelector)(v(e),(e=>K(e))),W=e=>Object(n.createSelector)(v(e),(e=>(e?e.fieldEditSessionId:null)||"")),B=e=>Object(n.createSelector)(v(e),(e=>!!e&&void 0!==e.pendingValue)),H=(e,t)=>Object(n.createSelector)(v(e),(e=>e&&(e.isInvalid?e.invalidMessage||t:null))),G=e=>Object(n.createSelector)(v(e),(e=>Boolean(e&&e.isInvalid))),q=e=>"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===e||"environment"===e||"description"===e,z=e=>Object(n.createSelector)((t=>Object(l.p)(t,e)),l.t,L(e),(e=>Object(n.createSelector)(v(e),(e=>e&&e.schema&&e.schema.renderer)))(e),((t,s,n,a)=>{
const i="description"===e,r=q(n)&&"atlassian-wiki-renderer"===a;return i||r})),Y=Object(n.createSelector)(g,(e=>e),((e,t)=>Object.keys(e).filter((e=>z(e)(t))))),Q=Object(n.createSelector)(Y,(e=>e),((e,t)=>e.some((e=>$(e)(t))))),J=e=>Object(n.createSelector)(L(e),(e=>q(e))),Z=Object(n.createSelector)(g,(e=>e),((e,t)=>Object.keys(e).filter((e=>J(e)(t))))),X=Object(n.createSelector)(Z,(e=>e),((e,t)=>e.filter((e=>$(e)(t))))),ee=Object(n.createSelector)(v("fixVersions"),v("versions"),((e,t)=>{const s=[];return e&&s.push(e.key),t&&s.push(t.key),s}))},"./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");t.a=e=>void 0!==e.editingValue?e.editingValue:Object(n.a)(e);const a=e=>e.editingValue||Object(n.b)(e)},"./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js":function(e,t,s){"use strict"
;s.d(t,"a",(function(){return i}));var n=s("./src/packages/issue/issue-view/src/configurations.js");const a=e=>(()=>{const e=Object(n.n)();return[...Object(n.e)().filter((e=>!n.f.includes(e))),...Object.keys(e).map((t=>e[t])),"com.atlassian.jira.plugin.system.customfieldtypes:flagged"]})().find((t=>t===e)),i=e=>{const t=e?e.schema:void 0;return t?a(t.custom)||t.system||t.type:void 0}},"./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),t.a=e=>void 0!==e.pendingValue?e.pendingValue:e.value;const n=e=>e.pendingValue||e.adfValue||e.value},"./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return c})),s.d(t,"E",(function(){return l})),s.d(t,"H",(function(){return d})),s.d(t,"d",(function(){return u})),s.d(t,"e",(function(){return p})),s.d(t,"j",(function(){return m})),s.d(t,"C",(function(){return f})),
s.d(t,"D",(function(){return b})),s.d(t,"F",(function(){return g})),s.d(t,"u",(function(){return h})),s.d(t,"y",(function(){return y})),s.d(t,"x",(function(){return O})),s.d(t,"A",(function(){return j})),s.d(t,"z",(function(){return v})),s.d(t,"l",(function(){return E})),s.d(t,"m",(function(){return w})),s.d(t,"r",(function(){return k})),s.d(t,"s",(function(){return C})),s.d(t,"n",(function(){return S})),s.d(t,"w",(function(){return I})),s.d(t,"o",(function(){return T})),s.d(t,"p",(function(){return _})),s.d(t,"c",(function(){return P})),s.d(t,"i",(function(){return x})),s.d(t,"h",(function(){return D})),s.d(t,"k",(function(){return A})),s.d(t,"B",(function(){return M})),s.d(t,"G",(function(){return L})),s.d(t,"b",(function(){return R})),s.d(t,"a",(function(){return N})),s.d(t,"v",(function(){return F})),s.d(t,"g",(function(){return U})),s.d(t,"q",(function(){return V})),s.d(t,"t",(function(){return K}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/project-types.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const c=e=>e.entities,l=Object(n.createSelector)(c,(e=>e?e.project:null)),d=e=>e.ui,u=Object(n.createSelector)(c,(e=>e.issue)),p=Object(n.createSelector)(c,(e=>e.refreshedOn)),m=Object(n.createSelector)(d,(e=>e.flags)),f=Object(n.createSelector)(l,(e=>e&&e.projectId?e.projectId:null)),b=Object(n.createSelector)(l,(e=>e?e.projectKey:null)),g=Object(n.createSelector)(l,(e=>e&&e.projectType?e.projectType:null)),h=Object(n.createSelector)(l,(e=>!!e&&e.isSimplified)),y=Object(n.createSelector)(c,r.a,((e,t)=>t?e.users[t]:null)),O=Object(n.createSelector)(c,r.a,((e,t)=>{const s=t?e.users[t]:null;return s?s.avatarUrl:null
})),j=Object(n.createSelector)(c,(e=>e.parentIssue)),v=Object(n.createSelector)(y,(e=>e?e.timeZone:void 0)),E=Object(n.createSelector)(u,(e=>e&&Object(i.k)(e.id))),w=Object(n.createSelector)(h,(e=>!e)),k=Object(n.createSelector)(d,(e=>"LOADING"===e.loadingStage)),C=Object(n.createSelector)(d,(e=>"PREVIEW"===e.loadingStage)),S=Object(n.createSelector)(d,(e=>"COMPLETE"===e.loadingStage)),I=Object(n.createSelector)(d,(e=>e.loadingStage)),T=Object(n.createSelector)(d,(e=>!(!e.issueDeletion||!e.issueDeletion.isDeleteIssueModalOpen))),_=Object(n.createSelector)(d,(e=>!!e.issueDeletion&&e.issueDeletion.isDeletingIssue)),P=Object(n.createSelector)(d,(e=>!!e.issueDeletion&&e.issueDeletion.didIssueDeleteFail)),x=Object(n.createSelector)(d,(e=>e.error)),D=Object(n.createSelector)(d,(e=>e.errorMessage)),A=Object(n.createSelector)(c,(e=>t=>t?e.users[t]:void 0)),M=Object(n.createSelector)(c,(e=>e.parentLevelIssues)),L=()=>"jira",R=Object(n.createSelector)(g,a.i),N=Object(n.createSelector)(L,r.i,((e,t)=>t?`ari:cloud:${e}:${t}`:null)),F=Object(n.createSelector)(N,E,((e,t)=>e&&t?`${e}:issue/${t}`:null)),U=Object(n.createSelector)((e=>e.agile),(e=>e&&e.epic&&e.epic.key||null)),V=Object(n.createSelector)(o.s,(e=>(e=>({}.hasOwnProperty.call(e,"epic-issues")))(e))),K=Object(n.createSelector)(g,(e=>"service_desk"===e))
},"./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js");const a=e=>e.mediaContext,i=Object(n.createSelector)(a,(e=>e&&e.userAuth||null)),r=Object(n.createSelector)(a,(e=>e&&e.viewContext||null)),o=Object(n.createSelector)(a,(e=>e&&e.uploadContext||null))},"./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"h",(function(){return p})),s.d(t,"d",(function(){return m})),s.d(t,"c",(function(){return f})),s.d(t,"b",(function(){return b})),s.d(t,"e",(function(){return y})),s.d(t,"i",(function(){return O})),s.d(t,"g",(function(){return j})),s.d(t,"f",(function(){return v}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/mapValues.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/feature-flags.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const l=Object(n.createSelector)(c.f,(e=>e.applicationRoles)),d=Object(n.createSelector)(c.f,(e=>e.permissions)),u=new Set(["canUseServiceDeskAgentFeatures","canEditIssues","canTransitionIssues","canScheduleIssues","canMoveIssue","canAssignIssues","canBeAssignedToIssues","canDeleteIssue","canManageWatchers","canEditAllComments","canDeleteAllComments","canDeleteAllAttachments","canLogWork","canEditOwnWorklogs","canEditAllWorklogs","canDeleteOwnWorklogs","canDeleteAllWorklogs","canResolveIssues","canViewReadonlyWorkflow","canCloseIssues","canModifyReporter","canSetIssueSecurity"]),p=Object(n.createSelector)(l,o.d,c.F,d,o.G,((e,t,s,n,a)=>"service_desk"===s&&a?Object(r.isUseAppPermissionsFromTenantContextEnabled)()?((e,t)=>{const{canUseServiceDeskAgentFeatures:s}=t;return i()(t,((t,n)=>u.has(n)?t&&e&&s:t))})(t.hasServiceDeskAccess,n):((e,t)=>{const s=e&&e.includes("jira-servicedesk"),{canUseServiceDeskAgentFeatures:n}=t;return i()(t,((e,t)=>u.has(t)?e&&s&&n:e))
})(e||[],n):n)),m=Object(n.createSelector)(p,(e=>!!e.canBeAssignedToIssues)),f=Object(n.createSelector)(p,(e=>!!e.canAdministerProject)),b=Object(n.createSelector)(p,(e=>!!e.canAdministerJira)),g=Object(n.createSelector)(p,(e=>e.canViewWatchers)),h=Object(n.createSelector)(p,(e=>e.canManageWatchers)),y=Object(n.createSelector)(p,(e=>e.canModifyReporter)),O=Object(n.createSelector)(g,h,((e,t)=>({canViewWatchers:e,canManageWatchers:t}))),j=(Object(n.createSelector)(p,(e=>e.canBrowseUsers)),Object(n.createSelector)(p,(e=>e.canViewDevTools))),v=Object(n.createSelector)(p,(e=>e.canUseServiceDeskAgentFeatures))},"./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const o=e=>Object(n.createSelector)(i.a,(t=>t&&e?`${t}:comment/${e}`:null)),c=Object(n.createSelector)(r.h,a.i,((e,t)=>!(!e.canAddComments||!t)))},"./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return f})),s.d(t,"i",(function(){return b})),s.d(t,"c",(function(){return h})),s.d(t,"b",(function(){return y})),s.d(t,"l",(function(){return v})),s.d(t,"f",(function(){return I})),s.d(t,"j",(function(){return T})),s.d(t,"e",(function(){return _})),s.d(t,"d",(function(){return P})),s.d(t,"m",(function(){return A})),s.d(t,"a",(function(){return M})),s.d(t,"g",(function(){return R})),
s.d(t,"k",(function(){return N})),s.d(t,"n",(function(){return F}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isNumber.js"),i=s.n(a),r=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),o=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),c=s("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js"),l=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js")
;const f=Object(n.createSelector)(p.f,(e=>e.jiraSettings.timeTrackingConfiguration)),b=Object(u.o)("timetracking"),g=Object(n.createSelector)(f,(e=>e.isTimeTrackingEnabled)),h=Object(n.createSelector)(g,u.a,((e,t)=>e&&t.includes("timetracking"))),y=Object(n.createSelector)(h,m.h,d.r,((e,t,s)=>e&&t.canLogWork&&!s)),O=Object(n.createSelector)(p.H,(e=>e.worklog)),j=Object(n.createSelector)(O,(e=>e.modal)),v=Object(n.createSelector)(O,(e=>e.loadingStage)),E=Object(n.createSelector)(Object(u.o)("subtasks"),Object(u.o)("children-issues"),o.b,((e,t,s)=>null!=t&&t.length&&Object(r.b)(s)?t:e)),w=Object(n.createSelector)(c.a,l.b,o.b,((e,t,s)=>t||Boolean(null==e?void 0:e.length)&&Object(r.b)(s))),k=(e,t)=>i()(e)||i()(t)?(e||0)+(t||0):e,C=(e,t)=>{var s;return Array.isArray(e)?null===(s=e.find((e=>e.key===t)))||void 0===s?void 0:s.value:e&&e[t]},S=Object(n.createSelector)(E,p.m,((e,t)=>{if(t)return!0;if(!e||0===e.length)return!1;return e.map((e=>C(e.fields,"timetracking"))).filter(Boolean).length>0
})),I=Object(n.createSelector)(w,S,((e,t)=>e&&t)),T=Object(n.createSelector)(b,E,((e,t)=>s=>t&&0!==t.length&&s?t.map((e=>C(e.fields,"timetracking"))).filter(Boolean).reduce(((e,t)=>({originalEstimateSeconds:k(e.originalEstimateSeconds,t.originalEstimateSeconds),timeSpentSeconds:k(e.timeSpentSeconds,t.timeSpentSeconds),remainingEstimateSeconds:k(e.remainingEstimateSeconds,t.remainingEstimateSeconds)})),e):e)),_=Object(n.createSelector)(j,(e=>e.openModal)),P=Object(n.createSelector)(j,(e=>e.isSaving)),x=Object(n.createSelector)(j,(e=>e.activeWorklogId)),D=Object(n.createSelector)(p.f,(e=>e.worklog)),A=Object(n.createSelector)(D,(e=>e.worklogs)),M=Object(n.createSelector)(x,A,((e,t)=>e&&t[e]||null)),L=Object(n.createSelector)(D,(e=>e.sortedWorklogIds)),R=Object(n.createSelector)(A,L,((e,t)=>t.map((t=>e[t])))),N=Object(n.createSelector)(D,(e=>e.totalWorklogs)),F=Object(n.createSelector)(D,(e=>e.worklogsStartIndex||0))},
"./src/packages/issue/issue-view/src/common/styles/issue-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"d",(function(){return d})),s.d(t,"c",(function(){return u}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=n.default.span.withConfig({componentId:"sc-12mk0-0"})`color:${a.a.N300};`,r=n.css`white-space:nowrap;overflow:hidden;text-overflow:ellipsis;`,o=n.default.div.withConfig({componentId:"sc-12mk0-1"
})`${r};`,c=e=>n.css`${e}::-webkit-scrollbar{width:8px;background:transparent;}${e}::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px;}`,l=n.css`font-size:1em;line-height:1.714;font-weight:normal;margin-top:1.143;margin-bottom:0;letter-spacing:-0.005em;overflow-y:auto;overflow-x:hidden;width:100%;height:auto;white-space:pre-line;`,d=n.default.div.withConfig({componentId:"sc-12mk0-2"})`${l};`,u=n.default.div.withConfig({componentId:"sc-12mk0-3"})`${l};max-height:${e=>2.5*(e.maxRows?e.maxRows:2)}ex;${c("&")};`},"./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>{if(!e)return;const t=getComputedStyle(e),s=(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0);return e.clientHeight-s}},"./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t=!0)=>{
if(!e||!e.parentElement)return null;let s=getComputedStyle(e);const n=t&&"absolute"===s.position,a=/(auto|scroll)/;if("fixed"===s.position)return document.body;for(let i=e.parentElement;i;i=i&&i.parentElement){s=getComputedStyle(i);if(!(n&&"static"===s.position)&&a.test(s.overflow+s.overflowY+s.overflowX))return i}return null}},"./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.s)(e.split("-")[0])},"./src/packages/issue/issue-view/src/common/util/errors/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),i=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const r=(e,t,s,r)=>{
s instanceof TypeError&&Object(i.c)(s)?((e,t,s)=>{Object(a.a)({error:s,attributes:{message:t},meta:{id:e,packageName:"jiraIssueView"}})})(e,t,s):r&&n.h.safeErrorWithoutCustomerData(e,t,r)}},"./src/packages/issue/issue-view/src/common/util/events/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"a",(function(){return c}));const n=e=>e&&e instanceof KeyboardEvent&&27===e.keyCode,a=e=>13===e.keyCode,i=e=>0===e.button,r=e=>i(e)&&!(e.metaKey||e.ctrlKey),o=e=>1===e.button,c=e=>i(e)&&(e.metaKey||e.ctrlKey)},"./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/flow.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js");t.a=(e=[],t)=>s=>a()(...e,Object(i.a)({FallbackComponent:t}))(s)},
"./src/packages/issue/issue-view/src/common/util/get-element/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=()=>document.querySelector(".issue-app-modal-ak-dropdown-portal"),a=()=>document.querySelector(".issue-app-modal-editor-dropdown-portal")},"./src/packages/issue/issue-view/src/common/util/safe-component/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return y}));var a=n("./node_modules/react/index.js"),i=n.n(a),r=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),l=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/node-env.js"),d=n("./src/packages/platform/ui/error-boundary/src/main.js"),u=n("./src/packages/issue/issue-view/src/feature-flags.js");const p="issue.error-boundary.";class m{
constructor(t){this.logLocation=void 0,this.handleError=(e,t)=>o.h.safeErrorWithoutCustomerData(this.logLocation,"An uncaught error has occurred in a React component",new r.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{message:e.message,stack:e.stack,componentStack:t}})),this.callSafely=(t,s,...n)=>{try{return s&&s.apply(t,n)}catch(e){this.handleError(e)}return null},this.logLocation=`${p}${t}`}}const f=e=>!!e.prototype&&e.prototype.isReactComponent,b=(e,t)=>{const s=e,n=Object.getOwnPropertyDescriptor(s,"prototype");return Boolean(n&&n.value&&n.value[t])},g=["componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","componentDidUpdate"],h=(e,t,s)=>{const n=s||(e=>e.displayName||e.name||"UnsafeComponent")(e),r=new m(s?`Fallback(${n})`:n),y=()=>s?"Fallback":t?"SafeWithFallback":"Safe";!Object(u.isErrorBoundaryAddedToIssueViewSafeComponentEnabled)()&&t&&((e,t)=>{const s=f(e)?e:e().type;if(!s)return;const n=[];if(g.forEach((e=>{
b(s,e)&&n.push(e)})),n.length){const e="\t\t",s=`The fallback component provided for '${t}' defines the following unsupported lifecycles methods:\n${e}${n.join(`\n${e}`)}`;Object(l.a)()?console.warn(s):o.h.safeWarnWithoutCustomerData(`${p}${t}`,s)}})(t,n);let O=e;if(f(e)&&b(e,"componentWillUnmount")){class t extends e{componentWillUnmount(){r.callSafely(this,super.componentWillUnmount)}}t.displayName=n,O=t}const j={hadError:!1,isInternalRender:!1};class v extends a.Component{constructor(...e){super(...e),this.state=j}componentDidCatch(e,t){r.handleError(e,t.componentStack),this.setState({hadError:!0,isInternalRender:!0})}render(){if(this.state.hadError){if(!t)return null;const e=h(t,null,n);return i.a.createElement(e,this.props)}return i.a.createElement(O,this.props)}}v.displayName="SafeComponent",v.displayName=`${y()}(${n})`,v.getDerivedStateFromProps=(e,t)=>t.hadError&&!t.isInternalRender?j:{isInternalRender:!1};const E=s=>{let a=Object.assign({},s);return i.a.createElement(d.a,{
prefixOverride:"issue",id:`${y()}(${n})`,render:()=>{if(!t)return null;const e=h(t,null,n);return i.a.createElement(e,a)}},i.a.createElement(e,a))};E.displayName=`${y()}(${n})`;const w=Object(c.a)(u.isErrorBoundaryAddedToIssueViewSafeComponentEnabled,E,v);return w.displayName=`${y()}(${n})`,w},y=(e={})=>t=>h(t,e.FallbackComponent)},"./src/packages/issue/issue-view/src/common/util/scroll/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/scroll-into-view-if-needed/es/index.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const r=(e,t=Object.freeze({}))=>{e&&Object(n.a)(e,function(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:300},t))},o=e=>{e&&r(e,{centerIfNeeded:!0})}},"./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/isFinite.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js");t.a=e=>{const t=Object(i.a)(1,1)(e);return null!==t&&a()(t)}},"./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js":function(e,t,s){"use strict";t.a=(e,t)=>{const s=[{suffix:"w",seconds:e*t*60*60},{suffix:"d",seconds:60*t*60},{suffix:"h",seconds:3600},{suffix:"m",seconds:60}];return e=>{
const t={secondsRemaining:e,timeString:""};return s.reduce(((e,t)=>{if(t.seconds<=0)return e;const s=Math.floor(e.secondsRemaining/t.seconds);return{secondsRemaining:s>=1?e.secondsRemaining%t.seconds:e.secondsRemaining,timeString:s>=1?`${e.timeString} ${s}${t.suffix}`:e.timeString}}),t).timeString.trim()||"0m"}}},"./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js":function(e,t,s){"use strict";const n=/^(\d+(?:\.\d+)?)([wdhm])$/,a=e=>{const t=n.exec(e);return t?{quantity:parseFloat(t[1]),unit:t[2]}:null};t.a=(e,t)=>{const s=[{unit:"w",seconds:e*t*60*60},{unit:"d",seconds:60*t*60},{unit:"h",seconds:3600},{unit:"m",seconds:60}];return e=>{const t=e.split(" ").map(a);let n=0,i=0;for(let a=0;a<s.length&&n!==t.length;a+=1){const e=s[a],r=t[n];if(!r)return null;r.unit===e.unit&&(i+=r.quantity*e.seconds,n+=1)}return n<t.length?null:Math.floor(i)}}},"./src/packages/issue/issue-view/src/common/util/types/type-check/index.js":function(e,t,s){"use strict"
;s.d(t,"a",(function(){return n}));const n=e=>e.length>0&&!Number.isNaN(Number(e))},"./src/packages/issue/issue-view/src/configurations.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"n",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"e",(function(){return l})),s.d(t,"i",(function(){return d})),s.d(t,"g",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"m",(function(){return m})),s.d(t,"l",(function(){return f})),s.d(t,"o",(function(){return b})),s.d(t,"b",(function(){return g})),s.d(t,"j",(function(){return h})),s.d(t,"k",(function(){return y})),s.d(t,"c",(function(){return O})),s.d(t,"h",(function(){return j}));var n=s("./src/packages/platform/utils/constants/src/application-keys.js");const a="com.atlassian.jpo:jpo-custom-field-parent",i="flagActions",r=()=>({epic:"com.pyxis.greenhopper.jira:gh-epic-link",sprint:"com.pyxis.greenhopper.jira:gh-sprint",
storyPointsField:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint","com.atlassian.teams:rm-teams-custom-field-team":"com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent":"com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start":"com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end":"com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color":"com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:gh-epic-color":"com.pyxis.greenhopper.jira:gh-epic-color","com.pyxis.greenhopper.jira:gh-epic-label":"com.pyxis.greenhopper.jira:gh-epic-label"
}),o=["number","string","datetime","option2","array"],c=["com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.servicedesk:sd-request-feedback","com.atlassian.servicedesk.approvals-plugin:sd-approvals","com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list","com.atlassian.servicedesk:vp-origin","com.atlassian.jira.plugins.cmdb:cmdb-object-cftype","com.atlassian.jira.modules.servicemanagement.responders-entity:responders-entity-field-cftype"],l=()=>["com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.toolkit:participants","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:project","com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team","com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield","com.pyxis.greenhopper.jira:gh-epic-status","com.atlassian.jira.toolkit:viewmessage","com.atlassian.jira.toolkit:message",...o,...c],d={
software:"https://confluence.atlassian.com/jirasoftwarecloud/configure-field-layout-in-the-issue-view-961798059.html",business:"https://confluence.atlassian.com/jiracorecloud/configure-field-layout-in-the-issue-view-961798123.html",service_desk:"https://support.atlassian.com/jira-service-desk-cloud/docs/what-are-the-different-sections-in-the-issue-view/"},u=()=>({issueActions:[]}),p=()=>({applicationKey:n.a.CORE_ISSUE,issueActions:[],ecosystemEnabled:!0}),m=()=>({applicationKey:n.a.SOFTWARE_ISSUE,issueActions:[i],ecosystemEnabled:!0}),f=()=>({applicationKey:n.a.SIMPLE_SOFTWARE_BOARD,issueActions:[i,"cardCoverActions"],ecosystemEnabled:!0}),b=()=>({applicationKey:n.a.STANDARD_ROADMAP_ISSUE,issueActions:[i],ecosystemEnabled:!0}),g=()=>({applicationKey:n.a.BITBUCKET_ISSUE,issueActions:[]}),h=()=>({applicationKey:n.a.MOBILE_ISSUE,issueActions:[]}),y=()=>({applicationKey:n.a.SERVICE_DESK,issueActions:[],ecosystemEnabled:!0}),O=()=>({applicationKey:n.a.CONNECT_ISSUE,issueActions:[],
ecosystemEnabled:!0}),j=e=>{if(e)switch(e.projectType){case"software":return e.isSimplified?f():m();case"business":return p();case"service_desk":return y();default:return m()}return m()}},"./src/packages/issue/issue-view/src/drafts/draft-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"g",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return u}));const n=(e,t,s)=>({type:"SAVE_DRAFT_REQUEST",payload:{fieldId:e,value:t,serverValue:s}}),a=(e,t)=>({type:"SAVE_DRAFT_SUCCESS",payload:{draftKey:e,value:t}}),i=e=>({type:"SAVE_DRAFT_FAILURE",payload:e}),r=(e,t,s,n)=>({type:"LOAD_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t,draftHandler:s,serverValue:n}}),o=(e,t)=>({type:"LOAD_DRAFT_SUCCESS",payload:{fieldId:e,value:t}}),c=(e,t)=>({type:"LOAD_DRAFT_FAILURE",
payload:{fieldId:e,error:t}}),l=({fieldId:e,draftKey:t})=>({type:"DELETE_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t}}),d=e=>({type:"DELETE_DRAFT_SUCCESS",payload:{fieldId:e}}),u=(e,t)=>({type:"DELETE_DRAFT_FAILURE",payload:{fieldId:e,error:t}})},"./src/packages/issue/issue-view/src/drafts/draft-utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=(e,t,s)=>`${String(e)}.${t}.${s}`,a=e=>e.split(".")[2],i=e=>`${e}-previous-hash`,r=e=>`comment_${e}`},"./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return h})),s.d(t,"p",(function(){return y})),s.d(t,"n",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"o",(function(){return v})),s.d(t,"m",(function(){return I})),s.d(t,"i",(function(){return T})),s.d(t,"l",(function(){return _})),s.d(t,"b",(function(){return P})),
s.d(t,"g",(function(){return x})),s.d(t,"k",(function(){return D})),s.d(t,"f",(function(){return M})),s.d(t,"d",(function(){return L})),s.d(t,"r",(function(){return R})),s.d(t,"q",(function(){return N})),s.d(t,"j",(function(){return F})),s.d(t,"a",(function(){return U})),s.d(t,"e",(function(){return V}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/flatten.js"),i=s.n(a),r=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),o=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),c=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),p=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js"),m=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function b(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const h=Object(n.createSelector)(p.a,(e=>e.backgroundScripts||[])),y=Object(n.createSelector)(d.f,(e=>e.issueContentPanels||[])),O=Object(n.createSelector)(d.f,(e=>!!e.issueContentPanels&&e.issueContentPanels.includes("issue.content.panel.customised.flag"))),j=Object(n.createSelector)(u.b,(e=>e)),v=Object(n.createSelector)(d.f,(e=>e.ecosystem&&!!e.ecosystem.ecosystemOnDate&&Date.parse(e.createdDate)>e.ecosystem.ecosystemOnDate)),E=e=>Object.keys(e||{}).map((t=>Object.values(e?e[t]:{}))),w=Object(n.createSelector)(p.a,(e=>[].concat(...E(e.glances)))),k=Object(n.createSelector)(p.a,(e=>[].concat(...E(e.contentPanels)))),C=Object(n.createSelector)(p.a,(e=>[].concat(...E(e.activityPanels)))),S=e=>Object(n.createSelector)(l.q,e,((e,t)=>e&&t||[])),I=S(Object(n.createSelector)(w,(e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,icon:e.icon&&e.icon.url&&{url:e.icon.url},label:e.label,status:e.status,type:e.type,glanceType:"CONNECT_ENTITY_TYPE"
})))))),T=Object(n.createSelector)([m.c,I],((e,t)=>[...e,...t])),_=(e,t)=>Object(n.createSelector)(p.a,(s=>s&&s.glances&&s.glances[e]&&s.glances[e][t])),P=S(Object(n.createSelector)(k,(e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,tooltip:e.tooltip,iconUrl:e.icon&&e.icon.url,type:e.type,showByDefault:e.showByDefault})))))),x=Object(n.createSelector)([m.j,P],((e,t)=>[...e,...t])),D=Object(n.createSelector)([m.j,P],((e,t)=>[...e,...t])),A=(e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.name.toLowerCase();if("FORGE_ENTITY_TYPE"===t.type){const e=t.name.toLowerCase();return s<e?-1/0:s>e?1/0:0}return 1/0}return 1/0},M=S(Object(n.createSelector)(y,x,O,v,l.b,((e,t,s,n,a)=>{const l=t.map((t=>{if("FORGE_ENTITY_TYPE"===t.type){const s=t;if(!s.iconUrl)return s;const n=`${s.appKey}/${s.moduleKey}-`,i=e.filter((e=>Object(o.b)(e,n))).map((e=>{const t=Object(c.a)(e);return null==t&&Object(r.b)(a,{error:Error(`Panel key doesn't match regexp: ${e}`)}),t&&b(b({},s),{},{
dateAdded:t.added,panelInstanceId:t.id})})).filter(Boolean);return i.length>0&&i}if(!s&&!n)return t;return(e.includes(`${t.appKey}_${t.moduleKey}`)||e.includes(`${t.appKey}_${Object(c.b)(t.moduleKey,10)}`)||t.showByDefault)&&t}));return i()((e=>e.map((e=>[].concat(e))).sort(((e,t)=>((e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.dateAdded||1;return"FORGE_ENTITY_TYPE"===t.type?s-(t.dateAdded||1):s}return 1/0})(e[0],t[0]))))(l.filter(Boolean)))}))),L=(e,t)=>Object(n.createSelector)(p.a,(s=>s&&s.contentPanels&&s.contentPanels[e]&&s.contentPanels[e][t])),R=(e,t)=>Object(n.createSelector)(p.a,(s=>s&&s.selectedContentPanel&&(s.selectedContentPanel===`${e}_${t}`||s.selectedContentPanel===`${e}_${Object(c.b)(t,10)}`))),N=S(Object(n.createSelector)(p.a,(e=>e.operations||[]))),F=S(Object(n.createSelector)([m.e,N],((e,t)=>[...e,...t]))),U=Object(n.createSelector)(l.q,C,((e,t)=>e?t.map((e=>({name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,type:"CONNECT_ENTITY_TYPE"
}))):[])),V=Object(n.createSelector)([m.f,U],((e,t)=>[...e,...t].sort(A)))},"./src/packages/issue/issue-view/src/ecosystem/entities-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");const r=Object(n.createSelector)(a.f,(e=>e.ecosystem||{})),o=Object(n.createSelector)(a.f,(e=>e.forge||i.b))},"./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return E})),s.d(t,"e",(function(){return w})),s.d(t,"j",(function(){return k})),s.d(t,"i",(function(){return C})),s.d(t,"l",(function(){return P})),s.d(t,"a",(function(){return D})),s.d(t,"b",(function(){return M})),s.d(t,"m",(function(){return L})),s.d(t,"n",(function(){return R})),
s.d(t,"g",(function(){return N})),s.d(t,"f",(function(){return F})),s.d(t,"h",(function(){return U})),s.d(t,"k",(function(){return V})),s.d(t,"d",(function(){return K}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isNil.js"),i=s.n(a),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/forge/forge-ui/src/utils/conditions/index.js"),c=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),l=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),f=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),b=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js");function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const O=(e,t)=>e.filter((e=>Object(o.a)(e,t))),j=(e,t)=>e.name===t.name?0:e.name>t.name?1:-1,v=Object(n.createSelector)(m.h,d.w,d.x,f.g,p.C,d.B,p.F,((e,t,s,n,a,i,r)=>({issueId:t||null,issueKey:s,issueType:n,projectId:a,projectKey:i,projectType:r||null,canAddComments:e.canAddComments,canAdministerJira:e.canAdministerJira,canAdministerProjects:e.canAdministerProject,canAssignIssues:e.canAssignIssues,
canBeAssignedToIssues:e.canBeAssignedToIssues,canCloneIssues:e.canCloneIssue,canCreateAttachments:e.canCreateAttachments,canCreateChildren:e.canCreateChildren,canCreateSubtasks:e.canCreateSubtask,canDeleteAllAttachments:e.canDeleteAllAttachments,canDeleteAllComments:e.canDeleteAllComments,canDeleteAllWorklogs:e.canDeleteAllWorklogs,canDeleteIssues:e.canDeleteIssue,canDeleteOwnAttachments:e.canDeleteOwnAttachments,canDeleteOwnComments:e.canDeleteOwnComments,canDeleteOwnWorklogs:e.canDeleteOwnWorklogs,canEditAllComments:e.canEditAllComments,canEditAllWorklogs:e.canEditAllWorklogs,canEditIssues:e.canEditIssues,canEditOwnComments:e.canEditOwnComments,canEditOwnWorklogs:e.canEditOwnWorklogs,canLinkIssues:e.canLinkIssues,canLogWork:e.canLogWork,canManageWatchers:e.canManageWatchers,canModifyReporters:e.canModifyReporter,canMoveIssues:e.canMoveIssue,canScheduleIssues:e.canScheduleIssues,canUseServiceManagementAgentFeatures:e.canUseServiceDeskAgentFeatures,canBrowseUsers:e.canBrowseUsers,
canViewDevTools:e.canViewDevTools,canViewWatchers:e.canViewWatchers}))),E=Object(n.createSelector)(d.q,b.b,v,((e,t,s)=>e&&Array.isArray(t.glances)?O(t.glances,s).map((e=>{const{id:t,properties:{title:s,label:n,status:a}}=e;return{title:s,label:n,status:a,extension:e,glanceType:"FORGE_ENTITY_TYPE",moduleKey:t,appKey:t}})):[])),w=Object(n.createSelector)(d.q,b.b,v,((e,t,s)=>e&&Array.isArray(t.actions)?O(t.actions,s).map((e=>{const{id:t,properties:{title:s}}=e;return{id:t,title:s,extension:e,type:"FORGE_ENTITY_TYPE"}})):[])),k=Object(n.createSelector)(d.q,b.b,v,((e,t,s)=>e&&Array.isArray(t.panels)?O(t.panels,s).filter((e=>null!=e.properties.icon)).map((e=>{const{id:t,properties:{title:s,icon:n,allowMultiple:a}}=e,{appKey:i,moduleKey:r}=Object(c.d)(t);return{name:s,tooltip:s,iconUrl:n,extension:e,allowMultiple:!!a,showByDefault:!1,type:"FORGE_ENTITY_TYPE",moduleKey:r,appKey:i}
})).sort(j):[])),C=e=>Object(n.createSelector)(b.a,(t=>t&&t.selectedContentPanel===e)),S=Object(n.createSelector)(d.q,b.b,v,((e,t,s)=>e&&Array.isArray(t.customFields)?O(t.customFields,s):[])),I=Object(n.createSelector)(d.q,b.b,v,((e,t,s)=>e&&Array.isArray(t.customFieldTypes)?O(t.customFieldTypes,s):[])),T=Object(n.createSelector)(S,(e=>e.length>0)),_=Object(n.createSelector)(I,(e=>e.length>0)),P=Object(n.createSelector)(T,_,((e,t)=>e||t)),x=Object(n.createSelector)(S,I,((e,t)=>[...e,...t])),D=Object(n.createSelector)(d.q,b.b,((e,t)=>e&&t.activeAction||null)),A=e=>Object(n.createSelector)(Object(u.q)(e),(e=>e?e.schema.custom:"")),M=e=>Object(n.createSelector)(x,A(e),((e,t)=>e.find((e=>e.id===t))||null)),L=e=>Object(n.createSelector)(d.q,b.b,A(e),v,((e,t,s,n)=>{if(!e||!Array.isArray(t.customFields))return!1;const a=t.customFields.find((e=>e.id===s));return null!=a&&!Object(o.a)(a,n)})),R=e=>Object(n.createSelector)(M(e),(e=>{if(!e)return!1
;const t=!i()(e.properties.function),s=!i()(e.properties.formatter);return!t&&s})),N=Object(n.createSelector)(d.x,d.w,f.g,d.B,p.C,((e,t,s,n,a)=>({issue:{key:e,id:t,type:s},project:{id:null!==a?Object(r.r)(a.toString()):a,key:n}}))),F=Object(n.createSelector)(d.q,b.b,v,((e,t,s)=>e&&Array.isArray(t.actions)?O(t.activities,s).map((e=>{const{id:t,properties:{title:s}}=e,{appKey:n,moduleKey:a}=Object(c.d)(t);return{name:s,extension:e,type:"FORGE_ENTITY_TYPE",moduleKey:a,appKey:n}})):[])),U=e=>Object(n.createSelector)(N,b.b,((t,s)=>h(h({},t),{},{isNewToIssue:s.panelsKeys.newPanels.includes(e)}))),V=e=>Object(n.createSelector)(k,(t=>{const{extensionId:s}=Object(l.a)(e)||{};return t.find((e=>s===e.extension.id))})),K=e=>Object(n.createSelector)(b.b,(t=>t.panelsKeys.collapsedPanels.includes(e)))},"./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){
return l}));var n=s("./node_modules/lodash/has.js"),a=s.n(n),i=s("./node_modules/lodash/isNil.js"),r=s.n(i);const o=e=>e&&a()(e,"schema.custom")&&!r()(e.schema.custom)&&e.schema.custom.includes("ari:cloud:ecosystem::extension"),c=e=>o(e)?{id:e.key,type:"forgeCustomField"}:null,l=e=>o(e)?"forgeCustomField":null},"./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return x})),s.d(t,"a",(function(){return D})),s.d(t,"e",(function(){return L})),s.d(t,"d",(function(){return R})),s.d(t,"f",(function(){return N})),s.d(t,"c",(function(){return F}))
;var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/utils/constants/src/project-types.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/ui/flags/src/services/index.js"),o=s("./src/packages/issue/issue-scroll/src/services/types.js"),c=s("./src/packages/platform/utils/permalinks/src/index.js"),l=s("./src/packages/platform/utils/permalinks/src/constants.js"),d=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),u=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),p=s("./src/packages/issue/issue-view/src/common/messages/flags.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),f=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),b=s("./src/packages/platform/services/issue/src/source/issue-express/graphql-util.js"),g=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),h=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js")
;const j="issue.comment.fetch.epic.graphql",v="-created",E=(e,t,s,n)=>m.a`query {
        issueComments(issueIdOrKey: "${e}", first: ${t}, offset: ${s}, orderBy: "${n}") {
            nodes {
                id
                author {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                updateAuthor {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                visibility {
                  type
                  value
                }
                created
                updated
                renderedBody
                jsdPublic
                bodyAdf
            }
            totalCount
        }
    }`,w=(e,t,s,n,a,i,r)=>Object(f.a)(Object(O.d)(e),((e,t,s,n,a,i)=>({method:"POST",body:JSON.stringify({query:E(e,t,s,n)}),perf:i,headersProcessor:a&&a(g.a.key)}))(t,s,n,v)).map(h.f).map((e=>Object(h.b)(e,a,i,r))),k=({startAt:e,maxResults:t,orderBy:s,commentId:n,commentAmount:a})=>{const i=null!=n?`, commentId: "${n}"`:""
;return`query issueViewInteractiveQuery($issueKey: String!) {\n       viewIssue(issueKey: $issueKey) {\n           comments (${`first: ${e}`}${""===i&&null!=t?`, maxResults: ${t}`:""}${""!==i&&null!=a?`, commentAmount: ${a}`:""}${null!=s?`, orderBy: "${s}"`:""}${i}) {\n               nodes {\n                   id\n                   author {\n                       accountId\n                       displayName\n                       avatarUrl\n                   }\n                   updateAuthor {\n                       accountId\n                       displayName\n                       avatarUrl\n                   }\n                   visibility {\n                       type\n                       value\n                   }\n                   created\n                   updated\n                   jsdPublic\n                   bodyAdf\n               }\n               startIndex\n               totalCount\n           }\n       }\n     }\n   `
},C=({issueKey:e,maxResults:t,startAt:s,orderBy:n,commentId:a,commentAmount:i})=>({method:"POST",body:JSON.stringify({query:k({maxResults:t,startAt:s,orderBy:n,commentId:a,commentAmount:i}),variables:{issueKey:e}})}),S=({baseUrl:e,issueKey:t,commentId:s,commentAmount:n})=>Object(f.a)(`${e}/rest/gira/1/`,C({issueKey:t,commentAmount:n,startAt:0,orderBy:v,commentId:s})).map(b.a).map((e=>Object(b.b)(j,e))).map((e=>Object(y.b)(e.viewIssue)));var I=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),T=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),_=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),P=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js");const x=(e,t,s,n,a)=>{const i=100,r=null!=s?s:0;let o=0;r>0&&(o=r+a.filter((e=>e.completedDate.epochMillis>Math.max(...n.map((e=>e.timestamp))))).length);const c=e+a.length-(n.length+o);return{numNextActivityItemsToLoad:c>i?i:c,
numPrevActivityItemsToLoad:o>i?i:o}},D=(e,t,s)=>{let n=0;const a=100,i=e-(t+s);return s>0&&(n=s>a?a:s),{numNextCommentsToLoad:i>a?a:i,numPrevCommentsToLoad:n}},A="issue.comment.fetch.epic",M="Failed to fetch comments",L=(e,t)=>e.ofType("FETCH_LATEST_COMMENTS_REQUEST").switchMap((({type:e})=>{const s=t.getState(),a=Object(I.f)(s),r=Object(I.x)(s),o=Object(P.J)(s);return(o>10?10:o)>0?w(a,r,5,0,0,0,e).map((e=>Object(u.o)(e))).catch((e=>(Object(_.a)(A,M,e),i.h.safeWarnWithoutCustomerData(A,M),n.Observable.of(Object(u.n)())))):n.Observable.empty()})),R=(e,t)=>e.ofType("FETCH_OLDER_COMMENTS_REQUEST","FETCH_NEWER_COMMENTS_REQUEST").switchMap((({type:e})=>{const s=t.getState(),a=Object(I.f)(s),r=Object(I.x)(s),o=Object(P.K)(s),c=Object(P.F)(s),l=Object(P.J)(s),{startAt:d,maxResults:p}=((e,t,s,n)=>{let a=0,i=0;return"FETCH_OLDER_COMMENTS_REQUEST"===e?(i=t+n,{maxResults:Math.min(s-i,100),startAt:i}):(i=Math.max(0,t-100),a=t-i,{maxResults:a,startAt:i})})(e,l,o,c)
;return(({baseUrl:e,issueKey:t,maxResults:s,startAt:n=0,loadedComments:a=0,commentsStartIndex:i=0,commentId:r,type:o})=>Object(f.a)(`${e}/rest/gira/1/`,C({issueKey:t,maxResults:s,startAt:n,orderBy:v,commentId:r})).map(b.a).map((e=>Object(b.b)(j,e))).map((e=>Object(y.c)(e.viewIssue,a,i,o,v))))({baseUrl:a,issueKey:r,maxResults:p,startAt:d,loadedComments:c,commentsStartIndex:l,type:e}).map((e=>Object(u.q)(e))).catch((e=>(Object(_.a)(A,M,e),i.h.safeWarnWithoutCustomerData(A,M),n.Observable.of(Object(u.p)()))))})),N=(e,t)=>e.ofType("FETCH_SORTED_COMMENTS_REQUEST").switchMap((({payload:e})=>{const s=t.getState(),a=Object(I.f)(s),r=Object(I.x)(s);return void 0!==e?S({baseUrl:a,issueKey:r,commentAmount:Math.floor(5),commentId:e}).map((e=>Object(u.v)(e))).catch((e=>(Object(_.a)(A,M,e),i.h.safeWarnWithoutCustomerData(A,M),n.Observable.of(Object(u.t)())))):(({baseUrl:e,issueKey:t,maxResults:s})=>Object(f.a)(`${e}/rest/gira/1/`,C({issueKey:t,maxResults:s,startAt:0,orderBy:v,commentId:void 0
})).map(b.a).map((e=>Object(b.b)(j,e))).map((e=>Object(y.c)(e.viewIssue,0,0,void 0,v))))({baseUrl:a,issueKey:r,maxResults:5}).map((e=>Object(u.v)(e))).catch((e=>(Object(_.a)(A,M,e),i.h.safeWarnWithoutCustomerData(A,M),n.Observable.of(Object(u.t)()))))})),F=e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_COMMENT").switchMap((()=>{const t=s.getState(),m=Object(I.f)(t),f=Object(I.x)(t),b=Object(T.F)(t)===a.g,g=e.getScrollTargetId(o.a.COMMENT);return null===g?n.Observable.of():S({baseUrl:m,issueKey:f,commentAmount:Math.floor(5),commentId:g}).flatMap((t=>(window.history.replaceState({},null,Object(c.c)(g,l.b.COMMENTS)),e.setScrollTarget(null),n.Observable.of(Object(u.v)(t),Object(d.c)(b?d.b:d.a),Object(u.F)(!1))))).catch((e=>{Object(_.a)(A,M,e),i.h.safeWarnWithoutCustomerData(A,M);const{showFlag:t}=Object(r.f)();return t({type:"error",title:[p.a.commentWorklogAttachmentFetchFailedTitle,{field:"comment"}],description:p.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),
n.Observable.of()}))}))},"./src/packages/issue/issue-view/src/feature-flags.js":function(e,t,s){"use strict";s.r(t),s.d(t,"isSuppressDataProviderEnabled",(function(){return i})),s.d(t,"isErrorBoundaryAddedToIssueViewSafeComponentEnabled",(function(){return r})),s.d(t,"isReportingAttachmentViewEnabled",(function(){return o})),s.d(t,"isDataProviderRemovedFromChildIssuesEnabled",(function(){return c})),s.d(t,"isExtractedLabelsFieldEnabled",(function(){return l})),s.d(t,"isProfileCardProviderRendererEnabled",(function(){return d})),s.d(t,"isIssueViewMigratedStreamEnabled",(function(){return u})),s.d(t,"isIssueViewMigrationPostMigrationEnabled",(function(){return p})),s.d(t,"isRemoveDotDialogOnboardingEnabled",(function(){return m})),s.d(t,"isSprintFieldRefactorEnabled",(function(){return f})),s.d(t,"isUseAppPermissionsFromTenantContextEnabled",(function(){return b})),s.d(t,"isFieldDescriptionEnabled",(function(){return g})),
s.d(t,"isItSafeLoggingEnabledToUseAppPermissionsFromTenantContext",(function(){return h})),s.d(t,"isSmartEpicRankingEnabled",(function(){return y})),s.d(t,"isSmartSprintRankingEnabled",(function(){return O})),s.d(t,"isNewCardExperience",(function(){return j})),s.d(t,"isFolderUploadsEnabled",(function(){return v})),s.d(t,"isCodeViewerEnabled",(function(){return E})),s.d(t,"isZipPreviewEnabled",(function(){return w})),s.d(t,"isSingleLineTextFieldTextWrappingEnabled",(function(){return k})),s.d(t,"isTeamsCustomFieldTypeEnabled",(function(){return C})),s.d(t,"isInvitePeopleDrawerEnabled",(function(){return S})),s.d(t,"isInviteFromAssignEnabled",(function(){return I})),s.d(t,"isIssueViewEditorExpandNodesEnabled",(function(){return T})),s.d(t,"isQuickAddItemsOptimisationEnabled",(function(){return _})),s.d(t,"isConsolidatedFieldConfigServiceEnabled",(function(){return P})),s.d(t,"isFixSectionRenderingUndefinedBugEnabled",(function(){return x})),
s.d(t,"isFixNotUnmountingIssueViewContainerEnabled",(function(){return D})),s.d(t,"isConnectGlanceAutoresizeBugfixEnabled",(function(){return A})),s.d(t,"isWebAndIssueLinkSummaryEnabled",(function(){return M})),s.d(t,"isRemoveDuplicateGiraEnabled",(function(){return L})),s.d(t,"isBoardSearchFieldChangeboardingEnabled",(function(){return R})),s.d(t,"isBacklogSearchFieldChangeboardingEnabled",(function(){return N})),s.d(t,"getPerformanceTrackingConfiguration",(function(){return F})),s.d(t,"getValidTransactionsTrackingConfiguration",(function(){return U})),s.d(t,"getTTRSeverityTrackingConfiguration",(function(){return V})),s.d(t,"getUnsupportedContentLevelsTrackingConfiguration",(function(){return K})),s.d(t,"isSpecBasedValidatorEnabled",(function(){return $})),s.d(t,"isUsingUpdatedMediaClassIgnoredList",(function(){return W})),s.d(t,"isJsmLinkedAlertsEnabled",(function(){return B})),s.d(t,"isJsmChatChannelEnabled",(function(){return H})),s.d(t,"isJsmConferenceCallEnabled",(function(){
return G})),s.d(t,"isJsmRespondersEnabled",(function(){return q})),s.d(t,"isStickyHeaderRefactoringEnabled",(function(){return z})),s.d(t,"isInlineEditBumpEnabled",(function(){return Y})),s.d(t,"isRemoveUnusedFieldsEnabled",(function(){return Q})),s.d(t,"isJsmTicketConfigInSPAEnabled",(function(){return J})),s.d(t,"isDotDialogFieldsMilestone1Enabled",(function(){return Z})),s.d(t,"isViewIssueSlaOnMissingGiraDataEnabled",(function(){return X})),s.d(t,"isUseEditFieldIsMountedSetStateEnabled",(function(){return ee})),s.d(t,"isUseEditFieldLegacyEventsBackwardsCompatible",(function(){return te})),s.d(t,"isSupportContainersInProductAnalyticsBridgeEnabled",(function(){return se})),s.d(t,"isModernGlobalIssueCreateTriggerEnabled",(function(){return ne})),s.d(t,"isIssueBeanBuilder2ForSingleIssueCallsOptimizationEnabled",(function(){return ae})),s.d(t,"groupApprovalsEnabled",(function(){return ie})),s.d(t,"isIncidentConsolidationEnabled",(function(){return re})),
s.d(t,"isProformaIssueViewEnabled",(function(){return oe})),s.d(t,"isAtlaskitCssOverrideEnabled",(function(){return ce})),s.d(t,"isDeferFlagsFinaliseEnabled",(function(){return le})),s.d(t,"isMoveEcosystemModuleToSeparatePackageEnabled",(function(){return de})),s.d(t,"isUseParentOnlyInBreadcrumbInsteadOfEpicLinkEnabled",(function(){return ue})),s.d(t,"isBreadcrumbsAnalyticsEnabled",(function(){return pe})),s.d(t,"isBreakWordFixEnabled",(function(){return me})),s.d(t,"isJsmProjectArchiveAndRestoreEnabled",(function(){return fe})),s.d(t,"isRapidboardPrettyUrlsEnabled",(function(){return be})),s.d(t,"is2afErrorCleanupGroup1Enabled",(function(){return ge})),s.d(t,"is2afErrorCleanupGroup2Enabled",(function(){return he})),s.d(t,"isSwitcherooExperimentAATest",(function(){return ye})),s.d(t,"filterArchivedVersionsFromCacheEnabled",(function(){return Oe})),s.d(t,"isEmptyStateEnabled",(function(){return je}))
;var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js")
;const i=()=>Object(n.b)("issue.details.suppress-the-data-provider",!1),r=()=>Object(n.b)("issue.details.add-error-boundary-to-safe-component",!1),o=()=>Object(n.b)("issue.details.report-attachment-view",!1),c=()=>Object(n.b)("issue.details.data-provider-removed-from-child-issues",!1),l=()=>Object(n.b)("issue.details.extracted-field.labels",!1),d=()=>Object(n.b)("issue.details.profilecard-provider-renderer",!1),u=()=>Object(n.b)("issue.details.migration-migrated-stream",!1),p=()=>Object(n.b)("issue.details.migration.post-migration",!1),m=()=>Object(n.b)("issue.details.dot-dialog-remove-onboarding",!1),f=()=>Object(n.b)("issue.details.extracted-field.sprint.refactor",!1),b=()=>Object(n.b)("issue.details.jsd.app-permissions.from.tenant-context",!1),g=()=>Object(n.b)("issue.details.field-description",!1),h=()=>Object(n.b)("issue.details.bitbucket.license.state.in.tenant.context",!1),y=()=>Object(n.b)("issue.details.smart-epic-ranking",!1),O=()=>Object(n.b)("issue.details.smart-sprint-ranking",!1),j=()=>Object(n.b)("issue.details.media-cards-new-experience",!1),v=()=>Object(n.b)("issue.details.media-picker-folder-upload",!1),E=()=>Object(n.b)("issue.details.media-viewer-code-viewer",!1),w=()=>Object(n.b)("issue.details.media-viewer-zip-previews",!1),k=()=>Object(n.b)("issue-details-bento-10142-wrapping-single-line-text-field_b2nlb",!1),C=()=>Object(n.b)("jira.teams.enable-new-custom-field-types",!1),S=()=>"variation"===Object(a.a)().getVariantValue("confluence.frontend.invite.from.mention",{
default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1}),I=()=>"variation"===Object(a.a)().getVariantValue("invite.from.assign",{default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1
}),T=()=>Object(n.b)("issue.details.editor-expand-nodes",!1),_=()=>Object(n.b)("jff.magma.quick-add-items-optimisation",!1),P=()=>Object(n.b)("issue.details.field-config-consolidated",!1),x=()=>Object(n.b)("issue.details.fix-section-rendering-undefined-bug",!1),D=()=>Object(n.b)("issue.details.fix-not-unmounting-issue-view-container",!1),A=()=>Object(n.b)("issue.details-connect-glance-autoresize-bugfix",!1),M=()=>Object(n.b)("issue-view-display-summary-on-web-and-issue-links",!1),L=()=>Object(n.b)("jsw.classic.remove.duplicate.gira.call.issue.dialog",!1),R=()=>Object(n.b)("jsw.nextgen.search-field.changeboarding-board",!1),N=()=>Object(n.b)("jsw.nextgen.search-field.changeboarding",!1),F=()=>Object(n.c)("issue.details.editor.performance-tracking",{}),U=()=>{const e=Object(n.c)("issue.details.editor.valid-transactions-tracking",void 0);return"object"==typeof e&&Object.keys(e).length?e:void 0
},V=()=>Object(n.c)("issue.details.renderer.ttr-severity-tracking",{}),K=()=>Object(n.c)("issue.details.renderer.unsupported-content-levels-tracking",{}),$=()=>Object(n.c)("issue.details.renderer.spec-based-validator",!1),W=()=>Object(n.c)("issue.details.renderer.updated-media-classes-ignore-click",!1),B=()=>Object(n.b)("jsm_showing_related_alerts_on_incident_5f6bg",!1),H=()=>Object(n.b)("jsm-chat-channel-for-incident-management",!1),G=()=>Object(n.b)("jsm-issue-view-conference-call-field",!1),q=()=>Object(n.b)("jsm.incident.responders_xevre",!1),z=()=>Object(n.b)("issue.details.sticky-header-refactoring",!1),Y=()=>Object(n.b)("issue.details.inline-edit-bump",!1),Q=()=>Object(n.b)("issue.details.remove-unused-fields",!1),J=()=>Object(n.b)("jsm-ticket-config-in-spa",!1),Z=()=>Object(n.b)("issue.details.dot-dialog-fields-milestone-1",!1),X=()=>Object(n.b)("issue.details.bento-10004-view-issue-sla-on-missing-gira-data",!1),ee=()=>Object(n.b)("issue.details.use-edit-field-is-mounted-set-state",!1),te=()=>Object(n.b)("issue.details.bento-10304-use-edit-field-backwards-compatible-legacy-events",!1),se=()=>Object(n.b)("issue.details.bento-10494-support-containers-in-product-analytics-bridge",!1),ne=()=>Object(n.b)("project.config.pce.modern.global-issue-create.trigger",!1),ae=()=>Object(n.b)("issue-3048-optimize-issue-bean-builder-2-for-single-issue-calls",!1),ie=()=>Object(n.b)("jsd.reylo-426.team.approvals.master.switch",!1),re=()=>Object(n.b)("intermediate-state-for-incident-consolidation_vx0xt",!1),oe=()=>Object(n.b)("proforma-issue-view-integration_enzyx",!1),ce=()=>Object(n.b)("issue.details.fix.css.override.for.ak-renderer",!1),le=()=>Object(n.b)("jfp.perf.defer-flags-finalise",!1),de=()=>Object(n.b)("issue.ecosystem.move-ecosystem-module-to-separate-package",!1),ue=()=>Object(n.b)("return-parent-field-for-cmp-issues-in-public-api",!1),pe=()=>Object(n.b)("jira-breadcrumb-analytics_g5xxf",!1),me=()=>Object(n.b)("fix-break-word-in-issue-views-all-activity-and-history-activity-items_nvvph",!1),fe=()=>Object(n.b)("jsm-project-archive-and-restore",!1),be=()=>Object(n.b)("endeavour.rapidboard.pretty-url",!1),ge=()=>Object(n.b)("issue.details.2af.error-cleanup.group-1",!1),he=()=>Object(n.b)("issue.details.2af.error-cleanup.group-2",!1),ye=()=>Object(a.a)().getBooleanValue("switcheroo-aa-test_lorhy",{
default:!1}),Oe=()=>Object(n.b)("fusion.filter.archived.versions.from-cache",!1),je=()=>Object(n.c)("plan-and-build-empty-state_anckt",!1)},"./src/packages/issue/issue-view/src/feedback-button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/app-base/src/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=s("./src/packages/platform/controllers/unified-feedback/src/actions/types.js"),l=s("./src/packages/platform/controllers/unified-feedback/src/components/unified-feedback-api.js"),d=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),u=s("./node_modules/@atlaskit/icon/glyph/feedback.js"),p=s.n(u),m=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");class f extends n.Component{renderButton(){return a.a.createElement(d.a,{onClick:this.props.onClick,appearance:"subtle",
iconBefore:a.a.createElement(p.a,{label:this.props.iconLabel})},this.props.children)}render(){return a.a.createElement("div",null,this.props.tooltip?a.a.createElement(m.a,{content:this.props.tooltip,position:"top"},this.renderButton()):this.renderButton())}}f.displayName="BentoFeedbackTriggerButton",f.defaultProps={children:null,tooltip:null,iconLabel:"",onClick:null};class b extends n.Component{renderFeedbackButton(e){const t={collectorId:this.props.collectorId,feedbackGroupId:this.props.feedbackGroupId,feedbackType:c.a,optOut:!0};return a.a.createElement(l.a,null,((s,{openFeedbackDialog:n})=>a.a.createElement(o.FormattedMessage,{id:"software-issue.labs-feature-button-text",defaultMessage:"Give feedback"},(s=>this.props.isCompact?a.a.createElement(f,{iconLabel:String(s),tooltip:e,onClick:()=>n(t)}):a.a.createElement(f,{onClick:()=>n(t)},s)))))}render(){return a.a.createElement(o.FormattedMessage,{id:"software-backlog-issue.labs-feature-button-tooltip",defaultMessage:"Give feedback"
},(e=>this.renderFeedbackButton(e)))}}b.displayName="Feedback",b.defaultProps={isCompact:!1};var g=b;const h=e=>a.a.createElement(i.a,null,a.a.createElement(r.a,null,a.a.createElement(g,e)));h.displayName="FeedbackButton";t.a=h},"./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"a",(function(){return l}));const n=(e,t)=>({type:"FIELD_INIT_OPTIONS",payload:{fieldId:e,fieldOptions:t}}),a=(e,t,s,n)=>({type:"FIELD_EDIT_BEGIN",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,fieldEditSessionId:s}}),i=(e,t,s)=>({type:"FIELD_EDIT_UPDATE",payload:{fieldId:e,value:t,fieldOptions:s}}),r=(e,t,s,n,a)=>({type:"FIELD_EDIT_CONFIRM",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,saveFieldData:s,analyticsAttributeIdRetriever:a}
}),o=(e,t)=>({type:"FIELD_EDIT_CANCEL",payload:{fieldId:e,fieldOptions:t}}),c=(e,t,s)=>({type:"FIELD_PASTE",payload:{fieldId:e,fieldOptions:t,pastedContent:s}}),l=(e,t)=>({type:"FIELD_ADD_ALLOWED_VALUES",payload:{fieldId:e,allowedValues:t}})},"./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,
enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"h",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return p})),s.d(t,"g",(function(){return m}));const r=(e,t,s,n,i,r,o=!1)=>({type:"FIELD_SAVE_REQUEST",payload:a({fieldId:e,value:t,fieldOptions:s,saveFieldData:n,analyticsEvent:i,shouldFetchViewContext:o},r&&{eventData:r})}),o=(e,t,s,n,a)=>({type:"FIELD_SAVE_SUCCESS",payload:{fieldId:e,fieldOptions:t,fieldValue:s,saveFieldResult:n},meta:a}),c=(e,t,s,n)=>({type:"FIELD_SAVE_FAILURE",payload:{fieldId:e,invalidMessage:t,error:s,fieldOptions:n}}),l=(e,t,s,n)=>({type:"FIELD_SAVE_SUCCESS_WITH_PASTED_CONTENT",payload:{fieldId:e,fieldOptions:t,value:s,pastedContent:n}}),d=(e,t,s)=>({type:"FIELD_UPDATED",payload:{fieldId:e,fieldValue:t,extraParams:s}}),u=(e,t)=>({type:"FIELD_CONFIRM_NEW_FIELD",payload:{fieldId:e,
fieldValue:t}}),p=(e,t)=>({type:"FIELD_CONFIRM_FAILURE_NEW_FIELD",payload:{fieldId:e,fieldValue:t}}),m=(e,t,s)=>({type:"FIELD_UPDATE",payload:{fieldId:e,fieldValue:t,fieldOptions:s}})},"./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return u})),s.d(t,"i",(function(){return p})),s.d(t,"e",(function(){return b})),s.d(t,"f",(function(){return g})),s.d(t,"d",(function(){return O})),s.d(t,"g",(function(){return j})),s.d(t,"b",(function(){return v})),s.d(t,"c",(function(){return E})),s.d(t,"a",(function(){return w}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),c=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const l=Object(i.o)("hierarchy-level-below")||null,d=Object(n.createSelector)(l,(e=>e&&e.issueTypes||[])),u=Object(n.createSelector)(r.f,d,((e,t)=>{const s=e.issueTypes,n=t.map((e=>e.id));return s.filter((e=>-1!==n.indexOf(e.id)))
})),p=Object(n.createSelector)(o.h,d,((e,t)=>e.canCreateChildren&&!!t.length)),m=Object(i.o)("hierarchy-level-above")||null,f=Object(n.createSelector)(m,(e=>e&&(e.name||null))),b=Object(n.createSelector)(m,(e=>e&&e.issueTypeIds.map(String)||[])),g=Object(n.createSelector)(m,(e=>e&&e.issueTypes.map((e=>e.name)).filter((e=>e))||[])),h=Object(n.createSelector)(b,(e=>e.length>0)),y=Object(i.o)("hierarchy-level-same-level")||null,O=Object(n.createSelector)(y,(e=>!!e&&Object(a.d)(e.level))),j=Object(n.createSelector)(y,(e=>e?e.issueTypeIds.map(String):[])),v=Object(n.createSelector)(y,(e=>e?Object(a.e)(e.level):null)),E=Object(n.createSelector)(v,(e=>null==e||Object(a.b)(e))),w=Object(n.createSelector)(f,c.a,h,((e,t,s)=>Boolean(e)&&t&&s))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return j})),s.d(t,"b",(function(){return C})),s.d(t,"f",(function(){return x})),s.d(t,"e",(function(){return D})),
s.d(t,"a",(function(){return A})),s.d(t,"d",(function(){return M}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isArray.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./node_modules/lodash/isPlainObject.js"),l=s.n(c),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js"),f=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),g=s("./src/packages/issue/issue-view/src/configurations.js"),h=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),y=s("./src/packages/issue/issue-view/src/feature-flags.js")
;const O=["devSummary","SLA_PANEL","KNOWLEDGE_BASE","ASSET_ONBOARDING"],j=()=>[...O,...Object(y.isJsmLinkedAlertsEnabled)()?["LINKED_ALERTS"]:[],...Object(y.isJsmChatChannelEnabled)()?["CHAT_CHANNEL"]:[],...Object(y.isJsmConferenceCallEnabled)()?["CONFERENCE_CALL"]:[]],v=e=>o()(e)||i()(e)&&0===e.length||l()(e)&&0===Object.keys(e).length,E=(e,t,s)=>!(!e||!v(Object(m.a)(e))||Object(u.B)(e))&&("assignee"!==e.key&&"com.atlassian.servicedesk:vp-origin"!==Object(p.a)(e)&&"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"!==Object(p.a)(e)&&("timetracking"!==e.key||((e,t)=>!!t&&!e)(t,s))),w=(e,t)=>{if(j().includes(e.id))return{id:e.id,type:e.id};if("TAB"===e.type)return e;const s=Object(h.a)(t[e.id]);if(s)return s;const n=Object(u.u)(e.id,t),a=Object(p.a)(n);return n&&a?{id:n.key,type:a}:null},k=Object(n.createSelector)(u.s,(e=>Object.keys(e).filter((t=>{const s=Object(p.a)(e[t]);return s&&Object(g.e)().includes(s)
})))),C=Object(n.createSelector)(u.s,(e=>Object.keys(e).filter((t=>{const s=Object(p.a)(e[t]);return s&&g.f.includes(s)})))),S=Object(n.createSelector)(u.s,d.A,d.D,k,d.l,((e,t,s,n,a)=>{if(!a)return null;return[...t,...n,...s].find((t=>{const s=Object(u.u)(t.id,e);return s&&s.key===a}))||null})),I=Object(n.createSelector)(d.A,S,((e,t)=>t&&!e.includes(t)?e.concat([t]):e)),T=Object(n.createSelector)(d.D,S,((e,t)=>t?e.filter((e=>e!==t)):e)),_=Object(n.createSelector)(k,S,((e,t)=>t?e.filter((e=>e!==t)):e)),P=Object(n.createSelector)(I,T,_,d.n,f.F,((e,t,s,n)=>[...e,...t,...n?[{id:"devSummary",type:"DEV_SUMMARY"}]:[]])),x=Object(n.createSelector)(u.s,P,T,b.b,b.c,((e,t,s,n,a)=>t.filter((t=>{const i=!!s.find((e=>e.id===t.id));if(j().includes(t.id)||"TAB"===t.type)return!i;if(Object(h.c)(e[t.id]))return!0;const r=Object(u.u)(t.id,e);return!!Object(u.A)(r)||!E(r,n,a)&&(r&&Object(p.a)(r)&&!(i&&v(Object(m.a)(r))))
})).map((t=>w(t,e))).filter(Boolean))),D=Object(n.createSelector)(u.s,d.j,((e,t)=>t.filter((t=>{const s=Object(u.u)(t.id,e);return!(!s||!Object(p.a)(s))})).map((t=>w(t,e))).filter(Boolean))),A=Object(n.createSelector)(u.s,T,b.b,b.c,((e,t,s,n)=>t.filter((t=>{if(j().includes(t.id)||"TAB"===t.type)return!0;const a=Object(u.u)(t.id,e);return!Object(u.A)(a)&&(!E(a,s,n)&&(a&&Object(p.a)(a)&&v(Object(m.a)(a))))})).map((t=>w(t,e))).filter(Boolean))),M=Object(n.createSelector)(A,(e=>e.length>0))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/parent-issue-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.A,(e=>Boolean(e&&e.id)))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),
s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return u}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");const r=Object(a.q)("security"),o=Object(n.createSelector)(r,(e=>e&&e.value||null)),c=Object(n.createSelector)(r,(e=>e&&e.allowedValues||[])),l=Object(n.createSelector)(o,c,((e,t)=>e||t&&t.length>0)),d=Object(n.createSelector)(Object(a.C)("security"),i.c,((e,t)=>e&&!t)),u=Object(n.createSelector)(o,c,d,((e,t,s)=>({hasSecurityLevel:null!=e,securityLevelAllowedValuesCount:t.length,hasSecurityLevelEditPermissions:s})))},"./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return b}))
;var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),i=s("./src/packages/platform/services/issue/src/model/issue-custom-fields.js"),r=s("./src/packages/platform/services/issue/src/model/issue-managed-fields.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u={[i.s]:"com.atlassian.jira.plugin.system.customfieldtypes:float",[i.w]:"com.pyxis.greenhopper.jira:jsw-story-points",[i.z]:"com.atlassian.jira.plugin.system.customfieldtypes:url",[i.x]:"com.atlassian.jira.plugin.system.customfieldtypes:textfield",[i.y]:"com.atlassian.jira.plugin.system.customfieldtypes:textarea",[i.m]:"com.atlassian.jira.plugin.system.customfieldtypes:labels",[i.c]:"com.atlassian.jira.plugin.system.customfieldtypes:datepicker",[i.d]:"com.atlassian.jira.plugin.system.customfieldtypes:datetime",[i.u]:"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",[i.n]:"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",[i.p]:"com.atlassian.jira.plugin.system.customfieldtypes:multiselect",[i.v]:"com.atlassian.jira.plugin.system.customfieldtypes:select",[i.r]:"com.atlassian.jira.plugin.system.customfieldtypes:multiversion",
[i.B]:"com.atlassian.jira.plugin.system.customfieldtypes:version",[i.l]:"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker",[i.o]:"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker",[i.A]:"com.atlassian.jira.plugin.system.customfieldtypes:userpicker",[i.q]:"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker",[i.k]:"string",[i.i]:"number",[i.f]:"datetime",[i.j]:"option2",[i.h]:"array",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color",[i.e]:"com.pyxis.greenhopper.jira:gh-epic-color",[i.a]:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect",[i.t]:"com.atlassian.jira.plugin.system.customfieldtypes:project",[i.g]:"com.pyxis.greenhopper.jira:gh-epic-status"},p={[r.c]:"com.pyxis.greenhopper.jira:gh-epic-link",[r.d]:"com.pyxis.greenhopper.jira:gh-epic-label",[r.g]:"com.pyxis.greenhopper.jira:gh-sprint",[r.h]:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint",[r.i]:"com.atlassian.teams:rm-teams-custom-field-team",
[r.f]:"com.atlassian.jpo:jpo-custom-field-parent",[r.b]:"com.atlassian.jpo:jpo-custom-field-baseline-start",[r.a]:"com.atlassian.jpo:jpo-custom-field-baseline-end",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color",[r.e]:"com.atlassian.jira.plugin.system.customfieldtypes:flagged"},m=e=>({editable:e.editable,required:!1,autoCompleteUrl:void 0,allowedValues:[],schema:{system:e.systemType,custom:e.customType,type:e.type?e.type:"",renderer:e.renderer},title:e.title||e.key,renderedValue:e.value,value:e.value,adfValue:e.adfValue,key:e.key}),f=e=>{const t={};return e&&e.fields.forEach(((e,s)=>{try{switch(e.type){case o.a:case o.b:case o.e:case o.g:case o.i:case o.o:case o.q:case o.r:case o.t:case o.s:t[s]=m({key:s,systemType:s,customType:null,value:e.value,title:e.title,editable:!!e.editable});break;case o.A:t.timeoriginalestimate=m({key:"timeoriginalestimate",systemType:"timeoriginalestimate",customType:null,title:e.title,editable:!!e.editable,value:e.value&&e.value.originalEstimateSeconds
}),t[s]=m({key:s,systemType:s,customType:null,title:e.title,editable:!!e.editable,value:e.value});break;case o.f:t[s]=m({key:s,systemType:s,customType:null,title:e.title,value:void 0,renderedValue:void 0,adfValue:e.value,editable:!!e.editable,renderer:e.renderer});break;case o.h:t[s]=m({key:s,systemType:s,customType:null,title:e.title,value:"atlassian-wiki-renderer"===e.renderer?void 0:e.value,adfValue:"atlassian-wiki-renderer"===e.renderer?e.value:void 0,editable:!!e.editable,renderer:e.renderer});break;case o.x:case o.m:case o.u:t[s]=m({key:s,systemType:s,customType:null,value:e.value,editable:!!e.editable});break;case r.c:case r.g:case r.h:case r.i:case r.f:case r.b:case r.a:case r.e:t[s]=m({key:s,systemType:null,customType:p[e.type],value:e.value,title:e.title,editable:!!e.editable});break;case r.d:t[s]=m({key:s,systemType:null,customType:p[e.type],value:e.value,title:e.title,editable:!!e.editable,renderer:e.renderer,type:"string"});break;case i.y:{
const n="atlassian-wiki-renderer"===e.renderer?{adfValue:e.value}:{value:e.value};t[s]=m(l({key:s,systemType:null,customType:u[e.type],title:e.title,editable:!!e.editable,renderer:e.renderer},n));break}case i.a:t[s]=m({systemType:null,customType:u[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.b:case i.e:case i.s:case i.w:case i.z:case i.x:case i.m:case i.c:case i.d:case i.u:case i.n:case i.p:case i.v:case i.r:case i.B:case i.l:case i.o:case i.A:case i.q:case i.g:t[s]=m({systemType:null,customType:u[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.k:case i.i:case i.j:case i.h:case i.f:t[s]=m({systemType:null,customType:null,type:e.type,key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.t:t[s]=m({systemType:null,customType:u[e.type],type:e.type,title:e.title,key:s,editable:!!e.editable,value:e.value});break;case o.k:case o.d:case o.w:case o.n:t[s]=m({systemType:null,customType:null,key:s,title:e.title,
value:e.value,editable:!1})}}catch(c){a.a.safeErrorWithoutCustomerData("issue.details.field.initial-data-transformer",`Failed to map field: ${e.type}`,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:c}))}})),t},b=e=>{const t=Object.entries(f(e)).reduce(((e,[t,s])=>l(l({},e),{},{[t]:s.value})),{});return l(l({},e),{},{fields:t})};t.a=f},"./src/packages/issue/issue-view/src/media-feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/feature-flags.js");const a=()=>({newCardExperience:Object(n.isNewCardExperience)(),zipPreviews:Object(n.isZipPreviewEnabled)(),folderUploads:Object(n.isFolderUploadsEnabled)(),codeViewer:Object(n.isCodeViewerEnabled)()})},"./src/packages/issue/issue-view/src/model/change-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p}))
;const n="FIELD_CHANGE_REQUESTED",a="FIELD_CHANGED",i="FIELD_CHANGE_FAILED",r="ISSUE_TYPE_CHANGED",o="ISSUE_RELATIONSHIP_UPDATED",c="ISSUE_LINKS_CREATED",l="ISSUE_LINK_DELETED",d="CHILD_ISSUE_ADDED",u="ISSUE_CHILDREN_ORDER_CHANGED",p={[n]:n,[i]:i,[a]:a,[r]:r,[o]:o,[c]:c,[l]:l,[d]:d,[u]:u}},"./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"b",(function(){return r}));const r={actions:[],glances:[],panels:[],activities:[],customFields:[],customFieldTypes:[],activeAction:null,panelsKeys:{newPanels:[],collapsedPanels:[]}};t.a=(e=r,t)=>{switch(t.type){case"FETCH_FORGE_SUCCESS":return a(a({},e),{},{actions:t.payload.issueAction,glances:t.payload.issueGlance,panels:t.payload.issuePanel,activities:t.payload.issueActivity,customFields:t.payload.customField,customFieldTypes:t.payload.customFieldType,activeAction:null,panelsKeys:a(a({},e.panelsKeys),{},{newPanels:[]})});case"FORGE_ISSUE_ACTION_EXEC":return a(a({},e),{},{activeAction:{action:t.payload,isLoading:!0}});case"FORGE_ISSUE_ACTION_RENDERED":return a(a({},e),{},{activeAction:a(a({},e.activeAction),{},{isLoading:!1})});case"FORGE_ISSUE_ACTION_CLOSE":return a(a({},e),{},{activeAction:null});case"FORGE_ISSUE_PANEL_ADDED":return a(a({},e),{},{
panelsKeys:a(a({},e.panelsKeys),{},{newPanels:[...e.panelsKeys.newPanels,t.payload]})});case"FORGE_NEW_ISSUE_PANEL_UNTRACK":{const s=t.payload,{panelsKeys:n}=e;return a(a({},e),{},{panelsKeys:a(a({},n),{},{newPanels:n.newPanels.filter((e=>e!==s))})})}case"FORGE_ISSUE_PANEL_REMOVED":{const s=t.payload;return a(a({},e),{},{panelsKeys:{newPanels:e.panelsKeys.newPanels.filter((e=>e!==s)),collapsedPanels:e.panelsKeys.collapsedPanels.filter((e=>e!==s))}})}case"FORGE_ISSUE_PANEL_UPDATED":{const{panelKey:s,collapsed:n}=t.payload,i=n?Array.from(new Set([...e.panelsKeys.collapsedPanels,s])):e.panelsKeys.collapsedPanels.filter((e=>e!==s));return a(a({},e),{},{panelsKeys:a(a({},e.panelsKeys),{},{collapsedPanels:i})})}case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{var s;const n=(null===(s=t.payload.forgeIssueProperties)||void 0===s?void 0:s.collapsedPanels)||[];return a(a({},e),{},{panelsKeys:a(a({},e.panelsKeys),{},{
collapsedPanels:Array.from(new Set([...e.panelsKeys.collapsedPanels,...n]))})})}default:return e}}},"./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.activityFeed)),r=Object(n.createSelector)(i,(e=>e.selectedActivityItem)),o=Object(n.createSelector)(i,(e=>e.selectedActivitySortOrder))},"./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return C}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/camelCase.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),o=s("./src/packages/platform/utils/constants/src/board-types.js"),c=s("./src/packages/platform/utils/constants/src/project-types.js"),l=s("./src/packages/platform/utils/constants/src/status-categories.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),f=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const b=Object(n.createSelector)(Object(p.q)("servicedesk-practices"),(e=>{if(e&&e.value&&e.value.length>0)return e.value[0]}))
;var g=s("./src/packages/issue/issue-view/src/selectors/status-selector.js");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const j=e=>Object(d.i)(...c.f)(e),v=e=>Object(d.i)(...c.c)(e),E=e=>Object(d.i)(...o.a)(e),w=e=>Object(d.i)(...l.STATUS_CATEGORIES)(e),k=Object(n.createSelector)(Object(p.q)("assignee"),(e=>e&&e.value?e.value.accountId:null)),C=Object(n.createSelector)(u.b,m.l,m.C,m.F,m.u,f.f,g.a,u.h,u.g,m.C,u.w,k,b,((e,t,s,n,a,o,c,u,p,m,f,b,g)=>{const h={};return e&&(h.analyticsSource=e),"serviceDesk"===j(i()(n)).value&&g&&(h.itsmPractice=g),{containerType:Object(d.i)("project")("project"),containerId:m,objectType:Object(d.i)("issue")("issue"),objectId:new r.a(f),attributes:y(y({},h),{},{designVersion:Object(d.i)("v2-bento")("v2-bento"),projectId:s,issueId:t,projectConfig:v(a?"next-gen":"classic"),projectType:j(i()(n)),nextGenProject:Boolean(a),statusCategory:w(c),statusCategoryId:c?Object(l.categoryIdForStatusCategory)(c):null,issueTypeId:o,boardType:E(u),boardId:p,assigneeId:b?Object(d.i)(b)(b):b})}}))},
"./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const r=Object(n.createSelector)(i.H,(e=>e.assignIssueParentModal.isOpen)),o=Object(n.createSelector)(a.k,i.A,((e,t)=>[{id:e.issueId,key:e.issueKey,parentId:t&&t.id}]))},"./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js")
;const i=Object(n.createSelector)(a.a,(e=>e.picker)),r=Object(n.createSelector)(i,(e=>e.attachments||e.uploadedAttachments)),o=Object(n.createSelector)(i,(e=>e.isPopupOpen)),c=e=>Object(n.createSelector)(r,(t=>t[e]))},"./src/packages/issue/issue-view/src/selectors/attachment-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const r=Object(n.createSelector)(i.h,(e=>e.canCreateAttachments)),o=Object(n.createSelector)(a.H,(e=>e.attachments))},"./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return E})),s.d(t,"h",(function(){return w})),s.d(t,"i",(function(){return k})),s.d(t,"b",(function(){return C})),
s.d(t,"g",(function(){return S})),s.d(t,"f",(function(){return I})),s.d(t,"e",(function(){return T})),s.d(t,"d",(function(){return _}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/configurations.js"),c=s("./src/packages/issue/issue-view/src/feature-flags.js");const l=(e,t)=>`${e?e.replace(/\/?$/,"/"):"/"}browse/${t}`,d=(e,t)=>`${window.location.protocol}//${window.location.host}${l(e,t)}`,u=Object(i.q)("issuetype"),p=Object(i.q)("parent"),m=Object(i.q)("epic"),f=Object(i.q)(o.a),b=Object(n.createSelector)(m,a.f,((e,t)=>((e,t)=>e&&void 0!==t?{summary:e.summary,key:e.key,url:l(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""
}:null)(e&&e.value,t))),g=Object(n.createSelector)(f,a.f,((e,t)=>((e,t)=>e&&e.data?{summary:e.data.summary,key:e.data.key,url:l(t,e.data.key),issueTypeName:e.data.issueTypeName||"",issueTypeIconUrl:e.data.issueTypeIconUrl||""}:null)(e&&e.value,t))),h=Object(n.createSelector)(p,a.f,((e,t)=>((e,t)=>e?{summary:e.fields.summary,key:e.key,url:l(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e&&e.value,t))),y=Object(n.createSelector)(r.A,a.f,((e,t)=>((e,t)=>e?{summary:e.summary,key:e.key,url:l(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""
}:null)(e,t))),O=Object(n.createSelector)(y,h,g,((e,t,s)=>e||t||s)),j=Object(n.createSelector)(b,y,((e,t)=>[e,t].filter((e=>e)))),v=Object(n.createSelector)(b,O,((e,t)=>Object(c.isUseParentOnlyInBreadcrumbInsteadOfEpicLinkEnabled)()?[t].filter((e=>e)):[e,t].filter((e=>e)))),E=e=>e?j:v,w=Object(n.createSelector)(u,(e=>e&&e.value)),k=Object(n.createSelector)(a.f,a.x,l),C=Object(n.createSelector)(a.f,a.x,d),S=Object(n.createSelector)(w,(e=>e&&e.name)),I=Object(n.createSelector)(w,(e=>e&&e.id)),T=Object(n.createSelector)(w,(e=>e&&e.iconUrl)),_=Object(n.createSelector)(u,(e=>e&&Boolean(e.editable)))},"./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return p}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const d=Object(n.createSelector)(l.f,(e=>e.cardCover)),u=Object(n.createSelector)(d,(e=>e&&e.isEnabled)),p=(Object(n.createSelector)(d,(e=>e&&(!o()(e.attachmentId)||!i()(e.availableAttachmentIds)))),Object(n.createSelector)(c.v,(e=>!!e&&e.includes("cardCoverActions"))))},"./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return f})),s.d(t,"d",(function(){return b})),s.d(t,"b",(function(){return g})),s.d(t,"a",(function(){return h}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),i=s("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),c=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");var l=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js"),d=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js")
;const u=Object(n.createSelector)(o.H,(e=>e.changeboarding)),p=["core-issue","full-issue","software-issue","software-backlog-issue"],m=[a.a.FULL_ISSUE,a.a.SERVICEDESK_QUEUES_ISSUE,a.a.SERVICEDESK_REPORTS_ISSUE],f=Object(n.createSelector)(r.b,d.a,o.u,((e,t,s)=>p.includes(null==e?void 0:e.value)&&!t&&!s)),b=Object(n.createSelector)(r.b,d.a,o.u,((e,t,s)=>m.includes(null==e?void 0:e.value)&&!t&&!s)),g=(Object(n.createSelector)(f,u,(e=>{const{firstActivationDateMs:t}=e.context;return(e=>null!=e&&e<15357276e5)(t)}),(()=>Object(i.a)()<7),l.a,d.a,((e,t,s,n,a,i)=>e&&t.isBannerVisible&&s&&n&&!a&&!i)),Object(n.createSelector)(u,(e=>e.isTourActive)),Object(n.createSelector)(u,(e=>e.isBannerDismissed))),h=Object(n.createSelector)(c.f,(e=>e.some((e=>"assignee"===e.id))))},"./src/packages/issue/issue-view/src/selectors/children-issues-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.f,(e=>e.childrenIssues))},"./src/packages/issue/issue-view/src/selectors/comment-selector.js":function(e,t,s){"use strict";s.d(t,"t",(function(){return g})),s.d(t,"K",(function(){return h})),s.d(t,"J",(function(){return y})),s.d(t,"F",(function(){return O})),s.d(t,"E",(function(){return j})),s.d(t,"v",(function(){return v})),s.d(t,"G",(function(){return k})),s.d(t,"a",(function(){return C})),s.d(t,"e",(function(){return D})),s.d(t,"q",(function(){return A})),s.d(t,"i",(function(){return M})),s.d(t,"l",(function(){return L})),s.d(t,"j",(function(){return R})),s.d(t,"f",(function(){return N})),s.d(t,"g",(function(){return F})),s.d(t,"r",(function(){return U})),s.d(t,"h",(function(){return V})),s.d(t,"H",(function(){return K})),s.d(t,"o",(function(){return $})),s.d(t,"p",(function(){return W})),s.d(t,"m",(function(){
return B})),s.d(t,"s",(function(){return H})),s.d(t,"k",(function(){return G})),s.d(t,"D",(function(){return q})),s.d(t,"C",(function(){return z})),s.d(t,"b",(function(){return Y})),s.d(t,"c",(function(){return Q})),s.d(t,"d",(function(){return J})),s.d(t,"L",(function(){return Z})),s.d(t,"I",(function(){return X})),s.d(t,"B",(function(){return ee})),s.d(t,"u",(function(){return te})),s.d(t,"n",(function(){return se})),s.d(t,"A",(function(){return ne})),s.d(t,"w",(function(){return ae})),s.d(t,"y",(function(){return ie})),s.d(t,"x",(function(){return re})),s.d(t,"z",(function(){return oe}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/values.js"),i=s.n(a),r=s("./node_modules/date-fns/esm/compareAsc/index.js"),o=s("./node_modules/date-fns/esm/compareDesc/index.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){f(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const b=Object(n.createSelector)(l.H,(e=>e.comments.pendingDeletedIds)),g=Object(n.createSelector)(l.f,(e=>e.comments)),h=Object(n.createSelector)(l.f,(e=>e.totalComments)),y=Object(n.createSelector)(l.f,(e=>e.commentsStartIndex)),O=Object(n.createSelector)(l.f,(e=>e.loadedComments)),j=Object(n.createSelector)(l.H,(e=>e.comments.isLoadingMoreComments)),v=Object(n.createSelector)(l.H,(e=>e.comments.hasScrolledPermalinkComment)),E=Object(n.createSelector)(l.H,(e=>e.comments.pendingSavedValues)),w=Object(n.createSelector)(l.H,(e=>e.comments.deleteModalCommentId)),k=Object(n.createSelector)(l.H,(e=>e.comments.loadingStage)),C=Object(n.createSelector)(g,E,((e,t)=>m(m({},e),t))),S=e=>Object(n.createSelector)(C,(t=>t[e])),I=e=>Object(n.createSelector)(S(e),c.a,((e,t)=>null!==t&&t===(e&&e.authorId))),T=(e,t)=>Object(n.createSelector)(S(e),l.k,((e,s)=>e&&e[t]?s(e[t]):null)),_=Object(n.createSelector)(l.H,(e=>e&&e.comments||null)),P=Object(n.createSelector)(_,(e=>e&&e.commentEditors||null)),x=e=>Object(n.createSelector)(P,(t=>t&&t[e]||null)),D=e=>T(e,"authorId"),A=e=>T(e,"updateAuthorId"),M=e=>Object(n.createSelector)(x(e),(e=>e&&e.editingValue||null)),L=e=>Object(n.createSelector)(x(e),(e=>e&&e.visibility||null)),R=e=>Object(n.createSelector)(M(e),S(e),((e,t)=>e||t&&t.bodyAdf||null)),N=e=>Object(n.createSelector)(S(e),(e=>e?e.bodyHtml:null)),F=e=>Object(n.createSelector)(S(e),(e=>e?e.createdDate:null)),U=e=>Object(n.createSelector)(S(e),(e=>e?e.updatedDate:null)),V=e=>Object(n.createSelector)(S(e),(e=>e?e.edited:null)),K=e=>Object(n.createSelector)(E,(t=>t[e])),$=e=>Object(n.createSelector)(K(e),(e=>!!e)),W=e=>Object(n.createSelector)(K(e),(e=>!(!e||!e.hasSaveFailed))),B=e=>Object(n.createSelector)(w,(t=>t===e)),H=e=>Object(n.createSelector)(S(e),(e=>e?e.visibility:null)),G=e=>Object(n.createSelector)(L(e),H(e),((e,t)=>e||t)),q=e=>Object(n.createSelector)(c.t,(e=>Object(n.createSelector)(S(e),(e=>!!e&&e.isInternal)))(e),((e,t)=>e&&t)),z=e=>Object(n.createSelector)(x(e),(e=>{
var t;return null===(t=null==e?void 0:e.isInternal)||void 0===t||t})),Y=Object(n.createSelector)(d.h,(e=>e.canAddComments)),Q=e=>Object(n.createSelector)(d.h,I(e),((e,t)=>e.canDeleteAllComments||e.canDeleteOwnComments&&t)),J=e=>Object(n.createSelector)(d.h,I(e),((e,t)=>e.canEditAllComments||e.canEditOwnComments&&t)),Z=Object(n.createSelector)(C,b,((e,t)=>Object.keys(e).filter((e=>!t.includes(e))).map((t=>({id:t,createdDate:new Date(e[t].createdDate)}))).sort(((e,t)=>Object(r.a)(e.createdDate,t.createdDate))).map((e=>e.id)))),X=Object(n.createSelector)(u.b,C,b,((e,t,s)=>Object.keys(t).filter((e=>!s.includes(e))).map((e=>({id:e,createdDate:new Date(t[e].createdDate)
}))).sort(((t,s)=>"OLDEST_FIRST"===e?Object(r.a)(t.createdDate,s.createdDate):Object(o.a)(t.createdDate,s.createdDate))).map((e=>e.id)))),ee=e=>Object(n.createSelector)(x(e),(e=>!!e&&e.isEditing)),te=Object(n.createSelector)(Z,(e=>e),((e,t)=>e.filter((e=>ee(e)(t))))),se=Object(n.createSelector)(g,(e=>e?Object.keys(e).filter((t=>"object"==typeof e[t])):[])),ne=Object(n.createSelector)(se,(e=>e),((e,t)=>e.some((e=>ee(e)(t))))),ae=Object(n.createSelector)(l.H,(e=>e.comments.addCommentEditorExpand||!1)),ie=Object(n.createSelector)(ae,P,((e,t)=>e||!!t&&i()(t).some((e=>e.isEditing)))),re=Object(n.createSelector)(l.H,(e=>e.comments.isCommentAttachmentInProgress)),oe=Object(n.createSelector)(l.u,l.F,((e,t)=>!e&&("business"===t||"software"===t)))},"./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"f",(function(){return d})),
s.d(t,"a",(function(){return u})),s.d(t,"c",(function(){return f})),s.d(t,"h",(function(){return b})),s.d(t,"j",(function(){return g})),s.d(t,"g",(function(){return h})),s.d(t,"i",(function(){return y}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const i=Object(n.createSelector)(a.f,(e=>e.confluencePages)),r=Object(n.createSelector)(i,(e=>e.createLinkedPage)),o=Object(n.createSelector)(r,(e=>e.errorMessage)),c=Object(n.createSelector)(r,(e=>e.isInvalid)),l=Object(n.createSelector)(r,(e=>e.isLoading)),d=Object(n.createSelector)(r,(e=>e.clickedCount>0)),u=Object(n.createSelector)(r,(e=>e.clickedCount)),p=Object(n.createSelector)(i,(e=>e&&e.linkedPages)),m=Object(n.createSelector)(i,(e=>e&&e.mentionedPages)),f=Object(n.createSelector)(i,(e=>!(!e||!e.isLinkingEnabled))),b=Object(n.createSelector)(p,(e=>e&&e.pages)),g=Object(n.createSelector)(m,(e=>e&&e.pages)),h=Object(n.createSelector)(p,(e=>e&&e.pageCount)),y=Object(n.createSelector)(m,(e=>e&&e.pageCount))},"./src/packages/issue/issue-view/src/selectors/drafts/selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const i=Object(n.createSelector)(a.H,(e=>e.drafts)),r=e=>Object(n.createSelector)(i,(t=>!!t[e]))},"./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.ecosystem&&e.ecosystem.glance))},"./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");Object(n.createSelector)(a.h,(e=>e.canCloneIssue)),Object(n.createSelector)(a.h,(e=>e.canDeleteIssue)),Object(n.createSelector)(a.h,(e=>e.canMoveIssue))
;const i=Object(n.createSelector)(a.h,(e=>e.canEditIssues)),r=(Object(n.createSelector)(a.h,(e=>e.canAdministerJira||e.canAdministerProject)),Object(n.createSelector)(a.h,(e=>e.canAssignIssues)),Object(n.createSelector)(a.h,(e=>e.canLinkIssues)))},"./src/packages/issue/issue-view/src/selectors/issue-links-selector.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return b})),s.d(t,"k",(function(){return h})),s.d(t,"i",(function(){return y})),s.d(t,"g",(function(){return j})),s.d(t,"d",(function(){return v})),s.d(t,"b",(function(){return E})),s.d(t,"c",(function(){return k})),s.d(t,"f",(function(){return C})),s.d(t,"h",(function(){return S})),s.d(t,"j",(function(){return I})),s.d(t,"l",(function(){return T})),s.d(t,"a",(function(){return _}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/pickBy.js"),o=s.n(r),c=s("./node_modules/lodash/toArray.js"),l=s.n(c),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const f=Object(n.createSelector)(d.f,(e=>e.issueLinks)),b=Object(n.createSelector)(f,(e=>!!e)),g=Object(n.createSelector)(f,(e=>e&&e.issueLinks)),h=e=>e.entities.remoteIssueLinks.remoteIssues,y=Object(n.createSelector)(g,(e=>e&&o()(e,(e=>e.isOptimistic)))),O=Object(n.createSelector)(f,(e=>e&&e.linkedIssues)),j=Object(n.createSelector)(f,(e=>e?e.linkedIssueKeys:[])),v=(Object(n.createSelector)(g,(e=>!i()(e))),Object(n.createSelector)(g,h,((e,t)=>!i()(e)||!i()(t)))),E=Object(n.createSelector)(j,h,((e,t)=>e.length+t.length)),w=Object(n.createSelector)(g,O,((e,t)=>i()(e)?null:l()(e).filter((e=>!e.isDeleted)).map((e=>p(p({},e),{},{linkedIssue:t[e.linkedIssueKey]}))).reduce(((e,t)=>Object.assign(e,{[t.typeName]:[...e[t.typeName]||[],t]})),{}))),k=Object(n.createSelector)(w,h,((e,t)=>{if(null==e&&0===t.length)return null;const s=e=>({id:e.remoteIssueId,issueKey:e.issueKey,issueLink:e.issueLinkUrl,issueSummary:e.summary,issueTypeIconUrl:e.iconUrl});return t.reduce(((e,t)=>{
const{issueDetails:n,relationship:a,id:i,issueKey:r,issueLinkUrl:o,remoteIssueLinkError:c,globalId:l,isSaved:d,isLoading:u,isOptimistic:m,hasError:f,isDeleted:b}=t;return null==a||b?e:p(p({},e),{},{[a]:[...e[a]||[],{id:i.toString(),direction:"OUTWARD",typeName:a,linkedIssueKey:r,linkedIssue:n||s(t),isRemote:!0,globalId:l,remoteServerHostname:new URL(o).hostname,remoteIssueLinkError:c,isSaved:d,isLoading:u,isOptimistic:m,hasError:f}]})}),p({},e))})),C=e=>Object(n.createSelector)(g,(t=>t&&t[e]||null)),S=e=>Object(n.createSelector)(O,(t=>t&&t[e]||null)),I=Object(n.createSelector)(f,(e=>e&&e.quickAddClicked)),T=Object(n.createSelector)(I,(e=>!!e)),_=Object(n.createSelector)(f,(e=>e&&e.canCreateLinkedIssue))},"./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js");const o=Object(n.createSelector)(a.f,(e=>e.jiraSettings.issueLinkTypes)),c=Object(n.createSelector)(i.h,r.e,o,(({canLinkIssues:e},t,s)=>!!(e&&t&&s&&s.length)))},"./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.f,(e=>e.issueRemoteData)),r=Object(n.createSelector)(i,(e=>e.isLoadingComplete))},"./src/packages/issue/issue-view/src/selectors/issue-types-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return c})),
s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const c=Object(n.createSelector)(r.f,(e=>e.issueTypes)),l=["summary","issuetype","parent","project"],d=e=>!!Object.keys(e).find((t=>!(e=>l.find((t=>e===t)))(t)&&!e[t].hasDefaultValue&&e[t].required)),u=e=>i()(e.fields)||d(e.fields),p=Object(n.createSelector)(c,o.h,r.q,((e,t,s)=>{const n=s&&t&&t.id;return e.filter((e=>!e.subtask&&e.id!==n))})),m=Object(n.createSelector)(r.H,(e=>e.fetchIssueTypesStatus))},"./src/packages/issue/issue-view/src/selectors/share-as-comment-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js")
;const a=e=>e.shareAsComment,i=Object(n.createSelector)(a,(e=>e.value)),r=Object(n.createSelector)(a,(e=>e.timestamp))},"./src/packages/issue/issue-view/src/selectors/status-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/status-categories.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const r=Object(n.createSelector)(Object(i.o)("status"),(e=>e?Object(a.statusCategoryForId)(e.statusCategory.id):null))},"./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js")
;const i=Object(n.createSelector)(a.d,(e=>e.filter((e=>e.subtask)))),r=Object(n.createSelector)(i,(e=>e.length>=1)),o=Object(n.createSelector)(i,(e=>!!e.find(a.b)))},"./src/packages/issue/issue-view/src/selectors/subtasks-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return g}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const l=Object(n.createSelector)((e=>e.validators),(e=>{const t=e.projectHasSubtaskValidators
;return(e=>"LOADED"===e.status&&e.value)(t)||(e=>"LOADING"===e.status||"FAILED"===e.status)(t)}));var d=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js");const u=Object(n.createSelector)(c.h,(e=>!(!e||!e.subtask))),p=Object(n.createSelector)(i.f,(e=>e.subtasks)),m=Object(n.createSelector)(p,(e=>e.length>0)),f=Object(n.createSelector)(d.a,l,((e,t)=>e||t)),b=Object(n.createSelector)(i.f,(({jiraSettings:e})=>e.subtasksConfiguration.enabled)),g=Object(n.createSelector)(r.h,u,d.b,f,a.r,a.o,a.t,i.u,b,i.E,(({canCreateSubtask:e},t,s,n,a,i,r,c,l,d)=>{var u;const p=!!n&&(a||i),m=!Object(o.isJsmProjectArchiveAndRestoreEnabled)()||"PROJECT_ACTIVE"===(null!==(u=null==d?void 0:d.projectStatus)&&void 0!==u?u:"PROJECT_ACTIVE");return!!(e&&!t&&s&&!p&&(!r||!c)&&l&&m)}))},"./src/packages/issue/issue-view/src/selectors/ui-config-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.uiConfig)),r=Object(n.createSelector)(i,(e=>Boolean(e&&e.newIssueViewLockedIn)))},"./src/packages/issue/issue-view/src/selectors/web-links-selector.js":function(e,t,s){"use strict";s.d(t,"g",(function(){return m})),s.d(t,"h",(function(){return f})),s.d(t,"a",(function(){return b})),s.d(t,"e",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"f",(function(){return y})),s.d(t,"c",(function(){return O})),s.d(t,"d",(function(){return j}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/memoize.js"),i=s.n(a),r=s("./node_modules/lodash/uniqBy.js"),o=s.n(r),c=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js")
;const d=Symbol("GENERIC"),u=(e,t)=>`${e}${"string"==typeof t?t:""}`,p=Object(n.createSelector)(c.f,(e=>e.webLinks)),m=Object(n.createSelector)(p,(e=>e.links.filter((e=>void 0===e.isDeleting||!0!==e.isDeleting)))),f=Object(n.createSelector)(c.f,((e,t)=>t),(()=>{let e=null;const t=i()(((e,t)=>e.webLinks.links.filter((e=>void 0===e.isDeleting&&!0!==e.isDeleting&&(void 0===t?"string"!=typeof e.applicationName||""===e.applicationName.trim():"string"==typeof e.applicationName&&""!==e.applicationName.trim()&&t===u(e.applicationName,e.applicationType)))).reverse()),(({webLinks:s},n)=>(null!==e&&e!==s&&t.cache.clear(),e=s,void 0!==n?n:d)));return t})()),b=Object(n.createSelector)(m,(e=>{const t=e.reduce(((e,t)=>{const{applicationName:s,applicationType:n}=t;return"string"!=typeof s||""===s.trim()?e:[...e,{applicationName:s,applicationId:u(s,n)}]}),[]),s=o()(t,"applicationId");return s.sort(((e,t)=>e.applicationId.localeCompare(t.applicationId))),s
})),g=e=>Object(n.createSelector)(m,(t=>t.find((t=>t.id===e)))),h=Object(n.createSelector)(p,l.h,((e,t)=>!0===e.isLinkingEnabled&&t.canLinkIssues)),y=Object(n.createSelector)(p,(e=>e.linkCount)),O=Object(n.createSelector)(p,(e=>e.createClickCount)),j=Object(n.createSelector)(O,(e=>e>0))},"./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js":function(e,t,s){"use strict";var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const a=[400,403,401,404,409,412];t.a=e=>{if(e instanceof n.a)return!1;return!(e instanceof n.b&&e.statusCode&&(e=>a.some((t=>t===e)))(e.statusCode))&&("TypeError"!==e.name&&"AbortError"!==e.name)}},"./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js");class a extends Error{constructor(e,t){if(e instanceof a)return e;super(e.message),this.endpoint=void 0,this.traceId=void 0,this.error=void 0,
this.statusCode=void 0,this.error=e,this.message=e.message,e instanceof n.b&&(null!=e.traceId&&(this.traceId=e.traceId),this.statusCode=e.statusCode),this.endpoint=t}}},"./src/packages/issue/issue-view/src/utils/performance-analytics/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var n=s("./node_modules/@atlassian/browser-metrics/dist/es2019/factory/index.js");const a=n.a.custom({key:"issue-view-load",virtual:!0,timings:[{key:"preview",startMark:"metrics_init",endMark:"ISSUE_PREVIEW_RENDERED"},{key:"startDataFetch",startMark:"ISSUE_START_FETCHING_DATA",endMark:"ISSUE_FETCHED_MARK"},{key:"timeBlockedOnBackend",startMark:"ISSUE_READY_FOR_DATA",endMark:"ISSUE_DATA_AVAILABLE"}]}),i=n.a.custom({key:"embedded-issue-view-load",until:a,include:[a]});n.a.pageLoad({key:"service-management.queues.issue"}),n.a.pageLoad({key:"service-management.reports.issue"})},
"./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m})),s.d(t,"b",(function(){return f}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/react-resource-router/build/esm/index.js"),i=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-user-auth/index.js"),r=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-upload-permissions/index.js"),o=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-read-permissions/index.js"),c=s("./src/packages/routes/src/ui/spa/issue/resources/issue-gira-data/index.js"),l=s("./src/packages/routes/src/ui/spa/issue/resources/issue-graphql-data/index.js"),d=s("./src/packages/routes/src/ui/spa/issue/resources/issue-forge-data/index.js"),u=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js");let p;const m=()=>{const e=(()=>{var e;return p=null!==(e=p)&&void 0!==e?e:new u.a,p
})(),{data:t,promise:s}=Object(a.p)(i.a),{data:m,promise:f}=Object(a.p)(r.a),{data:b,promise:g}=Object(a.p)(o.a),{data:h,promise:y}=Object(a.p)(c.a),{data:O,promise:j}=Object(a.p)(l.a),{promise:v}=Object(a.p)(d.a);return Object(n.useMemo)((()=>{y&&j&&(e.setAllPromises({mediaUserAuthPromise:s,mediaUploadPermissionPromise:f,mediaReadPermissionPromise:g,issueGiraDataPromise:y,issueGraphqlDataPromise:j}),e.setAllData({mediaUserAuth:t,mediaUploadPermission:m,mediaReadPermission:b,issueGiraData:h,issueGraphqlData:O})),v&&e.setForgePromise(v)}),[v,h,y,O,j,b,g,m,f,t,s,e]),[e]},f=()=>{const e=[Object(a.p)(c.a),Object(a.p)(l.a)];return{loading:e.some((({loading:e})=>e)),error:e.map((({error:e})=>e)).find(Boolean)||null,promise:Promise.all(e.map((({promise:e})=>e))).then((()=>{}))}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js":function(e,t,s){"use strict";t.a=class{constructor(){this.issueMediaUserAuth=null,
this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueGiraData=null,this.issueGraphqlData=null,this.issueForgeData=null,this.allData={},this.getGiraData=()=>this.allData.issueGiraData&&this.allData.issueGiraData.data,this.getGiraErrors=()=>{var e;return null===(e=this.allData.issueGiraData)||void 0===e?void 0:e.errors},this.getGqlData=()=>this.allData.issueGraphqlData&&this.allData.issueGraphqlData.data,this.getGqlErrors=()=>{var e;return null===(e=this.allData.issueGraphqlData)||void 0===e?void 0:e.errors},this.getMediaUser=()=>this.allData.mediaUserAuth,this.getMediaReadPermission=()=>this.allData.mediaReadPermission,this.getMediaUploadPermission=()=>this.allData.mediaUploadPermission,this.isAllDataReady=()=>!(!this.getGiraData()||!this.getGqlData()),this.containsInitialPromises=()=>!!(this.issueMediaUploadPermission&&this.issueMediaUserAuth&&this.issueMediaReadPermission&&this.issueGiraData&&this.issueGraphqlData)}setAllData(e){this.allData=e}
setAllPromises(e){this.issueMediaUserAuth=e.mediaUserAuthPromise,this.issueMediaUploadPermission=e.mediaUploadPermissionPromise,this.issueMediaReadPermission=e.mediaReadPermissionPromise,this.issueGiraData=e.issueGiraDataPromise,this.issueGraphqlData=e.issueGraphqlDataPromise}setForgePromise(e){this.issueForgeData=e}getAllPromises(){return[this.issueMediaUserAuth,this.issueMediaUploadPermission,this.issueMediaReadPermission,this.issueGiraData,this.issueGraphqlData]}clearAll(){this.allData={},this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueMediaUserAuth=null,this.issueGiraData=null,this.issueForgeData=null,this.issueGraphqlData=null}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./node_modules/rxjs/Rx.js");const a=(e,t)=>e?n.Observable.fromPromise(e).catch(t):t()},
"./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/assign-issue-parent-modal/src/async.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),l=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),m=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js");const f=["isOpen"];function b(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const g=Object(r.f)((()=>s.e("async-assign-issue-parent-modal").then(s.bind(null,"./src/packages/assign-issue-parent-modal/src/index.js"))),{moduleId:"./src/packages/assign-issue-parent-modal/src/index.js"}),h=e=>{let{isOpen:t}=e,s=b(e,f);return a.a.createElement(c.f,null,t&&a.a.createElement(o.a,{packageName:"issue"},a.a.createElement(g,s)))};h.displayName="ModalWithTransition",t.a=Object(i.connect)((e=>{const t=Object(d.b)(e);return{isOpen:Object(m.b)(e),issues:Object(m.a)(e),issueParents:Object(u.B)(e),issueHierarchyLevel:Object(p.b)(e),issueParentTypeIds:Object(p.e)(e),shouldHideUnassignOption:Object(p.d)(e),parentIssueTypeName:Object(p.f)(e)[0],baseUrl:Object(d.f)(e),projectId:Object(u.C)(e),
analyticsSource:`issue-view (${t?t.toString():"undefined"})`}}),(e=>({onClose:()=>{e(Object(l.d)())},onSubmit:(t,s,n,a)=>{e(Object(l.e)(t,n,a))}})))(h)},"./src/packages/issue/issue-view/src/views/banner/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var r=({renderTopBanner:e,applicationKey:t,isProjectSimplified:s})=>e?e(t,s):null;t.a=Object(n.connect)((e=>({applicationKey:Object(a.e)(e),isProjectSimplified:Object(i.u)(e)})),{})(r)},"./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),c=s("./node_modules/@atlaskit/icon/glyph/add.js"),l=s.n(c);class d extends n.Component{render(){const{label:e,onClick:t}=this.props;return a.a.createElement("div",null,a.a.createElement(o.a,{appearance:"subtle",spacing:"compact",iconBefore:a.a.createElement(l.a,{size:"small",label:e}),onClick:t}))}}d.displayName="SquareAddIconButton",d.defaultProps={onClick:r.a}},"./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return m})),s.d(t,"a",(function(){return f}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),c=s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js");const l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div.withConfig({componentId:"jlp7gw-0"})`height:100%;display:flex;flex-direction:column;`,d=Object(n.createContext)(!1),{Provider:u,Consumer:p}=d,m=({children:e,defaultIsCompact:t})=>{const[s,i]=Object(n.useState)(t),d=r()(i,50);return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{setWidth:e=>{d(null!=e&&e<=600)}})),a.a.createElement(l,null,a.a.createElement(u,{value:s},e)))},f=p},"./src/packages/issue/issue-view/src/views/common/dropzone-overlay/assets/upload.svg":function(e,t,s){e.exports=s.p+"assets/upload.2b48c8308f51dfc6be4e460c86920fae.8.svg"},
"./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>e.displayName||e.name||"Component"},"./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/editing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),d=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const u=Object(i.connect)((e=>({experience:"editIssue",
application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e)})),{})(r.b),p=Object(i.connect)(((e,t)=>({field:t.fieldId,isEditing:Object(l.D)(t.fieldId)(e)})),{})(r.a),m=e=>t=>{const s=s=>a.a.createElement(p,{fieldId:e},a.a.createElement(t,s));return s.displayName=`WithEditExperienceTracker(${Object(d.a)(t)})`,s}},"./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return h})),s.d(t,"c",(function(){return y})),s.d(t,"b",(function(){return O}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const u=e=>e.ui.viewMountStatus.hasIssueViewMounted;var p=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const m="NEVER_TRACKING",f="requestDetailsPanel",b={description:"ALWAYS_TRACKING",ecosystemGlance:m,forgeGlance:m,assignee:m,reporter:m,"com.pyxis.greenhopper.jira:gh-sprint":m,"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":m,"com.pyxis.greenhopper.jira:gh-epic-link":m,fixVersions:m,
versions:m,devSummary:m,releases:m,"com.atlassian.servicedesk.assets-plugin:assetfield":m,ASSET_ONBOARDING:m,"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":m,labels:[f],components:[f],duedate:[f],priority:[f],environment:[f],labels:[f],components:[f],"com.atlassian.servicedesk.approvals-plugin:sd-approvals":[f],KNOWLEDGE_BASE:[f],SLA_PANEL:[f],timeoriginalestimate:[f],timetracking:[f],"com.atlassian.jpo:jpo-custom-field-parent":[f],"com.atlassian.jpo:jpo-custom-field-baseline-start":[f],"com.atlassian.jpo:jpo-custom-field-baseline-end":[f],"com.atlassian.jira.plugin.system.customfieldtypes:labels":[f],"com.atlassian.jira.plugin.system.customfieldtypes:textfield":[f],"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":[f],"com.atlassian.jira.plugin.system.customfieldtypes:url":[f],"com.atlassian.jira.plugin.system.customfieldtypes:float":[f],"com.pyxis.greenhopper.jira:jsw-story-points":[f],
"com.atlassian.jira.plugin.system.customfieldtypes:select":[f],"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":[f],"com.atlassian.jira.plugin.system.customfieldtypes:textarea":[f],"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":[f],"com.atlassian.jira.plugin.system.customfieldtypes:version":[f],"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":[f],"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":[f],"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":[f],"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":[f],"com.atlassian.jira.plugin.system.customfieldtypes:datetime":[f],"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":[f],"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":[f],"com.atlassian.teams:rm-teams-custom-field-team":[f],number:[f],datetime:[f],string:[f],option2:[f],array:[f],"com.atlassian.servicedesk:vp-origin":[f],
"com.atlassian.servicedesk:sd-request-participants":[f],"com.atlassian.servicedesk:sd-customer-organizations":[f],"com.atlassian.servicedesk:sd-request-feedback":[f],"com.pyxis.greenhopper.jira:jsw-issue-color":[f],"com.atlassian.jira.plugin.system.customfieldtypes:people":[f],"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":[f],"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":[f],"com.atlassian.jira.plugin.system.customfieldtypes:project":[f],"com.atlassian.jira.toolkit:viewmessage":[f],"com.atlassian.jira.toolkit:message":[f]};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const h=Object(i.connect)((e=>({experience:"viewIssue",experienceId:Object(c.x)(e),application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e),isExperienceReady:Object(d.n)(e)&&u(e)
})),{})(r.e),y=e=>t=>{const s=s=>a.a.createElement(r.d,{location:e},(({onExperienceSuccess:e})=>a.a.createElement(t,g({onExperienceSuccess:e},s))));return s.displayName=`WithViewExperienceTracker(${Object(p.a)(t)})`,s},O=e=>t=>{const s=({fieldType:s,ownProps:n})=>{const i=s&&(e=>{const t=b[e];return void 0===t?m:t})(s);if(null==s||"NEVER_TRACKING"===i)return a.a.createElement(t,n);const o=Array.isArray(i)?i:null,c=["field",s,...e?[e]:[]].join("-");return a.a.createElement(r.c,{location:c,parentProviders:o},a.a.createElement(t,n))};return s.displayName=`WithFieldViewExperienceTracker(${Object(p.a)(t)}`,Object(i.connect)(((e,t)=>({fieldType:Object(l.r)(t.fieldId)(e)})),null,(({fieldType:e},t,s)=>({fieldType:e,ownProps:s})))(s)}},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/page/dist/es2019/Grid.js"),o=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js");const c={columns:10};t.a=({children:e,isCompact:t=!1,hasMultipleScrollingColumns:s})=>a.a.createElement(i.ThemeProvider,{theme:c},a.a.createElement(o.a,{isCompact:t,hasMultipleScrollingColumns:s},a.a.createElement(r.a,{spacing:"comfortable",layout:"fluid"},e)))},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const i=4*a.e,r=3*a.e,o=n.default.div.withConfig({componentId:"sc-1clrjib-0"
})`> div{padding:0;margin:0;}${({hasMultipleScrollingColumns:e,isCompact:t})=>e?"\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        \n        > div {\n            flex-wrap: nowrap;\n            height: 100%;\n            /* targets Grid element of @atlaskit/page, which has align-items: flex-start by default */\n            align-items: initial;\n        }\n        ":`\n            padding-left: ${t?0:a.e/2}px;\n            /* Targets <GridColumn> element */\n            > div > div {\n                margin: 0;\n                max-width: 100%;\n            }\n        `}`},"./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/icon/glyph/error.js"),o=s.n(r),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const d=i.default.div.withConfig({componentId:"if94b0-0"})`align-items:center;color:${e=>e.colour};display:flex;margin-top:${l.e/2}px;`,u=i.default.div.withConfig({componentId:"if94b0-1"})`margin-left:${l.e/2}px;`,p={default:null,success:null,error:c.a.R400};class m extends n.Component{render(){const{children:e,validationMessage:t,validationState:s}=this.props;return a.a.createElement("div",null,e,s&&t?a.a.createElement(d,{colour:p[s]},a.a.createElement(o.a,{label:`${s} icon`,role:"presentation"}),a.a.createElement(u,null,t)):null)}}m.displayName="SelectValidationWrapper",m.displayName="SelectValidationWrapper",m.defaultProps={children:null,
validationState:"default",validationMessage:null}},"./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div.withConfig({componentId:"sc-11jqjqa-0"})`position:relative;`},"./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>t=>a.a.createElement(i.a,null,(s=>a.a.createElement(e,r({},t,{isCompact:s}))))},"./src/packages/issue/issue-view/src/views/common/with-container-width/index.js":function(e,t,s){"use strict"
;s.d(t,"a",(function(){return d}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),c=(s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthDetector.js"),s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js"));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function d(e){return t=>{const[s,i]=Object(n.useState)(void 0),d=r()(i,50);return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{setWidth:d})),a.a.createElement(e,l({},t,{containerWidth:s})))}}},"./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/profilecard-next/src/async.js"),r=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js");t.a=e=>{const t=(e=>e&&(e.accountId||e.id||e.value))(e.userAccount);return t?a.a.createElement(i.a,{TenantContextSubscriber:r.b,accountId:t,analyticsData:e.analyticsData,position:e.position,actions:e.actions},e.children):e.children}},"./src/packages/issue/issue-view/src/views/connect-field.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./node_modules/uuid/index.js"),o=s.n(r),c=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js"),l=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsContext.js"),d=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),f=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),b=s("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),g=s("./src/packages/issue/issue-view/src/feature-flags.js"),h=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),y=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js")
;function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){v(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const E=Object(n.defineMessages)({defaultFallbackInvalidMessage:{id:"issue.field.default-fallback-invalid-message",defaultMessage:"The value could not be saved"}}),w={transformFromStateValue:(e,t,s)=>e,transformToStateValue:e=>e,fallbackInvalidMessage:e=>e.formatMessage(E.defaultFallbackInvalidMessage),
additionalProps:(e,t,s)=>({}),additionalCallbacks:e=>({}),isOptimistic:!0,canContainMediaContent:!1,shouldSaveDraft:!1,saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n,fieldEditSessionId:a})=>{const i=a?`${e}/rest/api/2/issue/${t}?fieldEditSessionId=${a}`:`${e}/rest/api/2/issue/${t}`;return Object(d.e)(i,{body:JSON.stringify({fields:{[s]:n}})})},shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,fieldId:""},k=(e,t,s,n)=>({baseUrl:e,projectKey:t,issueKey:s,fieldId:n});t.a=(e=>(t,s)=>r=>{const d=(e=>({mapStateToProps:(t,s)=>{const n=e(t,s),a=j(j({},w),n),{fieldId:r,transformFromStateValue:o,transformToStateValue:c,fallbackInvalidMessage:l,additionalProps:d,additionalCallbacks:f,isOptimistic:b,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,shouldSaveDraft:O,onSaveFailureFlagType:v,onSaveSuccessFlagType:E}=a,C={isRichTextField:Object(p.I)(r)(t),isOptimistic:b,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,
shouldSaveDraft:O,onSaveFailureFlagType:v,onSaveSuccessFlagType:E},S=Object(i.a)(k),I=Object(i.a)(c),T=Object(i.a)(o);return(e,t)=>j({fieldId:r,fieldOptions:C,memoizedTransformToStateValue:I,additionalCallbacks:f,intl:t.intl,label:Object(p.m)(r)(e),isEditable:Object(p.C)(r)(e)&&"PREVIEW"!==Object(m.w)(e),isEditing:Object(p.D)(r)(e),fieldEditSessionId:Object(p.f)(r)(e),invalidMessage:Object(p.j)(r,l(t.intl))(e),customFieldConfig:Object(p.p)(r)(e),value:T(Object(p.h)(r)(e),S(Object(u.f)(e),Object(u.B)(e),Object(u.x)(e),r),t.intl),isWaiting:!b&&Object(p.F)(r)(e),isMobile:Object(u.r)(e)},d(e,t.intl,C))},mapDispatchToProps:e=>({initFieldOptions:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.f)(t,s)),onEditRequest:({fieldId:t,fieldOptions:s})=>(...n)=>{const a=n.length?n[n.length-1]:void 0;e(Object(h.b)(t,s,o.a.v4(),a))},onChange:({fieldId:t,fieldOptions:s,memoizedTransformToStateValue:n})=>a=>e(Object(h.e)(t,n(a),s)),
onConfirm:({fieldId:t,fieldOptions:s,analyticsAttributeIdRetriever:n})=>(...a)=>{const i=a.length>1?a[0]:void 0,r=a.length?a[a.length-1]:void 0;return e(Object(h.d)(t,s,i,r,n))},onBlur:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.c)(t,s)),onCancel:({fieldId:t,fieldOptions:s})=>()=>{e(Object(h.c)(t,s)),e(Object(b.b)({fieldId:t}))},onPaste:({fieldId:t,fieldOptions:s})=>n=>e(Object(h.g)(t,s,n)),getAdditionalCallbacks:({additionalCallbacks:t})=>t(e)}),mergeStateAndDispatchProps:(e,t)=>{const s=Object.keys(t).reduce(((s,n)=>(s[n]=t[n](e),s)),{}),n=t.getAdditionalCallbacks(e);return j(j(j({},e),s),n)}}))(t);return Object(f.a)([Object(c.a)({onConfirm:e=>e({action:"updated",isBoardSearchFieldChangeboardingEnabled:Object(g.isBoardSearchFieldChangeboardingEnabled)(),isBacklogSearchFieldChangeboardingEnabled:Object(g.isBacklogSearchFieldChangeboardingEnabled)()}),onEditRequest:{action:"updateStarted"}}),Object(l.a)({componentName:"issueFields",actionSubject:e
}),Object(a.connect)(d.mapStateToProps,d.mapDispatchToProps,d.mergeStateAndDispatchProps),n.injectIntl],s)(Object(y.b)()(r))})("issueFields")},"./src/packages/issue/issue-view/src/views/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={ASSIGNEE:{TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.assignee.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.assignee.time-to.reflect-input-results",TIME_TO_REFLECT_SELECTED:"jira.fe.issue.fields.assignee.time-to.reflect-selected",TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT:"jira.fe.issue.fields.assignee.time-to.assign-to-me-via-shortcut"},SUMMARY:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.summary.time-to.render-edit-view",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.summary.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.summary.time-to.render-read-view-on-cancel"},LABELS:{
TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.labels.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.labels.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.labels.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.labels.time-to.render-read-view-on-cancel",TIME_TO_REFLECT_SELECTED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-selected-existing",TIME_TO_REFLECT_SELECTED_NEW:"jira.fe.issue.fields.labels.time-to.reflect-selected-new",TIME_TO_REFLECT_REMOVED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-removed-existing"},STORY_POINTS:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.story-points.time-to.render-edit-view",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.story-points.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.story-points.time-to.render-read-view-on-cancel"},ISSUE_LINKS:{
TIME_TO_REFLECT_SELECTED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-selected-issue",TIME_TO_REFLECT_REMOVED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-removed-issue",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.issue-links.time-to.reflect-input-results",TIME_TO_RENDER_LINKED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.render-linked-issue",TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT:"jira.fe.issue.fields.issue-links.time-to.render-new-linked-issue-input"},SPRINT:{TIME_TO_REFLECT_SELECTED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-selected-sprint",TIME_TO_REFLECT_REMOVED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-removed-sprint",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.sprint.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.sprint.time-to.render-read-view",TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.sprint.time-to.render-initial-suggestions"},PRIORITY:{
TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.priority.time-to.render-read-view",TIME_TO_RENDER_SUGGESTIONS:"jira.fe.issue.fields.priority.time-to.render-suggestions",TIME_TO_REFLECT_PRIORITY_UPDATE:"jira.fe.issue.fields.priority.time-to.reflect-priority-update"},COMMENTS:{TIME_TO_RENDER_NEW_COMMENT_EDITOR:"jira.fe.issue.fields.comments.time-to.render-new-comment-editor",TIME_TO_RENDER_SAVED_COMMENT:"jira.fe.issue.fields.comments.time-to.render-saved-comment"},DESCRIPTION:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.description.time-to.render-edit-view",TIME_TO_SAVE_UPDATED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-updated-description",TIME_TO_SAVE_UNCHANGED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-unchanged-description"},EPIC_LINKS:{TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-enabled",
TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_DISABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-disabled"}}},"./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n=(e,t)=>"string"==typeof e&&e.toLowerCase().includes(t),a=(e,t)=>{if(e.data&&!0===e.data.__isNew__)return!0;const s=t.trim().toLowerCase();return!!n(e.label,s)||!(!e.data||!e.data.filterValues)&&e.data.filterValues.some((e=>n(e,s)))}},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return le}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/rxjs/Rx.js"),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/form/dist/es2019/messages.js"),d=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/messages.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),f=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),b=s("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),g=Object(i.defineMessages)({empty:{id:"issue.views.field.select.empty",defaultMessage:"No matches found"},failedFetch:{id:"issue.views.field.select.failed-fetch",defaultMessage:"Search failed."},reloadIssue:{
id:"issue.views.field.select.reload-issue",defaultMessage:"Try reloading the issue."}}),h=s("./node_modules/uuid/index.js"),y=s.n(h),O=s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js"),j=s("./src/packages/platform/observability/analytics-legacy-gasv2-utils/src/hash-attribute.js"),v=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),E=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js"),w=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),k=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),C=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),S=s("./node_modules/lodash/flatMap.js"),I=s.n(S)
;const T=e=>I()(e.map((e=>(e=>void 0!==e.options)(e)&&e.options?e.options:e))),_=e=>null==e?[]:Array.isArray(e)?e:[e],P=(e,t=!1)=>t?e.toString():Object(j.a)(e.toString()).toString(),x=(e,t=!1)=>e.filter((e=>e.value)).map((({value:e})=>P(e,t))),D=e=>{const t=e.map((({id:e})=>e||null));return t.every((e=>null===e))?[]:t},A=e=>e.filter((e=>e.value)).map((({value:e})=>null!=e?`${e}`.length:0)),M=["footer","onFooterSelect","options","noOptionsMessage","loadingMessage","filterOption"];function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const N="",F=Object(C.a)((e=>({label:e(N),isDisabled:!0,isAkSelectOption:!0}))),U=Object(C.a)((e=>({label:e(N),isDisabled:!0,isAkSelectOption:!0}))),V=Object(C.a)(((e,t,s,n)=>!0===e?[...t,s,n]:t));class K extends n.Component{constructor(...e){super(...e),this.formatCreateLabel=e=>{const{footer:t,formatCreateLabel:s}=this.props;return void 0===t?s?s(e):e:"function"==typeof t?t(e):t},this.getShouldShowFooter=()=>{const{footer:e,shouldShowFooter:t}=this.props;return!!e&&t},this.isOptionShownInDropdown=(e,t)=>{const{filterOption:s,noOptionsMessage:n,loadingMessage:a,value:i}=this.props;return s(e,t)&&e.label!==n(N)&&e.label!==a(N)&&!_(i).find((t=>t.value===e.value))},this.filterOptionWithFooterAndShowNoOptionsMessage=(e,t)=>{const{filterOption:s,options:n,isLoading:a,noOptionsMessage:i,loadingMessage:r}=this.props
;return e.label===i(N)?!0!==a&&!T(n).some((e=>this.isOptionShownInDropdown(e,t))):e.label===r(N)?!0===a&&!T(n).some((e=>this.isOptionShownInDropdown(e,t))):s(e,t)}}render(){const e=this.props,{footer:t,onFooterSelect:s,options:n,noOptionsMessage:i,loadingMessage:r,filterOption:o}=e,c=R(e,M),l=this.getShouldShowFooter(),d=U(i),u=F(r),p=V(l,n,d,u);return a.a.createElement(O.a,L({},c,{options:p,formatCreateLabel:this.formatCreateLabel,isValidNewOption:this.getShouldShowFooter,onCreateOption:s,filterOption:!0===l?this.filterOptionWithFooterAndShowNoOptionsMessage:o,loadingMessage:r,noOptionsMessage:i,allowCreateWhileLoading:!0}))}}K.displayName="SelectWithFooter",K.defaultProps={shouldShowFooter:!0};const $=["canCreateNewItem","createAnalyticsEvent"];function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function H(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function G(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?H(Object(s),!0).forEach((function(t){q(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,
configurable:!0,writable:!0}):e[t]=s,e}const z={onChange:"valueChanged",onInputChange:"inputChanged",onMenuOpen:"menuOpened",onMenuClose:"menuClosed"},Y=Object(v.a)("select",z)(K),Q=Object(v.a)("select",z)(O.a),J={action:"fake-action"};class Z extends n.Component{constructor(e){super(e),this.getDefaultAnalyticsAttributes=e=>{const{fieldId:t,value:s,isLoading:n,optionValuesSafeForAnalytics:a}=this.props,i={queryLength:e.length,queryHash:""===e?e:Object(j.a)(e)},r=_(s);let o=((e,t)=>e.filter((e=>"string"==typeof e.value&&e.value.toLowerCase().includes((t||"").toLowerCase())||"string"==typeof e.label&&e.label.toLowerCase().includes((t||"").toLowerCase()))))(this.flatOptions,e);const c=o.length;o=o.slice(0,20);return G(G({fieldId:t,componentName:"select",packageName:"@atlaskit/select",options:x(o,a),optionsLength:c,optionsLengths:A(o),optionIds:D(o),selectedOptions:x(r,a),selectedOptionsLengths:A(r),selectedOptionIds:D(r),sessionId:this.sessionId,truncationSize:20,isLoading:n},i),{},{
optionValuesSafeForAnalytics:a},this.props.additionalAnalyticsProps)},this.getItemOrder=e=>{const t=[];return this.flatOptions.forEach(((s,n)=>{const a=s.filterValues||[];(s.value===e.value||a.includes(e.value))&&t.push(n)})),t.length>0?t[0]:-1},this.startSession=()=>{this.sessionId=y.a.v4(),this.sessionStartedAt=w.d.now(),this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"started"}),"started","optionSelectionSession")},this.endSession=()=>{if(this.sessionId){const e=this.sessionStartedAt?w.d.now()-this.sessionStartedAt:0;this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"ended"}),"ended","optionSelectionSession",G({elapsedTime:e},this.props.additionalAnalyticsProps))}this.sessionStartedAt=0,this.sessionId=void 0},this.flatOptions=[],this.sessionId=void 0,this.queryAtSetValue="",this.query="",this.sessionStartedAt=0,this.isOpened=!1,this.fireOptionsLoadedEvent=e=>{e.update({action:"loaded",actionSubject:"options"}),
this.fireAnalyticsEvent(e,this.query)},this.fireInputChangedEvent=(e,t,s)=>("set-value"===t.action&&(this.queryAtSetValue=this.query),this.query=e,s.update({action:"changed",actionSubject:"filter"}),this.fireAnalyticsEvent(s,this.query),this.sessionId),this.restartSession=()=>{this.endSession(),this.props.menuIsOpen&&(this.isOpened=!0,this.startSession())},this.fireOptionCreatedEvent=(e,t)=>{t.update({action:"created",actionSubject:"option"});const s=this.sessionId;this.restartSession(),this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOption:P(e.value,this.props.optionValuesSafeForAnalytics),sessionId:s})},this.fireOptionRemovedEvent=(e,t)=>{t.update({action:"removed",actionSubject:"option"}),this.fireAnalyticsEvent(t,this.query,{removedItem:e?P(e.value,this.props.optionValuesSafeForAnalytics):void 0})},this.fireOptionSelectedEvent=(e,t)=>{t.update({action:"changed",actionSubject:"option"});const s=this.sessionId;this.restartSession(),
this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOrder:this.getItemOrder(e),selectedOption:P(e.value,this.props.optionValuesSafeForAnalytics),selectedOptionLength:null!==e.value?`${e.value}`.length:0,sessionId:s})},this.fireOpenChangedEvent=(e,t)=>{e.isOpen&&!this.isOpened&&this.startSession(),this.isOpened=e.isOpen,t.update({action:e.isOpen?"opened":"closed",actionSubject:"optionSelect",attributes:this.getDefaultAnalyticsAttributes(this.query)}),this.fireAnalyticsEvent(t,this.query)},this.onChange=(e,t,s)=>{const n=Array.isArray(e)?e[e.length-1]:e,a=this.sessionId;switch(t.action){case"create-option":null!==n&&this.fireOptionCreatedEvent(n,s);break;case"remove-value":case"pop-value":case"deselect-option":this.fireOptionRemovedEvent(t.removedValue||t.option,s);break;case"select-option":null!==n&&this.fireOptionSelectedEvent(n,s)}this.props.onChange&&this.props.onChange(e,t,a)},this.onInputChange=(e,t,s)=>{const{onInputChange:n}=this.props
;"input-change"!==t.action&&"set-value"!==t.action||this.fireInputChangedEvent(e,t,s),n(e,t,this.sessionId)},this.onMenuOpen=e=>{this.fireOpenChangedEvent({isOpen:!0},e);const{onMenuOpen:t}=this.props;t&&t(e)},this.onMenuClose=e=>{this.fireOpenChangedEvent({isOpen:!1},e);const{onMenuClose:t}=this.props;t&&t(e)},this.onFocus=e=>{this.props.onFocus(e,this.sessionId)},this.flatOptions=T(this.props.options),this.isOpened=e.menuIsOpen,this.isOpened&&(this.startSession(),this.fireInputChangedEvent("",J,this.props.createAnalyticsEvent({})))}componentDidUpdate(e){this.props.options!==e.options&&(this.flatOptions=T(this.props.options),this.fireOptionsLoadedEvent(this.props.createAnalyticsEvent()))}componentWillUnmount(){this.endSession()}fireAnalyticsEvent(e,t,s={}){const n=G(G({},this.getDefaultAnalyticsAttributes(t)),s);Object(k.h)(e,n)}fireTrackAnalyticsEvent(e,t,s,n){const a=G(G({},this.getDefaultAnalyticsAttributes(this.query)),n);Object(k.f)(e,`${s} ${t}`,a)}render(){
const e=this.props,{canCreateNewItem:t,createAnalyticsEvent:s}=e,n=B(e,$),i=t?Q:Y;return a.a.createElement(i,W({},n,{onFocus:this.onFocus,onChange:this.onChange,onInputChange:this.onInputChange,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose}))}}Z.displayName="SelectWithAnalyticsView",Z.defaultProps={isLoading:!1,createAnalyticsEvent:c.a,optionValuesSafeForAnalytics:!1,onChange:c.a,onInputChange:c.a,onMenuOpen:c.a,onMenuClose:c.a};var X=Object(E.a)()(Z),ee=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js"),te=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js");const se=["label","filterValues"],ne=["placeholder","noOptionsMessage","loadingMessage","fieldId","onChangeMulti","invalidMessage","isOpen","hasAutocomplete","portalElement","intl","fetchSuggestions","additionalAnalyticsProps","debounceFetchSuggestionsTime","changeQueryValue","errorMessagePosition"]
;function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function re(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function oe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?re(Object(s),!0).forEach((function(t){ce(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):re(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ce(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const le={hideSelectedOptions:!0,allowCreateWhileLoading:!0,filterOption:b.a},de=e=>oe({label:e.content},e),ue=(e,t)=>{const{label:s,filterValues:n}=e,a=oe({},ie(e,se));return"create-option"===t.action&&void 0===a.content&&(a.content=e.label),a};class pe extends n.Component{constructor(e){var t;super(e),this.onFocus=(e,t)=>{this.query$.next({query:"",sessionId:t,isImmediate:!0})},this.onChange=(e,t,s)=>{const{onChange:n,onChangeMulti:a,isMulti:i}=this.props;if(i){if(!a)return;this.query$.next({query:this.query||"",sessionId:s,isImmediate:!0});a(Array.isArray(e)?e.map((e=>ue(e,t))):[],t)}else{if(!n||Array.isArray(e))return;n(e&&ue(e,t),t)}},
this.onInputChange=(e,t,s)=>{if("input-change"!==t.action&&"set-value"!==t.action)return;let n=e;this.props.changeQueryValue&&(n=this.props.changeQueryValue(n)),this.query=n,"input-change"===t.action&&(this.setState({isLoading:!0}),this.query$.next({query:n,sessionId:s})),this.props.onInputChange&&this.props.onInputChange(n,t)},this.formatOptionLabel=(e,t)=>void 0!==this.props.formatOptionLabel?this.props.formatOptionLabel(e,t):e.iconUrl?a.a.createElement(ee.e,null,a.a.createElement(ee.d,null,a.a.createElement("img",{src:e.iconUrl,alt:"",width:2*p.e,height:2*p.e,role:"none"})),a.a.createElement(ee.c,null,e.label)):e.label,this.transformItems=e=>e&&e.length>0?e.map(de):[],this.transformToOptions=e=>1!==e.length||e[0].heading?e.map((e=>{const t=this.transformItems(e.items);return void 0!==e.heading?{label:e.heading,options:t}:{options:t}})):this.transformItems(e[0].items),this.subscription=void 0,this.query$=void 0,this.query=null,
this.getFailedFetchMessage=()=>a.a.createElement(ee.b,null,a.a.createElement("span",null,this.props.intl.formatMessage(g.failedFetch)," ",a.a.createElement("a",{role:"button",href:window.location.href,onClick:()=>window.location.reload()},this.props.intl.formatMessage(g.reloadIssue)))),this.noOptionsMessageDefault=()=>this.props.intl.formatMessage(g.empty),this.loadingMessageDefault=()=>this.props.intl.formatMessage(u.a.loading),this.filterOption=e=>!!this.state.hasLastFetchFailed||this.props.filterOption&&this.props.filterOption(e,this.query||""),this.renderSelectField=()=>{const e=this.props,{placeholder:t="",noOptionsMessage:s=this.noOptionsMessageDefault,loadingMessage:n=this.loadingMessageDefault,fieldId:i,onChangeMulti:r,invalidMessage:o,isOpen:c,hasAutocomplete:l,portalElement:d,intl:u,fetchSuggestions:p,additionalAnalyticsProps:m,debounceFetchSuggestionsTime:f,changeQueryValue:b,errorMessagePosition:g}=e,h=ie(e,ne),y=o?"error":void 0;return a.a.createElement(X,ae({},le,h,{
filterOption:this.filterOption,key:i,fieldId:i,options:this.state.options,value:this.getSelectedValue(),styles:Object(te.a)(ee.f,ee.g,this.props.styles),additionalAnalyticsProps:m,isLoading:this.state.isLoading,isSearchable:l,menuIsOpen:c,menuPortalTarget:d,menuPlacement:"auto",placeholder:t,noOptionsMessage:s,loadingMessage:n,validationState:y,formatOptionLabel:this.formatOptionLabel,onChange:this.onChange,onFocus:this.onFocus,onInputChange:this.onInputChange}))},this.renderErrorMessage=()=>{const{invalidMessage:e,fieldId:t,errorMessagePosition:s}=this.props;return e?a.a.createElement(ee.a,{key:`${t}-error-message`,errorMessagePosition:s},a.a.createElement(l.a,null,e)):null};const{onDataRequest:s,onDataLoaded:n,fetchSuggestions:i,debounceFetchSuggestionsTime:o,additionalAnalyticsProps:c}=this.props;if(this.query$=new r.Subject,this.subscription=this.query$.debounce((({isImmediate:e})=>e?r.Observable.empty():r.Observable.timer(o||0))).switchMap((({query:e,sessionId:t})=>{s&&s({
isInitial:null===this.query}),this.setState({isLoading:!0});return i(e,t||void 0).then((e=>(this.setState({hasLastFetchFailed:!1}),e))).catch((e=>(m.h.safeErrorWithoutCustomerData("issue.select.transform-suggestions","Could not fetch or transform suggestions to display in select",new d.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),c&&m.h.safeErrorWithoutCustomerData("issue.select.fetch-transform-suggestions.details","Could not fetch or transform retrieved data",oe(oe({},c),{},{message:e.message})),Object(f.a)({meta:{id:"issueSelectFetchFailure",packageName:"jiraIssueView"},error:e,attributes:oe({},null!=c?c:{})}),this.setState({hasLastFetchFailed:!0}),[{items:[{content:this.getFailedFetchMessage(),value:"",isDisabled:!0}]}])))})).subscribe((e=>{this.setState({options:this.transformToOptions(e),isLoading:!1}),n&&n({isInitial:null===this.query})})),null!==(t=this.props.initialData)&&void 0!==t&&t.data){const{data:e,loading:t,error:s}=this.props.initialData
;this.state={options:this.transformToOptions(e),isLoading:t,hasLastFetchFailed:s}}else this.state={options:[],isLoading:!0,hasLastFetchFailed:!1}}componentDidUpdate(e){var t,s;if(null!==(t=this.props.initialData)&&void 0!==t&&t.data&&null!==(s=e.initialData)&&void 0!==s&&s.data){const{loading:t,error:s,data:n}=this.props.initialData;t===e.initialData.loading&&s===e.initialData.error||this.setState({options:this.transformToOptions(n),isLoading:t,hasLastFetchFailed:s})}}componentWillUnmount(){this.subscription.unsubscribe()}getSelectedValue(){const{value:e}=this.props;return e?Array.isArray(e)?e.map(de):de(e):null}render(){const{errorMessagePosition:e}=this.props,t=[this.renderSelectField()];return"top"===e?t.unshift(this.renderErrorMessage()):t.push(this.renderErrorMessage()),a.a.createElement(a.a.Fragment,null,t)}}pe.displayName="SelectFieldView",pe.displayName="SelectFieldView",pe.defaultProps={isMulti:!1,canCreateNewItem:!1,value:null,placeholder:void 0,autoFocus:!1,
debounceFetchSuggestionsTime:0,filterOption:le.filterOption,errorMessagePosition:"top",optionValuesSafeForAnalytics:!1,onChangeMulti:c.a,onChange:c.a,onInputChange:c.a};t.a=Object(i.injectIntl)(pe)},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return d})),s.d(t,"g",(function(){return m})),s.d(t,"e",(function(){return f})),s.d(t,"b",(function(){return b})),s.d(t,"d",(function(){return g})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return y}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d={multiValue:e=>c(c({},e),{},{backgroundColor:a.a.N20}),option:(e,t)=>c(c(c(c({},e),Object(i.c)(t)),{},{cursor:"pointer"},t.isFocused&&!t.isSelected?{backgroundColor:a.a.N20}:{}),{},{"&:hover":c(c({},t.isSelected?{}:{backgroundColor:a.a.N20}),t.isDisabled?{backgroundColor:"transparent",cursor:"not-allowed"}:{})}),menu:e=>c(c({},e),{},{zIndex:r.f.modal}),menuPortal:e=>c(c({},e),{},{
transform:"translateZ(0)",zIndex:r.f.modal})},u=r.e/4+"px",p=r.e/2+"px",m={indicatorsContainer:e=>c(c({},e),{},{paddingRight:r.e/2+"px"}),loadingIndicator:e=>c(c({},e),{},{paddingLeft:u,paddingRight:p}),clearIndicator:e=>c(c({},e),{},{paddingLeft:u,paddingRight:p}),dropdownIndicator:e=>c(c({},e),{},{display:"none"})},f=n.default.span.withConfig({componentId:"m9v9eg-0"})`display:flex;align-items:center;`,b=Object(n.default)(f).withConfig({componentId:"m9v9eg-1"})`justify-content:center;`,g=n.default.span.withConfig({componentId:"m9v9eg-2"})`display:flex;padding-right:${r.e}px;`,h=n.default.span.withConfig({componentId:"m9v9eg-3"})`display:flex;`,y=n.default.div.withConfig({componentId:"m9v9eg-4"})`${e=>"top"===e.errorMessagePosition?`margin-bottom: ${.75*r.e}px;`:""};&&& > div{min-height:auto;}`},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return i}));const i=(e,...t)=>{const s=e||{};if(0===t.length)return s;const i=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},s);return t.forEach((e=>{e&&Object.keys(e).forEach((t=>{const s=i[t],n=e[t];i[t]=s?(e,...t)=>n(s(e,...t),...t):n}))})),i}},"./src/packages/issue/issue-view/src/views/field/single-line-text/single-line-text-field-view.js":function(e,t,s){
"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/field-text/dist/esm/FieldTextStateless.js");const r=(e,t)=>{const{type:s="text",value:n="",placeholder:r="",invalidMessage:o,onChange:c,compact:l=!1}=e;return a.a.createElement(i.a,{type:s,value:n,placeholder:r,onChange:c,isInvalid:!!o,invalidMessage:o,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",ref:t,compact:l})};r.displayName="SingleLineTextField",r.displayName="SingleLineTextField",t.a=Object(n.forwardRef)(r)},"./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg":function(e,t,s){e.exports=s.p+"assets/default-avatar.b7f1021e538053b2b6f8108284f2ffc4.8.svg"},"./src/packages/issue/issue-view/src/views/field/user/assets/add.png":function(e,t,s){e.exports=s.p+"assets/add.cb4b04e861ca3b9ce2a2c8032dde1c45.8.png"},"./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div.withConfig({componentId:"sc-1vwcf62-0"})`position:absolute;right:0;top:0;width:${e=>e.show?e.width:0}px;${e=>null!=e.height?`height: ${e.height}px`:""};transition:${e=>e.show?"width 0.5s cubic-bezier(0.15, 1, 0.3, 1)":"width 0.5s cubic-bezier(0.15, 1, 0.3, 1), opacity 0, 0.5s, visibility 0, 0.5s"};overflow:hidden;opacity:${e=>e.show?1:0};visibility:${e=>e.show?"visible":"hidden"};`,o=Object(n.forwardRef)(((e,t)=>a.a.createElement(r,i({innerRef:t},e),e.children)));t.a=o},"./src/packages/issue/issue-view/src/views/issue-base/context/approval/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return ee})),s.d(t,"b",(function(){
return te}));var n=s("./node_modules/react-redux/es/index.js");s("./src/packages/issue/issue-view/src/common/constants/flags.js");var a=s("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),i=s("./node_modules/react/index.js"),r=s.n(i),o=s("./src/packages/platform/ui/flags/src/services/index.js"),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),d=s("./src/packages/issue/issue-view-layout/src/services/main.js"),u=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),p=s("./src/packages/servicedesk/approval-panel/src/async.js"),m=s("./src/packages/issue/issue-view/src/common/util/get-element/index.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const b=()=>Object(f.b)("jsd.reylo-426.team.approvals.master.switch",!1),g=()=>Object(f.b)("reylo-1107-allow-n-per-group-approval-configuration",!1)
;var h=s("./node_modules/react-intl/lib/index.es.js"),y=Object(h.defineMessages)({removeApproverError:{id:"issue-field-approval-panel.approval-glance.remove-approver-error",defaultMessage:"We couldn\u2019t remove the approver"},addApproverError:{id:"issue-field-approval-panel.approval-glance.add-approver-error",defaultMessage:"We couldn\u2019t add the approver"},saveSuccess:{id:"issue-field-approval-panel.approval-panel.save-success",defaultMessage:"We've saved your response."},saveError:{id:"issue-field-approval-panel.approval-panel.save-error",defaultMessage:"We couldn\u2019t save your approval response"}
}),O=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),j=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),v=s("./node_modules/lodash/every.js"),E=s.n(v),w=s("./node_modules/lodash/fp/get.js"),k=s.n(w),C=s("./node_modules/lodash/unionBy.js"),S=s.n(C),I=s("./src/packages/servicedesk/approval-panel/src/common/utils.js"),T=s("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),_=s.n(T);function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const A=(e,t,s)=>(e=>void 0===e)(k()(t,s))?e:k()(t,s),M=(e,t,s)=>t.filter((t=>s.some((s=>e(t)===e(s))))),L=(e,t,s)=>t.filter((t=>!s.some((s=>e(t)===e(s))))),R=e=>{if(void 0===e.accountId||void 0===e.displayName)return null;const{accountId:t,displayName:s}=e;return x(x({},e),{},{accountId:t,displayName:s})},N=e=>Object(I.f)(e).flatMap((e=>"group"===e.type?[e]:[])),F=({key:e,accountId:t,displayName:s,avatarUrls:n})=>({approver:{accountId:t,key:e,displayName:s,isFromLinkedField:!0,avatarUrl:A(_.a,"24x24",n)}}),U=({approver:{key:e,accountId:t,displayName:s},approverDecision:n})=>({approver:{accountId:t,key:e,displayName:s},approverDecision:n}),V=(e,t)=>{const s=E()(t,(e=>e.approver.accountId));return((e,t)=>{const s=e.map((e=>e.approver.accountId))
;return t.map((e=>s.includes(e.approver.accountId)?{approverDecision:e.approverDecision,approver:x(x({},e.approver),{},{isFromLinkedField:!0})}:e))})(t,S()(e,t,(e=>s?e.approver.accountId:null)))},K=(e,t)=>{if(t&&t.value){const s=+t.value;if("number"===t.type)return s;if("percent"===t.type)return Math.ceil(e*(s/100))}return e},$=({name:e})=>({name:e,type:"group",meta:{memberCount:NaN,approvedCount:NaN},id:void 0}),W=(e,t)=>{const s=e||[];return[...M(k()("name"),s,t),...L(k()("name"),t,s).map($)]},B=(e,t,s,n)=>"multi_group_picker"!==e.configuration.approvers.type?((e,t,s,n)=>{const a=(t?e.approvers.filter((e=>"pending"!==e.approverDecision)):e.approvers).map(U),i=t&&!Array.isArray(t)?[t]:t,r=(null!=i?i:[]).map(F),o=V(a,r),c=k()(["configuration","condition"],e),l=K(o.length,c),d="com.atlassian.jira.plugin.system.customfieldtypes:userpicker"===n,{id:u,name:p,finalDecision:m,canAnswerApproval:f,decisions:b,approverPrincipals:h}=e;return{id:u,name:p,finalDecision:m,approvers:o,
minApprovalsRequired:l,canAnswerApproval:f,linkedFieldName:s,isSingleUserPicker:d,decisions:(b||[]).map(U),approverPrincipals:h,configuration:e.configuration,pendingApprovalCount:g()?e.pendingApprovalCount:void 0}})(e,(e=>null==e?[]:Array.isArray(e)?e.map(R).filter(Boolean):[e])(t),s,n):(({id:e,name:t,finalDecision:s,approvers:n,configuration:a,canAnswerApproval:i,decisions:r,approverPrincipals:o,pendingApprovalCount:c},l,d)=>({id:e,name:t,finalDecision:s,approvers:n.map(U),minApprovalsRequired:K(n.length,a.condition),canAnswerApproval:i,linkedFieldName:d,isSingleUserPicker:!1,decisions:(r||[]).map(U),approverPrincipals:W(N(o),l),pendingApprovalCount:g()?c:void 0,configuration:a}))(e,(e=>Array.isArray(e)?e.flatMap((e=>"string"==typeof e.name&&void 0===e.accountId?[{name:e.name}]:[])):[])(t),s);var H=({issueKey:e,approvalFieldId:t="servicedesk-approvals"})=>{var s;const[{value:n},{saveValue:a}]=Object(O.a)({fieldKey:t,issueKey:e,fieldType:"servicedesk-approvals",initialValue:null
}),i=null==n?void 0:n.activeApproval,r=i?i.configuration:null,o=null!==(s=null==r?void 0:r.approvers.customFieldId)&&void 0!==s?s:"",[{value:c}]=Object(j.a)(e,o),{isEditable:l,title:d,autoCompleteUrl:u,schema:p}=c||{},{custom:m}=p||{},[{value:f},{saveValue:b}]=Object(O.a)({fieldKey:o,fieldType:o,issueKey:e,initialValue:null});return{approval:((e,t,s,n)=>e&&null!=n?B(e,t,s,n):null)(i,f,d,m),isEditable:l,saveApprovers:a,saveLinkedFieldValue:b,linkedFieldId:o,autoCompleteUrl:u}};function G(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function q(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?G(Object(s),!0).forEach((function(t){z(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function z(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Y=s("./src/packages/issue/project-context-service/src/main.js"),Q=s("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js");function J(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Z(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const X=(e,t)=>!!(e&&t&&e.approvers&&e.approvers.length)&&e.approvers.some((e=>e.approver.accountId===t&&(!e.approverDecision||"pending"===e.approverDecision)));const ee=Object(n.connect)(null,{renderApproverList:a.g,updateApprovalLinkedUserPickerField:(e,t)=>({
type:"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD",payload:{linkedUserPickerFieldId:e,newApproverList:t}})})((e=>{const{showFlag:t}=Object(o.f)(),s=Object(c.g)(),n=Object(m.a)()||document.body,[,{setIssueViewLayoutContextPanel:a}]=Object(d.a)(),f=e.payload&&e.payload.approvalFieldId||"servicedesk-approvals",g=Object(i.useCallback)((()=>{a(s,void 0)}),[s,a]),h=Object(i.useCallback)((()=>{t({type:"error",title:y.addApproverError})}),[t]),O=Object(i.useCallback)((()=>{t({type:"error",title:y.removeApproverError})}),[t]),{approval:j,linkedFieldId:v,saveLinkedFieldValue:E,autoCompleteUrl:w,isEditable:k}=H({issueKey:s,approvalFieldId:f}),{createAnalyticsEvent:C}=Object(u.a)(),[S]=Object(l.b)({issueKey:s,fieldKey:"status"}),I=q(q({},e),{},{fieldId:v,fieldMetaKey:v,approvalFieldId:f,approval:j,baseUrl:"",issueKey:s,fieldAutoCompleteUrl:w,hasLinkedFieldEditPermissions:k,issueStatusId:S.id,portalElement:n,onRemoveApproverError:O,onAddApproverError:h,onHidePanel:g,
renderApproverList:e.renderApproverList,onApproverListUpdated:b()?t=>{const s="multi_group_picker"===(null==j?void 0:j.configuration.approvers.type)?(e=>null==e?[]:(Array.isArray(e)?e:[e]).flatMap((e=>"group"===e.type&&"string"==typeof e.name?[{name:e.name}]:[])))(t):(e=>null==e?null:Array.isArray(e)?e.flatMap((e=>"group"===e.type?[]:[e])):e)(t);E(s,null,C({approverSourceFieldType:null==j?void 0:j.configuration.approvers.type})),e.updateApprovalLinkedUserPickerField(v,t)}:t=>{E(t,null,C({})),e.updateApprovalLinkedUserPickerField(v,t)}});return r.a.createElement(p.a,I)})),te=Object(n.connect)(null,{setRefreshIssue:a.g})((e=>{const{setRefreshIssue:t}=e,s=Object(c.g)(),n=Object(c.f)(),a=Object(c.i)(),{showFlag:l}=Object(o.f)(),u=Object(Q.a)(),m=e.payload&&e.payload.approvalFieldId||"servicedesk-approvals",[,{setIssueViewLayoutContextPanel:f}]=Object(d.a)(),b=Object(i.useCallback)((()=>{t(),l({type:"success",title:y.saveSuccess})}),[l,t]),g=Object(i.useCallback)((()=>{l({type:"error",
title:y.saveError})}),[l]),h=Object(Y.c)(a),{approval:O,isEditable:j}=H({issueKey:s,approvalFieldId:m}),v=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?J(Object(s),!0).forEach((function(t){Z(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):J(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({approval:O,baseUrl:"",fieldId:m,isSimplified:(null==h?void 0:h.isSimplified)||!1,hasLinkedFieldEditPermissions:j,canCurrentUserApprove:X(O,u),onOpenPanel:(e,t)=>{f(s,{key:"approval-panel",type:"approval-panel",title:t,payload:{approvalFieldId:e}})},issueId:n,onSaveApprovalAnswerSuccess:b,onSaveApprovalAnswerError:g,onZeroApprovalRequired:t},e);return r.a.createElement(p.b,v)}))},"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),
s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return l}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js").c,o=n.default.div.withConfig({componentId:"anythr-0"})`width:inherit;height:inherit;opacity:1;background-color:${a.a.N0};display:flex;flex-direction:column;position:fixed;overflow:hidden;${({top:e})=>null!=e&&`top: ${e}px;`};`,c=n.default.div.withConfig({componentId:"anythr-1"})`display:flex;flex-direction:column;height:100%;padding-left:${r}px;`,l=n.default.div.withConfig({componentId:"anythr-2"})`white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;height:30px;margin:${i.e}px ${i.e}px 0;`},
"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),l=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js"),d=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),u=s("./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js");class m extends n.Component{constructor(t){super(t),this.state={styles:{panelWidth:0,headerWidth:0,contentWidth:0,
contextWidth:0,panelTop:0,panelHeight:0}},this.refFixedPanel=void 0,this.refPanelPositioner=void 0,this.scrollContainerCached=null,this.scrollContainerResizeObserver=e&&e.ResizeObserver?new window.ResizeObserver((()=>{requestAnimationFrame((()=>{this.updateSidePanelStyles()}))})):null,this.getMemoizedStyles=Object(i.a)(((e,t,s,n,a,i)=>({panelWidth:e,panelTop:t,panelHeight:s,headerWidth:n,contentWidth:a,contextWidth:i}))),this.currentPosition={panelWidth:void 0,headerWidth:void 0,contentWidth:void 0,contextWidth:void 0,panelTop:void 0,panelHeight:void 0},this.updateSidePanelStyles=()=>{if(!this.props||!this.props.isOpen)return;const{refs:e}=this.props,t=document.getElementById("jira-issue-header-actions"),s=e.refPanelColumnElement,n=s&&getComputedStyle(s),a=(e=>e.refVisibilityContainer?e.refVisibilityContainer.offsetWidth:void 0)(e),i=((e,t)=>{const s=e.refPanelColumnElement;if(s&&t)return s.offsetWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)
})(e,n),r=((e,t)=>e?e.offsetWidth:t||0+p.d)(t,i),o=this.calculateSidePanelPosition(),c=((e,t)=>{const s=e.refSidePanelContainerElement;return s&&s instanceof HTMLElement?s.offsetWidth+p.d-(t?parseFloat(t.paddingLeft):0):0})(e,n),l=o&&o.panelTop?o.panelTop:void 0,d=o&&o.panelHeight?o.panelHeight:void 0,u=this.getMemoizedStyles(c,l,d,r,i,a);u!==this.state.styles&&(this.setState({styles:u}),this.setSidePanelPosition(o))},this.getGlanceOffsetTop=e=>{if(!e)return;const t=e.getBoundingClientRect().top;let s=4;const n=document.getElementById("jira-issue-header-actions")||document.getElementById("jira-issue-header");if(n&&e.contains(n)){const e=this.props.refs.refLayoutContainer,a=e?e.getBoundingClientRect().top:0,i=n.getBoundingClientRect();s=(i&&i.bottom<0?a+i.height:i.bottom)+4-t}return s=Math.max(s,4),s},this.setSidePanelPosition=e=>{if(!e)return;const{panelTop:t,panelHeight:s}=e;this.currentPosition.panelTop!==t&&this.refFixedPanel.current&&(this.currentPosition.panelTop=t,
this.refFixedPanel.current.style.top=null!=t?`${t}px`:""),this.currentPosition.panelHeight!==s&&this.refPanelPositioner.current&&(this.currentPosition.panelHeight=s,this.refPanelPositioner.current.style.height=null!=s?`${s}px`:"")},this.calculateSidePanelPosition=()=>{const e=this.getScrollContainer(),t=Object(l.a)(e);if(null===e||null===t)return;const s=Math.min(window.innerHeight,t||0),n=this.getGlanceOffsetTop(e)||0,a=n+e.getBoundingClientRect().top,i=Math.max(s-a,s-n);return i<=0&&c.h.safeErrorWithoutCustomerData("issue.views.issue-base.context.side-panel",`panel height is <= 0: panelHeight='${i}`,new r.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),{panelTop:a,panelHeight:i<0?void 0:i}},this.updateSidePanelPosition=()=>{this.props.isOpen&&requestAnimationFrame((()=>{const e=this.calculateSidePanelPosition();this.setSidePanelPosition(e)}))},this.refPanelPositioner=Object(n.createRef)(),this.refFixedPanel=Object(n.createRef)()}componentDidMount(){
this.updateSidePanelStyles(),this.attachSidePanelListeners(),this.props&&this.props.refs&&this.scrollContainerResizeObserver&&(this.props.refs.refLayoutContainer&&this.scrollContainerResizeObserver.observe(this.props.refs.refLayoutContainer),this.props.refs.refPanelColumnElement&&this.scrollContainerResizeObserver.observe(this.props.refs.refPanelColumnElement))}componentDidUpdate(e){if(this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.updateSidePanelStyles(),this.scrollContainerResizeObserver){const{refs:{refPanelColumnElement:t,refLayoutContainer:s}}=this.props,{refs:{refPanelColumnElement:n,refLayoutContainer:a}}=e;t&&this.scrollContainerResizeObserver.observe(t),s&&this.scrollContainerResizeObserver.observe(s),t===n&&s===a||(n&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(n),a&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(a),this.detachSidePanelListeners(),this.updateSidePanelPosition(),
this.attachSidePanelListeners())}}componentWillUnmount(){this.detachSidePanelListeners(),this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.disconnect()}getScrollContainer(){return this.props.refs.refSidePanelContainerElement?this.props.refs.refSidePanelContainerElement:(this.scrollContainerCached||(this.scrollContainerCached=Object(d.a)(this.refPanelPositioner.current,!1)),this.scrollContainerCached)}attachSidePanelListeners(){const e=this.getScrollContainer();e&&(e===document.body?document.addEventListener("scroll",this.updateSidePanelPosition):e.addEventListener("scroll",this.updateSidePanelPosition))}detachSidePanelListeners(){const e=this.getScrollContainer();e&&e.removeEventListener("scroll",this.updateSidePanelPosition)}render(){const{isOpen:e,children:t}=this.props,{styles:s}=this.state,n=s.panelWidth?s.panelWidth:(s.contextWidth||0)+o.e;return a.a.createElement(u.a,{ref:this.refPanelPositioner,width:n,show:e},a.a.createElement(p.a,{
innerRef:this.refFixedPanel},a.a.createElement(p.b,null,t(s))))}}m.displayName="SidePanel",m.displayName="SidePanel"}).call(this,s("./node_modules/webpack/buildin/global.js"))},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return Hn}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),l=s("./src/packages/issue/issue-context-service/src/types.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),m=s("./node_modules/react-intl/lib/index.es.js"),f=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),b=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),g=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/parent-issue-selector.js"),h=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),y=s("./node_modules/reselect/lib/index.js"),O=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),j=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js")
;const v=[O.a.FULL_ISSUE,O.a.SERVICEDESK_QUEUES_ISSUE,O.a.SERVICEDESK_REPORTS_ISSUE],E=Object(y.createSelector)(d.b,u.u,j.a,((e,t,s)=>!!e&&(v.includes(e.value)&&!t)&&!s)),w=Object(y.createSelector)(E,(e=>e));var k=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),C=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),S=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");const I=Object(y.createSelector)(k.c,k.b,((e,t)=>e||t)),T=Object(y.createSelector)(u.u,I,((e,t)=>t&&e)),_=Object(y.createSelector)(u.i,d.r,((e,t)=>!e&&!t)),P=(Object(y.createSelector)(S.c,S.b,C.b,u.m,((e,t,s,n)=>!e&&!t&&s&&n)),Object(y.createSelector)(S.c,u.m,((e,t)=>e&&t)),Object(y.createSelector)(u.t,h.c,((e,t)=>e||t)));var x=s("./node_modules/query-string/index.js"),D=s.n(x),A=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js")),M=s("./src/packages/platform/ui/error-boundary/src/index.js"),L=s("./node_modules/@atlaskit/popup/dist/es2019/index.js"),R=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),N=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),F=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),U=s("./node_modules/@atlaskit/menu/dist/es2019/menu-section/popup-menu-group.js"),V=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),K=s("./node_modules/@atlaskit/menu/dist/es2019/menu-section/section.js"),$=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const W=V.default.div.withConfig({componentId:"sc-17jmg7d-0"})`border-top:1px solid ${$.a.N30};`,B=Object(V.default)(K.a).withConfig({componentId:"sc-17jmg7d-1"
})`[data-ds--menu--heading-item='true']{padding:0 12px;margin:7px 0;}`,H=({dropdownGroupData:{items:e,name:t},isFirst:s,onClick:n})=>{const i=t&&t.length>0?t:void 0,r=a.a.createElement(U.a,{minWidth:0},a.a.createElement(B,{title:i},e.map(((e,t)=>a.a.createElement("div",{key:t,onClick:n},e)))));return s?r:a.a.createElement(W,null,r)};H.displayName="DropdownGroup";var G=H,q=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),z=s("./node_modules/@atlaskit/icon/glyph/more.js"),Y=s.n(z),Q=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),J=s("./src/packages/platform/controllers/intl/src/index.js"),Z=Object(m.defineMessages)({actions:{id:"issue-meatball-menu.dropdown-trigger.actions",defaultMessage:"Actions"}});const X=["buttonStyles"];function ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function te(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(s),!0).forEach((function(t){se(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ee(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function se(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ne(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ae=V.keyframes`to{box-shadow:0 0 0 10px transparent;}`,ie=(e,t)=>{const s=e(t),{buttonStyles:n}=s
;return te(te({},ne(s,X)),{},{buttonStyles:te(te({},n),{},{borderRadius:"4px",animation:`${ae} 1.45s 3 cubic-bezier(0.66, 0, 0, 1)`,animationDelay:"0.5s",boxShadow:`0 0 0 0 ${$.a.P300}`})})},re=({isOpen:e,isDisabled:t,isLoading:s,hasPulse:n,onClick:i})=>{const{formatMessage:r}=Object(J.c)(),o=r(Z.actions);return a.a.createElement(Q.a,{content:o,position:"top"},a.a.createElement(q.a,{testId:"issue-meatball-menu.ui.dropdown-trigger.button","aria-label":o,"aria-expanded":e,isDisabled:t,isLoading:s,appearance:"subtle",spacing:"default",iconBefore:a.a.createElement(Y.a,{label:"",size:"medium"}),theme:n?ie:void 0,isSelected:e,onClick:i}))};re.displayName="DropdownTrigger",re.defaultProps={hasPulse:!1,isDisabled:!1};var oe=re;const ce=V.default.div.withConfig({componentId:"sc-1rp4dqf-0"
})`min-width:150px;max-height:95vh;padding:4px 0px;&&{[role='menuitem']{padding:8px 12px 7px;}[class*='GroupTitle']{padding:8px 12px;> div[class*='GroupTitleText']{padding:0;}}}`,le=({meatballMenuData:e,hasPulse:t,isDisabled:s,isLoading:i})=>{const[r,o]=Object(n.useState)(!1),{createAnalyticsEvent:c}=Object(N.a)(),l=Object(n.useCallback)((()=>{o(!0);const e=c({action:"click",actionSubject:"dropdownItem"});Object(F.h)(e,"issueActionsOpenChanged")}),[c]),d=Object(n.useCallback)((()=>{o(!1);const e=c({action:"click",actionSubject:"dropdownItem"});Object(F.h)(e,"issueActionsOpenChanged")}),[c]);return a.a.createElement(L.a,{boundary:"clippingParents",isOpen:r,placement:"auto-end",trigger:e=>a.a.createElement("div",e,a.a.createElement(oe,{isOpen:r,hasPulse:!0===t,isDisabled:s,isLoading:i,onClick:r?d:l})),onClose:d,content:()=>a.a.createElement(ce,null,e.filter((({items:e})=>e.length>0)).map(((e,t)=>a.a.createElement(G,{key:e.key,dropdownGroupData:e,isFirst:0===t,onClick:d})))),
zIndex:R.f.modal})};le.displayName="MeatballMenu",le.defaultProps={hasPulse:!1,isDisabled:!1,isLoading:!1};var de=le,ue=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/add-to-issue-dropdown-group/main.js"),pe=s("./src/packages/issue/issue-context-service/src/main.js"),me=s("./src/packages/issue/project-context-service/src/main.js"),fe=s("./src/packages/platform/controllers/tenant-context/src/components/is-admin/index.js"),be=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),ge=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),he=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const ye=Object(ge.a)({name:"issue-view.issue-actions.find-field",initialState:{isOpen:!1},actions:{openFindFieldDialog:()=>({setState:e})=>{e({isOpen:!0})},closeFindFieldDialog:()=>({setState:e})=>{e({isOpen:!1})}}}),Oe=Object(he.a)(ye),je=({label:e,itemKey:t,onClick:s})=>{
const[,{openFindFieldDialog:i}]=Oe(),r=Object(n.useCallback)((()=>{i(),null==s||s(t)}),[t,s,i]);return a.a.createElement(be.a,{key:"findFieldDropdownItem",onClick:r},e)};je.displayName="FindField";var ve=je,Ee=Object(m.defineMessages)({findField:{id:"issue.adminActionDropdown.findField",defaultMessage:"Find your field"}});const we=(e,t)=>({name:"",key:"AdminActionsDropdownGroup",items:e.reduce(((e,{Component:s,label:n,key:i})=>(s&&e.push(a.a.createElement(s,{label:n,key:i,itemKey:i,onClick:t})),e)),[])});var ke=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),Ce=s("./node_modules/react-async-component/commonjs/index.js"),Se=s("./src/packages/platform/ui/modal/src/index.js");Object(Ce.asyncComponent)({resolve:()=>s.e("async-jira-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/ui/main.js")),name:"AsyncCloneIssueDialog"});const Ie=({children:e,packageName:t})=>a.a.createElement(Se.a,{id:"clone-issue-dialog",packageName:t},e)
;Ie.displayName="CloneIssueDialogBoundary";var Te=s("./src/packages/issue/issue-view/src/actions/clone-modal-actions.js"),_e=s("./node_modules/lodash/isEmpty.js"),Pe=s.n(_e),xe=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const De=Object(xe.q)("children-issues"),Ae=Object(y.createSelector)(De,(e=>!!e&&!Pe()(e.value))),Me=Object(y.createSelector)(u.H,(e=>e.cloneModal)),Le=Object(y.createSelector)(Me,(e=>e.isOpen));var Re=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),Ne=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),Fe=s("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const Ue=Object(ke.h)((()=>s.e("async-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/index.js"))),{moduleId:"./src/packages/issue/clone-issue-dialog/src/index.js"});var Ve,Ke,$e,We=Object(i.connect)((e=>{
const t=Object(Ne.d)(e),s=Object(Fe.g)(e).length>0,n=Object(Re.g)(e)>0;return{isOpen:Le(e),shouldAskChildren:Ae(e),shouldAskSubtasks:Object(S.b)(e),shouldAskLinks:t||s||n,shouldShowReporterWarning:!Object(k.e)(e)}}),(e=>({hideModal:()=>e(Object(Te.a)())})))((({isOpen:e,hideModal:t,shouldAskChildren:s,shouldAskSubtasks:n,shouldAskLinks:i,shouldShowReporterWarning:r})=>e?a.a.createElement(Ie,{packageName:"issue"},a.a.createElement(Ue,{shouldAskChildren:s,shouldAskSubtasks:n,shouldAskLinks:i,shouldShowReporterWarning:r,onClose:t
})):null)),Be=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),He=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),Ge=s("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),qe=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),ze=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),Ye=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),Qe=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),Je=Object(m.defineMessages)({delete:{id:"issue.delete.confirm",defaultMessage:"Delete"},deleteHeading:{id:"issue.delete-heading",defaultMessage:"Delete {issueKey}?"},deleteWithSubtasksHeading:{id:"issue.delete-with-subtasks-heading",defaultMessage:"Delete {issueKey} and its subtasks?"},deleteWithChildrenHeading:{
id:"issue.delete-with-children-heading",defaultMessage:"Delete {issueKey} and its child issues?"},cancel:{id:"issue.delete.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.delete-warning",defaultMessage:"You're about to permanently delete this issue, its comments and attachments, and all of its data."},deleteWithSubtasksWarning:{id:"issue.delete-with-subtasks-warning",defaultMessage:"You're about to permanently delete this issue and all its subtasks, its comments and attachments, and all of its data. You should move any subtasks you don't want to delete to another parent issue."},deleteWithChildrenWarning:{id:"issue.delete-with-children-warning",defaultMessage:"You're about to permanently delete this issue and all its child issues, its comments and attachments, and all of its data. You should move any child issues you don't want to delete to another parent issue."},deleteRecommendation:{id:"issue.delete-recommendation",
defaultMessage:"If you're not sure, you can resolve or close this issue instead."}});function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let Xe=Object(Be.a)("issueDelete",He.a.MODAL)(($e=Ke=class extends n.Component{constructor(...e){super(...e),this.onConfirmDeleteIssue=(e,t)=>{this.props.deleteConfirmAnalytics(t),this.props.triggerDeleteRequest(this.props.issueKey,t)},this.onCancel=(e,t)=>{this.props.deleteCancelAnalytics(t),this.props.triggerCloseDeleteIssueModal()},this.getChildConditionalDeleteHeading=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?Je.deleteWithChildrenHeading:Je.deleteWithSubtasksHeading:Je.deleteHeading,
this.getChildConditionalDeleteWarning=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?Je.deleteWithChildrenWarning:Je.deleteWithSubtasksWarning:Je.deleteWarning}UNSAFE_componentWillReceiveProps(e){!e.isDeletingIssue&&this.props.isDeletingIssue&&(e.didIssueDeleteFail?this.props.onIssueDeleteFailure({issueId:this.props.issueId,issueKey:this.props.issueKey}):(this.props.triggerCloseDeleteIssueModal(),this.props.onIssueDeleteSuccess({issueId:this.props.issueId,issueKey:this.props.issueKey}),this.props.onClose()))}render(){const{issueKey:e,isDeletingIssue:t,intl:{formatMessage:s}}=this.props;return this.props.isDeleteIssueModalOpen&&a.a.createElement(ze.b,{headerMessage:a.a.createElement(m.FormattedMessage,Ze({},this.getChildConditionalDeleteHeading(),{values:{issueKey:e}})),appearance:"danger",contentMessage:a.a.createElement("span",null,a.a.createElement("p",null,s(this.getChildConditionalDeleteWarning())),a.a.createElement("p",null,s(Je.deleteRecommendation))),
confirmActionText:s(Je.delete),cancelActionText:s(Je.cancel),onConfirm:this.onConfirmDeleteIssue,onCancel:this.onCancel,externalId:"issue.action.delete-confirmation-dialog",isLoading:t,isConfirmDisabled:t,isCancelDisabled:t},a.a.createElement(Ge.a,null))}},Ke.displayName="DeleteIssueView",Ke.defaultProps={onIssueDeleteSuccess:o.a,onIssueDeleteFailure:o.a},Ve=$e))||Ve;var et=Object(p.a)([m.injectIntl,Object(i.connect)((e=>{const t=Object(u.u)(e)?Object(Qe.c)(e)&&Ae(e):Object(S.b)(e);return{issueId:Object(u.l)(e),issueKey:Object(d.x)(e),isDeletingIssue:Object(u.p)(e),isDeleteIssueModalOpen:Object(u.o)(e),didIssueDeleteFail:Object(u.c)(e),isSimplifiedProject:Object(u.u)(e),shouldShowChildSpecificCopy:t}}),(e=>({triggerCloseDeleteIssueModal:()=>{e(Object(Ye.a)())},triggerDeleteRequest:(t,s)=>{e(Object(Ye.c)(t,s))}}))),Object(qe.a)({deleteCancelAnalytics:"deleteIssueCancel",deleteConfirmAnalytics:"deleteIssueDelete"
})])(Xe),tt=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-action/index.js"),st=s("./src/packages/forge/forge-ui-async/src/ui/issue-action/async.js"),nt=s("./src/packages/issue/issue-view/src/actions/forge-actions.js");const at=V.default.div.withConfig({componentId:"hp7lu4-0"})`display:none;`,it=({extension:e,extensionData:t,onClose:s,onRendered:n,source:i})=>{if(!e)return null;return a.a.createElement(at,{onKeyDown:e=>{"Escape"!==e.key&&"Esc"!==e.key||(e.nativeEvent.stopImmediatePropagation(),s())}},a.a.createElement(st.a,{extension:e,extensionData:t,analyticsAttributes:{source:i},onClose:s,onInitialRender:n}))};it.displayName="ForgeActionRendererView";const rt=e=>a.a.createElement(tt.b,{attributes:{source:e.source}},a.a.createElement(it,e));rt.displayName="ForgeActionRendererViewWithAnalytics";const ot=Object(p.a)([Object(i.connect)((e=>{const t=Object(b.a)(e);return{extension:null!=t?t.action.extension:null,extensionData:Object(b.g)(e),source:Object(d.b)(e)}}),{
onClose:nt.b,onRendered:nt.d})])(rt);var ct=s("./src/packages/issue-create/find-field/src/async.js");var lt=()=>{const[{isOpen:e},{closeFindFieldDialog:t}]=Oe(),s=Object(pe.g)(),n=Object(pe.i)(),i=Object(me.e)(n),r=Object(me.a)(n),o=Object(me.i)(n);return e?a.a.createElement(ct.a,{project:{projectId:i,nextGenProject:r,projectType:o},issueKey:s,operation:"VIEW",onCancel:t}):null},dt=s("./src/packages/issue/jira-settings-service/src/main.js"),ut=s("./src/packages/issue/jira-settings-service/src/constants.js"),pt=s("./src/packages/issue/issue-view/src/feature-flags.js"),mt=Object(m.defineMessages)({findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more"}});const ft=({isServiceDeskProject:e})=>{const{formatMessage:t}=Object(J.c)(),{createAnalyticsEvent:s}=Object(N.a)(),i=Object(n.useCallback)((()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(e,"findOutMore")
}),[s]),r=e?"//support.atlassian.com/jira-service-desk-cloud/docs/changes-to-requests-in-the-new-issue-view/":"//confluence.atlassian.com/display/JIRACORECLOUD/The+new+Jira+issue+view";return a.a.createElement(be.a,{onClick:i,href:r,target:"_blank",key:"find-out-more"},t(mt.findOutMore))};ft.displayName="FindOutMore";var bt=ft,gt=Object(i.connect)((e=>({isServiceDeskProject:"service_desk"===Object(u.F)(e)})),{})(bt),ht=Object(m.defineMessages)({newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"}}),yt=s("./src/packages/common-legacy-do-not-add-anything-new/src/urls/old-issue-view-url.js"),Ot=Object(m.defineMessages)({seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"}});const jt=()=>{const{formatMessage:e}=Object(J.c)(),{createAnalyticsEvent:t}=Object(N.a)(),s=Object(n.useCallback)((()=>{const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(e,"oldViewClickthrough")}),[t]);return a.a.createElement(be.a,{onClick:s,
href:Object(yt.a)(),key:"old-view-clickthrough"},e(Ot.seeOldView))};jt.displayName="OldViewClickthrough";var vt=jt,Et=s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js"),wt=Object(m.defineMessages)({startTour:{id:"issue.start-changeboarding-tour",defaultMessage:"Take a tour"}});const kt=()=>{const{formatMessage:e}=Object(J.c)(),{createAnalyticsEvent:t}=Object(N.a)(),[,{setTourIsActive:s}]=Object(Et.a)(),i=Object(n.useCallback)((()=>{s();const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(e,"startChangeBoardingTour")}),[t,s]);return a.a.createElement(be.a,{onClick:i,key:"start-tour","data-test-id":"issue.views.issue-base.foundation.issue-actions.issue-actions-dropdown-group.start-tour"},e(wt.startTour))};kt.displayName="StartTour";var Ct=kt;var St=(e,t,s,n)=>{const[i]=Object(dt.b)(),r=void 0!==i&&i.newIssueViewTransitionLockingStatus===ut.a;return{name:Object(pt.isIssueViewMigrationPostMigrationEnabled)()&&r?"":e(ht.newIssueView),
key:"IssueActionsDropdownGroup",items:(()=>r?[...t?[a.a.createElement(Ct,{key:"startTour"})]:[],...s?[a.a.createElement(gt,{key:"findOutMore"})]:[],...!Object(pt.isIssueViewMigrationPostMigrationEnabled)()&&n?[a.a.createElement(vt,{key:"oldViewClickthrough"})]:[]]:[...t?[a.a.createElement(Ct,{key:"startTour"})]:[],...s?[a.a.createElement(gt,{key:"findOutMore"})]:[],...n?[a.a.createElement(vt,{key:"oldViewClickthrough"})]:[]])()}},It=s("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js"),Tt=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),_t=s("./src/packages/issue/project-permissions-service/src/main.js"),Pt=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-configuration-href.js"),xt=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-configuration-dropdown-group/configure-issue/messages.js");const Dt=()=>{
const{formatMessage:e}=Object(J.c)(),{createAnalyticsEvent:t}=Object(N.a)(),s=Object(n.useCallback)((()=>{const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(e,"configureIssue")}),[t]),i=Object(pe.g)(),[r]=Object(Tt.b)({issueKey:i,fieldKey:"com.atlassian.servicedesk:vp-origin"}),o=Object(pe.l)(),c=(null!=r||""===r)&&0===o,l=Object(Pt.a)(e),d=Object(pe.i)(),u=Object(me.i)(d),p=Object(me.a)(d),m=Object(_t.b)(d);return p&&m&&u?a.a.createElement(be.a,{onClick:s,href:l,key:"configure"},e(xt.a.configure)):a.a.createElement(be.a,{onClick:s,href:l,target:"_blank",isDisabled:c,key:"configure"},e(xt.a.configure))};Dt.displayName="ConfigureIssueFF";var At=Dt,Mt=Object(m.defineMessages)({switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"}});const Lt=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(J.c)(),{createAnalyticsEvent:i}=Object(N.a)(),r=Object(n.useCallback)((()=>{
!0===e.viewModeSwitchEnabled&&e.onSwitchToModal?e.onSwitchToModal():t("issue.details.view.switch-to-modal");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(s,"switchToModal")}),[i,t,e]);return a.a.createElement(be.a,{key:"switch-to-modal",onClick:r},s(Mt.switchToModal))};Lt.displayName="SwitchToModal",Lt.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var Rt=Lt,Nt=Object(m.defineMessages)({switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"}});const Ft=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(J.c)(),{createAnalyticsEvent:i}=Object(N.a)(),r=Object(n.useCallback)((()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToSidebar?e.onSwitchToSidebar():t("issue.details.view.switch-to-sidebar");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(s,"switchToSidebar")}),[i,t,e]);return a.a.createElement(be.a,{key:"switch-to-sidebar",onClick:r},s(Nt.switchToSidebar))}
;Ft.displayName="SwitchToSidebar",Ft.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var Ut=Ft;const Vt=e=>{const t=document.getElementById("ghx-issue-fragment");window.AJS&&window.AJS.$(t).trigger(e)};var Kt=(e,t,s,n)=>{const i=n?n.valueOf():null,r=s&&i===O.a.SOFTWARE_ISSUE||e.viewModeSwitchEnabled,o=!0===r&&Object(It.c)(e.viewMode),c=!0===r&&!Object(It.c)(e.viewMode);return{name:"",key:"issueConfigurationDropdownGroup",items:[...o?[a.a.createElement(Rt,{key:"switchToModal",emitEventToLegacyApp:Vt,viewModeOptions:e})]:[],...c?[a.a.createElement(Ut,{key:"switchToSidebar",emitEventToLegacyApp:Vt,viewModeOptions:e})]:[],...t?[a.a.createElement(At,{key:"configureClassic"})]:[]]}},$t=s("./src/packages/shortcuts-dialog/src/controllers/shortcuts-service/main.js"),Wt=Object(m.defineMessages)({dotDialog:{id:"issue.dot-dialog",defaultMessage:"Actions menu"}});const Bt=V.default.code.withConfig({componentId:"sc-5y4ag9-0"
})`background:${"#F4F5F7"};border-radius:3px;padding:2px 4px;`,Ht=()=>{const{formatMessage:e}=Object(J.c)(),{createAnalyticsEvent:t}=Object(N.a)(),[,{setShortcutsDialogVisibility:s}]=Object($t.b)(),i=Object(n.useCallback)((()=>{s(!0);const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(e,"dotDialog")}),[t,s]);return a.a.createElement(be.a,{key:"dotDialog",onClick:i,elemAfter:a.a.createElement(Bt,null,".")},e(Wt.dotDialog))};Ht.displayName="DotDialog";var Gt=Ht;var qt=e=>({name:"",key:"IssueDotMenuDropdownGroup",items:[...e?[a.a.createElement(Gt,{key:"dotDialog"})]:[]]}),zt=Object(m.defineMessages)({exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word"}});const Yt=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(J.c)(),{createAnalyticsEvent:i}=Object(N.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(e,"exportDoc")}),[i]),o=`${e}/si/jira.issueviews:issue-word/${t}/${t}.doc`
;return a.a.createElement(be.a,{key:"ExportDocIssueActionView",onClick:r,href:o,target:"_blank"},s(zt.exportDOC))};Yt.displayName="ExportIssueDoc";var Qt=Yt,Jt=Object(i.connect)((e=>({baseUrl:Object(d.f)(e),issueKey:Object(d.x)(e)})),{})(Qt),Zt=Object(m.defineMessages)({exportXML:{id:"issue.export-xml",defaultMessage:"Export XML"}});const Xt=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(J.c)(),{createAnalyticsEvent:i}=Object(N.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(e,"exportXml")}),[i]),o=`${e}/si/jira.issueviews:issue-xml/${t}/${t}.xml`;return a.a.createElement(be.a,{key:"ExportXmlIssueActionView",onClick:r,href:o,target:"_blank"},s(Zt.exportXML))};Xt.displayName="ExportIssueXML";var es=Xt,ts=Object(i.connect)((e=>({baseUrl:Object(d.f)(e),issueKey:Object(d.x)(e)})),{})(es),ss=Object(m.defineMessages)({print:{id:"issue.print",defaultMessage:"Print"}});const ns=({baseUrl:e,issueKey:t})=>{
const{formatMessage:s}=Object(J.c)(),{createAnalyticsEvent:i}=Object(N.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(F.h)(e,"printIssue")}),[i]),o=`${e}/si/jira.issueviews:issue-html/${t}/${t}.html`;return a.a.createElement(be.a,{key:"PrintIssueActionView",onClick:r,href:o,target:"_blank"},s(ss.print))};ns.displayName="PrintIssue";var as=ns,is=Object(i.connect)((e=>({baseUrl:Object(d.f)(e),issueKey:Object(d.x)(e)})),{})(as);var rs={name:"",key:"issueExportDropdownGroup",items:[a.a.createElement(is,{key:"printIssue"}),a.a.createElement(ts,{key:"exportIssueXML"}),a.a.createElement(Jt,{key:"exportIssueDoc"})]},os=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-manipulation-dropdown-group/main.js")
;const cs=({isLoading:e,isForgeLoading:t,shouldShowPulse:s,issueDeleteCallbacks:i,onClose:r,shouldShowActions:o,shouldShowConfiguration:l,isSoftwareProjectType:d,viewModeOptions:u,analyticsSource:p,intl:m,shouldShowStartTour:f,shouldShowFindOutMore:b,shouldShowOldViewClickthrough:g,ecosystemActions:h,hasParent:y})=>{const O=Object(ue.b)(h),j=Object(os.b)(y),v=(()=>{const e=Object(pe.i)(),t=Object(me.a)(e),{formatMessage:s}=Object(J.c)(),a=Object(fe.a)(),i=Object(n.useMemo)((()=>[...t?[]:[{Component:ve,label:s(Ee.findField),key:"findField"}]]),[s,t]);return a?i:[]})(),{createAnalyticsEvent:E}=Object(N.a)(),w=Object(n.useCallback)((e=>{const t=E({action:"clicked",actionSubject:"dropdownItem"}),s=e.split(" ").join("");Object(F.h)(t,s)}),[E]);if(!o)return null;if(e)return a.a.createElement(de,{isDisabled:!0,meatballMenuData:[]})
;const{jql:k,filter:C}=D.a.parse(window.location.search),S=null!=k||null!=C,I=[Object(ue.a)(O,w),Object(os.a)(j,w),we(v,w),qt(!S),rs,St(m.formatMessage,f,b,g),Kt(u||{viewModeSwitchEnabled:!1},l,d,p)];return a.a.createElement(M.b,null,a.a.createElement(A.a,null,a.a.createElement(c.a,{name:"BOARD_SIDEBAR"},a.a.createElement(de,{hasPulse:s,isLoading:t,meatballMenuData:I}),a.a.createElement(et,{onIssueDeleteSuccess:i.onIssueDeleteSuccess,onIssueDeleteFailure:i.onIssueDeleteFailure,onClose:r}),a.a.createElement(ot,null),a.a.createElement(We,null),a.a.createElement(lt,null))))};cs.displayName="IssueActionsMeatballMenu";var ls=cs;const ds=Object(m.injectIntl)(Object(i.connect)((e=>{var t;return{ecosystemActions:Object(f.j)(e),isLoading:!Object(u.n)(e),isForgeLoading:!(null===(t=Object(b.a)(e))||void 0===t||!t.isLoading),shouldShowPulse:Object(h.b)(e),hasParent:Object(g.a)(e),shouldShowActions:_(e),shouldShowStartTour:Object(h.d)(e),shouldShowFindOutMore:P(e),
shouldShowOldViewClickthrough:w(e),shouldShowConfiguration:!!T(e)&&!!Object(u.F)(e),isSoftwareProjectType:"software"===Object(u.F)(e),analyticsSource:Object(d.b)(e)}}),{})(ls)),us=e=>a.a.createElement(ds,{viewModeOptions:e.viewModeOptions,issueDeleteCallbacks:e.issueDeleteCallbacks,onClose:e.onClose});us.displayName="IssueActionsMenu";var ps=us,ms=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),fs=s("./node_modules/@atlaskit/icon/glyph/cross.js"),bs=s.n(fs);const gs=Object(m.defineMessages)({label:{id:"issue.label-for-modal-close-button",defaultMessage:"Close"}});class hs extends n.PureComponent{render(){const e=this.props.intl.formatMessage(gs.label),t=a.a.createElement(bs.a,{label:"",size:"medium"});return a.a.createElement("div",null,a.a.createElement(Q.a,{content:e,position:"top"},a.a.createElement(ms.a,{"aria-label":e,appearance:"subtle",spacing:"default",iconBefore:t,onClick:this.props.onClose})))}}hs.displayName="ModalActionsCloseButton"
;var ys=Object(m.injectIntl)(hs),Os=s("./src/packages/platform/utils/types/src/general.js"),js=s("./src/packages/project-settings/issue-restrictions/async.js"),vs=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js");const Es=Object(xe.q)("issuerestriction"),ws=Object(y.createSelector)(Es,(e=>e&&e.value&&e.value.issuerestrictions&&e.value.issuerestrictions.projectrole||[])),ks=Object(y.createSelector)(Es,(e=>e&&e.value&&e.value.shouldDisplay||!1));const Cs=s("./src/packages/project-settings/issue-restrictions/src/common/types.js").a,Ss=Object(p.a)([Object(i.connect)((e=>({currentIssueRestriction:ws(e),isIssueRestrictionDisplayForIssue:ks(e),hasError:!!Object(u.i)(e),projectKey:Object(u.D)(e),issueKey:Object(d.x)(e),edition:Object(vs.a)(e),isSubtask:Object(S.c)(e)})),{})])((({currentIssueRestriction:e,isIssueRestrictionDisplayForIssue:t,hasError:s,issueKey:n,projectKey:i,edition:r,isSubtask:o})=>!s&&t&&(!o||e.length>0)?a.a.createElement(js.a,{
entityKey:Object(Os.m)(n),currentRestrictions:e,restrictionType:Cs,projectKeyOrId:Object(Os.s)(i),edition:r,isSubtask:o}):null));var Is=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),Ts=s.n(Is),_s=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),Ps=s.n(_s),xs=s("./src/packages/issue/fields/security-level/src/common/ui/styled.js");const Ds=Object(V.default)(xs.a).withConfig({componentId:"bwl4ok-0"})`color:${$.a.N30};`,As=e=>{const{initialValue:t}=e,s=t?Ts.a:Ps.a;return a.a.createElement(ms.a,{appearance:"subtle",spacing:"default",isDisabled:!0,iconBefore:a.a.createElement(Ds,null,a.a.createElement(s,{label:""}))})};As.displayName="Loading";var Ms=s("./src/packages/platform/ui/error-boundary/src/main.js");const Ls=({children:e,fallback:t,packageName:s})=>a.a.createElement(Ms.a,{id:"issue-security-level-field",packageName:s,render:()=>t},a.a.createElement(ke.a,{fallback:t},e));Ls.displayName="IssueSecurityLevelFieldBoundary"
;var Rs=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),Ns=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js");const Fs=Object(ke.h)((()=>s.e("async-issue-field-security-level").then(s.bind(null,"./src/packages/issue/fields/security-level/src/index.js"))),{moduleId:"./src/packages/issue/fields/security-level/src/index.js"}),Us=Object(p.a)([Object(i.connect)((e=>({securityLevelItems:Object(Ns.a)(e),isSecurityLevelEnabledForIssue:Object(Ns.d)(e),isSecurityLevelEditable:Object(Ns.c)(e),error:Object(u.i)(e),issueKey:Object(d.x)(e)})),(e=>({onSuccess:t=>e(Object(Rs.h)("security",t))})))])((({securityLevelItems:e,isSecurityLevelEnabledForIssue:t,isSecurityLevelEditable:s,error:n,issueKey:i,onSuccess:r})=>{const[o]=Object(Tt.b)({issueKey:i,fieldKey:"security"});if(!n&&t){const t=a.a.createElement(As,{initialValue:o});return a.a.createElement(Ls,{packageName:"issue",fallback:t},a.a.createElement(Fs,{
issueKey:i,initialValue:o||null,allowedValues:e,isEditable:s,onSuccess:r}))}return null}));var Vs=s("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js"),Ks=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),$s=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Ws=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-mobile-user-agent.js"),Bs=s("./src/packages/platform/ui/flags/src/services/index.js"),Hs=s("./src/packages/platform/observability/product-analytics-web-client/src/main.js"),Gs=s("./src/packages/growth/share-button/src/index.js"),qs=s("./src/packages/growth/share-button/src/constants.js"),zs=s("./src/packages/growth/share-button/src/feature-flags.js"),Ys=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const Qs=()=>a.a.createElement("svg",{width:"16",height:"16",viewBox:"4 4 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{
d:"M7.49805 14.0488C7.49805 14.9467 6.76457 15.6802 5.8667 15.6802C4.96883 15.6802 4.23535 14.9467 4.23535 14.0488C4.23535 13.151 4.96883 12.4175 5.8667 12.4175H7.49805V14.0488Z",fill:"#253858"}),a.a.createElement("path",{d:"M8.32031 14.0488C8.32031 13.151 9.05379 12.4175 9.95166 12.4175C10.8495 12.4175 11.583 13.151 11.583 14.0488V18.1335C11.583 19.0314 10.8495 19.7649 9.95166 19.7649C9.05379 19.7649 8.32031 19.0314 8.32031 18.1335V14.0488Z",fill:"#253858"}),a.a.createElement("path",{d:"M9.95166 7.49805C9.05379 7.49805 8.32031 6.76457 8.32031 5.8667C8.32031 4.96883 9.05379 4.23535 9.95166 4.23535C10.8495 4.23535 11.583 4.96883 11.583 5.8667V7.49805H9.95166Z",fill:"#253858"}),a.a.createElement("path",{d:"M9.95139 8.31982C10.8493 8.31982 11.5827 9.0533 11.5827 9.95117C11.5827 10.849 10.8493 11.5825 9.95139 11.5825H5.8667C4.96883 11.5825 4.23535 10.849 4.23535 9.95117C4.23535 9.0533 4.96883 8.31982 5.8667 8.31982H9.95139Z",fill:"#253858"}),a.a.createElement("path",{
d:"M16.5024 9.95117C16.5024 9.0533 17.2359 8.31982 18.1338 8.31982C19.0317 8.31982 19.7651 9.0533 19.7651 9.95117C19.7651 10.849 19.0317 11.5825 18.1338 11.5825H16.5024V9.95117Z",fill:"#253858"}),a.a.createElement("path",{d:"M15.6802 9.95139C15.6802 10.8493 14.9467 11.5827 14.0488 11.5827C13.151 11.5827 12.4175 10.8493 12.4175 9.95139V5.8667C12.4175 4.96883 13.151 4.23535 14.0488 4.23535C14.9467 4.23535 15.6802 4.96883 15.6802 5.8667V9.95139Z",fill:"#253858"}),a.a.createElement("path",{d:"M14.0488 16.502C14.9467 16.502 15.6802 17.2354 15.6802 18.1333C15.6802 19.0312 14.9467 19.7646 14.0488 19.7646C13.151 19.7646 12.4175 19.0312 12.4175 18.1333V16.502H14.0488Z",fill:"#253858"}),a.a.createElement("path",{d:"M14.0488 15.6802C13.151 15.6802 12.4175 14.9467 12.4175 14.0488C12.4175 13.151 13.151 12.4175 14.0488 12.4175H18.1335C19.0314 12.4175 19.7649 13.151 19.7649 14.0488C19.7649 14.9467 19.0314 15.6802 18.1335 15.6802H14.0488Z",fill:"#253858"}));Qs.displayName="SlackIcon";var Js=Qs
;const Zs=Object(ke.g)((()=>s.e("async-share-to-slack").then(s.bind(null,"./node_modules/@atlassian/share-to-slack/dist/es2019/index.js"))),{ssr:!1,moduleId:"./node_modules/@atlassian/share-to-slack/dist/cjs/index.js"}),Xs=Object(V.default)(Zs).withConfig({componentId:"sc-1ms6t4j-0"})`margin:-16px -24px;`,en=Object(V.default)(Ks.a).withConfig({componentId:"sc-1ms6t4j-1"})`width:100%;margin:0 auto;`,tn=e=>a.a.createElement(Ms.a,{id:"async-share-to-slack",packageName:"share-to-slack"},a.a.createElement(ke.a,{fallback:a.a.createElement(en,null)},a.a.createElement(Xs,e)));tn.displayName="ShareToSlack";const sn=e=>{var t;const{summary:s,issueAri:i,issueUrl:r,resourceOwner:o,subProductId:c}=e,{showFlag:l}=Object(Bs.f)(),d=null===(t=Object(Hs.a)())||void 0===t?void 0:t.analyticsClient,{locale:u}=Object($s.f)(),p=Object(zs.f)(),m=[];if(u.toLowerCase().startsWith("en")||m.push("notEnglish"),Object(Ws.a)()&&m.push("notDesktop"),d){const e=Object(zs.a)()
;let t=(null==e?void 0:e.value)||"not-enrolled";m.length&&(t="not-enrolled"),d.sendOperationalEvent({action:"exposed",actionSubject:"feature",attributes:{flagKey:(null==e?void 0:e.flagKey)||"",value:(null==e?void 0:e.value)||"not-enrolled",cohort:t,ineligibilityReasons:m},source:qs.a.BENTO_ISSUE})}const f=Object(n.useMemo)((()=>p&&0===m.length?[{type:"Slack",Icon:Js,Content:({onClose:e})=>a.a.createElement(tn,{showFlag:l,product:"jira",channel:"productAnalytics",onClose:e})}]:[]),[m.length,p,l]);return a.a.createElement(Gs.b,{integrationType:qs.a.BENTO_ISSUE,triggerButtonStyle:"icon-only",productId:o,subProductId:c,shareLink:r,shareTitle:s,shareContentType:"issue",objectAri:i,shareIntegrations:f,shouldAutoDismissFlag:!1})};sn.displayName="ShareView";var nn=Object(p.a)([Object(i.connect)((e=>({issueAri:Object(u.v)(e),resourceOwner:Object(u.G)(),summary:Object(xe.o)("summary")(e)||"",subProductId:Object(u.b)(e),issueUrl:Object(Ys.b)(e)})),{})])(sn)
;const an=Gs.a,rn=V.default.div.withConfig({componentId:"sc-9twvna-0"})`flex-shrink:0;`,on=Object(p.a)([Object(i.connect)((e=>({isLoading:Object(u.r)(e),error:Object(u.i)(e)})),{})])((({error:e=null,isLoading:t})=>{const s=Object(Vs.a)();return!e&&s?a.a.createElement(rn,null,t?a.a.createElement(an,{triggerButtonStyle:"icon-only"}):a.a.createElement(nn,null)):null}));var cn=s("./node_modules/@atlaskit/icon/glyph/like.js"),ln=s.n(cn);var dn=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js"),un=s("./src/packages/platform/utils/constants/src/status-categories.js"),pn=Object(m.defineMessages)({addVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.add-vote-disabled-tooltip",defaultMessage:"You can't vote on resolved issues"},removeVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.remove-vote-disabled-tooltip",defaultMessage:"You can't change your vote on resolved issues"}})
;const mn=()=>{const{formatMessage:e}=Object(J.c)(),t=Object(pe.g)(),[s]=Object(Tt.b)({issueKey:t,fieldKey:"status"}),a=Object(n.useMemo)((()=>"DONE"===Object(un.statusCategoryForId)(null==s?void 0:s.statusCategory.id)),[s]),i=Object(n.useMemo)((()=>a?{addVote:e(pn.addVoteDisabledTooltip),removeVote:e(pn.removeVoteDisabledTooltip)}:void 0),[e,a]);return{isDisabled:a,tooltips:i}};var fn=s("./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js"),bn=s("./src/packages/issue/fields/voters/src/messages.js"),gn=s("./src/packages/issue/fields/voters/src/ui/button/index.js");const hn=V.default.div.withConfig({componentId:"nld3xj-0"})`[data-role='droplistContent']{overflow:visible;}`,yn=V.default.div.withConfig({componentId:"nld3xj-1"})`width:240px;min-height:121px;padding:4px 0 0;`,On=V.default.div.withConfig({componentId:"nld3xj-2"
})`height:121px;display:flex;justify-content:center;align-items:center;`,jn=Object(ke.h)((()=>s.e("async-voters-dropdown").then(s.bind(null,"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js"))),{moduleId:"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js"}),vn=a.a.createElement(On,null,a.a.createElement(Ks.a,{size:"medium"})),En=({setCloseDropdown:e,disableVotingProps:t})=>a.a.createElement(Ms.a,{id:"issue-voters-list",packageName:"issue",render:()=>vn},a.a.createElement(ke.a,{fallback:vn},a.a.createElement(jn,{setCloseDropdown:e,disableVotingProps:t})));En.displayName="LazyDropdownContent";const wn=({disableVotingProps:e})=>{const{formatMessage:t}=Object(J.c)(),s=t(bn.a.voteOptionsTooltip),[i,r]=Object(n.useState)(!1),o=Object(n.useCallback)((()=>{r((e=>!e))}),[]),c=Object(n.useCallback)((()=>{r(!1)}),[]);return a.a.createElement(hn,null,a.a.createElement(L.a,{boundary:"clippingParents",isOpen:i,placement:"auto-end",
trigger:e=>a.a.createElement("div",e,a.a.createElement(gn.a,{onClick:o,tooltip:s,isSelected:i})),onClose:c,content:()=>a.a.createElement(yn,null,i&&a.a.createElement(En,{setCloseDropdown:c,disableVotingProps:e})),zIndex:R.f.modal}))};wn.displayName="VoterDropdown";var kn=wn;const Cn=({disableVotingProps:e})=>{const t=Object(pe.i)(),[s]=Object(_t.d)(t);return s.canViewVoters?a.a.createElement(kn,{disableVotingProps:e}):a.a.createElement(fn.a,{disableVotingProps:e})};Cn.displayName="Voters";var Sn=Cn;const In=()=>{const e=mn();return a.a.createElement(Sn,{disableVotingProps:e})};In.displayName="IssueVoters";var Tn=s("./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js");const _n=V.default.div.withConfig({componentId:"e4pbbs-0"})`display:flex;padding:4px 8px;`,Pn=()=>Object(Tn.a)(a.a.createElement(_n,null,a.a.createElement(ln.a,{size:"medium",primaryColor:$.a.N30,label:""}))),xn=({hasError:e,isIssueLoading:t})=>{
const s=Object(pe.g)(),n=Object(Vs.a)(),[i]=Object(Tt.b)({issueKey:s,fieldKey:"votes"});return e||!n?null:t||!i?a.a.createElement(Pn,null):a.a.createElement(Ms.a,{id:"issue.details.vote-action"},a.a.createElement(dn.a,{scope:s},a.a.createElement(In,null)))};xn.displayName="VotersItem";const Dn=Object(i.connect)((e=>({hasError:!!Object(u.i)(e),isIssueLoading:Object(u.r)(e)})),{})(xn),An=Object(xe.q)("watches"),Mn=Object(y.createSelector)(An,(e=>!!e));var Ln=s("./node_modules/@atlaskit/icon/glyph/watch.js"),Rn=s.n(Ln);const Nn=V.default.div.withConfig({componentId:"sc-1ejwrko-0"})`display:flex;margin:4px 25px 4px 8px;`,Fn=()=>Object(Tn.a)(a.a.createElement("div",null,a.a.createElement(Nn,null,a.a.createElement(Rn.a,{label:"",size:"medium",primaryColor:$.a.N30})))),Un=({children:e,fallback:t,packageName:s})=>a.a.createElement(Ms.a,{id:"issue-watchers",packageName:s,render:()=>t},a.a.createElement(ke.a,{fallback:t},e));Un.displayName="IssueWatchersBoundary"
;const Vn=Object(ke.h)((()=>s.e("async-issue-watchers").then(s.bind(null,"./src/packages/issue/issue-view/src/views/watchers/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/watchers/index.js"}),Kn=({isWatchesPresent:e,isLoading:t,error:s})=>{const n=Object(Vs.a)();return!s&&!!n?!e||t?a.a.createElement(Fn,null):a.a.createElement(Un,{packageName:"issue",fallback:a.a.createElement(Fn,null)},a.a.createElement(Vn,null)):null};Kn.displayName="WatchersItem";const $n=Object(i.connect)((e=>({isWatchesPresent:Mn(e),isLoading:Object(u.r)(e),error:Object(u.i)(e)})),{})(Kn);var Wn=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js");const Bn=({error:e=null,onClose:t=o.a,renderFeedback:s=(()=>null),shouldShowCloseButton:n=!1,issueDeleteCallbacks:i={},viewModeOptions:r={viewModeSwitchEnabled:!1},applicationKey:d})=>{const u=r&&r.viewMode===l.b&&!e;let p;if(s){const e=s(d,!0);null!=e&&(p=a.a.createElement(c.a,{name:"GIVE_FEEDBACK"
},a.a.createElement(Wn.a,null,e)))}return a.a.createElement(Wn.b,null,a.a.createElement(Wn.c,{maxResponsiveWidth:u?258:0},n?a.a.createElement(ys,{onClose:t}):null,a.a.createElement(ps,{externalId:"issue.opsbar",issueDeleteCallbacks:i,viewModeOptions:r,onClose:t}),a.a.createElement(on,null),a.a.createElement(Dn,null),a.a.createElement($n,null),a.a.createElement(Ss,null),a.a.createElement(Us,null),p))};Bn.displayName="HeaderActionsView",Bn.displayName="HeaderActionsView";const Hn=Object(p.a)([Object(i.connect)((e=>({error:Object(u.i)(e),applicationKey:Object(d.e)(e)})),{})])(Bn)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return l}))
;var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const i=2.5*a.e,r=n.default.div.withConfig({componentId:"flfhlx-0"})`min-height:${4*a.e}px;margin-right:0;margin-left:auto;margin-bottom:${a.e/4}px;height:100%;align-items:center;max-width:100%;display:flex;justify-content:flex-end;padding-right:1px;`,o=n.default.div.withConfig({componentId:"flfhlx-1"})`display:flex;flex-flow:row-reverse;${e=>e.maxResponsiveWidth?`flex: 1 0 auto; justify-content: space-between; max-width: ${e.maxResponsiveWidth}px;`:`flex-shrink: 0; > * { margin-left: ${a.e}px; &:last-child { margin-left: 0; } }`} [dir='rtl'] &{padding-right:${2*a.e}px;padding-left:${i}px;}`,c=Object(n.default)(o).withConfig({componentId:"flfhlx-2"})`user-select:none;`,l=n.default.div.withConfig({componentId:"flfhlx-3"})`flex-shrink:0;`},
"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return Ot}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),d=s("./node_modules/react-resource-router/build/esm/index.js"),u=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),p=s("./node_modules/@atlaskit/icon/glyph/arrow-left-circle.js"),m=s.n(p),f=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),b=s("./src/packages/platform/controllers/intl/src/index.js"),g=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),h=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),y=s("./node_modules/react-intl/lib/index.es.js"),O=Object(y.defineMessages)({
back:{id:"issue.views.issue-base.foundation.back-button.back",defaultMessage:"Back"}}),j=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),v=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const E=j.default.div.withConfig({componentId:"sc-106fq17-0"})`margin-right:${1.5*v.e}px;margin-left:-${1.5*v.e}px;`;var w=Object(n.memo)((({url:e})=>{const{formatMessage:t}=Object(b.c)(),{createAnalyticsEvent:s}=Object(g.a)(),i=Object(n.useCallback)((()=>{Object(h.h)(s({}),"button clicked","backFromIssueViewButton")}),[s]);return a.a.createElement(E,null,a.a.createElement(u.a,{href:e,appearance:"subtle",onClick:i,component:__SPA__?d.a:void 0,iconBefore:a.a.createElement(m.a,{label:"",size:"small",primaryColor:f.a.N300})},t(O.back)))
})),k=s("./node_modules/lodash/flow.js"),C=s.n(k),S=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),I=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),T=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),_=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),P=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),x=s("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),D=s("./src/packages/platform/ui/error-boundary/src/main.js"),A=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js"),M=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),L=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),R=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),N=s("./src/packages/issue/issue-view/src/feature-flags.js"),F=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),U=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),V=s("./node_modules/reselect/lib/index.js")
;const K=Object(V.createSelector)(o.f,(e=>e.project)),$=Object(V.createSelector)(K,(e=>e?e.projectName:null)),W=Object(V.createSelector)(K,(e=>e?e.avatarUrl:null))
;var B=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),H=s("./node_modules/lodash/noop.js"),G=s.n(H),q=s("./node_modules/@atlaskit/breadcrumbs/dist/es2019/components/breadcrumbs.js"),z=s("./node_modules/@atlaskit/breadcrumbs/dist/es2019/components/breadcrumbs-item.js"),Y=s("./src/packages/platform/utils/types/src/general.js"),Q=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),J=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js"),Z=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js"),X=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),ee=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),te=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),se=s("./node_modules/@atlaskit/icon/glyph/edit-filled.js"),ne=s.n(se),ae=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),ie=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),re=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),oe=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),ce=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),le=s("./src/packages/issue-create/issue-create-modal/src/controllers/use-trigger-issue-create-modal/index.js"),de=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),ue=Object(y.defineMessages)({
triggerTooltipAddEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-epic",defaultMessage:"{issueTypeName} - Add {target}"},triggerTooltipChangeEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-epic",defaultMessage:"{issueTypeName} - Change {target}"},triggerTooltipAddParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-parent",defaultMessage:"{issueTypeName}Add parent"},triggerTooltipChangeParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-parent",defaultMessage:"{issueTypeName}Change parent"},dropdownEmpty:{id:"issue.details.issue-parent-switcher-dropdown-empty",defaultMessage:"No {target} has been created in this project. Create your first "},dropdownTitleEpic:{id:"issue.details.issue-parent-switcher-dropdown-title-epic",defaultMessage:"Recent {target}"},removeEpic:{id:"issue.details.issue-parent-switcher-remove-epic",defaultMessage:"Remove {target}"},viewEpics:{id:"issue.details.issue-parent-switcher-view-epics",
defaultMessage:"View all {target}"},dropdownTitle:{id:"issue.details.issue-parent-switcher-dropdown-title",defaultMessage:"Recent parents"},removeParent:{id:"issue.details.issue-parent-switcher-remove-parent",defaultMessage:"Remove parent"},viewParents:{id:"issue.details.issue-parent-switcher-view-parents",defaultMessage:"View all parents"}});const pe=j.default.div.withConfig({componentId:"sc-1te7eml-0"})`border-bottom:1px solid ${f.a.N30};`,me=j.default.div.withConfig({componentId:"sc-1te7eml-1"})`display:flex;justify-content:center;align-items:center;min-width:${21*v.e}px;min-height:${23.375*v.e}px;overflow:hidden;`,fe=j.default.div.withConfig({componentId:"sc-1te7eml-2"})`width:${25*v.e}px;padding:${1.5*v.e}px;& button,& span{padding:0;margin:0;vertical-align:initial;}`;function be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}
return s}function ge(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const he=Object(de.a)("dropdownItem",{onClick:"clicked"})(X.a);class ye extends n.Component{constructor(...e){super(...e),this.state={isOpen:Boolean(this.props.isOpen),isLoading:!this.props.issueParents.length},this.addEpicButtonRef=Object(n.createRef)(),this.focusTimeoutId=null,this.setFocusToAddEpicButtonOnModalClose=()=>{const e=this.addEpicButtonRef.current;e&&(this.focusTimeoutId=setTimeout((()=>e.focus())))},this.onOpenChange=({isOpen:e,event:t},s)=>{const{clickRef:n,onOpenChange:a,onToggle:i,issues:r}=this.props,o=n&&n.current&&t&&n.current.button.contains(t.target);void 0!==r[0]&&s.update({epicSelectedId:r[0].parentId}),i(s),this.toggleMenu(e),a&&!o&&a(e)},this.onItemClick=(e,t={})=>(s,n)=>{const{projectId:a,issueTypes:i,issues:r,issueTypeName:o,onSelect:c,setIssueParent:l,onViewAllParentsClick:d,onClick:u,openIssueCreateModal:p}=this.props
;switch(e){case"add parent":case"change parent":l(r,t.parentId);break;case"remove parent":l(r);break;case"open modal":d();break;case"create parent":{const e=String((i.find((({name:e})=>e===o))||{}).id);a&&e||ce.a.safeErrorWithoutCustomerData("issue-parent-switcher.create.issue.failure","Failed to create the first epic via global issue create",{projectId:a,issueTypeId:e}),((e,t,s)=>{if(s&&window.IssueCreate&&window.IssueCreate.Visibility){const{isEnabled:n}=window.IssueCreate.Visibility;if(n){const n={};return null!=e&&(n.project={projectId:e}),null!=t&&(n.issueType={issueTypeId:t}),void s({payload:n})}}window.WRM&&window.WRM.require(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],(()=>{window.JIRA.Forms.createCreateIssueForm({pid:e,issueType:t}).asDialog({id:"software-create-issue-dialog"}).show()}))})(a,e,p);break}}u(n.update({userAction:e})),c&&c(),!t.keepMenuOpen&&this.toggleMenu(!1)}}componentDidUpdate(e){
const{issueParents:t,isOpen:s,isAssignIssueParentModalOpen:n}=this.props;s!==e.isOpen&&s!==this.state.isOpen&&this.toggleMenu(s),t!==e.issueParents&&this.state.isLoading&&this.setState({isLoading:!1}),e.isAssignIssueParentModalOpen&&!n&&this.setFocusToAddEpicButtonOnModalClose()}componentWillUnmount(){clearTimeout(this.focusTimeoutId)}getMessageContent(e,t,s=!0){const{issueTypeName:n,issueHierarchyLevel:a,intl:{formatMessage:i}}=this.props,r="Epic"!==n?"":`${"Epic".toLowerCase()}${s?"s":""}`;return n&&0===a?i(e,{target:r}):i(t)}getTooltipContent(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,intl:{formatMessage:n}}=this.props;if(t&&0===s){const s="Epic"!==t?t:"Epic".toLowerCase();return n(e?ue.triggerTooltipAddEpic:ue.triggerTooltipChangeEpic,{issueTypeName:t,target:s})}return n(e?ue.triggerTooltipAddParent:ue.triggerTooltipChangeParent,{issueTypeName:t?`${t} - `:""})}toggleMenu(e){const{issueParents:t,fetchIssueParents:s}=this.props;this.setState(function(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?be(Object(s),!0).forEach((function(t){ge(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):be(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({isOpen:e},e&&!t.length?{isLoading:!0}:{}),(()=>{e&&!t.length&&s()}))}renderTriggerButton(){const{isDisabled:e,isOpen:t,isOrphan:s,issueTypeName:n,issueTypeIconUrl:i,text:r}=this.props,o=this.getTooltipContent(),c=a.a.createElement(u.a,{ref:this.addEpicButtonRef,"aria-label":o,"aria-expanded":t,isDisabled:e,spacing:"compact",appearance:"subtle",iconBefore:!s&&i?a.a.createElement(re.a,{alt:n||"",url:i}):a.a.createElement(ne.a,{size:"small",label:""})},r);return s?c:a.a.createElement(ie.a,{position:"top",content:o,delay:0},c)}renderIssueParentItem(e){const{id:t,key:s,summary:n,issueType:{name:i,iconUrl:r}}=e,o=a.a.createElement(re.a,{alt:i||"",url:r})
;return a.a.createElement(he,{key:s,elemBefore:o,onClick:this.onItemClick((this.props.isOrphan?"add":"change")+" parent",{parentId:t})},s," ",n)}renderDropdownItemGroup(e){return this.state.isLoading?a.a.createElement(me,null,a.a.createElement(ae.a,{size:"large"})):a.a.createElement(ee.a,{title:this.getMessageContent(ue.dropdownTitleEpic,ue.dropdownTitle)},e.map((e=>this.renderIssueParentItem(e))))}renderDropdownMenu(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,issueParents:n,issueKey:i,intl:{formatMessage:r}}=this.props,o=t&&"Epic"!==t?t:"Epic".toLowerCase(),c=(n||[]).filter((e=>e.key!==i)).slice(0,5);return 0!==s||this.state.isLoading||n.length?a.a.createElement(a.a.Fragment,null,(this.state.isLoading||c.length>0)&&a.a.createElement(pe,null,this.renderDropdownItemGroup(c)),a.a.createElement(ee.a,null,!e&&0===s&&a.a.createElement(he,{onClick:this.onItemClick("remove parent")},this.getMessageContent(ue.removeEpic,ue.removeParent,!1)),a.a.createElement(he,{
onClick:this.onItemClick("open modal")},this.getMessageContent(ue.viewEpics,ue.viewParents)))):a.a.createElement(fe,null,r(ue.dropdownEmpty,{target:o}),a.a.createElement(u.a,{appearance:"link",spacing:"compact",onClick:this.onItemClick("create parent",{keepMenuOpen:!0})},o),".")}render(){return a.a.createElement(te.a,{isOpen:this.state.isOpen,trigger:this.renderTriggerButton(),onOpenChange:this.onOpenChange},this.renderDropdownMenu())}}ye.displayName="IssueParentSwitcher",ye.displayName="IssueParentSwitcher",ye.defaultProps={isDisabled:!1,isOrphan:!1,issueTypes:[],issues:[],issueParents:[],isOpen:!1,issueKey:"",issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,clickRef:null,projectId:null,fetchIssueParents:G.a,setIssueParent:G.a,text:"",onOpenChange:G.a,onSelect:G.a,onViewAllParentsClick:G.a};var Oe=Object(oe.a)(N.isModernGlobalIssueCreateTriggerEnabled,Object(y.injectIntl)(Object(le.c)(ye)),Object(y.injectIntl)(ye)),je=Object(c.a)([Object(P.a)({onToggle:"toggled",
onClick:"clicked"}),Object(i.connect)((e=>({projectId:Object(o.C)(e),issueTypes:Object(Z.d)(e),issues:Object(J.a)(e),issueParents:Object(o.B)(e),isAssignIssueParentModalOpen:Object(J.b)(e)})),(e=>({fetchIssueParents:()=>{e(Object(Q.b)())},setIssueParent:(t,s)=>{e(s?Object(Q.f)(t,s):Object(Q.i)(t))},onViewAllParentsClick:()=>{e(Object(Q.h)())}})))])(Oe);const ve=e=>null===e?"":e.length>20?`${e.slice(0,20)}...`:e;var Ee=Object(y.defineMessages)({addParent:{id:"issue.details.add-parent",defaultMessage:"Add {target}"},copy:{id:"issue.details.copy-to-clipboard",defaultMessage:"Copy link to issue"},rootProjectsLink:{id:"issue.details.root-projects-link",defaultMessage:"Projects"}}),we=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const ke=Object(we.a)("div",{target:"e18k4ulk0"})({name:"sgt9w1",styles:"display:flex;flex-grow:0;overflow:visible;"}),Ce=Object(we.a)("span",{target:"e18k4ulk1"})("padding-right:",v.e,"px;display:flex;"),Se=Object(we.a)("span",{
target:"e18k4ulk2"})("border-radius:",v.a,"px;overflow:hidden;"),Ie=Object(we.a)(u.a,{target:"e18k4ulk3"})("opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(-8px,0);",ke,":hover &{opacity:1;transform:translate(0,0);}&:focus{opacity:1;transform:translate(0,0);}"),Te=Object(we.a)("div",{target:"e18k4ulk4"})('display:flex;margin:0;&:after{display:flex;margin-top:2px;content:"/";flex-shrink:0;padding:0 8px;justify-content:center;width:8px;margin-right:-4px;}&:last-child:after{content:"";}',(e=>(e=>!0===e?"\n    & > div:last-child {\n        max-width: 200px;\n    }":"")(e.shouldTruncate))),_e=Object(we.a)("div",{target:"e18k4ulk5"})({name:"1r5s71b",styles:'display:flex;max-width:300px;&:after{display:flex;margin-top:2px;content:"/";flex-shrink:0;padding:0 8px;justify-content:center;width:8px;}'}),Pe=ke,xe=Ce,De=Se,Ae=Ie,Me=Te,Le=_e;class Re extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.breadcrumbsItemRef=Object(n.createRef)(),
this.onOpenChange=e=>{e!==this.state.isOpen&&this.setState({isOpen:e})},this.onClick=e=>{e.preventDefault(),this.setState((e=>({isOpen:!e.isOpen})))}}render(){const{issueTypeName:e,intl:{formatMessage:t}}=this.props,s=e&&"Epic"!==e?e:"Epic".toLowerCase();return a.a.createElement(a.a.Fragment,null,a.a.createElement(Me,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-add-parent"},a.a.createElement(je,{clickRef:this.breadcrumbsItemRef,isOpen:this.state.isOpen,isOrphan:!0,issueTypeName:e,onOpenChange:this.onOpenChange,text:ve(t(Ee.addParent,{target:s}))})))}}Re.displayName="BreadcrumbAddParent",Re.defaultProps={issueTypeName:"Epic"}
;var Ne=Object(y.injectIntl)(Re),Fe=s("./node_modules/@atlaskit/icon/glyph/copy.js"),Ue=s.n(Fe),Ve=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/view.js"),Ke=s("./src/packages/issue/fields/summary/src/services/index.js"),$e=s("./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js"),We=s("./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js"),Be=s("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js");const He=Object(V.createSelector)(o.E,F.g,((e,t)=>{const s=e&&e.issueTypes||[];return t.length?s.filter((e=>t.includes(e.id))):s})),Ge=Object(V.createSelector)(o.H,(e=>!(!e.issueType||!e.issueType.shouldShowIssueTypeList)));var qe=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenu.js"),ze=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Ye=Object(y.defineMessages)({changeType:{
id:"issue.details.change-issue-type",defaultMessage:"{issueType} - Change issue type"},changeTypeGroupName:{id:"issue.details.change-issue-type-groupname",defaultMessage:"Change Issue Type"}});const Qe=({issueType:e,icon:t,onClick:s})=>{const{formatMessage:n}=Object(b.c)();return a.a.createElement(ie.a,{position:"top",content:n(Ye.changeType,{issueType:e}),delay:0},a.a.createElement(u.a,{"aria-label":n(Ye.changeType,{issueType:e}),spacing:"compact",appearance:"subtle",onClick:s,iconBefore:t}))};Qe.displayName="TriggerButton";var Je=Qe;const Ze=({isOpen:e,icon:t,issueTypes:s,issueId:i,showIssueTypeList:o,loadIssueTypes:c,changeIssueType:l})=>{const{formatMessage:d}=Object(b.c)(),{createAnalyticsEvent:u}=Object(g.a)(),p=Object(r.g)(),[m]=Object(ze.b)({issueKey:p,fieldKey:"issuetype"}),f=Object(r.i)(),y=Object(n.useCallback)((e=>{null!==i&&(l(p,i,m,e,u({})),o(!1))}),[l,u,m,i,p,o]),O=Object(n.useCallback)((({isOpen:e})=>{o(e)}),[o]),j=Object(n.useCallback)(((t,s)=>{
f&&(e||Object(h.h)(s.update({name:"changeIssueTypeDropdown"}),"button clicked","changeIssueTypeDropdownButton"),o(!e))}),[e,f,o]),v=Object(n.useMemo)((()=>{if(m&&s&&0!==s.length){const e=s.filter((e=>e.id!==m.id)).filter((e=>((e,t)=>!e.subtask||t.subtask)(m,e))).map((e=>a.a.createElement(X.a,{key:e.id,elemBefore:a.a.createElement(re.a,{url:e.iconUrl,alt:e.name}),onClick:()=>y(e)},e.name)));return[a.a.createElement(X.a,{key:m.id,elemBefore:a.a.createElement(re.a,{url:m.iconUrl,alt:m.name}),onClick:()=>y(m)},m.name),...e]}return null}),[m,y,s]),E=Object(n.useRef)(!0);return Object(n.useEffect)((()=>{!E.current&&f?c(f):E.current=!1}),[f,e,c]),a.a.createElement(qe.a,{trigger:a.a.createElement(Je,{icon:t,issueType:m&&m.name?m.name:"",onClick:j}),appearance:"default",position:"bottom left",onOpenChange:O,isOpen:e,isTriggerNotTabbable:!0},a.a.createElement(ee.a,{title:d(Ye.changeTypeGroupName)},v))};Ze.displayName="ChangeIssueType";var Xe=Ze,et=Object(i.connect)((e=>({issueTypes:He(e),
issueId:Object(o.l)(e),isOpen:Ge(e)})),(e=>({showIssueTypeList:t=>e(Object(Be.d)(t)),loadIssueTypes:t=>e(Object(Be.b)(t)),changeIssueType:(t,s,n,a,i)=>e(Object(Be.g)(t,s,n,a,i))})))((e=>a.a.createElement(D.a,{id:"change-issue-type",packageName:"issue-view"},a.a.createElement(Xe,e)))),tt=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),st=Object(y.defineMessages)({uneditableIssueType:{id:"issue.details.uneditable-issue-type",defaultMessage:"{issueTypeName} - You cannot edit this issue type in this project."}});const nt=j.default.div.withConfig({componentId:"sc-1q102z1-0"})`cursor:not-allowed;> button{pointer-events:none;}`;var at=Object(y.injectIntl)(Object(tt.a)()((({intl:e,issueTypeIconUrl:t,issueTypeName:s})=>a.a.createElement(ie.a,{position:"top",content:e.formatMessage(st.uneditableIssueType,{issueTypeName:s}),truncate:!0,delay:0},a.a.createElement(nt,null,a.a.createElement(u.a,{spacing:"compact",appearance:"subtle",iconBefore:a.a.createElement(re.a,{
url:t}),isDisabled:!0}))))));const it=({isSimplifiedProject:e=!1,isIssueTypeFieldEditable:t=!1,issueKey:s=Object(Y.m)(""),issueTypeName:n="",issueTypeIconUrl:i="",relativeIssueUrl:r="",fullIssueUrl:o="",onClick:c=G.a,onCopyClick:l=G.a})=>{const{formatMessage:d}=Object(b.c)(),u=d(Ee.copy),p=a.a.createElement(z.a,{key:"issueKeyBreadcrumbItem",href:r,onClick:c,text:s,target:"_blank"}),m=t?a.a.createElement(et,{key:"issueTypeChanger",icon:a.a.createElement(re.a,{url:i,alt:n})}):a.a.createElement(at,{issueTypeName:n,issueTypeIconUrl:i}),[{value:f}]=Object(Ke.a)({issueKey:s}),g=f||"",h=e?a.a.createElement(ie.a,{content:`${s}: ${g}`,position:"top",delay:0},p):p;return a.a.createElement(We.a,null,(e=>a.a.createElement(Me,{onMouseLeave:e.hide,onMouseEnter:e.show,onFocus:e.show,onBlur:e.hide,"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-current-issue-container"},m,h,(e=>e?a.a.createElement($e.a,{id:"BreadcrumbCurrentIssue",label:u,fullIssueUrl:o,onCopyClick:l,
isVisible:e.isVisible}):a.a.createElement(Ve.a,{label:u,tooltipDelay:0,tooltipLabel:u,tooltipLabelPosition:"top",shouldFitContainer:!0,value:o,hideFieldText:!0,remountOnChange:!0,onCopyClick:l},a.a.createElement(Ae,{appearance:"subtle-link",iconBefore:a.a.createElement(Ue.a,{size:"small",label:u}),spacing:"compact"})))(e))))};it.displayName="BreadcrumbCurrentIssue";var rt=it;class ot extends n.Component{constructor(...e){super(...e),this.state={isHovered:!1},this.onHoveredChange=e=>()=>{this.setState({isHovered:e})}}renderBreadcrumbsItem(){const{isSimplifiedProject:e,parentIssue:t,issueHierarchyLevel:s,onClick:n}=this.props,{key:i,summary:r,url:o}=t;return a.a.createElement(ie.a,{content:`${i}: ${r}`,position:"top",delay:0},a.a.createElement(z.a,{href:o,onClick:n,text:ve(0===s?r:i),truncationWidth:e?void 0:300,hasSeparator:!0}))}render(){
const{isSimplifiedProject:e,isDisabled:t,parentIssue:s,issueHierarchyLevel:n}=this.props,{key:i,issueTypeName:r,issueTypeIconUrl:o}=s,c=this.renderBreadcrumbsItem();return e?a.a.createElement(Me,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container",onMouseEnter:t?void 0:this.onHoveredChange(!0),onMouseLeave:t?void 0:this.onHoveredChange(!1),shouldTruncate:!0},a.a.createElement(je,{isDisabled:t,issueKey:i,issueTypeName:r,issueTypeIconUrl:this.state.isHovered?"":o,issueHierarchyLevel:n,onSelect:this.onHoveredChange(!1)}),c):a.a.createElement(Me,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container"},c)}}ot.displayName="BreadcrumbParentIssue",ot.defaultProps={isSimplifiedProject:!1,isDisabled:!0,issueHierarchyLevel:0,onClick:G.a};var ct=({shouldShowProjectLevelBreadcrumb:e=!1,projectName:t="",projectUrl:s="",projectAvatarUrl:n="",onClick:i=G.a})=>{const r=Boolean(e&&t&&s),o=a.a.createElement(re.a,{
url:n,alt:t}),c=a.a.createElement(xe,null,a.a.createElement(De,null,o)),l=a.a.createElement(z.a,{href:s,onClick:i,text:ve(t),truncationWidth:0,iconBefore:c,hasSeparator:!0});return r&&a.a.createElement(Le,null,a.a.createElement(ie.a,{content:t,position:"top",delay:0},l))};class lt extends n.Component{constructor(...e){super(...e),this.onClick=e=>{this.props.onClick(e)},this.onProjectClick=e=>{if(e.ctrlKey||e.metaKey||e.shiftKey)return;e.preventDefault();const{projectUrl:t,onProjectClick:s}=this.props;t&&s(t,this.props.pushAction)},this.onParentClick=e=>t=>{if(t.ctrlKey||t.metaKey||t.shiftKey)return;t.preventDefault();const{onParentClick:s,issueKey:n}=this.props;s({childIssueKey:n,parentIssueKey:Object(Y.m)(e),onIssueKeyChange:this.props.onIssueKeyChange})},this.onRootBreadcrumbClick=e=>{if(e.ctrlKey||e.metaKey||e.shiftKey)return;const{onRootBreadcrumbClick:t}=this.props;t()}}componentDidMount(){this.props.onExperienceSuccess()}render(){
const{error:e,isSimplifiedProject:t,isLoadingComplete:s,shouldShowProjectLevelBreadcrumb:n,shouldShowRootProjectsBreadcrumb:i,projectName:r,projectUrl:o,projectAvatarUrl:c,parentIssues:l,isIssueTypeFieldEditable:d,issueKey:u,issueTypeName:p,issueTypeIconUrl:m,relativeIssueUrl:f,fullIssueUrl:b,onCopyClick:g,intl:{formatMessage:h},canLinkToParent:y,issueHierarchyLevel:O,parentLevelIssueTypeNames:j}=this.props,v=l.length>0,E=y&&null===e&&s,w=t&&0===O&&E;return a.a.createElement(Pe,null,a.a.createElement(q.a,{maxItems:5},i&&a.a.createElement(z.a,{href:"/jira/projects",text:h(Ee.rootProjectsLink),onClick:this.onRootBreadcrumbClick}),a.a.createElement(ct,{shouldShowProjectLevelBreadcrumb:n,projectName:r,projectUrl:o,projectAvatarUrl:c,onClick:this.onProjectClick}),v?l.map(((e,s)=>a.a.createElement(ot,{key:s,isSimplifiedProject:t,isDisabled:!E,parentIssue:e,issueHierarchyLevel:O,onClick:this.onParentClick(e?e.key:"")}))):w&&a.a.createElement(Ne,{issueTypeName:j[0]}),a.a.createElement(rt,{
isSimplifiedProject:t,isIssueTypeFieldEditable:d,issueKey:u,issueTypeName:p,issueTypeIconUrl:m,relativeIssueUrl:f,fullIssueUrl:b,onClick:this.onClick,onCopyClick:g})))}}lt.displayName="IssueBreadcrumbs",lt.displayName="IssueBreadcrumbs",lt.defaultProps={isSimplifiedProject:!1,isLoadingComplete:!1,issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,shouldShowRootProjectsBreadcrumb:!1,error:null,parentIssues:[],onCopyClick:G.a,onExperienceSuccess:G.a};const dt=["projectName","projectAvatarUrl"];function ut(){return(ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function pt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const mt=e=>{let{projectName:t,projectAvatarUrl:s}=e,n=pt(e,dt);const{push:i}=Object(d.r)(),o=Object(r.h)(),c=Object(r.g)(),l=Object(b.c)();return a.a.createElement(D.a,{id:"issue.issue-view.foundation.breadcrumbs"},a.a.createElement(lt,ut({pushAction:i,onIssueKeyChange:o,issueKey:c,projectName:t||"",projectAvatarUrl:s||"",intl:l},n)))};mt.displayName="IssueBreadcrumbsWithHooks";var ft=C()(Object(I.a)("breadcrumbs",T.a.SCREEN),Object(B.c)("breadcrumbs"),Object(_.a)("breadcrumbsItem",{onRootBreadcrumbClick:"clicked",onProjectClick:"clicked",onParentClick:"clicked",onClick:"clicked"}),Object(P.a)({onCopyClick:"copyUrlLink",onRootBreadcrumbClick:"navigateToProjectsList",onProjectClick:"navigateToProject",onParentClick:"navigateToParentIssue",onClick:"navigateToCurrentIssue"}),Object(S.a)((e=>({onClick:()=>{e("full.issue.view")},onParentClick:()=>{e("parent-issue.view")},onProjectClick:()=>{
e("project.view")},onRootBreadcrumbClick:()=>{e("projects-list.view")}}))),Object(i.connect)((e=>{const t=Object(o.u)(e);return{error:Object(o.i)(e),isSimplifiedProject:t,isLoadingComplete:Object(o.n)(e),issueSummary:Object(R.o)("summary")(e)||"",relativeIssueUrl:Object(U.i)(e),fullIssueUrl:Object(U.b)(e),issueTypeName:Object(U.g)(e),issueTypeIconUrl:Object(U.e)(e),parentIssues:Object(U.c)(t)(e),projectName:$(e),projectUrl:Object(M.j)(Object(L.f)(e),Object(L.B)(e)),projectAvatarUrl:W(e),isIssueTypeFieldEditable:Object(U.d)(e),canLinkToParent:Object(F.a)(e),issueHierarchyLevel:Object(F.b)(e),parentLevelIssueTypeNames:Object(F.f)(e)}}),(e=>({onParentClick:({childIssueKey:t,parentIssueKey:s,onIssueKeyChange:n})=>{n&&n({fromIssueKey:t,toIssueKey:s,meta:{location:"breadcrumbs"}}),__SPA__||e(Object(A.c)({fromIssueKey:t,toIssueKey:s}))},onProjectClick:(t,s)=>{e(Object(A.d)(t,s))}}))),Object(x.a)((e=>{const t=Object(L.b)(e);if(Object(N.isBreadcrumbsAnalyticsEnabled)()){
const s=Object(o.u)(e),n=K(e);return{attributes:{issueHierarchyLevel:Object(F.b)(e),analyticsSource:`issue-view (${t?t.toString():"undefined"})`,nextGenProject:s,projectConfig:s?"next-gen":"classic"},containerType:"project",containerId:n?`${n.projectId}`:""}}return{attributes:{issueHierarchyLevel:Object(F.b)(e),analyticsSource:`issue-view (${t?t.toString():"undefined"})`}}})))(mt),bt=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js");const gt=Object(j.default)(bt.b).withConfig({componentId:"sc-11ffbsq-0"})`margin-left:0;`,ht=j.default.div.withConfig({componentId:"sc-11ffbsq-1"})`display:flex;align-items:center;flex-grow:1;overflow:visible;font-size:${e=>e.isCompact?"12px":null};[dir='rtl'] &{padding-left:0;padding-right:${bt.d}px;}`,yt=({error:e=null,isCompact:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n=!1})=>{const i=Object(r.b)();return null!==e?null:a.a.createElement(gt,null,a.a.createElement(ht,{
isCompact:t},void 0!==i&&a.a.createElement(w,{url:i}),a.a.createElement(ft,{externalId:"issue",shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n})))};yt.displayName="HeaderBreadcrumbsView";const Ot=Object(c.a)([Object(i.connect)((e=>({error:Object(o.i)(e)})),{}),l.a])(yt)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),d=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),u=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const b=2.5*f.e,g=m.default.div.withConfig({componentId:"sc-1n144tp-0"})`min-height:${4*f.e}px;margin-right:-${b}px;margin-bottom:${f.e/4}px;display:flex;justify-content:space-between;height:100%;align-items:center;`
;class h extends n.Component{render(){const{shouldShowCloseButton:e,onClose:t,renderFeedback:s,isCompact:n,viewModeOptions:i,issueDeleteCallbacks:r,shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:d}=this.props;return a.a.createElement(l.a,{isCompact:n},a.a.createElement(o.a,{medium:10},a.a.createElement(g,null,a.a.createElement(p.a,{shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:d,isCompact:n}),a.a.createElement(u.a,{renderFeedback:s,issueDeleteCallbacks:r,viewModeOptions:i,onClose:t,shouldShowCloseButton:e,isCompact:n}))))}}h.displayName="HeaderItemWithoutCompactMode",h.displayName="Header",h.defaultProps={issueDeleteCallbacks:{},shouldShowCloseButton:!1,shouldShowProjectLevelBreadcrumb:!1,shouldShowRootProjectsBreadcrumb:!1,renderFeedback:()=>null,viewModeOptions:{viewModeSwitchEnabled:!1},onClose:r.a};t.a=Object(c.a)([d.a])(h)},
"./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/add-to-issue-dropdown-group/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return z})),s.d(t,"b",(function(){return Y}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/utils/constants/src/analytics-sources.js")),r=s("./src/packages/platform/controllers/intl/src/index.js"),o=s("./src/packages/issue/issue-context-service/src/main.js"),c=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),l=s("./src/packages/issue/fields/field-base/src/services/custom-field-key-service/main.js"),d=s("./src/packages/issue/fields/flagged/src/services/main.js"),u=s("./src/packages/issue/project-context-service/src/main.js"),p=s("./src/packages/issue/project-permissions-service/src/main.js"),m=s("./src/packages/issue/jira-settings-service/src/main.js"),f=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),b=s("./src/packages/platform/ui/error-boundary/src/main.js");function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
class h extends n.Component{constructor(...e){super(...e),this.ecosystemModalLinkRef=void 0,this.setEcosystemModalLinkRef=e=>{this.ecosystemModalLinkRef=e},this.clickEcosystemModalLinkRef=()=>{var e,t;null===(e=(t=this.props).onClick)||void 0===e||e.call(t,this.props.itemKey),this.ecosystemModalLinkRef&&this.ecosystemModalLinkRef.click()},this.renderEcosystemModalLink=(e,t)=>a.a.createElement("a",{href:e,className:t,ref:this.setEcosystemModalLinkRef,display:"none"})}render(){const{id:e,linkText:t,tooltip:s,href:n,styleClass:i,setDropdownItemRef:r}=this.props;return a.a.createElement(f.a,{key:e,onClick:this.clickEcosystemModalLinkRef,title:s,innerRef:r},t,this.renderEcosystemModalLink(n,i))}}h.displayName="EcosystemWebItem",h.defaultProps={styleClass:null,tooltip:null}
;var y=s("./node_modules/react-redux/es/index.js"),O=s("./src/packages/forge/forge-ui-analytics/src/common/ui/index.js"),j=s("./src/packages/forge/forge-ui-analytics/src/services/issue-action/index.js"),v=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-action/index.js"),E=s("./src/packages/forge/forge-ui/src/ui/extension-title/index.js"),w=s("./src/packages/issue/issue-view/src/actions/forge-actions.js"),k=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),C=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js");const S=["onClick","execForgeAction","source","setDropdownItemRef","itemKey","label"];function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const _=e=>{let{onClick:t,execForgeAction:s,source:i,setDropdownItemRef:r,itemKey:o,label:c}=e,l=T(e,S);const d=Object(n.useCallback)((()=>{Object(j.a)(i),s(l),null==t||t(o)}),[i,s,t,l,o]);return a.a.createElement(f.a,{key:l.id,onClick:d,innerRef:r},a.a.createElement(E.a,{extensionName:l.title,extensionEnvType:l.extension.environmentType}),a.a.createElement(O.b,{attributes:{source:i}}))};_.displayName="ForgeActionView";const P=e=>a.a.createElement(v.a,{attributes:{source:e.source}},a.a.createElement(_,e));P.displayName="ForgeActionViewWithAnalytics";const x=Object(C.a)([Object(y.connect)((e=>({source:Object(k.b)(e)})),{execForgeAction:w.c})])(P),D=e=>{if("FORGE_ENTITY_TYPE"===e.type){return(e=>({
component:t=>a.a.createElement(b.a,{packageName:"issue",id:"forge-items"},a.a.createElement(x,I({},e,t))),eventName:e.id,key:e.id,isAllowed:!0,label:e.title}))(e)}return(e=>({component:t=>a.a.createElement(b.a,{packageName:"issue",id:"connect-items"},a.a.createElement(h,g({href:e.url,linkText:e.name,styleClass:e.styleClass,id:e.name,tooltip:e.tooltip},t))),eventName:e.name,key:e.name,isAllowed:!0,label:e.name}))(e)},A=({ecosystemActions:e})=>e.map(D).filter((e=>e.isAllowed)).reduce(((e,t)=>{if(t.component){const s=t,n=s.component,{key:a,label:i}=s;e.push({Component:n,label:i,key:a})}return e}),[]);var M=s("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js"),L=s("./src/packages/platform/ui/flags/src/services/index.js"),R=s("./src/packages/issue/fields/flagged/src/services/utils.js"),N=s("./node_modules/react-intl/lib/index.es.js"),F=Object(N.defineMessages)({addFlag:{id:"issue.flag.add",defaultMessage:"Add flag"},removeFlag:{id:"issue.flag.remove",
defaultMessage:"Remove flag"},addFlagFailedTitle:{id:"issue.server-error-when-add-flag-title",defaultMessage:"We couldn't flag this issue"},addFlagFailedDescription:{id:"issue.server-error-when-add-flag-description",defaultMessage:"Check your connection and try adding the flag again."},removeFlagFailedTitle:{id:"issue.server-error-when-remove-flag-title",defaultMessage:"We couldn't remove the flag from this issue"},removeFlagFailedDescription:{id:"issue.server-error-when-remove-flag-description",defaultMessage:"Check your connection and try removing the flag again."}});const U=({onClick:e,itemKey:t,label:s,setDropdownItemRef:i})=>{const{createAnalyticsEvent:r}=Object(M.a)(),c=Object(o.g)(),{showFlag:u}=Object(L.f)(),p=Object(n.useCallback)(((e,t)=>{u({type:"error",title:t?F.addFlagFailedTitle:F.removeFlagFailedTitle,description:t?F.addFlagFailedDescription:F.removeFlagFailedDescription})
}),[u]),[m]=Object(l.a)(c,"com.atlassian.jira.plugin.system.customfieldtypes:flagged"),[{value:b},{saveValue:g}]=Object(d.a)({issueKey:c,fieldKey:m||"",onFailure:p}),h=Object(n.useCallback)((()=>{const s=r({}),n=Object(R.b)(!b);g(n,null,s),null==e||e(t)}),[e,t,g,b,r]);return a.a.createElement(f.a,{key:"flagIssue",onClick:h,innerRef:i},s)};U.displayName="FlagIssueActionView";var V=U;const K=F.addFlag,$=F.removeFlag;var W=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),B=s("./src/packages/issue/issue-view/src/common/messages/time.js");const H=({onLogTimeClick:e,onClick:t,label:s,setDropdownItemRef:i,itemKey:r})=>{const o=Object(n.useCallback)((()=>{e(),null==t||t(r)}),[e,t,r]);return a.a.createElement(f.a,{key:"LogTimeActionView",onClick:o,innerRef:i},s)};H.displayName="LogWorkView";const G=Object(y.connect)(null,(e=>({onLogTimeClick:()=>{e(Object(W.L)("ADD_MODAL",null))}})))(H),q=B.a.logWork,z=(e,t)=>({name:"",key:"AddToIssueDropdownGroup",
items:e.reduce(((e,{Component:s,label:n,key:i})=>(s&&e.push(a.a.createElement(s,{label:n,key:i,itemKey:i,onClick:t})),e)),[])}),Y=e=>{const{formatMessage:t}=Object(r.c)(),s=Object(o.a)(),a=Object(o.g)(),f=Object(o.i)(),{issueActions:b}=Object(u.b)(f),[g]=Object(p.d)(f),[h]=Object(c.a)(a,"timetracking"),y=h.value,[O]=Object(m.c)(),[j]=Object(l.a)(a,"com.atlassian.jira.plugin.system.customfieldtypes:flagged"),[{value:v}]=Object(d.a)({issueKey:a,fieldKey:j||""}),E=Object(n.useMemo)((()=>g.canEditIssues&&!(null==b||!b.includes("flagActions"))),[g,b]),w=Object(n.useMemo)((()=>(null==s?void 0:s.value)!==i.a.MOBILE_ISSUE&&g.canLogWork&&!!y&&O.isTimeTrackingEnabled),[s,g,y,O]);return Object(n.useMemo)((()=>[...w?[{Component:G,label:t(q),key:"logWork"}]:[],...E?[{Component:V,label:t(v?$:K),key:"flagIssue"}]:[],...A({ecosystemActions:e})]),[w,e,v,t,E])}},
"./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-configuration-dropdown-group/configure-issue/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({configure:{id:"issue.configure",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"}})},"./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-manipulation-dropdown-group/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return K})),s.d(t,"b",(function(){return $}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/controllers/intl/src/index.js")),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),c=s("./src/packages/issue/project-context-service/src/main.js"),l=s("./src/packages/issue/project-permissions-service/src/main.js"),d=s("./node_modules/react-redux/es/index.js"),u=s("./src/packages/issue/issue-view/src/actions/clone-modal-actions.js"),p=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js");const m=({onCloneItemClick:e,onClick:t,label:s,setDropdownItemRef:i,itemKey:r})=>{const o=Object(n.useCallback)((()=>{e(),null==t||t(r)}),[e,t,r]);return a.a.createElement(p.a,{key:"clone",onClick:o,innerRef:i},s)};m.displayName="CloneIssue";var f=m,b=s("./node_modules/react-intl/lib/index.es.js"),g=Object(b.defineMessages)({clone:{id:"issue.clone",defaultMessage:"Clone"}}),h=Object(d.connect)(null,(e=>({onCloneItemClick:()=>{e(Object(u.b)())}
})))(f);const y=g.clone,O=({onClick:e,label:t,setDropdownItemRef:s,itemKey:i})=>{const o=`/secure/ConvertSubTask.jspa?id=${Object(r.f)()||""}`,c=Object(n.useCallback)((()=>{null==e||e(i),window.location.assign(o)}),[e,i,o]);return a.a.createElement(p.a,{key:"convert-to-issue",onClick:c,innerRef:s},t)};O.displayName="ConvertToIssue";var j=O;const v=Object(b.defineMessages)({convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}}).convertToIssue,E=({onClick:e,label:t,setDropdownItemRef:s,itemKey:i})=>{const o=`/secure/ConvertIssue.jspa?id=${Object(r.f)()||""}`,c=Object(n.useCallback)((()=>{null==e||e(i),window.location.assign(o)}),[e,i,o]);return a.a.createElement(p.a,{key:"convert-to-subtask",onClick:c,innerRef:s},t)};E.displayName="ConvertToSubtask";var w=E;const k=Object(b.defineMessages)({convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"}}).convertToSubtask
;var C=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js");const S=({onDeleteIssueClick:e,onClick:t,label:s,setDropdownItemRef:i,itemKey:r})=>{const o=Object(n.useCallback)((()=>{e(),null==t||t(r)}),[e,t,r]);return a.a.createElement(p.a,{key:"delete",onClick:o,innerRef:i},s)};S.displayName="DeleteIssue";var I=S,T=Object(b.defineMessages)({delete:{id:"issue.delete",defaultMessage:"Delete"}});var _=Object(d.connect)(null,(e=>({onDeleteIssueClick:()=>{e(Object(C.e)())}})))(I);const P=T.delete;var x=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js");const D=({onLinkToParentClick:e,onClick:t,label:s,setDropdownItemRef:i,itemKey:r})=>{const o=Object(n.useCallback)((()=>{e(),null==t||t(r)}),[e,t,r]);return a.a.createElement(p.a,{key:"link-to-parent",onClick:o,innerRef:i},s)};D.displayName="LinkToParent";var A=D,M=Object(b.defineMessages)({addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{
id:"issue.change-parent-level",defaultMessage:"Change parent"}});var L=Object(d.connect)(null,(e=>({onLinkToParentClick:()=>{e(Object(x.h)())}})))(A);const R=M.addToParentLevel,N=M.changeParentLevel,F=({onClick:e,label:t,setDropdownItemRef:s,itemKey:i})=>{const c=Object(r.f)(),l=Object(r.g)(),[d]=Object(o.b)({issueKey:l,fieldKey:"issuetype"}),u=(null==d?void 0:d.subtask)?`/secure/MoveSubTaskChooseOperation!default.jspa?id=${c||""}`:`/secure/MoveIssue!default.jspa?id=${c||""}`,m=Object(n.useCallback)((()=>{null==e||e(i),window.location.assign(u)}),[e,i,u]);return a.a.createElement(p.a,{key:"move",onClick:m,innerRef:s},t)};F.displayName="MoveIssue";var U=F;const V=Object(b.defineMessages)({move:{id:"issue.move",defaultMessage:"Move"}}).move,K=(e,t)=>({name:"",key:"IssueManipulationDropdownGroup",items:e.reduce(((e,{Component:s,label:n,key:i})=>(s&&e.push(a.a.createElement(s,{label:n,key:i,itemKey:i,onClick:t})),e)),[])}),$=e=>{
const{formatMessage:t}=Object(i.c)(),s=Object(r.g)(),a=Object(r.i)(),[d]=Object(o.b)({issueKey:s,fieldKey:"hierarchy-level-above"}),[u]=Object(o.b)({issueKey:s,fieldKey:"issuetype"}),[p]=Object(o.b)({issueKey:s,fieldKey:"subtasks"}),m=Object(c.a)(a),f=Object(c.f)(a),b=null==u?void 0:u.subtask,[g]=Object(l.d)(a),O=Object(n.useMemo)((()=>{const e=!(null==d||!d.name),t=(null==d?void 0:d.issueTypeIds.length)>0;return e&&g.canEditIssues&&t}),[d,g]),E=Object(n.useMemo)((()=>{const e=(null==p?void 0:p.length)>0,t=(f||[]).filter((e=>e.subtask)).length>0;return!b&&!e&&t&&!m}),[p,f,b,m]),C=Object(n.useMemo)((()=>b&&!m),[b,m]);return Object(n.useMemo)((()=>[...O?[{Component:L,label:t(e?N:R),key:"linkToParent"}]:[],...E?[{Component:w,label:t(k),key:"convertToSubtask"}]:[],...C?[{Component:j,label:t(v),key:"convertToIssue"}]:[],...g.canMoveIssue?[{Component:U,label:t(V),key:"moveIssue"}]:[],...g.canCloneIssue?[{Component:h,label:t(y),key:"cloneIssue"}]:[],...g.canDeleteIssue?[{Component:_,
label:t(P),key:"deleteIssue"}]:[]]),[g,O,C,E,t,e])}},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-create-icon.b72a10e724bc55a4d580df6e4dc082f7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));s("./node_modules/react-magnetic-di/lib/esm/index.js");var n=s("./src/packages/issue/issue-context-service/src/main.js"),a=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),i=s("./src/packages/servicedesk/common/src/itsm-practices/constants.js")
;const r=({issueKey:e})=>Object(a.b)({issueKey:e,fieldKey:"servicedesk-practices"}),o=()=>{const e=Object(n.g)(),[t]=r({issueKey:e});return Array.isArray(t)&&(null==t?void 0:t.includes(i.c))}},"./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-configuration-href.js":function(e,t,s){"use strict"
;var n=s("./src/packages/platform/utils/constants/src/project-types.js"),a=s("./src/packages/platform/utils/types/src/general.js"),i=s("./src/packages/issue/issue-context-service/src/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),o=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),c=s("./src/packages/issue/project-context-service/src/main.js"),l=s("./src/packages/issue/project-permissions-service/src/main.js"),d=s("./src/packages/project-settings/common/src/urls.js"),u=s("./src/packages/issue/issue-view/src/configurations.js"),p=s("./src/packages/issue/issue-view/src/feature-flags.js"),m=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-configuration-dropdown-group/configure-issue/messages.js"),f=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js");t.a=e=>{
const t=Object(i.i)(),s=Object(c.i)(t),b=Object(i.g)(),g=Object(i.l)(),h=Object(c.a)(t),y=Object(l.b)(t),O=h&&y,[j]=Object(r.b)({issueKey:b,fieldKey:"issuetype"}),[{value:v}]=Object(o.c)(b);let E="issuetype";!h&&s===n.g&&(Object(p.is2afErrorCleanupGroup2Enabled)()?v:null!==v)&&(E=Object(f.a)("com.atlassian.servicedesk:vp-origin",v));const w=void 0!==E?E:"issuetype",[k]=Object(r.b)({issueKey:b,fieldKey:w});if(h&&O&&s){const{pathname:n,search:i}=window.location;return Object(d.a)(Object(a.c)(""),s,t,Object(p.is2afErrorCleanupGroup1Enabled)()&&null==j?void 0:j.id,{url:`${n}${i}`,title:e(m.a.swiftBacklink,{issueKey:b})})}
return!t||null==g||0===g||h?s?u.i[s]:u.i[n.h]:s===n.g?null==k||void 0===k.requestType||void 0===k.requestType.id?u.i[n.g]:Object(p.isJsmTicketConfigInSPAEnabled)()?`/jira/servicedesk/projects/${t}/settings/request-types/request-type/${k.requestType.id}`:`/servicedesk/admin/${t}/request-types/request-type/${k.requestType.id}`:g?`/plugins/servlet/project-config/${t}/issuelayout?screenId=${g}`:s?u.i[s]:u.i[n.h]}},"./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t)=>Object.keys(t).find((s=>null!==t[s].schema.custom&&t[s].schema.custom===e))},"./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js":function(t,s,n){"use strict"
;var a=n("./node_modules/memoize-one/dist/memoize-one.esm.js"),i=n("./src/packages/platform/ui/field-config/src/index.js"),r=n("./src/packages/servicedesk/sla-panel/src/main.js"),o=n("./src/packages/issue/issue-view/src/feature-flags.js"),c=n("./node_modules/react/index.js"),l=n.n(c),d=n("./node_modules/react-intl/lib/index.es.js"),u=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/lodash/flow.js"),m=n.n(p),f=n("./node_modules/lodash/noop.js"),b=n.n(f),g=n("./src/packages/platform/observability/browser-metrics/src/index.js"),h=n("./src/packages/issue/fields/components/field-heading/src/styled.js"),y=n("./src/packages/issue/fields/components/field-pin/src/index.js"),O=n("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js"),j=n("./src/packages/issue/issue-view/src/common/messages/drafts.js"),v=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),E=n("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),w=n("./src/packages/issue/issue-view/src/selectors/drafts/selectors.js"),k=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),C=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),S=n("./src/packages/issue/issue-view/src/views/constants.js"),I=n("./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js"),T=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const P=T.default.div.withConfig({componentId:"sc-157n3v9-0"})`[class*='CompactWrapper']{margin-bottom:${2*_.e}px;}`;var x=n("./src/packages/platform/utils/fetch/src/utils/requests.js"),D=n("./src/packages/issue/issue-view/src/actions/editor-actions.js"),A=n("./src/packages/issue/issue-view/src/common/constants/flags.js"),M=n("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),L=n("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),R=n("./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js"),N=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),F=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),U=n("./src/packages/issue/issue-view/src/common/util/get-element/index.js"),V=n("./node_modules/reselect/lib/index.js"),K=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const $=Object(V.createSelector)(N.w,K.C,((e,t)=>({objectId:e,containerId:t}))),W=Object(V.createSelector)(K.d,(e=>e&&e.tabs||{})),B=e=>Object(V.createSelector)(W,(t=>Boolean(Object.keys(t).find((s=>t[s].items.find((t=>t.id===e)))))));var H=n("./src/packages/issue/issue-view/src/views/connect-field.js"),G=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),q=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),z=n("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),Y=n("./src/packages/issue/fields/components/inline-edit/src/ui/index.js");const Q=T.default.div.withConfig({componentId:"sc-1oys0dl-0"
})`${e=>e.isEditing?"":`\n        & ${Object(o.isInlineEditBumpEnabled)()?"form > div > div > div":"> div > div > div > div > div"} {\n            min-height: 32px !important;\n        }\n        & ${Object(o.isInlineEditBumpEnabled)()?"form > div > div > div > div":"> div > div > div > div > div > div"} {\n            padding: 0 6px;\n        }\n    `} margin-bottom:${e=>!0!==e.isGrouped?3*_.e:0}px;`,J=e=>l.a.createElement(Q,{isEditing:e.isEditing,isGrouped:e.isGrouped,"data-testid":e["data-testid"]},Object(o.isInlineEditBumpEnabled)()?l.a.createElement(Y.a,e):l.a.createElement(z.a,e));J.displayName="CompactInlineEditStateless";var Z=J,X=n("./src/packages/issue/issue-view/src/common/component/renderer/index.js"),ee=Object(d.defineMessages)({nonEditablePlaceholderText:{id:"issue.views.field.rich-text.nonEditablePlaceholderText",defaultMessage:"None"}}),te=n("./node_modules/react-loosely-lazy/lib/esm/index.js"),se=n("./src/packages/issue/issue-view/src/common/component/editor/async.js")
;const ne=T.default.div.withConfig({componentId:"sc-7s6a95-0"})`width:100%;`,ae=Object(te.h)((()=>n.e("async-editor-view").then(n.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class ie extends c.Component{render(){const e=l.a.createElement(se.b,{useDeprecatedGetScrollParent:!0,mediaContext:this.props.mediaContext,defaultValue:this.props.value});return l.a.createElement(ne,{"data-test-id":"issue.views.field.rich-text.editor-container"},l.a.createElement(se.a,{packageName:"issue",fallback:e},l.a.createElement(ae,{baseUrl:this.props.baseUrl,portalElement:this.props.portalElement,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,emojiProvider:this.props.emojiProvider,externalId:this.props.externalId,
defaultValue:this.props.value,onCancel:this.props.onCancel,onBlur:this.props.onBlur,onSave:this.props.onSave,onChange:this.props.onChange,isDisabled:this.props.isDisabled,isInvalid:this.props.isInvalid,isExpanded:this.props.isExpanded,shouldFocus:this.props.shouldFocus,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste})))}}ie.displayName="RichTextFieldView",ie.displayName="RichTextFieldView",ie.defaultProps={isDisabled:!1,isInvalid:!1,isExpanded:!1,shouldFocus:!1,value:null,mediaContext:null,mentionEncoder:null,emojiProvider:null,onPaste:b.a};const re=T.default.div.withConfig({componentId:"sc-9qk4vv-0"})`width:100%;`,oe=T.default.div.withConfig({componentId:"sc-9qk4vv-1"})`width:100%;& div[data-read-view-fit-container-width]{margin-left:-${_.e}px;margin-top:-${_.e}px;display:flex;align-items:center;word-break:break-all;}`,ce=["isEditable","isEditing","externalId","noValueText","mediaContext","adfValue"]
;class le extends c.Component{constructor(...e){super(...e),this.onMouseDownEditView=()=>{this.mouseDownSelection=window.getSelection().toString()},this.onEditRequested=()=>{const e=window.getSelection().toString(),t=e&&0!==e.length,s=this.mouseDownSelection&&0!==this.mouseDownSelection.length;t||s||this.props.onEditRequest()},this.getEditValue=()=>this.props.adfValue,this.getNonEditablePlaceholderText=()=>this.props.intl.formatMessage(ee.nonEditablePlaceholderText),this.mouseDownSelection=void 0,this.renderContent=()=>Object(o.isInlineEditBumpEnabled)()?l.a.createElement(X.a,{mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,adf:Object(q.i)(this.props.adfValue),placeholder:this.props.isEditable?this.props.noValueText:this.getNonEditablePlaceholderText()}):l.a.createElement(re,null,l.a.createElement(X.a,{mediaContext:this.props.mediaContext,
mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,adf:Object(q.i)(this.props.adfValue),placeholder:this.props.isEditable?this.props.noValueText:this.getNonEditablePlaceholderText()})),this.renderEditView=()=>l.a.createElement(ie,{baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,portalElement:this.props.portalElement,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,contextIdentifier:this.props.contextIdentifier,activityProvider:this.props.activityProvider,externalId:this.props.externalId,isDisabled:void 0,isExpanded:!0,shouldFocus:!0,value:this.getEditValue(),onCancel:this.props.onCancel,onChange:this.props.onChange,onBlur:this.props.onBlur,onSave:this.props.onConfirm,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste})}componentDidMount(){this.props.onExperienceSuccess()}shouldComponentUpdate(e){
return!ce.every((t=>this.props[t]===e[t]))}renderReadView(){const{intl:e,isEditable:t,isMobile:s,fieldId:n,label:a}=this.props;return l.a.createElement("div",{onMouseDown:this.onMouseDownEditView,role:"presentation","data-test-id":`issue.views.field.rich-text.${n}`},Object(o.isInlineEditBumpEnabled)()?l.a.createElement(oe,null,l.a.createElement(Z,{readView:this.renderContent||null,isEditing:!1,isEditable:t,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:a}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:a}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:a}),onEdit:this.onEditRequested,editView:t?()=>l.a.createElement("div",null):null,onConfirm:b.a,onCancel:b.a,readViewFitContainerWidth:!s})):l.a.createElement(Z,{label:"",isLabelHidden:!0,readView:this.renderContent(),onEditRequested:this.onEditRequested,isEditing:!1,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:a}),
confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:a}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:a}),editView:t?l.a.createElement("div",null):null,onConfirm:b.a,onCancel:b.a,isFitContainerWidthReadView:!s}))}render(){return this.props.isEditing?this.renderEditView():this.renderReadView()}}le.displayName="RichTextInlineEditView",le.displayName="RichTextInlineEditView",le.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",adfValue:void 0,contextIdentifier:void 0,onExperienceSuccess:b.a};var de=Object(d.injectIntl)(le);const ue=Object(d.defineMessages)({noValueText:{id:"issue.placeholder-for-empty-issue-description-field",defaultMessage:"Add a description..."}});function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const me=e=>{const{onEditRequest:t,onConfirm:s,isEditing:n}=e
;Object(c.useEffect)((()=>{n?Object(g.c)().markTimeToFinishTask({key:S.a.DESCRIPTION.TIME_TO_RENDER_EDIT_VIEW}):(Object(g.c)().markTimeToFeedback({key:S.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION}),Object(g.c)().markTimeToFeedback({key:S.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION}))}),[n]);const a=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:S.a.DESCRIPTION.TIME_TO_RENDER_EDIT_VIEW,cancelExisting:!0}),t()}),[t]),i=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:S.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION,cancelExisting:!0}),Object(g.c)().markStartOfInteraction({key:S.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION,cancelExisting:!0}),s()}),[s]);return l.a.createElement(de,pe({},e,{onEditRequest:a,onConfirm:i}))};me.displayName="DescriptionField";var fe=m()(Object(C.b)("description"),Object(H.a)((()=>({fieldId:"description",shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:t,value:s})=>((e,t,s)=>{
const n=`${e}/rest/internal/3/issue/${t}/description`,a=JSON.stringify(s);return Object(x.e)(n,{body:a})})(e,t,s),canContainMediaContent:!0,onSaveFailureFlagType:A.D,additionalProps:(e,t)=>{const s=Object(N.f)(e);return{baseUrl:s,portalElement:B("description")(e)?Object(U.b)()||document.body:void 0,adfValue:Object(v.g)("description")(e),htmlValue:Object(v.i)("description")(e),isInvalid:Object(v.k)("description")(e),invalidMessage:Object(v.j)("description")(e),mediaContext:Object(F.a)(e),mentionProvider:Object(M.a)(e),contextIdentifier:$(e),mentionEncoder:Object(L.a)(s),activityProvider:Object(R.a)(e),externalId:"issue.descriptionHtml",noValueText:t.formatMessage(ue.noValueText)}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(D.b)()),onSaveFailure:()=>e(Object(D.c)()),onChangeFailure:()=>e(Object(D.a)())})}))))(me);class be extends c.Component{componentDidMount(){this.props.onExperienceSuccess()}componentDidUpdate(e){
const{isEditing:t,isWaiting:s,hasDraft:n}=this.props,a=!(e.isEditing||t||s||n),i=a&&e.hasDraft&&!e.isWaiting,r=a&&!e.hasDraft&&e.isWaiting;i?Object(g.c)().markTimeToFinishTask({key:S.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION}):r&&Object(g.c)().markTimeToFinishTask({key:S.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION})}render(){const{area:e,label:t,fieldId:s,hasDraft:n,isEditing:a,isWaiting:i,intl:r}=this.props,o="content"===e?O.c:h.e,c="content"===e?O.e:h.f,d=Object(I.a)(e);return l.a.createElement(P,null,l.a.createElement(o,null,l.a.createElement(O.b,null,l.a.createElement(c,null,t),!n||a||i?null:l.a.createElement(O.a,null,`\u2022 ${r.formatMessage(j.a.draftIndicator)}`),!0===d&&l.a.createElement(y.a,{fieldId:s,label:t}))),l.a.createElement(fe,null))}}be.displayName="Description",be.defaultProps={area:"context",onExperienceSuccess:b.a},be.displayName="Description"
;var ge=m()(d.injectIntl,Object(k.c)("description-container"),Object(C.b)("description"),Object(E.a)(),Object(u.connect)((e=>({label:Object(v.m)("description")(e),hasDraft:Object(w.a)("description")(e),isEditing:Object(v.D)("description")(e),isWaiting:Object(v.F)("description")(e)})),{}),Object(E.a)())(be),he=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),ye=n("./src/packages/issue/issue-view/src/common/styles/issue-value.js"),Oe=n("./node_modules/@atlaskit/textarea/dist/es2019/text-area.js");const je=T.default.div.withConfig({componentId:"sc-1g0dja4-0"})`${Object(ye.f)("textarea")};`,ve=e=>{const t=(e=>e?e.split(/\r\n|\r|\n/).length:0)(e.value),s=e.scrollRows||t,n="content"===e.area?20:5,a=Math.min(n,Math.max(2,s));return l.a.createElement(je,null,l.a.createElement(Oe.a,{value:e.value,onChange:t=>{e.onChange(t.target.value)},isInvalid:!!e.invalidMessage,invalidMessage:e.invalidMessage,shouldFitContainer:!0,autoFocus:!0,
isLabelHidden:!0,label:"",minimumRows:a}))};ve.displayName="TextAreaField",ve.defaultProps={value:"",invalidMessage:null,scrollRows:null,area:"context"},ve.displayName="TextAreaField";var Ee=ve;const we=T.default.div.withConfig({componentId:"j9gtb9-0"})`[class*='CompactWrapper'] > *{margin-left:0;}[class*='ContentWrapper']{padding-left:0;padding-right:0;}`,ke=Object(T.default)(we).withConfig({componentId:"j9gtb9-1"})`[class*='CompactWrapper']{margin-bottom:${2*_.e}px;}`,Ce=T.default.div.withConfig({componentId:"j9gtb9-2"})`width:100%;& div[data-read-view-fit-container-width]{margin-left:-${_.e}px;margin-top:-${_.e}px;display:flex;align-items:center;word-break:break-all;}`,Se=T.default.div.withConfig({componentId:"j9gtb9-3"})`padding:0 6px;`;class Ie extends c.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e)},this.onConfirm=()=>{const{value:e}=this.props
;Object(o.is2afErrorCleanupGroup1Enabled)()?null!==e&&this.props.onChange(Object(q.j)(e)):this.props.onChange(Object(q.j)(e)),this.props.onConfirm()},this.readView=void 0}renderReadView(){const{value:e,noValueText:t,area:s}=this.props;return e&&0!==e.trim().length?"content"===s||"content-request"===s?l.a.createElement(ye.d,{innerRef:e=>{this.readView=e}},e&&Object(q.j)(e)):l.a.createElement(ye.c,{innerRef:e=>{this.readView=e},maxRows:5},e):Object(o.isInlineEditBumpEnabled)()?l.a.createElement(Se,null,l.a.createElement(ye.b,null,t)):l.a.createElement(ye.b,null,t)}renderEditView(){let e;if(this.readView){const{scrollHeight:t}=this.readView,s=window.getComputedStyle(this.readView),n=Number.parseFloat(s.getPropertyValue("line-height"));e=Math.round(t/n)}return l.a.createElement(Ee,{value:this.props.value,onChange:this.onChange,invalidMessage:this.props.invalidMessage,scrollRows:e,area:this.props.area})}getField(){return Object(o.isInlineEditBumpEnabled)()?l.a.createElement(he.a,{
onEscape:this.props.onCancel},l.a.createElement(Ce,null,l.a.createElement(Z,{isLabelHidden:!0,label:this.props.label,isEditable:this.props.isEditable,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!0,isConfirmOnBlurDisabled:this.props.isConfirmOnBlurDisabled,editButtonLabel:this.props.intl.formatMessage(G.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:this.props.intl.formatMessage(G.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:this.props.intl.formatMessage(G.a.cancelButtonLabel,{fieldName:this.props.label})}))):l.a.createElement(he.a,{onEscape:this.props.onCancel},l.a.createElement(Z,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,
disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!0,isConfirmOnBlurDisabled:this.props.isConfirmOnBlurDisabled,editButtonLabel:this.props.intl.formatMessage(G.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:this.props.intl.formatMessage(G.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:this.props.intl.formatMessage(G.a.cancelButtonLabel,{fieldName:this.props.label})}))}render(){const{area:e,fieldId:t,label:s}=this.props,n="context"===e?ke:we,a=Object(I.a)(e);return l.a.createElement(n,null,"content"===e?l.a.createElement(O.c,null,l.a.createElement(O.e,null,s)):l.a.createElement(h.e,null,l.a.createElement(h.f,null,s),!0===a&&l.a.createElement(y.a,{fieldId:t,label:s})),this.getField())}}Ie.displayName="TextAreaInlineEditView",Ie.displayName="TextAreaInlineEditView",Ie.defaultProps={isEditable:!1,isEditing:!1,
isConfirmOnBlurDisabled:!1,value:"",label:"",noValueText:null,invalidMessage:null};var Te=Object(d.injectIntl)(Ie),_e=Object(d.defineMessages)({noValue:{id:"issue.common.multi-line-text.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"}}),Pe=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(_e.noValue),area:t.area})})))(Te),xe=n("./src/packages/platform/controllers/intl/src/index.js"),De=n("./src/packages/issue/issue-view/src/views/common/with-container-width/index.js");const Ae=Object(d.defineMessages)({noValueText:{id:"issue.multiline-field.empty-placeholder",defaultMessage:"None"}}),Me=["label","area","hasDraft","isEditing","containerWidth"];function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Re(e,t){if(null==e)return{};var s,n,a=function(e,t){
if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ne=e=>{const{label:t,area:s,hasDraft:n,isEditing:a,containerWidth:i}=e,r=Re(e,Me),o=Object(xe.c)(),c=n&&!a,d="content"===s?O.c:h.e,u="content"===s?O.e:h.f,p=Object(I.a)(s);return l.a.createElement(P,null,l.a.createElement(d,null,l.a.createElement(O.b,null,l.a.createElement(u,null,t),!0===c?l.a.createElement(O.a,null,`\u2022 ${o.formatMessage(j.a.draftIndicator)}`):null,!0===p&&l.a.createElement(y.a,{fieldId:e.fieldId,label:t}))),l.a.createElement(de,Le({isEditing:a,label:t},r)))};Ne.displayName="MultilineField";var Fe=Object(H.a)(((e,t)=>({fieldId:t.fieldId,shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:s,value:n})=>((e,t,s,n)=>{
const a=`${e}/rest/api/3/issue/${t}`;return Object(x.e)(a,{body:JSON.stringify({fields:{[s]:n}})})})(e,s,t.fieldId,n),canContainMediaContent:!0,onSaveFailureFlagType:A.D,additionalProps:(e,s)=>{const n=Object(N.f)(e);return{baseUrl:n,portalElement:B(t.fieldId)(e)?Object(U.b)()||document.body:void 0,adfValue:Object(v.g)(t.fieldId)(e),hasDraft:Object(w.a)(t.fieldId)(e),htmlValue:Object(v.i)(t.fieldId)(e),isInvalid:Object(v.k)(t.fieldId)(e),invalidMessage:Object(v.j)(t.fieldId)(e),mediaContext:Object(F.a)(e),mentionProvider:Object(M.a)(e),mentionEncoder:Object(L.a)(n),activityProvider:Object(R.a)(e),externalId:`issue.${t.fieldId}`,noValueText:s.formatMessage(Ae.noValueText),area:t.area}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(D.b)()),onSaveFailure:()=>e(Object(D.c)()),onChangeFailure:()=>e(Object(D.a)())})})))(Object(De.a)(Ne));var Ue=Object(u.connect)(((e,t)=>({isRichTextField:Object(v.I)(t.fieldId)(e)})),{})((e=>{const{isRichTextField:t,fieldId:s,area:n="context"}=e
;return t?l.a.createElement(Fe,{fieldId:s,area:n}):l.a.createElement(Pe,{fieldId:s,area:n})})),Ve=n("./src/packages/issue/issue-view/src/views/issue-base/context/approval/index.js"),Ke=n("./node_modules/lodash/memoize.js"),$e=n.n(Ke),We=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js"),Be=n("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),He=n("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),Ge=n("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),qe=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),ze=n("./src/packages/issue/analytics/src/services/suggestions/index.js"),Ye=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");const Qe=(e,t,s,n,a,i)=>{if(null==e)return;const r="access",o="fieldPrefetchCache",c=e({action:r,actionSubject:o,actionSubjectId:n}),l={fieldSelectionSessionId:n,
fieldFetchSessionId:i,prefetchSessionId:s,cacheHit:t,fieldId:a};Object(Ye.b)(c,`${o} access`,n,l)},Je=(e,t,s,n,a)=>Qe(e,!0,t,s,a,n),Ze=(e,t,s,n)=>Qe(e,!1,t,s,n);var Xe=n("./src/packages/issue/issue-context-service/src/main.js"),et=n("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js"),tt=n("./src/packages/issue/project-permissions-service/src/main.js"),st=n("./src/packages/issue/smart-field-prefetch/src/context.js"),nt=n("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js");function at(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function it(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?at(Object(s),!0).forEach((function(t){rt(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):at(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
var ot=n("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),ct=n("./node_modules/lodash/isNil.js"),lt=n.n(ct),dt=n("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),ut=n("./node_modules/@atlaskit/form/dist/es2019/messages.js"),pt=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),mt=n("./src/packages/issue/fields/components/user-picker/src/main.js"),ft=n("./src/packages/profilecard-next/src/common/constants.js"),bt=n("./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js"),gt=n("./src/packages/issue/issue-view/src/views/field/user/assets/add.png"),ht=n.n(gt),yt=n("./node_modules/@atlaskit/theme/dist/es2019/index.js"),Ot=T.default.div.withConfig({componentId:"sc-1d5xvfw-0"})`padding-right:${_.e}px;padding-top:1px;& span[role='img']{background-color:${yt.a.N30} !important;}`,jt=T.default.div.withConfig({componentId:"sc-1ooq0cf-0"
})`width:100%;margin-left:-8px;margin-top:-8px;& form > div > div > div{height:32px;}&&& div.fabric-user-picker__value-container{height:30px;> div{padding-left:4px;+ div{padding-left:8px;}}}`,vt=T.default.div.withConfig({componentId:"sc-1m8b9bi-0"})`align-items:center;display:flex;${e=>e.isInlineEditBumpEnabled?"padding: 0px 4px":"padding-top: 1px"}`,Et=Object(d.defineMessages)({invitePeopleOption:{id:"issue.assignee.invite-people-option",defaultMessage:"Add teammate to Jira"},invitePeopleOptionAdmin:{id:"issue.assignee.invite-people-option-admin",defaultMessage:"Invite teammate to Jira"}});function wt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(s),!0).forEach((function(t){Ct(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ct(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class St extends c.Component{constructor(...e){super(...e),this.shouldTrackAssigneeInteractions=()=>"assignee"===this.props.fieldId,this.onChange=e=>{this.shouldTrackAssigneeInteractions()&&Object(g.c)().markStartOfInteraction({key:S.a.ASSIGNEE.TIME_TO_REFLECT_SELECTED,cancelExisting:!0}),this.props.onChange(e)},this.onDataRequest=e=>{!0!==e&&this.shouldTrackAssigneeInteractions()&&Object(g.c)().markStartOfInteraction({key:S.a.ASSIGNEE.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=(e=!0,t=0)=>{this.shouldTrackAssigneeInteractions()&&Object(g.c)().markTimeToFinishTask({
key:e?S.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS:S.a.ASSIGNEE.TIME_TO_REFLECT_INPUT_RESULT,collectors:[e=>kt(kt({},e),{},{resultsLength:t})]})},this.onEditRequested=()=>{this.shouldTrackAssigneeInteractions()&&Object(g.c)().markStartOfInteraction({key:S.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.renderReadViewWithContentWrapper=()=>{const e=this.props.fieldContentWrapper;return lt()(e)?this.renderReadView():l.a.createElement(e,null,this.renderReadView())},this.renderEditView=()=>{const{portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:a,value:i,onCancel:r,onConfirm:o,enablePeopleInvite:c}=this.props,d={portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:a,value:i,onCancel:r,onSelection:o,width:"100%",onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,onChange:this.onChange,enablePeopleInvite:c,invitePeopleOption:!0===c?this.getInvitePeopleOption():null}
;return l.a.createElement(mt.a,d)}}componentDidUpdate(e){if(this.shouldTrackAssigneeInteractions()){const{value:t,isEditing:s}=this.props;!1===e.isEditing&&!1===s&&e.value!==t&&Object(g.c)().markTimeToFinishTask({key:S.a.ASSIGNEE.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT});e.isEditing&&!s&&e.value!==t&&Object(g.c)().markTimeToFinishTask({key:S.a.ASSIGNEE.TIME_TO_REFLECT_SELECTED});!e.isEditing&&s&&setTimeout((()=>{Object(g.c)().markTimeToFeedback({key:S.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS})}),0)}}getActions(){const{fieldId:e}=this.props;return"reporter"===e?[ft.c,ft.b]:"assignee"===e?[ft.c,ft.a]:void 0}getInvitePeopleOption(){const{intl:e}=this.props,{isAdmin:t}=Object(pt.f)();return{name:e.formatMessage(t?Et.invitePeopleOptionAdmin:Et.invitePeopleOption),avatarUrl:ht.a}}renderReadView(){const{customReadView:e}=this.props;if(e)return e(this.props.value);const t=this.props.value||this.props.emptyOption||{avatarUrl:"",name:""};return l.a.createElement(bt.a,{userAccount:t,
analyticsData:{trigger:this.props.fieldId},position:"left-start",actions:this.getActions()},l.a.createElement(vt,{isInlineEditBumpEnabled:Object(o.isInlineEditBumpEnabled)()},l.a.createElement(Ot,null,l.a.createElement(dt.a,{borderColor:"transparent",src:t.avatarUrl,size:"small"})),t.name))}getEditButtonLabel(){const{intl:e,label:t,value:s,emptyOption:n}=this.props;return null!=s&&s.name?e.formatMessage(G.a.extendedEditButtonLabel,{inputFieldValue:s.name,fieldName:t}):null!=n&&n.name?e.formatMessage(G.a.extendedEditButtonLabel,{inputFieldValue:n.name,fieldName:t}):e.formatMessage(G.a.editButtonLabel,{fieldName:t})}render(){const{intl:e,label:t,isEditing:s,isEditable:n,isMobile:a,invalidMessage:i,fieldId:r,titleView:c=this.props.label,showPinButton:d,onCancel:u,customReadView:p}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,c),!0===d&&l.a.createElement(y.a,{fieldId:r,label:t})),l.a.createElement(h.g,{isEditing:s,
"data-test-id":`issue.views.field.user.${r}`,fixedHeight:!p},null!=i?l.a.createElement(ut.a,{key:`${r}-error-message`},i):null,l.a.createElement(he.a,{onEscape:u},Object(o.isInlineEditBumpEnabled)()?l.a.createElement(jt,null,l.a.createElement(Y.a,{editView:n?this.renderEditView:()=>null,readView:this.renderReadViewWithContentWrapper,hideActionButtons:!0,isEditing:s,isEditable:n,onEdit:this.onEditRequested,readViewFitContainerWidth:!a,editButtonLabel:this.getEditButtonLabel(),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:t})})):l.a.createElement(z.a,{editView:n?this.renderEditView():null,readView:this.renderReadViewWithContentWrapper(),areActionButtonsHidden:!0,disableEditViewFieldBase:!0,shouldConfirmOnEnter:!0,isEditing:s,isInvalid:!!i,invalidMessage:i,isLabelHidden:!0,label:t,onCancel:b.a,onConfirm:b.a,onEditRequested:this.onEditRequested,onFocus:b.a,isFitContainerWidthReadView:!a,
editButtonLabel:this.getEditButtonLabel(),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:t})}))))}}St.displayName="UserInlineEditView",St.displayName="UserInlineEditView",St.defaultProps={isMobile:!1,label:"",initialOptions:[],emptyOption:null,invalidMessage:null,value:null};var It=Object(d.injectIntl)(St);const Tt=e=>e?(e=>({avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"],id:e.accountId,name:e.displayName,byline:e.emailAddress}))(e):null,_t=e=>e?(e=>({avatarUrls:{"48x48":e.avatarUrl},displayName:e.name,accountId:e.id}))(e):null,Pt=["createAnalyticsEvent","getDefaultOptions","initFieldOptions","intl","issueKey","loggedInUser"];function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Dt(e,t){if(null==e)return{};var s,n,a=function(e,t){
if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const At=Object(d.defineMessages)({assignToMe:{id:"issue.assignee.text-for-logged-in-user",defaultMessage:"Assign to me"},unassignedOption:{id:"issue.assignee.text-when-no-value-is-provided",defaultMessage:"Unassigned"},automaticOption:{id:"issue.assignee.text-for-automatic-assignee",defaultMessage:"Automatic"}}),Mt=e=>e&&e.accountId,Lt=Object(a.a)((e=>({avatarUrl:"",name:e(At.unassignedOption)}))),Rt=Object(a.a)(((e,t)=>e?[{avatarUrl:e.avatarUrl,id:e.id,name:e.displayName,displayName:t(At.assignToMe)}]:[])),Nt=Object(a.a)(((e,t)=>e?[{avatarUrl:"",id:-1,name:t(At.automaticOption),displayName:t(At.automaticOption)}]:[])),Ft=Object(a.a)(((e,t)=>e?[{avatarUrl:"",id:null,
name:t(At.unassignedOption),displayName:t(At.unassignedOption)}]:[])),Ut=Object(a.a)(((e,t,s,n)=>[...!Boolean(t&&e&&e.id===t.accountId)&&n?Rt(e,s):[],...t?Ft(e,s):[],...Nt(e,s)])),Vt=(e,t)=>!!e&&t.toLowerCase().startsWith(e.toLowerCase()),Kt=Object(a.a)(((e,t)=>Object(a.a)((s=>{const n=Vt(s,t(At.assignToMe));return[...Vt(s,t(At.unassignedOption))?Ft(e,t):[],...n?Rt(e,t):[],...Vt(s,t(At.automaticOption))?Nt(e,t):[]]})))),$t=Object(a.a)(((e,t,s,n)=>(i,r)=>{if(!e)return Promise.resolve([]);const o=((e,t)=>Object(a.a)((s=>{const n=Vt(s,t(At.assignToMe));return[...Vt(s,t(At.unassignedOption))?Ft(e,t):[],...n?Rt(e,t):[],...Vt(s,t(At.automaticOption))?Nt(e,t):[]]})))(t,s)(i),c=null!=r?`&sessionId=${r}`:"",l=He.d.now(),d=i.length;return Object(qe.a)(`${e}${i}${c}`).then((e=>{Object(ze.b)("assignee",l,n,{sessionId:r,queryLength:d});const t=e.map(Tt).filter(Boolean);return[...o,...t]})).catch((e=>{throw Object(ze.a)("assignee",l,n,{sessionId:r}),e}))})),Wt=$e()(((e,t)=>(s,n)=>{if(!s&&null!=e){
const{prefetchSessionId:a,prefetched:i,fieldValuePromise:r,sessionId:o}=e,{createAnalyticsEvent:c}=t;if(i&&null!==r&&null!==o){const e=t.getDefaultOptions(s);Je(c,a,n||"",o,"assignee");const i=He.d.now();return r.then((t=>{Object(ze.b)("assignee",i,c,{sessionId:n,isPrefetched:!0,queryLength:0});const s=t.map(Tt).filter(Boolean);return[...e,...s]})).catch((e=>{throw Object(ze.a)("assignee",i,c,{sessionId:n,isPrefetched:!0}),e}))}return Ze(c,a,n||"","assignee"),t.fetchSuggestions(s,n)}return t.fetchSuggestions(s,n)}),((e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`)),Bt=e=>{Object(c.useLayoutEffect)((()=>e.initFieldOptions()),[]);const t=Object(c.useRef)(null);Object(c.useEffect)((()=>{t.current&&e.isEditing&&Object(ot.a)(t.current)}),[e.isEditing]);const[{value:s}]=Object(et.a)({issueKey:e.issueKey}),n=Object(Xe.i)(),[{canBeAssignedToIssues:a,canAssignIssues:i}]=Object(tt.d)(n),r=!!i,{formatMessage:o}=Object(xe.c)(),d=Ut(e.loggedInUser,s,o,!!a),u=Object(c.useCallback)((()=>{
const t=Object(st.a)(e.issueKey,"assignee");return l.a.createElement(t,{fieldId:"assignee"},(t=>{const n=Wt(t,e),{createAnalyticsEvent:a,getDefaultOptions:i,initFieldOptions:c,intl:u,issueKey:p,loggedInUser:m}=e,f=Dt(e,Pt);return l.a.createElement(It,xt({},f,{fetchSuggestions:n,fieldId:"assignee",value:Tt(s),initialOptions:d,isEditable:r,emptyOption:Lt(o)}))}))}),[o,d,r,e,s]);return l.a.createElement(Be.a,{name:"EDIT_FIELD"},l.a.createElement("div",{ref:e=>{t.current=e}},u()))};Bt.displayName="AssigneeView",Bt.displayName="AssigneeView";const Ht=(e,t)=>`${e}/rest/api/3/user/assignable/search?issueKey=${t}&recommend=true&query=`,Gt=async({baseUrl:e,issueKey:t,value:s,saveFieldData:n})=>{const a=null==s?null:s.accountId;if(await((e,t,s,n)=>Object(x.e)(((e,t,s)=>s?`${e}/rest/api/3/issue/${t}/assignee?sessionId=${s}`:`${e}/rest/api/3/issue/${t}/assignee`)(e,t,n),it(it({},nt.a),{},{body:JSON.stringify({accountId:s})})))(e,t,a,n),-1===a){try{
const s=await((e,t,s)=>Object(x.b)(((e,t,s)=>s?`${e}/rest/api/3/issue/${t}?fields=assignee&sessionId=${s}`:`${e}/rest/api/3/issue/${t}?fields=assignee`)(e,t,s),it({},nt.a)))(e,t,n),{assignee:a=null}=s.fields||{};if(null!==a){const e=Tt(s.fields.assignee);return{updatedFieldValue:_t(e)}}return{updatedFieldValue:null}}catch(i){Object(Ge.a)({meta:{id:"currentAssigneeFetch",packageName:"jiraIssueView"},error:i,sendToPrivacyUnsafeSplunk:!0})}return null}return null};var qt=m()(Object(We.a)(),Object(C.b)("assignee"),Object(H.a)(((e,t)=>(e=>({fieldId:"assignee",transformFromStateValue:Tt,transformToStateValue:_t,saveField:Gt,additionalProps:(t,s)=>{const n=Object(K.y)(t);return{portalElement:B(e.fieldId)(t)?Object(U.a)()||document.body:void 0,fetchSuggestions:$t(Ht(Object(N.f)(t),Object(N.x)(t)),n,s.formatMessage,e.createAnalyticsEvent),issueKey:Object(N.x)(t),getDefaultOptions:Kt(n,s.formatMessage),loggedInUser:n,showPinButton:Object(I.a)(e.area),analyticsAttributeIdRetriever:Mt,
enablePeopleInvite:!0}}}))(t))))(Bt),zt=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Yt=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),Qt=n("./src/packages/issue/fields/cascading-select-custom-field/src/ui/main.js"),Jt=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js");function Zt(){return(Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Xt=e=>{const{issueKey:t,fieldKey:s,label:n}=e,[a]=Object(zt.b)({issueKey:t,fieldKey:s}),[{value:i}]=Object(Yt.a)(t,s);return l.a.createElement(Qt.a,Zt({},e,{allowedValues:i&&i.allowedValues||[],isEditable:i&&i.isEditable||!1,label:i&&i.title||n,initialValue:a}))};Xt.displayName="CascadingSelectView";var es=Object(Jt.a)([Object(u.connect)(((e,{fieldId:t,area:s})=>({fieldKey:t,
fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect",error:Object(K.i)(e),issueKey:Object(N.x)(e),isMobile:Object(N.r)(e),label:Object(v.m)(t)(e),areOptionsOnSameRow:"content"===s||"content-request"===s,showPinButton:Object(I.a)(s)
})),{})])(Object(k.b)()(Xt)),ts=n("./src/packages/servicedesk/incident-management/issue-view/chat-channel/src/async.js"),ss=()=>l.a.createElement(ts.a,null),ns=n("./src/packages/issue/fields/components/inline-edit/src/feature-flags.js"),as=n("./src/packages/issue/fields/components/inline-edit/src/styled.js"),is=n("./node_modules/lodash/isEmpty.js"),rs=n.n(is),os=n("./node_modules/@atlaskit/tag/dist/es2019/tag/internal/simple/index.js"),cs=n("./node_modules/@atlaskit/tag-group/dist/es2019/TagGroup/index.js"),ls=n("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),ds=n("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),us=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js"),ps=Object(d.defineMessages)({showAll:{id:"issue.tag-view.show-all",defaultMessage:"Show all {peopleCount, plural, few {# people} many {# people} other {# people}}"},showLess:{id:"issue.tag-view.show-less",
defaultMessage:"Show less"}});const ms=T.default.div.withConfig({componentId:"k3mwxi-0"})`margin:-4px;width:100%;`;class fs extends c.Component{constructor(...e){super(...e),this.state={isShowingMore:!1},this.handleTagSelected=e=>{Object(us.a)(e.target,e.currentTarget)&&(e.stopPropagation(),this.props.onClick&&this.props.onClick())},this.handleTagMouseDown=e=>{e.preventDefault(),Object(us.a)(e.target,e.currentTarget)&&e.stopPropagation()},this.handleShowHideMore=e=>{e.preventDefault(),e.stopPropagation(),this.setState({isShowingMore:!this.state.isShowingMore})},this.renderShowHide=()=>{var e;const{formatMessage:t}=this.props.intl;return l.a.createElement("div",{onClick:this.handleShowHideMore,role:"presentation",onMouseDown:this.handleTagMouseDown,"data-testid":"issue-view.common.tag.tag-view.show-hide-more"},l.a.createElement(os.a,{appearance:this.props.tagAppearance,text:this.state.isShowingMore?t(ps.showLess):t(ps.showAll,{
peopleCount:null===(e=this.props.value)||void 0===e?void 0:e.length}),href:"#"}))},this.renderTag=e=>{const t=l.a.createElement(os.a,{appearance:this.props.tagAppearance,text:void 0!==e.content?e.content:e.label,color:e.color,href:this.props.shouldHideLinks?void 0:e.href,elemBefore:e.elemBefore});return this.props.isUserTag?l.a.createElement(bt.a,{userAccount:e,analyticsData:{trigger:"user-tag"},position:"left-start"},t):t}}render(){const{value:e,noValueText:t,truncateValues:s}=this.props;if(e&&!rs()(e)){const t=s&&!this.state.isShowingMore&&e.length>8?e.slice(0,8):e;return l.a.createElement(ms,null,l.a.createElement(cs.a,null,t.map((e=>l.a.createElement(ls.a,{content:void 0!==e.content&&e.content.length>20?e.content:"",key:null!=e.key?e.key:e.value},l.a.createElement("div",{onClick:this.handleTagSelected,onMouseDown:this.handleTagMouseDown,onKeyPress:this.handleTagSelected,key:null!=e.key?e.key:e.value,role:"presentation"},this.renderTag(e))))),s&&e.length>8&&this.renderShowHide()))}
return l.a.createElement(ye.b,null,t)}}fs.displayName="TagView",fs.defaultProps={isUserTag:!1,shouldHideLinks:!1,value:null,noValueText:null,tagAppearance:"default"};const bs=Object(ds.a)("tagView",{onClick:"clicked"})(fs);var gs=Object(d.injectIntl)(bs),hs=n("./node_modules/@atlaskit/select/dist/es2019/CheckboxSelect.js"),ys=n("./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js");class Os extends c.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:a}=this.props;return l.a.createElement(ys.a,{validationState:null!=e?"error":null,validationMessage:e},l.a.createElement(hs.a,{options:t,placeholder:s,onChange:n,value:a,tabSelectsValue:!1,autoFocus:!0}))}}Os.displayName="CheckboxFieldView",Os.displayName="CheckboxFieldView",Os.defaultProps={value:[],options:[],placeholder:null,invalidMessage:null};class js extends c.Component{constructor(...e){super(...e),this.renderReadView=()=>l.a.createElement(gs,{
value:this.props.value,noValueText:this.props.noValueText,tagAppearance:this.props.tagAppearance,shouldHideLinks:this.props.isMobile}),this.renderEditView=()=>l.a.createElement(Os,{value:this.props.value,options:this.props.options,onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage})}render(){const{intl:e,label:t,onCancel:s,isEditable:n,isEditing:a,onConfirm:i,onEditRequest:r,isMobile:o,fieldId:c,showPinButton:d}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,t),!0===d&&l.a.createElement(y.a,{fieldId:c,label:t})),l.a.createElement(h.g,{isEditing:a},Object(ns.a)()?l.a.createElement(as.a,null,l.a.createElement(Y.a,{isLabelHidden:!0,label:t,readView:l.a.createElement(as.b,null,this.renderReadView()),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:a,onConfirm:i,onCancel:s,onEscape:s,onEditRequested:r,isFitContainerWidthReadView:!o,
editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:t}),isEditable:n})):l.a.createElement(he.a,{onEscape:s},l.a.createElement(z.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:a,onConfirm:i,onCancel:s,onEditRequested:r,isFitContainerWidthReadView:!o,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:t}),isEditable:n}))))}}js.displayName="CheckboxInlineEditView",js.displayName="CheckboxInlineEditView",js.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:[],label:"",placeholder:null,noValueText:null,tagAppearance:"default",invalidMessage:null}
;var vs=Object(d.injectIntl)(js);const Es=Object(d.defineMessages)({noValue:{id:"issue.context-items.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"},version_no_value_placeholder:{id:"issue.version.text-no-value",defaultMessage:"Select version"}}),ws=e=>({label:e.value,value:e.id}),ks=e=>e?e.map(ws):[],Cs=e=>e&&e.map((e=>({id:e.value,value:e.label}))),Ss=Object(d.defineMessages)({placeholder:{id:"issue.checkbox-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),Is=$e()((e=>(e=>e&&e.map(ws)||[])(e)));var Ts=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:ks,transformToStateValue:Cs,additionalProps:(e,s)=>({options:Is(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(Ss.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:s.formatMessage(Es.noValue),showPinButton:Object(I.a)(t.area)})
})))(vs),_s=n("./node_modules/react-async-component/commonjs/index.js"),Ps=n("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js");const xs=Object(_s.asyncComponent)({resolve:()=>n.e("async-cmdb-object-inline-edit-view").then(n.bind(null,"./src/packages/issue/fields/cmdb-object/src/ui/main.js")).then((e=>e.CmdbObjectMain)),name:"AsyncIssueCmdbObjectField"}),Ds=({children:e,packageName:t})=>l.a.createElement(Ps.a,{fallback:"flag",id:"issue-cmdb-object-field",packageName:t},e);Ds.displayName="IssueCmdbObjectFieldBoundary";const As=e=>l.a.createElement(Ds,{packageName:"issue-cmdb-object"},l.a.createElement(xs,e));As.displayName="AsyncIssueCmdbObjectFieldWithBoundary";var Ms=n("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),Ls=Object(H.a)(((e,{fieldId:t,area:s})=>({fieldId:t,additionalProps:e=>{var n,a;const i=Object(v.q)(t)(e)||{},r=Object(N.x)(e),o=Object(N.w)(e);return{area:s,issueKey:r,issueId:o,projectKey:Object(Ms.a)(r),
cmdbFieldConfig:null===(n=i.configuration)||void 0===n?void 0:n.cmdbFieldConfig,wasInsightRequestSuccessful:null===(a=i.configuration)||void 0===a?void 0:a.wasInsightRequestSuccessful,source:"insight"}}})))(As),Rs=n("./src/packages/cache/src/services/components/index.js"),Ns=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),Fs=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),Us=n("./src/packages/platform/utils/constants/src/fetch-default-options.js");function Vs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ks(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(s),!0).forEach((function(t){$s(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Vs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ws=5e3,Bs="smarts.fields.ranking";var Hs=(e,t,s,n,a,i)=>!t||t.length<=1?Promise.resolve(t):((e,t,s,n,a,i)=>{let r;const o=new Promise((e=>{r=setTimeout((()=>{pt.h.safeWarnWithoutCustomerData(Bs,"FRS has timeout after 5000ms"),Object(ze.a)(n,Ws,i,{sessionId:a}),e(t)}),s)})),c=e().then((e=>(r&&clearTimeout(r),e)));return Promise.race([o,c])})((()=>((e,t,s,n,a,i)=>{const r=t.map((e=>({[e.id]:e}))).reduce(((e,t)=>Ks(Ks({},e),t)),{}),{atlassianAccountId:o,cloudId:c,baseUrl:l}=Object(pt.f)(),d=`${l}/gateway/api/fields/v2/recommendations/`,u=He.d.now();return Object(qe.a)(d,Ks(Ks({},Us.a),{},{method:"POST",body:JSON.stringify({context:{objectId:s,containerId:n,
principalId:o,product:"jira",tenantId:c,sessionId:a},fieldId:e,fieldObjects:t.map((({id:e,name:t})=>({id:e,value:t})))})})).then((({fieldObjects:t})=>(Object(ze.b)(e,u,i,{sessionId:a}),t.map((({id:e})=>r[e]))))).catch((s=>(Object(ze.a)(e,u,i,{sessionId:a}),pt.h.safeErrorWithoutCustomerData(Bs,`error while ranking ${e} via FRS`,s),t)))})(e,t,s,n,a,i)),t,Ws,e,a,i),Gs=Object(d.defineMessages)({placeholder:{id:"issue.components.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select component"},createNewItem:{id:"issue.components.create-new-component-message",defaultMessage:"Create new component"},recent:{id:"issue.components.recent-items",defaultMessage:"Recent components"},all:{id:"issue.components.all-items",defaultMessage:"All components"}}),qs=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/jql/helpers.js");function zs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ys(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(s),!0).forEach((function(t){Qs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Js=(e,{baseUrl:t,projectKey:s})=>!Object(o.is2afErrorCleanupGroup1Enabled)()||e&&0!==e.length?e.map((e=>{const n=`project = ${Object(qs.b)(s)} AND component = ${Object(qs.b)(e.name)}`;return{href:Object(qs.a)(t,n),content:e.name,value:e.id}})):[],Zs=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),Xs=(e=[],t=[],s,n)=>{const a=(e=>e.slice(-5).reverse())(((e,t,s)=>t.filter((e=>e.projectKey===s)).map((t=>{
const n=e.find((e=>e.id===t.id));if(n){const e=Ys(Ys({},n),{},{projectKey:s});return Rs.a.update(`${t.id}`,e),Ys(Ys({},e),{},{fromCache:!0})}return Ys(Ys({},t),{},{fromCache:!0})})))(e,t,n));return[{heading:s.formatMessage(Gs.recent),items:a.map(Zs)},{heading:s.formatMessage(Gs.all),items:e.map(Zs)}]},en=e=>e.map((e=>({name:e.content,id:e.value,fromCache:e.fromCache||!1})));var tn=n("./node_modules/@atlaskit/icon/glyph/add.js"),sn=n.n(tn),nn=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js");function an(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function rn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?an(Object(s),!0).forEach((function(t){on(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):an(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function on(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const cn=T.default.div.withConfig({componentId:"sc-1fc3whv-0"})`display:flex;align-items:center;`,ln=T.default.span.withConfig({componentId:"sc-1fc3whv-1"})`margin-left:${_.e}px;flex-grow:1;`,dn=T.default.div.withConfig({componentId:"sc-1fc3whv-2"})`display:flex;align-items:center;color:${yt.a.B400};padding:6px 12px;&:hover{background-color:${yt.a.N20};}&:active{background-color:${yt.a.B75};}`,un={option:(e,t)=>rn(rn(rn({},e),!0===t.data.__isNew__?rn(rn({},t.isFocused?{"> .issue-view__select-footer":{"background-color":yt.a.N20}}:{}),{},{position:"sticky",bottom:0,"background-color":`${yt.a.N0} !important`,"border-top":"2px solid rgba(9, 30, 66, 0.13)",
padding:0,"padding-top":`${_.e}px`,"padding-bottom":0,overflow:"visible",":after":{content:'""',display:"block",position:"absolute",bottom:"-8px",left:0,width:"100%",height:"8px","background-color":yt.a.N0,"border-bottom-left-radius":_.e/2+"px","border-bottom-right-radius":_.e/2+"px"}}):{}),!0===t.data.isAkSelectOption?{"text-align":"center","padding-top":`${_.e}px`,"padding-bottom":2*_.e+"px"}:{})};var pn=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js");class mn extends c.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{const{onChange:s,onConfirm:n}=this.props;s&&s(e,t),n()},this.renderEditView=()=>{
const{fieldId:e,value:t,fetchSuggestions:s,additionalAnalyticsProps:n,placeholder:a,isEditing:i,isMulti:r,invalidMessage:o,hasAutocomplete:c,debounceFetchSuggestionsTime:d,allowEmptyValue:u,portalElement:p,canCreateNewItem:m,formatCreateLabel:f,styles:b,onChangeMulti:g,footer:h,onFooterSelect:y,shouldShowFooter:O,filterOption:j,formatOptionLabel:v,onDataRequest:E,onDataLoaded:w,components:k,componentsProps:C,initialData:S}=this.props;return l.a.createElement(pn.a,{initialData:S,componentsProps:C,components:k,fieldId:e,value:t,fetchSuggestions:s,additionalAnalyticsProps:n,placeholder:a,isOpen:i,invalidMessage:o,hasAutocomplete:c,debounceFetchSuggestionsTime:d,isClearable:u,portalElement:p,canCreateNewItem:m,formatCreateLabel:f,styles:b,autoFocus:!0,onChange:this.onChange,footer:h,onFooterSelect:y,shouldShowFooter:O,onChangeMulti:g,isMulti:r,filterOption:j,formatOptionLabel:v,onDataRequest:E,onDataLoaded:w,optionValuesSafeForAnalytics:this.props.optionValuesSafeForAnalytics})}}
renderReadViewOld(){const e=this.props.fieldContentWrapper;return lt()(e)?this.props.renderReadView():l.a.createElement(e,null,this.props.renderReadView())}renderReadView(){return l.a.createElement(as.b,null,this.renderReadViewOld())}getEditButtonLabel(){const{value:e,label:t,intl:s,noValueText:n,isMulti:a}=this.props;return!0===a&&(null==e||!e.length)||!1===a&&!e?s.formatMessage(G.a.extendedEditButtonLabel,{inputFieldValue:n,fieldName:t}):!1===a&&void 0!==(null==e?void 0:e.content)?s.formatMessage(G.a.extendedEditButtonLabel,{inputFieldValue:e.content,fieldName:t}):s.formatMessage(G.a.editButtonLabel,{fieldName:t})}render(){const{intl:{formatMessage:e},label:t,fieldId:s,isEditable:n,isEditing:a,isMobile:i,isMulti:r,showPinButton:o,onCancel:c,onEditRequest:d,onConfirm:u,titleView:p=this.props.label}=this.props,m=`issue.views.field.select.common.select-inline-edit.${s}`;return l.a.createElement(h.d,{"data-test-id":m
},l.a.createElement(h.b,null,l.a.createElement(h.c,null,p),!0===o&&l.a.createElement(y.a,{fieldId:s,label:t})),l.a.createElement(h.g,{isEditing:a},l.a.createElement(he.a,{onEscape:c},Object(ns.a)()?l.a.createElement(as.a,{isEditing:a},l.a.createElement(Y.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:this.renderEditView,isEditing:a,isEditable:n,hideActionButtons:!r,readViewFitContainerWidth:!i,onConfirm:u,onCancel:c,onEdit:d,editButtonLabel:this.getEditButtonLabel(),confirmButtonLabel:e(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e(G.a.cancelButtonLabel,{fieldName:t})})):l.a.createElement(z.a,{isLabelHidden:!0,label:t,readView:this.renderReadViewOld(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!r,isEditing:a,onConfirm:u,onCancel:c,onEditRequested:d,isFitContainerWidthReadView:!i,editButtonLabel:this.getEditButtonLabel(),confirmButtonLabel:e(G.a.confirmButtonLabel,{fieldName:t}),
cancelButtonLabel:e(G.a.cancelButtonLabel,{fieldName:t})}))))}}mn.displayName="SelectInlineEditView",mn.displayName="SelectInlineEditView",mn.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,isMulti:!1,hasAutocomplete:!1,label:"",noValueText:null,allowEmptyValue:!1,debounceFetchSuggestionsTime:0,onChange:b.a};var fn=Object(d.injectIntl)(mn);const bn=["validate","invalidMessage","value","onChange","tagAppearance","onDataRequest","onDataLoaded","customReadView","isUserTag"];function gn(){return(gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function hn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const yn=e=>{const{validate:t,invalidMessage:s,value:n,onChange:a,tagAppearance:i,onDataRequest:r,onDataLoaded:o,customReadView:c,isUserTag:d}=e,u=hn(e,bn);return l.a.createElement(fn,gn({},u,{value:n,isMulti:!0,onChangeMulti:a,invalidMessage:t(n)||s,renderReadView:()=>{const{value:t,noValueText:s,tagAppearance:n,isMobile:a,customReadView:i,isEditable:r,isUserTag:o}=e;return i?i(t):l.a.createElement(gs,{value:t,noValueText:s,tagAppearance:n,shouldHideLinks:a,truncateValues:!r&&o,isUserTag:o})},onDataRequest:r,onDataLoaded:o}))};yn.displayName="MultiSelectInlineEditView",yn.displayName="MultiSelectInlineEditView",yn.defaultProps={tagAppearance:"default",validate:()=>null,hasAutocomplete:!0,debounceFetchSuggestionsTime:300};var On=yn;const jn=["shouldShowFooter","baseUrl","projectKey","intl"];function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function En(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class wn extends c.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then((e=>{this.setState({data:e,loading:!1})}))},this.fetchSuggestions=(e,t)=>this.props.fetchSuggestions(e,t).then((e=>(this.setState({data:e}),e)))}renderFooter(){const{intl:e}=this.props;return l.a.createElement(dn,{className:"issue-view__select-footer"
},l.a.createElement(sn.a,{label:"",size:"small"}),l.a.createElement(ln,null,e.formatMessage(Gs.createNewItem)))}render(){const e=this.props,{shouldShowFooter:t,baseUrl:s,projectKey:n,intl:a}=e,i=En(e,jn),{data:r,loading:o,error:c}=this.state,d={data:r,loading:o,error:c};return l.a.createElement(On,vn({},i,{styles:un,fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:d,shouldShowFooter:t,footer:this.renderFooter(),onFooterSelect:()=>Object(nn.a)(`${s}/plugins/servlet/project-config/${n}/administer-components`,!1),allowEmptyValue:!0,optionValuesSafeForAnalytics:!0}))}}function kn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(s),!0).forEach((function(t){Sn(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Sn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}wn.displayName="View";const In=Object(a.a)(((e,t,s,n,a)=>((e,t,s,n,a)=>Hs("components",e,t,s,n,a))(e,t,s,n,a))),Tn=Object(a.a)(((e,t,s,n,a,i)=>(r,o)=>{const c=In(t,s,n,o,a);return Promise.all([c,Rs.a.getAll()]).then((([t,s])=>Xs(t,s,e,i)))}));var _n=Object(H.a)(((t,s)=>({fieldId:s.fieldId,transformFromStateValue:Js,transformToStateValue:en,additionalProps:(e,t)=>({baseUrl:Object(N.f)(e),projectKey:Object(N.B)(e),fetchSuggestions:Tn(t,Object(v.c)(s.fieldId)(e),Object(N.w)(e),Object(K.C)(e),s.createAnalyticsEvent,Object(N.B)(e)),placeholder:t.formatMessage(Gs.placeholder),noValueText:t.formatMessage(Es.noValue),
shouldShowFooter:(Object(Fs.c)(e)||Object(Fs.b)(e))&&!Object(N.r)(e),showPinButton:Object(I.a)(s.area),getDataFromCache:()=>Rs.a.getAll().then((s=>Xs([],s,t,Object(N.B)(e))))}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a,fieldEditSessionId:i},r,o)=>{const c=void 0!==i?`${t}/rest/api/2/issue/${s}?fieldEditSessionId=${i}`:`${t}/rest/api/2/issue/${s}`,l=Object(N.B)(r);return a.forEach((e=>{try{o.createAnalyticsEvent&&Object(Ye.b)(o.createAnalyticsEvent({}),"componentPickerCache set",{isFromCache:e.fromCache}),e.id&&Rs.a.set(`${e.id}`,Cn(Cn({},e),{},{projectKey:l}))}catch(t){Ns.a.safeErrorWithoutCustomerData("issue-view.components.cache.set",t.message)}})),Object(x.e)(c,{body:JSON.stringify({fields:{[n]:a}})}).catch((t=>{throw a.forEach((t=>{try{o.createAnalyticsEvent&&Object(Ye.b)(o.createAnalyticsEvent({}),"componentPickerCache removed"),t.id&&Rs.a.remove(`${t.id}`)}catch(e){Ns.a.safeErrorWithoutCustomerData("issue-view.components.cache.remove",e.message)}})),t}))
})(...t,s)})))(Object(d.injectIntl)(wn)),Pn=n("./src/packages/servicedesk/incident-management/issue-view/conference-call/src/async.js"),xn=()=>l.a.createElement(Pn.a,null),Dn=n("./src/packages/issue/issue-view/src/common/service/issue/customer-request-type-server.js"),An=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),Mn=n("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),Ln=Object(d.defineMessages)({placeholder:{id:"issue.customer-request-type.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Request Type"}});const Rn=e=>({issueTypeId:e.issueType.toString(),content:e.name,value:e.id,iconUrl:e.iconUrl}),Nn=e=>e&&(e=>{if(e.errorMessage)return{hasError:!0};if(!e.requestType)return null;const{icon:t,issueTypeId:s,id:n,name:a}=e.requestType;return{issueTypeId:s,content:a,value:n,iconUrl:t._links.iconUrls["48x48"]}})(e),Fn=e=>({requestType:{icon:{_links:{iconUrls:{"48x48":e.iconUrl||""}}},id:e.value,
name:e.content,issueTypeId:e.issueTypeId}}),Un=e=>[{items:e.validRequestTypes.map(Rn)}];var Vn=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),Kn=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-with-icon/index.js");function $n(){return($n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Wn=e=>()=>{const{value:t,noValueText:s}=e;if(t&&!Array.isArray(t)){const{iconUrl:e,content:s}=t;return void 0!==e?l.a.createElement(Kn.a,{iconUrl:e},s):s}return l.a.createElement(ye.b,null,s)},Bn=e=>l.a.createElement(fn,$n({},e,{renderReadView:e.renderReadView||Wn(e),isMulti:!1}));Bn.displayName="SingleSelectInlineEditView",Bn.displayName="SingleSelectInlineEditView";var Hn=Bn;const Gn=T.default.div.withConfig({componentId:"sc-1nils-0"
})`display:flex;align-items:center;`,qn=T.default.span.withConfig({componentId:"sc-1nils-1"})`margin-left:${_.e}px;`,zn=T.default.div.withConfig({componentId:"sc-1nils-2"})`display:flex;padding-left:${.75*_.e}px;padding-right:${.75*_.e}px;`,Yn=["issueTypeId"];function Qn(){return(Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Jn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(s),!0).forEach((function(t){Xn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Jn(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Xn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ea(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ta=e=>{if(null!=(null==e?void 0:e.iconUrl))return()=>l.a.createElement(Gn,null,l.a.createElement(zn,null,l.a.createElement(Vn.a,{url:e.iconUrl})),l.a.createElement(qn,null,e.content))},sa=e=>{const{issueTypeId:t}=e,s=ea(e,Yn),{value:n}=e;if(!0===(null==n?void 0:n.hasError))return null;const a=null!=n&&n&&t!==n.issueTypeId?null:s.value,i=Zn(Zn({},s),{},{value:a});return l.a.createElement(Hn,Qn({},i,{renderReadView:ta(a)
}))};sa.displayName="RequestTypeField";const na=(e,t)=>t?`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types?query=`:null,aa=Object(a.a)((e=>t=>e?Object(qe.a)(`${e}${t}`).then(Un):Promise.resolve([]))),ia=({baseUrl:e,value:t},s)=>{const{requestType:n}=t,a=Object(N.w)(s);return Object(Dn.a)(e,a,n.id)},ra=e=>e&&e.requestType&&e.requestType.id;var oa=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Nn,transformToStateValue:Fn,saveField:ia,additionalProps:(e,s)=>({fetchSuggestions:aa(na(Object(N.f)(e),Object(N.w)(e))),isEditable:Object(Mn.a)(e),issueTypeId:Object(An.f)(e),hasAutocomplete:!0,placeholder:s.formatMessage(Ln.placeholder),noValueText:s.formatMessage(Es.noValue),debounceFetchSuggestionsTime:300,analyticsAttributeIdRetriever:ra,showPinButton:Object(I.a)(t.area)})})))(sa),ca=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),la=(n("./node_modules/react-magnetic-di/lib/esm/index.js"),
n("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"));const da=({issueKey:e,fieldKey:t,onSuccess:s})=>{var n;const[{value:a}]=Object(Yt.a)(e,t),i=null!==(n=null==a?void 0:a.schema.type)&&void 0!==n?n:"date",[{loading:r,value:o,error:c},{saveValue:l,resetError:d}]=Object(la.a)({fieldKey:t,issueKey:e,fieldType:i,initialValue:null,onSuccess:s});return[{loading:r,value:o,error:c,fieldConfig:a},{saveValue:l,resetError:d}]};var ua=n("./src/packages/platform/utils/types/src/general.js"),pa=n("./src/packages/issue/fields/components/error-flag/src/main.js"),ma=n("./node_modules/lodash/isNaN.js"),fa=n.n(ma),ba=n("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DatePicker.js"),ga=n("./src/packages/compatibility/src/main.js"),ha=n("./src/packages/issue/format-date/src/common/utils.js"),ya=n("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js");const Oa=({autoFocus:e,isDisabled:t,isInvalid:s,value:n,onChange:a})=>{
const i=Object(ya.a)(),r=Object(c.useCallback)((e=>{const t=Object(ga.a)(null!=e?e:"");fa()(Date.parse(t))?null==a||a(null):null==a||a(t)}),[a]),o=Object(ha.a)(i);return l.a.createElement(ba.a,{locale:o,autoFocus:e,defaultIsOpen:!0,isDisabled:t,isInvalid:s,value:n||"",onChange:r})};Oa.displayName="DateFieldEditView";var ja=Object(d.defineMessages)({errorTitle:{id:"issue-field-date.error-title",defaultMessage:"We couldn't set the date"},errorMessage:{id:"issue-field-date.error-message",defaultMessage:"Check your connection, then give it another try."}}),va=n("./src/packages/issue/format-date/src/main.js"),Ea=Object(d.defineMessages)({defaultNoValueText:{id:"issue-field-date.default-no-value-text",defaultMessage:"None"}});const wa=T.default.span.withConfig({componentId:"clmt20-0"})`color:${yt.a.N200};`,ka=({value:e,noValueText:t,onFormatDate:s})=>{const{formatMessage:n}=Object(xe.c)(),{formatDateOnly:a}=Object(va.a)()
;return null==e||""===e?l.a.createElement(wa,null,null!=t?t:n(Ea.defaultNoValueText)):s?s(e):a(e)},Ca=["fieldKey","issueKey","isEditing","onFormatDate","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","onError","readView","editView","noValueText"];function Sa(){return(Sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ia(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ta="dateFieldInlineEdit",_a=e=>{var t
;let{fieldKey:s,issueKey:n,isEditing:a,onFormatDate:i,onCancel:r,onEdit:o,onEscape:d,onConfirm:u,onEnter:p,onUpdate:m,onError:f,readView:b,editView:g,noValueText:h}=e,y=Ia(e,Ca);const[O,j]=Object(c.useState)(!1),v=Object(c.useCallback)((e=>{null==m||m(e),j(!1)}),[m]),[{value:E,error:w,fieldConfig:k},{saveValue:C,resetError:S}]=da({issueKey:Object(ua.m)(n),fieldKey:s,onSuccess:v}),[I,T]=Object(c.useState)(E),_=null!==(t=null==k?void 0:k.isEditable)&&void 0!==t&&t;Object(c.useEffect)((()=>{w&&(j(!0),null==f||f(w)),O||T(E)}),[w,O,f,E]);const P=Object(c.useCallback)((e=>{I!==E?C(I,null,e):j(!1),Object(Ye.h)(e)}),[C,I,E]),x=Object(c.useCallback)((e=>{S(),j(!1),T(E),Object(Ye.h)(e)}),[S,E]),D=Object(c.useCallback)((e=>{x(e),null==r||r(e)}),[r,x]),A=Object(c.useCallback)((e=>{P(e),null==u||u(I,e)}),[u,P,I]),M=Object(c.useCallback)((e=>{j(!0),Object(Ye.h)(e),null==o||o(e)}),[o]),L=Object(c.useCallback)((e=>{x(e),null==d||d(e)}),[d,x]),R=Object(c.useCallback)((e=>{S(),T(e)
}),[S,T]),N=Object(c.useCallback)((()=>void 0!==b?b:l.a.createElement(ka,{value:E,noValueText:h,onFormatDate:i})),[h,i,b,E]),F=Object(ns.a)()?l.a.createElement(as.b,null,N()):N(),U=Object(c.useCallback)((()=>void 0!==g?g:l.a.createElement(Oa,{autoFocus:!0,value:I,onChange:R,isInvalid:!!w})),[g,w,R,I]);return l.a.createElement(l.a.Fragment,null,null!=w&&l.a.createElement(pa.a,{error:w,title:ja.errorTitle,description:ja.errorMessage}),Object(ns.a)()?l.a.createElement(as.a,{isEditing:O},l.a.createElement(Y.a,Sa({areActionButtonsHidden:!0,actionSubject:Ta,isEditable:_,isEditing:null!=a?a:O,readView:F,editView:_?U():null,onCancel:D,onConfirm:A,onEdit:M,onEscape:L},y))):l.a.createElement(Y.a,Sa({areActionButtonsHidden:!0,actionSubject:Ta,isEditable:_,isEditing:null!=a?a:O,readView:F,editView:_?U():null,onCancel:D,onConfirm:A,onEdit:M,onEscape:L},y)))},Pa=(T.default.div.withConfig({componentId:"sc-1szim3z-0"
})`margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}`,Object(T.default)(h.d).withConfig({componentId:"sc-1szim3z-1"})`& > div > div > div > div > div > div > div{width:100%;}`),xa=({fieldId:e,label:t,area:s,onError:n,onConfirm:a})=>{const{formatMessage:i}=Object(xe.c)(),r=Object(Xe.g)(),o=Object(I.a)(s),[{value:d,fieldConfig:u}]=da({issueKey:r,fieldKey:e}),p=(null==u?void 0:u.title)||t,m=Object(c.useCallback)((()=>{null==n||n(d)}),[n,d]);return l.a.createElement(Pa,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,p),!0===o&&l.a.createElement(y.a,{fieldId:e,label:p})),l.a.createElement(h.g,null,l.a.createElement(_a,{isFitContainerWidthReadView:!0,issueKey:r,fieldKey:e,noValueText:i(Es.noValue),onConfirm:a,onError:m})))};xa.displayName="Date";var Da=Object(c.memo)(xa),Aa=Object(u.connect)(null,((e,t)=>({
onConfirm:s=>e(Object(ca.b)(t.fieldId,s)),onError:s=>e(Object(ca.a)(t.fieldId,s))})))(Da),Ma=n("./src/packages/issue/fields/date-time/src/services/use-date-time-field/index.js"),La=n("./src/packages/issue/fields/date-time/src/ui/main.js");T.default.div.withConfig({componentId:"kakyky-0"})`margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}`;const Ra=Object(T.default)(h.d).withConfig({componentId:"kakyky-1"})`& > div > div > div > div > div > div > div{width:100%;}`,Na=({fieldId:e,label:t,area:s,onUpdate:n})=>{const{formatMessage:a}=Object(xe.c)(),i=Object(Xe.g)(),r=Object(I.a)(s),[{fieldConfig:o}]=Object(Ma.a)({issueKey:i,fieldKey:e}),c=(null==o?void 0:o.title)||t;return l.a.createElement(Ra,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,c),!0===r&&l.a.createElement(y.a,{fieldId:e,label:c
})),l.a.createElement(h.g,null,l.a.createElement(La.DateTimeField,{isFitContainerWidthReadView:!0,issueKey:i,fieldKey:e,noValueText:a(Es.noValue),onUpdate:n})))};Na.displayName="DateTime";var Fa=Object(c.memo)(Na);var Ua=Object(u.connect)(null,((e,t)=>({onUpdate:s=>e(Object(ca.h)(t.fieldId,s))
})))(Fa),Va=n("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),Ka=n("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),$a=n.n(Ka),Wa=n("./node_modules/@atlaskit/icon/glyph/shortcut.js"),Ba=n.n(Wa),Ha=n("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),Ga=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),qa=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),za=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),Ya=n("./src/packages/connect-utils/connect-utils/src/common/utils/broadcast-connect-event.js"),Qa=n("./src/packages/issue/issue-view-layout/src/services/main.js"),Ja=n("./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js"),Za=n("./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js"),Xa=n("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),ei=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),ti=n("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js")
;const si=T.default.div.withConfig({componentId:"sc-1ddwfnu-0"})`position:relative;overflow:hidden;display:flex;border-radius:3px;margin-left:-${_.e}px;height:${4*_.e}px;width:100%;transition:background-color 0.2s ease-in-out,border-color 0.2s ease-in-out;&:hover{background:${yt.a.N30};cursor:pointer;}&:focus{box-shadow:0 0 0 2px ${yt.a.B100};outline:0;background:${yt.a.N30};}`,ni=T.default.div.withConfig({componentId:"sc-1ddwfnu-1"})`overflow:hidden;margin-top:${.5*_.e}px;margin-bottom:${.5*_.e}px;margin-left:${_.e}px;height:24px;width:24px;align-items:center;padding-left:${.25*_.e}px;padding-right:${.25*_.e}px;`,ai=T.default.div.withConfig({componentId:"sc-1ddwfnu-2"})`white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;line-height:${4*_.e}px;padding-left:${_.e}px;`,ii=T.default.div.withConfig({componentId:"sc-1ddwfnu-3"})`font-weight:600;display:inline;`,ri=T.default.div.withConfig({componentId:"sc-1ddwfnu-4"
})`color:${yt.a.N70};display:flex;align-items:center;margin-right:${_.e}px;`,oi=T.default.div.withConfig({componentId:"sc-1ddwfnu-5"})`position:absolute;right:0;width:${7*_.e}px;height:${4*_.e}px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,${yt.a.N20} 25%);`,ci=T.default.div.withConfig({componentId:"sc-1ddwfnu-6"})`position:absolute;right:0;margin:${_.e/4}px ${_.e}px;height:26px;width:26px;background:${yt.a.N30};color:${yt.a.N60};border-radius:50%;align-items:center;padding:2px 0 0 2px;`,li=T.keyframes`0%{right:-28px;}100%{right:0;}`,di=T.default.div.withConfig({componentId:"sc-1ddwfnu-7"})`position:absolute;animation:${li} 0.15s ease-in-out;`;var ui=n("./node_modules/lodash/omitBy.js"),pi=n.n(ui);function mi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fi(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(s),!0).forEach((function(t){bi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function bi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const gi=e=>["click_through","open_panel"].find((t=>t===e))||"open_panel",hi=e=>{const t=pi()(e,(e=>null==e));return void 0===t.workMode?t:fi(fi({},t),{},{workMode:gi(t.workMode)})};function yi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Oi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ji(){
return(ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class vi extends c.Component{constructor(...e){super(...e),this.state={isHovering:!1,update:void 0},this.onGlanceUpdate=(e,t,s)=>{s.addonKey===this.props.appKey&&s.moduleKey===this.props.moduleKey&&this.setState({update:hi(s.data)})},this.getGlanceIcon=()=>this.state.update&&this.state.update.icon?this.state.update.icon:this.props.icon,this.getGlanceWorkMode=()=>this.state.update&&this.state.update.workMode||this.props.workMode,this.eventHandlers={onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},this.handleOpenGlancePanel=()=>{
const{appKey:e,moduleKey:t,status:s,onGlanceShowAnalytics:n,onOpenGlancePanel:a,onClickThroughGlancePanel:i}=this.props,r=this.getGlanceWorkMode();"open_panel"===r?(n(Object(Za.d)(e,t,s)),a(e,t)):"click_through"===r&&i(e,t)},this.container=void 0,this.renderStatus=()=>{const e=this.state.update&&this.state.update.status?this.state.update.status:this.props.status;if(!e)return null;const{value:t,type:s}=e;if(t.label)switch(s){case"lozenge":return l.a.createElement(Ha.a,{appearance:t.type},t.label);case"icon":return this.props.glance?l.a.createElement(Vn.a,{url:Object(Xa.a)(this.props.glance.options.origin,t.label),alt:t.type,width:24,height:24}):null;case"badge":{const e=parseInt(t.label,10);return e>=0?l.a.createElement(Va.a,{appearance:"default"},e):null}default:return null}return null},this.renderContent=()=>{if(this.state.update&&this.state.update.content)return l.a.createElement(ai,null,this.state.update.content);const{label:e,name:t}=this.props
;return e.value===t?l.a.createElement(ai,null,l.a.createElement(d.FormattedMessage,{id:"issue.ecosystem.context.rich-glance-label",defaultMessage:"Open {label}",values:{label:l.a.createElement(ii,null,e.value)}})):l.a.createElement(ai,null,e.value)}}componentDidMount(){qa.a.addUpdateIssueGlanceListener(this.onGlanceUpdate)}componentWillUnmount(){qa.a.removeUpdateIssueGlanceListener(this.onGlanceUpdate)}render(){const{name:e,glance:t}=this.props,s=this.getGlanceIcon();return l.a.createElement(h.d,{"data-test-id":"issue.views.issue-base.context.ecosystem-glance-panel"},l.a.createElement(h.b,null,l.a.createElement(h.c,null,e)),l.a.createElement(h.g,null,l.a.createElement(he.a,{onEnter:this.handleOpenGlancePanel},l.a.createElement(si,ji({onClick:this.handleOpenGlancePanel,tabIndex:"0"},this.eventHandlers),s&&t&&l.a.createElement(ni,null,l.a.createElement(Vn.a,{url:Object(Xa.a)(t.options.origin,s.url),alt:s.alt,width:24,height:24
})),this.renderContent(),l.a.createElement(ri,null,this.renderStatus()),this.state.isHovering&&l.a.createElement(za.a,{mountAnimation:di},l.a.createElement(oi,null,l.a.createElement(ci,null,"click_through"===this.getGlanceWorkMode()?l.a.createElement(Ba.a,{size:"medium",label:""}):l.a.createElement($a.a,{size:"medium",label:""}))))))))}}vi.displayName="ConnectGlance",vi.displayName="ConnectGlance",vi.defaultProps={icon:null,openedGlance:null,status:null,workMode:"open_panel",onGlanceShowAnalytics:b.a};const Ei=(e,t)=>{Object(Ya.a)("ISSUE_GLANCE_CONTENT_CLICKED",{addon_key:e,key:t})},wi=e=>{const t=Object(Xe.g)(),[,{setIssueViewLayoutGlance:s}]=Object(Qa.a)();return l.a.createElement(vi,ji({},e,{onOpenGlancePanel:(e,n)=>{s(t,{appKey:e,moduleKey:n}),Object(Ya.a)("ISSUE_GLANCE_OPENED",{addon_key:e,key:n})}}))};wi.displayName="ConnectGlanceWithIssueLayout";var ki=Object(Jt.a)([Object(Ga.a)((e=>({onGlanceShowAnalytics:t=>e("show",function(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(s),!0).forEach((function(t){Oi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))}))),Object(u.connect)(((e,t)=>({openedGlance:Object(ti.a)(e),glance:Object(ei.l)(t.appKey,t.moduleKey)(e),onClickThroughGlancePanel:Ei})),(e=>({onOpenGlancePanel:(t,s)=>{e(Object(Ja.b)(t,s)),Object(Ya.a)("ISSUE_GLANCE_OPENED",{addon_key:t,key:s})}
})))])(wi),Ci=n("./node_modules/redux/es/index.js"),Si=n("./src/packages/forge/forge-ui-analytics/src/services/custom-field/index.js"),Ii=n("./src/packages/forge/forge-ui-analytics/src/ui/custom-field/index.js"),Ti=n("./src/packages/forge/forge-ui/src/ui/extension-title/index.js"),_i=n("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),Pi=n("./src/packages/forge/forge-ui-async/src/ui/custom-field/async.js");const xi=T.default.div.withConfig({componentId:"sc-1595rwl-0"})`width:100%;&:focus{outline:none;}`,Di=T.default.div.withConfig({componentId:"sc-1595rwl-1"})`display:flex;background:transparent;flex-direction:column;padding:0;position:relative;overflow:hidden;align-items:flex-start;width:100%;`,Ai=e=>{switch(e.type){case"user":return"list"===e.collection?(e=>lt()(e)?null:e.map((e=>({accountId:lt()(e.accountId)?e.id:e.accountId}))))(e.value):(e=>lt()(e)?null:{accountId:lt()(e.accountId)?e.id:e.accountId})(e.value);case"group":
return"list"===e.collection?(e=>null==e?null:e.map((e=>e.name)))(e.value):(e=>null==e?null:e.name)(e.value);case"string":case"number":case"object":default:return e.value}};function Mi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Li(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(s),!0).forEach((function(t){Ri(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ri(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const Ni=({extension:e,extensionData:t,type:s,fieldId:n,collection:i="none",analyticsAttributes:r,shouldUseFormatter:o,formattedValue:c})=>Object(a.a)((a=>l.a.createElement(xi,null,o?l.a.createElement(Di,null,c):l.a.createElement(Pi.a,{extension:e,extensionData:Li(Li({},t),{},{fieldValue:Ai({type:s,collection:i,value:a}),fieldId:n,fieldType:e.id,renderContext:"issue-view"}),analyticsAttributes:r}))));var Fi=n("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js");const Ui=T.default.div.withConfig({componentId:"sc-1jnzcoe-0"})`position:relative;width:100%;`,Vi=T.default.div.withConfig({componentId:"sc-1jnzcoe-1"})`opacity:${e=>e.isLoading?"0.7":"1.0"};`,Ki=T.default.div.withConfig({componentId:"sc-1jnzcoe-2"})`position:absolute;top:0;right:0;margin-right:${_.e/2}px;`;var $i=({children:e,isLoading:t})=>l.a.createElement(Ui,null,l.a.createElement(Vi,{isLoading:t},e),t&&l.a.createElement(Ki,null,l.a.createElement(Fi.a,{size:"small"
}))),Wi=n("./src/packages/forge/forge-ui-analytics/src/services/custom-field-edit/index.js"),Bi=n("./src/packages/forge/forge-ui/src/services/custom-fields/save-field/index.js");function Hi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(s),!0).forEach((function(t){qi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var zi=(e,t)=>{switch(t.type){case"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION":return Gi(Gi({},e),{},{isEditing:!0,
isLoading:!0});case"FORGE_CUSTOM_FIELD_EDIT_RENDERED":return Gi(Gi({},e),{},{isLoading:!1});case"FORGE_CUSTOM_FIELD_EDIT_CANCEL":return Gi(Gi({},e),{},{isEditing:!1});case"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE":return Gi(Gi({},e),{},{isEditing:!1,editValue:t.payload});case"FORGE_CUSTOM_FIELD_EDIT_FAILED":return Gi(Gi({},e),{},{isEditing:!1,isLoading:!1});default:return e}};function Yi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(s),!0).forEach((function(t){Ji(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ji(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Zi=({extensionData:e,extension:t,source:s,fieldId:n,value:a,viewComponent:i,onCancel:r,onSave:o})=>{const[{isEditing:d,isLoading:u,editValue:p},m]=Object(c.useReducer)(zi,{isEditing:!1,isLoading:!1,editValue:a}),f=Object(c.useMemo)((()=>({source:s,displayType:"modal",fieldType:t.properties.type,module:t.type})),[t,s]),b=Object(c.useCallback)((e=>{o(e),m((e=>({type:"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE",payload:e}))(e)),Object(Wi.b)(s,f)}),[o,s,f]),g=Object(c.useCallback)((()=>{r(),m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_CANCEL"}))()),Object(Wi.c)(s,f)}),[r,s,f]),h=Object(c.useCallback)((()=>m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_RENDERED"}))())),[]),y=Object(c.useCallback)((()=>m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_FAILED"}))())),[]),O=Object(c.useCallback)((()=>{Object(Wi.d)(s,f),m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION"}))())
}),[s,f]),{issue:{key:j}}=e,{save:v}=Object(Bi.a)({baseUrl:"",issueKey:j,fieldId:n,source:null==s?void 0:s.toString()});return l.a.createElement(l.a.Fragment,null,i(O,p,u),d&&l.a.createElement(Pi.b,{extension:t,fieldId:n,extensionData:Qi(Qi({},e),{},{fieldValue:p,fieldId:n,fieldType:t.id,renderContext:"issue-view"}),onConfirm:b,onCancel:g,onRender:h,onError:y,onSave:v,analyticsAttributes:f}))};const Xi=["renderCustomReadView","shouldRenderCustomReadView","ForgeField","viewProps"],er=["analyticsAttributes"];function tr(){return(tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function sr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nr(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(s),!0).forEach((function(t){ar(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ar(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ir(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const rr=e=>{let{renderCustomReadView:t,shouldRenderCustomReadView:s,ForgeField:n,viewProps:a}=e,i=ir(e,Xi);return l.a.createElement(Zi,tr({},i,{viewComponent:(e,i,r)=>{const o=nr(nr({},a),{},{
onEditRequest:e,value:i},s?{customReadView:e=>l.a.createElement($i,{isLoading:r},t(e))}:{fieldContentWrapper:({children:e})=>l.a.createElement($i,{isLoading:r},e)});return l.a.createElement(n,o)}}))};rr.displayName="ForgeCustomFieldEditInner";const or=e=>{let{analyticsAttributes:t}=e,s=ir(e,er);return l.a.createElement(Ii.a,{attributes:t},l.a.createElement(rr,s))};or.displayName="ForgeCustomFieldEdit";const cr=e=>({content:e.name,value:e.name}),lr=Object(a.a)((()=>e=>Object(qe.a)(`/rest/api/2/groups/picker?query=${encodeURIComponent(e)}`).then((e=>(e=>e&&e.groups?[{items:e.groups.map(cr)}]:[{items:[]}])(e)))));var dr=Object(d.defineMessages)({placeholder:{id:"issue.forge.group.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}});const ur=["extension","type","value","customReadView","onChange","intl"];function pr(){return(pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function mr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const fr=e=>{let{extension:t,type:s,value:n,customReadView:i,onChange:r,intl:{formatMessage:o}}=e,d=mr(e,ur);const u=Object(a.a)((e=>e?{name:String(e.value)}:null)),p=Object(a.a)((e=>e?{value:String(e.name),content:String(e.name)}:null)),m=Object(c.useCallback)((e=>r(u(e))),[u,r]),f=Object(c.useCallback)(lt()(i)?()=>null:()=>i(n),[i,n]),b=lt()(i)?void 0:f;return l.a.createElement(Hn,pr({},d,{renderReadView:b,value:p(n),placeholder:o(dr.placeholder),noValueText:o(Es.noValue),onChange:m,hasAutocomplete:!0}))}
;fr.displayName="View";var br=m()([d.injectIntl,Object(u.connect)(((e,{fieldId:t})=>({fetchSuggestions:lr(),allowEmptyValue:!Object(v.E)(t)(e)})),{})])(fr),gr=Object(d.defineMessages)({placeholder:{id:"issue.forge.groups.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});const hr=["extension","type","value","onChange","customReadView","intl"];function yr(){return(yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Or(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const jr=e=>{
let{extension:t,type:s,value:n,onChange:i,customReadView:r,intl:{formatMessage:o}}=e,d=Or(e,hr);const u=Object(a.a)((e=>e?e.map((e=>({name:String(e.value)}))):[])),p=Object(a.a)((e=>e?e.map((e=>({value:String(e.name),content:String(e.name)}))):[])),m=Object(c.useCallback)((e=>i(u(e))),[u,i]),f=Object(c.useCallback)(lt()(r)?()=>null:e=>r(u(e)),[r]),b=lt()(r)?void 0:f;return l.a.createElement(On,yr({},d,{value:p(n),customReadView:b,placeholder:o(gr.placeholder),noValueText:o(Es.noValue),onChange:m}))};jr.displayName="View";var vr=m()([d.injectIntl,Object(u.connect)(((e,{fieldId:t})=>({fetchSuggestions:lr(),allowEmptyValue:!Object(v.E)(t)(e)})),{})])(jr),Er=n("./src/packages/cache/src/services/labels/index.js"),wr=Object(d.defineMessages)({label:{id:"issue.labels.label",defaultMessage:"Labels"},placeholder:{id:"issue.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Label"},createNewItem:{id:"issue.labels.create-new-item-message",defaultMessage:"New label"},
recent:{id:"issue.labels.recent-items",defaultMessage:"Recent labels"},all:{id:"issue.labels.all-items",defaultMessage:"All labels"}});const kr=(e,{baseUrl:t,fieldId:s})=>e?e.map((e=>{const n=encodeURIComponent(`${(e=>{const t="customfield_";if(e.startsWith(t))return`cf[${e.substring(t.length,e.length)}]`;return e})(s)} = ${Object(qs.b)(e)}`);return{content:e,value:e,href:`${t}/issues/?jql=${n}`}})):[],Cr=e=>e.map((e=>e.value)),Sr=e=>({content:e.label,value:e.label}),Ir=(e,t=[],s)=>{const n=e.suggestions||[],a=(e=>e.slice(-5).reverse())(t);return[{heading:s(wr.recent),items:a.map(Sr)},{heading:s(wr.all),items:n.map(Sr)}]},Tr=$e()(((e,t,s,n,a)=>(i,r)=>{if(null==e)return Promise.resolve([]);let o=`${e}${encodeURIComponent(i)}`;null!=r&&(o=`${o}&sessionId=${r}`),null!=s&&(o=`${o}&fieldEditSessionId=${s}`);const c=He.d.now(),l=i.length;return Promise.all([Object(qe.a)(o),Er.a.getAll()]).then((([e,s])=>("labels"===t&&Object(ze.b)("labels",c,n,{sessionId:r,queryLength:l}),
Ir(e,s,a)))).catch((e=>{throw"labels"===t&&Object(ze.a)("labels",c,n,{sessionId:r}),e}))}),((e,t)=>`${e}_${t}`)),_r=$e()(((e,t)=>(s,n)=>{if(!s&&null!=e){const{prefetched:s,fieldValuePromise:a,sessionId:i,prefetchSessionId:r}=e,{createAnalyticsEvent:o}=t;if(s&&null!==a&&null!==i){Je(o,r,n||"",i,"labels");const e=He.d.now();return Promise.all([a,Er.a.getAll()]).then((([s,a])=>(Object(ze.b)("labels",e,o,{sessionId:n,isPrefetched:!0,queryLength:0}),Ir(s,a,t.formatMessage)))).catch((t=>{throw Object(ze.a)("labels",e,o,{sessionId:n,isPrefetched:!0}),t}))}Ze(o,r,n||"","labels")}return t.fetchSuggestions(s,n)}),((e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`)),Pr=e=>{if(e.length>55)return l.a.createElement(d.FormattedMessage,{id:"issue.labels-view.input-too-many-labels",defaultMessage:"Can't have more than {max} labels.",values:{max:55}});return e.map((e=>e.content.trim())).some((e=>e.includes(" ")||e.length>255))?l.a.createElement(d.FormattedMessage,{
id:"issue.labels-view.input-label-is-invalid",defaultMessage:"Labels can't have spaces or be more than {max} characters.",values:{max:255}}):void 0},xr=["initFieldOptions","issueKey","createAnalyticsEvent","formatMessage"];function Dr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ar(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(s),!0).forEach((function(t){Mr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Dr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Lr(){return(Lr=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Rr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class Nr extends c.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then((e=>{this.setState({data:e,loading:!1})}))},this.fetchSuggestions=e=>(t,s)=>e(t,s).then((e=>(this.setState({data:e}),e))),this.onEditRequest=()=>{Object(g.c)().cancel({key:S.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT},!0),Object(g.c)().markStartOfInteraction({
key:S.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.onConfirm=()=>{Object(g.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM}),this.props.onConfirm()},this.onCancel=()=>{Object(g.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),this.props.onCancel()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(g.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_REFLECT_SELECTED_EXISTING}):"remove-value"===t.action?Object(g.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_REFLECT_REMOVED_EXISTING}):"create-option"===t.action&&Object(g.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_REFLECT_SELECTED_NEW})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(g.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{e?Object(g.c)().markTimeToFinishTask({
key:S.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(g.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT})}}componentDidMount(){this.props.initFieldOptions(),this.getDataFromCache()}componentDidUpdate(e){const{isEditing:t,value:s,fieldId:n}=this.props;if("labels"===n){const n=!e.isEditing&&t,a=e.isEditing&&!t;e.isEditing&&t&&(s.length>e.value.length?(Object(g.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_REFLECT_SELECTED_EXISTING}),Object(g.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_REFLECT_SELECTED_NEW})):s.length<e.value.length&&Object(g.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_REFLECT_REMOVED_EXISTING})),a&&(Object(g.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),e.value===s&&Object(g.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM})),n&&Object(g.c)().markTimeToFeedback({key:S.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS})}}renderMultiSelectInlineEditView(e){
const{initFieldOptions:t,issueKey:s,createAnalyticsEvent:n,formatMessage:a}=e,i=Rr(e,xr),r="labels"===this.props.fieldId?{onEditRequest:this.onEditRequest,onConfirm:this.onConfirm,onCancel:this.onCancel,onChange:this.onChange,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded}:{},{data:o,loading:c,error:d}=this.state,u={data:o,loading:c,error:d},p=this.fetchSuggestions(e.fetchSuggestions);return l.a.createElement(Fr,Lr({debounceFetchSuggestionsTime:400,initialData:u},i,{fetchSuggestions:p},r))}renderWithCachedValue(){const{issueKey:e}=this.props,t=Object(st.a)(e,"labels");return l.a.createElement(t,{fieldId:"labels"},(e=>{const t=_r(e,this.props),s=Ar(Ar({},this.props),{},{fetchSuggestions:t});return this.renderMultiSelectInlineEditView(s)}))}render(){return"labels"===this.props.fieldId?this.renderWithCachedValue():this.renderMultiSelectInlineEditView(this.props)}}Nr.displayName="LabelsView",Nr.displayName="LabelsView";const Fr=e=>{
const t=Object(c.useCallback)($e()(e.fetchSuggestions,(t=>`${t}_${e.fieldEditSessionId||""}`)),[e.fetchSuggestions,e.fieldEditSessionId,e.invalidMessage]);return l.a.createElement(On,Lr({},e,{fetchSuggestions:t}))};Fr.displayName="MemoizedLabels";var Ur=Nr,Vr=Object(d.defineMessages)({placeholder:{id:"issue.forge.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select label"},createNewItem:{id:"issue.forge.labels.create-new-item-message",defaultMessage:"{value} (New label)"}});const Kr=["value","type","extension","baseUrl","projectKey","onChange","customReadView","fetchSuggestionsArgs"];function $r(){return($r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Wr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s])
;return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Br=e=>{const t=e.map((e=>({value:String(e.value),content:e.content,href:e.href||""})));return Pr(t)||null},Hr=e=>{let{value:t,type:s,extension:n,baseUrl:a,projectKey:i,onChange:r,customReadView:o,fetchSuggestionsArgs:d}=e,u=Wr(e,Kr);const{formatMessage:p}=Object(xe.c)(),m=Object(c.useCallback)((e=>p(Vr.createNewItem,{value:e})),[p]),f=Object(c.useCallback)((e=>{const t=Cr(e.map((e=>({value:String(e.value),content:e.content,href:e.href||""}))));r(t)}),[r]),g=Object(c.useMemo)((()=>{const e={fieldId:u.fieldId,issueKey:u.issueKey,baseUrl:a,projectKey:i};return kr(t,e).map((e=>({value:String(e.value),content:e.content,href:e.href||""})))
}),[a,u.fieldId,u.issueKey,i,t]),h=Object(c.useCallback)(lt()(o)?()=>null:()=>o(t),[o]),y=lt()(o)?void 0:h,O=Tr(d.fieldAutoCompleteUrl,d.fieldId,d.fieldEditSessionId,void 0,p);return l.a.createElement(Ur,$r({},u,{formatMessage:p,fetchSuggestions:O,placeholder:p(Vr.placeholder),noValueText:p(Es.noValue),customReadView:y,canCreateNewItem:!0,allowEmptyValue:!0,validate:Br,formatCreateLabel:m,value:g,onChange:f,initFieldOptions:b.a}))};Hr.displayName="View";var Gr=Object(u.connect)(((e,{fieldId:t})=>({fetchSuggestionsArgs:{fieldAutoCompleteUrl:Object(v.d)(t)(e),fieldId:t,fieldEditSessionId:Object(v.f)(t)(e)},issueKey:Object(N.x)(e),baseUrl:Object(N.f)(e),projectKey:Object(N.B)(e)
})),{})(Hr),qr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-url.js"),zr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-valid-email-address.js"),Yr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/prefix-url.js"),Qr=n("./src/packages/issue/issue-view/src/views/field/single-line-text/single-line-text-field-view.js");const Jr=T.default.div.withConfig({componentId:"sc-1tvuwbf-0"})`width:100%;margin-left:-8px;margin-top:-8px;${e=>e.isEditing?"":"\n            & form > div > div > div {\n                padding: 7px 0px;\n            }"}`,Zr=T.default.div.withConfig({componentId:"sc-1tvuwbf-1"})`word-break:break-word;position:relative;left:6px;`;class Xr extends c.Component{constructor(t){super(t),this.onChange=t=>{const{type:s}=this.props;let n;if("number"===s)""===t.target.value?n=null:(n=Number(t.target.value),this.setState({displayValue:t.target.value}));else if("object"===s)try{n=JSON.parse(t.target.value)}catch(e){
n=t.target.value}else n=t.target.value;"url"===s&&this.setState({showValidationMessage:!1,invalidMessage:t.target.validationMessage}),this.props.onChange(n)},this.onConfirm=()=>{this.state.invalidMessage?(this.setState({showValidationMessage:!0}),this.editFieldRef.current&&this.editFieldRef.current.focus()):this.props.onConfirm()},this.onCancel=()=>{"url"===this.props.type&&this.setState({showValidationMessage:!1,invalidMessage:null}),this.props.onCancel()},this.editFieldRef=Object(c.createRef)(),this.renderReadViewWithContentWrapper=()=>{const e=this.props.fieldContentWrapper;return lt()(e)?Object(o.isInlineEditBumpEnabled)()?l.a.createElement(Zr,null,this.renderReadView()):this.renderReadView():l.a.createElement(e,null,Object(o.isInlineEditBumpEnabled)()?l.a.createElement(Zr,null,this.renderReadView()):this.renderReadView())},this.renderEditView=()=>{const{value:e,placeholder:t,type:s}=this.props;let n=""
;return null!=e&&(n="object"===s&&"object"==typeof e?JSON.stringify(e):this.state.displayValue||e.toString()),l.a.createElement(Qr.a,{ref:this.editFieldRef,type:this.props.type,value:n,placeholder:t,onChange:this.onChange,invalidMessage:this.props.invalidMessage||(this.state.showValidationMessage?this.state.invalidMessage:null)})},this.state={invalidMessage:null,showValidationMessage:!1,displayValue:null}}componentDidUpdate(e){"number"===this.props.type&&this.props.value!==e.value&&(this.state.displayValue=null)}renderReadView(){const{value:e,noValueText:t,type:s,customReadView:n,fieldId:a}=this.props;if(n)return n(e);if(null==e||""===e)return l.a.createElement(ye.b,null,t);const i=((e,t)=>{switch(e){case"number":return l.a.createElement(d.FormattedNumber,{value:t});case"text":return Object(zr.a)(t)?l.a.createElement("a",{href:`mailto:${t}`},t):Number(t)?t:Object(qr.a)(t)?l.a.createElement("a",{href:Object(Yr.a)(t,"//"),target:"_blank"},t):t;case"url":
return Object(zr.a)(t)?l.a.createElement("a",{href:`mailto:${t}`},t):l.a.createElement("a",{href:Object(Yr.a)(t,"//"),target:"_blank"},t);case"object":return l.a.createElement("p",null,JSON.stringify(t));default:return t}})(s,e),r=`issue.views.field.single-line-text-inline-edit.read-view.${a}`;return"text"===s&&Object(o.isSingleLineTextFieldTextWrappingEnabled)()?l.a.createElement("div",{"data-test-id":r},i):l.a.createElement(ye.a,{"data-test-id":r,title:i},i)}render(){const{intl:e,label:t,isEditable:s,isEditing:n,onEditRequest:a,isMobile:i,titleView:r=this.props.label,fieldId:c,showPinButton:d}=this.props,u=`issue.views.field.single-line-text-inline-edit.${c}`;return l.a.createElement(h.d,{"data-test-id":u},l.a.createElement(h.b,null,l.a.createElement(h.c,null,r),!0===d&&l.a.createElement(y.a,{fieldId:c,label:t})),l.a.createElement(h.g,{isEditing:n},Object(o.isInlineEditBumpEnabled)()?l.a.createElement(Jr,{isEditing:n},l.a.createElement(Y.a,{isLabelHidden:!0,label:t,
readView:this.renderReadViewWithContentWrapper(),editView:s?this.renderEditView():()=>null,isEditing:n,isEditable:s,onConfirm:this.onConfirm,onCancel:this.onCancel,onEdit:a,onEditRequested:a,onEscape:this.onCancel,readViewFitContainerWidth:!i,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:t})})):l.a.createElement(he.a,{onEnter:this.onConfirm,onEscape:this.onCancel},l.a.createElement(z.a,{isLabelHidden:!0,label:t,readView:this.renderReadViewWithContentWrapper(),editView:s?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:n,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:a,isFitContainerWidthReadView:!i,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{
fieldName:t})}))))}}Xr.displayName="SingleLineTextInlineEditView",Xr.displayName="SingleLineTextInlineEditView",Xr.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,value:null,noValueText:null,invalidMessage:null,type:"text",label:""};var eo=Object(d.injectIntl)(Xr);const to=["extension"];function so(){return(so=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function no(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ao=e=>{switch(e){case"string":return"text";case"number":return e;case"datetime":return"text";case"object":return e
;default:return"text"}},io=e=>{let{extension:t}=e,s=no(e,to);const{type:n}=t.properties;return l.a.createElement(eo,so({},s,{noValueText:null,type:ao(n)}))};io.displayName="View";var ro=io;const oo=["isFieldRequired","extension","type","value","isFieldInTab"];function co(){return(co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function lo(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const uo=e=>e.users?e.users.map(Tt):[],po=Object(a.a)((e=>t=>null===e?Promise.resolve([]):Object(qe.a)(`${e}${t}`).then(uo))),mo=Object(a.a)((e=>({
avatarUrl:"",name:e.formatMessage(Es.noValue)}))),fo=e=>{let{isFieldRequired:t,extension:s,type:n,value:a,isFieldInTab:i}=e,r=lo(e,oo);const o=i&&(Object(U.a)()||document.body)||void 0;return l.a.createElement(St,co({},r,{value:Tt(a),emptyOption:t?void 0:mo(r.intl),portalElement:o,onChange:e=>{r.onChange(_t(e))}}))};fo.displayName="View";var bo=m()([d.injectIntl,Object(u.connect)(((e,{fieldId:t})=>({isFieldInTab:B(t)(e),fetchSuggestions:po(Object(v.d)(t)(e)),isFieldRequired:Object(v.E)(t)(e)})),{})])(fo);const go=T.default.span.withConfig({componentId:"cbz1ij-0"})`align-items:center;box-sizing:border-box;display:flex;line-height:1;outline:none;margin:0;width:100%;cursor:pointer;`,ho=T.default.div.withConfig({componentId:"cbz1ij-1"})`max-width:'100%';min-width:0;flex:'1 1 100%';line-height:'1.4';padding-left:${_.e}px;`,yo=T.default.span.withConfig({componentId:"cbz1ij-2"
})`margin:0;color:${"#091E42"};overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap;${e=>e.secondary&&"color: #6B778C; font-size: 0.85em;"};`,Oo=({avatarUrl:e,label:t,email:s,context:n})=>{const a="value"===n?"xsmall":"medium";return l.a.createElement(go,null,l.a.createElement(dt.a,{size:a,src:e}),l.a.createElement(ho,null,l.a.createElement("div",null,l.a.createElement(yo,null,t)),l.a.createElement("div",null,l.a.createElement(yo,{secondary:!0},s))))};Oo.displayName="UserOptionView";var jo=Oo,vo=Object(d.defineMessages)({placeholder:{id:"issue.multi-user.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select User"}});const Eo="24x24",wo=Object(a.a)((e=>e&&e.map((e=>({displayName:e.content,accountId:e.accountId,id:Object(ua.a)(String(e.value)),avatarUrls:{[Eo]:String(e.avatarUrl)}}))))),ko=Object(a.a)((e=>e?e.map((e=>({content:e.displayName,value:String(e.accountId),key:e.accountId,avatarUrl:e.avatarUrls&&e.avatarUrls["24x24"],accountId:e.accountId,
elemBefore:l.a.createElement(dt.a,{size:"xsmall",src:e.avatarUrls&&e.avatarUrls["24x24"]})}))):[])),Co=Object(a.a)((e=>[{items:(e&&e.users||[]).map((e=>({content:e.displayName,value:String(e.accountId),accountId:e.accountId,avatarUrl:e.avatarUrls["24x24"],email:e.emailAddress})))}]));function So(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Io(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?So(Object(s),!0).forEach((function(t){To(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):So(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function To(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const _o=$e()((e=>t=>e?Object(qe.a)(`${e}${t}`).then(Co):Promise.resolve([]))),Po=(Object(a.a)((e=>t=>e?Object(qe.a)(`${e}${t}`).then(Co):Promise.resolve([]))),(e,t)=>l.a.createElement(jo,{avatarUrl:e.avatarUrl,email:e.email,label:e.label,context:t.context}));Po.displayName="formatOptionLabel";var xo=Object(H.a)(((e,t)=>Io(Io({fieldId:t.fieldId},{transformFromStateValue:ko,transformToStateValue:wo}),{},{additionalProps:(e,s)=>({fetchSuggestions:_o(Object(v.d)(t.fieldId)(e)),placeholder:s.formatMessage(vo.placeholder),noValueText:s.formatMessage(Es.noValue),tagAppearance:"rounded",showDropdownOnClick:!1,isUserTag:!0,formatOptionLabel:Po,showPinButton:Object(I.a)(t.area)})})))(On);const Do=["isFieldRequired","extension","type","value","onChange","customReadView","intl","isFieldInTab"];function Ao(){return(Ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e
}).apply(this,arguments)}function Mo(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Lo=e=>l.a.createElement(cn,null,lt()(e.avatarUrl)?null:l.a.createElement(dt.a,{size:"small",src:e.avatarUrl}),l.a.createElement(ln,null,e.label));Lo.displayName="formatOptionLabel";const Ro=e=>{let{isFieldRequired:t,extension:s,type:n,value:a,onChange:i,customReadView:r,intl:{formatMessage:o},isFieldInTab:d}=e,u=Mo(e,Do);const p=Object(c.useCallback)((e=>i(wo(e))),[i]),m=Object(c.useCallback)(lt()(r)?()=>null:e=>r(wo(e)),[r]),f=lt()(r)?void 0:m;return l.a.createElement(On,Ao({},u,{value:ko(a),customReadView:f,placeholder:o(vo.placeholder),noValueText:o(Es.noValue),onChange:p,
tagAppearance:"rounded",formatOptionLabel:Lo}))};Ro.displayName="View";var No=m()([d.injectIntl,Object(u.connect)(((e,{fieldId:t})=>({fetchSuggestions:_o(Object(v.d)(t)(e))})),{})])(Ro);var Fo=Object(a.a)((e=>{if(!e)return null;const{type:t,collection:s="none"}=e.properties,n=(()=>({none:{user:bo,group:br,string:ro,number:ro,object:ro},list:{string:Gr,group:vr,user:No}}))()[s];return n?n[t]:null}));const Uo=["hasCustomFieldExtensions","isFilteredOut","shouldUseFormatter","extension","extensionData","fieldId","value","source","formattedValue","analyticsAttributes","onSave"];function Vo(){return(Vo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ko(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function $o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(s),!0).forEach((function(t){Wo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ko(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Wo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Bo(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ho=e=>{
let{hasCustomFieldExtensions:t,isFilteredOut:s,shouldUseFormatter:n,extension:i,extensionData:r,fieldId:o,value:d,source:u,formattedValue:p=null,analyticsAttributes:m,onSave:f}=e,b=Bo(e,Uo);const g=Fo(i);if(Object(c.useEffect)((()=>{if(!i||!g){const e=i?`Forge custom field ${i.properties.type} type is not supported`:"Forge extension passed to ForgeCustomField component is null or undefined";Object(Si.a)(u,$o($o({},m),{},{error:Error(e),fieldId:o,extensionProperties:null==i?void 0:i.properties}))}}),[m,u,o,i,g]),!i||!g)return null;const{type:h,collection:y,function:O}=i.properties,j=!lt()(O)||n;"object"!==h||j||Object(Si.b)("Forge object type custom field rendered without rendering or formatter function");const v=Object(a.a)(Ni)({extension:i,extensionData:r,type:h,fieldId:o,collection:y,analyticsAttributes:m,shouldUseFormatter:n,formattedValue:p}),E=$o($o({value:d,fieldId:o,extension:i,titleView:l.a.createElement(Ti.a,{extensionName:b.label,extensionEnvType:i.environmentType})},j?{
customReadView:v}:null),b);if(i.properties.edit){const{onCancel:e}=b;return l.a.createElement(or,{fieldId:o,value:d,extension:i,extensionData:r,source:u,analyticsAttributes:m,renderCustomReadView:v,shouldRenderCustomReadView:j,viewProps:E,ForgeField:g,onCancel:e,onSave:f})}return l.a.createElement(g,E)};Ho.displayName="ForgeCustomFieldView";const Go=e=>{const{source:t,extension:s,hasCustomFieldExtensions:n,isFilteredOut:a}=e,i=Object(c.useMemo)((()=>({source:t,renderContext:"issue-view",module:null==s?void 0:s.type,fieldType:null==s?void 0:s.properties.type})),[t,s]);return!n||a?null:l.a.createElement(Ii.b,{attributes:i},l.a.createElement(Ho,Vo({},e,{analyticsAttributes:i})))};Go.displayName="ForgeCustomField";var qo=Object(Ci.compose)(Object(H.a)(((e,{fieldId:t,area:s})=>({fieldId:t,additionalProps:(e,n,a)=>({showPinButton:Object(I.a)(s),fieldOptions:$o($o({},a),{},{isOptimistic:!Object(_i.n)(t)(e)})})}))),Object(u.connect)(((e,{fieldId:t})=>({hasCustomFieldExtensions:Object(_i.l)(e),
isFilteredOut:Object(_i.m)(t)(e),shouldUseFormatter:Object(_i.n)(t)(e),extension:Object(_i.b)(t)(e),extensionData:Object(_i.g)(e),source:Object(N.b)(e),formattedValue:Object(v.i)(t)(e)})),((e,t)=>({onSave:s=>e(Object(ca.g)(t.fieldId,s,t.fieldOptions))}))))(Go),zo=n("./src/packages/forge/forge-ui-analytics/src/common/ui/index.js"),Yo=n("./src/packages/forge/forge-ui-analytics/src/services/issue-glance/index.js"),Qo=n("./src/packages/forge/forge-ui-analytics/src/ui/issue-glance/index.js");function Jo(){return(Jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class Zo extends c.Component{constructor(...e){super(...e),this.state={isHovering:!1},this.eventHandlers={onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},
this.onOpenGlancePanel=()=>{const{appKey:e,moduleKey:t,onOpenGlancePanel:s,source:n}=this.props;Object(Yo.a)(n),s(e,t)}}renderStatus(){const{status:e={}}=this.props;switch(e.type){case"lozenge":return l.a.createElement(Ha.a,{appearance:e.value.type},e.value.label);case"badge":{const t=parseInt(e.value.label,10);return t>=0?l.a.createElement(Va.a,{appearance:"default"},t):null}default:return null}}render(){const{title:e,label:t,extension:{environmentType:s},source:n}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,l.a.createElement(Ti.a,{extensionName:e,extensionEnvType:s}))),l.a.createElement(h.g,null,l.a.createElement(he.a,{onEnter:this.onOpenGlancePanel},l.a.createElement(si,Jo({onClick:this.onOpenGlancePanel,tabIndex:"0"},this.eventHandlers),l.a.createElement(ai,null,t),l.a.createElement(ri,null,this.renderStatus()),this.state.isHovering&&l.a.createElement(za.a,{mountAnimation:di
},l.a.createElement(oi,null,l.a.createElement(ci,null,l.a.createElement($a.a,{size:"medium",label:""}))))))),l.a.createElement(zo.b,{attributes:{source:n}}))}}Zo.displayName="ForgeGlance",Zo.displayName="ForgeGlance";const Xo=e=>{const t=Object(Xe.g)(),[,{setIssueViewLayoutGlance:s}]=Object(Qa.a)();return l.a.createElement(Zo,Jo({},e,{onOpenGlancePanel:(e,n)=>{s(t,{appKey:e,moduleKey:n})}}))};Xo.displayName="ForgeGlanceWithIssueLayout";const ec=e=>l.a.createElement(Qo.a,{attributes:{source:e.source}},l.a.createElement(Xo,e));ec.displayName="ForgeGlanceWithAnalytics";var tc=Object(Jt.a)([Object(u.connect)((e=>({source:Object(N.b)(e)})),{})])(ec),sc=n("./node_modules/uuid/index.js"),nc=n.n(sc),ac=n("./src/packages/cache/src/services/epics/index.js"),ic=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),rc=n("./node_modules/lodash/omit.js"),oc=n.n(rc);const cc=Object(_s.asyncComponent)({
resolve:()=>n.e("async-issue-details-epic-card").then(n.bind(null,"./src/packages/issue/epic-card/src/ui/index.js")).then((e=>e.default)),name:"AsyncEpicCard"});var lc=n("./node_modules/@atlaskit/icon/glyph/checkbox.js"),dc=n.n(lc),uc=n("./node_modules/@atlaskit/select/node_modules/react-select/dist/chunk-80640036.browser.esm.js"),pc=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js");const mc=({onVisibilityChange:e})=>{const[t,s]=Object(c.useState)(!1),n=Object(c.useRef)(),a=Object(c.useRef)();return Object(c.useEffect)((()=>{e(t)}),[t,e]),Object(c.useEffect)((()=>{(()=>{if(window.IntersectionObserver&&a.current){const e=e=>{e.forEach((e=>{e.target===a.current&&s(e.isIntersecting)}))},t={root:null,rootMargin:"0px",threshold:0};n.current=new IntersectionObserver(e,t).observe(a.current)}})();const e=a.current;return()=>{var t;null===(t=n.current)||void 0===t||t.unobserve(e)}}),[]),l.a.createElement("div",{ref:a})};mc.displayName="Intersection"
;var fc=mc,bc=Object(d.defineMessages)({checkboxLabel:{id:"issue.views.field.epic.checkbox.label",defaultMessage:"Show done epics"},doneEpicLabel:{id:"issue.views.field.epic.done.label",defaultMessage:"Done"}});T.default.div.withConfig({componentId:"zarhtf-0"})`margin:2px -1px 2px 2px;`;const gc=T.default.div.withConfig({componentId:"zarhtf-1"})`min-width:${1.5*_.e}px;`,hc=T.default.div.withConfig({componentId:"zarhtf-2"})`display:flex;flex-direction:row;justify-content:flex-end;padding:${_.e}px ${1.5*_.e}px;border-bottom:2px solid ${yt.a.N30};`,yc=T.default.label.withConfig({componentId:"zarhtf-3"})`display:flex;flex-direction:row;align-items:center;color:'inherit';fill:${({isChecked:e})=>e?yt.a.N0:"inherit"};`,Oc=T.default.div.withConfig({componentId:"zarhtf-4"})`display:flex;flex-direction:row;align-items:center;color:${yt.a.N300};font-size:12px;margin-top:${_.e/2}px;`,jc=T.default.span.withConfig({componentId:"zarhtf-5"
})`overflow:hidden;text-overflow:ellipsis;max-width:100%;`,vc=e=>{var t,s,n,a;const i=Object(xe.c)(),{createAnalyticsEvent:r}=Object(pc.a)(),o=20===(null===(t=e.options[1])||void 0===t||null===(s=t.options)||void 0===s?void 0:s.length),d=null===(n=e.selectProps.componentsProps)||void 0===n?void 0:n.onChange,u=null===(a=e.selectProps.componentsProps)||void 0===a?void 0:a.isChecked,p=Object(c.useCallback)((e=>{if(e&&o){const e=r({});Object(Ye.f)(e,"intersectionComponent viewed","epicLink")}}),[r,o]),m=Object(c.useCallback)((e=>{if(d){d(e);const t=r({});Object(Ye.f)(t,"doneEpics filtered","epicLink",{includeDone:!u})}}),[r,u,d]),f=i.formatMessage(bc.checkboxLabel);return l.a.createElement(uc.z.MenuList,e,l.a.createElement(hc,{onClick:m},l.a.createElement(yc,{isChecked:u},f,l.a.createElement(dc.a,{label:f,secondaryColor:"inherit"}))),e.children,o&&l.a.createElement(fc,{onVisibilityChange:p}))};vc.displayName="Menu"
;var Ec=vc,wc=n("./node_modules/@atlaskit/icon/glyph/editor/done.js"),kc=n.n(wc),Cc=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");const Sc=T.default.span.withConfig({componentId:"sc-1kmshqe-0"})`display:flex;flex-direction:column;margin:0 ${_.e}px;padding:${_.e/4}px 0;overflow:hidden;flex-grow:1;`,Ic=T.default.span.withConfig({componentId:"sc-1kmshqe-1"})`${Cc.a};flex-grow:1;`,Tc=T.default.span.withConfig({componentId:"sc-1kmshqe-2"})`display:inline-block;color:${yt.a.N300};font-size:12px;margin-top:${_.e/2}px;`;var _c=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js");const Pc=(e,t)=>l.a.createElement(Oc,null,null!=e.description?l.a.createElement(jc,null,e.description):null,!0===e.isDone?l.a.createElement(l.a.Fragment,null,l.a.createElement(kc.a,{primaryColor:yt.a.G500}),l.a.createElement("span",null,t)):null);Pc.displayName="renderOptionDescription";const xc=({option:e})=>{
const{formatMessage:t}=Object(xe.c)();return l.a.createElement(_c.e,null,null!=e.elemBefore?e.elemBefore:null,l.a.createElement(Sc,null,l.a.createElement(Ic,null,e.label),Pc(e,t(bc.doneEpicLabel))))};xc.displayName="CustomOption";var Dc=xc;function Ac(){return(Ac=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Mc=e=>l.a.createElement(os.a,{color:e,elemBefore:l.a.createElement(gc,null),text:""});Mc.displayName="getOptionColorElem";class Lc extends c.Component{constructor(...e){super(...e),this.state={includeDoneEpics:!1,query:"",data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.sessionId="default-session-id",this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t,!this.state.includeDoneEpics).then((e=>{this.setState({data:e,loading:!1})}))},this.renderReadView=()=>{
const{value:e,noValueText:t,isMobile:s}=this.props;return null!=e&&e.value?l.a.createElement(cc,{issueKey:Object(ua.m)(e.value.toString()),epicName:e.content},l.a.createElement(gs,{value:e?[e]:null,noValueText:t,shouldHideLinks:s})):l.a.createElement(gs,{value:e?[e]:null,noValueText:t,shouldHideLinks:s})},this.fetchSuggestions=(e,t)=>(null!=t&&""!==t&&(this.sessionId=t),this.setState({query:e}),this.props.fetchSuggestions(e,!this.state.includeDoneEpics,this.sessionId).then((e=>(this.setState({data:e}),e)))),this.onChangeIncludeDone=async()=>{const{query:e,includeDoneEpics:t}=this.state;this.setState({includeDoneEpics:!t,loading:!0},(()=>this.fetchSuggestions(e).then((e=>{this.setState({data:e,loading:!1,error:!1})})).catch((()=>{this.setState({data:[],loading:!1,error:!0})}))))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?l.a.createElement(Dc,{option:e}):e.label}render(){const{data:e,loading:t,error:s}=this.state,n={data:e,loading:t,error:s},a={MenuList:Ec},i={
isChecked:this.state.includeDoneEpics,onChange:this.onChangeIncludeDone};return l.a.createElement(Hn,Ac({},oc()(this.props,"getDataFromCache"),{debounceFetchSuggestionsTime:300,initialData:n,componentsProps:i,fetchSuggestions:this.fetchSuggestions,additionalAnalyticsProps:{isEpicLink:!0},components:a,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0}))}}Lc.displayName="EpicInlineEditView",Lc.displayName="EpicInlineEditView";var Rc=Object(d.defineMessages)({placeholder:{id:"issue.epic.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Epic"},recent:{id:"issue.epic.text-for-heading-in-recent-group",defaultMessage:"Recent epics"},allEpics:{id:"issue.epic.text-for-heading-in-all-epics-group",defaultMessage:"All epics"}}),Nc=n("./src/packages/issue/epic-color/src/common/constants.js");const Fc=e=>{const t=e.color?e.color.key:Nc.c[e.colorKey];return t?Nc.b[t]:null},Uc=(e,{baseUrl:t})=>e&&((e,t)=>({content:e.name,value:e.key,
isDone:e.done,color:Fc(e),href:`${t}/browse/${e.key}`,fromCache:e.fromCache}))(e,t),Vc=(e,t)=>e.filter((e=>!(t&&e.done)&&e.key&&e.name&&e.color&&e.color.key)).slice(-5).reverse(),Kc=(e,t=!1)=>{const s=Nc.b[e.color.key];return{color:s,content:e.name,value:e.key,id:e.id,description:e.key,elemBefore:Mc(s),filterValues:[e.name,e.key],isDone:e.done,fromCache:t}},$c=e=>{if(!e)return null;const t=Object.keys(Nc.b),s=t.find((t=>Nc.b[t]===e.color))||t[0];return{name:e.content,key:e.value,done:e.isDone,id:e.id,color:{key:s},fromCache:e.fromCache}},Wc=(e,t,s)=>{const n=(null==e?void 0:e.values)||[],a=((e,t)=>t.map((t=>{const s=e.find((e=>e.key===t.key));return s?(ac.a.update(t.key,s),s):t})))(n,t);return[{heading:s.formatMessage(Rc.recent),items:a.map((e=>Kc(e,!0)))},{heading:s.formatMessage(Rc.allEpics),items:n.map((e=>Kc(e,!1)))}]},Bc=Object(a.a)(((e,t,s)=>(n,a,i)=>{const r=nc()(),{markTimeToFinishTask:c}=Object(g.c)().markStartOfInteraction({
key:S.a.EPIC_LINKS.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:r,cancelExisting:!0}),l=Object(o.isSmartEpicRankingEnabled)()?`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=20&query=${n}&sessionId=${i}&shouldRank=true`:`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=20&query=${n}`,d=Object(qe.a)(l).then((e=>(c({}),e))).catch((e=>{throw Object(g.c)().cancel({key:S.a.EPIC_LINKS.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:r},!0),e}));return Promise.all([d,ac.a.getAll()]).then((([e,t])=>{const n=Vc(t,a);return Wc(e,n,s)}))}));var Hc=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Uc,transformToStateValue:$c,additionalProps:(e,s)=>({fetchSuggestions:Bc(Object(N.f)(e),Object(N.B)(e),s),placeholder:s.formatMessage(Rc.placeholder),noValueText:s.formatMessage(Es.noValue),allowEmptyValue:!0,getDataFromCache:e=>ac.a.getAll().then((t=>Vc(t,e))).then((e=>Wc(void 0,e,s))),
showPinButton:Object(I.a)(t.area)}),saveField:({baseUrl:e,issueKey:s,fieldMetaKey:n,value:a})=>(t.createAnalyticsEvent&&null!=a&&a.key&&(Object(Ye.b)(t.createAnalyticsEvent({}),"epicPickerCache set",{isFromCache:a.fromCache}),ac.a.set(a.key,a)),Object(x.e)(Object(ic.e)(e,s),{body:JSON.stringify({fields:{[n]:a?a.key:null}})}).catch((e=>{throw t.createAnalyticsEvent&&null!=a&&a.key&&(Object(Ye.b)(t.createAnalyticsEvent({}),"epicPickerCache removed"),(null==a?void 0:a.key)&&ac.a.remove(a.key)),e})))})))(Lc),Gc=Object(d.defineMessages)({placeholder:{id:"issue.multi-group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});const qc=e=>e&&cr(e),zc=e=>e&&{name:e.value},Yc=e=>e?(e=>e.map((e=>qc(e))))(e):[],Qc=e=>e?e.map((e=>zc(e))):[];var Jc=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Yc,transformToStateValue:Qc,additionalProps:(e,s)=>({fetchSuggestions:lr(),placeholder:s.formatMessage(Gc.placeholder),
noValueText:s.formatMessage(Es.noValue),showPinButton:Object(I.a)(t.area)})})))(On),Zc=Object(d.defineMessages)({placeholder:{id:"issue.group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}}),Xc=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:qc,transformToStateValue:zc,additionalProps:(e,s)=>({fetchSuggestions:lr(),placeholder:s.formatMessage(Zc.placeholder),noValueText:s.formatMessage(Es.noValue),allowEmptyValue:!Object(v.E)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(I.a)(t.area)})})))(Hn),el=n("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance/main.js");var tl=Object(Jt.a)([Object(u.connect)(((e,t)=>({itemId:t.itemId,isVisible:Object(Fs.f)(e),baseUrl:Object(N.f)(e),issueKey:Object(N.x)(e),locale:Object(N.y)(e),issueId:Object(N.w)(e),projectKey:Object(N.B)(e),isAdmin:"admin"===Object(N.F)(e),showPinButton:Object(I.a)(t.area)
})),{})])((({isVisible:e=!0,onOpenPanel:t,baseUrl:s,issueKey:n,locale:a,issueId:i,projectKey:r,isAdmin:o,itemId:c,showPinButton:d})=>e&&l.a.createElement(el.a,{baseUrl:s,locale:a,issueKey:n,onOpenPanel:t,issueId:i,projectKey:r,isAdmin:o,itemId:c,showPinButton:d}))),sl=n("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance-panel/main.js"),nl=n("./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js"),al=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js");function il(){return(il=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const rl=e=>{const t=Object(Xe.g)(),[s]=Object(Qa.b)(t);return l.a.createElement(sl.a,il({},e,{isPanelOpen:void 0!==s}))};rl.displayName="KbGlancePanelContainer";var ol=Object(Jt.a)([Object(u.connect)((e=>({isEditorOpen:Object(al.w)(e)})),{onShareAsComment:nl.b
})])(rl),cl=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js");var ll=n("./src/packages/issue/fields/labels/src/services/suggestions/main.js"),dl=n("./src/packages/issue/fields/labels/src/ui/main.js"),ul=n("./src/packages/issue/project-context-service/src/main.js");const pl=$e()((e=>t=>`${t} (${e.formatMessage(wr.createNewItem)})`)),ml=Object(d.injectIntl)(Object(H.a)(((e,t)=>{const s=pl(t.intl),n=()=>Er.a.getAll().then((e=>Ir({},e,t.intl.formatMessage))),a=Object(v.d)(t.fieldId),i=Object(v.f)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:kr,transformToStateValue:Cr,additionalProps:(e,r)=>({fetchSuggestions:Tr(a(e),t.fieldId,i(e),t.createAnalyticsEvent,r.formatMessage),formatMessage:r.formatMessage,placeholder:r.formatMessage(wr.placeholder),noValueText:r.formatMessage(Es.noValue),formatCreateLabel:s,canCreateNewItem:!0,allowEmptyValue:!0,validate:Pr,issueKey:Object(N.x)(e),showPinButton:Object(I.a)(t.area),getDataFromCache:n}),
saveField:(...e)=>(({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n,fieldEditSessionId:a},i,r)=>{const o=void 0!==a?`${e}/rest/api/2/issue/${t}?fieldEditSessionId=${a}`:`${e}/rest/api/2/issue/${t}`;return n.forEach((e=>{Er.a.get(e).then((t=>{r.createAnalyticsEvent&&Object(Ye.b)(r.createAnalyticsEvent({}),"labelPickerCache set",{isFromCache:Boolean(null==t?void 0:t.label)}),e&&Er.a.set(`${e}`,(e=>({label:e}))(e))})).catch((e=>{Ns.a.safeErrorWithoutCustomerData("issue-view.labels.cache.set",e.message)}))})),Object(x.e)(o,{body:JSON.stringify({fields:{[s]:n}})}).catch((e=>{throw n.forEach((e=>{Er.a.get(e).then((e=>{null!=e&&e.label&&r.createAnalyticsEvent&&(Object(Ye.b)(r.createAnalyticsEvent({}),"labelPickerCache removed"),e&&Er.a.remove(`${e.label}`))})).catch((e=>{Ns.a.safeErrorWithoutCustomerData("issue-view.labels.cache.remove",e.message)}))})),e}))})(...e,t)}}))(Ur)),fl=e=>{
const{area:t,fieldId:s}=e,{formatMessage:n}=Object(xe.c)(),a=Object(Xe.g)(),i=Object(Xe.f)(),r=Object(ul.g)(a),o=Object(ul.e)(r),[{value:d}]=Object(Yt.a)(a,s),[,{getLabelsSuggestionsWithPrefetch:u}]=(e=>{const{issueKey:t,fieldId:s,getSuggestionsFromServer:n}=e,{createAnalyticsEvent:a}=Object(pc.a)(),i=Object(st.c)(t,s),r=Object(c.useCallback)((async(e,t,r)=>{if(!t&&i&&"labels"===s){const{fieldValuePromise:e,prefetched:t,prefetchSessionId:s,sessionId:n=""}=i||{};if(t&&null!==e&&null!==r){Je(a,s,r||"",n,"labels");const t=He.d.now();try{const s=await e;return Object(ze.b)("labels",t,a,{sessionId:r,isPrefetched:!0,queryLength:0}),s}catch(o){throw Object(ze.a)("labels",t,a,{sessionId:r,isPrefetched:!0}),o}}else Ze(a,s,r||"","labels")}return n(e,t,r)}),[a,n,s,i]),o=Object(c.useMemo)((()=>({getLabelsSuggestionsWithPrefetch:r})),[r]);return[i,o]})({fieldId:s,issueKey:a,getSuggestionsFromServer:ll.a}),p=d?d.title:n(wr.label),m=Object(I.a)(t);return l.a.createElement(h.d,{
"data-test-id":"issue.views.issue-base.context.labels"},l.a.createElement(h.b,null,l.a.createElement(h.c,null,p),!0===m&&l.a.createElement(y.a,{fieldId:s,label:p})),l.a.createElement(h.g,null,l.a.createElement(dl.a,{fieldKey:s,getSuggestions:u,issueId:i,issueKey:a,label:p,showPinButton:m,projectId:o})))};fl.displayName="ExtractedLabelsField";var bl=Object(cl.a)(o.isExtractedLabelsFieldEnabled,fl,ml),gl=n("./src/packages/servicedesk/incident-management/issue-view/linked-alerts/src/async.js"),hl=e=>l.a.createElement(gl.a,e),yl=n("./src/packages/issue/fields/message-custom-field/src/services/index.js");const Ol=Object(te.f)((()=>n.e("async-lazy-jira-issue-field-message-view").then(n.bind(null,"./src/packages/issue/fields/message-custom-field/src/index.js")).then((e=>e.MessageFieldView))),{moduleId:"./src/packages/issue/fields/message-custom-field/src/index.js"}),jl=T.default.div.withConfig({componentId:"la1ro5-0"})`padding-top:${_.e/2}px;`,vl=T.default.div.withConfig({
componentId:"la1ro5-1"})`margin-bottom:${2*_.e}px;`,El=({fieldId:e,area:t,label:s})=>{const n=Object(Xe.g)(),a=Object(I.a)(t),[{value:i,fieldConfig:r}]=Object(yl.a)({issueKey:n,fieldKey:e}),o="content"===t?O.c:h.e,c="content"===t?O.e:h.f,d=(null==r?void 0:r.title)||s;return l.a.createElement(Ps.a,{id:"MessageCustomField",packageName:"jiraIssueView",fallback:"unmount",sendToPrivacyUnsafeSplunk:!0},l.a.createElement(vl,null,l.a.createElement(o,null,l.a.createElement(c,null,d),!0===a&&l.a.createElement(y.a,{fieldId:e,label:d})),l.a.createElement(jl,null,l.a.createElement(te.a,{fallback:null},l.a.createElement(Ol,{value:i})))))};El.displayName="View";var wl=Object(c.memo)(El),kl=Object(d.defineMessages)({placeholder:{id:"issue.multi-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}});const Cl=e=>({value:e.id,content:e.value}),Sl=e=>e?e.map(Cl):[],Il=e=>e&&e.map((e=>({id:e.value,value:e.content}))),Tl=e=>e&&[{items:e.map(Cl)
}]||[],_l=Object(a.a)((e=>()=>Promise.resolve(e).then(Tl)));var Pl=Object(H.a)(((e,t)=>{const s=Object(v.c)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:Sl,transformToStateValue:Il,additionalProps:(e,n)=>({fetchSuggestions:_l(s(e)),placeholder:n.formatMessage(kl.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:n.formatMessage(Es.noValue),showPinButton:Object(I.a)(t.area)})}}))(On),xl=n("./src/packages/issue/fields/number/src/ui/main.js"),Dl=n("./src/packages/issue/fields/number/src/services/index.js");const Al=Object(T.default)(h.d).withConfig({componentId:"aqkhi-0"})`& > div > div > div > div > div > div > div{width:100%;}`,Ml=(T.default.div.withConfig({componentId:"aqkhi-1"})`margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}`,({fieldId:e,label:t,area:s})=>{
const{formatMessage:n,formatNumber:a}=Object(xe.c)(),i=Object(Xe.g)(),r=Object(I.a)(s),[{value:o,fieldConfig:d}]=Object(Dl.a)({issueKey:i,fieldKey:e}),u=(null==d?void 0:d.title)||t,p=Object(c.useCallback)((()=>null===o||""===o?l.a.createElement(ye.b,null,n(Es.noValue)):a(o)),[n,a,o]);return l.a.createElement(Al,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,u),!0===r&&l.a.createElement(y.a,{fieldId:e,label:u})),l.a.createElement(h.g,null,l.a.createElement(xl.default,{label:u,issueKey:i,fieldKey:e,noValueText:n(Es.noValue),readView:p(),isFitContainerWidthReadView:!0})))});Ml.displayName="View";var Ll=Object(c.memo)(Ml),Rl=n("./src/packages/issue/fields/number/src/ui/async.js");const Nl=Object(T.default)(h.g).withConfig({componentId:"sc-1l5alf0-0"})`& > div > div > div > div > div > div{width:100%;}`,Fl=(T.default.div.withConfig({componentId:"sc-1l5alf0-1"
})`margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}`,Object(te.h)((()=>n.e("async-issue-field-number").then(n.bind(null,"./src/packages/issue/fields/number/src/index.js"))),{moduleId:"./src/packages/issue/fields/number/src/index.js"})),Ul=({issueKey:e,fieldId:t,label:s,noValueText:n,onUpdate:a,showPinButton:i})=>{const[{value:r}]=Object(Dl.a)({issueKey:e,fieldKey:t}),{formatMessage:o,formatNumber:c}=Object(xe.c)(),d=null===r||""===r?l.a.createElement(ye.b,null,n):l.a.createElement(Va.a,null,c(r));return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,s),!0===i&&l.a.createElement(y.a,{fieldId:t,label:s})),l.a.createElement(Nl,null,l.a.createElement(Rl.a,{packageName:"issue",fallback:d},l.a.createElement(Fl,{label:s,issueKey:e,fieldKey:t,readView:d,isFitContainerWidthReadView:!0,onUpdate:a,
editButtonLabel:(()=>o(G.a.extendedEditButtonLabel,{inputFieldValue:null!==r?r:n,fieldName:s}))()}))))};Ul.displayName="NumberView";var Vl=Object(c.memo)(Ul),Kl=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(N.x)(e),noValueText:s.formatMessage(Es.noValue),type:"number",showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(ca.h)(t.fieldId,s))})})))(Vl),$l=n("./node_modules/lodash/debounce.js"),Wl=n.n($l),Bl=n("./node_modules/@atlaskit/icon/glyph/people-group.js"),Hl=n.n(Bl),Gl=n("./src/packages/platform/observability/product-analytics-web-client/src/async.js");var ql=Object(d.defineMessages)({placeholder:{id:"issue.organizations.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Organizations"},organizationIconLabel:{id:"issue.organizations.organization-icon-label",defaultMessage:"Organization icon"}});const zl=e=>({value:e.id,content:e.name,elemBefore:l.a.createElement(Hl.a,{label:""})
}),Yl=e=>e?e.map(zl):[],Ql=e=>e&&e.map((e=>({id:e.value,name:e.content}))),Jl=Wl()((async e=>{(await Object(Gl.a)()).getInstance().sendTrackEvent(e)}),2e3,{leading:!0,trailing:!1}),Zl=Object(a.a)((e=>t=>{if(!e)return Promise.resolve([]);const s=`${e}${encodeURIComponent(t)}`;return Object(qe.a)(s).then((e=>(Jl((({isSearchStringEmpty:e})=>({source:"issueView",action:"succeeded",actionSubject:"jsmOrganizationsFieldSearch",attributes:{isSearchStringEmpty:e}}))({isSearchStringEmpty:""===t})),(e=>[{items:e.map(zl)}])(e)))).catch((e=>{throw Object(Ge.a)({meta:{id:"jsmOrganizationsFieldSearch",packageName:"jiraIssueView"},error:e,attributes:{isSearchStringEmpty:""===t}}),e}))})),Xl=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>((e,t,s,n)=>Object(x.e)(Object(ic.e)(e,t),{body:JSON.stringify({fields:{[s]:n.map((e=>Number(e.id)))}})}))(e,t,s,n),ed=e=>e&&Array.isArray(e)?e.map((e=>e.id)).join(","):e;var td=Object(H.a)(((e,t)=>{const s=Object(v.d)(t.fieldId);return{fieldId:t.fieldId,
transformFromStateValue:Yl,transformToStateValue:Ql,saveField:Xl,additionalProps:(e,n)=>({tagAppearance:"rounded",formatOptionLabel:e=>l.a.createElement(cn,null,l.a.createElement(Hl.a,{label:n.formatMessage(ql.organizationIconLabel)}),l.a.createElement(ln,null,e.content)),fetchSuggestions:Zl(s(e)),placeholder:n.formatMessage(ql.placeholder),noValueText:n.formatMessage(Es.noValue),analyticsAttributeIdRetriever:ed,showPinButton:Object(I.a)(t.area)})}}))(On),sd=n("./src/packages/platform/utils/xsrf-token/src/index.js"),nd=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),ad=n("./src/packages/issue/fields/original-estimate/src/ui/main.js");T.default.div.withConfig({componentId:"sc-1os5xyj-0"})`margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}`;const id=Object(T.default)(h.d).withConfig({componentId:"sc-1os5xyj-1"
})`& > div > div > div > div > div > div > div{width:100%;}`,rd=({isEditable:e,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:a,issueId:i,issueKey:r,label:o,placeholder:c,timeTrackingValue:d,showPinButton:u,onUpdate:p})=>l.a.createElement(id,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===u&&l.a.createElement(y.a,{fieldId:n,label:o})),l.a.createElement(h.g,null,l.a.createElement(ad.a,{isEditable:e,isFitContainerWidthReadView:!0,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:a,issueId:i,issueKey:r,label:o,placeholder:c,timeTrackingValue:d,onUpdate:p})));rd.displayName="OriginalEstimate";var od=Object(c.memo)(rd);const cd=Object(d.defineMessages)({placeholder:{id:"issue.time-estimate.placeholder-for-the-field",defaultMessage:"2w 4d 6h 45m"}}),ld=l.a.createElement(d.FormattedMessage,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{
format:l.a.createElement("b",null,"2w 4d 6h 45m")}});var dd=Object(H.a)(((e,t)=>({fieldId:t.fieldId,isOptimistic:!1,additionalProps:(e,s)=>({config:Object(nd.h)(e),placeholder:s.formatMessage(cd.placeholder),issueKey:Object(N.x)(e),issueId:Object(N.w)(e),timeTrackingValue:Object(v.h)("timetracking")(e),isEditable:Object(v.C)(t.fieldId)(e)&&!!Object(sd.a)(),showPinButton:Object(I.a)(t.area),invalidTimeFormatMessage:ld}),additionalCallbacks:e=>({onUpdate:s=>e(Object(ca.h)(t.fieldId,s))})})))(od);const ud=e=>Object(V.createSelector)(Object(v.c)(e),(e=>!e||e.length>1)),pd=e=>Object(V.createSelector)(Fs.f,Object(v.o)(e),((e,t)=>Boolean(e&&t&&t.rating))),md=e=>Object(V.createSelector)(Object(v.n)(e),(e=>Boolean(e&&(e.showField||e.hasEpicLinkFieldDependency))));var fd=n("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),bd=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js")
;const gd=Object(V.createSelector)(Object(v.n)("epic"),(e=>null!==e?e:void 0));Object(V.createSelector)(K.q,bd.b,((e,t)=>e||Object(fd.c)(t)));var hd=n("./node_modules/@atlaskit/select/dist/es2019/AsyncSelect.js"),yd=Object(d.defineMessages)({menuHeader:{id:"issue.views.field.parent.edit.menuHeader",defaultMessage:"To set an epic as a parent, use the epic link instead."},noMatches:{id:"issue.views.field.parent.edit.noMatches",defaultMessage:"No Matches"},placeholder:{id:"issue.views.field.parent.edit.placeholder",defaultMessage:"Choose a parent to assign this issue to."}});const Od=T.default.img.withConfig({componentId:"k4ouwz-0"})`margin-right:${_.e}px;`,jd=T.default.div.withConfig({componentId:"k4ouwz-1"})`display:flex;flex-direction:row;overflow:hidden;`,vd=T.default.div.withConfig({componentId:"k4ouwz-2"})`overflow:hidden;text-overflow:ellipsis;white-space:nowrap;`,Ed=T.default.div.withConfig({componentId:"k4ouwz-3"
})`padding:${_.e}px ${2*_.e}px ${2*_.e}px;`,wd=T.default.div.withConfig({componentId:"k4ouwz-4"})`color:${yt.a.N90};`;function kd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kd(Object(s),!0).forEach((function(t){Sd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Sd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Id=e=>{const t=Object(xe.c)();return l.a.createElement(uc.z.MenuList,e,l.a.createElement(Ed,null,t.formatMessage(yd.menuHeader)),e.children)};Id.displayName="MenuList"
;const Td=e=>{const t=e.data.data;if(t){const{issueType:s,summary:n,key:a}=t,{iconUrl:i}=s;return l.a.createElement(uc.z.Option,e,l.a.createElement(jd,null,l.a.createElement(Od,{src:i})," ",l.a.createElement(vd,null,a," ",n)))}return null},_d=e=>{const t=Object(xe.c)(),{data:s}=e.data,n=s?s.label:l.a.createElement(wd,null,t.formatMessage(yd.placeholder));return l.a.createElement(uc.z.SingleValue,e,n)};_d.displayName="SingleValue";class Pd extends c.Component{constructor(...e){super(...e),this.onChange=e=>{const{hasEpicLinkFieldDependency:t,showField:s}=this.props.value,n=null!=e?e.data:null,a=Cd(Cd({data:n,value:n?n.key:null},{hasEpicLinkFieldDependency:t}),{showField:s});this.props.onChange(a),this.props.onConfirm(a)},this.debouncedLoadOptions=Wl()(((e,t)=>{this.props.loadOptions(e).then(t,(()=>{t([])}))}),300)}render(){const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return l.a.createElement(hd.a,{value:e,autoFocus:!0,defaultOptions:!0,components:{
MenuList:Id,Option:Td,SingleValue:_d},menuPortalTarget:t,menuPlacement:s,onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e.data,noOptionsMessage:()=>n(yd.noMatches),cacheOptions:!0})}}Pd.displayName="EditableParentLinkField";var xd=Object(d.injectIntl)(Pd),Dd=Object(d.defineMessages)({epicLinkExists:{id:"issue.views.field.parent.epic-link-exists-message.epicLinkExists",defaultMessage:"Cannot use parent link when epic link is set."}});const Ad=T.default.div.withConfig({componentId:"d29xmd-0"})`color:${yt.a.N90};`,Md=()=>{const{formatMessage:e}=Object(xe.c)();return l.a.createElement(Ad,null,e(Dd.epicLinkExists))};Md.displayName="EpicLinkExistsMessage";var Ld=Md;const Rd=T.default.div.withConfig({componentId:"wmnwf1-0"})`display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;`,Nd=T.default.a.withConfig({componentId:"wmnwf1-1"})`margin-right:${_.e}px;cursor:pointer;`,Fd=T.default.div.withConfig({componentId:"wmnwf1-2"
})`overflow:hidden;text-overflow:ellipsis;`,Ud=T.default.img.withConfig({componentId:"wmnwf1-3"})`margin-right:${_.e}px;`,Vd=e=>{const{showError:t,value:s,noValueText:n}=e;if(t)return l.a.createElement(Ld,null);if(s.data){const{key:e,summary:t,issueType:{iconUrl:n},url:a}=s.data;return l.a.createElement(Rd,null,l.a.createElement(Ud,{src:n}),l.a.createElement(Nd,{href:a,target:"_blank"},e),l.a.createElement(Fd,null,t))}return l.a.createElement(ye.b,null,n)};Vd.displayName="ParentViewField";var Kd=Vd;class $d extends c.Component{constructor(...e){super(...e),this.shouldShowError=()=>{var e;return this.props.hasEpic&&(null===(e=this.props.value)||void 0===e?void 0:e.hasEpicLinkFieldDependency)}}renderEditableField(){const{onChange:e,onConfirm:t,fetchSuggestions:s,value:n,portalElement:a,menuPlacement:i}=this.props;return this.shouldShowError()?null:l.a.createElement("span",null,l.a.createElement(xd,{value:n,loadOptions:s,portalElement:a,menuPlacement:i,onChange:e,onConfirm:t}))}render(){
const{value:e,noValueText:t,isEditing:s,onConfirm:n,onCancel:a,onEditRequest:i,isMobile:r,isEditable:o,fieldId:c,label:d,showPinButton:u}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,d),!0===u&&l.a.createElement(y.a,{fieldId:c,label:d})),l.a.createElement(h.g,{isEditing:s},l.a.createElement(he.a,{onEscape:a},Object(ns.a)()?l.a.createElement(as.a,{isEditing:s},l.a.createElement(Y.a,{isLabelHidden:!0,label:d,readView:l.a.createElement(as.b,null,l.a.createElement(Kd,{noValueText:t,value:e,showError:this.shouldShowError()})),editView:o?this.renderEditableField():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:s,onConfirm:n,onCancel:a,onEditRequested:i,isFitContainerWidthReadView:!r,isEditable:o})):l.a.createElement(z.a,{isLabelHidden:!0,label:d,readView:l.a.createElement(Kd,{noValueText:t,value:e,showError:this.shouldShowError()}),editView:o?this.renderEditableField():null,disableEditViewFieldBase:!0,
areActionButtonsHidden:!0,isEditing:s,onConfirm:n,onCancel:a,onEditRequested:i,isFitContainerWidthReadView:!r,isEditable:o}))))}}$d.displayName="ParentField";var Wd=$d;const Bd={data:null,hasEpicLinkFieldDependency:!1,showField:!1},Hd=e=>e,Gd=["epic","isVisible"];function qd(){return(qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function zd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Yd=Object(a.a)(((e,t,s,n)=>a=>s?Object(x.d)(`${e}/rest/jpo/1.0/parent/suggest`,{body:JSON.stringify({query:a,projectId:t,issueTypeId:s,
maxResults:100})}).then((t=>((e,t,s={hasEpicLinkFieldDependency:!1,showField:!1})=>{if(!e||!e.issues||e.issues.length<=0)return[];const{projects:n}=e,a=e.issueTypes;return e.issues.map((e=>{const i=`${n.filter((t=>t.id===e.projectId))[0].key}-${e.issueKey}`,{iconUrl:r}=a.filter((t=>+t.id===e.issueTypeId))[0];return{data:{key:i,summary:e.issueSummary,value:i,label:`${i} ${e.issueSummary}`,issueType:{id:e.issueTypeId,iconUrl:`${t}${r}`},url:`${t}/browse/${i}`},hasEpicLinkFieldDependency:s.hasEpicLinkFieldDependency,showField:s.showField,value:i}}))})(t,e,n))):[])),Qd=e=>{let{epic:t,isVisible:s}=e,n=zd(e,Gd);if(!s)return null;const a=null!=t;return l.a.createElement(Wd,qd({hasEpic:a},n))};Qd.displayName="ParentView";var Jd=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:(e,t)=>((e=Bd,t)=>((e,t)=>({hasEpicLinkFieldDependency:e.hasEpicLinkFieldDependency,showField:e.showField,value:e.data&&e.data.key?e.data.key:null,data:e.data?{key:e.data.key,value:e.data.key,
summary:e.data.summary,url:`${t}/browse/${e.data.key}`,label:`${e.data.key} ${e.data.summary}`,issueType:e.data.issueType?{iconUrl:`${t}${e.data.issueType.iconUrl}`,id:e.data.issueType.id}:e.data.issueType}:null}))(e,t.baseUrl))(e,t),transformToStateValue:Hd,additionalProps:(e,s)=>({fetchSuggestions:Yd(Object(N.f)(e),Object(K.C)(e),Object(An.f)(e),Object(v.n)(t.fieldId)(e)),noValueText:s.formatMessage(Es.noValue),epic:gd(e),isVisible:md(t.fieldId)(e),portalElement:B(t.fieldId)(e)?Object(U.a)()||document.body:void 0,showPinButton:Object(I.a)(t.area)}),saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>Object(x.e)(Object(ic.e)(e,t),{body:JSON.stringify({fields:{[s]:n&&n.data?n.data.key:null}})})})))(Qd);const Zd="24x24",Xd=e=>e.map((e=>({id:Object(ua.a)(e.id),accountId:Object(ua.a)(e.id),displayName:e.name,avatarUrls:{[Zd]:e.avatarUrl}}))),eu=e=>Array.isArray(e)?e.reduce(((e,t)=>{const s=(e=>{if(!e||"object"!=typeof e||!e.accountId||!e.displayName)return null;let t=""
;return e.avatarUrls&&"object"==typeof e.avatarUrls&&(t=String(e.avatarUrls["24x24"])),{id:String(e.accountId),name:String(e.displayName),type:"user",fixed:!1,avatarUrl:t}})(t);return s?[...e,s]:e}),[]):[];var tu=n("./src/packages/project-settings/people-field/src/index.js"),su=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js");var nu=Object(d.defineMessages)({placeholderMulti:{id:"issue.people.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Choose people"},placeholderSingle:{id:"issue.people.text-for-edit-view-when-no-value-is-provided-single-mode",defaultMessage:"Choose a person"},singleValueValidationError:{id:"issue.people.single-value-validation-error",defaultMessage:"You can only add one person to this field"}});const au=Object(a.a)((e=>e.map((e=>({value:e.id,content:e.name,elemBefore:l.a.createElement(dt.a,{size:"xsmall",src:e.avatarUrl})}))))),iu=e=>!e||!1!==e.isMulti;class ru extends c.Component{isValid(){
const{configuration:e,value:t}=this.props;return!iu(e)&&t.length>1}renderReadView(){const{value:e,intl:t,isMobile:s}=this.props;return l.a.createElement(gs,{value:au(e),noValueText:t.formatMessage(Es.noValue),tagAppearance:"rounded",shouldHideLinks:s,isUserTag:!0})}renderEditView(){const{onChange:e,value:t,baseUrl:s,intl:n,configuration:a}=this.props,i=iu(a)||t.length>1;return l.a.createElement(tu.a,{baseUrl:s,isMulti:i,autoFocus:!0,isInvalid:this.isValid(),isInputDisabled:this.isValid(),invalidMessage:n.formatMessage(nu.singleValueValidationError),placeholder:n.formatMessage(i?nu.placeholderMulti:nu.placeholderSingle),isDisabled:!1,appearance:"compact",onChange:e,value:t})}render(){const{label:e,isEditable:t,isEditing:s,isMobile:n,onConfirm:a,onCancel:i,onEditRequest:r,intl:o,value:c,configuration:d,fieldId:u,showPinButton:p}=this.props,m=!iu(d)&&c.length<=1,f=!Object(ns.a)()&&(()=>Object(su.b)("independent-bump-profile-card-bump",!1))()&&!s
;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,e),!0===p&&l.a.createElement(y.a,{fieldId:u,label:e})),l.a.createElement(h.g,{isEditing:s,isFixFocusRing:f},l.a.createElement(he.a,{onEscape:i},Object(ns.a)()?l.a.createElement(as.a,null,l.a.createElement(Y.a,{isLabelHidden:!0,label:e,readView:l.a.createElement(as.b,null,this.renderReadView()),editView:t?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:s,shouldConfirmOnEnter:m,isValid:!s||this.isValid(),onConfirm:a,onCancel:i,areActionButtonsHidden:m,onEditRequested:r,isFitContainerWidthReadView:!n,editButtonLabel:o.formatMessage(G.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:o.formatMessage(G.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:o.formatMessage(G.a.cancelButtonLabel,{fieldName:e}),onEscape:i,isEditable:!0})):l.a.createElement(z.a,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:t?this.renderEditView():null,disableEditViewFieldBase:!0,
isEditing:s,shouldConfirmOnEnter:m,isValid:!s||this.isValid(),onConfirm:a,onCancel:i,areActionButtonsHidden:m,onEditRequested:r,isFitContainerWidthReadView:!n,editButtonLabel:o.formatMessage(G.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:o.formatMessage(G.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:o.formatMessage(G.a.cancelButtonLabel,{fieldName:e})}))))}}ru.displayName="People",ru.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:""};var ou=Object(H.a)(((e,{fieldId:t,area:s})=>({fieldId:t,transformFromStateValue:eu,transformToStateValue:Xd,additionalProps:e=>{const n=Object(v.q)(t)(e)||{};return{baseUrl:Object(ua.c)(Object(N.f)(e)),configuration:n.configuration||{},showPinButton:Object(I.a)(s)}}})))(Object(d.injectIntl)(ru));const cu=e=>({content:e.name,value:e.id,iconUrl:e.iconUrl}),lu=e=>e&&cu(e),du=e=>e&&{name:e.content,id:e.value,iconUrl:e.iconUrl},uu=e=>[{items:e.map(cu)}];function pu(){return(pu=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const mu=Object(d.defineMessages)({placeholder:{id:"issue.priority.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select priority"}}),fu=Object(a.a)((e=>()=>Promise.resolve(e).then(uu))),bu=()=>{Object(g.c)().markTimeToFeedback({key:S.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS})},gu=()=>{Object(g.c)().markTimeToFinishTask({key:S.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS})},hu=e=>{const{isEditing:t,value:s,onChange:n,onEditRequest:a,onConfirm:i,onCancel:r}=e,o=Object(c.useRef)(!1);Object(c.useEffect)((()=>{Object(g.c)().markTimeToFinishTask({key:S.a.PRIORITY.TIME_TO_REFLECT_PRIORITY_UPDATE})}),[s]),Object(c.useEffect)((()=>{t||Object(g.c)().markTimeToFinishTask({key:S.a.PRIORITY.TIME_TO_RENDER_READ_VIEW})}),[t]);const d=Object(c.useCallback)((e=>{o.current=!0,Object(g.c)().markStartOfInteraction({
key:S.a.PRIORITY.TIME_TO_REFLECT_PRIORITY_UPDATE,cancelExisting:!0}),n(e)}),[n]),u=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:S.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS,cancelExisting:!0}),a()}),[a]),p=Object(c.useCallback)((()=>{o.current||Object(g.c)().markStartOfInteraction({key:S.a.PRIORITY.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),o.current=!1,i()}),[i]),m=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:S.a.PRIORITY.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),r()}),[r]);return l.a.createElement(Hn,pu({},e,{onEditRequest:u,onConfirm:p,onCancel:m,onChange:d,onDataRequest:bu,onDataLoaded:gu,renderReadView:ta(s)}))};hu.displayName="PriorityView";var yu=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:lu,transformToStateValue:du,additionalProps:(e,s)=>({fetchSuggestions:fu(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(mu.placeholder),noValueText:s.formatMessage(Es.noValue),
portalElement:B(t.fieldId)(e)?Object(U.a)()||document.body:void 0,showPinButton:Object(I.a)(t.area)})})))(hu),Ou=n("./node_modules/lodash/get.js"),ju=n.n(Ou);const vu=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:n})=>{const[{value:a}]=Object(Yt.a)(e,t),i=ju()(a,"schema.type","com.atlassian.jira.plugin.system.customfieldtypes:project"),[{value:r,error:o},{saveValue:c,resetError:l}]=Object(la.a)({fieldKey:t,issueKey:e,fieldType:i,initialValue:null,onSuccess:s,onFailure:n});return[{value:r,error:o,fieldConfig:a},{saveValue:c,resetError:l}]};var Eu=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),wu=n("./src/packages/issue/fields/project/src/common/utils.js"),ku=n("./node_modules/@atlaskit/select/dist/es2019/Select.js"),Cu=n("./src/packages/issue/base-components/base-select/src/ui/format-option-label/index.js");const Su=e=>{
const[t,s]=Object(c.useState)(!1),{value:n,options:a,onChange:i,onFocus:r,onBlur:o,placeholder:d="",autoFocus:u,isInvalid:p}=e,m=Object(c.useCallback)((e=>{s(!0),r&&r(e)}),[r]),f=Object(c.useCallback)((e=>{s(!1),o&&o(e)}),[o]);return l.a.createElement(ku.a,{value:n,options:a,placeholder:d,onChange:i,onFocus:m,onBlur:f,autoFocus:u,formatOptionLabel:Cu.a,isClearable:!0,hideSelectedOptions:!0,menuIsOpen:t,spacing:"compact",validationState:!0===p?"error":null})};Su.displayName="ProjectEditView";var Iu=Object(d.defineMessages)({placeholder:{id:"issue-field-project.placeholder",defaultMessage:"Select project"},errorTitle:{id:"issue-field-project.error-title",defaultMessage:"We couldn't set the project value"},errorMessage:{id:"issue-field-project.error-message",defaultMessage:"Check your connection, then give it another try."}});const Tu=T.default.div.withConfig({componentId:"sc-19uf6yj-0"
})`${""} & > div > div > div > div > div > div > div{${e=>e.isEditing?"":"padding: 0;"};${e=>e.isEditing?"":`height: ${4*_.e}px;`};}& > div > div > div > div > div > div{${e=>e.isEditing?"":"min-height: 0;"};}${""} & > div > div > div > div{width:100%;}${""} & > div > div > div > div > div{width:100%;}`,_u=T.default.span.withConfig({componentId:"rxyhgn-0"})`color:${yt.a.N200};`,Pu=T.default.div.withConfig({componentId:"rxyhgn-1"})`padding:0px;width:100%;height:${4*_.e}px;display:flex;align-items:center;padding-left:${_.e}px;padding-right:${_.e}px;${""} max-width:${25*_.e}px;`,xu=T.default.div.withConfig({componentId:"rxyhgn-2"})`padding-left:${.75*_.e}px;padding-right:${.75*_.e}px;`,Du=T.default.div.withConfig({componentId:"rxyhgn-3"})`margin-right:${_.e}px;display:flex;`,Au=T.default.div.withConfig({componentId:"rxyhgn-4"
})`& > a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block;max-width:100%;}display:inline-flex;min-width:0;margin-right:${_.e}px;`,Mu=({value:e,baseUrl:t,noValueText:s})=>{if(null==e)return l.a.createElement(xu,null,l.a.createElement(_u,null,s||""));const n=e=>{e.stopPropagation()};return l.a.createElement(Pu,null,Boolean(e.avatarUrls["48x48"])&&l.a.createElement(Du,null,l.a.createElement(dt.a,{appearance:"square",size:"xsmall",src:e.avatarUrls["48x48"],borderColor:"transparent"})),l.a.createElement(Au,null,l.a.createElement("a",{onClick:n,onKeyPress:n,href:`${t}/projects/${e.key}`},e.name)))};Mu.displayName="ProjectReadView";const Lu=["fieldKey","issueKey","onCancel","onEdit","onEscape","onConfirm","onEnter","readView","editView","noValueText"];function Ru(){return(Ru=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
function Nu(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Fu=Object(Eu.a)("ProjectPicker",{onChange:"changed"})(Y.a);var Uu=Object(c.memo)((e=>{const{fieldKey:t,issueKey:s,onCancel:n,onEdit:a,onEscape:i,onConfirm:r,onEnter:o,readView:d,editView:u,noValueText:p}=e,m=Nu(e,Lu),[f,b]=Object(c.useState)(!1),{formatMessage:g}=Object(xe.c)(),h=Object(ua.c)(""),[{value:y,error:O,fieldConfig:j},{saveValue:v}]=vu({issueKey:Object(ua.m)(s),fieldKey:t}),E=(null==j?void 0:j.allowedValues)||[],[w,k]=Object(c.useState)(y),C=!!j&&j.isEditable;Object(c.useEffect)((()=>{O&&b(!0),f||k(y)}),[O,f,y]);const S=Object(c.useCallback)(((e,t)=>{e!==y&&v(e,null,t),b(!1),Object(Ye.h)(t)
}),[v,y]),I=Object(c.useCallback)((e=>{b(!1),Object(Ye.h)(e)}),[]),T=Object(c.useCallback)((e=>{I(e),n&&n(e)}),[I,n]),_=Object(c.useCallback)((e=>{b(!0),Object(Ye.h)(e),a&&a(e)}),[a]),P=Object(c.useCallback)((e=>{I(e),i&&i(e)}),[i,I]),x=Object(c.useCallback)(((e,t,s)=>{k(e?Object(wu.c)(e):e),S(e?Object(wu.c)(e):e,s)}),[S]),D=Object(ns.a)()?as.a:Tu;return l.a.createElement(D,{isEditing:f,hasValue:!!y},O&&l.a.createElement(pa.a,{error:O,title:Iu.errorTitle,description:Iu.errorMessage}),l.a.createElement(Fu,Ru({actionSubject:"projectInlineEdit",isEditable:C,isEditing:f,readView:(()=>void 0!==d?d:l.a.createElement(Mu,{value:y,baseUrl:h,noValueText:p}))(),editView:C?(()=>void 0!==u?u:l.a.createElement(Su,{value:null===w?null:Object(wu.a)(w),autoFocus:!0,options:Object(wu.b)(E),onChange:x,placeholder:g(Iu.placeholder),isInvalid:!!O,errorMessage:g(Iu.errorMessage)}))():null,onConfirm:T,onEdit:_,onEscape:P,areActionButtonsHidden:!0},m)))}));const Vu=Object(T.default)(h.d).withConfig({
componentId:"sc-1i3z1o8-0"})`${""} & > div > div > div > div > div > div > div > div{padding:0;}`,Ku=({fieldId:e,area:t,label:s})=>{const{formatMessage:n}=Object(xe.c)(),a=Object(Xe.g)(),i=Object(I.a)(t),[{fieldConfig:r}]=vu({issueKey:a,fieldKey:e}),o=(null==r?void 0:r.title)||s;return l.a.createElement(Vu,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===i&&l.a.createElement(y.a,{fieldId:e,label:o})),l.a.createElement(h.g,null,l.a.createElement(Uu,{issueKey:a,fieldKey:e,noValueText:n(Es.noValue)})))};Ku.displayName="View";var $u=Object(c.memo)(Ku),Wu=n("./node_modules/@atlaskit/select/dist/es2019/RadioSelect.js");class Bu extends c.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:a,portalElement:i}=this.props;return l.a.createElement(ys.a,{validationState:null!=e?"error":null,validationMessage:e},l.a.createElement(Wu.a,{menuPortalTarget:i,options:t,placeholder:s,onChange:n,value:a,tabSelectsValue:!1,autoFocus:!0}))}}
Bu.displayName="RadioFieldView",Bu.displayName="RadioFieldView",Bu.defaultProps={value:null,options:[],placeholder:null,invalidMessage:null};const Hu=T.default.div.withConfig({componentId:"sc-1g3b8uu-0"})`width:100%;margin-left:-8px;margin-top:-8px;& form > div > div > div > div > div{min-height:${4*_.e}px;}`,Gu=T.default.div.withConfig({componentId:"sc-1g3b8uu-1"})`word-break:break-word;position:relative;left:6px;padding:7px 0px;`;class qu extends c.Component{constructor(...e){super(...e),this.emptyOption={label:this.props.intl.formatMessage(Es.noValue)},this.renderReadView=()=>l.a.createElement(Gu,null,this.renderReadViewOld()),this.renderEditView=()=>this.props.isEditable?l.a.createElement(Bu,{portalElement:this.props.portalElement,value:this.props.value,options:this.getOptions(),onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage}):null}getOptions(){const{options:e,value:t}=this.props;return t?[this.emptyOption,...e]:e}
renderReadViewOld(){const{value:e,noValueText:t}=this.props;return e?e.label:l.a.createElement(ye.b,null,t)}render(){const{label:e,onCancel:t,isEditing:s,onConfirm:n,onEditRequest:a,isMobile:i,fieldId:r,showPinButton:c,intl:d,isEditable:u}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,e),!0===c&&l.a.createElement(y.a,{fieldId:r,label:e})),l.a.createElement(h.g,{isEditing:s},l.a.createElement(he.a,{onEscape:t},Object(o.isInlineEditBumpEnabled)()?l.a.createElement(Hu,null,l.a.createElement(Y.a,{hideActionButtons:!0,readView:this.renderReadView,editView:this.renderEditView,isEditing:s,isEditable:u,onEdit:a,onConfirm:n,onCancel:t,readViewFitContainerWidth:!i,editButtonLabel:d.formatMessage(G.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:d.formatMessage(G.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:d.formatMessage(G.a.cancelButtonLabel,{fieldName:e})})):l.a.createElement(z.a,{isLabelHidden:!0,label:e,
readView:this.renderReadViewOld(),editView:this.renderEditView(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:s,onConfirm:n,onCancel:t,onEditRequested:a,isFitContainerWidthReadView:!i,editButtonLabel:d.formatMessage(G.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:d.formatMessage(G.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:d.formatMessage(G.a.cancelButtonLabel,{fieldName:e})}))))}}qu.displayName="RadioInlineEditView",qu.displayName="RadioInlineEditView",qu.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:null,label:"",placeholder:null,noValueText:null,invalidMessage:null};var zu=Object(d.injectIntl)(qu);const Yu=e=>({label:e.value,value:e.id}),Qu=e=>e?Yu(e):null,Ju=e=>e&&void 0!==e.value?{id:e.value,value:e.label}:null,Zu=Object(d.defineMessages)({placeholder:{id:"issue.radio-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),Xu=$e()((e=>(e=>e&&e.map(Yu)||[])(e)));var ep=Object(H.a)(((e,t)=>({
fieldId:t.fieldId,transformFromStateValue:Qu,transformToStateValue:Ju,additionalProps:(e,s)=>({portalElement:B(t.fieldId)(e)?Object(U.a)()||document.body:void 0,options:Xu(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(Zu.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:s.formatMessage(Es.noValue),showPinButton:Object(I.a)(t.area)})})))(zu);const tp=({issueKey:e,fieldKey:t})=>{const[{value:s}]=Object(Yt.a)(e,t),[n]=Object(zt.b)({fieldKey:t,issueKey:e});return[{value:n,fieldConfig:s},{}]},sp=T.default.div.withConfig({componentId:"v3qt9y-0"})`white-space:nowrap;overflow:hidden;text-overflow:ellipsis;`,np=({value:e})=>l.a.createElement(sp,null,e||"\xa0");np.displayName="ReadOnlyFieldView";var ap=({fieldKey:e,readView:t})=>{const s=Object(Xe.g)(),[{value:n}]=tp({issueKey:s,fieldKey:e});return null!=t&&"function"==typeof t?Object(c.createElement)(t,{value:n}):l.a.createElement(np,{value:n})};const ip=Object(T.default)(h.d).withConfig({componentId:"sc-1x1ol3d-0"
})`align-items:center;`,rp=({fieldId:e,label:t,area:s})=>{const n=Object(Xe.g)(),{formatMessage:a}=Object(xe.c)(),[{fieldConfig:i}]=tp({issueKey:n,fieldKey:e}),r=(null==i?void 0:i.title)||t,{noValue:o}=Es,d=Object(c.useCallback)((({value:e})=>null==e?l.a.createElement(ye.b,null,a(o)):l.a.createElement(np,{value:e})),[a,o]),u=Object(I.a)(s);return l.a.createElement(ip,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,r),!0===u&&l.a.createElement(y.a,{fieldId:e,label:r})),l.a.createElement(h.g,null,l.a.createElement(ap,{fieldKey:e,readView:d})))};rp.displayName="ReadOnlyView";var op=rp;const cp=Object(a.a)((e=>({avatarUrl:"",name:e,id:null}))),lp=Object(a.a)((e=>[cp(e)]));var dp=Object(a.a)(((e,t,s)=>async n=>{if(!e)return[];return[...!s&&((e,t)=>!!e&&!!t&&t.toLowerCase().startsWith(e.toLowerCase()))(n,t)?[cp(t)]:[],...(await Object(qe.a)(`${e}${n}`)).map(Tt)]}));const up=Object(d.defineMessages)({noReporter:{id:"issue.reporter.text-when-no-value-is-provided",
defaultMessage:"Anonymous"}});var pp=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Tt,transformToStateValue:_t,additionalProps:(e,s)=>{const n=Object(v.E)(t.fieldId)(e),a=s.formatMessage(up.noReporter);return{portalElement:B(t.fieldId)(e)?Object(U.a)()||document.body:void 0,fetchSuggestions:dp(Object(v.d)(t.fieldId)(e),a,n),emptyOption:n?void 0:cp(a),initialOptions:n?void 0:lp(a),fieldId:"reporter",showPinButton:Object(I.a)(t.area)}}})))(It),mp=n("./node_modules/lodash/range.js"),fp=n.n(mp),bp=n("./node_modules/@atlaskit/icon/glyph/star.js"),gp=n.n(bp),hp=n("./node_modules/@atlaskit/icon/glyph/star-filled.js"),yp=n.n(hp),Op=n("./node_modules/@atlaskit/inline-dialog/dist/es2019/InlineDialog/index.js");const jp=Object(v.e)("com.atlassian.servicedesk:sd-request-feedback-date"),vp=Object(V.createSelector)(jp,(e=>e&&e.renderedValue));var Ep=n("./src/packages/servicedesk/request-details-panel/src/services/index.js");const wp=T.default.div.withConfig({componentId:"hnfcit-0"
})`max-width:220px;padding-right:${_.e}px;margin-right:-${2*_.e}px;margin-bottom:${_.e}px;max-height:240px;overflow:auto;${Object(ye.f)("&")};`,kp=T.default.div.withConfig({componentId:"hnfcit-1"})`height:20px;color:#6c798f;${e=>!e.hasComment&&T.css`margin:-${2*_.e}px 0;padding:10px 0;`};`;var Cp=Object(Jt.a)([Object(u.connect)((e=>({feedbackDate:vp(e)})),{})])((({feedbackDate:e})=>{const[t]=Object(Ep.a)();return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement(wp,null,t),e&&l.a.createElement(kp,{hasComment:!!t},e))}));T.default.div.withConfig({componentId:"sc-197gd9n-0"})`margin-top:0;margin-bottom:${3*_.e}px;`;const Sp=T.default.div.withConfig({componentId:"sc-197gd9n-1"})`margin-top:${.5*_.e}px;cursor:pointer;`;class Ip extends c.Component{constructor(...e){super(...e),this.state={shouldShowDetails:!1},this.onToggle=()=>this.setState({shouldShowDetails:!this.state.shouldShowDetails}),this.renderStar=e=>{const t=fp()(5).map((t=>t<e?l.a.createElement(yp.a,{label:"",key:t,
primaryColor:yt.a.Y300}):l.a.createElement(gp.a,{label:"",key:t,primaryColor:yt.a.N60})));return l.a.createElement(l.a.Fragment,null,t)}}render(){const{fieldName:e,rating:t,isVisible:s,fieldId:n,showPinButton:a}=this.props;return s&&l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,e),!0===a&&l.a.createElement(y.a,{fieldId:n,label:e})),l.a.createElement(h.g,null,l.a.createElement(Op.a,{onClose:this.onToggle,content:l.a.createElement(Cp,null),isOpen:this.state.shouldShowDetails},l.a.createElement(Sp,{onClick:this.onToggle},this.renderStar(t)))))}}Ip.displayName="RequestFeedback",Ip.defaultProps={isVisible:!0};const Tp=(e,t)=>{const s=Object(v.o)(t)(e);return s&&s.rating};var _p=Object(Jt.a)([Object(u.connect)(((e,t)=>({fieldId:t.fieldId,rating:Tp(e,t.fieldId),fieldName:Object(v.m)(t.fieldId)(e),isVisible:pd(t.fieldId)(e),showPinButton:Object(I.a)(t.area)})),{})])(Ip);var Pp=Object(d.defineMessages)({placeholder:{id:"issue.request-language.placeholder",
defaultMessage:"Select Request language"},languageUnknown:{id:"issue.request-language.languageUnknown",defaultMessage:"Language unknown"}});const xp=e=>({content:e.displayName,value:e.languageCode}),Dp=Object(a.a)((e=>({displayName:e.formatMessage(Pp.languageUnknown),languageCode:""}))),Ap=(e,t,s)=>xp(e||Dp(s)),Mp=e=>({displayName:e.content,languageCode:e.value.toString()}),Lp=["shouldHide"];function Rp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Np=Object(a.a)(((e,t)=>()=>Promise.resolve(((e,t)=>[{items:[Dp(t),...e].map(xp)}])(e,t)))),Fp=({baseUrl:e,value:t},s)=>{const{languageCode:n}=t;return(async(e,t,s)=>{if(!t)throw new Error("Issue ID not available")
;return Object(x.e)(((e,t)=>`${e}/rest/servicedesk/lingo-integration/1/request-language/${t}`)(e,t),{body:JSON.stringify({languageCode:s})})})(e,Object(N.w)(s),n)},Up=e=>e&&e.languageCode;var Vp=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Ap,transformToStateValue:Mp,saveField:Fp,additionalProps:(e,s)=>({fetchSuggestions:Np(Object(v.c)(t.fieldId)(e),s),shouldHide:!ud(t.fieldId)(e),hasAutocomplete:!0,placeholder:s.formatMessage(Pp.placeholder),analyticsAttributeIdRetriever:Up,showPinButton:Object(I.a)(t.area)})})))((e=>{const{shouldHide:t}=e,s=Rp(e,Lp);return t?null:l.a.createElement(Hn,s)})),Kp=Object(d.defineMessages)({placeholder:{id:"issue.request-participants.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Request Participants"}});const $p="24x24",Wp=e=>e?e.map((e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrls["24x24"],elemBefore:l.a.createElement(dt.a,{size:"xsmall",src:e.avatarUrls["24x24"]})
}))):[],Bp=e=>e&&e.map((e=>({displayName:e.content,id:Object(ua.a)(e.value),accountId:Object(ua.a)(e.value),avatarUrls:{[$p]:e.avatarUrl}}))),Hp=e=>[{items:(e&&e.users||[]).map((e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrl,email:e.email})))}],Gp=Object(a.a)((e=>t=>e?Object(qe.a)(`${e}${t}`).then(Hp):Promise.resolve([]))),qp=e=>e&&Array.isArray(e)?e.map((e=>e.accountId)).join(","):e,zp=(e,t)=>l.a.createElement(jo,{avatarUrl:e.avatarUrl,email:e.email,label:e.label,context:t.context});zp.displayName="formatOptionLabel";var Yp=Object(H.a)(((e,t)=>{const s=Object(v.d)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:Wp,transformToStateValue:Bp,additionalProps:(e,n)=>({fetchSuggestions:Gp(s(e)),placeholder:n.formatMessage(Kp.placeholder),noValueText:n.formatMessage(Es.noValue),tagAppearance:"rounded",analyticsAttributeIdRetriever:qp,showPinButton:Object(I.a)(t.area),formatOptionLabel:zp})}
}))(On),Qp=n("./src/packages/platform/ui/error-boundary/src/main.js"),Jp=n("./src/packages/issue/issue-glance/src/main.js");const Zp=e=>{const[{value:t}]=Object(Yt.c)(e),[s,n,a]=Object(c.useMemo)((()=>{if(null!=t){const e=Object.keys(t).find((e=>"com.atlassian.jira.modules.servicemanagement.responders-entity:responders-entity-field-cftype"===t[e].schema.custom));if(null!=e){const s=t[e],{autoCompleteUrl:n,schema:{type:a}}=s;return[e,n||"",a]}}return["","","array"]}),[t]);return{respondersFieldIdKey:s,searchUrl:n,fieldType:a}},Xp=({issueKey:e,onSuccess:t,onFailure:s,onSubmit:n})=>{const{respondersFieldIdKey:a,fieldType:i}=Zp(e),[{value:r,error:o},{addValues:c,removeValues:l,resetError:d}]=Object(la.a)({issueKey:e,fieldKey:a,fieldType:i,initialValue:null,onSuccess:t,onFailure:s,onSubmit:n});return[{value:r,error:o},{addResponders:c,removeResponders:l,resetError:d}]};var em=Object(d.defineMessages)({respondersGlanceTitle:{id:"responders.responders-glance.responders-glance-title",
defaultMessage:"Responders"},respondersGlanceContent:{id:"responders.responders-glance.responders-glance-content",defaultMessage:"{count, plural, one {# Responder} other {# Responders}}"}});const tm=e=>{const{formatMessage:t}=Object(xe.c)(),s=Object(Xe.g)(),[{value:n}]=Xp({issueKey:s}),{itemId:a,showPinButton:i,onOpenPanel:r}=e,o=(null==n?void 0:n.length)||0;return l.a.createElement(Jp.a,{itemId:a,showPinButton:i,onOpenPanel:r,title:t(em.respondersGlanceTitle),onClickPayload:{},content:t(em.respondersGlanceContent,{count:o})})};tm.displayName="RespondersGlance";const sm=({isVisible:e=!0,onOpenPanel:t,itemId:s,showPinButton:n})=>l.a.createElement(Qp.a,null,e&&l.a.createElement(tm,{onOpenPanel:t,itemId:s,showPinButton:n}));sm.displayName="RespondersGlanceContainer";var nm=Object(u.connect)(((e,t)=>({itemId:t.itemId,isVisible:Object(Fs.f)(e),showPinButton:Object(I.a)(t.area)
})),{})(sm),am=n("./node_modules/lodash/intersection.js"),im=n.n(am),rm=n("./src/packages/platform/ui/panels/panel-content/src/styled.js"),om=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),cm=n("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),lm=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),dm=n("./src/packages/servicedesk/incident-management/common/src/services/has-opsgenie-account/main.js"),um=n("./src/packages/servicedesk/incident-management/services/src/services/configuration/main.js"),pm=n("./src/packages/servicedesk/incident-management/system-incident-status/src/services/main.js"),mm=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),fm=n("./node_modules/react-sweet-state/lib/esm/components/hook.js"),bm=n("./src/packages/servicedesk/incident-management/common/src/utils.js");function gm(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gm(Object(s),!0).forEach((function(t){ym(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ym(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Om=n("./node_modules/lodash/reduce.js"),jm=n.n(Om);const vm=()=>Object(pt.b)("jsm-incident-consolidation-intermediate-state-fast_d86io",!1),Em={fetchResponderAlerts:(t,s,n,a)=>async({getState:i,setState:r})=>{if(t){r({isLoading:!0});try{
const e=await Object(qe.a)(`${Object(bm.a)(n,s)}/issue/${t}/incident/responder-alerts`),o=null==e?void 0:e.data,c=jm()(o,((e,t)=>{const s=e;return s[t.id]=t,s}),{}),{newlyAddedResponders:l}=i();r({isLoading:!1,data:c,error:void 0,isInitialLoad:!1,newlyAddedResponders:l.filter((e=>!o.some((t=>{const{originalOwnerAri:s}=t;return s===e}))))}),a&&Object(Ye.b)(a,"fetchResponderAlerts succeeded")}catch(e){if(Object(Ge.b)({event:a,error:e,id:"fetchResponderAlerts",sendToPrivacyUnsafeSplunk:!0}),r({isLoading:!1,error:{value:e.message,type:"FETCH_RESPONDER_ALERTS_ERROR"},isInitialLoad:!1}),(()=>Object(pt.b)("jsd-incident-management-poller-max-attempt-refactor",!1))())throw e}}},acknowledgeResponderAlert:(t,s,n,a)=>async({getState:i,setState:r})=>{if(rs()(t))return;let{data:o}=i();if(!rs()(o)&&!o[t].isAcknowledging){r({data:hm(hm({},o),{},{[t]:hm(hm({},o[t]),{},{isAcknowledging:!0,error:void 0})}),error:void 0});try{
const{requestId:c}=await Object(qe.a)(`${Object(bm.a)(n,s)}/alerts/${t}/acknowledge`,{method:"POST"}),l=async d=>{try{const e=await Object(qe.a)(`${Object(bm.a)(n,s)}/alerts/requests/${c}`);e.success?(o=i().data,r({data:hm(hm({},o),{},{[t]:hm(hm({},rs()(o)?{}:o[t]),{},{isAcknowledging:!1,isAware:!0,ackedBy:{userId:"optimisticUpdate",atlassianAccountId:"optimisticUpdate",displayName:null,avatarUrl:null}})})}),a&&Object(Ye.b)(a,"acknowledgeResponderAlert succeeded")):r({data:hm(hm({},o),{},{[t]:hm(hm({},rs()(o)?{}:o[t]),{},{isAcknowledging:!1,error:{value:e.status,type:"ACKNOWLEDGE_RESPONDER_ALERT_ERROR"}})})})}catch(e){0===d?(Object(Ge.b)({event:a,error:e,id:"acknowledgeResponderAlert",sendToPrivacyUnsafeSplunk:!0}),o=i().data,r({data:hm(hm({},o),{},{[t]:hm(hm({},rs()(o)?{}:o[t]),{},{isAcknowledging:!1,error:{value:e.message,type:"ACKNOWLEDGE_RESPONDER_ALERT_TIMEOUT_ERROR"}})})})):(await(e=>new Promise((t=>setTimeout(t,e))))(200),await l(d-1))}};await l(10)}catch(e){Object(Ge.b)({
event:a,error:e,id:"submitAcknowledgeResponderAlert",sendToPrivacyUnsafeSplunk:!0}),r({data:hm(hm({},o),{},{[t]:hm(hm({},rs()(o)?{}:o[t]),{},{isAcknowledging:!1,error:{value:e.message,type:"ACKNOWLEDGE_RESPONDER_ALERT_ERROR"}})})})}}},setNewlyAddedResponders:e=>({setState:t})=>{t({newlyAddedResponders:e})}},wm={data:void 0,error:void 0,isLoading:!1,isInitialLoad:!0,newlyAddedResponders:[]},km=Object(mm.a)({name:"responderAlerts",initialState:wm,actions:Em}),Cm=Object(fm.a)(km),Sm=()=>{const e=Object(Xe.f)(),[t,{fetchResponderAlerts:s,acknowledgeResponderAlert:n,setNewlyAddedResponders:a}]=Cm();return[{responderAlerts:t},{fetchResponderAlerts:Object(c.useCallback)(((t,n,a)=>s(e,t,n,a)),[s,e]),acknowledgeResponderAlert:Object(c.useCallback)(((e,t,s,a)=>n(e,t,s,a)),[n]),setNewlyAddedResponders:a}]}
;var Im=n("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),Tm=n("./node_modules/@atlaskit/icon/glyph/editor/add.js"),_m=n.n(Tm),Pm=n("./node_modules/@atlaskit/user-picker/dist/es2019/components/UserPicker.js");const xm=e=>{const[t,s]=Object(c.useState)([]),[n,a]=Object(c.useState)(void 0),[i,r]=Object(c.useState)(!1),{searchUrl:o}=Zp(e),[{value:l}]=Xp({issueKey:e}),d=Object(c.useRef)("");return[{data:t,error:n,loading:i},Object(c.useCallback)(((e="")=>{const t=(()=>Object(pt.b)("add-query-to-the-responder-field-type-info_i4iv2",!1))()?`${o}${e}`:`${o}?query=${e}`;return r(!0),d.current=e,a(void 0),Object(qe.a)(t).then((({responders:t})=>{if(e===d.current)if(null!=l){let e=[];e=t.filter((e=>!l.find((t=>t.ari===e.ari)))),s(e)}else s(t)})).catch((t=>{e===d.current&&a(t)})).finally((()=>r(!1)))}),[l,o]),()=>s([])]};var Dm=Object(d.defineMessages)({addResponders:{id:"responders.responders-glance-panel.add-responders.responder-picker.add-responders",
defaultMessage:"Add responder"},placeholderMessage:{id:"responders.responders-glance-panel.add-responders.responder-picker.placeholder-message",defaultMessage:"Search people and teams"},noOptionsMessage:{id:"responders.responders-glance-panel.add-responders.responder-picker.no-options-message",defaultMessage:"Refine your search to see more results"},invalidMessage:{id:"responders.responders-glance-panel.add-responders.responder-picker.invalid-message",defaultMessage:"The value could not be saved"}}),Am=n("./node_modules/@atlaskit/theme/dist/es2019/constants.js");const Mm=T.default.div.withConfig({componentId:"sc-1w50gzw-0"})`display:flex;justify-content:flex-start;padding:${2*Object(Am.gridSize)()}px ${2*Object(Am.gridSize)()}px ${2*Object(Am.gridSize)()}px ${Object(Am.gridSize)()/2}px;align-items:center;cursor:pointer;${({isDisabled:e})=>e&&"cursor: not-allowed;"}`,Lm=T.default.div.withConfig({componentId:"sc-1w50gzw-1"
})`padding:${.75*Object(Am.gridSize)()}px ${2*Object(Am.gridSize)()}px ${2*Object(Am.gridSize)()}px ${Object(Am.gridSize)()/2}px;`;function Rm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Nm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(s),!0).forEach((function(t){Fm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Rm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Um=({onResponderSelected:e,onBlur:t,respondersFieldError:s})=>{const n=Object(c.useRef)({previousQuery:void 0
}).current,[a]=Object(dm.a)(),{error:i,resetError:r}=s,[o,d]=Object(c.useState)(!1),{formatMessage:u}=Object(xe.c)(),p=Object(Xe.g)(),[{data:m,loading:f},b,g]=xm(p),h=m.map((e=>Nm(Nm({},e),{},{id:e.ari}))),y=Object(c.useMemo)((()=>o&&!0===a),[o,a]);Object(c.useEffect)((()=>{i&&d(!0)}),[i]);const O=Object(c.useMemo)((()=>Wl()((e=>{e!==n.previousQuery&&b(e),n.previousQuery=e}),300)),[b,n.previousQuery]);return l.a.createElement(l.a.Fragment,null,!y&&l.a.createElement(Mm,{isDisabled:!1===a,onClick:()=>!0===a&&d(!0)},l.a.createElement(_m.a,{label:u(Dm.addResponders),primaryColor:!1===a?"#A5ADBA":"#0052CC"}),l.a.createElement(Im.a,{isDisabled:!1===a,appearance:"link",spacing:"none"},u(Dm.addResponders))),y&&l.a.createElement(Lm,null,i&&l.a.createElement(ut.a,null,u(Dm.invalidMessage)),l.a.createElement(Pm.a,{fieldId:"jsm-responders",options:h,onChange:e,onInputChange:O,isMulti:!0,isLoading:f,onBlur:()=>{d(!1),g(),r(),t()},autoFocus:!0,width:"100%",
noOptionsMessage:()=>u(Dm.noOptionsMessage),placeholder:u(Dm.placeholderMessage)})))},Vm=({responders:e,onAddResponders:t,respondersFieldError:s})=>{const[n,a]=Object(c.useState)(null),{createAnalyticsEvent:i}=Object(pc.a)(),[,{setNewlyAddedResponders:r}]=Sm();return l.a.createElement(Um,{onResponderSelected:e=>{null!=e&&Array.isArray(e)?a(e):null==e&&a(null)},onBlur:()=>{if(null!=n&&null!=t){const s=n.map((e=>({ari:e.ari,name:e.name,type:e.type,avatarUrl:e.avatarUrl}))),o=[...null!=e?e:[],...s];r(s.map((e=>e.ari))),t(s,o,null,i({})),a(null)}},respondersFieldError:s})};Vm.displayName="AddResponders"
;var Km=n("./node_modules/@atlaskit/button--next/dist/es2019/button-group.js"),$m=n("./node_modules/@atlaskit/icon/glyph/error.js"),Wm=n.n($m),Bm=n("./node_modules/@atlaskit/icon/glyph/notification-all.js"),Hm=n.n(Bm),Gm=n("./node_modules/@atlaskit/icon/glyph/notification-direct.js"),qm=n.n(Gm),zm=n("./src/packages/servicedesk/incident-management/system-incident-status/src/services/constants.js"),Ym=n("./src/packages/servicedesk/incident-management/update-incident-modal/src/services/main.js"),Qm=Object(d.defineMessages)({noIncidentManagementError:{id:"responders.responders-glance-panel.inline-message.no-incident-management-error",defaultMessage:"To use this feature, your team must be on a plan that allows you to add and alert responders."},noIncidentError:{id:"responders.responders-glance-panel.inline-message.no-incident-error",defaultMessage:"To use the responders field to alert responders, update the incident. {learnMoreLink}"},learnMoreLinkText:{
id:"responders.responders-glance-panel.inline-message.learn-more-link-text",defaultMessage:"Learn more about updating incidents."},updateIncidentButton:{id:"responders.responders-glance-panel.inline-message.update-incident-button",defaultMessage:"Update incident"},alertsOff:{id:"responders.responders-glance-panel.inline-message.alerts-off",defaultMessage:"Alerts won\u2019t be created for responders added to this incident. Contact your admin to enable alerts for future incidents."},alertsOn:{id:"responders.responders-glance-panel.inline-message.alerts-on",defaultMessage:"An alert will be created for each responder."},noOpsgenieAccount:{id:"responders.responders-glance-panel.inline-message.no-opsgenie-account",defaultMessage:"You need an Opsgenie account to manage responders and responder alerts. Contact your admin for access."}});const Jm=T.default.div.withConfig({componentId:"sc-16yzpaw-0"
})`display:flex;color:${yt.a.N400};padding:${2*_.e}px;>:first-child{margin-right:${2*_.e}px;}`,Zm=T.default.div.withConfig({componentId:"sc-16yzpaw-1"})`margin-bottom:${_.e}px;`;function Xm(){return(Xm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const ef=()=>{const{formatMessage:e}=Object(xe.c)(),t=l.a.createElement("a",{href:"https://support.atlassian.com/jira-service-management-cloud/docs/add-missing-features-to-an-incident",target:"_blank",rel:"noopener noreferrer"},e(Qm.learnMoreLinkText));return l.a.createElement(d.FormattedMessage,Xm({},Qm.noIncidentError,{values:{learnMoreLink:t}}))};ef.displayName="NoIncidentText";const tf=()=>{var e
;const{formatMessage:t}=Object(xe.c)(),s=Object(Xe.f)(),[,{setIsUpdateIncidentModalOpen:n}]=Object(Ym.b)(),[{data:a,isLoading:i}]=Object(pm.b)(),[{isLoading:r}]=Object(pm.c)(),[o]=Object(dm.a)(),[{configuration:c}]=Object(um.b)();if(!(null!==(e=null==c?void 0:c.isOpsgenieIncidentEnabled)&&void 0!==e&&e))return l.a.createElement(Jm,null,l.a.createElement(Wm.a,{label:"",primaryColor:"#DE350B"}),t(Qm.noIncidentManagementError));if(!1===o)return l.a.createElement(Jm,null,l.a.createElement(Wm.a,{label:"",primaryColor:"#DE350B"}),t(Qm.noOpsgenieAccount));if(i||void 0===a||vm()&&r)return null;const d=a.provisionState===zm.a,u=a.alertCreationState===zm.d;return!i&&!d?l.a.createElement(Jm,null,l.a.createElement(Wm.a,{label:""}),l.a.createElement("div",null,l.a.createElement(Zm,null,l.a.createElement(ef,null)),l.a.createElement(Km.a,null,l.a.createElement(Im.a,{onClick:(e,t)=>{Object(Ye.h)(t,"respondersUpdateIncidentWarning"),n({isUpdateIncidentModalOpen:!0,issueIdToUpdate:s})}
},t(Qm.updateIncidentButton))))):u?l.a.createElement(Jm,null,l.a.createElement(Hm.a,{label:""}),t(Qm.alertsOn)):l.a.createElement(Jm,null,l.a.createElement(qm.a,{label:""}),t(Qm.alertsOff))};tf.displayName="InlineMessage";var sf=n("./node_modules/lodash/partition.js"),nf=n.n(sf),af=n("./node_modules/@atlaskit/section-message/dist/es2019/section-message.js"),rf=n("./node_modules/@atlaskit/section-message/dist/es2019/section-message-action.js"),of=n("./src/packages/common-legacy-do-not-add-anything-new/src/have-i-seen-it/index.js"),cf=n("./src/packages/platform/ui/flags/src/services/index.js"),lf=n("./src/packages/platform/ui/flags/src/services/types.js"),df=n("./src/packages/platform/services/get-opsgenie-base-url/src/main.js"),uf=n("./src/packages/servicedesk/periodic-executor/src/async.js"),pf=n("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),mf=Object(d.defineMessages)({flagTitle:{
id:"responders.responders-glance-panel.responder-list.flag-title",defaultMessage:"Couldn't load alert information"},flagDescription:{id:"responders.responders-glance-panel.responder-list.flag-description",defaultMessage:"Try refreshing the page or visit Opsgenie to view responder alerts."},flagLink:{id:"responders.responders-glance-panel.responder-list.flag-link",defaultMessage:"Visit Opsgenie"},informationText:{id:"responders.responders-glance-panel.responder-list.information-text",defaultMessage:"Alerts can be created for every responder added to an incident. You can acknowledge and check the status of alerts using the responders field."},dismiss:{id:"responders.responders-glance-panel.responder-list.dismiss",defaultMessage:"Dismiss"},setup:{id:"responders.responders-glance-panel.responder-list.setup",defaultMessage:"Set up alert notifications"}
}),ff=n("./node_modules/@atlaskit/avatar/dist/es2019/AvatarItem.js"),bf=n("./node_modules/@atlaskit/button--next/dist/es2019/loading-button.js"),gf=n("./node_modules/@atlaskit/icon/glyph/check.js"),hf=n.n(gf),yf=n("./node_modules/@atlaskit/icon/glyph/check-circle.js"),Of=n.n(yf),jf=n("./node_modules/@atlaskit/icon/glyph/cross-circle.js"),vf=n.n(jf),Ef=n("./node_modules/@atlaskit/width-detector/dist/es2019/WidthDetector.js"),wf=Object(d.defineMessages)({assignee:{id:"responders.responders-glance-panel.responder-list.responder-item.assignee",defaultMessage:"Assignee"},acknowledge:{id:"responders.responders-glance-panel.responder-list.responder-item.acknowledge",defaultMessage:"Acknowledge"},acknowledged:{id:"responders.responders-glance-panel.responder-list.responder-item.acknowledged",defaultMessage:"Acknowledged"},acknowledgeResponderAlert:{id:"responders.responders-glance-panel.responder-list.responder-item.acknowledge-responder-alert",defaultMessage:"Acknowledge responder alert"},
viewResponderAlert:{id:"responders.responders-glance-panel.responder-list.responder-item.view-responder-alert",defaultMessage:"View responder alert"},removeResponder:{id:"responders.responders-glance-panel.responder-list.responder-item.remove-responder",defaultMessage:"Remove responder"},acknowledgeErrorHeader:{id:"responders.responders-glance-panel.responder-list.responder-item.acknowledge-error-header",defaultMessage:"Couldn't acknowledge alert"},acknowledgeErrorDescription:{id:"responders.responders-glance-panel.responder-list.responder-item.acknowledge-error-description",defaultMessage:"Wait a few moments and try again. Refresh the page if the problem exists"},tryAgain:{id:"responders.responders-glance-panel.responder-list.responder-item.try-again",defaultMessage:"Try Again"}});const kf=T.default.div.withConfig({componentId:"cfp6un-0"})`display:flex;position:relative;background-color:${({hovered:e})=>e?yt.a.N20:void 0};margin-left:${-_.e/2}px;`,Cf=(T.default.div.withConfig({
componentId:"cfp6un-1"})``,T.default.div.withConfig({componentId:"cfp6un-2"})`font-size:${Am.fontSizeSmall}px;color:${yt.a.N200};`,T.default.div.withConfig({componentId:"cfp6un-3"})`position:absolute;left:${3*_.e}px;top:${e=>2.5*_.e+(e.isAssignee?4:0)}px;`),Sf=T.default.div.withConfig({componentId:"cfp6un-4"})`display:flex;align-items:center;justify-content:center;position:relative;border-radius:50%;height:${2*_.e}px;width:${2*_.e}px;background-color:${yt.a.N0};`,If=T.default.div.withConfig({componentId:"cfp6un-5"})`border-radius:50%;border:${1}px dashed ${yt.a.N200};height:${1.5*_.e}px;width:${1.5*_.e}px;background-color:${yt.a.N0};`,Tf=(T.default.div.withConfig({componentId:"cfp6un-6"})`display:flex;flex-direction:column;justify-content:space-evenly;`,T.default.div.withConfig({componentId:"cfp6un-7"
})`display:${({hovered:e})=>e?"flex":"none"};align-items:center;justify-content:center;position:absolute;top:50%;right:${_.e}px;transform:translate(0,-50%);background-color:${yt.a.N20};`),_f=T.default.div.withConfig({componentId:"cfp6un-8"})`align-items:center;justify-content:center;position:absolute;top:50%;right:${_.e}px;transform:translate(0,-50%);`,Pf=T.default.div.withConfig({componentId:"cfp6un-9"})`align-items:center;justify-content:center;position:absolute;top:50%;right:${_.e}px;transform:translate(0,-50%);`,xf=e=>{var t;const{showFlag:s,dismissFlag:n}=Object(cf.f)(),{createAnalyticsEvent:a}=Object(pc.a)(),{formatMessage:i}=Object(xe.c)(),{name:r,avatarUrl:o,isAssignee:d,isLoading:u,ari:p,onRemoveResponder:m,responderAlert:f,onAcknowledgeAlert:b}=e,[g,h]=Object(c.useState)(!1),y=Object(c.useCallback)((()=>{h(!0)}),[]),O=Object(c.useCallback)((()=>{h(!1)
}),[]),j=e=>void 0!==e&&e>360,v=vm()&&u,E=!rs()(f),w=null!==(t=null==f?void 0:f.isAware)&&void 0!==t&&t,k=!rs()(null==f?void 0:f.ackedBy),C=!(null==f||!f.canUserAck||k),S=Object(c.useCallback)(((e,t)=>{m(p,t),Object(Ye.h)(t,"removeResponder")}),[p,m]),I=Object(c.useCallback)(((e,t)=>{f&&b(f,t),Object(Ye.h)(t,"acknowledgeAlert")}),[f,b]),T=Object(c.useCallback)(((e,t)=>{Object(Ye.h)(t,"viewResponderAlert")}),[]),_=null==f?void 0:f.error,P=null==f?void 0:f.id;return Object(c.useEffect)((()=>{if(!rs()(_)&&!rs()(P)){const e=a({action:"clicked",actionSubject:"button"}),t=Object(lf.c)(P);s({id:t,type:"error",title:wf.acknowledgeErrorHeader,description:wf.acknowledgeErrorDescription,actions:[{content:wf.tryAgain,onClick:()=>{n(t),setTimeout((()=>I(null,e)),200)}}]})}}),[_,P,a,n,i,I,s]),vm()?l.a.createElement(kf,null,l.a.createElement(Ef.a,null,(e=>{var t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ff.a,{avatar:l.a.createElement(dt.a,{appearance:"circle",src:o,size:"small"}),
primaryText:r,secondaryText:d?i(wf.assignee):void 0}),E&&l.a.createElement(Cf,null,l.a.createElement(Sf,{isAssignee:d},w?l.a.createElement(Of.a,{label:i(wf.acknowledged),primaryColor:"green",size:"small"}):l.a.createElement(If,null))),l.a.createElement(_f,null,l.a.createElement(Km.a,null,v?l.a.createElement(Fi.a,null):l.a.createElement(Km.a,null,C&&l.a.createElement(ls.a,{content:i(wf.acknowledgeResponderAlert)},l.a.createElement(bf.a,{spacing:"compact",iconBefore:l.a.createElement(hf.a,{label:i(wf.acknowledgeResponderAlert),size:"small"}),onClick:I,isLoading:null==f?void 0:f.isAcknowledging},j(e)&&i(wf.acknowledge))),!rs()(null==f?void 0:f.link)&&l.a.createElement(ls.a,{content:i(wf.viewResponderAlert)},l.a.createElement(Im.a,{spacing:"compact",href:null!==(t=null==f?void 0:f.link)&&void 0!==t?t:"",target:"_blank",iconBefore:l.a.createElement(Ba.a,{label:i(wf.viewResponderAlert)}),onClick:T}))),l.a.createElement(ls.a,{content:i(wf.removeResponder)},l.a.createElement(Im.a,{
spacing:"compact",appearance:"subtle",iconBefore:l.a.createElement(vf.a,{label:i(wf.removeResponder)}),onClick:S})))))}))):l.a.createElement(kf,{hovered:g,onMouseEnter:y,onMouseLeave:O},l.a.createElement(Ef.a,null,(e=>{var t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ff.a,{avatar:l.a.createElement(dt.a,{appearance:"circle",src:o,size:"small"}),primaryText:r,secondaryText:d?i(wf.assignee):void 0}),E&&l.a.createElement(Cf,null,l.a.createElement(Sf,{isAssignee:d},w?l.a.createElement(Of.a,{label:i(wf.acknowledged),primaryColor:"green",size:"small"}):l.a.createElement(If,null))),v&&l.a.createElement(Pf,null,l.a.createElement(Fi.a,null)),l.a.createElement(Tf,{hovered:g},l.a.createElement(Km.a,null,v?l.a.createElement(Fi.a,null):l.a.createElement(l.a.Fragment,null,C&&l.a.createElement(ls.a,{content:i(wf.acknowledgeResponderAlert)},l.a.createElement(bf.a,{spacing:"compact",iconBefore:l.a.createElement(hf.a,{label:i(wf.acknowledgeResponderAlert),size:"small"}),onClick:I,
isLoading:null==f?void 0:f.isAcknowledging},j(e)&&i(wf.acknowledge))),null!==(null==f?void 0:f.link)&&""!==(null==f?void 0:f.link)&&l.a.createElement(ls.a,{content:i(wf.viewResponderAlert)},l.a.createElement(Im.a,{spacing:"compact",href:null!==(t=null==f?void 0:f.link)&&void 0!==t?t:"",target:"_blank",iconBefore:l.a.createElement(Ba.a,{label:i(wf.viewResponderAlert)}),onClick:T}))),l.a.createElement(ls.a,{content:i(wf.removeResponder)},l.a.createElement(Im.a,{spacing:"compact",appearance:"subtle",iconBefore:l.a.createElement(vf.a,{label:i(wf.removeResponder)}),onClick:S})))))})))};xf.displayName="ResponderItem";const Df=T.default.div.withConfig({componentId:"sc-177yajd-0"})`margin-bottom:${Am.gridSize}px;`,Af=["text","key"];function Mf(){return(Mf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Lf(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Rf=({responders:e,currentAssignee:t,onRemoveResponders:s})=>{const[{data:n}]=Object(pm.b)(),a=(null==n?void 0:n.provisionState)===zm.a,i=(null==n?void 0:n.alertCreationState)===zm.d,[{responderAlerts:r},{fetchResponderAlerts:o,acknowledgeResponderAlert:d}]=Sm(),{createAnalyticsEvent:u}=Object(pc.a)(),{cloudId:p,baseUrl:m}=Object(pf.c)(),{formatMessage:f}=Object(xe.c)(),{showFlag:b}=Object(cf.f)(),[g,h]=Object(c.useState)(!1),[y,O]=Object(c.useState)(!1),[{opsgenieBaseUrl:j}]=Object(df.a)("jiraIssueRespondersField"),v=rs()(j)?"":`${j}/alert/list`,E=rs()(j)?"":`${j}/settings/user/notification`;Object(c.useEffect)((()=>{if(r.error&&!g){
const e=Object(lf.c)("respondersGlancePanelFetchError");b({key:e,type:"error",isAutoDismiss:!0,title:mf.flagTitle,description:mf.flagDescription,actions:rs()(v)?[]:[{content:mf.flagLink,href:v}]}),h(!0)}}),[g,v,r.error,b]),Object(c.useEffect)((()=>{Object(of.a)({respondersGlancePanelOnboarding:{}}).then((e=>{e.respondersGlancePanelOnboarding.status||(O(!0),Object(of.b)("respondersGlancePanelOnboarding",31536e6))}))}),[O]);const w=u({}),k=Object(c.useCallback)((()=>o(p,m,w)),[o,p,m,w]),C=Object(c.useCallback)(((t,n)=>{const[a,i]=nf()(e,(e=>e.ari===t));s(a,i,null,n)}),[e,s]),S=Object(c.useCallback)(((e,t)=>{d(e.id,p,m,t)}),[d,m,p]),I=e.map((e=>{const s=!!t&&null!==t.accountId&&e.ari===`ari:cloud:identity::user/${t.accountId}`,n=((e,t)=>{if(!rs()(e))return Object.keys(e).map((t=>e[t])).find((e=>{const{originalOwnerAri:s}=e;return t===s}))})(r.data,e.ari),o=r.newlyAddedResponders.some((t=>t===e.ari));return l.a.createElement(xf,{key:e.ari,ari:e.ari,name:e.name,avatarUrl:e.avatarUrl,
responderAlert:n,isAssignee:s,onRemoveResponder:C,onAcknowledgeAlert:S,isLoading:a&&i&&(r.isInitialLoad||o)})})),T={text:f(mf.setup),onClick:()=>{rs()(E)?window.open("https://support.atlassian.com/jira-service-management-cloud/docs/set-up-your-alert-notifications/","_blank"):window.open(E,"_blank"),O(!1),Object(Ye.h)(u({}),"link clicked","respondersGlanceChangeboardingOpsgenieLink")},key:"setup"},_={text:f(mf.dismiss),onClick:()=>O(!1),key:"dismiss"},P=E?[T,_]:[_];return l.a.createElement(l.a.Fragment,null,l.a.createElement(uf.a,{onExecute:k,shouldExecuteOnMount:a&&i&&!r.data&&e.length>0,intervalMs:5e3,canExecute:()=>a&&i&&e.length>0,maxRetriesEnabled:!0}),y&&l.a.createElement(Df,null,l.a.createElement(af.a,{appearance:"discovery",actions:P.map((e=>{let{text:t,key:s}=e,n=Lf(e,Af);return l.a.createElement(rf.a,Mf({key:s},n),t)}))},f(mf.informationText))),I)};const Nf=T.default.div.withConfig({componentId:"x3hcwr-0"
})`padding-top:${_.e}px;`,Ff=({isPanelOpen:e,responders:t,currentAssignee:s,onAddResponders:n,onRemoveResponders:a,contentWidth:i,respondersFieldError:r})=>{var o;const d=Object(Xe.g)(),[u]=Object(dm.a)(),[{configuration:p},{fetchConfiguration:m}]=Object(um.b)(),f=null!==(o=null==p?void 0:p.isOpsgenieIncidentEnabled)&&void 0!==o&&o;return Object(c.useEffect)((()=>{p||m()}),[p,m]),e&&l.a.createElement(om.a,{sourceType:cm.f,sourceName:"respondersGlancePanel"},l.a.createElement(pm.a,{scope:d},l.a.createElement(rm.a,null,l.a.createElement(rm.b,{maxWidth:i},l.a.createElement(Nf,null,!0===u&&f&&null!=t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(lm.c,{eventName:"respondersGlanceChangeboardingInfo viewed"}),l.a.createElement(Rf,{responders:t,currentAssignee:s,onRemoveResponders:a})),l.a.createElement(Vm,{responders:t,onAddResponders:n,respondersFieldError:r}),l.a.createElement(tf,null)))),l.a.createElement(lm.b,null)))};function Uf(){return(Uf=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var Vf=e=>{const t=Object(pf.c)(),{baseUrl:s,cloudId:n}=t,a=Object(Xe.g)(),[i]=Object(Qa.b)(a),[{value:r}]=Object(et.a)({issueKey:a}),{createAnalyticsEvent:o}=Object(pc.a)(),d=Object(c.useCallback)((()=>{Object(Ye.b)(o({}),"respondersField updateSucceeded",{})}),[o]),u=Object(c.useCallback)((()=>{Object(Ye.b)(o({}),"respondersField updateFailed",{})}),[o]),p=Object(c.useCallback)(((e,t,s,n)=>{const a=e||[],i=t||[],r=a.filter((e=>"team"===e.type)).length,o=i.filter((e=>"team"===e.type)).length,c=a.filter((e=>"user"===e.type)).length,l=i.filter((e=>"user"===e.type)).length,d=a.length;im()(a,i).length>0?Object(Ye.f)(n,"respondersField updateStarted",{operationType:"remove",numberOfTotalOriginalResponders:d,numberOfOriginalTeamResponder:r,numberOfOriginalUserResponder:c,numberOfTotalRemovedResponders:i.length,
numberOfRemovedTeamResponder:o,numberOfRemovedUserResponder:l}):Object(Ye.f)(n,"respondersField updateStarted",{operationType:"add",numberOfTotalOriginalResponders:d,numberOfOriginalTeamResponder:r,numberOfOriginalUserResponder:c,numberOfTotalAddedResponders:i.length,numberOfAddedTeamResponder:o,numberOfAddeddUserResponder:l})}),[]),[{value:m,error:f},{addResponders:b,removeResponders:g,resetError:h}]=Xp({issueKey:a,onSuccess:d,onFailure:u,onSubmit:p});return l.a.createElement(Qp.a,null,l.a.createElement(um.a,{baseUrl:s,cloudId:n,isGlobal:!0},l.a.createElement(Ff,Uf({},e,{responders:m,isPanelOpen:void 0!==i,currentAssignee:r,onAddResponders:b,onRemoveResponders:g,respondersFieldError:{error:f,resetError:h}}))))};const Kf=Object(_s.asyncComponent)({resolve:()=>n.e("async-services-entity-inline-edit-view").then(n.bind(null,"./src/packages/issue/fields/service-entity/src/ui/main.js")).then((e=>e.ServiceEntityMain)),name:"AsyncServiceEntityField"
}),$f=({children:e,packageName:t})=>l.a.createElement(Ps.a,{id:"issue-service-entity-field",packageName:t,fallback:"flag"},e);$f.displayName="IssueServiceEntityFieldBoundary";var Wf=n("./src/packages/servicedesk/insight-common/insight-shared-ui/src/common/types/index.js");const Bf=e=>{const{fieldId:t,area:s,onChange:n,onConfirm:a}=e,i=Object(Xe.i)();return l.a.createElement($f,{packageName:"issue-service-entity-field"},l.a.createElement(Kf,{area:s,fieldId:Object(Wf.a)(t),projectKey:i,onChange:n,onConfirm:a}))};Bf.displayName="ServiceEntity";const Hf=Object(H.a)(((e,t)=>({area:t.area,fieldId:t.fieldId})))(Bf);var Gf=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(Es.noValue),type:"text",showPinButton:Object(I.a)(t.area)})})))(eo);const qf=e=>({value:e.id,content:e.value,iconUrl:e.iconUrl}),zf=e=>e&&qf(e),Yf=e=>e&&{id:e.value,value:e.content,iconUrl:e.iconUrl},Qf=e=>e&&[{items:e.map(qf)}]||[],Jf=Object(d.defineMessages)({placeholder:{
id:"issue.single-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),Zf=$e()((e=>()=>Promise.resolve(e).then(Qf)));var Xf=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:zf,transformToStateValue:Yf,additionalProps:(e,s)=>({fetchSuggestions:Zf(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(Jf.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:s.formatMessage(Es.noValue),allowEmptyValue:!0,hasAutocomplete:!0,portalElement:B(t.fieldId)(e)?Object(U.a)()||document.body:void 0,showPinButton:Object(I.a)(t.area)})})))(Hn),eb=n("./src/packages/cache/src/services/sprints/index.js"),tb=n("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js");const sb=e=>Object(V.createSelector)(Fs.h,K.n,Object(v.C)(e),((e,t,s)=>e.canScheduleIssues&&t&&s));var nb=n("./src/packages/platform/utils/router/src/index.js");const ab=(e,t)=>`${e}/secure/GHGoToBoard.jspa?sprintId=${t}`
;var ib=n("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js");const rb=({option:e})=>l.a.createElement(_c.e,null,null!=e.elemBefore?e.elemBefore:null,l.a.createElement(Sc,null,l.a.createElement(Ic,null,e.label),null!=e.description?l.a.createElement(Tc,null,e.description):null));rb.displayName="RichOptionView";const ob=T.default.div.withConfig({componentId:"sc-14ke152-0"})`margin-left:${_.e}px;`,cb=T.default.span.withConfig({componentId:"sc-14ke152-1"})`padding:${_.e/2}px;`,lb=T.default.div.withConfig({componentId:"sc-14ke152-2"})`margin-top:${_.e}px;display:flex;justify-content:space-between;max-width:300px;`,db=T.default.span.withConfig({componentId:"sc-14ke152-3"})`font-weight:500;`,ub=`\n    margin-right: ${3*_.e}px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n`,pb=T.default.a.withConfig({componentId:"sc-14ke152-4"})`${ub};`,mb=T.default.span.withConfig({componentId:"sc-14ke152-5"})`${ub};`,fb=T.default.div.withConfig({
componentId:"sc-14ke152-6"})`white-space:nowrap;`;class bb extends c.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1},this.handleButtonClick=e=>{this.setState({isDialogOpen:!this.state.isDialogOpen}),e.stopPropagation()},this.handleDialogClose=e=>{this.setState({isDialogOpen:e.isOpen})},this.handleDialogClick=e=>{e.stopPropagation()},this.handleDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.renderInlineDialogContent=()=>l.a.createElement("div",null,l.a.createElement(db,null,this.props.closedSprintsLabel),this.props.closedSprints.map((e=>l.a.createElement(lb,{key:e.name},this.props.shouldHideLinks?l.a.createElement(mb,null,e.name):l.a.createElement(pb,{href:e.href},e.name),l.a.createElement(fb,null,e.endDate)))))}render(){return l.a.createElement(ob,{onClick:this.handleDialogClick,onMouseDown:this.handleDialogMouseDown},l.a.createElement(Op.a,{content:this.renderInlineDialogContent(),isOpen:this.state.isDialogOpen,onClose:this.handleDialogClose,
placement:"bottom"},l.a.createElement(Im.a,{onClick:this.handleButtonClick,spacing:"none",isSelected:this.state.isDialogOpen},l.a.createElement(cb,null,`+${this.props.closedSprints.length}`))))}}bb.displayName="ClosedSprintsView",bb.defaultProps={shouldHideLinks:!1,closedSprints:[],closedSprintsLabel:null};T.default.div.withConfig({componentId:"sc-150t20x-0"})`margin:2px -1px 2px 2px;`;const gb=T.default.div.withConfig({componentId:"sc-150t20x-1"})`display:flex;align-items:center;width:100%;`,hb=T.default.div.withConfig({componentId:"sc-150t20x-2"})`white-space:nowrap;overflow:hidden;text-overflow:ellipsis;`,yb=["baseUrl","closedSprints","closedSprintsLabel","rapidViewId","onSprintClicked","intl","getDataFromCache","route"],Ob=["rapidViewId"];function jb(){return(jb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function vb(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class Eb extends c.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t,this.props.intl).then((e=>{this.setState({data:e,loading:!1})}))},this.onSprintClick=e=>{const{rapidViewId:t,value:s,onSprintClicked:n}=this.props;void 0!==t&&s&&n(s.value),e.stopPropagation()},this.onEditRequest=()=>{Object(g.c)().cancel({key:S.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT},!0),Object(g.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),
this.props.onEditRequest()},this.onChange=(e,t)=>{t&&("select-option"===t.action?Object(g.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_REFLECT_SELECTED_SPRINT}):"clear"===t.action&&Object(g.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_REFLECT_REMOVED_SPRINT})),this.props.onChange(e)},this.onConfirm=()=>{Object(g.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onConfirm()},this.onCancel=()=>{Object(g.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onCancel()},this.onDataRequest=({isInitial:e})=>{e||Object(g.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{e?Object(g.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(g.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT})},this.renderSprintContent=()=>{
const{baseUrl:e,rapidViewId:t,value:s,route:n}=this.props;return(Object(ib.a)()||Object(o.isRapidboardPrettyUrlsEnabled)()&&Object(ib.b)(n))&&"number"==typeof t&&t>0?s&&s.content:l.a.createElement("a",{href:null==t&&s?ab(e,s.value):void 0,onClick:this.onSprintClick},s&&s.content)},this.renderReadView=()=>{const{value:e,noValueText:t,closedSprints:s,closedSprintsLabel:n,isMobile:a}=this.props;return l.a.createElement(gb,null,l.a.createElement(hb,null,e?this.renderSprintContent():l.a.createElement(ye.b,null,t)),s.length>0&&l.a.createElement(bb,{closedSprints:s,closedSprintsLabel:n,shouldHideLinks:a}))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?l.a.createElement(rb,{option:e}):e.label,this.fetchSuggestions=(e,t)=>this.props.fetchSuggestions(e,t).then((e=>(this.setState({data:e}),e)))}componentDidUpdate(e){const{isEditing:t,value:s}=this.props;!e.isEditing&&t&&Object(g.c)().markTimeToFeedback({key:S.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS}),
e.isEditing&&!t&&(e.value!==s?s?Object(g.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_REFLECT_SELECTED_SPRINT}):Object(g.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_REFLECT_REMOVED_SPRINT}):Object(g.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_RENDER_READ_VIEW}))}render(){const e=this.props,{baseUrl:t,closedSprints:s,closedSprintsLabel:n,rapidViewId:a,onSprintClicked:i,intl:r,getDataFromCache:o,route:c}=e,d=vb(e,yb),{data:u,loading:p,error:m}=this.state,f={data:u,loading:p,error:m};return l.a.createElement(Hn,jb({},d,{fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:f,onEditRequest:this.onEditRequest,onChange:this.onChange,onConfirm:this.onConfirm,onCancel:this.onCancel,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0,optionValuesSafeForAnalytics:!0}))}}Eb.displayName="SprintInlineEditView",
Eb.displayName="SprintInlineEditView",Eb.defaultProps={closedSprints:[],closedSprintsLabel:null};const wb=e=>{let{rapidViewId:t}=e,s=vb(e,Ob);const n=Object(Xe.j)(),a=Object(nb.a)();return l.a.createElement(Eb,jb({},s,{route:a,rapidViewId:n}))};wb.displayName="SprintInlineEditViewWithHooks",wb.defaultProps={closedSprints:[],closedSprintsLabel:null};var kb=wb,Cb=Object(d.defineMessages)({placeholder:{id:"issue.sprint.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Sprint"},activeSprints:{id:"issue.sprint.active-heading",defaultMessage:"Active"},recentSprints:{id:"issue.sprint.recent-heading",defaultMessage:"Recent sprints"},futureSprints:{id:"issue.sprint.future-heading",defaultMessage:"Future"},closedSprintsLabel:{id:"issue.sprint.text-for-closed-sprints-inline-dialog",defaultMessage:"{count} completed {count, plural, one {sprint} other {sprints}}"}});const Sb=e=>(e?e.find((e=>e.state&&"active"===e.state.toLowerCase())):null)||null;function Ib(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tb(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ib(Object(s),!0).forEach((function(t){_b(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ib(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _b(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Pb=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),xb=e=>{const t=Sb(e),s=(e=>(e?e.find((e=>e.state&&"future"===e.state.toLowerCase())):null)||null)(e);return t&&Pb(t)||s&&Pb(s)},Db=e=>t=>{if(!t)return e;const s={name:t.content,id:t.value,state:"active",fromCache:t.fromCache||!1};return e.concat(s)
},Ab=e=>({content:e.name,value:e.id,description:e.boardName,id:e.id,fromCache:e.fromCache||!1}),Mb=(e,t=[],s)=>{const n=e.suggestions||[],a=e.allMatches||[],i=n.concat(a),r=i.filter((e=>"ACTIVE"===e.stateKey)).map(Ab),o=i.filter((e=>"FUTURE"===e.stateKey)).map(Ab),c=(e=>e.slice(-5).reverse())(((e,t)=>t.map((t=>{const s=e.find((e=>e.id===t.id));return s?(eb.a.update(`${t.id}`,s),Tb(Tb({},s),{},{fromCache:!0})):Tb(Tb({},t),{},{fromCache:!0})})))(i,t)).map(Ab);return[{heading:s.formatMessage(Cb.recentSprints),items:c},{heading:s.formatMessage(Cb.activeSprints),items:r},{heading:s.formatMessage(Cb.futureSprints),items:o}]},Lb=Object(a.a)(((e,t,s)=>({id:s.id,name:s.name,href:ab(t,s.id),endDate:e.formatDate(s.endDate,{day:"2-digit",month:"short",year:"numeric"})}))),Rb=(e,t)=>{const s=e.length;return s>0?t.formatMessage(Cb.closedSprintsLabel,{count:s}):null},Nb=Object(a.a)(((e,t)=>(s,n)=>{let a=`${t}/rest/greenhopper/1.0/sprint/picker?query=${s}&maxResults=10&maxActiveSprints=5`
;if(Object(o.isSmartSprintRankingEnabled)()){a=`url&sessionId=${""!==n&&null!=n?n:"default-session-id"}&shouldRank=true`}const i=Object(qe.a)(a);return Promise.all([i,eb.a.getAll()]).then((([t,s])=>Mb(t,s,e)))})),Fb=Object(a.a)(((e,t,s)=>((e,t,s)=>e.map((e=>Lb(s,t,e))))(e,t,s))),Ub=e=>eb.a.getAll().then((t=>Mb({},t,e)));var Vb=Object(H.a)(((t,s)=>{const n=(e=>Object(V.createSelector)(Object(v.q)(e),(e=>e&&e.value?e.value.filter((e=>"closed"===e.state||"CLOSED"===e.state)):[])))(s.fieldId)(t);return{fieldId:s.fieldId,transformFromStateValue:xb,transformToStateValue:Db(n),additionalProps:(e,t)=>({fetchSuggestions:Nb(t,Object(N.f)(e)),closedSprints:Fb(n,Object(N.f)(e),t),closedSprintsLabel:Rb(n,t),placeholder:t.formatMessage(Cb.placeholder),noValueText:t.formatMessage(Es.noValue),allowEmptyValue:!0,baseUrl:Object(N.f)(e),isEditable:sb(s.fieldId)(e),showPinButton:Object(I.a)(s.area),getDataFromCache:Ub}),additionalCallbacks:e=>({onSprintClicked:t=>e(Object(tb.e)(t))}),
saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a},i,r)=>{const o=Sb(a);return a.forEach((e=>{try{r.createAnalyticsEvent&&Object(Ye.b)(r.createAnalyticsEvent({}),"sprintPickerCache set",{isFromCache:e.fromCache}),e.id&&eb.a.set(`${e.id}`,e)}catch(t){Ns.a.safeErrorWithoutCustomerData("issue-view.sprints.cache.set",t.message)}})),Object(x.e)(Object(ic.e)(t,s),{body:JSON.stringify({fields:{[n]:o?o.id:null}})}).catch((t=>{throw a.forEach((t=>{try{r.createAnalyticsEvent&&Object(Ye.b)(r.createAnalyticsEvent({}),"sprintPickerCache removed"),t.id&&eb.a.remove(`${t.id}`)}catch(e){Ns.a.safeErrorWithoutCustomerData("issue-view.sprints.cache.remove",e.message)}})),t}))})(...t,s)}}))(kb),Kb=Object(d.defineMessages)({errorTitle:{id:"issue-field-classic-story-point.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-classic-story-point.error-message",defaultMessage:"Check your connection, then give it another try."},
negativeNumbersNotAllowed:{id:"issue-field-classic-story-point.negative-numbers-not-allowed",defaultMessage:"Time for some positivity. Story point estimates can't be negative."}}),$b=n("./node_modules/query-string/index.js");const Wb=({issueKey:e,issueId:t,fieldKey:s,onSuccess:n})=>{const[{value:a}]=Object(Yt.a)(e,s),i=ju()(a,"schema.type","number"),[{value:r,error:o},{saveValue:c,resetError:l}]=Object(la.a)({fieldKey:s,issueKey:e,fieldType:i,initialValue:null,saveField:(e,n,a,i)=>(async(e,t,s,n)=>null!==s&&s<0?Promise.reject(new Error(Kb.negativeNumbersNotAllowed.id)):Object(x.d)(`${n}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object($b.stringify)({[t]:s,issueId:e,skipScreenCheck:!0,atl_token:Object(sd.a)(),singleFieldEdit:!0})}))(Object(ua.m)(t.toString()),s,a,i),onSuccess:n});return[{value:r,error:o,fieldConfig:a},{saveValue:c,resetError:l}]}
;var Bb=n("./node_modules/@atlaskit/field-text/dist/esm/FieldTextStateless.js");const Hb=T.default.div.withConfig({componentId:"sc-1wlp2p9-0"})`${()=>Object(o.isInlineEditBumpEnabled)()?"":`width: ${8.5*_.e}px;`} cursor:auto;`,Gb=["isInvalid","type","defaultValue"];function qb(){return(qb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function zb(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Yb=Object(c.memo)((e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,a=zb(e,Gb),i=null===n?"":n
;return l.a.createElement(Hb,null,l.a.createElement(Bb.a,qb({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:i},a)))}));const Qb=T.default.div.withConfig({componentId:"b98q2j-0"})`cursor:pointer;${()=>Object(o.isInlineEditBumpEnabled)()?`> span:hover  {\n         color: ${yt.a.N800};\n          background-color: ${yt.a.N90}; \n    }`:`    \n    &:hover > span {\n        color: ${yt.a.N800};\n        background-color: ${yt.a.N90};\n    }`}`;var Jb=({isEditable:e,noValueText:t,value:s})=>{const{formatNumber:n}=Object(xe.c)(),a={min:-1*Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER};if(null===s)return l.a.createElement(ye.b,null,t);const i=l.a.createElement(Va.a,a,n(s));return e?l.a.createElement(Qb,null,i):i};const Zb=["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText","label"];function Xb(){return(Xb=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function eg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const tg="numberInlineEdit";var sg=Object(c.memo)((e=>{const{fieldKey:t,issueKey:s,issueId:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:o,onEnter:d,onUpdate:u,readView:p,editView:m,noValueText:f,label:b}=e,g=eg(e,Zb),[{value:h,error:y,fieldConfig:O},{saveValue:j,resetError:v}]=Wb({issueKey:Object(ua.m)(s),issueId:n&&Object(ua.k)(n),fieldKey:t,onSuccess:u
}),E=ju()(O,"schema.type","number"),[w,k]=Object(c.useState)(!1),[C,S]=Object(c.useState)(h),I=!!O&&O.isEditable,{formatMessage:T}=Object(xe.c)();Object(c.useEffect)((()=>{y&&k(!0)}),[y]);const _=Object(c.useCallback)((e=>{C!==h&&j(C,null,e),k(!1),Object(Ye.h)(e)}),[j,C,h]),P=Object(c.useCallback)((e=>{v(),k(!1),S(h),Object(Ye.h)(e)}),[v,h]),x=Object(c.useCallback)((e=>{P(e),a&&a(e)}),[a,P]),D=Object(c.useCallback)((e=>{_(e),o&&o(e)}),[o,_]),A=Object(c.useCallback)((e=>{k(!0),Object(Ye.h)(e),i&&i(e)}),[i]),M=Object(c.useCallback)((e=>{P(e),r&&r(e)}),[r,P]),L=Object(c.useCallback)((e=>{_(e),d&&d(e)}),[d,_]),R=Object(c.useCallback)((e=>{v();const t=""===e.target.value?null:Number(e.target.value);S(t)}),[v,S]),N=()=>void 0!==m?m:l.a.createElement(Yb,{defaultValue:C,onChange:R,type:E,isInvalid:!!y}),F=()=>void 0!==p?p:Object(ns.a)()?l.a.createElement(as.b,null,l.a.createElement(Jb,{isEditable:I,value:h,noValueText:f})):l.a.createElement(Jb,{isEditable:I,value:h,noValueText:f
}),U=()=>T(G.a.extendedEditButtonLabel,{inputFieldValue:null!==h?h:f,fieldName:b});return l.a.createElement(l.a.Fragment,null,y&&(()=>{if(!y)return null;const e=y.message===Kb.negativeNumbersNotAllowed.id?Kb.negativeNumbersNotAllowed:Kb.errorMessage;return l.a.createElement(pa.a,{error:y,title:Kb.errorTitle,description:e})})(),Object(ns.a)()?l.a.createElement(as.a,{isEditing:w},l.a.createElement(Y.a,Xb({editButtonLabel:U(),actionSubject:tg,isEditable:I,isEditing:w,readView:F(),editView:I?N():null,onCancel:x,onConfirm:D,onEdit:A,onEscape:M},g))):l.a.createElement(Y.a,Xb({editButtonLabel:U(),actionSubject:tg,isEditable:I,isEditing:w,readView:F(),editView:I?N():null,onCancel:x,onConfirm:D,onEdit:A,onEscape:M,onEnter:L},g)))}));T.default.div.withConfig({componentId:"sc-10skcq7-0"})`margin-bottom:16px;& > div > div > div > div > div{width:100%;}& > div > div > div > div > div > div{min-height:32px !important;}& > div > div > div > div > div > div > div{padding:0 6px;}`
;const ng=Object(T.default)(h.d).withConfig({componentId:"sc-10skcq7-1"})`& > div > div > div > div > div > div > div{width:100%;}`,ag=({issueKey:e,fieldId:t,showPinButton:s,issueId:n,label:a,noValueText:i,onUpdate:r})=>l.a.createElement(ng,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,a),!0===s&&l.a.createElement(y.a,{fieldId:t,label:a})),l.a.createElement(h.g,null,l.a.createElement(sg,{label:a,issueKey:e,issueId:n,fieldKey:t,noValueText:i,isFitContainerWidthReadView:!0,onUpdate:r})));ag.displayName="View";var ig=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(N.x)(e),issueId:Object(N.w)(e),noValueText:s.formatMessage(Es.noValue),isEditable:Object(v.C)(t.fieldId)(e)&&"PREVIEW"!==Object(K.w)(e)&&!!Object(sd.a)(),showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(ca.h)(t.fieldId,s))})
})))(ag),rg=n("./src/packages/issue/fields/team/src/messages.js"),og=n("./src/packages/issue/fields/field-base/src/services/edit-field-service/utils.js");const cg=async(e,t,s,n)=>{var a;const i=null!==(a=null==s?void 0:s.id)&&void 0!==a?a:null;return Object(og.c)(e,t,i,n)},lg=({issueKey:e,fieldKey:t,onSuccess:s})=>{const[{value:n}]=Object(Yt.a)(e,t),a=ju()(n,"schema.type","array"),[{value:i,error:r},{saveValue:o,resetError:c}]=Object(la.a)({fieldKey:t,issueKey:e,fieldType:a,initialValue:null,onSuccess:s,saveField:cg});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:c}]};var dg=n("./src/packages/issue/fields/team/src/ui/edit-mode/main.js");const ug=T.default.div.withConfig({componentId:"ixcshu-0"})`& > div > div > div > div > div > div{min-height:${4*_.e}px;}& > div > div > div > div > div > div > div{margin-left:${.75*-_.e}px;margin-right:${.75*-_.e}px;${e=>!e.isEditing&&e.fixedHeight?`height: ${4*_.e}px`:""}}`
;var pg=n("./node_modules/@atlaskit/icon/glyph/people.js"),mg=n.n(pg),fg=n("./src/packages/profilecard-next/src/ui/team-profilecard/async.js");const bg=T.default.div.withConfig({componentId:"sc-1l7ono6-0"})`display:flex;font-size:${Object(Am.fontSize)()}px;height:${2.5*Object(Am.gridSize)()/Object(Am.fontSize)()}em;line-height:${2.5*Object(Am.gridSize)()/Object(Am.fontSize)()};max-width:100%;padding:0px;`,gg=(T.default.div.withConfig({componentId:"sc-1l7ono6-1"})`padding:0px;`,T.default.span.withConfig({componentId:"sc-1l7ono6-2"})`padding-left:${Am.gridSize}px;overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left;color:${({isDisabled:e})=>e?"#A5ADBA":"default"};`),hg=T.default.div.withConfig({componentId:"sc-1l7ono6-3"})`width:100%;display:flex;align-items:center;cursor:${({isEditable:e})=>e?"pointer":"default"};`,yg=T.default.span.withConfig({componentId:"sc-1l7ono6-4"
})`background-color:${"#C1C7D0"};border-radius:50%;width:${3*Object(Am.gridSize)()}px;height:${3*Object(Am.gridSize)()}px;margin:2px;display:flex;align-items:center;justify-content:center;`,Og=()=>{const{formatMessage:e}=Object(xe.c)();return l.a.createElement(ls.a,{content:e(rg.a.teamErrorViewTooltip)},l.a.createElement(hg,null,l.a.createElement(yg,null,l.a.createElement(mg.a,{label:e(rg.a.teamErrorViewTooltip),size:"small",primaryColor:"white"})),l.a.createElement(gg,{isDisabled:!0},e(rg.a.teamErrorViewText))))};Og.displayName="ErrorView";const jg=e=>{const{defaultValue:t,placeholder:s}=e;if(lt()(t))return l.a.createElement(bg,null,s);if(!1===t.isVisible)return l.a.createElement(Og,null);const n=t;return l.a.createElement(fg.a,{teamId:n.id,trigger:"hover-click",position:"left-start"},l.a.createElement(hg,null,l.a.createElement(dt.a,{src:n.avatarUrl,size:"small",borderColor:"transparent"}),l.a.createElement(gg,null,n.name)))};jg.displayName="TeamPickerView";var vg=jg
;const Eg=["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText","useTeamField"];function wg(){return(wg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function kg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Cg=e=>{var t
;const{fieldKey:s,issueKey:n,issueId:a,onCancel:i,onEdit:r,onEscape:o,onConfirm:d,onEnter:u,onUpdate:p,readView:m,editView:f,noValueText:b="DEFAULT PLACEHOLDER MESSAGE",useTeamField:g=lg}=e,h=kg(e,Eg),y=Object(pf.c)().cloudId,[{value:O,error:j,fieldConfig:v},{saveValue:E,resetError:w}]=g({issueKey:Object(ua.m)(n),fieldKey:s,onSuccess:p}),[k,C]=Object(c.useState)(!1),[S,I]=Object(c.useState)(O),T=null!==(t=null==v?void 0:v.isEditable)&&void 0!==t&&t;Object(c.useEffect)((()=>{j&&C(!0)}),[j]);const _=Object(c.useCallback)((e=>{(null==S?void 0:S.id)!==(null==O?void 0:O.id)&&E(S,null,e),C(!1),Object(Ye.h)(e)}),[E,S,O]),P=Object(c.useCallback)((e=>{w(),C(!1),I(O),Object(Ye.h)(e)}),[w,O]),x=Object(c.useCallback)((e=>{P(e),i&&i(e)}),[P,i]),D=Object(c.useCallback)((e=>{_(e),d&&d(e)}),[d,_]),A=Object(c.useCallback)((e=>{C(!0),Object(Ye.h)(e),r&&r(e)}),[r]),M=Object(c.useCallback)((e=>{P(e),o&&o(e)}),[P,o]),L=Object(c.useCallback)((e=>{_(e),u&&u(e)}),[u,_]),R=Object(c.useCallback)((e=>{w(),I(e)
}),[w,I]);return l.a.createElement(l.a.Fragment,null,j&&(()=>j?l.a.createElement(pa.a,{error:j,title:rg.a.errorTitle,description:rg.a.errorMessage}):null)(),l.a.createElement(ug,{isEditing:k,fixedHeight:!0},l.a.createElement(Y.a,wg({isEditable:T,isEditing:k,areActionButtonsHidden:!0,isFitContainerWidthReadView:!0,readView:(()=>void 0!==m?m:l.a.createElement(vg,{defaultValue:S,placeholder:b}))(),editView:T?(()=>void 0!==f?f:l.a.createElement(dg.default,{defaultValue:S,siteId:y,onChange:R,placeholder:b,autoFocus:!0}))():null,onEdit:A,shouldConfirmOnEnter:!0,actionSubject:"teamInlineEdit",onCancel:x,onConfirm:D,onEscape:M,onEnter:L},h))))};const Sg=e=>{const{label:t,issueKey:s,fieldId:n,issueId:a,onUpdate:i,noValueText:r,showPinButton:o}=e;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,t),!0===o&&l.a.createElement(y.a,{fieldId:n,label:t})),l.a.createElement(h.g,null,l.a.createElement(Cg,{label:t,issueKey:s,issueId:a,fieldKey:n,onUpdate:i,
noValueText:r,isFitContainerWidthReadView:!0})))};Sg.displayName="View";var Ig=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(N.x)(e),issueId:Object(N.w)(e),noValueText:s.formatMessage(Es.noValue),isEditable:Object(v.C)(t.fieldId)(e)&&"PREVIEW"!==Object(K.w)(e)&&!!Object(sd.a)(),showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(ca.h)(t.fieldId,s))})})))(Sg),Tg=n("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");var _g=Object(d.defineMessages)({menuHeader:{id:"issue.views.field.team.edit.menuHeader",defaultMessage:"Plan-specific teams can only be selected through a plan."},noMatches:{id:"issue.views.field.team.edit.noMatches",defaultMessage:"No Matches"},placeholder:{id:"issue.views.field.team.edit.placeholder",defaultMessage:"Choose a team to assign this issue to."},sharedTeam:{id:"issue.context-items.team.shared-team",defaultMessage:"Shared Team"},menuFooter:{
id:"issue.context-items.team.edit.menuFooter",defaultMessage:"Showing 100 results. To display more results, please refine your search."}});const Pg=T.default.img.withConfig({componentId:"sc-1v73egx-0"})`width:${2*_.e}px;height:${2*_.e}px;margin-right:${_.e}px;`,xg=T.default.div.withConfig({componentId:"sc-1v73egx-1"})`display:flex;flex-direction:row;overflow:hidden;align-items:center;justify-content:start;padding:0 ${_.e/2}px;`,Dg=T.default.div.withConfig({componentId:"sc-1v73egx-2"})`overflow:hidden;text-overflow:ellipsis;white-space:nowrap;`,Ag=T.default.div.withConfig({componentId:"sc-1v73egx-3"})`padding:${_.e}px ${2*_.e}px ${2*_.e}px;`,Mg=T.default.div.withConfig({componentId:"sc-1v73egx-4"})`padding:0 ${2*_.e}px ${_.e}px ${2*_.e}px;color:${yt.a.DN30};font-weight:bold;font-size:12px;`,Lg=T.default.div.withConfig({componentId:"sc-1v73egx-5"})`color:${yt.a.N90};font-size:12px;padding:${_.e}px ${2*_.e}px;`,Rg=e=>{
const{formatMessage:t}=Object(xe.c)(),{options:s}=e,n=s.length>0&&s[0].moreResultsAvailable?l.a.createElement(Lg,null,t(_g.menuFooter)):null;return l.a.createElement(uc.z.MenuList,e,l.a.createElement(Ag,null,t(_g.menuHeader)),e.children,n)};Rg.displayName="MenuListComponent";var Ng=Rg,Fg=n("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),Ug=n.n(Fg);var Vg=e=>{const t=e.data;if(t){const{avatarUrl:s}=t;return l.a.createElement(uc.z.Option,e,l.a.createElement(xg,null,l.a.createElement(Pg,{src:s||Ug.a})," ",l.a.createElement(Dg,null,e.children)))}return null};const Kg=e=>{const{formatMessage:t}=Object(xe.c)(),{data:s}=e,n=s?s.label:l.a.createElement(ye.b,null,t(_g.placeholder));return l.a.createElement(uc.z.SingleValue,e,n)};Kg.displayName="SingleValueComponent";var $g=Kg;const Wg=e=>l.a.createElement(Ng,e);Wg.displayName="MenuList";const Bg=e=>l.a.createElement($g,e);Bg.displayName="SingleValue";const Hg=e=>l.a.createElement(Vg,e);Hg.displayName="Option"
;const Gg=()=>{const{formatMessage:e}=Object(xe.c)();return l.a.createElement(Mg,null,e(_g.sharedTeam))};Gg.displayName="GroupHeading";class qg extends c.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e),this.props.onConfirm(e)},this.debouncedLoadOptions=Wl()(((e,t)=>{this.props.loadOptions(e).then(t,(()=>{t([])}))}),300)}render(){const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return l.a.createElement(hd.a,{value:e,autoFocus:!0,defaultOptions:!0,menuPortalTarget:t,menuPlacement:s,components:{MenuList:Wg,Option:Hg,SingleValue:Bg,GroupHeading:Gg},onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e,noOptionsMessage:()=>n(_g.noMatches),placeholder:n(_g.placeholder),cacheOptions:!0})}}qg.displayName="EditableTeamField";var zg=Object(d.injectIntl)(qg),Yg=Object(d.defineMessages)({label:{id:"issue.views.field.team.label",defaultMessage:"Team"}
}),Qg=n("./node_modules/@atlaskit/icon/glyph/share.js"),Jg=n.n(Qg);const Zg=T.default.div.withConfig({componentId:"sc-126nhev-0"})`display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;align-items:center;justify-content:start;`,Xg=T.default.div.withConfig({componentId:"sc-126nhev-1"})`overflow:hidden;text-overflow:ellipsis;margin-right:${_.e}px;display:inline-block;`,eh=T.default.img.withConfig({componentId:"sc-126nhev-2"})`vertical-align:middle;width:${3*_.e}px;height:${3*_.e}px;margin-right:${_.e}px;display:inline-block;`,th=T.default.span.withConfig({componentId:"sc-126nhev-3"})`width:${2*_.e}px;height:${2*_.e}px;color:${yt.a.R500};`,sh=e=>{const{value:t,noValueText:s}=e;if(t){const{label:e,isShared:s,avatarUrl:n}=t,a=s?l.a.createElement(th,null,l.a.createElement(Jg.a,{label:"",size:"small"})):null;return l.a.createElement(Zg,null,l.a.createElement(eh,{src:n||Ug.a}),l.a.createElement(Xg,null,e),a)}return l.a.createElement(ye.b,null,s)};sh.displayName="TeamViewField"
;var nh=sh;class ah extends c.Component{renderEditableField(){const{isEditable:e,isSubTask:t,fetchSuggestions:s,onChange:n,onConfirm:a,value:i,portalElement:r,menuPlacement:o}=this.props;return e&&!t?l.a.createElement("span",null,l.a.createElement(zg,{value:i,loadOptions:s,portalElement:r,menuPlacement:o,onChange:n,onConfirm:a})):null}render(){const{intl:{formatMessage:e},value:t,noValueText:s,isEditing:n,onConfirm:a,onCancel:i,onEditRequest:r,isMobile:o,fieldId:c,showPinButton:d,isEditable:u}=this.props,p=e(Yg.label),m=Object(ns.a)()?l.a.createElement(as.b,null,l.a.createElement(nh,{noValueText:s,value:t})):l.a.createElement(nh,{noValueText:s,value:t});return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,p),!0===d&&l.a.createElement(y.a,{fieldId:c,label:p})),l.a.createElement(h.g,{isEditing:n},l.a.createElement(he.a,{onEscape:i},Object(ns.a)()?l.a.createElement(as.a,{hasValue:!!t},l.a.createElement(Y.a,{isLabelHidden:!0,label:p,readView:m,
editView:this.renderEditableField(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:a,onCancel:i,onEditRequested:r,isFitContainerWidthReadView:!o,onEscape:i,isEditable:u})):l.a.createElement(z.a,{isLabelHidden:!0,label:p,readView:m,editView:this.renderEditableField(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:a,onCancel:i,onEditRequested:r,isFitContainerWidthReadView:!o}))))}}ah.displayName="TeamField";var ih=Object(d.injectIntl)(ah);const rh=(e,t)=>e?((e,t)=>({value:e.id,label:e.title,isShared:e.isShared,avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""}))(e,t.baseUrl):null,oh=e=>e?(e=>({id:e.value,title:e.label,isShared:e.isShared,avatarUrl:e.avatarUrl?e.avatarUrl:""}))(e):null,ch=Object(a.a)((e=>t=>Object(x.d)(`${e}/rest/teams/1.0/teams/find`,{body:JSON.stringify({query:t,excludedIds:[],maxResults:100})}).then((t=>((e,t)=>[{options:e.teams.map((e=>({value:e.id,label:e.title,isShared:e.shareable,
avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""}))),moreResultsAvailable:e.moreResultsAvailable}])(t,e))))),lh=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>{const a=n&&n.id?n.id.toString():null;return Object(x.e)(Object(ic.e)(e,t),{body:JSON.stringify({fields:{[s]:a}})})};var dh=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:rh,transformToStateValue:oh,additionalProps:(e,s)=>({fetchSuggestions:ch(Object(N.f)(e)),noValueText:s.formatMessage(Es.noValue),portalElement:B(t.fieldId)(e)?Object(U.a)()||document.body:void 0,isSubTask:Object(Tg.c)(e),showPinButton:Object(I.a)(t.area)}),saveField:lh
})))(ih),uh=n("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),ph=n("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),mh=n("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),fh=n("./src/packages/issue/worklog/src/services/context/index.js"),bh=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),gh=n("./src/packages/issue/issue-view/src/selectors/status-selector.js"),hh=Object(d.defineMessages)({timeRemainingFieldLabel:{id:"issue.context.time-remaining-field.label",defaultMessage:"Time remaining"},includeSubtasksLabel:{id:"issue.time-tracking.include-subtasks",defaultMessage:"Include subtasks"},includeChildrenLabel:{id:"issue.time-tracking.include-children",defaultMessage:"Include child issues"},timeSpentRemainingLabel:{id:"issue.context.time-remaining-spent.label",
defaultMessage:"{timeSpent} logged, {timeRemaining} remaining- edit {fieldName}"},extendedTimeRemainingLabel:{id:"issue.context.extended-time-remaining-field.label",defaultMessage:"No time logged, {timeRemaining} remaining- edit {fieldName}"},extendedTimeSpentLabel:{id:"issue.context.extended-time-spent-field.label",defaultMessage:"{timeSpent} logged- edit {fieldName}"},noTimeLoggedLabel:{id:"issue.context.no-time-logged-field.label",defaultMessage:"No time logged- edit {fieldName}"}}),yh=n("./node_modules/@atlaskit/checkbox/dist/es2019/checkbox.js"),Oh=n("./node_modules/lodash/isEqual.js"),jh=n.n(Oh),vh=n("./src/packages/issue/format-time/src/index.js"),Eh=n("./src/packages/time-tracking-formatter/src/main.js"),wh=Object(d.defineMessages)({errorTitle:{id:"issue-field-remaining-estimate.error-title",defaultMessage:"We couldn't set the remaining estimate value"},errorMessage:{id:"issue-field-remaining-estimate.error-message",
defaultMessage:"Check your connection, then give it another try."}}),kh=n("./src/packages/issue/format-time/src/common/utils/seconds-to-whole-minute-time-string/index.js");const Ch=({issueId:e,issueKey:t,onSuccess:s})=>{const[{value:n}]=Object(Yt.a)(t,"timetracking"),a=(null==n?void 0:n.schema.type)||"timetracking",[{value:i,error:r},{saveValue:o,resetError:c}]=Object(la.a)({fieldKey:"timetracking",issueKey:t,fieldType:a,initialValue:{originalEstimateSeconds:0,timeSpentSeconds:0,remainingEstimateSeconds:0},saveField:(t,s,n,a)=>(async({issueId:e,newValue:t,baseUrl:s})=>{const n=t.remainingEstimateSeconds,a=void 0!==n?Object(kh.a)(n):null;return Object(x.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object($b.stringify)({issueId:e,timetracking_remainingestimate:a,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,
atl_token:Object(sd.a)()})})})({issueId:e,newValue:n,baseUrl:a}),onSuccess:s});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:c}]},Sh=T.default.div.withConfig({componentId:"cns71k-0"})`width:${8.5*_.e}px;cursor:auto;`,Ih=e=>{const{defaultValue:t,placeholderMessage:s,onChange:n,isInvalidInput:a,invalidTimeFormatMessage:i}=e;return l.a.createElement(Sh,null,l.a.createElement(Qr.a,{compact:!0,type:"text",value:t,placeholder:s,onChange:n,invalidMessage:a?i:void 0}))};Ih.displayName="RemainingEstimateEdit";var Th=Ih;const _h=T.default.div.withConfig({componentId:"sc-1ps7lkb-0"})`padding:0px;`,Ph=e=>{const{defaultValue:t}=e;return l.a.createElement(_h,null,l.a.createElement(Va.a,null,t))};Ph.displayName="RemainingEstimateView";var xh=Ph;const Dh=["config","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","placeholderMessage","invalidTimeFormatMessage","useRemainingEstimateField"];function Ah(){
return(Ah=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Mh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lh(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mh(Object(s),!0).forEach((function(t){Rh(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rh(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Nh(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Fh=e=>{const{config:t,issueKey:s,issueId:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:o,onEnter:d,onUpdate:u,readView:p,editView:m,placeholderMessage:f,invalidTimeFormatMessage:b,useRemainingEstimateField:g=Ch}=e,h=Nh(e,Dh),y=Object(Xe.i)(),[O]=Object(tt.d)(y),j=O.canLogWork,[{value:v,error:E},{saveValue:w,resetError:k}]=g({issueId:n,issueKey:Object(ua.m)(s),onSuccess:u}),C=v.remainingEstimateSeconds||0,[S,I]=Object(c.useState)(!1),[T,_]=Object(c.useState)(!1),P=Object(xe.c)(),x=Object(c.useMemo)((()=>{const e=Lh(Lh({},P),{},{formatMessage:({defaultMessage:e})=>e||""});return Object(Eh.a)(C||0,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",
defaultUnit:t.defaultUnit},e)}),[t,P,C]),D=Object(c.useMemo)((()=>Object(Eh.a)(C||0,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit},P)),[t,P,C]),[A,M]=Object(c.useState)(x);Object(c.useEffect)((()=>{M(x)}),[x]),Object(c.useEffect)((()=>{E&&_(!0)}),[E]);const L=Object(c.useCallback)((e=>{if(jh()(A,x))_(!1);else if(Object(vh.b)(t)(A)){const s=Lh(Lh({},v),{},{remainingEstimateSeconds:Object(vh.c)(t)(A)||0});w(s,null,e),Object(Ye.h)(e),I(!1),_(!1)}else I(!0),_(!0)}),[t,x,w,v,A]),R=Object(c.useCallback)((e=>{k(),I(!1),_(!1),M(x),Object(Ye.h)(e)}),[x,k]),N=Object(c.useCallback)((e=>{R(e),a&&a(e)}),[R,a]),F=Object(c.useCallback)((e=>{L(e),o&&o(e)}),[o,L]),U=Object(c.useCallback)((e=>{_(!0),Object(Ye.h)(e),i&&i(e)}),[i]),V=Object(c.useCallback)((e=>{R(e),r&&r(e)}),[R,r]),K=Object(c.useCallback)((e=>{L(e),d&&d(e)}),[d,L]),$=Object(c.useCallback)((e=>{I(!1),k(),M(e.target.value)}),[k,M])
;return l.a.createElement(l.a.Fragment,null,E&&(()=>E?l.a.createElement(pa.a,{error:E,title:wh.errorTitle,description:wh.errorMessage}):null)(),l.a.createElement(Y.a,Ah({actionSubject:"remainingEstimateInlineEdit",isEditable:j,isEditing:T,readView:(()=>void 0!==p?p:l.a.createElement(xh,{defaultValue:D}))(),editView:j?(()=>void 0!==m?m:l.a.createElement(Th,{defaultValue:A,placeholderMessage:f,onChange:$,invalidTimeFormatMessage:b,isInvalidInput:S}))():null,onCancel:N,onConfirm:F,onEdit:U,onEscape:V,onEnter:K},h)))},Uh=n("./src/packages/issue/issue-view/src/common/component/logged-time/view.js");const Vh=e=>void 0===e,Kh=e=>{if(!e)return Object.seal({});const{remainingEstimateSeconds:t,timeSpentSeconds:s}=e;return pi()({loggedTime:s,remainingTime:t},Vh)},$h=Object(a.a)(((e,t,s,n)=>{const{timeSpentSeconds:a,remainingEstimateSeconds:i}=n,r=Object(vh.a)(s)(a||0),o=Object(vh.a)(s)(i||0),c=!!a,l=!!i;switch(!0){case c&&l:return e(hh.timeSpentRemainingLabel,{timeSpent:r,timeRemaining:o,
fieldName:t});case l&&!c:return e(hh.extendedTimeRemainingLabel,{timeRemaining:o,fieldName:t});case c&&!l:return e(hh.extendedTimeSpentLabel,{timeSpent:r,fieldName:t});default:return e(hh.noTimeLoggedLabel,{fieldName:t})}})),Wh=T.default.div.withConfig({componentId:"pvpxta-0"})`margin-bottom:${e=>e.sideBySideMode?0:3*_.e}px;margin-left:-${_.e/2}px;padding-top:${_.e/2}px;& > label > span{color:${yt.a.N500};}`,Bh=T.default.div.withConfig({componentId:"pvpxta-1"})`${({isInlineEditBumpEnabled:e,isEditable:t})=>e&&t?`\n    margin-left: -${_.e}px;\n    margin-top: -${_.e}px;`:""} ${({isInlineEditBumpEnabled:e})=>e?"":"\n    margin-bottom: 16px;\n    \n    & > div > div > div > div > div {\n        width: 100%;\n    }\n    & > div > div > div > div > div > div {\n        min-height: 32px !important;\n    }\n    & > div > div > div > div > div > div > div {\n        padding: 0 6px;\n    }"}`,Hh=Object(T.default)(h.d).withConfig({componentId:"pvpxta-2"
})`& > div > div > div > div > div > div > div{width:100%;}`;class Gh extends c.Component{renderReadView(){const{value:e,isDone:t,config:s,isEditable:n}=this.props;return l.a.createElement(Uh.a,{value:Kh(e),estimatedTime:e.originalEstimateSeconds,isDone:t,config:s,isEditable:n})}renderRemainingEstimateView(){const{config:e,fieldId:t,issueKey:s,issueId:n,showPinButton:a,invalidTimeFormatMessage:i,placeholderMessage:r,timeRemainingFieldLabel:o}=this.props;return n?l.a.createElement(Hh,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===a&&l.a.createElement(y.a,{fieldId:t,label:o})),l.a.createElement(h.g,null,l.a.createElement(Fh,{config:e,issueKey:s,issueId:n,value:"",placeholderMessage:r,invalidTimeFormatMessage:i,isFitContainerWidthReadView:!0}))):null}renderRollUpToggle(){const{rollupLabel:e,isRollingUpData:t,onToggleRollingUpData:s}=this.props;return l.a.createElement(Wh,{sideBySideMode:!0},l.a.createElement(yh.a,{isChecked:t,onChange:({target:{checked:e}},t)=>{s(e,t)
},label:e,name:"include-subtasks-children-in-time-tracking-toggle-from-context"}),l.a.createElement(lm.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromContext"}))}render(){const{isVisible:e,label:t,isEditable:s,isMobile:n,onEditRequest:a,confirmButtonLabel:i,cancelButtonLabel:r,fieldId:c,showPinButton:d,shouldDisplayRollUpDataControl:u,formatMessage:p,config:m,value:f}=this.props;if(!e)return this.renderRemainingEstimateView();const b=$h(p,t,m,f),g=Object(o.isInlineEditBumpEnabled)()?Y.a:z.a;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,t),!0===d&&l.a.createElement(y.a,{fieldId:c,label:t})),l.a.createElement(h.g,{"data-testid":"issue.views.issue-base.context.time-tracking.value"},l.a.createElement(he.a,null,Object(o.isInlineEditBumpEnabled)()?l.a.createElement(Bh,{isInlineEditBumpEnabled:Object(o.isInlineEditBumpEnabled)(),isEditable:s},l.a.createElement(g,{label:t,readView:this.renderReadView(),
editView:s?l.a.createElement("div",null):null,isEditing:!1,isEditable:s,areActionButtonsHidden:!0,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!n,isLabelHidden:!0,onEditRequested:a,editButtonLabel:b,confirmButtonLabel:i,cancelButtonLabel:r})):l.a.createElement(g,{label:t,readView:this.renderReadView(),editView:s?l.a.createElement("div",null):null,isEditing:!1,areActionButtonsHidden:!0,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!n,isLabelHidden:!0,onEditRequested:a,editButtonLabel:b,confirmButtonLabel:i,cancelButtonLabel:r}),u&&this.renderRollUpToggle())))}}Gh.displayName="TimeTrackingView",Gh.displayName="TimeTrackingView";var qh=Gh;const zh=["timeTrackingCalculationSelector","area","intl"];function Yh(){return(Yh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Qh(e,t){if(null==e)return{};var s,n,a=function(e,t){
if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Jh=Object(uh.a)({onToggleRollingUpData:"toggleRollingUpData"})(Object(ph.b)("worklog")(qh)),Zh=e=>{const{timeTrackingCalculationSelector:t,area:s,intl:n}=e,a=Qh(e,zh),[i,{markRollingUpData:r,unmarkRollingUpData:o}]=Object(fh.a)(),d=Object(c.useCallback)((e=>{e?r():o()}),[r,o]);return l.a.createElement(Jh,Yh({},a,{value:t(i),isRollingUpData:i,onToggleRollingUpData:d}))};Zh.displayName="WrappedTimeTrackingView";const Xh=l.a.createElement(d.FormattedMessage,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:l.a.createElement("b",null,"2w 4d 6h 45m")}}),ey=Object(u.connect)(((e,t)=>{
const{intl:{formatMessage:s},area:n,fieldId:a}=t,i=Object(v.m)(t.fieldId)(e);return{formatMessage:s,fieldId:a,timeTrackingCalculationSelector:Object(nd.j)(e),config:Object(nd.h)(e),issueKey:Object(N.x)(e),issueId:Object(N.w)(e),isDone:"DONE"===Object(gh.a)(e),isEditable:Object(nd.b)(e),isMobile:Object(N.r)(e),isVisible:Object(nd.c)(e),label:i,editButtonLabel:s(G.a.editButtonLabel,{fieldName:i}),confirmButtonLabel:s(G.a.confirmButtonLabel,{fieldName:i}),cancelButtonLabel:s(G.a.cancelButtonLabel,{fieldName:i}),timeRemainingFieldLabel:s(hh.timeRemainingFieldLabel),rollupLabel:Object(K.m)(e)?s(hh.includeSubtasksLabel):s(hh.includeChildrenLabel),showPinButton:Object(I.a)(n),shouldDisplayRollUpDataControl:Object(nd.f)(e),placeholderMessage:"2w 4d 6h 45m",invalidTimeFormatMessage:Xh}}),(e=>({onEditRequest:()=>{e(Object(bh.L)("ADD_MODAL",null))}})))(Zh);var ty=e=>{const t=Object(xe.c)();return l.a.createElement(Qp.a,{id:"issue.issue-view.context.time-tracking-field"},l.a.createElement(mh.a,{
id:"context.time-tracking-field",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},l.a.createElement(ey,Yh({},e,{intl:t}))))},sy=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(Es.noValue),type:"url",showPinButton:Object(I.a)(t.area)})})))(eo);const ny=e=>e.users?e.users.map(Tt):[],ay=Object(a.a)((e=>t=>e?Object(qe.a)(`${e}${t}`).then(ny):Promise.resolve([]))),iy=Object(a.a)((e=>({avatarUrl:"",name:e.formatMessage(Es.noValue)})));var ry=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Tt,transformToStateValue:_t,additionalProps:(e,s)=>({portalElement:B(t.fieldId)(e)?Object(U.a)()||document.body:void 0,fetchSuggestions:ay(Object(v.d)(t.fieldId)(e)),emptyOption:Object(v.E)(t.fieldId)(e)?void 0:iy(s),showPinButton:Object(I.a)(t.area)})})))(It),oy=n("./src/packages/cache/src/services/versions/index.js"),cy=Object(d.defineMessages)({createNewItem:{id:"issue.fix-versions.create-new-component-message",
defaultMessage:"Create new version"},recent:{id:"issue.fix-versions.create-new-component-message.recent",defaultMessage:"Recent versions"},releasedHeading:{id:"issue.fix-versions.released-message",defaultMessage:"Released"},unreleasedHeading:{id:"issue.fix-versions.unreleased-message",defaultMessage:"Unreleased"}});function ly(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dy(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ly(Object(s),!0).forEach((function(t){uy(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ly(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function uy(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}const py=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),my={versions:"affectedVersion",fixVersions:"fixVersion"},fy=e=>my[e]||"fixVersion",by=(e,{baseUrl:t,projectKey:s,fieldId:n})=>Object(o.is2afErrorCleanupGroup1Enabled)()?e?e.map((e=>{const a=`project = ${Object(qs.b)(s)} AND ${fy(n)} = ${Object(qs.b)(e.name)}`;return{href:Object(qs.a)(t,a),content:e.name,value:e.id}})):[]:e.map((e=>{const a=`project = ${Object(qs.b)(s)} AND ${fy(n)} = ${Object(qs.b)(e.name)}`;return{href:Object(qs.a)(t,a),content:e.name,value:e.id}})),gy=e=>e?e.map(py):[],hy=e=>e.map((e=>({name:e.content,id:e.value,fromCache:e.fromCache}))),yy=(e,t,s)=>t.filter((e=>e.projectId===s)).map((t=>{const n=e.find((e=>e.id===t.id));if(n){const e=dy(dy({},n),{},{projectId:s});return oy.a.update(`${t.id}`,e),dy(dy({},e),{},{fromCache:!0})}return dy(dy({},t),{},{fromCache:!0})})),Oy=(e,t,s,n)=>{
const a=e.filter((e=>!e.archived)),i=a.filter((e=>!e.released)).map(py),r=a.filter((e=>e.released)).map(py),c=(e=>e.slice(-5).reverse())(Object(o.filterArchivedVersionsFromCacheEnabled)()?yy(e,t,n).filter((e=>!e.archived)):yy(e,t,n));return[{heading:s.formatMessage(cy.recent),items:c.map(py)},{heading:s.formatMessage(cy.unreleasedHeading),items:i},{heading:s.formatMessage(cy.releasedHeading),items:r}]};var jy=Object(d.defineMessages)({placeholder:{id:"issue.single-version-picker.text-for-dropdown-when-nothing-selected",defaultMessage:"Select version"}});const vy=e=>e&&{name:e.content,id:e.value},Ey=e=>e&&{content:e.name,value:e.id},wy=Object(a.a)(((e,t,s)=>()=>Promise.resolve(e).then((e=>Oy(e,[],t,s)))));var ky=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Ey,transformToStateValue:vy,additionalProps:(e,s)=>({fetchSuggestions:wy(Object(v.c)(t.fieldId)(e),s,Object(K.C)(e)),placeholder:s.formatMessage(jy.placeholder),noValueText:s.formatMessage(Es.noValue),
allowEmptyValue:!Object(v.E)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(I.a)(t.area)})})))(Hn);const Cy=Object(a.a)(((e,t,s)=>()=>Promise.resolve(e).then((e=>Oy(e,[],t,s)))));var Sy=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:gy,transformToStateValue:hy,additionalProps:(e,s)=>({fetchSuggestions:Cy(Object(v.c)(t.fieldId)(e),s,Object(K.C)(e)),placeholder:s.formatMessage(Es.version_no_value_placeholder),noValueText:s.formatMessage(Es.noValue),showPinButton:Object(I.a)(t.area)})})))(On),Iy=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),Ty=n("./src/packages/releases/versions/src/create-version-modal/index.js");const _y=["baseUrl","projectId","createNewItemMessage","canAdministerProject","canAdministerJira","onVersionCreated","versionFieldIds"];function Py(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a
}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function xy(){return(xy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class Dy extends c.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1,data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then((e=>{this.setState({data:e,loading:!1})}))},this.fetchSuggestions=(e,t)=>this.props.fetchSuggestions(e,t).then((e=>(this.setState({data:e}),e))),this.openDialog=()=>{this.setState({isDialogOpen:!0})},this.closeDialog=()=>{this.setState({isDialogOpen:!1})},this.onSuccess=e=>{
const{onChange:t,value:s,onVersionCreated:n,versionFieldIds:a}=this.props;t([...s,{content:e.name,value:e.id}]),this.closeDialog(),n(e,a)}}renderSelect(e){const{canAdministerProject:t,canAdministerJira:s,createNewItemMessage:n}=this.props,a=t||s,{data:i,loading:r,error:o}=this.state,c={data:i,loading:r,error:o};return l.a.createElement(On,xy({},e,{styles:un,shouldShowFooter:a,footer:l.a.createElement(dn,{className:"issue-view__select-footer"},l.a.createElement(sn.a,{label:"",size:"small"}),l.a.createElement(ln,null,n)),onFooterSelect:this.openDialog,allowEmptyValue:!0,optionValuesSafeForAnalytics:!0,fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:c}))}render(){const e=this.props,{baseUrl:t,projectId:s,createNewItemMessage:n,canAdministerProject:a,canAdministerJira:i,onVersionCreated:r,versionFieldIds:o}=e,c=Py(e,_y),{isDialogOpen:d}=this.state;return l.a.createElement(l.a.Fragment,null,d&&l.a.createElement(Ty.a,{baseUrl:t,projectId:s,
onCancel:this.closeDialog,onError:this.closeDialog,onSuccess:this.onSuccess}),this.renderSelect(c))}}Dy.displayName="FixVersionsView";function Ay(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function My(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ay(Object(s),!0).forEach((function(t){Ly(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ay(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ly(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ry=Object(a.a)(((e,t,s,n,a,i)=>((e,t,s,n,a,i)=>Hs(e,t,s,n,a,i))(e,t,s,n,a,i))),Ny=Object(a.a)(((e,t,s,n,a,i)=>(r,o)=>{const c=Ry(s,e,n,a,o,i)
;return Promise.all([c,oy.a.getAll()]).then((async([e,s])=>Oy(e,s,t,a)))}));var Fy=Object(H.a)(((t,s)=>({fieldId:s.fieldId,transformFromStateValue:by,transformToStateValue:hy,additionalProps:(e,t)=>({fetchSuggestions:Ny(Object(v.c)(s.fieldId)(e),t,s.fieldId,Object(N.w)(e),Object(K.C)(e),s.createAnalyticsEvent),canAdministerProject:Object(Fs.c)(e),canAdministerJira:Object(Fs.b)(e),createNewItemMessage:t.formatMessage(cy.createNewItem),baseUrl:Object(N.f)(e),projectId:Object(K.C)(e),isMobile:Object(N.r)(e),placeholder:t.formatMessage(Es.version_no_value_placeholder),noValueText:t.formatMessage(Es.noValue),versionFieldIds:Object(v.v)(e),onTagClick:e=>Object(Ye.h)(e,{name:s.fieldId}),showPinButton:Object(I.a)(s.area),getDataFromCache:()=>oy.a.getAll().then((s=>Oy([],s,t,Object(K.C)(e))))}),additionalCallbacks:e=>({onVersionCreated:(t,s)=>{s.forEach((s=>{e(Object(Iy.a)(s,[t]))}))}}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a,fieldEditSessionId:i},r,o)=>{
const c=void 0!==i?`${t}/rest/api/2/issue/${s}?fieldEditSessionId=${i}`:`${t}/rest/api/2/issue/${s}`,l=Object(K.C)(r);return a.forEach((e=>{try{o.createAnalyticsEvent&&Object(Ye.b)(o.createAnalyticsEvent({}),"versionPickerCache set",{isFromCache:e.fromCache}),e.id&&oy.a.set(`${e.id}`,My(My({},e),{},{projectId:l}))}catch(t){Ns.a.safeErrorWithoutCustomerData("issue-view.versions.cache.set",t.message)}})),Object(x.e)(c,{body:JSON.stringify({fields:{[n]:a}})}).catch((t=>{throw a.forEach((t=>{try{o.createAnalyticsEvent&&Object(Ye.b)(o.createAnalyticsEvent({}),"versionPickerCache removed"),t.id&&oy.a.remove(`${t.id}`)}catch(e){Ns.a.safeErrorWithoutCustomerData("issue-view.versions.cache.remove",e.message)}})),t}))})(...t,s)})))(Dy);const Uy=({children:e,id:t,fallback:s=l.a.createElement(l.a.Fragment,null)})=>l.a.createElement(Qp.a,{id:t,packageName:"issue",render:()=>s},l.a.createElement(te.a,{fallback:s},e));Uy.displayName="Boundary"
;const Vy=Object(te.h)((()=>Promise.all([n.e("vendor~748942c6"),n.e("vendor~31ecd969"),n.e("vendor~f9ca8911"),n.e("async-all-dev-panel")]).then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js"}),Ky=Object(te.h)((()=>n.e("async-assets-glance").then(n.bind(null,"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js"))),{moduleId:"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js"}),$y=Object(te.h)((()=>n.e("async-assets-panel").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js"
}),Wy=Object(te.h)((()=>n.e("async-assets-onboarding").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js"}),By=e=>l.a.createElement(Uy,{id:"all-dev-panel"},l.a.createElement(Vy,e));By.displayName="AllDevPanel";const Hy=e=>l.a.createElement(Uy,{id:"assets-glance"},l.a.createElement(Ky,e));Hy.displayName="AssetsGlance";const Gy=e=>l.a.createElement(Uy,{id:"assets-panel"},l.a.createElement($y,e));Gy.displayName="AssetsPanel";const qy=e=>l.a.createElement(Uy,{id:"assets-onboarding"},l.a.createElement(Wy,e));qy.displayName="AssetsOnboarding";s.a=Object(a.a)((()=>{const e=Object(i.Y)();return{[e.ASSIGNEE_TYPE]:{item:qt},[e.DUE_DATE_TYPE]:{item:Aa},[e.PRIORITY_TYPE]:{item:yu},[e.REPORTER_TYPE]:{item:pp},[e.DESCRIPTION_TYPE]:{item:ge},[e.LABELS_TYPE]:{item:bl},[e.COMPONENTS_TYPE]:{item:_n},
[e.SPRINT_TYPE]:{item:Vb},[e.STORY_POINTS_TYPE]:{item:ig},[e.TEAMS_PLATFORM_CF_TYPE]:{item:Object(o.isTeamsCustomFieldTypeEnabled)()?Ig:()=>null},[e.EPIC_TYPE]:{item:Hc},[e.FIX_VERSIONS_TYPE]:{item:Fy},[e.AFFECTS_VERSIONS_TYPE]:{item:Fy},[e.TIME_ESTIMATE_TYPE]:{item:dd},[e.TIME_TRACKING_TYPE]:{item:ty},[e.ENVIRONMENT_TYPE]:{item:Ue},[e.DEV_SUMMARY_TYPE]:{item:By},[e.APPROVALS_PANEL_TYPE]:{item:Ve.b,panel:Ve.a},[e.KNOWLEDGE_BASE_TYPE]:{item:tl,panel:ol},[e.SLA_PANEL_TYPE]:{item:r.a},[e.LINKED_ALERTS_TYPE]:{item:hl},[e.CHAT_CHANNEL_TYPE]:{item:Object(o.isJsmChatChannelEnabled)()?ss:()=>null},[e.CONFERENCE_CALL_TYPE]:{item:Object(o.isJsmConferenceCallEnabled)()?xn:()=>null},[e.ASSETS_CF_TYPE]:{item:Gy,panel:Hy},[e.RESPONDERS_CF_TYPE]:{item:Object(o.isJsmRespondersEnabled)()?nm:()=>null,panel:Object(o.isJsmRespondersEnabled)()?Vf:()=>null},[e.COLOR_CF_TYPE]:{item:()=>null},[e.EPIC_COLOR_TYPE]:{item:()=>null},[e.RELEASES_TYPE]:{item:()=>null},[e.PARENT_CF_TYPE]:{item:Jd},
[e.BASELINE_START_CF_TYPE]:{item:Aa},[e.BASELINE_END_CF_TYPE]:{item:Aa},[e.LABELS_CF_TYPE]:{item:bl},[e.TEXT_CF_TYPE]:{item:Gf},[e.MULTI_USER_CF_TYPE]:{item:xo},[e.PARTICIPANTS_CF_TYPE]:{item:xo},[e.URL_CF_TYPE]:{item:sy},[e.NUMBER_CF_TYPE]:{item:Ll},[e.STORY_POINT_ESTIMATE_CF_TYPE]:{item:Kl},[e.SELECT_CF_TYPE]:{item:Xf},[e.EPIC_STATUS_TYPE]:{item:Xf},[e.MULTI_SELECT_CF_TYPE]:{item:Pl},[e.ECOSYSTEM_GLANCE_TYPE]:{item:ki},[e.FORGE_CUSTOM_FIELD_TYPE]:{item:qo},[e.ISSUE_FIELD_USER_CF_TYPE]:{item:ry},[e.ISSUE_FIELD_GROUPS_CF_TYPE]:{item:Jc},[e.ISSUE_FIELD_STRINGS_CF_TYPE]:{item:bl},[e.FORGE_GLANCE_TYPE]:{item:tc},[e.TEXT_AREA_CF_TYPE]:{item:Ue},[e.MULTI_VERSION_CF_TYPE]:{item:Sy},[e.VERSION_CF_TYPE]:{item:ky},[e.DATE_CF_TYPE]:{item:Aa},[e.GROUP_CF_TYPE]:{item:Xc},[e.MULTI_GROUP_CF_TYPE]:{item:Jc},[e.USER_CF_TYPE]:{item:ry},[e.DATETIME_CF_TYPE]:{item:Ua},[e.MULTI_CHECKBOXES_CF_TYPE]:{item:Ts},[e.RADIO_BUTTONS_CF_TYPE]:{item:ep},[e.TEAM_CF_TYPE]:{item:dh},[e.ISSUE_FIELD_NUMBER_CF_TYPE]:{
item:Ll},[e.ISSUE_FIELD_DATETIME_CF_TYPE]:{item:Ua},[e.ISSUE_FIELD_STRING_CF_TYPE]:{item:Gf},[e.ISSUE_FIELD_SINGLE_SELECT_CF_TYPE]:{item:Xf},[e.ISSUE_FIELD_MULTI_SELECT_CF_TYPE]:{item:Pl},[e.REQUEST_TYPE_CF_TYPE]:{item:oa},[e.SERVICE_ENTITY_CF_TYPE]:{item:Hf},[e.REQUEST_PARTICIPANTS_CF_TYPE]:{item:Yp},[e.ORGANIZATIONS_CF_TYPE]:{item:td},[e.REQUEST_FEEDBACK_CF_TYPE]:{item:_p},[e.PEOPLE_CF_TYPE]:{item:ou},[e.REQUEST_LANGUAGE_CF_TYPE]:{item:Vp},[e.ASSET_ONBOARDING_TYPE]:{item:qy},[e.APPROVERS_LIST_CF_TYPE]:{item:ou},[e.CASCADING_SELECT_CF_TYPE]:{item:es},[e.PROJECT_PICKER_CF_TYPE]:{item:$u},[e.CMDB_OBJECT_CF_TYPE]:{item:Ls},[e.READ_ONLY_CF_TYPE]:{item:op},[e.MESSAGE_VIEW_CF_TYPE]:{item:wl},[e.MESSAGE_EDIT_CF_TYPE]:{item:wl},[e.EPIC_NAME_TYPE]:{item:Gf}}}))},"./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js":function(e,t,s){"use strict";t.a=e=>"context"===e},"./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js":function(t,s,n){
"use strict";var a=n("./node_modules/lodash/flow.js"),i=n.n(a),r=n("./src/packages/platform/services/issue/src/components/context/consumer.js"),o=n("./node_modules/react/index.js"),c=n.n(o),l=n("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js");function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
var u=n("./src/packages/issue/issue-view/src/common/metrics/context/index.js"),p=n("./src/packages/platform/utils/app-base/src/index.js"),m=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),f=n("./src/packages/common-legacy-do-not-add-anything-new/src/redux-disposable/index.js"),b=n("./src/packages/growth/cross-flow/src/services/index.js"),g=n("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),h=n("./src/packages/issue/issue-context-service/src/main.js"),y=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),O=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),j=n("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js"),v=n("./src/packages/issue/issue-scroll/src/services/main.js"),E=n("./src/packages/issue/issue-tabs/src/services/main.js"),w=n("./src/packages/issue/user-preferences-services/src/main.js"),k=n("./src/packages/issue/ecosystem-service/src/services/main.js"),C=n("./src/packages/issue/forge-service/src/services/main.js"),S=n("./src/packages/issue/issue-view-layout/src/services/main.js"),I=n("./src/packages/issue/issue-view-legacy-events/src/services/legacy-events/main.js"),T=n("./src/packages/issue/workflow-transitions-services/src/main.js"),_=n("./src/packages/issue/workflow-transitions-services/src/context.js"),P=n("./src/packages/platform/utils/router/src/index.js"),x=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/dynamic-contextual-analytics-data.js"),D=n("./src/packages/issue/project-context-service/src/main.js"),A=n("./src/packages/issue/project-permissions-service/src/main.js"),M=n("./src/packages/platform/services/issue/src/service/index.js"),L=n("./src/packages/issue/jira-settings-service/src/main.js"),R=n("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),N=n("./src/packages/issue/worklog/src/services/store/index.js")
;const F=e=>({type:"SET_CONTEXT",payload:e});var U=n("./src/packages/issue/issue-view/src/actions/external-actions.js"),V=n("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),K=n("./src/packages/issue/issue-view/src/common/metrics/index.js"),$=n("./src/packages/issue/issue-view/src/feature-flags.js"),W=n("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),B=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),H=n("./node_modules/react-sweet-state/lib/esm/components/hook.js");const G=e=>!!(e&&e.savedAt>Date.now()-36e5),q=()=>({setState:e,getState:t})=>{const s=t();Object.entries(s).forEach((([t,s])=>{G(s)||e({[t]:void 0})}))},z={setRecentIssue:(e,t)=>({setState:s,dispatch:n})=>{n(q()),s({[String(e)]:{issueState:t,savedAt:Date.now()}})},getRecentIssue:e=>({getState:t,dispatch:s})=>{s(q());const n=t()[e];return G(n)?null==n?void 0:n.issueState:void 0},getRecentIssuesCount:()=>({getState:e})=>{const t=e()
;return Object.values(t).filter(Boolean).length}},Y=Object(B.a)({name:"recent-issues",initialState:{},actions:z}),Q=Object(H.a)(Y,{selector:null});var J=n("./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js"),Z=n("./node_modules/react-redux/es/index.js");const X=e=>({type:"FETCH_SCREENID_SUCCESS",payload:e&&e.data});var ee=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var te=Object(Z.connect)((e=>({isSimplifiedProject:Object(ee.u)(e)})),{fetchScreenIdRequest:()=>({type:"FETCH_SCREENID_REQUEST"})})((e=>{const{fetchScreenIdRequest:t,isSimplifiedProject:s}=e;return Object(o.useEffect)((()=>{s||t()}),[t,s]),null
})),se=n("./node_modules/lodash/join.js"),ne=n.n(se),ae=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),ie=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),re=n("./src/packages/realtime/src/common/constants/events.js"),oe=n("./src/packages/realtime/src/index.js");var ce=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),le=n("./node_modules/reselect/lib/index.js"),de=n("./src/packages/realtime/src/common/utils/pubsub.utils.js");const ue=Object(le.createSelector)(ce.i,ee.C,((e,t)=>[Object(de.a)(e,t)])),pe=["cloudId","projectId"];function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function fe(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const be=[re.g,re.b];var ge=Object(Z.connect)((e=>({channels:ue(e),cloudId:Object(ce.i)(e),projectId:Object(ee.C)(e),issueId:Object(ce.w)(e)})),{realtimeUpdateCurrentIssue:e=>({type:"REALTIME_UPDATE_CURRENT_ISSUE",payload:e})},((e,t)=>({channels:e.channels,events:be,cloudId:e.cloudId,projectId:e.projectId,onJoin:(t,s)=>{Object(ie.b)(s,"channel joined","Realtime",{cloudId:new ae.a(e.cloudId),projectId:e.projectId,issueId:new ae.a(e.issueId),channels:new ae.a(ne()(e.channels))})},onReceive:(s,n)=>{s&&s.payload.issueId===Number(e.issueId)&&(t.realtimeUpdateCurrentIssue({atlassianId:s.payload.atlassianId,updateType:s.type}),Object(ie.b)(n,"event received","Realtime",{cloudId:new ae.a(e.cloudId),projectId:e.projectId,
issueId:new ae.a(e.issueId),eventType:new ae.a(s.type)}))},onLeave:(t,s)=>{Object(ie.b)(s,"channel left","Realtime",{cloudId:new ae.a(e.cloudId),projectId:e.projectId,issueId:new ae.a(e.issueId),channels:new ae.a(ne()(e.channels))})}})))((e=>{let{cloudId:t,projectId:s}=e,n=fe(e,pe);return t&&s?c.a.createElement(oe.a,me({appId:"issue-view"},n)):null})),he=n("./node_modules/history/createBrowserHistory.js"),ye=n.n(he),Oe=(n("./node_modules/history/createMemoryHistory.js"),n("./src/packages/platform/utils/constants/src/status-categories.js")),je=n("./src/packages/platform/utils/types/src/general.js"),ve=n("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js");const Ee=e=>({type:"FETCH_ISSUE_REMOTE_DATA_REQUEST",payload:e}),we=e=>({type:"FETCH_ISSUE_REMOTE_DATA_SUCCESS",payload:e}),ke=(e,t)=>({type:"FETCH_LOGGED_IN_USER_SUCCESS",payload:{user:e,applicationRoles:t}})
;var Ce=n("./node_modules/redux/es/index.js"),Se=n("./node_modules/redux-batched-actions/lib/index.js"),Ie=n("./node_modules/redux-observable/lib/es/index.js"),Te=n("./node_modules/lodash/noop.js"),_e=n.n(Te),Pe=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),xe=n("./node_modules/rxjs/Rx.js"),De=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),Ae=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),Me=n("./src/packages/platform/utils/fetch/src/utils/errors.js"),Le=n("./src/packages/issue/format-time/src/common/utils/seconds-to-whole-minute-time-string/index.js"),Re=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),Ne=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),Fe=n("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js")
;const Ue=e=>"string"==typeof e?""!==e.trim():!Object(Re.g)(e);var Ve=e=>{const{comment:t}=e;return!!t&&("string"==typeof t?""!==t.trim():!Object(Re.g)(t))},Ke=n("./node_modules/moment/moment.js"),$e=n.n(Ke);const We=e=>{const{accountId:t,displayName:s=null,avatarUrls:n=null}=e;return{accountId:t,displayName:s,avatarUrl:n&&n["48x48"]}},Be=e=>{const{id:t,author:s=null,updateAuthor:n=null,timeSpent:a,started:i,created:r,updated:o,comment:c=null}=e,l=o!==r;return{id:t,author:s&&We(s),timeSpent:a,started:$e()(i).valueOf(),updated:l?$e()(o).valueOf():null,updateAuthor:l&&n?We(n):null,comment:Object(Re.h)(c)}},He=e=>e.map(Be);var Ge=n("./src/packages/platform/utils/types/src/application.js"),qe=n("./src/packages/platform/utils/types/src/edition.js");function ze(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ye(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(s),!0).forEach((function(t){Qe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ze(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Je=new Set(["FETCH","FETCH_MORE","FETCH_SORTED","FETCH_SURROUNDING"]),Ze=(t,s,n,a,i)=>{let r=null,o=null;if(null!==a)try{const{appEditions:e}=Object(Pe.f)();r=Object(Ge.f)(a),o=Object(qe.f)(r,e)}catch(e){}return{experience:Je.has(s)?"worklogFetch":"worklogUpdate",wasExperienceSuccesful:t,analyticsSource:n,application:r,edition:o,additionalAttributes:Ye({action:s},null!=i?{errorMessage:i}:{})}}
;var Xe=n("./node_modules/lodash/omitBy.js"),et=n.n(Xe),tt=n("./node_modules/query-string/index.js"),st=n("./src/packages/platform/utils/fetch/src/utils/requests.js");const nt=(e,t)=>`${e}/rest/internal/3/issue/${t}/worklog`,at=({startAt:e=0,orderBy:t,worklogId:s,maxResults:n,issueKey:a,worklogAmount:i})=>{const r=null!=s?`, worklogId: "${s}"`:""
;return`query {\n        viewIssue(issueKey: "${a}") {\n            worklogs (${`startAt: ${e}`}${""===r&&null!=n?`, maxResults: ${n}`:""}${null!=t?`, orderBy: "${t}"`:""}${r}${null!=i?`, worklogAmount: ${i}`:""}) {\n                nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                timeSpent\n                started\n                updated\n                created\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                comment\n            }\n            totalCount\n            startIndex\n            }\n        }\n    }`},it=e=>!e;var rt=n("./src/packages/platform/utils/xsrf-token/src/index.js"),ot=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js");function ct(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(s),!0).forEach((function(t){dt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ct(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function dt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ut=Object(Ie.combineEpics)(((e,t)=>e.ofType(ot.a).switchMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=Object(je.m)(Object(ce.x)(s)),i=Object(ee.F)(s),r=Object(Ne.h)(s),o=Object(Ne.i)(s),c=Object(Fe.a)(r.daysPerWeek,r.hoursPerDay),{payload:{values:l},meta:{analyticsEvent:d}}=e,{timeRemaining:u,workDescription:p}=l||{},m=!!Ue(p)&&Object(Re.d)(p)
;return xe.Observable.from(((e,t,s)=>{const{timeLoggedSeconds:n,workDescription:a,timeRemaining:i,timeRemainingSeconds:r,dateStarted:o}=s||{},c=Object(Le.a)(n||0),l=i?Object(Le.a)(r||0):i,d=et()({adjustEstimate:l?"new":"auto",newEstimate:l},it),u=`${nt(e,t)}?${Object(tt.stringify)(d)}`;return Object(st.d)(u,{body:JSON.stringify({timeSpent:c,comment:a,started:s.dateStarted?$e()(o).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0})})})(n,a,l)).mergeMap((e=>{const t=Be(e),s=Ve(t);Object(De.a)(d,{action:"added",actionSubjectId:t.id,attributes:{withComment:s}});const n=(o.timeSpentSeconds||0)+e.timeSpentSeconds;Object(Ae.a)(Ze(!0,"ADD","addWorklogEpic",i));const a="number"==typeof l.timeRemainingSeconds?c(Object(Le.a)(l.timeRemainingSeconds)):null,r=lt(lt({},o),{},null!==a?{timeSpentSeconds:n,remainingEstimateSeconds:a}:{timeSpentSeconds:n});return xe.Observable.of(Object(ot.o)(e.id,r,{shouldFetchViewContext:m}),Object(ot.F)(e.id))})).catch((e=>{const{timeLogged:t}=l,s={logTimeLength:t&&t.length,
remainingTimeLength:u&&u.length};return!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"ADD","addWorklogEpic",i,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.add-worklog",`Failed to save new worklog with input lengths: ${JSON.stringify(s)}`,e),xe.Observable.of(Object(ot.m)())}))}))),((e,t)=>e.ofType(ot.l).switchMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=Object(ee.l)(s),i=Object(ee.F)(s),r=Object(Ne.h)(s),o=Object(Fe.a)(r.daysPerWeek,r.hoursPerDay),{payload:{timeRemaining:c},meta:{analyticsEvent:l}}=e,d=Object(Le.a)(o(c)||0);return xe.Observable.from(((e,t,s)=>Object(st.d)(`${e}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(tt.stringify)({issueId:t,timetracking_remainingestimate:s,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(rt.a)()})}))(n,a,d)).do((()=>{
Object(Ae.a)(Ze(!0,"ADD","updateTimeRemainingEpic",i)),Object(De.a)(l,{action:"time-remaining-updated"})})).map((()=>Object(ot.P)(o(d)))).catch((e=>{const t=d&&d.length;return!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"ADD","updateTimeRemainingEpic",i,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.update-time-remaining",`Failed to update time remaining with input length: ${t}`,e),xe.Observable.of(Object(ot.N)())}))})))),pt=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),mt=n("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),ft=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(st.a)(`${nt(e,t)}/${s}?adjustEstimate=${a?`new&newEstimate=${n}`:"leave"}`))(e,t,s,n,a);const bt=(e,t)=>e.ofType(ot.c).switchMap((()=>{const e=t.getState();if(Object(Ne.g)(e).length>0)return xe.Observable.empty();const s=Object(Ne.n)(e),n=Object(Ne.k)(e),a=Object(mt.b)(e)
;if(s>0)return"NEWEST_FIRST"===a?xe.Observable.of(Object(ot.x)()):xe.Observable.of(Object(ot.z)());return n>s?"NEWEST_FIRST"===a?xe.Observable.of(Object(ot.z)()):xe.Observable.of(Object(ot.x)()):xe.Observable.empty()})),gt=e=>(t,s)=>t.ofType(ot.b).switchMap((({payload:{worklogId:t,timeRemaining:n,isAdjustTimeRemainingChecked:a},meta:{analyticsEvent:i}})=>{const r=s.getState(),o=Object(ce.f)(r),c=Object(je.m)(Object(ce.x)(r)),l=Object(ee.F)(r),d=Object(Ne.m)(r)[t],u=d&&d.comment,p=null!==u&&Object(Re.d)(u),{daysPerWeek:m,hoursPerDay:f}=Object(Ne.h)(r),b=Object(Fe.a)(m,f),g=Object(Le.a)(b(n)||0);return xe.Observable.from(ft(o,c,t,g,a)).map((()=>{const s=Object(Ne.m)(r)[t];return p&&e.refreshAttachments(Object(je.m)(c)),Object(ot.s)(t,((e,t,s)=>{const n=Object(Ne.h)(e),a=Object(Fe.a)(n.daysPerWeek,n.hoursPerDay);return{timeSpentSecondsDelta:-(a(t.timeSpent)||0),newRemainingEstimateSeconds:a(s)}})(r,s,g))})).do((()=>{Object(Ae.a)(Ze(!0,"DELETE","deleteWorklogEpic",l)),Object(De.a)(i,{
action:"deleted",actionSubjectId:t,attributes:{timeAdjusted:a}})})).catch((e=>(!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"DELETE","deleteWorklogEpic",l,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.delete-worklog",`Could not delete worklog '${t}'`,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(ot.q)()))))}));const ht=()=>({type:"FETCH_VIEW_CONTEXT_REQUEST"}),yt=e=>({type:"FETCH_VIEW_CONTEXT_SUCCESS",payload:e}),Ot=e=>({type:"FETCH_VIEW_CONTEXT_FAILURE",payload:{error:e}}),jt=()=>({type:"MARK_TOKEN_AS_OUTDATED"});var vt=n("./node_modules/lodash/isUndefined.js"),Et=n.n(vt);var wt=(e,t,s,n)=>Object(st.e)(((e,t,s,n)=>{const a=n.timeRemaining?Object(Le.a)(n.timeRemainingSeconds||0):n.timeRemaining,i=a?`?adjustEstimate=new&newEstimate=${a}`:"?adjustEstimate=leave";return`${nt(e,t)}/${s}${i}`})(e,t,s,n),(e=>{const t=Object(Le.a)(e.timeLoggedSeconds||0);return{body:JSON.stringify(et()({timeSpent:t,
started:e.dateStarted?$e()(e.dateStarted).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0,comment:e.workDescription},Et.a))}})(n));function kt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ct(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(s),!0).forEach((function(t){St(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function St(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var It=(e,t)=>e.ofType(ot.d).switchMap((e=>{
const s=t.getState(),n=Object(ce.f)(s),a=Object(je.m)(Object(ce.x)(s)),i=Object(ee.F)(s),r=Object(Ne.m)(s),{payload:{worklogId:o,values:c},meta:{analyticsEvent:l}}=e;let d=!1;return Ue(c.workDescription)&&(d=Object(Re.e)(r[o].comment,c.workDescription),d&&t.dispatch(jt())),xe.Observable.from(((e,t,s,n)=>wt(e,t,s,n).then((e=>Be(e))))(n,a,o,c)).do((e=>{const t=Ve(e);Object(Ae.a)(Ze(!0,"EDIT","editWorklogEpic",i)),Object(De.a)(l,{action:"edited",actionSubjectId:o,attributes:{withComment:t}})})).mergeMap((e=>{const t=Ct(Ct({},r),{},{[o]:e}),n=Object(ot.w)(t,e.id,((e,t,s)=>{const n=Object(Ne.h)(e),a=Object(Fe.a)(n.daysPerWeek,n.hoursPerDay),i=Object(Ne.m)(e)[t.id];if(!i)return Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.edit-worklog","Could not find existing worklog with matching ID when editing a worklog and calculating time tracking deltas."),{timeSpentSecondsDelta:0,newRemainingEstimateSeconds:a(s)};const r=a(i.timeSpent)||0,o=(a(t.timeSpent)||0)-r;let c=a(s)
;return"number"==typeof c&&(c=a(Object(Le.a)(c))),{timeSpentSecondsDelta:o,newRemainingEstimateSeconds:c}})(s,e,c.timeRemaining),{shouldFetchViewContext:d});return e.started!==r[o].started?xe.Observable.of(n,Object(ot.F)(o)):xe.Observable.of(n)})).catch((e=>(!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"EDIT","editWorklogEpic",i,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.edit-worklog","Failed to save edited worklog:",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(ot.u)()))))})),Tt=n("./src/packages/platform/services/issue/src/source/issue-express/graphql-util.js"),_t=n("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js");var Pt=({startAt:e,orderBy:t,baseUrl:s,issueKey:n,maxResults:a})=>Object(_t.a)(`${s}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:at({startAt:e,orderBy:t,maxResults:a,issueKey:n})})});const xt=["updateAuthor","updated","comment","created"];function Dt(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function At(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(s),!0).forEach((function(t){Mt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Dt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Lt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Rt={NEWEST_FIRST:"-started",OLDEST_FIRST:"started"},Nt=e=>{const{totalCount:t,nodes:s,startIndex:n}=e.viewIssue.worklogs,a=s.map((e=>{let{updateAuthor:t=null,updated:s,comment:n,created:a}=e;const i=s!==a;return At(At({},Lt(e,xt)),{},{updated:i?s:null,updateAuthor:i&&t?t:null,comment:Object(Re.a)(n)})})),i=a.reduce(((e,t)=>At(At({},e),{},{[t.id]:t})),{});return{sortedWorklogIds:a.map((e=>e.id)),totalWorklogs:t,worklogs:i,startIndex:n||0}};function Ft(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ut(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(s),!0).forEach((function(t){Vt(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ft(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Kt=(e,t,s,n,a,i,r)=>Pt({baseUrl:e,issueKey:t,maxResults:s,orderBy:Rt[n],startAt:a}).map(Tt.a).map((e=>Object(Tt.b)("issue.worklogs.fetch.epic.gira",e))).map(Nt).map((e=>((e,t,s,n)=>{let a;return a=t===ot.e?Math.max("NEWEST_FIRST"===s?n-e.sortedWorklogIds.length:n,0):Math.max("NEWEST_FIRST"===s?n:n-e.sortedWorklogIds.length,0),Ut(Ut({},e),{},{startIndex:a})})(e,i,n,r)));const $t=(e,t,s,n,a)=>{let i=0,r=0;return e===ot.f?(r="NEWEST_FIRST"===a?t+n:Math.max(t-100,0),{maxResults:"NEWEST_FIRST"===a?Math.min(s-r,100):t-r,startAt:r}):(r="NEWEST_FIRST"===a?Math.max(0,t-100):t+n,i="NEWEST_FIRST"===a?t-r:Math.min(s-r,100),{maxResults:i,startAt:r})
},Wt=(e,t)=>e.ofType(ot.f).switchMap((()=>{const e=t.getState(),s=Object(ce.f)(e),n=Object(ce.x)(e),a=Object(ee.F)(e),i=Object(mt.b)(e),r=Object(Ne.n)(e),o=Object(Ne.k)(e),c=Object(Ne.g)(e).length,{maxResults:l,startAt:d}=$t(ot.f,r,o,c,i);return Kt(s,n,l,i,d,ot.f,r).map((({worklogs:e,totalWorklogs:t,sortedWorklogIds:s,startIndex:n})=>(Object(Ae.a)(Ze(!0,"FETCH_MORE","fetchOlderSortedWorklogsEpic",a)),Object(ot.A)({worklogs:e,totalWorklogs:t,startIndex:n,sortedWorklogIds:s,selectedSortOrder:i})))).catch((e=>(!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"FETCH_MORE","fetchOlderSortedWorklogsEpic",a,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-more-sorted-worklogs","Could not fetch more sorted worklogs:",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of(Object(ot.B)()))))})),Bt=(e,t)=>e.ofType(ot.e).switchMap((()=>{
const e=t.getState(),s=Object(ce.f)(e),n=Object(ce.x)(e),a=Object(ee.F)(e),i=Object(mt.b)(e),r=Object(Ne.n)(e),o=Object(Ne.k)(e),c=Object(Ne.g)(e).length,{maxResults:l,startAt:d}=$t(ot.e,r,o,c,i);return Kt(s,n,l,i,d,ot.e,r).map((({worklogs:e,totalWorklogs:t,sortedWorklogIds:s,startIndex:n})=>(Object(Ae.a)(Ze(!0,"FETCH_MORE","fetchNewerSortedWorklogsEpic",a)),Object(ot.y)({worklogs:e,totalWorklogs:t,startIndex:n,sortedWorklogIds:s,selectedSortOrder:i})))).catch((e=>(!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"FETCH_MORE","fetchNewerSortedWorklogsEpic",a,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-more-sorted-worklogs","Could not fetch more sorted worklogs:",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of(Object(ot.B)()))))}))
;var Ht=n("./src/packages/platform/ui/flags/src/services/index.js"),Gt=n("./src/packages/issue/issue-actions/activity-feed/src/messages.js"),qt=n("./src/packages/issue/issue-scroll/src/services/types.js"),zt=n("./src/packages/platform/utils/permalinks/src/index.js"),Yt=n("./src/packages/platform/utils/permalinks/src/constants.js"),Qt=n("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),Jt=n("./src/packages/issue/issue-view/src/common/messages/flags.js");var Zt=({orderBy:e,baseUrl:t,issueKey:s,worklogAmount:n,worklogId:a})=>Object(_t.a)(`${t}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:at({orderBy:e,worklogAmount:n,issueKey:s,worklogId:a})})});const Xt=(e,t)=>{const s=Object(ce.f)(e),n=Object(je.m)(Object(ce.x)(e)),a=Object(mt.b)(e);return((e,t,s,n,a)=>Zt({baseUrl:e,issueKey:t,worklogAmount:s,orderBy:Rt[n],worklogId:a}).map(Tt.a).map((e=>Object(Tt.b)("issue.worklogs.fetch.epic.gira",e))).map(Nt))(s,n,Math.floor(5),a,t)
},es=(e,t)=>e.ofType(ot.i).switchMap((e=>{const s=t.getState(),n=Object(ee.F)(s),{payload:a}=e;return Xt(s,a.worklogId).map((({totalWorklogs:e,worklogs:t,sortedWorklogIds:s,startIndex:a})=>(Object(Ae.a)(Ze(!0,"FETCH_SURROUNDING","fetchSurroundingWorklogsByIdEpic",n)),Object(ot.H)(s,t,a||0,e)))).catch((e=>(!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"FETCH_SURROUNDING","fetchSurroundingWorklogsByIdEpic",n,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after adding new worklog",e),xe.Observable.of(Object(ot.G)()))))}));var ts=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-operational-event.js"),ss=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(st.b)(`${nt(e,t)}?startAt=${s}&reverseSortOrder=${a?"true":"false"}${n?`&maxResults=${n}`:""}`))(e,t,s,n,a).then((e=>(e=>({totalWorklogs:e.total,worklogs:He(e.worklogs)}))(e)));function ns(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function as(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(s),!0).forEach((function(t){is(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ns(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function is(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const rs=(e,t,s,n,a,i)=>xe.Observable.from(ss(e,t,a,i,!0)).do((e=>Object(ts.a)(n,{attributes:{worklogItemCount:e.worklogs.length}}))).map((({totalWorklogs:e,worklogs:t})=>{const n=t.map((e=>e.id)),a=t.reduce(((e,t)=>as(as({},e),{},{[t.id]:t})),{});return Object(Ae.a)(Ze(!0,"FETCH","fetchAndTransformWorklogs",s)),Object(ot.K)(n,a,e)
})).catch((e=>(!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"FETCH","fetchAndTransformWorklogs",s,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-worklogs","Could not fetch worklogs:",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of(Object(ot.I)())))),os=(e,t)=>e.ofType(ot.j).switchMap((({payload:{baseUrl:e,issueKey:s},meta:{analyticsEvent:n}})=>{const a=t.getState(),i=Object(Ne.g)(a).length,r=Object(ee.F)(a);return rs(e,s,r,n,i,10)})),cs=(e,t)=>e.ofType(ot.k).switchMap((({payload:{baseUrl:e,issueKey:s},meta:{analyticsEvent:n}})=>{const a=t.getState(),i=Object(ee.F)(a);return rs(e,s,i,n,0,5)}));var ls=({baseUrl:e,issueKey:t,maxResults:s,orderBy:n})=>Object(_t.a)(`${e}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:at({maxResults:s,issueKey:t,orderBy:n})})});const ds=(e,t)=>e.ofType(ot.g,ot.h).switchMap((()=>{const e=t.getState(),s=Object(ce.f)(e),n=Object(ce.x)(e),a=Object(mt.b)(e),i=Object(ee.F)(e)
;return((e,t,s,n)=>ls({baseUrl:e,issueKey:t,maxResults:s,orderBy:Rt[n]}).map(Tt.a).map((e=>Object(Tt.b)("issue.worklogs.fetch.epic.gira",e))).map(Nt))(s,n,100,a).map((({worklogs:e,totalWorklogs:t,startIndex:s,sortedWorklogIds:n})=>(Object(Ae.a)(Ze(!0,"FETCH_SORTED","fetchSortedWorklogsRequest",i)),Object(ot.E)({worklogs:e,totalWorklogs:t,startIndex:s,sortedWorklogIds:n})))).catch((e=>(!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"FETCH_SORTED","fetchSortedWorklogsRequest",i,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-sorted-worklogs","Could not fetch sorted worklogs:",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of(Object(ot.B)()))))})),us=(e,t)=>Object(Ie.combineEpics)(ut,os,cs,es,(e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_WORKLOG").switchMap((()=>{const t=s.getState(),n=Object(ee.F)(t),a=e.getScrollTargetId(qt.a.WORKLOG)
;return null===a?xe.Observable.of():Xt(t,a).flatMap((({totalWorklogs:t,worklogs:s,sortedWorklogIds:i,startIndex:r})=>{const o={key:"Worklog",type:"Worklog",name:Gt.a.worklog.defaultMessage};return window.history.replaceState({},null,Object(zt.c)(a,Yt.b.WORKLOG)),e.setScrollTarget(null),Object(Ae.a)(Ze(!0,"FETCH_SURROUNDING","fetchSurroundingWorklogsAttachmentScroll",n)),xe.Observable.of(Object(ot.H)(i,s,r||0,t),Object(Qt.c)(o),Object(ot.M)(!1))})).catch((e=>{!Object(Me.c)(e)&&Object(Ae.a)(Ze(!1,"FETCH_SURROUNDING","fetchSurroundingWorklogsAttachmentScroll",n,e.message)),Pe.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after attempting worklog attachment fetch",e);const{showFlag:t}=Object(Ht.f)();return t({type:"error",title:[Jt.a.commentWorklogAttachmentFetchFailedTitle,{field:"worklog"}],description:Jt.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),xe.Observable.of(Object(ot.G)())}))
})))(t),It,(e=>Object(Ie.combineEpics)(gt(e),bt))(e),ds,Bt,Wt),ps=(e,t)=>us(e,t);var ms=n("./node_modules/rxjs/operators.js"),fs=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),bs=n("./node_modules/lodash/curry.js");const gs=({meta:{batch:e}={}})=>!0===e,hs=n.n(bs)()(((e,{type:t})=>e.includes(t)))
;var ys=(...e)=>t=>t.pipe(Object(ms.filter)((t=>gs(t)?t.payload.some(hs(e)):e.includes(t.type))),Object(ms.flatMap)((t=>gs(t)?xe.Observable.from(t.payload.filter(hs(e))):xe.Observable.of(t)))),Os=n("./node_modules/icepick/icepick.js"),js=n("./src/packages/platform/utils/constants/src/issue-link-types.js"),vs=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),Es=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),ws=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),ks=n("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),Cs=e=>/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i.test(e);function Ss(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Is(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(s),!0).forEach((function(t){Ts(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ss(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ts(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _s=Object(Pe.i)("comment","description"),Ps=e=>{switch(e){case"AUTHENTICATION_ERROR":return"AUTHENTICATION";case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return"PERMISSION";case"UNKNOWN_ERROR":case"CONNECTIVITY_ERROR":default:return"GENERIC"}
},xs=Object(Pe.i)("AUTHENTICATION","PERMISSION","GENERIC"),Ds=Object(Pe.i)("assignee","labels","priority","components","fixVersions","versions","com.pyxis.greenhopper.jira:gh-sprint","duedate","com.pyxis.greenhopper.jira:gh-epic-link","reporter","com.atlassian.jira.plugin.system.customfieldtypes:storypoint","description","watches","summary","timeoriginalestimate","timetracking","com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:flagged","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.atlassian.servicedesk:vp-origin","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:project"),As=e=>t=>({
eventData:Object(W.a)(t),eventNameSuffix:e}),Ms=e=>e.startsWith("comment")?"comment":e,Ls=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!==n&&Ms(n);return{eventNameSuffix:e,eventData:{type:_s(a)}}},Rs=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!=n?Ms(n):n;return{eventNameSuffix:e,eventData:{type:_s(a)}}},Ns=e=>["updatedField","oldValId","newValId","oldValName","newValName"].filter((t=>e&&Object.hasOwnProperty.call(e,t))).reduce(((t,s)=>{const n=e&&e[s]?{[s]:e[s]}:{};return Is(Is({},t),n)}),{}),Fs=e=>({eventData:{commentCount:Object(ws.K)(e)}}),Us=e=>{const t=(e=>e?JSON.stringify(e).length:0)(e.bodyAdf);return{isInternal:e.isInternal,charactersInCommentCount:t}};var Vs={SAVE_LINKED_ISSUE_REQUEST:(e,t)=>Object(Os.merge)(As("issue-links.save.request"),((e,t)=>{
const{payload:{newIssueLinks:{issueLinkType:s,issueLinks:n}}}=t,a=(null!=n&&null!==n.linkedIssues&&void 0!==n.linkedIssues&&Object.keys(n.linkedIssues).length>0?Object.keys(n.linkedIssues).map((e=>n.linkedIssues[e].issueId)):[""])[0];return{eventData:{issueLinkTypeId:s.id,issueLinkTypeName:new ae.a(Object(js.a)(s.label)),issueLinkLinkedIssueId:a}}})(0,t)),SAVE_REMOTE_LINKED_ISSUE_REQUEST:As("issue-links.save.request"),DELETE_LINKED_ISSUE_REQUEST:(e,t)=>Object(Os.merge)(As("issue-links.delete.request"),(e=>({eventData:{issueLinkTypeId:e.typeId,issueLinkTypeName:new ae.a(Object(js.a)(e.typeName))}}))(Object(ks.f)(t.payload.linkedIssueId)(e))),SAVE_LINKED_ISSUE_SUCCESS:As("issue-links.save.success"),SAVE_LINKED_ISSUE_FAILURE:As("issue-links.save.failure"),SAVE_REMOTE_LINKED_ISSUE_SUCCESS:As("issue-links.save.success"),SAVE_REMOTE_LINKED_ISSUE_FAILURE:As("issue-links.save.failure"),SAVE_LINKED_ISSUE_RETRY:As("issue-links.save.retry"),
SAVE_REMOTE_LINKED_ISSUE_RETRY:As("issue-links.save.retry"),SAVE_LINKED_ISSUE_CANCEL:As("issue-links.save.cancel"),SHOW_DELETE_COMMENT_MODAL:As("comment.delete.linkclicked"),FETCH_OLDER_COMMENTS_REQUEST:As("comment.fetcholder.click"),FETCH_NEWER_COMMENTS_REQUEST:As("comment.fetchnewer.click"),EDIT_COMMENT_BEGIN:e=>As("comment.edit.linkclicked")(e),SAVE_COMMENT_SUCCESS:(e,t)=>Object(Os.merge)(As("comment.save.success")(e),{eventData:Is(Is({},Ns(t.payload)),{},{actionSubjectId:new ae.a(t.payload.comment.id),actionSubjectOptimisticId:new ae.a(t.payload.optimisticId)},Us(t.payload.comment))}),DELETE_COMMENT_REQUEST:(e,t)=>Object(Os.merge)(As("comment.delete.modal.confirm")(e),{eventData:Is(Is({},Ns(t.payload)),{},{actionSubjectId:new ae.a(t.payload.id)})}),PASTED_INTO_COMMENT_FORM:(e,t)=>Object(Os.merge)(As("comment.paste")(e),{eventData:{isNewComment:"NEW_OPTIMISTIC_COMMENT"===t.payload.id,pastedContentLength:(t.payload.pastedContent||"").length,
containsEmailAddress:Cs(t.payload.pastedContent)}}),FETCH_ISSUE_SUCCESS:e=>Object(Os.merge)(As("fetchissue.succeeded")(e),Fs(e)),REFRESH_ISSUE_SUCCESS:e=>Object(Os.merge)(As("refreshissue.succeeded")(e),Fs(e)),REFRESH_ISSUE_REQUEST:As("refreshissue.request"),FETCH_ISSUE_REQUEST:As("fetchissue.request"),LOAD_NEW_ISSUE:As("load-new-issue"),FETCH_ISSUE_FAILURE:(e,t)=>({eventNameSuffix:"fetchissue.failed",eventData:{error:xs(Ps(Object(ee.i)(e))),statusCode:t.payload.statusCode,analyticsSource:Object(ce.b)(e)}}),DELETE_DRAFT_REQUEST:Ls("issue.delete-draft.request"),DELETE_DRAFT_SUCCESS:Ls("issue.delete-draft.success"),DELETE_DRAFT_FAILURE:Ls("issue.delete-draft.failure"),DELETE_DRAFT_NEWER_CONTENT_FOUND:Ls("issue.delete-draft.replaced-by-new-content"),LOAD_DRAFT_SUCCESS:Rs("issue.load-draft.success"),LOAD_DRAFT_FAILURE:Rs("issue.load-draft.failure"),LOGIN_SUCCESSFUL:e=>({eventNameSuffix:"login.succeeded",eventData:{analyticsSource:Object(ce.b)(e)}}),
FIELD_EDIT_BEGIN:(e,t)=>Object(Os.merge)(As("field.edit")(e),{eventData:{fieldType:Ds(Object(vs.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ae.a(t.payload.fieldEditSessionId),isReusableField:!0}}),FIELD_SAVE_REQUEST:(e,t)=>Object(Os.merge)(As("field.save")(e),{eventData:Is(Is({},Ns(t.payload.eventData||null)),{},{fieldType:Ds(Object(vs.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ae.a(Object(vs.f)(t.payload.fieldId)(e)),isReusableField:!0,issueHierarchyLevel:Object(Es.b)(e)})}),FIELD_EDIT_CANCEL:(e,t)=>Object(Os.merge)(As("field.cancel")(e),{eventData:{fieldType:Ds(Object(vs.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ae.a(Object(vs.f)(t.payload.fieldId)(e)),isReusableField:!0}}),FIELD_PASTE:(e,t)=>Object(Os.merge)(As("field.paste")(e),{eventData:{fieldType:Ds(Object(vs.r)(t.payload.fieldId)(e)),isReusableField:!0,pastedContentLength:t.payload.pastedContent.length,containsEmailAddress:Cs(t.payload.pastedContent)}})},Ks=Object(Pe.m)("issue")
;const $s=["attributes"],Ws=["actionSubjectId","name","tags","containerType","containerId","objectType","objectId"];function Bs(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Hs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(s),!0).forEach((function(t){qs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hs(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zs=({eventNameSuffix:e,eventData:t,analyticsEvent:s})=>{if(s)try{const e=((e,t)=>{const s=t.payload&&t.payload.action||"updated",{actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l}=e;return{action:s,actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l,attributes:Bs(e,Ws)}})(t,s);Object(De.a)(s,e)}catch(a){fs.a.safeErrorWithoutCustomerData("issue.instrumentation.trigger-analytics-action","Failed to send action track event",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:a}))}const n=(e=>{if(e&&e.attributes){const{attributes:t}=e,s=Bs(e,$s);return Gs(Gs({},t),s)}return e})(t);Ks(e,n)},Ys=Object.keys(Vs);var Qs=(e,t)=>e.pipe(ys(...Ys),Object(ms.map)((e=>((e,t)=>Vs[t.type]&&Gs({
analyticsEvent:t.payload&&t.payload.analyticsEvent},Vs[t.type](e,t)))(t.getState(),e))),Object(ms.filter)((e=>!!e)),Object(ms.tap)(zs),Object(ms.ignoreElements)()),Js=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visibility/index.js"),Zs=n("./src/packages/issue/issue-fetch-services/src/services/issue-media-upload-permissions/index.js"),Xs=n("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),en=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),tn=n("./src/packages/issue/issue-view/src/common/util/errors/index.js");const sn=e=>((e,t,s)=>e.delay(t.delay,s||void 0).take(t.take).concat(e.flatMap((e=>xe.Observable.throw(e)))))(e,{delay:5e3,take:3});var nn=n("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js"),an=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,
collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4});const rn=e=>xe.Observable.of(Object(nn.b)(e)),on=(e,t)=>Object(Ie.combineEpics)(((s,n)=>s.ofType("FETCH_UPLOAD_CONTEXT_REQUEST").switchMap((()=>{const s=n.getState();return((e,t,s)=>Object(Xs.a)(s,(()=>Object(Zs.b)(e,t))).map(an).map(nn.d).catch((e=>{if(403===e.statusCode)return rn(e);throw e})).retryWhen(sn).catch(rn))(e(s),t(s))}))),((e,t)=>e.pipe(ys("FETCH_UPLOAD_CONTEXT_SUCCESS","CHECK_UPLOAD_CONTEXT"),Object(ms.switchMap)((()=>{const e=t.getState(),s=Object(en.b)(e);if(null==s||!Object(Js.a)())return xe.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return xe.Observable.of(Object(nn.c)()).delay(r)})))),(e=>e.ofType("FETCH_UPLOAD_CONTEXT_FAILURE").filter((({payload:e})=>403!==e.error.statusCode)).do((({payload:e})=>{const{error:t}=e;Object(tn.a)("issue.media.fetch-upload-context-error","Error when fetching media upload context",t,new pt.a({
eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))})).ignoreElements()),(()=>xe.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap((()=>Object(Js.a)()?xe.Observable.of(Object(nn.a)()):xe.Observable.empty())))),cn=()=>({type:"FETCH_USER_AUTH_REQUEST"}),ln=e=>({type:"FETCH_USER_AUTH_SUCCESS",payload:e});n("./src/packages/platform/utils/fetch/src/utils/as-json.js");const dn=e=>`${e}/rest/internal/2/media/user/credentials`;var un=n("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const pn=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,tokenIssueTimestamp:Date.now()-1e4}),mn=e=>xe.Observable.of((e=>({type:"FETCH_USER_AUTH_FAILURE",payload:{statusCode:e}}))(e.statusCode)),fn=(e,t)=>Object(Xs.a)(t,(()=>(e=>Object(_t.a)(dn(e)).catch((e=>{throw new un.a(e,dn("{baseUrl}"))})))(e))).map(pn).map(ln).catch((e=>{if(403===e.statusCode)return mn(e);throw e
})).retryWhen(sn).catch(mn);var bn=n("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),gn=n("./src/packages/issue/media-provider/src/controllers/create-media-provider/utils.js");const hn=e=>xe.Observable.of(Ot(e)),yn=(e,t,s,n,a)=>Object(Xs.a)(a,(()=>Object(bn.b)(e,t,s,n))).map(gn.a).map(yt),On=(e,t,s,n,a)=>yn(e,t,s,n,a).catch((e=>{if(403===e.statusCode)return hn(e);throw e})).retryWhen(sn).catch(hn);var jn=(e,t,s,n)=>Object(Ie.combineEpics)(on(e,t),((e,t,s,n)=>Object(Ie.combineEpics)(((a,i)=>a.ofType("FETCH_VIEW_CONTEXT_REQUEST").switchMap((()=>{const a=i.getState(),r=e(a),o=t(a),c=n.getMaxTokenLength();return s.refreshAttachments(Object(je.m)(o)),yn(r,o,c).retryWhen(sn).catch((e=>xe.Observable.of(Ot(e))))}))),((e,t)=>e.pipe(ys("FETCH_VIEW_CONTEXT_SUCCESS","CHECK_VIEW_CONTEXT"),Object(ms.switchMap)((()=>{const e=t.getState(),s=Object(en.d)(e);if(null==s||!Object(Js.a)())return xe.Observable.empty()
;const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return xe.Observable.of(ht()).delay(r)})))),(e=>e.ofType("FETCH_VIEW_CONTEXT_FAILURE").do((({payload:e})=>{const{error:t}=e;Object(tn.a)("issue.media.fetch-view-context-error","Error when fetching media view context",t,new pt.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))})).ignoreElements()),(()=>xe.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap((()=>Object(Js.a)()?xe.Observable.of((()=>({type:"CHECK_VIEW_CONTEXT"}))()):xe.Observable.empty())))))(e,t,s,n),(e=>Object(Ie.combineEpics)(((t,s)=>t.ofType("FETCH_USER_AUTH_REQUEST").switchMap((()=>{const t=s.getState(),n=e(t);return fn(n)}))),((e,t)=>e.pipe(ys("FETCH_USER_AUTH_SUCCESS","CHECK_USER_AUTH"),Object(ms.switchMap)((()=>{const e=t.getState(),s=Object(en.c)(e);if(null==s||!Object(Js.a)())return xe.Observable.empty()
;const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return xe.Observable.of(cn()).delay(r)})))),(e=>e.ofType("FETCH_USER_AUTH_FAILURE").filter((({payload:e})=>403!==e.statusCode)).do((({payload:e})=>{Object(tn.a)("issue.media.fetch-user-auth-error","Error when fetching media user auth",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:e.statusCode}}))})).ignoreElements()),(()=>xe.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap((()=>Object(Js.a)()?xe.Observable.of((()=>({type:"CHECK_USER_AUTH"}))()):xe.Observable.empty())))))(e)),vn=n("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js"),En=n("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),wn=n("./src/packages/issue/issue-view/src/drafts/draft-utils.js");let kn;const Cn=(e,t)=>{const{payload:{fieldId:s,draftKey:n}}=e;if(s)return((e,t)=>{
const s=Object(ce.x)(e),n=Object(ce.a)(e),a=Object(wn.c)(n,s,t),i=Object(wn.b)(a);return kn.remove(a),kn.remove(i),xe.Observable.of(Object(En.c)(t))})(t,s);const a=Object(wn.d)(n);return n?(e=>{const t=Object(wn.b)(e);return kn.remove(e),kn.remove(t),xe.Observable.of(Object(En.c)(e))})(a).catch((e=>(Object(tn.a)("issue.draft.delete","Failed to delete a draft.",e),xe.Observable.of(Object(En.a)(a,e))))):xe.Observable.empty()};var Sn=(e,t)=>(kn=Object(vn.b)("issue-drafts"),e.ofType("DELETE_DRAFT_REQUEST").mergeMap((e=>Cn(e,t.getState()))).catch((e=>(e=>xe.Observable.of(Object(En.a)(null,e)))(e))));let In;var Tn=e=>(In=Object(vn.b)("issue-drafts"),e.ofType("LOAD_DRAFT_REQUEST").mergeMap((e=>(e=>{const{payload:{fieldId:t,draftKey:s,draftHandler:n}}=e,a=Object(wn.d)(s),i=In.get(s);if(i){if(Object(Re.g)(i))return xe.Observable.empty();const e=n?xe.Observable.of(n(t,i)):xe.Observable.empty(),s=xe.Observable.of(Object(En.f)(a,i))
;return xe.Observable.concat(e,s).catch((e=>(Object(tn.a)("issue.draft.fetch","Failed to fetch issue draft",e),xe.Observable.of(Object(En.d)(a,e)))))}return xe.Observable.empty()})(e))).catch((e=>(e=>xe.Observable.of(Object(En.d)(null,e)))(e))));let _n;var Pn=(e,t)=>(_n=Object(vn.b)("issue-drafts"),e.ofType("SAVE_DRAFT_REQUEST","DELETE_DRAFT_SUCCESS").throttleTime(1e3,xe.Scheduler.async,{leading:!0,trailing:!0}).switchMap((e=>"SAVE_DRAFT_REQUEST"===e.type?((e,t)=>{const{payload:{fieldId:s,value:n}}=e,a=Object(ce.x)(t),i=Object(ce.a)(t),r=Object(wn.c)(i,a,s);return _n.set(r,n),xe.Observable.of(Object(En.i)(r,n))})(e,t.getState()):xe.Observable.empty())).catch((e=>(e=>(Object(tn.a)("issue.save-draft","Failed to save draft",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(En.g)(e))))(e)))),xn=n("./src/packages/issue/issue-view/src/actions/comment-actions.js")
;var Dn=(e,t)=>e.ofType("SELECT_ACTIVITY_SORT_ORDER","SELECT_ACTIVITY_ITEM").switchMap((({type:e})=>{const s=t.getState(),n=Object(mt.a)(s),a="SELECT_ACTIVITY_SORT_ORDER"===e?["focusedWorklogId"]:["focusedCommentId","focusedWorklogId"];return window.history.replaceState({},null,Object(Pe.k)(a)),null===n?xe.Observable.empty():"SELECT_ACTIVITY_ITEM"!==e||"Comments"!==n.type&&"JSDComments"!==n.type?"Worklog"===n.type?xe.Observable.of(Object(ot.C)()):xe.Observable.empty():xe.Observable.of(Object(xn.u)())}));const An=e=>`\n    mutation {\n        setActivitySortOrder(orderBy: ${e}) {\n            success\n            errors {\n                message\n            }\n        }\n    }\n`,Mn="issue.activity-feed.sort.save.gira",Ln=e=>{const{errors:t}=e.setActivitySortOrder;if(t&&t.length>0){const e={eventNameSuffix:"issue.error",type:"update",app:"issue",event:new Error(t[0].message)}
;fs.a.safeErrorWithoutCustomerData(Mn,"Error present in gira response when calling to update setActivitySortOrder",new pt.a(e))}return e.setActivitySortOrder},Rn=(e,t)=>Object(_t.a)(`${e}/rest/gira/1/`,(e=>({method:"POST",body:JSON.stringify({query:An(e)})}))(t)).map((e=>Object(Tt.b)(Mn,e))).map(Ln);var Nn=(e,t)=>e.ofType("UPDATE_ACTIVITY_SORT_ORDER_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(ce.f)(s);return Rn(n,e.payload).ignoreElements()})).catch((e=>(Object(tn.a)("issue.activity-feed.sort.save.epic","Could not save sort order in jira issue view",e),xe.Observable.empty()))),Fn=n("./src/packages/common-legacy-do-not-add-anything-new/src/authenticate-using-app-links/index.js"),Un=n("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),Vn=(e,t)=>e.ofType("APPLINK_AUTHENTICATION_REQUEST").mergeMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=e.payload,{analyticsEvent:i}=e.meta,r=Object(Fn.a)(`${n}${a}`)
;return i&&Object(ie.f)(i,"applink authenticate",{authStatus:"start"}),r?xe.Observable.fromPromise(r).map((()=>(i&&Object(ie.f)(i,"applink authenticate",{authStatus:"success"}),Object(Un.b)()))).catch((e=>(Object(tn.a)("issue-applink-authentication-epic","Failed to authenticate with applinks",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.empty()))):xe.Observable.empty()})),Kn=n("./node_modules/lodash/get.js"),$n=n.n(Kn),Wn=n("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js");var Bn=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const Hn=(e,t)=>`project=${e} AND issuetype in (${t.join(",")}) ORDER BY lastViewed DESC, updated DESC, priority DESC`,Gn=({issues:e})=>e.map((({id:e,key:t,fields:{summary:s,issuetype:n}})=>({id:Object(je.k)(e),key:Object(je.m)(t),summary:s,issueType:n})));function qn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(s),!0).forEach((function(t){Yn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qn=e=>e.reduce(((e,t)=>zn(zn({},e),{},{[t.id]:t.parentId})),{});var Jn=Object(Ie.combineEpics)(((e,t)=>e.ofType("FETCH_ISSUE_PARENTS_REQUEST").mergeMap((()=>{const e=t.getState();return((e,t,s)=>t?Object(_t.a)(Object(Bn.o)(e),{method:"POST",body:JSON.stringify({jql:Hn(t,s)})}).map(Gn):xe.Observable.of([]))(Object(ce.f)(e),Object(ee.C)(e),Object(Es.e)(e))
})).map(Wn.c).catch((e=>(Object(tn.a)("issue.fetch-parent.failure","",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Object(Wn.a)())))),((e,t)=>e.ofType("SET_PARENT_REQUEST","SET_PARENT_OPTIMISTIC").mergeMap((e=>{const s=t.getState(),{payload:{issues:n}}=e,a="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue&&e.payload.parentIssue.id:e.payload.parentId,i=Object(ee.B)(s),r="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue:i.find((e=>e.id===a)),o=n.filter((e=>e.parentId!==a&&e.id)).map((e=>Number(e.id))),c=Qn(n.filter((e=>o.includes(Number(e.id)))));if(!o.length)return xe.Observable.empty();const l=Object(ce.f)(s),d=Object(ee.C)(s);return("SET_PARENT_OPTIMISTIC"===e.type?xe.Observable.fromPromise(e.payload.requestPromise):((e,t,s,n)=>t?Object(_t.a)(((e,t,s)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`)(e,t,s),{method:"POST",body:JSON.stringify(n)}):xe.Observable.throw("Missing Project Id"))(l,d,e.payload.parentId,{issueIds:o
})).flatMap((()=>r?xe.Observable.of(Object(Wn.g)(r,c)):xe.Observable.of(Object(Wn.j)(c)))).catch((e=>(Object(tn.a)("issue.set-parent.failure","",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.empty())))}))),((e,t)=>e.ofType("UNSET_PARENT_REQUEST").mergeMap((e=>{const s=t.getState(),{payload:{issues:n}}=e,a=n.filter((e=>e.parentId&&e.id)).map((e=>Number(e.id))),i=Qn(n.filter((e=>a.includes(Number(e.id)))));if(0===a.length)return xe.Observable.empty();return((e,t,s)=>t?Object(_t.a)(((e,t)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/delete-parents`)(e,t),{method:"POST",body:JSON.stringify(s)}):xe.Observable.throw("Missing Project Id"))(Object(ce.f)(s),Object(ee.C)(s),{issueIds:a}).flatMap((()=>xe.Observable.of(Object(Wn.j)(i)))).catch((e=>(Object(tn.a)("issue.unset-parent.failure","",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.empty())))
}))),(e=>e.ofType("SET_PARENT_SUCCESS","UNSET_PARENT_SUCCESS").map((e=>((e,t=null)=>({type:"ISSUE_RELATIONSHIP_UPDATE_SUCCESS",payload:{oldParentIdsByIssueIds:e,parentIssueId:t}}))($n()(e,"payload.oldParentIdsByIssueIds",null),$n()(e,"payload.parentIssue.id",null)))))),Zn=n("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),Xn=n("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js");const ea=(e,t,s,n)=>{const a=((e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}`)(t,s),i=(e=>({method:"POST",body:JSON.stringify({fileId:e.id})}))(e);return Object(_t.a)(a,i).map((t=>((e,t,s)=>({id:`${e.attachmentId}`,mediaApiFileId:t.id,createdDate:t.createdDate,author:s,mimetype:t.mimetype,filename:t.filename}))(t,e,n)))};var ta=Object(Ie.combineEpics)(((e,t)=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mergeMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=Object(ce.x)(s),i=Object(ce.a)(s),r=Object(Xn.b)(e.payload.id)(s);var o
;return Object($.is2afErrorCleanupGroup1Enabled)()&&void 0===r?(Object(tn.a)("issue.attachment.jira-create-error","Failed to upload attachment",null===(o=e.payload)||void 0===o?void 0:o.id),xe.Observable.of(Object(Zn.a)(r,200))):ea(r,n,a,i).retry(3).map(Zn.b).catch((e=>(Object(tn.a)("issue.attachment.jira-create-error","Could not create attachment in Jira",e),xe.Observable.of(Object(Zn.a)(r,e.statusCode)))))}))),(e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").do((e=>{fs.a.safeErrorWithoutCustomerData("issue.attachment.jira-create-error","Could not create attachment in Jira",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{statusCode:e.payload.statusCode}}))})).ignoreElements()),(e=>e.ofType("MEDIA_PICKER_ERROR","ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR").do((e=>{const{description:t,name:s,fileId:n}=e.payload;fs.a.safeErrorWithoutCustomerData("issue.attachment.media-services-upload-error","Could not upload attachment to Media Services",new pt.a({
eventNameSuffix:"issue.error",type:"js",app:"issue",event:{description:t,name:s,fileId:n}}))})).ignoreElements()));var sa=Object(Ie.combineEpics)((e=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mapTo(jt())),(e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").mapTo((()=>({type:"MARK_TOKEN_AS_UP_TO_DATE"}))())),(e=>e.ofType("ATTACHMENT_JIRA_CREATE_SUCCESS").mapTo(ht()))),na=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),aa=n("./src/packages/issue/issue-view/src/actions/card-cover-actions.js"),ia=n("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js");const ra=Bn.d,oa=(e,t)=>{const s=`[${t}]`;return na.a`query {
            agile {
                board {
                    additionalBoardData(rapidViewId: ${e}) {
                        isMediaOnCardsEnabled
                    }
                    media(issueIds: ${s}) {
                        cardMedia {
                            issueId
                            attachmentId
                            availableAttachmentIds
                        }
                    }
                }
            }
    }`},ca=e=>(Object(tn.a)("issue.card-cover.fetch",e.message,e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(aa.a)()));var la=(e,t)=>e.pipe(ys("FETCH_ISSUE_SUCCESS","ATTACHMENT_JIRA_CREATE_SUCCESS"),Object(ms.filter)((()=>Object(ia.b)(t.getState()))),Object(ms.flatMap)((()=>(e=>{const t=Object(ce.C)(e),s=Object(ee.l)(e);return null==t||null==s?xe.Observable.empty():Object(_t.a)(ra(Object(ce.f)(e)),{method:"POST",body:JSON.stringify({query:oa(t,s)})})})(t.getState()).flatMap((e=>e.errors?ca(e):(e=>{const t=$n()(e,"data.agile.board.additionalBoardData.isMediaOnCardsEnabled",!1),s=$n()(e,"data.agile.board.media.cardMedia[0].attachmentId",null),n=$n()(e,"data.agile.board.media.cardMedia[0].availableAttachmentIds",[]);return xe.Observable.of(Object(aa.b)({isEnabled:t,attachmentId:s,availableAttachmentIds:n}))})(e))).catch((e=>ca(e))))));var da=(e,t)=>e.ofType("CARD_COVER_UPDATE_REQUEST").flatMap((e=>((e,t)=>{
const s=Object(ce.f)(e),n=Object(ee.l)(e),{attachmentId:a}=t.payload;if(null==n)return xe.Observable.empty();const i={method:a?"PUT":"DELETE"};return Object(_t.a)(((e,t,s)=>{const n=`${e}/rest/greenhopper/1.0/xboard/work/media/${t}`;return s?`${n}?attachmentId=${s}`:n})(s,n,a),i)})(t.getState(),e).flatMap((()=>(()=>xe.Observable.of(Object(aa.e)()))())).catch((t=>((e,t)=>(Pe.h.safeErrorWithoutCustomerData("issue.card-cover.update",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),xe.Observable.of(Object(aa.c)(t.payload.currentAttachmentId))))(t,e))))),ua=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),pa=n("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js");const ma=e=>e.issueTypes,fa=(e,t,s)=>((e,t,s)=>Object(_t.a)(`${e}/rest/internal/2/issue/${t}/changeissuetype`,{method:"post",body:JSON.stringify({targetIssueTypeId:s})}))(e,t,s).map((e=>e.changeSuccessful))
;var ba=n("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js");const ga=(e,t,s,n)=>{const a=((e,t,s)=>({action:e,actionSubjectId:Object(ae.c)(t)(t),attributes:s}))(t,s,n);Object(De.a)(e,a)};var ha=Object(Ie.combineEpics)(((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST").switchMap((e=>{const s=Object(ce.f)(t.getState()),{issueKey:n,targetType:a,issueId:i,analyticsEvent:r,currentType:o}=e.payload;return!o.subtask&&a.subtask?(ga(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),xe.Observable.of(Object(pa.f)(i,o,a))):fa(s,n,a.id).map((e=>e?(ga(r,"updated","simpleChangeIssueTypeSuccess"),Object(pa.h)(n,a.name)):(ga(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),Object(pa.f)(i,o,a)))).catch((e=>(Pe.h.safeErrorWithoutCustomerData("change.issue.type.simplechange",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(pa.e)(e)))))
}))),((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS").switchMap((()=>Object(ba.c)(t.getState()).flatMap((e=>xe.Observable.of(Object(V.d)(e))))))),((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED").do((e=>{const s=Object(ce.f)(t.getState()),{issueId:n,currentType:a,targetType:i}=e.payload;a.subtask&&i.subtask?Object(ua.a)(`${s}/secure/MoveSubTaskChooseOperation!default.jspa?id=${n}`,!1):!a.subtask&&i.subtask?Object(ua.a)(`${s}/secure/ConvertIssue.jspa?id=${n}`,!1):Object(ua.a)(`${s}/secure/MoveIssue!default.jspa?id=${n}`,!1)})).ignoreElements())),ya=n("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js");const Oa=e=>(fs.a.safeErrorWithoutCustomerData("jira.user.issue.changeboarding.lastinteracted","Error saving last interacted changeboarding timestamp",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.empty());var ja=Object(Ie.combineEpics)((e=>e.ofType("CHANGEBOARDING_BANNER_SEEN").do((e=>{
Object(ya.c)(e.payload.currentSeenTimes+1),e.payload.firstSeenTimestamp||Object(ya.b)(Date.now())})).ignoreElements()),((e,t)=>e.ofType("CHANGEBOARDING_TOUR_BEGIN","CHANGEBOARDING_BANNER_DISMISS").mergeMap((e=>xe.Observable.of(e).mergeMap((()=>((e,t)=>{const s=Object(ce.f)(e),n=Object(Bn.b)(s);return Object(st.e)(n,{body:`${t}`})})(t.getState(),e.payload))).catch(Oa))).ignoreElements()),((e,t)=>e.ofType("OPT_OUT_REQUEST").switchMap((e=>{const s=`${Object(ce.f)(t.getState())}/rest/greenhopper/1.0/profile/labs-panel/issue-details-popup`,{analyticsEvent:n}=e.payload;return xe.Observable.from(Object(st.e)(s,{body:JSON.stringify({isEnabled:!1})})).map((()=>(n&&Object(ie.b)(n,"changeboarding optedOut"),window.location.reload()))).catch((e=>(fs.a.safeErrorWithoutCustomerData("jira.issue.details.changeboarding.optout","Could not opt-out from new issue view",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.empty())))}))));function va(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ea(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?va(Object(s),!0).forEach((function(t){wa(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):va(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wa(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ka=e=>Object.entries(e).reduce(((e,[t,{value:s,autoCompleteUrl:n,allowedValues:a,editable:i,required:r,schema:o,title:c,configuration:l}])=>({fieldValues:Ea(Ea({},e.fieldValues),{},{[t]:s}),fieldConfigs:Ea(Ea({},e.fieldConfigs),{},{[t]:{autoCompleteUrl:n,allowedValues:a,isEditable:i,isRequired:r,schema:o,
title:c,configuration:l}})})),{fieldValues:{},fieldConfigs:{}}),Ca=e=>{const t=[],s=e.map((e=>{const s={},{fields:n=[],key:a,id:i}=e;return Object.entries(n).forEach((([e,t])=>{s[e]=t})),t.push({[a]:s}),{id:i,key:a}}));return{issuesFieldsValues:t,childrenKeyList:s}},Sa=e=>{const t=[],s=[],n=e.map((e=>{const{fieldValues:n,fieldConfigs:a}=(e=>e.reduce(((e,{key:t,value:s,autoCompleteUrl:n,allowedValues:a,editable:i,required:r,schema:o,title:c})=>({fieldValues:Ea(Ea({},e.fieldValues),{},{[t]:void 0!==s?s:null}),fieldConfigs:Ea(Ea({},e.fieldConfigs),{},{[t]:{autoCompleteUrl:n,allowedValues:a,isEditable:i,isRequired:r,schema:o,title:c}})})),{}))(e.fields);return t.push({[e.key]:n}),s.push({[e.key]:a}),{id:e.id,key:e.key}}));return{issuesFieldsValues:t,issueFieldsConfigurations:s,childrenKeyList:n}};var Ia=(e,t)=>s=>s.ofType("CHILD_ISSUE_ADD_SUCCESS","SUBTASK_ADD_SUCCESS").switchMap((s=>{const{childIssue:n,fieldsData:a}=s.payload;if(!a)return xe.Observable.empty()
;const{fieldValues:i,fieldConfigs:r}=ka(a);return e.setIssue(n.issueKey,i),t.setIssueConfig(n.issueKey,r),xe.Observable.empty()}));const Ta=["ADD_COMMENT_FORM_CANCEL","EDIT_COMMENT_CANCEL","SAVE_COMMENT_SUCCESS","DELETE_COMMENT_SUCCESS"];var _a=e=>e.ofType(...Ta).mergeMap((e=>(e=>{if("ADD_COMMENT_FORM_CANCEL"===e.type||e.payload.isNewComment)return xe.Observable.of(Object(En.b)({fieldId:Object(wn.a)("NEW_OPTIMISTIC_COMMENT")}));const t=(e=>{const t=(e.id||e.optimisticId).toString();return-1!==t.indexOf("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":t})(e.payload),s=Object(wn.a)(t);return xe.Observable.of(Object(En.b)({fieldId:s}))})(e))).catch((e=>(e=>(fs.a.safeErrorWithoutCustomerData("issue.comment-delete-draft",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.empty()))(e)));const Pa={method:"DELETE"},xa=(e,t,s)=>{
const n=Object(ce.f)(e),a=Object(je.m)(Object(ce.x)(e)),i=((e,t,s)=>`${e}/rest/api/2/issue/${t}/comment/${s}`)(n,a,t),{bodyAdf:r}=Object(ws.t)(e)[t],o=!!r&&Object(Re.d)(r);return Object(_t.a)(i,Pa).map((()=>(o&&s.refreshAttachments(a),Object(xn.h)(t)))).catch((e=>((e,t)=>(Object(tn.a)("issue.comment.delete","Could not delete a comment",e),xe.Observable.of(404===e.statusCode?Object(xn.h)(t):Object(xn.f)(t))))(e,t)))};var Da=e=>(t,s)=>t.ofType("DELETE_COMMENT_REQUEST").mergeMap((t=>{const n=s.getState(),a=t.payload.id;return xa(n,a,e)})),Aa=n("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js");const Ma=(e,t,s)=>{const n=Object(ce.a)(t),a=Object(ce.x)(t);return Object(ws.n)(t).map((i=>{const r=Object(wn.a)(i),o=Object(wn.c)(n,a,r),c=Object(ws.f)(i)(t),l=null!=c?c:void 0;return xe.Observable.of(Object(En.e)(i,o,((e,t,s)=>e&&t===s.payload.id?xn.l:null)(s,i,e),l))}))},La=e=>(Object(tn.a)("issue.comment-load-draft",e.message,e,new pt.a({eventNameSuffix:"issue.error",type:"js",
app:"issue",event:e})),xe.Observable.empty());var Ra=Object(Ie.combineEpics)(((e,t)=>e.ofType("EDIT_COMMENT_BEGIN").mergeMap((e=>xe.Observable.merge(...Ma(e,t.getState(),!0)))).catch((e=>La(e)))),((e,t)=>e.pipe(ys("FETCH_ISSUE_SUCCESS","REFRESH_ISSUE_SUCCESS","FETCH_MORE_COMMENTS_SUCCESS","FETCH_LATEST_COMMENTS_SUCCESS"),Object(ms.mergeMap)((e=>e.payload.comments?xe.Observable.merge(...Ma(e,t.getState(),!1)):xe.Observable.empty())),Object(ms.catchError)((e=>La(e))))));var Na=e=>e.ofType("SAVE_COMMENT_SUCCESS").filter((e=>e.meta.shouldFetchViewContext)).mapTo(ht());var Fa=(e,t)=>e.ofType("EDIT_COMMENT_UPDATE").switchMap((e=>((e,t)=>{const{payload:{id:s,value:n}}=e,a=Object(ws.f)(s)(t);return xe.Observable.of(Object(En.h)(Object(wn.a)(s),n,a))})(e,t.getState()))).catch((e=>(e=>(Object(tn.a)("issue.comment-save-draft",e.message,e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),
xe.Observable.empty()))(e))),Ua=n("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");function Va(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ka(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(s),!0).forEach((function(t){$a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Va(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Wa=(e,t,s,n,a)=>{const i=((e,t)=>{const s=e.getState();if(Object(ce.t)(s))return{properties:[{key:"sd.public.comment",value:{internal:Object(ws.C)(t)(s)}}]};return{}
})(e,t),r=((e,t)=>Object(ws.z)(e.getState())?{visibility:"public"===t.type?null:t}:{})(e,a);return{method:n?"POST":"PUT",body:JSON.stringify(Ka(Ka({body:s},i),r))}},Ba=t=>{if(t instanceof Me.b&&t.message)try{const e=JSON.parse(t.message);return e.errorMessages?e.errorMessages.join("; "):void 0}catch(e){return void Object(tn.a)("issue.save.comment","Failed to parse FetchError",e)}},Ha=(e,{id:t,bodyAdf:s,isNewComment:n,analyticsEvent:a,visibility:i},{shouldFetchViewContext:r})=>Object(_t.a)(((e,t,s)=>{const n=e.getState();return(({baseUrl:e,issueKey:t,id:s="",isNewComment:n=!1})=>`${e}/rest/api/3/issue/${t}/comment${n?"":`/${s}`}`)({baseUrl:Object(ce.f)(n),issueKey:Object(ce.x)(n),id:t,isNewComment:s})})(e,t,n),Wa(e,t,s,n,i)).map(Ua.d).map(Ua.a).map((e=>Object(xn.C)(e,t,n,a,{shouldFetchViewContext:r}))).catch((e=>(Object(tn.a)("issue.save.comment","Failed to save a comment",e),xe.Observable.of(Object(xn.z)({optimisticId:t,isServerValidationError:!!e&&400===e.statusCode,
invalidMessage:Ba(e)})))));var Ga=Object(Ie.combineEpics)(((e,t)=>e.ofType("SAVE_COMMENT_RETRY").map((e=>{const s=t.getState(),{optimisticId:n,isNewComment:a}=e.payload;return Object(xn.A)(Ka(Ka({},Object(ws.H)(n)(s)),{},{isNewComment:a}))}))),((e,t)=>e.ofType("SAVE_COMMENT_REQUEST").groupBy((e=>e.payload.comment.id)).mergeMap((e=>e.concatMap((e=>{const{id:s,bodyAdf:n,isNewComment:a,visibility:i}=e.payload.comment,{analyticsEvent:r}=e.payload;if(!n||Object(Re.g)(n))return xe.Observable.empty();let o=!1;if(a)o=Object(Re.d)(n);else{const e=Object(ws.t)(t.getState());o=Object(Re.e)(e[s].bodyAdf,n)}return o&&t.dispatch(jt()),Ha(t,{id:s,bodyAdf:n,isNewComment:a,analyticsEvent:r,visibility:i},{shouldFetchViewContext:o}).mergeMap((e=>{if("SAVE_COMMENT_FAILURE"===e.type)return xe.Observable.of(e);if(a){const s=t.getState(),n=Object(ws.K)(s),a=Object(ws.F)(s),i=Object(ws.J)(s),{numPrevCommentsToLoad:r}=Object(Aa.a)(n,a,i)
;return r>0?xe.Observable.zip(xe.Observable.of(e),xe.Observable.of(Object(xn.u)(e.payload.comment.id))).mergeMap((e=>xe.Observable.from(e))):xe.Observable.zip(xe.Observable.of(e)).mergeMap((e=>xe.Observable.from(e)))}return xe.Observable.zip(xe.Observable.of(e)).mergeMap((e=>xe.Observable.from(e)))}))})))))),qa=e=>e.ofType("ADD_COMMENT_FORM_EXPAND","EDIT_COMMENT_BEGIN","PASTED_INTO_COMMENT_FORM","SAVE_COMMENT_SUCCESS").groupBy((e=>{switch(e.type){case"ADD_COMMENT_FORM_EXPAND":return"NEW_OPTIMISTIC_COMMENT";case"EDIT_COMMENT_BEGIN":case"PASTED_INTO_COMMENT_FORM":return e.payload.id;case"SAVE_COMMENT_SUCCESS":return e.payload.optimisticId.startsWith("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":e.payload.optimisticId;default:return null}})).map((e=>{const t=e.filter((({type:e})=>"ADD_COMMENT_FORM_EXPAND"===e||"EDIT_COMMENT_BEGIN"===e));return e.window(t).map((e=>{
const t=e.filter((({type:e})=>"SAVE_COMMENT_SUCCESS"===e)),s=e.filter((({type:e})=>"PASTED_INTO_COMMENT_FORM"===e)).takeUntil(t).reduce(((e,t)=>[...e,t.payload.pastedContent]),[]);return t.withLatestFrom(s).mergeMap((([e,t])=>{const{comment:s}=e.payload;return 0===t.length?xe.Observable.empty():xe.Observable.of(Object(xn.D)(s,t))}))})).mergeAll()})).mergeAll(),za=n("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js");var Ya=e=>Object(_t.a)(Object(Bn.c)(e)),Qa=(e,t)=>e.ofType("FETCH_CONFLUENCE_APP_LINKS_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(ce.f)(e);return Ya(s).map(za.c).catch((e=>(Object(tn.a)("issue.fetch.confluence-app-links-epic","FETCH_CONFLUENCE_APP_LINKS_REQUEST: Failed to fetch confluence app links data",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of(Object(za.b)()))))
})),Ja=n("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),Za=n("./src/packages/issue/issue-view/src/common/model/confluence-page-type.js");const Xa=e=>{if(e.object.status.resolved){return{id:Object(je.f)(e.id),globalId:Object(je.u)(e.globalId),href:Object(je.j)(e.object.url),title:e.object.title,type:Object(Za.a)(e.object.icon.title),lastUpdatedContext:{user:{displayName:Object(je.g)(e.object.status.icon.title),avatarUrl:Object(je.j)(e.object.status.icon.url16x16)}}}}return{id:Object(je.h)(e.id),error:e.object.status.icon.url16x16?"APPLINK_REQ_AUTH":"REMOTE_SERVER",link:{id:Object(je.h)(e.id),globalId:Object(je.u)(e.globalId),href:Object(je.j)(e.object.url)},repairLink:{href:Object(je.j)(e.object.status.icon.url16x16)}}};var ei=n("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js")
;const ti=["blogpost","page"],si=e=>!e.includes("http")&&window&&window.location?`${window.location.protocol}//${window.location.host}${e}`:e;var ni=e=>((e,t)=>e.map((e=>e.filter((e=>ti.includes(e.type))).map((e=>({id:Object(je.f)(e.id.toString()),globalId:Object(je.u)(""),href:Object(je.j)(si(`${t}/wiki${e.url}`)),title:e.title,type:Object(Za.a)(e.contentType),space:e.space,spaceKey:e.spaceKey||""}))))))((e=>Object(_t.a)((e=>`${e}/wiki/rest/recentlyviewed/1.0/recent?limit=20`)(e)))(e),e);const ai="issue.fetch.confluence-pages-epic",ii="addconfluencelink.error.issueId.invalid";var ri=Object(Ie.combineEpics)(((e,t)=>e.ofType("CREATE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=Object(ce.w)(s),{pageHref:i}=e.payload,{analyticsEvent:r}=e.meta;return a?xe.Observable.from((({baseUrl:e,issueId:t,pageHref:s})=>Object(st.d)(`${(e=>`${e}/rest/confluenceIssueLink/1/confluence`)(e)}${((e,t)=>`?issueId=${e}&pageUrl=${t}`)(t,s)}`,{body:JSON.stringify({})
}).then(Xa))({baseUrl:n,pageHref:i,issueId:Object(je.k)(a.toString())})).do((e=>{Object(De.a)(r,{action:"created",actionSubjectId:e.id,attributes:{createdWithError:!!$n()(e,"error"),needsAuthorization:!!$n()(e,"repairLink.href")}})})).map((e=>Object(Ja.d)(e))).catch((e=>(Object(tn.a)(ai,"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(Ja.a)(e.message))))):(Pe.h.safeErrorWithoutCustomerData(ai,"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(ii)})),xe.Observable.of(Object(Ja.a)(ii)))}))),((e,t)=>e.ofType("DELETE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=Object(ce.x)(s),{globalId:i}=e.payload
;return xe.Observable.fromPromise(((e,t,s)=>Object(st.a)(`${e}/rest/api/2/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`))(n,a,i)).map(Ja.g).catch((e=>(Object(tn.a)(ai,"DELETE_CONFLUENCE_PAGE_LINK_REQUEST: Failed to delete confluence page link",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(Ja.e)()))))}))),((e,t)=>e.ofType("FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(ce.f)(e);return ni(s).map(ei.c).catch((e=>{const t={eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e};return Pe.h.safeErrorWithoutCustomerData("issue.fetch.confluence-recently-viewed-epic","FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST: Failed to fetch recently viewed confluence pages",new pt.a(t)),xe.Observable.of(Object(ei.a)())}))})))),oi=n("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js")
;var ci=(e,t)=>e.ofType("SET_CONTEXT").map((()=>Object(ce.k)(t.getState()))).pairwise().mergeMap((([e,t])=>((e,t)=>e!==t?xe.Observable.of(Object(oi.c)({fromIssueKey:e,toIssueKey:t})):xe.Observable.empty())(e.issueKey,t.issueKey))),li=n("./src/packages/issue/issue-view/src/actions/issue-links-actions.js");const di={method:"DELETE"};var ui=(e,t)=>e.ofType("DELETE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=e.payload.linkedIssueId,i=((e,t)=>`${e}/rest/api/2/issueLink/${t}`)(n,a),r=Object(ks.f)(a)(s),o=Object(ks.h)(r.linkedIssueKey)(s);return Object(_t.a)(i,di).map((()=>Object(li.f)(a,{issueId:o.id,direction:r.direction}))).catch((e=>(Object(tn.a)("issue.issue-links.delete-issue-link-error","Error when removing issue link",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(li.d)(a)))))})),pi=n("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js");const mi={method:"DELETE"
},fi=(e,t,s)=>Object(_t.a)(((e,t,s)=>`${e}/rest/api/3/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`)(e,t,s),mi),bi=(e,t)=>e.ofType("DELETE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=Object(ce.x)(s),{globalId:i,analyticsEvent:r}=e.payload;return fi(n,a,i).map((()=>(r&&Object(ie.b)(r,"remoteLinkedIssue deleted"),Object(pi.c)(i)))).catch((e=>(Object(ie.b)(r,"remoteLinkedIssue deleteFailed"),Object(tn.a)("issue.issue-links.delete-issue-link-error","remote",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(pi.a)(i)))))}))
;var gi=n("./node_modules/uuid/index.js"),hi=n.n(gi),yi=n("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),Oi=n("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/limit-failed/index.js"),ji=n("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/generic-error/index.js"),vi=n("./src/packages/forge/forge-ui/src/utils/connect/index.js"),Ei=n("./src/packages/forge/forge-ui/src/utils/errors/index.js"),wi=n("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),ki=n("./src/packages/issue/issue-view/src/actions/forge-actions.js"),Ci=n("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js");const Si=(e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`
;var Ii=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Ti=n("./node_modules/lodash/fp/pipe.js"),_i=n.n(Ti),Pi=n("./node_modules/lodash/isBoolean.js"),xi=n.n(Pi),Di=n("./node_modules/lodash/isNumber.js"),Ai=n.n(Di),Mi=n("./node_modules/lodash/isString.js"),Li=n.n(Mi);function Ri(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ni(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(s),!0).forEach((function(t){Fi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ri(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0
}):e[t]=s,e}const Ui=e=>t=>{if(404===t.statusCode)return e();throw t},Vi=(e,t,s="none")=>e.added===t&&("none"===s||e.id===s),Ki=(e,t,s)=>{const n=((e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`)(e,t,s);return{get:()=>(e=>Object(st.b)(e).then((({value:e})=>(Array.isArray(e)?e:[]).map((({added:e,id:t,collapsed:s})=>({added:e,id:t,collapsed:s}))).filter((({added:e,id:t,collapsed:s})=>Ai()(e)&&(null==t||Li()(t))&&(null==s||xi()(s)))))).catch(Ui((()=>[]))))(n),update:e=>((e,t)=>Object(st.e)(e,{body:JSON.stringify(t)}).then((()=>t)))(n,e),deleteEntry:()=>(e=>Object(st.a)(e).then((()=>[])).catch(Ui((()=>[]))))(n)}},$i=_i()([async(e,{issueKey:t,extensionId:s,added:n,id:a},i)=>{const{get:r,update:o}=Ki(e,t,s),c=await r();if(0===c.length)return[];const l=c.map((e=>Ni(Ni({},e),{},{collapsed:Vi(e,n,a)?i:e.collapsed})));return o(l).then((()=>l))},xe.Observable.fromPromise]),Wi=_i()([async(e,t,s,n,a,i)=>{const{get:r,update:o}=Ki(e,t,s),c=await r(),l={added:n,id:i,collapsed:!1}
;if(0===c.length)return o([l]).then((()=>[l]));if(a){if(c.length>=5)throw new Ei.a("Multiple issue panel installation limit reached.");return o([...c,l]).then((()=>[...c,l]))}return[c[0]]},xe.Observable.fromPromise]),Bi=_i()([async(e,t,s,n,a)=>{const{get:i,update:r,deleteEntry:o}=Ki(e,t,s),c=await i();if(0===c.length)return[];const l=c.filter((e=>!Vi(e,n,a)));return 0===l.length?o():r(l)},xe.Observable.fromPromise]);var Hi=n("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function Gi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(s),!0).forEach((function(t){zi(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Yi="issue.ecosystem.ecosystem-content-panel-epic",Qi=(e,t)=>({addonModuleKey:t,baseUrl:Object(ce.f)(e),parentIssueKey:Object(ce.x)(e)}),Ji=(e,t)=>{const s=Object(Hi.k)(t)(e);if(s)return s.name},Zi=(e,t,s)=>{const n=Object(Ci.b)(s,10);return((e,t,s)=>{const n=Si(e,t,s);return xe.Observable.fromPromise(Object(st.e)(n,{body:JSON.stringify({added:s})}))})(e,t,n).map((()=>Object(wi.c)(n))).catch((e=>(fs.a.safeErrorWithoutCustomerData(Yi,`saveExtensionToIssue failed: ${e}`,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(wi.a)(e)))))}
;var Xi=Object(Ie.combineEpics)(((e,t)=>e.ofType("ADD_CONTENT_PANEL_REQUEST").flatMap((e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=Qi(t.getState(),e.payload),i=t.getState(),r=Object(Ii.p)(i),o=Object(Hi.j)(i),c=Object(Ii.f)(i),l=Object(Ii.n)(i),d=!Object(Ii.o)(i),u=Object(ce.b)(i);if(Object(vi.a)(e.payload)){const t=o.find((t=>Object(vi.e)(t.appKey,t.moduleKey)===e.payload)),i=t?t.name:void 0,r=!(null==t||!t.allowMultiple);return((e,t,s,n,a)=>{const i=Date.now(),r=hi.a.v4().substring(0,8);return Wi(e,t,s,i,n,r).mergeMap((e=>{const t=e[e.length-1],n=Object(vi.f)(s,r,t.added),i=xe.Observable.of(Object(ki.e)(n),Object(wi.c)(n));return Object(yi.h)(a),i}))})(n,a,s,r,u).catch((e=>{Object(yi.d)(u,{error:e});const{showFlag:t}=Object(Ht.f)();return e instanceof Ei.a?t(Object(Oi.a)(i)):t(Object(ji.a)(i)),xe.Observable.of(Object(wi.a)(e))}))}return!l&&d?xe.Observable.merge(...c.map((e=>`${e.appKey}_${e.moduleKey}`)).filter((e=>!r.includes(e))).map((e=>Zi(n,a,e)))):Zi(n,a,s)
}))),(e=>e.ofType("ADD_CONTENT_PANEL_SUCCESS").switchMap((e=>{const t=e.payload;return xe.Observable.of(Object(wi.d)(t))}))),((e,t)=>e.ofType("REMOVE_CONTENT_PANEL_REQUEST").flatMap((e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=Qi(t.getState(),e.payload),i=Object(Ci.b)(s,10),r=t.getState(),o=Object(Ii.p)(r),c=Object(ce.b)(r);if(Object(vi.a)(s)){const t=Ji(r,e.payload);return((e,t,s,n)=>{const a=Object(Ci.a)(s);if(null==a)return Object(yi.c)(n,{error:Error(`Panel key doesn't match regexp: ${s}`)}),xe.Observable.of(Object(wi.g)());const{extensionId:i}=a,{id:r}=a,o=a.added;return Bi(e,t,i,o,r).mergeMap((()=>(Object(yi.g)(n),xe.Observable.of(Object(wi.i)(s),Object(ki.f)(s)))))})(n,a,s,c).catch((e=>{Object(yi.c)(c,{error:e});const{showFlag:s}=Object(Ht.f)();return s(Object(ji.a)(t)),xe.Observable.of(Object(wi.g)(e))}))}if(!o.includes(s)&&!o.includes(i)){const e=Object(Ii.g)(r)
;return xe.Observable.merge(...e.map((e=>`${e.appKey}_${e.moduleKey}`)).filter((e=>e!==s)).map((e=>Zi(n,a,e))))}const l=o.includes(s)?s:i;return((e,t,s)=>{const n=Si(e,t,s);return xe.Observable.fromPromise(Object(st.a)(n))})(n,a,l).map((()=>Object(wi.i)(l))).catch((e=>(fs.a.safeErrorWithoutCustomerData(Yi,`removeExtensionFromIssue failed: ${e}`,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(wi.g)(e)))))}))),((e,t)=>e.ofType("ADD_CONTENT_PANEL_SUCCESS","CONTENT_PANELS_CUSTOMISED_REQUEST").flatMap((e=>{const{baseUrl:s,parentIssueKey:n}=Qi(t.getState(),e.payload);return Object(Ii.n)(t.getState())?xe.Observable.empty():((e,t)=>{const s=Si(e,t,"issue.content.panel.customised.flag");return xe.Observable.fromPromise(Object(st.e)(s,{body:JSON.stringify({createdOn:new Date})}))})(s,n).map((()=>Object(wi.f)())).catch((e=>(fs.a.safeErrorWithoutCustomerData(Yi,`saveIssueCustomised failed: ${e}`,new pt.a({eventNameSuffix:"issue.error",type:"js",
app:"issue",event:e})),xe.Observable.empty())))}))),((e,t)=>e.ofType("FORGE_ISSUE_PANEL_UPDATE_REQUEST").flatMap((e=>{const s=Object(ce.f)(t.getState()),n=Object(ce.b)(t.getState()),{issueKey:a,panelKey:i,collapsed:r}=e.payload,o=Object(Ci.a)(i);if(null==o)return Object(yi.e)(n,{error:Error(`Panel key doesn't match regexp: ${i}`)}),xe.Observable.empty();const c=qi(qi({},o),{},{issueKey:a});return $i(s,c,r).map((()=>(Object(yi.i)(n),Object(ki.h)({panelKey:i,collapsed:r})))).catch((e=>{Object(yi.e)(n,{error:e});const s=t.getState(),a=Ji(s,i),{showFlag:r}=Object(Ht.f)();return r(Object(ji.a)(a)),xe.Observable.empty()}))})))),er=n("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),tr=n("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js");var sr=(e,t)=>e.ofType("REFRESH_ECOSYSTEM_REQUEST").switchMap((()=>{const e=t.getState();return((e,t,s)=>{const n=`${e}/rest/internal/2/issue/${t}/extension`
;return Object(_t.a)(n,{perf:er.b,headersProcessor:s&&s(er.b.key)}).map(tr.b).catch((e=>(Pe.h.safeErrorWithoutCustomerData("issue.fetch.ecosystem-extensions-fetch-server","fetchEcosystemExtensions: Failed to fetch extensions",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of({}))))})(Object(ce.f)(e),Object(ce.x)(e)).map(V.f).catch((e=>(Pe.h.safeErrorWithoutCustomerData("issue.fetch.ecosystem-refresh-epic","REFRESH_ECOSYSTEM_REQUEST: Failed to refresh ecosystem data",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.empty())))})),nr=e=>t=>t.ofType("FETCH_ISSUE_FAILURE").do((t=>e&&e(t.payload.error))).ignoreElements();const ar="VALIDATION_ERROR";var ir=n("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js")
;const rr=["summary","description","assignee"],or=({payload:e})=>rr.includes(e.fieldId),cr=e=>Object(ce.b)(e)||"unknown",lr=(...e)=>Object(Ae.a)((({state:e,hasSuccess:t,fieldId:s,hasEdit:n,errorMessage:a,traceId:i})=>{const r={};return null!=a&&(r.errorMessage=a),null!=i&&(r.traceId=i),{experience:"editIssue",analyticsSource:cr(e),application:Object(ir.b)(e),edition:Object(ir.a)(e),wasExperienceSuccesful:t,field:s,hasEdit:n,additionalAttributes:r}})(...e));var dr=Object(Ie.combineEpics)(((e,t)=>e.ofType("FIELD_EDIT_CANCEL").filter(or).filter((({payload:e})=>{const s=t.getState();return!Object(vs.F)(e.fieldId)(s)})).do((e=>{const s=t.getState(),{fieldId:n}=e.payload;return lr({state:s,hasSuccess:!0,fieldId:n,hasEdit:!1})})).ignoreElements()),((e,t)=>e.ofType("FIELD_UPDATED").filter(or).do((e=>{const s=t.getState(),{fieldId:n}=e.payload;return lr({state:s,hasSuccess:!0,fieldId:n,hasEdit:!0})
})).ignoreElements()),((e,t)=>e.ofType("FIELD_SAVE_FAILURE").filter(or).filter((({payload:e})=>!Object(Me.c)(e.error))).do((e=>{const s=t.getState(),{fieldId:n,error:a}=e.payload,i=(e=>e instanceof Me.a?ar:e instanceof Me.b?e.statusCode>=400&&e.statusCode<500?ar:"SERVER_ERROR":"CONNECTIVITY_ERROR")(a);return lr({state:s,hasSuccess:"SERVER_ERROR"!==i,fieldId:n,hasEdit:!0,errorMessage:`${a.statusCode||i} - ${a.message}`,traceId:a.traceId})})).ignoreElements())),ur=n("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js");const pr="issue.issue-view.get-create-linked-issue-permission.epic";var mr=(e,t)=>e.ofType("FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(ee.F)(e);return Object(ur.a)(e)&&("business"===s||"service_desk"===s)?(e=>Object(_t.a)(`${e}/rest/api/3/permissions/project`,{method:"POST",body:JSON.stringify({permissions:["CREATE_ISSUES"]})}).retry(2).flatMap((e=>{if(e&&e.projects){const t=e.projects.length>0
;return xe.Observable.of(Object(li.q)(t))}return fs.a.safeErrorWithoutCustomerData(pr,"The permission endpoint does not return the expected data"),xe.Observable.of(Object(li.q)(!1))})).catch((e=>(fs.a.safeErrorWithoutCustomerData(pr,e),xe.Observable.of(Object(li.q)(!1))))))(Object(ce.f)(e)):xe.Observable.of(Object(li.q)(!1))})),fr=n("./node_modules/lodash/uniq.js"),br=n.n(fr),gr=n("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const hr=["assignee","project"],yr="issue.issuelinks.fetch.linked.issues.epic",Or=({id:e,key:t,fields:s})=>({id:e,assigneeUrl:s.assignee&&Object(gr.c)(s.assignee).avatarUrl,assigneeDisplayName:s.assignee&&Object(gr.c)(s.assignee).displayName,projectType:s.project&&s.project.projectTypeKey,issueKey:t}),jr=(e,t)=>Object(ba.b)(e,t,hr).map((e=>e.map(Or).reduce(((e,t)=>Object.assign(e,{[t.issueKey]:t})),{})));var vr=Object(Ie.combineEpics)(((e,t)=>e.ofType("FETCH_LINKED_ISSUES_REQUEST").switchMap((()=>{
const e=t.getState(),s=Object(ce.f)(e),n=Object(ks.g)(e);return jr(s,n).flatMap((e=>xe.Observable.of(Object(li.k)(e)))).catch((e=>(Object(tn.a)(yr,"Error while fetching linked issues",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of(Object(li.j)(e)))))}))),((e,t)=>e.ofType("SAVE_LINKED_ISSUE_SUCCESS").switchMap((()=>{const e=t.getState(),s=Object(ce.f)(e),n=Object(ce.x)(e),a=Object(ks.i)(e),i=br()(Object.values(a).map((e=>e.linkedIssueKey))),r=Object.values(a).filter((e=>e.isSaved)).map((e=>e.id));return xe.Observable.zip(Object(ba.d)(s,n),jr(s,i),((e,t)=>Object(li.i)(e,t,r,a))).catch((e=>(Object(tn.a)(yr,"Error while fetching new issue links and their details",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(li.h)(r,e)))))
})))),Er=n("./src/packages/forge/forge-ui-analytics/src/common/utils/get-error-type/index.js"),wr=n("./src/packages/forge/forge-ui-analytics/src/services/fetch-modules/index.js"),kr=n("./src/packages/forge/forge-ui/src/utils/can-fetch-forge/index.js"),Cr=n("./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js");const Sr=async(e,t)=>t||Object(Cr.a)(e),Ir=(e,t)=>Sr(Object(ce.i)(e),t),Tr={FETCH_ISSUE_REQUEST:"fetch",REFRESH_ISSUE_REQUEST:"refresh",LOAD_NEW_ISSUE:"load-new",FETCH_FORGE_REQUEST:"fetch-forge"},_r=Object.keys(Tr);var Pr=(e,t)=>(s,n)=>s.ofType(..._r).switchMap((s=>{const a=Object(ce.b)(n.getState());if(!Object(kr.a)())return xe.Observable.empty();let i,r,o=!1,c=!1;const l=Tr[s.type],d=null==e?void 0:e.issueForgeData,u=!!d,p=e=>{const t={actionType:l,isPrefetched:u};return u&&(t.isPrefetchedDataResolved=c,t.isPrefetchedDataValid=r),e&&(t.errorType=Object(Er.a)(e),t.error=e),t};return Object(wr.f)(a,p()),null==d||d.then((e=>{o=!0,i=e})),
xe.Observable.fromPromise(Promise.resolve().then((()=>(c=o,o&&(r=!!i),!u||!r&&c?Ir(n.getState()):Ir(n.getState(),d))))).map((e=>(Object(wr.e)(a,p()),t.setForge(e),Object(ki.a)(e)))).catch((e=>(Object(wr.d)(a,p(e)),xe.Observable.empty())))}));var xr=e=>Object(Ie.combineEpics)((e=>t=>t.ofType("FETCH_ISSUE_REMOTE_DATA_REQUEST").switchMap((t=>{if(t.payload){const s=t.payload;return e.getIssueRemoteData$(s).flatMap((e=>xe.Observable.of(we(e))))}return xe.Observable.of((()=>({type:"FETCH_ISSUE_REMOTE_DATA_FAILURE"}))())})))(e),(e=>(t,s)=>t.ofType("APPLINK_AUTHENTICATION_SUCCESS","SAVE_REMOTE_LINKED_ISSUE_SUCCESS").switchMap((()=>{const t=s.getState(),n=Object(ce.x)(t);return n?e.getIssueRemoteData$(n).flatMap((e=>xe.Observable.of(we(e)))):xe.Observable.empty()})))(e)),Dr=n("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js");const Ar=(e,t,s,n)=>{const a={action:t,actionSubjectId:Object(ae.c)(s)(s)};n?Object(De.b)(e,a):Object(De.a)(e,a)}
;var Mr=(t,s)=>t.ofType("DELETE_ISSUE_REQUEST").mergeMap((({payload:t})=>{const{issueKey:n,analyticsEvent:a}=t;return((e,t)=>{const s=((e,t)=>`${e}/rest/api/3/issue/${t}?deleteSubtasks=true`)(e,t);return Object(_t.a)(s,{method:"DELETE"})})(Object(ce.f)(s.getState()),n).map((()=>(Ar(a,"deleted","issueDeleted"),Object(Dr.d)(n)))).catch((t=>(Pe.h.safeErrorWithoutCustomerData("issue.delete.issue-delete-epic","Failed to delete issue",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),Ar(a,"deletedError","issueDeletedError",t),xe.Observable.of(Object(Dr.b)(n,(t=>{try{return JSON.parse(t.message).errorMessages[0]}catch(e){return"Failed to delete issue"}})(t))))))})),Lr=n("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js");const Rr=e=>t=>s=>{e.dispatch(((e,t)=>({type:"SAVE_SERVER_TIME",payload:{key:e,serverTime:t}}))(t,Number(s.get("atl-vtm-backend-time"))))};function Nr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(s),!0).forEach((function(t){Ur(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Nr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ur(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Vr=(e,t,s,n)=>{
const{setIssue:a,setIssues:i,mergeIssues:r}=t,{setIssueConfig:o,setIssuesConfig:c,mergeIssuesConfig:l}=s,{fieldValues:d,fieldConfigs:u}=ka(e),p=d["children-issues"]||[],m=d["epic-issues"]||[],f=d.subtasks||[],b=d["portfolio-child-issues"]||[],g=d["children-issues"],h=d["epic-issues"],y=d.subtasks,O=d["portfolio-child-issues"],{issuesFieldsValues:j,issueFieldsConfigurations:v,childrenKeyList:E}=Sa(p),{issuesFieldsValues:w,issueFieldsConfigurations:k,childrenKeyList:C}=Sa(m),{issuesFieldsValues:S,childrenKeyList:I}=Ca(f),{issuesFieldsValues:T,childrenKeyList:_}=Ca(b);a(n,Fr(Fr(Fr(Fr(Fr({},d),g&&{"children-issues":E}),h&&{"epic-issues":C}),y&&{subtasks:I}),O&&{"portfolio-child-issues":_})),o(n,u),r(w),r(S),r(T),i(j),l(k),c(v)},Kr=["viewContext","uploadContext","userAuth"];function $r(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){
var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Wr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Br(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hr=(e,t)=>{let s="UNKNOWN_ERROR";if(401===e.statusCode?s="AUTHENTICATION_ERROR":403===e.statusCode||404===e.statusCode?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e.statusCode?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",e instanceof un.a){const t=e,{endpoint:n,traceId:a,statusCode:i,message:r}=t;return{errorMessage:i?`${r}, endpoint: ${n}, status code: ${i}`:`${r}, endpoint: ${n}`,endpoint:n,traceId:a,statusCode:i,error:s}}if(e instanceof Me.b){
const t=e,{message:n,statusCode:a,traceId:i}=t;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(s),!0).forEach((function(t){Br(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({error:s,statusCode:a,errorMessage:`${n}, status code: ${a}`},i?{traceId:i}:{})}return{error:s,statusCode:void 0}};var Gr=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,ecosystemActions:n,userPreferenceActions:a,issueTabsActions:i,permissionActions:r,attachmentActions:o,projectContextActions:c,prefetchedResourceManager:l,jiraSettingsActions:d,issueContextActions:u})=>(p,m)=>p.ofType("FETCH_ISSUE_REQUEST","LOAD_NEW_ISSUE").switchMap((()=>{Object(Lr.a)();const p=m.getState(),f=Object(ce.a)(p),b=Object(ce.f)(p),g=u.getIssueKey(),h=u.getMaxTokenLength()
;return Object(ba.a)(p,l).filter((()=>u.getIssueKey()===g)).do((({issue:{fields:n,tabs:l,id:p,viewScreenId:m},myPreferences:f,permissions:b,attachments:h,jiraSettings:y,issueSections:O,project:j})=>{i.setIssueTabs(g,l),Vr(n,e,t,g),s.setIssueViewLayout(g,O),a.setUserPreferences(f),b&&j&&r.setProjectPermissions(Object(je.s)(j.projectKey),b),void 0!==h&&(o.setTotalCount(g,h.totalCount),"number"==typeof h.deletableCount&&o.setDeletableCount(g,h.deletableCount),o.setVisibleAttachments(g,h.nodes)),y&&d.setJiraSettings(y),j&&c.setProjectContext(Object(je.s)(j.projectKey),j),p&&u.mergeIssueContext({issueId:Object(je.k)(String(p))}),u.mergeIssueContext({viewScreenId:m})})).mergeMap((e=>{const{viewContext:t,uploadContext:s,userAuth:a}=e,i=$r(e,Kr),r=t?xe.Observable.of(yt(t)):On(b,g,h,Rr(m),null==l?void 0:l.issueMediaReadPermission);let o
;return s?null!=s.error?o=Object(nn.b)(new Error(s.error)):null!=s.clientId&&null!=s.serviceHost&&null!=s.token&&null!=s.tokenLifespanInMs&&null!=s.collection&&null!=s.tokenIssueTimestamp&&(o=Object(nn.d)({clientId:s.clientId,serviceHost:s.serviceHost,token:s.token,tokenLifespanInMs:s.tokenLifespanInMs,collection:s.collection,tokenIssueTimestamp:s.tokenIssueTimestamp})):o=Object(nn.c)(),r.map((e=>(n.setEcosystem(i.ecosystem),[e,o,a?ln(a):cn(),Object(V.d)(i)])))})).flatMap((e=>(Object(K.d)(),Object(K.c)(),l&&l.clearAll(),xe.Observable.of(Object(Se.batchActions)(e))))).catch((e=>{const t=Hr(e,f);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(tn.a)("issue.fetch.issue-fetch-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of(Object(V.b)(t))}))})),qr=n("./src/packages/platform/utils/constants/src/fetch-default-options.js"),zr=n("./src/packages/platform/utils/fetch/src/utils.js")
;function Yr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(s),!0).forEach((function(t){Jr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Jr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zr=Qr(Qr({},qr.a),{},{method:"POST"}),Xr=(e,t,s)=>"OUTWARD"===e.direction?{type:{id:e.id},inwardIssue:{key:t},outwardIssue:{key:s}}:{type:{id:e.id},inwardIssue:{key:s},outwardIssue:{key:t}
},eo=e=>201===e.status?Promise.resolve(null):Promise.reject(new zr.a(e.status,`Error server response: ${e.status}`)),to=(e,t,s,n)=>xe.Observable.fromPromise(((e,t)=>fetch(e,Qr(Qr({},Zr),t)).then(eo))(Object(Bn.m)(e),{body:JSON.stringify(Xr(t,s,n))})),so=(e,t,s,n,a)=>{const i=Object(ce.f)(e),r=Object(ce.x)(e);return to(i,n,r,s).map((()=>Object(li.p)(t,a.update({action:"succeeded"})))).catch((e=>(Pe.h.safeErrorWithoutCustomerData("issue.issuelinks.save.linked.issues.epic","Error while adding linked issues",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(li.m)(t,e,null==a?void 0:a.update({action:"failed"}))))))};var no=Object(Ie.combineEpics)(((e,t)=>e.ofType("SAVE_LINKED_ISSUE_RETRY").mergeMap((e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=Object(ks.f)(n)(s),r=i&&i.linkedIssueKey,o=i&&{direction:i.direction,id:i.typeId};return so(s,n,r,o,a)}))),((e,t)=>e.ofType("SAVE_LINKED_ISSUE_REQUEST").mergeMap((e=>{
const s=t.getState(),{optimisticId:n,linkedIssueKey:a,issueLinkType:i}=e.payload.newIssueLinks,{requestAnalyticsEvent:r}=e.payload;return so(s,n,a,i,r)})))),ao=n("./node_modules/lodash/identity.js"),io=n.n(ao),ro=n("./node_modules/lodash/isEqual.js"),oo=n.n(ro);const co=(e,t)=>{const s=document.getElementById("ghx-issue-fragment");window.AJS&&s?window.AJS.$(s).trigger(e,t):fs.a.safeErrorWithoutCustomerData("issue.rapid-board","Could not find container to send event for rapid board",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}))},lo="refresh-sprints-on-board",uo="hide";var po=e=>co(lo,{sprintIds:[e]}),mo=()=>co(uo);const fo=({pathname:e,search:t})=>e+t,bo=(e,t,s,n)=>(a,i)=>{const r={},o=a.ofType("NAVIGATE_TO_NEW_ISSUE").pluck("payload").do((({toIssueKey:e})=>{n.mergeIssueContext({issueKey:Object(je.m)(e)})})).do((({toIssueKey:e})=>{const a=i.getState(),r=Object(ce.b)(a),o=n.getIsLoadedWithPage(),c=s.getRecentIssuesCount(),l=s.getRecentIssue(e);Object(K.a)({
analyticsSource:String(r),isLoadedWithPage:o,isRecentIssue:!!l,recentIssuesCount:c,isSPA:!0,store:i,dataProvider:t}),Object(K.i)()})).do((({fromIssueKey:t,toIssueKey:s})=>{if(e){r[fo(window.location)]=t;const n=((e,t,s)=>{const n=new RegExp(`${t}(?![\\d])`,"g"),a=e.match(n);return null===a||1!==a.length?null:e.replace(t,s)})(fo(window.location),t,s);n&&(r[n]=s,e.push(n))}})),c=e?xe.Observable.create((t=>e.listen(((e,s)=>{t.next({location:e,action:s})})))).filter((({action:e})=>"POP"===e)).filter((()=>!n.getIsSpaEnabled())).map((({location:e})=>r[fo(e)])).filter(io.a).map((e=>({fromIssueKey:Object(ce.x)(i.getState()),toIssueKey:e}))).filter((({fromIssueKey:e,toIssueKey:t})=>e!==t)):xe.Observable.empty();return xe.Observable.merge(o,c).distinctUntilChanged(((e,t)=>oo()(e,t))).flatMap((({toIssueKey:e})=>{Object(Lr.a)(),Object(K.h)();const t=s.getRecentIssue(e);return t?(Object(K.d)(),xe.Observable.of(Object(oi.b)(e,t))):xe.Observable.of(Object(oi.a)(e),Ee(e))
})).takeUntil(a.last().catch((()=>xe.Observable.of(!0)))).catch((e=>fs.a.safeErrorWithoutCustomerData("issue.issue-navigation-epic","Unexpected error in issue-navigation-epic",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))))},go=e=>e.ofType("NAVIGATE_TO_PROJECT").do((e=>{Object(ua.a)(e.payload.projectUrl,!1,e.payload.pushAction)})).ignoreElements(),ho=e=>e.ofType("NAVIGATE_TO_SPRINT").do((e=>{po(e.payload.sprintId),mo()})).ignoreElements();var yo=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visiblity-stream/page-visibility-stream.js"),Oo=n("./src/packages/issue/issue-view/src/common/model/ecosystem-constants.js"),jo=n("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js");const vo=(e,t)=>{const s=t.getState(),{atlassianId:n}=e.payload,a=Object(ee.y)(s),i=!!a&&n!==a.id,r=Object(mt.a)(s),o=Oo.b.includes(null==r?void 0:r.type);return!(Object(Ii.g)(s).length>0||o||!!Object(jo.a)(s))&&i}
;var Eo=Object(Ie.combineEpics)(((e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").filter((()=>Object(Js.a)())).switchMap((e=>vo(e,t)?xe.Observable.of(Object(V.g)()):xe.Observable.empty()))),((e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").bufferToggle(yo.a.filter((e=>!e)),(()=>yo.a.filter((e=>e)))).switchMap((e=>e.some((e=>vo(e,t)))?xe.Observable.of(Object(V.g)()):xe.Observable.empty()))));var wo=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,userPreferenceActions:n,attachmentActions:a,permissionActions:i,issueTabsActions:r,projectContextActions:o,issueContextActions:c})=>(l,d)=>l.ofType("REFRESH_ISSUE_REQUEST").switchMap((()=>{const l=d.getState(),u=Object(ce.f)(l),p=Object(ce.x)(l),m=c.getMaxTokenLength();return xe.Observable.zip(On(u,p,m),Object(ba.a)(l).do((({issue:{fields:l,tabs:d,id:u,viewScreenId:m},myPreferences:f,attachments:b,permissions:g,issueSections:h,project:y})=>{r.setIssueTabs(p,d),Vr(l,e,t,p),s.setIssueViewLayout(p,h),n.setUserPreferences(f),
g&&y&&i.setProjectPermissions(Object(je.s)(y.projectKey),g),b&&a.setTotalCount(p,b.totalCount),b&&"number"==typeof b.deletableCount&&a.setDeletableCount(p,b.deletableCount),b&&a.setVisibleAttachments(p,b.nodes),y&&o.setProjectContext(Object(je.s)(y.projectKey),y),u&&c.mergeIssueContext({issueId:Object(je.k)(String(u))}),c.mergeIssueContext({viewScreenId:m})})).map(V.h)).mergeMap(xe.Observable.from).catch((e=>(Pe.h.safeErrorWithoutCustomerData("issue.fetch.issue-refresh-epic","REFRESH_ISSUE_REQUEST: Failed to refresh issue data",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.empty())))}));const ko=e=>na.a`query {
            issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
                id
                viewScreenId
            }
        }`,Co=(e,t)=>Object(_t.a)((e=>`${e}/rest/graphql/1/`)(e),(e=>({method:"POST",body:JSON.stringify({query:ko(e)})}))(t));var So=(e,t)=>e.ofType("FETCH_SCREENID_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(ce.a)(e),n=Object(ce.f)(e),a=Object(ce.x)(e);return Co(n,a).map(X).catch((e=>{const t=((e,t)=>{let s="UNKNOWN_ERROR";return 401===e?s="AUTHENTICATION_ERROR":403===e||404===e?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",{error:s,statusCode:e}})(e.statusCode,s);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(tn.a)("issue.fetch.issue-screenid-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of((e=>({type:"FETCH_SCREENID_FAILURE",payload:e}))(t))}))})),Io=n("./node_modules/lodash/size.js"),To=n.n(Io);const _o=e=>({type:"SET_ISSUE_TYPES",payload:e})
;var Po=n("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function xo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Do(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(s),!0).forEach((function(t){Ao(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ao(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Mo=new Map;var Lo=(e,t)=>e.ofType("SUBTASK_QUICK_ADD_CLICKED","ISSUE_IN_EPIC_QUICK_ADD_CLICKED","CHILD_ISSUE_QUICK_ADD_CLICKED","CHILD_ISSUE_PANEL_ADD_CLICKED").mergeMap((()=>{
const e=t.getState(),s=Object(ce.B)(e),n=Mo.get(s)||{time:new Date};if(n&&n.data&&new Date-n.time<18e5)return xe.Observable.of(_o(n.data));Mo.set(s,n);const a=Object(ce.f)(e),i=Rr(t);return xe.Observable.concat(xe.Observable.of((()=>({type:"FETCHING_ISSUE_TYPES"}))()),Object(Po.a)(a,s,i).mergeMap((e=>{const t=e&&e.issueTypes;return To()(t)?(Mo.set(s,Do(Do({},n),{},{data:t})),xe.Observable.of(_o(t))):(Mo.delete(s),xe.Observable.of((()=>({type:"FETCH_ISSUE_TYPES_FAILED"}))()))})))})),Ro=n("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js");var No=(e,t)=>Object(_t.a)(Object(Bn.h)(e,t)),Fo=(e,t)=>e.ofType("FETCH_JIRA_APP_LINKS_REQUEST","APPLINK_AUTHENTICATION_SUCCESS").switchMap((()=>{const e=t.getState(),s=Object(ce.f)(e),n=Object(ce.x)(e);return No(s,n).map(Ro.c).catch((e=>(Object(tn.a)("issue.fetch.jira-app-links-epic","FETCH_JIRA_APP_LINKS_REQUEST: Failed to fetch jira app links data",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e
})),xe.Observable.of(Object(Ro.b)()))))})),Uo=n("./src/packages/issue/issue-view/src/actions/login-actions.js"),Vo=(e,t)=>e.ofType("LOGIN").switchMap((()=>{const e=Object(ce.z)(t.getState());if(e){const s=`${Object(ce.f)(t.getState())}/login.jsp?os_destination=${encodeURIComponent(e)}`,n=window.open(s,"_blank");return xe.Observable.fromEvent(window,"message").filter((e=>e.origin===window.location.origin)).filter((e=>e.source===n)).filter((e=>e.data&&"log-in-successful"===e.data.status&&e.data.accountId)).do((e=>e.source.close())).mergeMap((e=>xe.Observable.of(Object(Uo.b)({accountId:e.data.accountId}),Object(V.c)())))}return xe.Observable.empty()}));const Ko=(e,{fieldId:t,commentId:s},n=!1)=>{const a=Object(vs.t)(e).filter((e=>e!==t)),i=Object(ws.u)(e).filter((e=>e!==s)),r=!n&&Object(ws.w)(e);return a.length>0||i.length>0||r?((e,t,s)=>({type:"MULTILINE_FIELD_EDIT_BEGIN",payload:{multilineFieldIdsToClose:e,commentIdsToClose:t,shouldCloseAddCommentForm:s}}))(a,i,r):null}
;var $o=Object(Ie.combineEpics)(((e,t)=>e.ofType("FIELD_EDIT_BEGIN").filter((e=>Object(vs.G)(e.payload.fieldId)(t.getState()))).map((e=>Ko(t.getState(),{fieldId:e.payload.fieldId}))).filter(Boolean)),((e,t)=>e.ofType("EDIT_COMMENT_BEGIN").map((e=>Ko(t.getState(),{commentId:e.payload.id}))).filter(Boolean)),((e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").map((()=>Ko(t.getState(),{},!0))).filter(Boolean)));const Wo=(e,t)=>{const s="NEW_OPTIMISTIC_COMMENT",n=Object(ce.a)(e),a=Object(ce.x)(e),i=Object(wn.a)(s),r=Object(wn.c)(n,a,i);return xe.Observable.of(Object(En.e)(s,r,t?xn.l:null))},Bo=e=>(fs.a.safeErrorWithoutCustomerData("issue.new-comment-load-draft",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.empty());var Ho=Object(Ie.combineEpics)(((e,t)=>e.ofType("SET_CONTEXT").mergeMap((()=>Wo(t.getState(),!1))).catch((e=>Bo(e)))),((e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").mergeMap((()=>Wo(t.getState(),!0))).catch((e=>Bo(e)))))
;const Go=1e3,qo=new xe.Subject;qo.bufferTime(Go,Go,50).subscribe((e=>{Object(M.a)().loadIssues(br()(e))}));const zo=new xe.Subject;zo.bufferTime(Go,Go,50).subscribe((e=>Object(M.a)().loadIssuesById(br()(e))));var Yo=e=>e.ofType("PREFETCH_ISSUES").do((e=>{const{issueKeys:t,issueIds:s}=e.payload;t.forEach((e=>qo.next(e))),s.forEach((e=>zo.next(e)))})).switchMap((()=>xe.Observable.empty())),Qo=e=>(t,s)=>t.ofType("PROJECT_ISSUE_TYPES_REQUEST").mergeMap((t=>{const n=Object(ce.f)(s.getState()),a=t.payload;return((e,t)=>{const s=`${e}/rest/api/3/project/${t}`;return Object(_t.a)(s).map(ma)})(n,a).do((t=>e.mergeProjectProperty(a,{issueTypes:t}))).map((e=>Object(pa.c)(e))).catch((e=>(Pe.h.safeErrorWithoutCustomerData("change.issue.type.fetchtypes",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Object(pa.a)(e)))))}));const Jo=Object(Pe.i)("true","false");var Zo=(e,t)=>e.ofType("FETCH_PROJECT_HAS_SUBTASK_VALIDATORS").switchMap((()=>{
const e=t.getState();return((e,t)=>Object(_t.a)(((e,t)=>`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`)(e,t)))(Object(ce.f)(e),Object(ce.B)(e)).do((e=>{Object(Pe.l)("project-validators.projectHasSubtaskValidators.result",{result:Jo(e)})})).map((e=>(e=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS",payload:e}))(e))).catch((()=>xe.Observable.of((()=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE"}))())))}));var Xo=(e,t)=>e.ofType("SET_CONTEXT").scan((({issueKey:e},t)=>({issueKey:t.payload.issueKey,loggedInAccountId:t.payload.atlassianAccountId,previousIssueKey:e})),{issueKey:null,previousIssueKey:null,loggedInAccountId:null}).filter((({loggedInAccountId:e})=>null!==e)).filter((({issueKey:e,previousIssueKey:t})=>e!==t)).map((({issueKey:e})=>e)).delay(3e3).switchMap((e=>{const s=t.getState(),n=`${Object(ce.f)(s)}/rest/internal/2/issue/${e}/history`;return Object(_t.a)(n,{method:"POST"
}).catch((e=>((e=>404===e.statusCode)(e)||Object(tn.a)("issue.recently-viewed-issue-epic","Client network error occurred when fetching user issue history",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.empty()))).ignoreElements()}));function ec(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(s),!0).forEach((function(t){sc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ec(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const nc=e=>{
const{applicationType:t,applicationName:s,issueLinkUrl:n,relationship:a,summary:i,iconUrl:r,issueKey:o,createReciprocalLink:c}=e;return tc({application:{name:s,type:t},relationship:a,object:{summary:i,icon:{url16x16:r},title:o,url:n},createReciprocalLink:c},"WITH_ISSUE_ID"===e.payloadType?{globalId:e.globalId}:{appLinkId:e.appLinkId})},ac=tc(tc({},qr.a),{},{method:"POST"});function ic(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function rc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ic(Object(s),!0).forEach((function(t){oc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ic(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function oc(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const cc=(e,t,s)=>((e,t,s)=>Object(_t.a)(Object(Bn.n)(e,t),tc(tc({},ac),{},{body:JSON.stringify(nc(s))})))(Object(ce.f)(e),Object(ce.x)(e),t).map((e=>{var n;return Object(pi.h)(t.id,e,s.update({action:"succeeded",isReciprocalLinkCreated:"CREATED"===(null===(n=e.reciprocalLink)||void 0===n?void 0:n.status)}))})).catch((e=>xe.Observable.of(Object(pi.e)(t.id,t.issueKey,e,s.update({action:"failed",isReciprocalLinkCreated:!1}))))),lc=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),{saveRemoteIssueLinkPayload:n,requestAnalyticsEvent:a}=e.payload;return cc(s,n,a)})),dc=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_RETRY").mergeMap((e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=((e,t)=>{const s=Object(ks.k)(e).find((e=>e.id===t))
;if(!s||void 0===s.applicationName||void 0===s.applicationType||void 0===s.iconUrl||void 0===s.relationship||void 0===s.summary)return;const n={id:s.id,applicationType:s.applicationType,applicationName:s.applicationName,issueLinkUrl:s.issueLinkUrl,relationship:s.relationship,summary:s.summary,iconUrl:s.iconUrl,issueKey:s.issueKey,createReciprocalLink:Boolean(s.createReciprocalLink)};if(void 0===s.globalId){if(void 0===s.appLinkId)return;return rc(rc({},n),{},{appLinkId:s.appLinkId,payloadType:"WITHOUT_ISSUE_ID"})}return rc(rc({},n),{},{globalId:s.globalId,remoteIssueId:s.remoteIssueId,payloadType:"WITH_ISSUE_ID"})})(s,n);return i?cc(s,i,a.update({withReciprocalLink:Boolean(i.createReciprocalLink)})):xe.Observable.empty()})),uc=e=>{switch(e){case"portal":return"portal";case"email":return"email";case"api":return"api";case"jira":return"jira";case"deployment":return"deployment";case"anonymousportal":return"anonymousportal";default:return"unknown"}},pc=e=>xe.Observable.of((e=>({
type:"REQUEST_PANEL_METADATA_FETCH_SUCCESS",payload:{channel:uc(e.channel),requestUrl:e.requestUrl,csatComment:e.csatComment}}))(e)),mc=e=>(Pe.h.safeErrorWithoutCustomerData("issue.request-panel-metadata.fetch",JSON.stringify(e),new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:new Error(JSON.stringify(e))})),xe.Observable.of((()=>({type:"REQUEST_PANEL_METADATA_FETCH_FAILURE"}))()));var fc=(e,t)=>e.ofType("FETCH_REQUEST_PANEL_METADATA").flatMap((()=>(e=>Object(_t.a)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-panel-metadata`)(Object(ce.f)(e),Object(ce.x)(e))))(t.getState()).flatMap((e=>e.errors?mc(e):pc(e))).catch((e=>mc(e))))),bc=(e,t)=>e.ofType("SHARE_AS_COMMENT").switchMap((()=>{const e=t.getState();return Object(ws.w)(e)?xe.Observable.empty():xe.Observable.of(Object(xn.c)(),Object(xn.d)("NEW_OPTIMISTIC_COMMENT",!1))}));var gc=(e,t)=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(ce.a)(e)
;if(!s)return xe.Observable.empty();const n=((e,t)=>`${e}/rest/api/2/user?accountId=${encodeURIComponent(t)}${Object($.isUseAppPermissionsFromTenantContextEnabled)()?"":"&expand=applicationRoles"}`)(Object(ce.f)(e),s);return Object(_t.a)(n).map(gr.d).map((e=>{const t=Object(gr.c)(e),s=Object(gr.a)(e);return ke(t,s)})).catch((e=>(Object(tn.a)("issue.fetch.user-fetch-epic","FETCH_LOGGED_IN_USER_REQUEST: Failed to fetch logged in user details",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),xe.Observable.of((()=>({type:"FETCH_LOGGED_IN_USER_FAILURE"}))()))))})),hc=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-meta.js");const yc="issue.fetch.user-fetch-timing-epic";var Oc=()=>Object($.isUseAppPermissionsFromTenantContextEnabled)()?()=>xe.Observable.empty():Object($.isItSafeLoggingEnabledToUseAppPermissionsFromTenantContext)()?e=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap((()=>{
const e=["ajs-has-jira-software","ajs-has-jira-service-desk","ajs-has-jira-core"].filter((e=>null==Object(hc.a)(e)));return e.length&&Pe.h.safeWarnWithoutCustomerData(yc,`Missing some product access meta tags: ${e.toString()}`),xe.Observable.empty()})):(()=>{let e=null,t=null;return(s,n)=>s.pipe(ys("FETCH_LOGGED_IN_USER_SUCCESS","FETCH_ISSUE_SUCCESS"),Object(ms.mergeMap)((s=>{switch(s.type){case"FETCH_LOGGED_IN_USER_SUCCESS":if(e&&!t){const t=n.getState();"service_desk"===Object(ee.F)(t)&&Pe.h.safeWarnWithoutCustomerData(yc,`Issue data loaded before user data loaded. By [${Date.now()-e}]ms`)}t=Date.now();break;case"FETCH_ISSUE_SUCCESS":e=Date.now()}return xe.Observable.empty()})))})(),jc=n("./src/packages/issue/issue-view/src/actions/web-links-actions.js"),vc=n("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const Ec=(e,t,s)=>({object:{icon:{url16x16:s},title:e,url:t}
}),wc=({baseUrl:e,issueId:t,href:s,linkText:n,iconUrl:a})=>Object(st.d)(`${((e,t)=>`${e}/rest/api/3/issue/${t}/remotelink`)(e,t)}`,{body:JSON.stringify(Ec(n,s,a))}).then((e=>((e,t,s,n)=>({id:Object(je.w)(e.id),href:t,linkText:s,iconUrl:n,resolved:null,relationship:null,applicationName:null,applicationType:null}))(e,s,n,a))),kc="issue.fetch.web-links-epic",Cc=(e,t,s)=>{const n=e.message;Object(tn.a)(s,t,e,{errorReason:n})},Sc=(e,t,s,n,a)=>{if(void 0===s||void 0===n){const e=void 0===s?"No issueId when creating weblink":"Broken weblink state when creating weblink";return Pe.h.safeErrorWithoutCustomerData(kc,a,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),xe.Observable.empty()}const{href:i,linkText:r,iconUrl:o}=n,c=null==o?"":o;return xe.Observable.from(wc({baseUrl:t,href:i,issueId:Object(je.k)(s.toString()),linkText:null==r?i:r,iconUrl:Object(je.j)(c)})).map((e=>Object(jc.e)(n.id,e))).catch((e=>(Cc(e,`${a}: Failed to create web link`,kc),
xe.Observable.of(Object(jc.b)(n.id)))))},Ic=(e,t)=>e.ofType("DELETE_WEB_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=Object(ce.x)(s),{id:i}=e.payload;return xe.Observable.fromPromise(((e,t,s)=>Object(st.a)(`${e}/rest/api/3/issue/${t}/remotelink/${s}`))(n,a,i)).map((()=>Object(jc.i)(i))).catch((e=>(Cc(e,"DELETE_WEB_LINK_REQUEST: Failed to delete web link",kc),xe.Observable.of(Object(jc.g)(i)))))})),Tc=(e,t)=>e.ofType("CREATE_WEB_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=Object(ce.w)(s),{optimisticId:i}=e.payload,r=Object(vc.e)(i)(s);return Sc(0,n,a,r,"CREATE_WEB_LINK_REQUEST")})),_c=(e,t)=>e.ofType("CREATE_WEB_LINK_RETRY").switchMap((e=>{const s=t.getState(),n=Object(ce.f)(s),a=Object(ce.w)(s),{optimisticId:i}=e.payload,r=Object(vc.e)(i)(s);return Sc(0,n,a,r,"CREATE_WEB_LINK_RETRY")}))
;var Pc=e=>e.ofType("state.EDIT_WORKLOG_SUCCESS","state.ADD_WORKLOG_SUCCESS").filter((e=>e.meta.shouldFetchViewContext)).mapTo(ht()),xc=n("./src/packages/issue/issue-view/src/common/model/linked-issue-type.js"),Dc=n("./src/packages/issue/issue-view/src/model/change-type.js"),Ac=n("./node_modules/lodash/forEach.js"),Mc=n.n(Ac);const Lc=["FIELD_SAVE_SUCCESS","SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS","ISSUE_RELATIONSHIP_UPDATE_SUCCESS","FIELD_SAVE_REQUEST","FIELD_SAVE_FAILURE","FIELD_UPDATED","FIELD_CONFIRM_NEW_FIELD","FIELD_CONFIRM_FAILURE_NEW_FIELD","FETCH_LINKED_ISSUES_DATA_SUCCESS","DELETE_LINKED_ISSUE_SUCCESS","CHILD_ISSUE_ADD_SUCCESS","ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS"];var Rc=e=>(t,s)=>t.ofType(...Lc).do((t=>{if(e)try{const n=Object(je.k)(String(Object(ce.w)(s.getState())));switch(t.type){case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":{const{payload:{fieldId:s,targetTypeName:a}}=t;e({issueId:n,type:Dc.a.ISSUE_TYPE_CHANGED,fieldId:s,meta:{typeName:a}});break}case"FIELD_UPDATED":
{const{payload:{fieldId:s,fieldValue:a}}=t;e({issueId:n,type:Dc.a.FIELD_CHANGED,fieldId:s,meta:{fieldId:s,fieldValue:a}});break}case"ISSUE_RELATIONSHIP_UPDATE_SUCCESS":{const{payload:{oldParentIdsByIssueIds:s,parentIssueId:a}}=t;e({issueId:n,type:Dc.a.ISSUE_RELATIONSHIP_UPDATED,meta:{newParentIssueId:a,oldParentIssueId:s[n]||null}});break}case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const s=((e,t)=>{const{payload:{optimisticLinks:s,issueLinks:n}}=t,a=[];return Mc()(s,(e=>{const t=n.linkedIssues[e.linkedIssueKey];t&&a.push({linkedIssueId:Object(je.k)(t.id),direction:e.direction})})),a})(0,t);s.length&&e({issueId:n,type:Dc.a.ISSUE_LINKS_CREATED,meta:{links:s}});break}case"DELETE_LINKED_ISSUE_SUCCESS":{const{meta:{issueId:s,direction:a}}=t;e({issueId:n,type:Dc.a.ISSUE_LINK_DELETED,meta:{linkedIssueId:s,direction:Object(xc.b)(a)}});break}case"CHILD_ISSUE_ADD_SUCCESS":{const{issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r,issueTypeName:o}=t.payload.childIssue;e({issueId:n,
type:Dc.a.CHILD_ISSUE_ADDED,meta:{childIssue:{id:Object(je.k)(t.payload.childIssue.id),issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r||void 0,issueTypeName:o||void 0}}});break}case"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS":e({issueId:n,type:Dc.a.ISSUE_CHILDREN_ORDER_CHANGED,meta:t.payload});break;case"FIELD_SAVE_REQUEST":{const{payload:{fieldId:s,value:a}}=t;e({issueId:n,type:Dc.a.FIELD_CHANGE_REQUESTED,meta:{fieldId:s,fieldValue:a}});break}case"FIELD_SAVE_FAILURE":{const{payload:{fieldId:s}}=t;e({issueId:n,type:Dc.a.FIELD_CHANGE_FAILED,meta:{fieldId:s}});break}case"FIELD_CONFIRM_NEW_FIELD":{const{payload:{fieldId:s,fieldValue:a}}=t;e({issueId:n,type:Dc.a.FIELD_CHANGE_REQUESTED,meta:{fieldId:s,fieldValue:a}});break}case"FIELD_CONFIRM_FAILURE_NEW_FIELD":{const{payload:{fieldId:s}}=t;e({issueId:n,type:Dc.a.FIELD_CHANGE_FAILED,meta:{fieldId:s}});break}}}catch(n){Pe.h.safeErrorWithoutCustomerData("issue.issue-field.ops.change-notification","Failed to call onChange callback",new pt.a({
eventNameSuffix:"issue.error",type:"js",app:"issue",event:n}))}})).ignoreElements();const Nc=e=>({type:"FIELD_LOAD_DRAFT_FAILURE",payload:e});var Fc=e=>e.ofType("FIELD_SAVE_SUCCESS").mergeMap((e=>(e=>{const{payload:{fieldId:t}}=e;return xe.Observable.of(Object(En.b)({fieldId:t}))})(e))).catch((e=>(e=>(Object(tn.a)("issue.delete-draft-request","Could not send request to delete field draft from local storage",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of((e=>({type:"FIELD_DELETE_DRAFT_FAILURE",payload:e}))(e))))(e))),Uc=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js");var Vc=(e,t)=>e.ofType("FIELD_EDIT_BEGIN").mergeMap((e=>xe.Observable.merge(...((e,t)=>{const s=Object(vs.J)(t);if(-1!==s.indexOf(e.payload.fieldId)){const n=Object(ce.a)(t),a=Object(ce.x)(t);return s.map((s=>{const i=Object(vs.o)(s)(t),r=Object(wn.c)(n,a,s);return xe.Observable.of(Object(En.e)(s,r,s!==e.payload.fieldId?null:Uc.e,i))}))}
return[]})(e,t.getState())))).catch((e=>(e=>(Object(tn.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of(Nc(e))))(e)));var Kc=e=>e.ofType("FIELD_INIT_OPTIONS","FIELD_EDIT_REQUEST_EXTERNAL").groupBy((e=>e.payload.fieldId)).mergeMap((e=>{const t=e.filter((e=>"FIELD_EDIT_REQUEST_EXTERNAL"===e.type)),s=e.filter((e=>"FIELD_INIT_OPTIONS"===e.type)),n=t.takeUntil(s).takeLast(1).merge(s.take(1)).pairwise(),a=t.withLatestFrom(s);return xe.Observable.merge(n,a).map((([e,t])=>{const{fieldId:s,fieldOptions:n}=t.payload;return Object(Uc.b)(s,n)}))})),$c=n("./src/packages/issue/issue-view/src/common/constants/flags.js"),Wc=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),Bc=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js");function Hc(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hc(Object(s),!0).forEach((function(t){qc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var zc=(e,t)=>{const s=e.ofType("ASSIGN_TO_ME_EXTERNAL"),n=e.ofType("FIELD_INIT_OPTIONS").filter((e=>"assignee"===e.payload.fieldId));return s.filter((()=>{const e=t.getState();return Object(ee.y)(e)&&Object(Wc.d)(e)})).withLatestFrom(n,((e,{payload:{fieldOptions:s}})=>{const n=t.getState(),a=Object(ee.y)(n)
;return a?Object(Bc.d)("assignee",(({avatarUrl:e,displayName:t,id:s})=>({avatarUrls:{"48x48":e},displayName:t,accountId:s}))(a),Gc(Gc({},s),{},{onSaveSuccessFlagType:$c.c})):null}))},Yc=Object(Ie.combineEpics)(Kc,zc);var Qc=(e,t)=>e.pipe(ys("FETCH_ISSUE_SUCCESS"),Object(ms.mergeMap)((e=>xe.Observable.merge(...((e,t)=>{const s=Object(ce.a)(t),n=Object(ce.x)(t);return Object(vs.J)(t).map((e=>{const a=Object(vs.h)(e)(t),i=Object(wn.c)(s,n,e);return xe.Observable.of(Object(En.e)(e,i,null,a))}))})(0,t.getState())))),Object(ms.catchError)((e=>(e=>(Object(tn.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,{}),xe.Observable.of(Nc(e))))(e))));var Jc=e=>e.ofType("FIELD_SAVE_SUCCESS").filter((e=>e.payload.fieldOptions.canContainMediaContent&&e.meta.shouldFetchViewContext)).mapTo(ht());var Zc=(e,t)=>e.ofType("FIELD_EDIT_UPDATE").mergeMap((e=>((e,t)=>{const{payload:{fieldId:s,fieldOptions:n,value:a}}=e
;if(!n||!n.shouldSaveDraft)return xe.Observable.empty();const i=Object(vs.n)(s)(t);return xe.Observable.of(Object(En.h)(s,a,i))})(e,t.getState()))).catch((e=>(e=>(Object(tn.a)("issue.save-draft","Could not send request to save field draft to local storage",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),xe.Observable.of((e=>({type:"FIELD_SAVE_DRAFT_FAILURE",payload:e}))(e))))(e))),Xc=n("./node_modules/lodash/pickBy.js"),el=n.n(Xc),tl=n("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js");function sl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const al=e=>e&&e.id,il=e=>e instanceof Me.a?e.errors&&e.errors.length>0?e.errors[0].error:e.message:null,rl=(e,t)=>Object(ba.c)(e,t).map(V.h),ol=(e,t,s,n,a,i,r)=>{const o=Object(ce.f)(e),c=Object(ce.x)(e),l=Object(vs.l)(t)(e),d=Object(vs.r)(t)(e),u=Object(vs.f)(t)(e),p=Object(vs.q)(t)(e),m=Object(tl.c)(p)?s:((e,t)=>{var s;switch(e){case"option2":return null!==(s=null==t?void 0:t.id)&&void 0!==s?s:null;case"array":return t.map((e=>e.id));default:return t}})(d,s);i.setFieldValue(c,t,m);return xe.Observable.fromPromise(n.saveField(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(s),!0).forEach((function(t){nl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({baseUrl:o,issueKey:c,fieldId:t,fieldMetaKey:l,value:m,saveFieldData:a},u?{fieldEditSessionId:u
}:null),e)).flatMap((e=>{const{updatedFieldValue:s}=e||{};let a=m;return e&&void 0!==s&&(i.setFieldValue(c,t,s),a=s),[Object(Bc.e)(t,n,a,e,{issueKey:c,shouldFetchViewContext:r}),Object(Bc.h)(t,a)]}))},cl=e=>(t,s)=>t.ofType("FIELD_SAVE_REQUEST").groupBy((e=>e.payload.fieldId)).mergeMap((t=>t.switchMap((t=>{const n=s.getState(),a=Object(ce.x)(n),{fieldId:i,value:r,fieldOptions:o,saveFieldData:c,shouldFetchViewContext:l}=t.payload,d=o.isOptimistic?ol(n,i,r,o,c,e,l):((e,t,s,n,a,i,r)=>ol(e,t,s,n,a,i,r).mergeMap((t=>rl(e).mergeMap((e=>xe.Observable.of(e,t))))))(n,i,r,o,c,e,l),u=Object(vs.o)(i)(n);return d.catch((t=>{const s=il(t);return e.setFieldValue(a,i,u),xe.Observable.of(Object(Bc.c)(i,s,t,o))}))})))),ll=["status","timeoriginalestimate"],dl=(e,t,s)=>(n,a)=>n.ofType("FIELD_UPDATED").filter((e=>ll.includes(e.payload.fieldId))).switchMap((n=>((e,t,s,n,a)=>Object(ba.c)(e,t).do((t=>{const{fields:i}=t.issue,r=Object(ce.x)(e);return Vr(i,s,n,r),a.setTransitionInProgress(!1),t
})).map(V.h))(a.getState(),(e=>{const{fieldId:t,extraParams:s}=e.payload;if("status"===t)return{shouldRefreshComments:s&&s.viaDialog}})(n),e,t,s))),ul=(e,t)=>e.ofType($c.H,"ZERO_APPROVAL_REQUIRED").switchMap((()=>rl(t.getState())));var pl=(e,t,s)=>Object(Ie.combineEpics)((e=>(t,s)=>t.ofType("FIELD_EDIT_CONFIRM").map((t=>{const n=s.getState(),{fieldId:a,fieldOptions:i,saveFieldData:r,analyticsEvent:o,analyticsAttributeIdRetriever:c=al}=t.payload,l=Object(ce.x)(n),d=Object(vs.h)(a)(n),u=e.getFieldValue(l,a);if(oo()(d,u))return Object(Uc.c)(a,i);let p=!1;if(i.isRichTextField&&i.canContainMediaContent){const e=Object(vs.q)(a)(n),t=e&&e.adfValue;p=Object(Re.e)(t,d),p&&s.dispatch(jt())}const m=el()({updatedField:a,oldValId:c(u),newValId:c(d)},(e=>null!=e));return Object(Bc.d)(a,d,i,r,o,m,p)})))(e),cl(e),(()=>(e,t)=>e.ofType("FIELD_UPDATE").groupBy((e=>e.payload.fieldId)).mergeMap((e=>e.switchMap((e=>{const s=t.getState(),{fieldId:n,fieldValue:a,fieldOptions:i}=e.payload
;return(i.isOptimistic?xe.Observable.of(Object(Bc.h)(n,a)):rl(s).mergeMap((e=>xe.Observable.of(e,Object(Bc.h)(n,a))))).catch((e=>{const t=il(e);return xe.Observable.of(Object(Bc.c)(n,t,e,i))}))})))))(),dl(e,t,s),ul),ml=(e,t)=>e.ofType("FIELD_EDIT_BEGIN","FIELD_PASTE","FIELD_SAVE_SUCCESS").groupBy((e=>e.payload.fieldId)).map((e=>{const s=e.filter((({type:e})=>"FIELD_EDIT_BEGIN"===e));return e.window(s).map((e=>{const s=e.filter((({type:e})=>"FIELD_SAVE_SUCCESS"===e)),n=e.filter((({type:e})=>"FIELD_PASTE"===e)).takeUntil(s).reduce(((e,t)=>[...e,t.payload.pastedContent]),[]);return s.withLatestFrom(n).mergeMap((([e,s])=>{const{fieldId:n,fieldOptions:a}=e.payload,i=Object(vs.o)(n)(t.getState());return 0===s.length?xe.Observable.empty():xe.Observable.of(Object(Bc.f)(n,a,i,s))}))})).mergeAll()})).mergeAll();const fl=()=>[Sn,Pn,Tn,Zc,Fc,Qc,Vc,_a,Ra,Fa],bl=()=>[ci];let gl=bl;gl=(e,t,s,n,a,i,r,o,c,l,d,u,p,m,f,b,g,h,y,O)=>[ci,Qs,Gr({fieldValueActions:a,fieldConfigActions:i,
issueViewLayoutActions:r,ecosystemActions:c,userPreferenceActions:u,issueTabsActions:b,permissionActions:f,attachmentActions:l,prefetchedResourceManager:p,jiraSettingsActions:g,projectContextActions:h,issueContextActions:y}),wo({fieldValueActions:a,fieldConfigActions:i,issueViewLayoutActions:r,userPreferenceActions:u,permissionActions:f,issueTabsActions:b,attachmentActions:l,projectContextActions:h,issueContextActions:y}),Pr(p,o),sr,Vn,gc,Oc(),pl(a,i,O),Vo,Ga,Da(l),Aa.d,Aa.e,Aa.f,Dn,Object(Aa.c)(m),bc,vr,Jn,jn(ce.f,ce.x,l,y),sa,Na,Jc,ui,no,mr,ta,...fl(),Rc(e),Ho,Xi,la,da,bo(n,s,d,y),go,ho,xr(s),Mr,Yc,nr(t),qa,ml,Zo,Xo,ja,Qo(h),ha,fc,Fo,Qa,ri,Eo,ps(l,m),Pc,dr,$o,Lo,So,Ic,Tc,_c,Yo,bi,lc,dc,Nn,Ia(a,i)];var hl=(e,t,s,n,a,i,r,o,c,l,d,u,p,m,f,b,g,h,y,O)=>Object(Ie.combineEpics)(...((e,t,s,n,a,i,r,o,c,l,d,u,p,m,f,b,g,h,y,O)=>gl(e,t,s,n,a,i,r,o,c,l,d,u,p,m,f,b,g,h,y,O))(e,t,s,n,a,i,r,o,c,l,d,u,p,m,f,b,g,h,y,O));function yl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ol(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(s),!0).forEach((function(t){jl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vl={server:{}};var El=(e=vl,t)=>{const{type:s,payload:n}=t;switch(s){case"SAVE_SERVER_TIME":return n.serverTime?Ol(Ol({},e),{},{server:Ol(Ol({},e.server),{},{[n.key]:n.serverTime})}):e;default:return e}};var wl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_UPLOAD_CONTEXT_SUCCESS":return n;case"FETCH_UPLOAD_CONTEXT_FAILURE":return null;default:
return e}};var kl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_USER_AUTH_SUCCESS":return n;case"FETCH_USER_AUTH_FAILURE":return null;default:return e}};function Cl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Sl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(s),!0).forEach((function(t){Il(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Il(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Tl="FETCH_ERROR",_l={clientId:Tl,serviceHost:Tl,tokenLifespanInMs:0,tokenIssueTimestamp:0,token:null,
areTokenPermissionsUpToDate:!1,collection:null};var Pl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_VIEW_CONTEXT_FAILURE":return _l;case"FETCH_VIEW_CONTEXT_SUCCESS":return n;case"MARK_TOKEN_AS_OUTDATED":return Sl(Sl({},e),{},{areTokenPermissionsUpToDate:!1});case"MARK_TOKEN_AS_UP_TO_DATE":return Sl(Sl({},e),{},{areTokenPermissionsUpToDate:!0});default:return e}},xl=n("./node_modules/lodash/mapValues.js"),Dl=n.n(xl),Al=n("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js"),Ml=n("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js");function Ll(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Rl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(s),!0).forEach((function(t){Nl(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ll(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Nl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Fl={},Ul=(e,t,s,n=[])=>{const a=Rl(Rl({},e),{},{[t]:Rl(Rl({},e[t]),s)});return n.forEach((e=>{delete a[t][e]})),a};var Vl=(e=Fl,t)=>{switch(t.type){case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const{fields:s}=t.payload.issue;return Dl()(s,(t=>Rl(Rl({},t),{},{editingValue:e[t.key]&&e[t.key].editingValue,pendingValue:e[t.key]&&e[t.key].pendingValue})))}case"PREVIEW_DATA_FETCHED":{const s=Object(Ml.a)(t.payload);return Object(Os.merge)(e,s)}case"FIELD_EDIT_BEGIN":{const{fieldId:s,fieldOptions:{isRichTextField:n},fieldEditSessionId:a}=t.payload;if(Object($.is2afErrorCleanupGroup2Enabled)()&&!e[s])return e
;const i=n?Object(Al.b)(e[s]):Object(Al.a)(e[s]);return Ul(e,s,Rl({editingValue:i},a?{fieldEditSessionId:a}:null),["invalidMessage","isInvalid"])}case"MULTILINE_FIELD_EDIT_BEGIN":{const{multilineFieldIdsToClose:s}=t.payload;if(null!=s){const t=s.reduce(((t,s)=>Rl(Rl({},t),{},{[s]:Rl(Rl({},e[s]),{},{editingValue:void 0})})),{});return Rl(Rl({},e),t)}return e}case"FIELD_EDIT_UPDATE":{const{fieldId:s,value:n}=t.payload;return Ul(e,s,{editingValue:n},["invalidMessage","isInvalid"])}case"FIELD_SAVE_REQUEST":{const{fieldId:s,value:n}=t.payload;return Ul(e,s,{pendingValue:n},["editingValue"])}case"FIELD_EDIT_CANCEL":{const{fieldId:s}=t.payload;return Ul(e,s,{},["editingValue","invalidMessage","isInvalid","fieldEditSessionId"])}case"FIELD_SAVE_SUCCESS":{const{fieldId:s,fieldOptions:n,saveFieldResult:a}=t.payload;if(!(s in e))return e;const{pendingValue:i}=e[s];let r=Ul(e,s,{},["pendingValue","fieldEditSessionId"]);if(n.isOptimistic)if(n.isRichTextField)r=Ul(r,s,{adfValue:i});else{
const{updatedFieldValue:e}=a||{};r=Ul(r,s,{value:void 0!==e?e:i})}return r}case"FIELD_UPDATE":{const{fieldId:s,fieldValue:n}=t.payload;return Object.prototype.hasOwnProperty.call(e,s)?Ul(e,s,{value:n},["pendingValue","editingValue","fieldEditSessionId"]):e}case"FIELD_SAVE_FAILURE":{const{fieldId:s,invalidMessage:n,fieldOptions:a}=t.payload,{pendingValue:i}=e[s],r=a.shouldDiscardChangeOnFailure?["editingValue"]:[];return Ul(e,s,{editingValue:i,isInvalid:!0,invalidMessage:n},["pendingValue","fieldEditSessionId",...r])}case"FIELD_ADD_ALLOWED_VALUES":{const{allowedValues:s,fieldId:n}=t.payload,a=e[n]&&e[n].allowedValues||[];return Ul(e,n,{allowedValues:[...a,...s]})}case"state.UPDATE_TIME_REMAINING_SUCCESS":{const{timeRemaining:s}=t.payload;return Rl(Rl({},e),{},{timetracking:Rl(Rl({},e.timetracking),{},{value:Rl(Rl({},e.timetracking.value),{},{remainingEstimateSeconds:s})})})}case"state.ADD_WORKLOG_SUCCESS":{const{timeTracking:s}=t.payload;return Ul(e,"timetracking",{value:s})}
case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":{const{timeSpentSecondsDelta:s,newRemainingEstimateSeconds:n}=t.payload.timeTrackingDeltas,a=e.timetracking.value,i=Rl(Rl({},a),{},{timeSpentSeconds:(a.timeSpentSeconds||0)+s});return null!==n&&(i.remainingEstimateSeconds=n),Ul(e,"timetracking",{value:i})}case"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD":{const{linkedUserPickerFieldId:s,newApproverList:n}=t.payload;return s&&e[s]?Ul(e,s,{value:n}):e}default:return e}};function Kl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Kl(Object(s),!0).forEach((function(t){Wl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Kl(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Wl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Bl={selectedActivityItem:null,selectedActivitySortOrder:"NEWEST_FIRST"};var Hl=(e=Bl,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":return $l($l({},e),{},{selectedActivitySortOrder:t.payload.activitySortOrder});case"SELECT_INITIAL_ACTIVITY_ITEM":case"SELECT_ACTIVITY_ITEM":return $l($l({},e),{},{selectedActivityItem:t.payload});case"SELECT_ACTIVITY_SORT_ORDER":return $l($l({},e),{},{selectedActivitySortOrder:t.payload});case"FETCH_ISSUE_SUCCESS":return $l($l({},e),{},{selectedActivitySortOrder:t.payload.activitySortOrder});default:return e}};function Gl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ql(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zl={epic:void 0};var Yl=(e=zl,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gl(Object(s),!0).forEach((function(t){ql(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t.payload.issue.agile);default:return e}};function Ql(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Jl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ql(Object(s),!0).forEach((function(t){Zl(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ql(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xl={isOpen:!1};var ed=(e=Xl,t)=>{switch(t.type){case"SHOW_ASSIGN_ISSUE_PARENT_MODAL":return Jl(Jl({},e),{},{isOpen:!0});case"HIDE_ASSIGN_ISSUE_PARENT_MODAL":return Jl(Jl({},e),{},{isOpen:!1});default:return e}};function td(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?td(Object(s),!0).forEach((function(t){nd(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):td(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ad={isPopupOpen:!1,attachments:{},placeholderAttachmentCount:0},id=(e,{id:t,mediaApiFileId:s})=>{const n=[t,s],a=Object.keys(e.attachments).filter((e=>!n.includes(e))).reduce(((t,s)=>sd(sd({},t),{},{[s]:e.attachments[s]})),{});return sd(sd({},e),{},{attachments:a})};var rd=(e=ad,t)=>{switch(t.type){case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN":{const s=t.payload;return sd(sd({},e),{},{attachments:sd(sd({},e.attachments),{},{[s.id]:s})})}case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END":return e;case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":{const{fileId:s}=t.payload;if(null==s)return e
;const n=Object.keys(e.attachments).filter((e=>e!==s)).reduce(((t,s)=>sd(sd({},t),{},{attachments:sd(sd({},t.attachments),{},{[s]:e.attachments[s]})})),{});return sd(sd({},e),{},{attachments:n})}case"ATTACHMENT_JIRA_CREATE_SUCCESS":return id(e,t.payload);case"ATTACHMENT_JIRA_CREATE_FAILURE":return id(e,t.payload.attachment);case"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS":return sd(sd({},e),{},{isPopupOpen:!0});case"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS":return sd(sd({},e),{},{isPopupOpen:!1});case"ATTACHMENT_PANEL_DRAG_ENTER":return sd(sd({},e),{},{placeholderAttachmentCount:t.payload});case"ATTACHMENT_PANEL_DRAG_LEAVE":case"ATTACHMENT_PANEL_DROP":return sd(sd({},e),{},{placeholderAttachmentCount:0});default:return e}};function od(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cd(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?od(Object(s),!0).forEach((function(t){ld(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):od(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ld(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const dd={isBannerVisible:!1,isBannerDismissed:!1,isTourActive:!1};var ud=(e=dd,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.myPreferences&&t.payload.myPreferences["jira.user.issue.changeboarding.lastinteracted"];return void 0!==s?cd(cd({},e),{},{isBannerVisible:null===s}):e}case"CHANGEBOARDING_BANNER_DISMISS":return cd(cd({},e),{},{isBannerVisible:!1,isBannerDismissed:!0});case"CHANGEBOARDING_TOUR_BEGIN":return cd(cd({},e),{},{isBannerVisible:!1,isTourActive:!0});case"CHANGEBOARDING_TOUR_END":return cd(cd({},e),{},{
isTourActive:!1});default:return e}};function pd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function md(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pd(Object(s),!0).forEach((function(t){fd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bd={subtaskQuickAddClickCount:0,issueInEpicQuickAddClickCount:0,childIssueQuickAddClickCount:0};var gd=(e=bd,t)=>{switch(t.type){case"SUBTASK_QUICK_ADD_CLICKED":return md(md({},e),{},{subtaskQuickAddClickCount:e.subtaskQuickAddClickCount+1})
;case"ISSUE_IN_EPIC_QUICK_ADD_CLICKED":return md(md({},e),{},{issueInEpicQuickAddClickCount:e.issueInEpicQuickAddClickCount+1});case"CHILD_ISSUE_QUICK_ADD_CLICKED":return md(md({},e),{},{childIssueQuickAddClickCount:e.childIssueQuickAddClickCount+1});default:return e}};const hd={isOpen:!1};var yd=(e=hd,t)=>{const{type:s}=t;switch(s){case"SHOW_CLONE_MODAL":return{isOpen:!0};case"HIDE_CLONE_MODAL":return{isOpen:!1};default:return e}},Od=n("./src/packages/common-legacy-do-not-add-anything-new/src/icepick/unset-in.js");function jd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jd(Object(s),!0).forEach((function(t){Ed(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ed(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const wd=Object(Os.freeze)({pendingSavedValues:{},pendingDeletedIds:[],deleteModalCommentId:null,isLoadingMoreComments:!1,commentEditors:{},isCommentAttachmentInProgress:!1,hasScrolledPermalinkComment:!1,loadingStage:"LOADING"});var kd=(e=wd,t)=>{const s=t=>Object(Os.updateIn)(e,["pendingDeletedIds"],(e=>e.filter((e=>e!==t))));switch(t.type){case"PREVIEW_DATA_FETCHED":return Object(Os.set)(e,"loadingStage","COMPLETE");case"SAVE_COMMENT_REQUEST":{const{isNewComment:s,id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,visibility:c}=t.payload.comment;let l=e;if(s){const t=e.commentEditors.NEW_OPTIMISTIC_COMMENT;if(void 0!==t){
const s=Object(Od.a)(e,["commentEditors","NEW_OPTIMISTIC_COMMENT"]);l=Object(Os.setIn)(s,["commentEditors",n],t)}}const d={id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,isInternal:$n()(l,["commentEditors",n,"isInternal"],!0),visibility:c};return l=s?Object(Os.setIn)(l,["loadingStage"],"SAVE_COMMENT_LOADING"):l,Object(Os.chain)(l).setIn(["pendingSavedValues",n],d).setIn(["commentEditors",n,"isEditing"],!1).value()}case"FETCH_OLDER_COMMENTS_REQUEST":case"FETCH_NEWER_COMMENTS_REQUEST":return Object(Os.set)(e,"isLoadingMoreComments",!0);case"FETCH_MORE_COMMENTS_SUCCESS":case"FETCH_MORE_COMMENTS_FAILURE":return Object(Os.set)(e,"isLoadingMoreComments",!1);case"SAVE_COMMENT_RETRY":{const{payload:s}=t,n=Object(Od.a)(e,["pendingSavedValues",s.optimisticId,"hasSaveFailed"]);return(t=>!!Object(Os.getIn)(e,["commentEditors",t]))(s.optimisticId)?n:Object(Os.setIn)(n,["pendingSavedValues",s.optimisticId,"createdDate"],s.createdDate)}case"SAVE_COMMENT_EDIT":
return Object(Os.setIn)(e,["commentEditors",t.payload.optimisticId,"isEditing"],!0);case"SAVE_COMMENT_SUCCESS":case"SAVE_COMMENT_CANCEL":return Object(Od.a)(Object(Od.a)(e,["commentEditors",t.payload.optimisticId]),["pendingSavedValues",t.payload.optimisticId]);case"FETCH_SORTED_COMMENTS_REQUEST":return Object(Os.set)(e,"loadingStage","LOADING");case"FETCH_SORTED_COMMENTS_SUCCESS":case"FETCH_LATEST_COMMENTS_SUCCESS":case"FETCH_ISSUE_SUCCESS":return Object(Os.set)(e,"loadingStage","COMPLETE");case"SAVE_COMMENT_FAILURE":return Object(Os.setIn)(e,["pendingSavedValues",t.payload.optimisticId,"hasSaveFailed"],!0);case"DELETE_COMMENT_REQUEST":{const{payload:s}=t;return Object(Os.chain)(e).updateIn(["pendingDeletedIds"],(e=>[...e,s.id])).set("deleteModalCommentId",null).value()}case"DELETE_COMMENT_SUCCESS":return s(t.payload.id);case"DELETE_COMMENT_FAILURE":return s(t.payload);case"SHOW_DELETE_COMMENT_MODAL":return Object(Os.set)(e,"deleteModalCommentId",t.payload)
;case"DELETE_COMMENT_CANCEL":return Object(Os.set)(e,"deleteModalCommentId",null);case"EDIT_COMMENT_BEGIN":return Object(Os.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:t.payload.isInternal});case"EDIT_COMMENT_UPDATE":return Object(Os.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:Object(Os.getIn)(e,["commentEditors",t.payload.id,"isInternal"]),editingValue:t.payload.value,visibility:Object(Os.getIn)(e,["commentEditors",t.payload.id,"visibility"])});case"EDIT_COMMENT_VISIBILITY":return Object(Os.setIn)(e,["commentEditors",t.payload.id,"visibility"],t.payload.visibility);case"EDIT_COMMENT_COLLAPSE":case"EDIT_COMMENT_CANCEL":return Object(Od.a)(e,["commentEditors",t.payload.id]);case"ADD_COMMENT_FORM_CANCEL":case"ADD_COMMENT_FORM_COLLAPSE":{const t=Object(Os.unset)(e,"addCommentEditorExpand");return Object(Od.a)(t,["commentEditors","NEW_OPTIMISTIC_COMMENT"])}case"ADD_COMMENT_FORM_EXPAND":return Object(Os.set)(e,"addCommentEditorExpand",!0)
;case"CHANGE_COMMENT_VISIBILITY":{const{id:s,isInternal:n}=t.payload;return Object(Os.setIn)(e,["commentEditors",s,"isInternal"],n)}case"SET_COMMENT_ATTACHMENT_IN_PROGRESS":return Object(Os.set)(e,"isCommentAttachmentInProgress",t.payload.isInProgress);case"SET_COMMENT_SCROLL_STATUS":return Object(Os.set)(e,"hasScrolledPermalinkComment",t.payload.status);case"MULTILINE_FIELD_EDIT_BEGIN":{const{commentIdsToClose:s,shouldCloseAddCommentForm:n}=t.payload;if(null!=s){const t=(n?s.concat("NEW_OPTIMISTIC_COMMENT"):s).reduce(((t,s)=>vd(vd({},t),{},{[s]:vd(vd({},e.commentEditors[s]),{},{editingValue:void 0,visibility:void 0,isEditing:!1})})),{});return vd(vd({},e),{},{commentEditors:vd(vd({},e.commentEditors),t),addCommentEditorExpand:!n&&e.addCommentEditorExpand})}return e}default:return e}},Cd=n("./src/packages/platform/utils/types/src/license-state.js"),Sd=n("./src/packages/issue/issue-view/src/configurations.js");function Id(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Td(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Id(Object(s),!0).forEach((function(t){_d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Id(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Pd={applicationKey:"",issueActions:[],contextItemCategories:{primary:[],secondary:[]},contentItemCategories:{visible:[],request:void 0},atlassianAccountId:null,baseUrl:Object(je.c)(""),isAnonymous:!1,issueKey:Object(je.m)(""),isModal:!1,cloudId:null,locale:"en_US",maxTokenLength:0,ecosystemEnabled:null,isLoadedWithPage:null,rapidViewMap:null,
estimationStatistic:null,licensedProducts:{},appEditions:{software:qe.d,core:qe.d,serviceDesk:qe.d,productDiscovery:qe.d},appPermissions:{hasCoreAccess:!1,hasSoftwareAccess:!1,hasServiceDeskAccess:!1,hasProductDiscoveryAccess:!1},licenseStates:{core:Cd.d,software:Cd.d,serviceDesk:Cd.d,productDiscovery:Cd.d},siteAdminStatus:"unknown",productCrossSellConfig:"unknown",isLoading:!1,viewMode:null,firstActivationDateMs:null,viewScreenId:void 0},xd=({itemId:e,type:t})=>({id:e,type:t}),Dd=({state:e,projectConfig:t,issueId:s,contextPrimary:n,contextSecondary:a,contentVisible:i,contentRequest:r})=>{const o=Object(Sd.h)(t);return Td(Td({},e),{},{issueId:s,applicationKey:o.applicationKey,issueActions:o.issueActions,ecosystemEnabled:o.ecosystemEnabled,contentItemCategories:{visible:i,request:r},contextItemCategories:{primary:n,secondary:a}})};var Ad=(e=Pd,t)=>{switch(t.type){case"SET_CONTEXT":{const{payload:s}=t;return Td(Td({},e),s)}case"LOAD_NEW_ISSUE":return Td(Td({},e),{},{
issueKey:t.payload.issueKey});case"LOGIN_SUCCESSFUL":return Td(Td({},e),{},{atlassianAccountId:t.payload.accountId});case"PREVIEW_DATA_FETCHED":{const{payload:s}=t;if(s&&s.id&&s.fields.has("project")){const{contextPrimary:t,contextSecondary:n,content:a,contentRequest:i}=s.layout,{id:r}=s,o=s.fields.get("project").value,c=a?a.map(xd):[],l=i&&i.map(xd);return Dd({state:e,projectConfig:o,issueId:Object(je.k)(r),contextPrimary:t.map(xd),contextSecondary:n.map(xd),contentVisible:c,contentRequest:l})}return e}case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.project,n=t.payload.issue.id,{licensedProducts:a}=t.payload,{licenseStates:i}=t.payload;let r=e.contentItemCategories.visible,o=e.contentItemCategories.request,c=e.contextItemCategories.primary,l=e.contextItemCategories.secondary;if(t.payload.issue.contextItemsCategories){const{primary:e,secondary:s}=t.payload.issue.contextItemsCategories;c=e||[],l=s||[]}
t.payload.issue.contentItemsCategories&&(r=t.payload.issue.contentItemsCategories.visible||[],o=t.payload.issue.contentItemsCategories.request);return Td(Td({},Dd({state:e,projectConfig:s,issueId:n,contextPrimary:c,contextSecondary:l,contentVisible:r,contentRequest:o})),{},{licensedProducts:a,licenseStates:i})}default:return e}};function Md(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ld(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Md(Object(s),!0).forEach((function(t){Rd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Md(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,
configurable:!0,writable:!0}):e[t]=s,e}const Nd={};var Fd=(e=Nd,t)=>{switch(t.type){case"LOAD_DRAFT_SUCCESS":return Ld(Ld({},e),{},{[t.payload.fieldId]:!0});case"SAVE_DRAFT_REQUEST":return Ld(Ld({},e),{},{[t.payload.fieldId]:!Object(Re.g)(t.payload.value)});case"DELETE_DRAFT_SUCCESS":return Ld(Ld({},e),{},{[t.payload.fieldId]:!1});default:return e}},Ud=(e=null,t)=>{switch(t.type){case"ECOSYSTEM_SHOW_GLANCE":return t.payload;case"ECOSYSTEM_HIDE_GLANCE":return null;default:return e}},Vd=n("./node_modules/lodash/omit.js"),Kd=n.n(Vd);function $d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$d(Object(s),!0).forEach((function(t){Bd(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Bd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hd=Wd(Wd({canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canEditAllComments:!1,canEditIssues:!1,canEditOwnComments:!1,canLinkIssues:!1,canManageWatchers:!1,canMoveIssue:!1,canModifyReporter:!1,canScheduleIssues:!1,canViewWatchers:!1,canBrowseUsers:!1},{canDeleteAllWorklogs:!1,canDeleteOwnWorklogs:!1,canEditAllWorklogs:!1,canEditOwnWorklogs:!1,canLogWork:!1}),{},{canUseServiceDeskAgentFeatures:!1,
canViewDevTools:!1});function Gd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gd(Object(s),!0).forEach((function(t){zd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Yd={isEnabled:!1,attachmentId:null,availableAttachmentIds:[]};function Qd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function Jd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qd(Object(s),!0).forEach((function(t){Zd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xd={};const eu=[];var tu=n("./node_modules/lodash/filter.js"),su=n.n(tu),nu=n("./node_modules/lodash/pick.js"),au=n.n(nu);function iu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ru(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(s),!0).forEach((function(t){
ou(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):iu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ou(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const cu={isLinkingEnabled:!0,createLinkedPage:{clickedCount:0,isLoading:!1,isInvalid:!1,errorMessage:""},linkedPages:{pages:[],pageCount:0},mentionedPages:{pages:[],pageCount:0}},lu=["linkedPages","mentionedPages"];var du=(e=cu,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s}=t.payload,n=au()(s.confluencePages,lu),a=ru(ru({},e),n);return ru(ru({},a),{},{isLinkingEnabled:!!s.isLinkingEnabled})}case"PREVIEW_DATA_FETCHED":{const{remoteLinks:s}=t.payload;if(s&&s.confluencePages){const{linkedPages:t,mentionedPages:n}=s.confluencePages;return ru(ru({},e),{},{linkedPages:ru(ru({},e.linkedPages),{},{pageCount:t.pageCount}),
mentionedPages:ru(ru({},e.mentionedPages),{},{pageCount:n.pageCount})})}return e}case"DELETE_CONFLUENCE_PAGE_LINK_REQUEST":{const{globalId:s}=t.payload,n=((e,t)=>lu.reduce(((e,s)=>{const{pages:n}=e[s],a=su()(n,(e=>(e.link?e.link.globalId:e.globalId)!==t));return ru(ru({},e),{},{[s]:{pageCount:a.length,pages:a}})}),au()(e,lu)))(e,s);return ru(ru({},e),n)}case"CREATE_CONFLUENCE_PAGE_LINK_REQUEST":return ru(ru({},e),{},{createLinkedPage:ru(ru({},e.createLinkedPage),{},{isLoading:!0})});case"CREATE_CONFLUENCE_PAGE_LINK_FAILED":{const{errorMessage:s}=t.payload;return ru(ru({},e),{},{createLinkedPage:ru(ru({},e.createLinkedPage),{},{errorMessage:s,isLoading:!1,isInvalid:!0})})}case"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED":return ru(ru({},e),{},{createLinkedPage:ru(ru({},e.createLinkedPage),{},{errorMessage:"",isInvalid:!1})});case"LINK_CONFLUENCE_PAGE_CLOSED":return ru(ru({},e),{},{createLinkedPage:cu.createLinkedPage});case"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS":{const s=e.linkedPages.pages||[]
;return ru(ru({},e),{},{linkedPages:ru(ru({},e.linkedPages),{},{pages:[...s,t.payload.confluencePageLink],pageCount:e.linkedPages.pageCount+1}),createLinkedPage:ru(ru({},e.createLinkedPage),{},{isLoading:!1,isInvalid:!1,errorMessage:""})})}case"LINK_CONFLUENCE_PAGE_CLICKED":return ru(ru({},e),{},{createLinkedPage:ru(ru({},e.createLinkedPage),{},{clickedCount:e.createLinkedPage.clickedCount+1})});default:return e}};function uu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?uu(Object(s),!0).forEach((function(t){mu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function mu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const fu={activityPanels:{},canInstallAddons:!1,contentPanels:{},backgroundScripts:[],ecosystemOnDate:0,glances:{},operations:[]};var bu=n("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");function gu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gu(Object(s),!0).forEach((function(t){yu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,
configurable:!0,writable:!0}):e[t]=s,e}const Ou={createLinkedIncident:{clickedCount:0},createMajorIncident:{clickedCount:0}};const ju=[];var vu=n("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),Eu=n("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");function wu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ku(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wu(Object(s),!0).forEach((function(t){Cu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Cu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}const Su={issueLinks:{},linkedIssues:{},linkedIssueKeys:[]};function Iu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(s),!0).forEach((function(t){_u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Iu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Pu={isLoadingComplete:!1};const xu=[];const Du={status:"NOT_LOADED",remoteLinks:[]};const Au=["payloadType"],Mu=["payloadType"];function Lu(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Ru(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Nu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ru(Object(s),!0).forEach((function(t){Fu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ru(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const Uu={isLoading:!1,hasError:!1,isSaved:!1,isDeleted:!1,isOptimistic:!1},Vu=(e,t)=>{var s,n,a,i,r,o,c;return{id:e.issueId.toString(),issueKey:e.issueKey.stringValue,issueSummary:e.summary.textValue,statusCategoryId:null===(s=e.status)||void 0===s?void 0:s.statusCategoryId,statusCategory:Object(Oe.statusCategoryForId)(null===(n=e.status)||void 0===n?void 0:n.statusCategoryId),issueLink:Object(Bn.q)(t),statusName:null===(a=e.status)||void 0===a?void 0:a.name,statusId:null===(i=e.status)||void 0===i?void 0:i.statusId,issuePriorityUrl:Object(Bn.q)(e.priority.iconUrl),issuePriorityName:e.priority.name,issueTypeIconUrl:Object(Bn.q)(e.issueType.iconUrl),issueTypeName:e.issueType.name,assigneeDisplayName:null===(r=e.assignee)||void 0===r||null===(o=r.userValue)||void 0===o?void 0:o.displayName,assigneeUrl:null!==(c=e.assignee)&&void 0!==c&&c.userValue?Object(Bn.q)(e.assignee.userValue.avatarUrl):null}},Ku=e=>e.map((e=>{const{preview:t,details:s}=e,n=!s;let a={};return a=s?s.error?{
issueDetails:null,remoteIssueLinkError:s}:{issueDetails:Vu(s.associatedIssue,t.href),remoteIssueLinkError:null}:{issueDetails:null,remoteIssueLinkError:null},Nu(Nu(Nu({id:t.id.toString(),globalId:void 0===t.globalId?void 0:Object(je.u)(t.globalId),applicationType:t.applicationType,applicationName:t.applicationName,issueLinkUrl:Object(Bn.q)(t.href),relationship:t.relationship,issueKey:Object(je.m)(t.title),remoteIssueId:Object(je.k)(t.issueId.toString())},a),Uu),{},{isLoading:n})})),$u=e=>{let t={};if("WITH_ISSUE_ID"===e.payloadType){const{payloadType:s}=e;t=Lu(e,Au)}else{const{payloadType:s}=e;t=Nu(Nu({},Lu(e,Mu)),{},{remoteIssueId:Object(je.k)(`OPTIMISTIC_ISSUE_ID_${Date.now()}`)})}const s=Nu(Nu({},Uu),{},{isLoading:!0,isOptimistic:!0});return Nu(Nu({},t),{},{issueDetails:null,remoteIssueLinkError:null},s)};function Wu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wu(Object(s),!0).forEach((function(t){Hu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Hu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Gu={remoteIssueCount:0,remoteIssues:[]};function qu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qu(Object(s),!0).forEach((function(t){Yu(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qu={isLinkingEnabled:!0,linkCount:0,links:[],createClickCount:0};function Ju(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ju(Object(s),!0).forEach((function(t){Xu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ju(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function Xu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ep={sortedWorklogIds:[],worklogs:{},totalWorklogs:0,worklogsStartIndex:0};const tp=["issueType"];function sp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function np(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ap(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?np(Object(s),!0).forEach((function(t){ip(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):np(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ip(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const rp=Object(Os.freeze)({users:{},applicationRoles:[],ecosystem:fu,forge:bu.b,issueLinks:Su,issueTypes:xu,issueContentPanels:ju,issueRemoteData:Pu,permissions:Hd,comments:Xd,totalComments:0,commentsStartIndex:0,loadedComments:0,confluencePages:cu,webLinks:Qu,subtasks:[],cardCover:Yd,childrenIssues:{},parentIssue:null,parentLevelIssues:[],refreshedOn:0,requestPanelMetadata:{channel:void 0,requestUrl:""},worklog:ep,confluenceAppLinks:eu,remoteIssueLinks:Gu,jiraAppLinks:Du,incidentManagement:Ou,issue:null,jiraSettings:{subtasksConfiguration:{enabled:!0},issueLinkTypes:[],timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,
defaultUnit:"minute"}}}),op=(e,t=[])=>Kd()(e,[...t,"forgeIssueProperties"]);var cp=(e,t)=>{const s=(e=>{if(e)return e;const t={};return Object.assign(t,{issueTypes:xu}),ap(ap({},rp),t)})(e);let n=Object(Os.chain)(s).set("cardCover",((e=Yd,t)=>{switch(t.type){case"CARD_COVER_FETCH_SUCCESS":return t.payload.cardCover;case"CARD_COVER_UPDATE_REQUEST":case"CARD_COVER_UPDATE_FAILURE":return qd(qd({},e),{},{attachmentId:t.payload.attachmentId});default:return e}})(s.cardCover,t)).set("comments",((e=Xd,t)=>{switch(t.type){case"SAVE_COMMENT_SUCCESS":{const{comment:s}=t.payload;return Jd(Jd({},e),{},{[s.id]:s})}case"DELETE_COMMENT_SUCCESS":{const s=Jd({},e);return delete s[t.payload.id],s}default:return e}})(s.comments,t)).set("confluencePages",du(s.confluencePages,t)).set("issueLinks",((e=Su,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":{const{fields:s}=t.payload,n=s.get(vu.l);if(n){const{value:e}=n;return Object(Eu.b)(Object(je.c)(""),Object(Eu.a)(e))}return e}
case"FETCH_LINKED_ISSUES_SUCCESS":return Object(Os.merge)(e,{linkedIssues:t.payload});case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const{linkedIssues:s,issueLinks:n,optimisticIds:a}=t.payload,i=Object(Od.a)(e,["issueLinks",a]);return Object(Os.chain)(i).merge({linkedIssues:s}).merge(n).value()}case"SAVE_LINKED_ISSUE_REQUEST":{const{newIssueLinks:s}=t.payload;return Object(Os.chain)(e).merge(s.issueLinks).setIn(["issueLinks",s.optimisticId,"isOptimistic"],!0).setIn(["issueLinks",s.optimisticId,"isLoading"],!0).setIn(["issueLinks",s.optimisticId,"hasError"],!1).setIn(["issueLinks",s.optimisticId,"isSaved"],!1).value()}case"SAVE_LINKED_ISSUE_FAILURE":return Object(Os.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!1).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!0).value();case"SAVE_LINKED_ISSUE_SUCCESS":return Object(Os.setIn)(e,["issueLinks",t.payload.optimisticId,"isSaved"],!0);case"FETCH_LINKED_ISSUES_DATA_FAILURE":{let s=e
;return t.payload.optimisticIds.forEach((e=>{s=Object(Os.setIn)(s,["issueLinks",e,"isLoading"],!1)})),s}case"SAVE_LINKED_ISSUE_RETRY":return Object(Os.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!0).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!1).value();case"DELETE_LINKED_ISSUE_REQUEST":{const s=Object(Os.setIn)(e,["issueLinks",t.payload.linkedIssueId,"isDeleted"],!0);return Object(Od.a)(s,["deleteModalLinkId"])}case"DELETE_LINKED_ISSUE_FAILURE":return Object(Os.setIn)(e,["issueLinks",t.payload,"isDeleted"],!1);case"DELETE_LINKED_ISSUE_SUCCESS":case"SAVE_LINKED_ISSUE_CANCEL":return Object(Od.a)(e,["issueLinks",t.payload]);case"ADD_ISSUE_LINK_CLICKED":return Object(Os.setIn)(e,["quickAddClicked"],((e||{}).quickAddClicked||0)+1);case"ADD_ISSUE_LINK_CLOSED":return Object(Os.setIn)(e,["quickAddClicked"],0);case"SET_CREATE_LINKED_ISSUE_PERMISSION":return Object(Os.setIn)(e,["canCreateLinkedIssue"],t.payload.canCreateLinkedIssue);case"REFRESH_ISSUE_SUCCESS":
if(t.payload.issueLinks){const s=t.payload.issueLinks;return Object(Os.setIn)(s,["canCreateLinkedIssue"],e.canCreateLinkedIssue)}return e;case"CREATE_LINKED_ISSUE_SUCCESS":{const{newIssueLinks:s}=t.payload;return Mc()(s.issueLinks,((e,t)=>{s.issueLinks[t]=ku(ku({},e),{},{isOptimistic:!1,isLoading:!0,hasError:!1,isSaved:!0})})),Object(Os.merge)(e,s)}default:return e}})(s.issueLinks,t)).set("ecosystem",((e=fu,t)=>{switch(t.type){case"CONTENT_PANEL_SELECTED":return pu(pu({},e),{},{selectedContentPanel:t.payload});case"CONTENT_PANEL_UNSELECT":return pu(pu({},e),{},{selectedContentPanel:void 0});case"REFRESH_ECOSYSTEM_SUCCESS":return pu({},t.payload);case"FETCH_ISSUE_SUCCESS":return pu(pu({},Object($.is2afErrorCleanupGroup2Enabled)()?e:{}),t.payload.ecosystem);default:return e}})(s.ecosystem,t)).set("forge",Object(bu.a)(s.forge,t)).set("confluenceAppLinks",((e=eu,t)=>{switch(t.type){case"FETCH_CONFLUENCE_APP_LINKS_SUCCESS":return t.payload;default:return e}
})(s.confluenceAppLinks,t)).set("issueContentPanels",((e=ju,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":return t.payload.issueContentPanels||e;case"ADD_CONTENT_PANEL_SUCCESS":return[...e,t.payload];case"REMOVE_CONTENT_PANEL_SUCCESS":{const{payload:s}=t;return e.filter((e=>e!==s))}case"CONTENT_PANELS_CUSTOMISED_SUCCESS":return e.includes("issue.content.panel.customised.flag")?e:[...e,"issue.content.panel.customised.flag"];default:return e}})(s.issueContentPanels,t)).set("issueTypes",((e=xu,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return t.payload.issueTypes||e||xu;case"SET_ISSUE_TYPES":return t.payload.map((e=>{const{id:t,name:s,subtask:n,iconUrl:a,fields:i}=e;return{id:t,name:s,subtask:n,iconUrl:a,fields:i}}));default:return t.type,e}})(s.issueTypes,t)).set("webLinks",((e=Qu,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{webLinks:n}=s,{linkCount:a=0,links:i=[]}=n||{};return zu(zu({},e),{},{
isLinkingEnabled:!!s.isLinkingEnabled,linkCount:a,links:i})}case"SHOW_CREATE_WEB_LINK_FORM":return zu(zu({},e),{},{createClickCount:e.createClickCount+1});case"HIDE_CREATE_WEB_LINK_FORM":return zu(zu({},e),{},{createClickCount:Qu.createClickCount});case"DELETE_WEB_LINK_REQUEST":{const{id:s}=t.payload,n=e.links.map((e=>e.id===s?zu(zu({},e),{},{isDeleting:!0,deleteFailed:!1}):e));return zu(zu({},e),{},{links:n})}case"DELETE_OPTIMISTIC_WEB_LINK":case"DELETE_WEB_LINK_SUCCESS":{const{id:s}=t.payload;if(s&&e.links){const t=e.links.filter((e=>e.id!==s)),n=t.length;return zu(zu({},e),{},{linkCount:n,links:t})}return e}case"DELETE_WEB_LINK_FAILED":{const{id:s}=t.payload,n=e.links.map((e=>e.id===s?zu(zu({},e),{},{isDeleting:!1,deleteFailed:!0}):e));return zu(zu({},e),{},{links:n})}case"CANCEL_FAILED_WEB_LINK_DELETION":{const{id:s}=t.payload,n=e.links.map((e=>e.id!==s?e:{id:e.id,href:e.href,linkText:e.linkText,iconUrl:e.iconUrl,resolved:null,relationship:null,applicationName:null,
applicationType:null}));return zu(zu({},e),{},{links:n})}case"CREATE_WEB_LINK_REQUEST":{const{optimisticId:s,href:n,linkText:a,iconUrl:i}=t.payload;return zu(zu({},e),{},{linkCount:e.linkCount+1,links:[{id:s,href:n,linkText:a,iconUrl:i,isCreating:!0,createFailed:!1,resolved:null,relationship:null,applicationName:null,applicationType:null},...e.links]})}case"CREATE_WEB_LINK_SUCCESS":{const{optimisticId:s,webLink:n}=t.payload,a=e.links.map((e=>e.id===s?n:e));return zu(zu({},e),{},{links:a})}case"CREATE_WEB_LINK_FAILED":{const{optimisticId:s}=t.payload,n=e.links.map((e=>e.id===s?zu(zu({},e),{},{isCreating:!1,createFailed:!0}):e));return zu(zu({},e),{},{links:n})}case"CREATE_WEB_LINK_RETRY":{const{optimisticId:s}=t.payload,n=e.links.map((e=>e.id===s?zu(zu({},e),{},{isCreating:!0,createFailed:!1}):e));return zu(zu({},e),{},{links:n})}default:return e}})(s.webLinks,t)).set("incidentManagement",((e=Ou,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return hu(hu({},e),{},{
createLinkedIncident:hu(hu({},e.createLinkedIncident),{},{clickedCount:e.createLinkedIncident.clickedCount+1})});case"CREATE_MAJOR_INCIDENT_CLICKED":return hu(hu({},e),{},{createMajorIncident:hu(hu({},e.createMajorIncident),{},{clickedCount:e.createMajorIncident.clickedCount+1})});default:return e}})(s.incidentManagement,t)).value();return n=Object(Os.set)(n,"remoteIssueLinks",((e=Gu,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":{const{remoteLinks:s={}}=t.payload,{remoteLinkedIssues:n=[]}=s,a=n.length;if(e.remoteIssueCount)return e;const i=Bu(Bu({},e),{},{remoteIssueCount:a,remoteIssues:Ku(n)});return Bu({},i)}case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{remoteLinkedIssues:n=[]}=s,a=n.length,i=Bu(Bu({},e),{},{remoteIssueCount:a,remoteIssues:Ku(n)});return oo()(i,e)?e:Bu({},i)}case"DELETE_REMOTE_LINKED_ISSUE_REQUEST":{const{globalId:s}=t.payload;return Bu(Bu({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.globalId===s?Bu(Bu({},e),{},{isDeleted:!0}):e))})}
case"DELETE_REMOTE_LINKED_ISSUE_SUCCESS":{const s=t.payload;return Bu(Bu({},e),{},{remoteIssues:e.remoteIssues.reduce(((e,t)=>(t.globalId!==s&&e.push(t),e)),[])})}case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":{const s=t.payload;return Bu(Bu({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.globalId===s?Bu(Bu({},e),{},{isDeleted:!1}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_REQUEST":{const{saveRemoteIssueLinkPayload:s}=t.payload;return Bu(Bu({},e),{},{remoteIssues:e.remoteIssues.concat($u(s))})}case"SAVE_REMOTE_LINKED_ISSUE_SUCCESS":{const{optimisticId:s,saveRemoteLinkResponse:{id:n,issueId:a,globalId:i}}=t.payload;return Bu(Bu({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.id===s?Bu(Bu({},e),{},{id:n.toString(),globalId:Object(je.u)(i),remoteIssueId:void 0!==a?Object(je.k)(a.toString()):e.remoteIssueId,isOptimistic:!1,isSaved:!0}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{optimisticId:s,error:n}=t.payload;return 400===n.statusCode?Bu(Bu({},e),{},{
remoteIssues:e.remoteIssues.filter((e=>e.id!==s))}):Bu(Bu({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.id===s?Bu(Bu({},e),{},{isLoading:!1,hasError:!0}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_RETRY":{const{optimisticId:s}=t.payload;return Bu(Bu({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.id===s?Bu(Bu({},e),{},{isLoading:!0,hasError:!1}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_CANCEL":{const s=t.payload;return Bu(Bu({},e),{},{remoteIssues:e.remoteIssues.filter((e=>e.id!==s))})}default:return e}})(s.remoteIssueLinks,t)),n=Object(Os.set)(n,"jiraAppLinks",((e=Du,t)=>{switch(t.type){case"FETCH_JIRA_APP_LINKS_SUCCESS":return{status:"LOADED",remoteLinks:t.payload.map((e=>({id:e.id,name:e.name,baseUrl:Object(je.c)(e.url),authUrl:Object(je.j)(e.authUrl),requireCredentials:e.requireCredentials})))};case"FETCH_JIRA_APP_LINKS_FAILED":return{status:"ERROR",remoteLinks:e.remoteLinks};case"FETCH_JIRA_APP_LINKS_REQUEST":return{status:"LOADING",remoteLinks:e.remoteLinks}
;case"APPLINK_AUTHENTICATION_SUCCESS":return{status:"NOT_LOADED",remoteLinks:e.remoteLinks};default:return e}})(s.jiraAppLinks,t)),n=Object(Os.set)(n,"worklog",((e=ep,t)=>{switch(t.type){case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,startIndex:a,totalWorklogs:i}=t.payload;return Zu(Zu({},e),{},{sortedWorklogIds:s,worklogs:n,worklogsStartIndex:a,totalWorklogs:i})}case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return Zu({},ep);case"state.EDIT_WORKLOG_SUCCESS":{const{worklogs:s}=t.payload;return Zu(Zu({},e),{},{worklogs:s})}case"state.FETCH_WORKLOGS_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,totalWorklogs:a}=t.payload,{worklogsStartIndex:i}=e;return{sortedWorklogIds:s.slice().reverse().concat(e.sortedWorklogIds),worklogs:Zu(Zu({},e.worklogs),n),totalWorklogs:a,worklogsStartIndex:i}}case"FETCH_ISSUE_SUCCESS":{const{payload:e}=t,{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,worklogsStartIndex:i}=e;return{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,
worklogsStartIndex:i}}case"state.DELETE_WORKLOG_SUCCESS":{const{worklogId:s}=t.payload,{totalWorklogs:n,worklogsStartIndex:a}=e;return{sortedWorklogIds:e.sortedWorklogIds.filter((e=>e!==s)),worklogs:Kd()(e.worklogs,s),totalWorklogs:n-1,worklogsStartIndex:a}}case"state.FETCH_SORTED_WORKLOGS_SUCCESS":{const{worklogs:e,totalWorklogs:s,startIndex:n,sortedWorklogIds:a}=t.payload;return{sortedWorklogIds:a,worklogs:e,totalWorklogs:s,worklogsStartIndex:n}}case"state.FETCH_NEWER_SORTED_WORKLOGS_SUCCESS":{const{worklogs:s,totalWorklogs:n,startIndex:a,sortedWorklogIds:i,selectedSortOrder:r}=t.payload,o="NEWEST_FIRST"===r?[...i,...e.sortedWorklogIds]:[...e.sortedWorklogIds,...i];return Zu(Zu({},e),{},{worklogs:Zu(Zu({},e.worklogs),s),sortedWorklogIds:o,totalWorklogs:n,worklogsStartIndex:a})}case"state.FETCH_OLDER_SORTED_WORKLOGS_SUCCESS":{
const{worklogs:s,totalWorklogs:n,startIndex:a,sortedWorklogIds:i,selectedSortOrder:r}=t.payload,o="NEWEST_FIRST"===r?[...e.sortedWorklogIds,...i]:[...i,...e.sortedWorklogIds];return Zu(Zu({},e),{},{worklogs:Zu(Zu({},e.worklogs),s),sortedWorklogIds:o,totalWorklogs:n,worklogsStartIndex:a})}default:return e}})(s.worklog,t)),n=Object(Os.set)(n,"issueRemoteData",((e=Pu,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":case"FETCH_ISSUE_REMOTE_DATA_FAILURE":return Tu(Tu({},e),{},{isLoadingComplete:!0});default:return e}})(s.issueRemoteData,t)),((e,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_ISSUE_SUCCESS":{const t=Object(Os.merge)(e,op(n,["issueContentPanels","issueTypes"]));return Kd()(t,[["issue","fields"],["issue","contextItemsCategories"],["issue","contentItemsCategories"],"changeboardingLastInteracted","licensedProducts","licenseStates"])}case"FETCH_SCREENID_SUCCESS":case"FETCH_MORE_COMMENTS_SUCCESS":return Object(Os.merge)(e,n);case"FETCH_SORTED_COMMENTS_SUCCESS":{
const{comments:t,commentsStartIndex:s,loadedComments:a,totalComments:i}=n;let r=Object(Os.chain)(e).setIn(["comments"],t).setIn(["commentsStartIndex"],s).setIn(["loadedComments"],a).setIn(["totalComments"],i).value();return n.users&&(r=Object(Os.set)(r,"users",Object(Os.merge)(e.users,n.users))),r}case"FETCH_LATEST_COMMENTS_SUCCESS":{const{comments:t,commentsStartIndex:s,loadedComments:a,totalComments:i,users:r}=n;let o=Object(Os.chain)(e).setIn(["comments"],t).setIn(["commentsStartIndex"],s).setIn(["loadedComments"],a).setIn(["totalComments"],i).value();return r&&(o=Object(Os.set)(o,"users",Object(Os.merge)(e.users,r))),o}case"PREVIEW_DATA_FETCHED":{const{fields:t}=n;let s=e;const a=t&&t.get("project");if(a&&a.value&&(s=Object(Os.set)(s,"project",a.value)),n.comments){const{comments:{comments:e={},totalCount:t,startIndex:a}}=n;s=Object(Os.chain)(s).setIn(["comments"],e).setIn(["loadedComments"],Object.keys(e).length).setIn(["totalComments"],t).setIn(["commentsStartIndex"],a).value()}
return n.users&&(s=Object(Os.set)(s,"users",Object(Os.merge)(e.users,n.users))),s}case"REFRESH_ISSUE_SUCCESS":{const t=op(n),s=Object.keys(t).reduce(((s,n)=>"users"===n?Object(Os.set)(s,"users",Object(Os.merge)(e.users,t.users)):"issueTypes"===n||"issueLinks"===n||"issueContentPanels"===n?s:Object(Os.set)(s,n,t[n])),e);return Object(Os.setIn)(s,["refreshedOn"],Date.now())}case"FETCH_LOGGED_IN_USER_SUCCESS":{const{user:t,applicationRoles:s}=n,a=t.id,i=ap({},e.users);return a&&t.id&&!i[t.id]&&(i[t.id]=t),ap(ap({},e),{},{users:i},Object($.isUseAppPermissionsFromTenantContextEnabled)()?void 0:{applicationRoles:s})}case"SAVE_COMMENT_SUCCESS":return n.isNewComment?Object(Os.chain)(e).setIn(["loadedComments"],e.loadedComments+1).setIn(["totalComments"],e.totalComments+1).value():e;case"DELETE_COMMENT_SUCCESS":return Object(Os.chain)(e).setIn(["loadedComments"],e.loadedComments-1).setIn(["totalComments"],e.totalComments-1).value();case"REQUEST_PANEL_METADATA_FETCH_SUCCESS":{
const t=Object(Od.a)(e,["requestPanelMetadata"]);return Object(Os.setIn)(t,["requestPanelMetadata"],n)}case"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS":return Object(Os.setIn)(e,["project","issueTypes"],n);case"FETCH_ISSUE_PARENTS_SUCCESS":return Object(Os.setIn)(e,["parentLevelIssues"],n);case"SET_PARENT_SUCCESS":{const s=t.payload.parentIssue,{issueType:n}=s,a=sp(s,tp),{name:i,iconUrl:r}=n||{},o=ap(ap({},a),{},{issueTypeName:i||"",issueTypeIconUrl:r||""});return Object(Os.setIn)(e,["parentIssue"],o)}case"UNSET_PARENT_SUCCESS":return Object(Os.setIn)(e,["parentIssue"],null);case"CHILD_ISSUE_ADD_SUCCESS":{const{payload:{childIssue:s}}=t;s.isLoading=void 0;const n=JSON.parse(JSON.stringify(e.childrenIssues));return n.push(s),Object(Os.setIn)(e,["childrenIssues"],n)}case"SUBTASK_ADD_SUCCESS":{const{payload:{childIssue:s}}=t,n=JSON.parse(JSON.stringify(e.subtasks));return n.push(s),Object(Os.setIn)(e,["subtasks"],n)}default:return e}})(n,t)};var lp=(e=null,t)=>{switch(t.type){
case"FETCH_ISSUE_FAILURE":return(e=>{const{traceId:t,errorMessage:s,endpoint:n,statusCode:a}=e,i={};return null!==t&&(i.traceId=t),null!==s&&(i.errorMessage=s),null!==n&&(i.endpoint=n),null!==a&&(i.statusCode=a),i})(t.payload);default:return e}};var dp=(e=null,t)=>{switch(t.type){case"FETCH_ISSUE_FAILURE":return t.payload.error;case"LOGIN_SUCCESSFUL":return null;default:return e}};var up=(e="NONE",t)=>{switch(t.type){case"FETCHING_ISSUE_TYPES":return"PENDING";case"SET_ISSUE_TYPES":return"COMPLETE";case"FETCH_ISSUE_TYPES_FAILED":return"FAILED";default:return t.type,e}};const pp=e=>e.length>0?e[0].id+1:1,mp="CONTENT_LIMIT_EXCEEDED",fp=[];var bp=(e=fp,t)=>{switch(t.type){case"SAVE_COMMENT_FAILURE":return t.payload.invalidMessage&&t.payload.invalidMessage.includes(mp)?[{type:$c.k,id:pp(e)},...e]:[{type:t.payload.isServerValidationError?$c.j:$c.i,id:pp(e)},...e];case"DELETE_COMMENT_FAILURE":return[{type:$c.l,id:pp(e)},...e];case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":
case"ATTACHMENT_JIRA_CREATE_FAILURE":return[{type:$c.d,id:pp(e)},...e];case"EDITOR_CHANGE_FAILURE":case"EDITOR_EXPANDED_FAILURE":case"EDITOR_SAVE_FAILURE":return[{type:$c.t,id:pp(e)},...e];case $c.D:return[{type:$c.D,id:pp(e)},...e];case"DELETE_LINKED_ISSUE_FAILURE":case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":return[{type:$c.p,id:pp(e)},...e];case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{error:s,remoteIssueKey:n}=t.payload;if(400===s.statusCode){const t=(e=>{try{const t=JSON.parse(e),s=Object.values(t.errors||{});return[...t.errorMessages||[],...s].join(" ")}catch{return e}})(s.message);return[{type:$c.B,id:pp(e),titleI18nValues:{remoteIssueKey:n},descriptionI18nValues:{i18nServerErrorMessage:t}},...e]}return e}case"FIELD_SAVE_FAILURE":{const{fieldOptions:s}=t.payload,{onSaveFailureFlagType:n}=s;if(s.isRichTextField&&t.payload.invalidMessage){if(t.payload.invalidMessage.includes(mp))return[{type:$c.E,id:pp(e)},...e]
;if(t.payload.invalidMessage&&t.payload.invalidMessage.includes("is required"))return[{type:$c.F,id:pp(e)},...e]}return n?[{type:n,id:pp(e)},...e]:e}case"FIELD_SAVE_SUCCESS":{const{onSaveSuccessFlagType:s}=t.payload.fieldOptions;return s?[{type:s,id:pp(e),descriptionI18nValues:{issueKey:t.meta&&t.meta.issueKey}},...e]:e}case"DISMISS_FLAG":return e.filter((e=>e.id!==t.payload));case"DELETE_ISSUE_FAILURE":return[{type:$c.o,id:pp(e),titleI18nValues:{issueKey:t.payload.issueKey}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":return[{type:$c.g,id:pp(e),titleI18nValues:{destType:t.payload.targetTypeName}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE":return[{type:$c.f,id:pp(e)},...e];case"TOGGLE_WATCHING_ERROR":return[{type:$c.M,id:pp(e)},...e];case"FETCH_WATCHERS_ERROR":return[{type:$c.y,id:pp(e)},...e];case"START_WATCHING_SUCCESS":return[{type:$c.I,id:pp(e)},...e];case"STOP_WATCHING_SUCCESS":return[{type:$c.J,id:pp(e)},...e];case"REMOVE_WATCHER_ERROR":return[{type:$c.C,
id:pp(e)},...e];case"ADD_WATCHER_ERROR":return[{type:$c.a,id:pp(e)},...e];case"state.ADD_WORKLOG_FAILURE":return[{type:$c.b,id:pp(e)},...e];case"state.UPDATE_TIME_REMAINING_FAILURE":return[{type:$c.L,id:pp(e)},...e];case"state.EDIT_WORKLOG_SUCCESS":return[{type:$c.w,id:pp(e)},...e];case"state.EDIT_WORKLOG_FAILURE":return[{type:$c.v,id:pp(e)},...e];case"state.DELETE_WORKLOG_SUCCESS":return[{type:$c.s,id:pp(e)},...e];case"state.DELETE_WORKLOG_FAILURE":return[{type:$c.r,id:pp(e)},...e];case"DELETE_CONFLUENCE_PAGE_LINK_FAILED":return[{type:$c.n,id:pp(e)},...e];case"DELETE_WEB_LINK_FAILED":return[{type:$c.q,id:pp(e)},...e];case $c.G:return[{type:$c.G,id:pp(e)},...e];case $c.H:return[{type:$c.H,id:pp(e)},...e];case"FETCH_JIRA_APP_LINKS_FAILED":return[{type:$c.x,id:pp(e)},...e];default:return e}};function gp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function hp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gp(Object(s),!0).forEach((function(t){yp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Op={showCreateIncidentPanel:!1,showCreateMajorIncidentModal:!1};var jp=(e=Op,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return hp(hp({},e),{},{showCreateIncidentPanel:!0});case"LINK_INCIDENT_PANEL_CLOSED":return hp(hp({},e),{},{showCreateIncidentPanel:!1});case"CREATE_MAJOR_INCIDENT_CLICKED":return hp(hp({},e),{},{showCreateMajorIncidentModal:!0});case"CREATE_MAJOR_INCIDENT_MODAL_CLOSED":return hp(hp({},e),{},{showCreateMajorIncidentModal:!1});default:return e}};function vp(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ep(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vp(Object(s),!0).forEach((function(t){wp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const kp={isDeleteIssueModalOpen:!1,isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:null};var Cp=(e=kp,t)=>{switch(t.type){case"OPEN_DELETE_ISSUE_MODAL":return Ep(Ep({},e),{},{isDeleteIssueModalOpen:!0});case"CLOSE_DELETE_ISSUE_MODAL":return Ep(Ep({},e),{},{isDeleteIssueModalOpen:!1});case"DELETE_ISSUE_REQUEST":
return Ep(Ep({},e),{},{isDeletingIssue:!0,didIssueDeleteFail:!1,issueKey:t.payload.issueKey});case"DELETE_ISSUE_SUCCESS":return Ep(Ep({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:t.payload});case"DELETE_ISSUE_FAILURE":return Ep(Ep({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!0,issueKey:t.payload.issueKey});default:return e}},Sp=(e="LOADING",t)=>{const{type:s}=t;switch(s){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_FAILURE":return"COMPLETE";case"PREVIEW_DATA_FETCHED":return"LOADING"===e?"PREVIEW":e;case"LOGIN_SUCCESSFUL":case"LOAD_NEW_ISSUE":return"LOADING";default:return e}};function Ip(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ip(Object(s),!0).forEach((function(t){_p(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ip(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Pp={shouldShowIssueTypeList:!1};var xp=(e=Pp,t)=>{const{type:s,payload:n}=t;switch(s){case"SHOW_ISSUE_TYPE_LIST":return Tp(Tp({},e),{},{shouldShowIssueTypeList:n});default:return e}};function Dp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ap(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Dp(Object(s),!0).forEach((function(t){Mp(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Dp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Lp={projectHasSubtaskValidators:{status:"LOADING"}};var Rp=(e=Lp,t)=>{switch(t.type){case"SET_CONTEXT":return e;case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS":return Ap(Ap({},e),{},{projectHasSubtaskValidators:{status:"LOADING"}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS":return Ap(Ap({},e),{},{projectHasSubtaskValidators:{status:"LOADED",value:t.payload}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE":return Ap(Ap({},e),{},{projectHasSubtaskValidators:{status:"FAILED"}});default:return e}},Np=(e=[],t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS":return n;default:return e}};const Fp={timestamp:0,
value:void 0};var Up=(e=Fp,t)=>{switch(t.type){case"SHARE_AS_COMMENT":return{timestamp:Date.now(),value:t.payload.value};case"CLEAR_SHARED_AS_COMMENT_VALUES":return{timestamp:Date.now()};default:return e}};function Vp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Kp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Vp(Object(s),!0).forEach((function(t){$p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Vp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Wp={newIssueViewLockedIn:!1};var Bp=(e=Wp,t)=>{switch(t.type){
case"PREVIEW_DATA_FETCHED":{const s=t.payload.meta&&t.payload.meta.newIssueViewLockedIn;return void 0!==s?Kp(Kp({},e),{},{newIssueViewLockedIn:s}):e}case"FETCH_ISSUE_SUCCESS":{const{newIssueViewLockedIn:s}=t.payload;return void 0!==s?Kp(Kp({},e),{},{newIssueViewLockedIn:s}):e}default:return e}};function Hp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hp(Object(s),!0).forEach((function(t){qp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const zp={hasIssueViewMounted:!1};var Yp=(e=zp,t)=>{switch(t.type){case"ISSUE_VIEW_MOUNTED":return Gp(Gp({},e),{},{hasIssueViewMounted:!0});default:return t.type,e}};function Qp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Jp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(s),!0).forEach((function(t){Zp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xp={openModal:"NO_MODAL",isSaving:!1,activeWorklogId:null};function em(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?em(Object(s),!0).forEach((function(t){sm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):em(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const nm={hasScrolledPermalink:!1};var am=Object(Ce.combineReducers)({loadingStage:(e="LOADING",t)=>{switch(t.type){case"state.FETCH_WORKLOGS_REQUEST_INITIAL":case"state.ADD_WORKLOG_SUCCESS":case"state.FETCH_SURROUNDING_WORKLOGS_BY_ID":case"state.FETCH_SORTED_WORKLOGS_REQUEST":case"state.FETCH_SORTED_WORKLOGS_RETRY":return"LOADING"
;case"state.FETCH_NEWER_SORTED_WORKLOGS_REQUEST":return"LOADING_NEWER_WORKLOGS";case"state.FETCH_OLDER_SORTED_WORKLOGS_REQUEST":return"LOADING_OLDER_WORKLOGS";case"state.FETCH_WORKLOGS_SUCCESS":case"FETCH_ISSUE_SUCCESS":case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":case"state.FETCH_SORTED_WORKLOGS_SUCCESS":case"state.FETCH_OLDER_SORTED_WORKLOGS_SUCCESS":case"state.FETCH_NEWER_SORTED_WORKLOGS_SUCCESS":return"COMPLETE";case"state.FETCH_WORKLOGS_FAILURE":case"state.FETCH_SORTED_WORKLOGS_FAILURE":return"LOADING"===e?"ERROR":"ERROR_ADDITIONAL";case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return"ERROR";default:return e}},modal:(e=Xp,t)=>{switch(t.type){case"state.OPEN_MODAL":return{openModal:t.payload.modalType,isSaving:!1,activeWorklogId:t.payload.worklogId};case"state.UPDATE_TIME_REMAINING_REQUEST":case"state.ADD_WORKLOG_REQUEST":case"state.EDIT_WORKLOG_REQUEST":case"state.DELETE_WORKLOG_REQUEST":return Jp(Jp({},e),{},{isSaving:!0});case"state.UPDATE_TIME_REMAINING_FAILURE":
case"state.ADD_WORKLOG_FAILURE":case"state.EDIT_WORKLOG_FAILURE":case"state.DELETE_WORKLOG_FAILURE":return Jp(Jp({},e),{},{isSaving:!1});case"state.CLOSE_MODAL":case"state.ADD_WORKLOG_SUCCESS":case"state.UPDATE_TIME_REMAINING_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":return{openModal:"NO_MODAL",isSaving:!1,activeWorklogId:null};default:return e}},highlightedWorklogId:(e=null,t)=>{switch(t.type){case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return t.payload.worklogId;case"state.DISPOSE_WORKLOG_APP":return null;case"state.OPEN_MODAL":default:return e}},permalinkStatus:(e=nm,t)=>{switch(t.type){case"SET_WORKLOG_SCROLL_STATUS":return tm(tm({},e),{},{hasScrolledPermalink:t.payload.status});case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return tm(tm({},e),{},{hasScrolledPermalink:!1});default:return e}}});function im(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function rm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?im(Object(s),!0).forEach((function(t){om(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):im(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function om(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const cm={agile:void 0,context:void 0,entities:void 0,fields:void 0,mediaContext:{viewContext:null,uploadContext:null,userAuth:null},shareAsComment:void 0,timing:void 0,ui:void 0,validators:void 0},lm=()=>{const e={};return e.issueType=xp,e},dm=(e,t)=>Object(Ce.combineReducers)({agile:Yl,context:Ad,entities:cp,fields:Vl,mediaContext:Object(Ce.combineReducers)({uploadContext:wl,userAuth:kl,viewContext:Pl
}),shareAsComment:Up,timing:El,ui:Object(Ce.combineReducers)(rm({attachments:Object(Ce.combineReducers)({picker:rd}),activityFeed:Hl,assignIssueParentModal:ed,comments:kd,changeboarding:ud,childPanel:gd,cloneModal:yd,drafts:Fd,ecosystem:Object(Ce.combineReducers)({glance:Ud}),error:dp,fetchIssueTypesStatus:up,flags:bp,issueDeletion:Cp,loadingStage:Sp,recentlyVisitedConfluencePages:Np,uiConfig:Bp,viewMountStatus:Yp,worklog:am,incidentManagement:jp,errorMessage:lp},lm())),validators:Rp})(e,t);var um=(e=cm,t)=>{if("LOAD_NEW_ISSUE"===t.type){const s=dm({ui:{changeboarding:e.ui.changeboarding,uiConfig:e.ui.uiConfig}},F(Object(ce.k)(e))),n=dm(s,t),a=Object(ee.y)(e),i=Object($.isUseAppPermissionsFromTenantContextEnabled)()?[]:Object(Wc.a)(e);return a?dm(n,ke(a,i)):n}if("LOAD_RECENT_ISSUE"===t.type){const s=Object(ce.k)(e),{issueState:n}=t.payload;return dm(rm(rm({},n),{},{context:rm(rm(rm({},n.context),s),{},{issueId:n.context.issueId,contentItemCategories:n.context.contentItemCategories,
contextItemCategories:n.context.contextItemCategories})}),Object(V.g)())}return dm(e,t)};const pm=()=>e=>t=>{try{e(t)}catch(s){throw Pe.h.safeErrorWithoutCustomerData("issue.middleware.error-logger",`Unhandled error in ${t.type}`),s}};var mm=({initialState:e,onChange:t=_e.a,onError:s=_e.a,dataProvider:n,history:a,issueKey:i=Object(je.m)(""),fieldsValueActions:r,fieldsConfigActions:o,issueViewLayoutActions:c,forgeActions:l,ecosystemActions:d,attachmentActions:u,recentIssuesActions:p,prefetchedResourceManager:m,userPreferenceActions:b,issueScrollActions:g,permissionActions:h,issueTabsActions:y,jiraSettingsActions:O,projectContextActions:j,issueContextActions:v,workflowTransitionsActions:E})=>Object(Ce.createStore)(Object(Se.enableBatching)(um),e,Object(Pe.a)({name:`issue-${i}`})(Object(Ce.applyMiddleware)(...((e,t,s,n,a,i,r,o,c,l,d,u,p,m,b,g,h,y,O,j)=>{const v=Object(f.b)(hl(e,t,s,n,a,i,r,o,c,l,d,p,u,m,b,g,h,y,O,j)),E=Object(Ie.createEpicMiddleware)(v);return[pm,E]
})(t,s,n,a,r,o,c,l,d,u,p,m,b,g,h,y,O,j,v,E)))),fm=n("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),bm=n("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js"),gm=n("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");const hm=e=>({id:Number(e.id),name:e.name,subtask:e.subtask,iconUrl:e.iconUrl});function ym(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Om(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ym(Object(s),!0).forEach((function(t){jm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ym(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jm(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vm=(e,t,s)=>{if(Array.isArray(t)&&t.length>0){const n=JSON.stringify(Object(fm.c)(t));s.dispatch(Object(V.b)({error:"UNKNOWN_ERROR",errorMessage:`${e}: ${n}`,statusCode:500}))}else s.dispatch(Object(V.b)({error:"NOT_FOUND_OR_NO_PERMISSION_ERROR",statusCode:404}))},Em=({resourceManager:e,savePreferences:t,saveIssueTabs:s,saveProjectContext:n,storeFieldsWithContext:a,storeIssueLayoutData:i,storeEcosystemData:r,attachmentActions:o,permissionActions:c,jiraSettingsActions:l,store:d,baseUrl:u,issueContextActions:p,issueKey:m})=>{const f=e.getGiraData(),b=e.getGqlData();if(!f||f.permissions){if(((e,t)=>{const s=e.getGiraData(),n=e.getGqlData();if(Object($.isViewIssueSlaOnMissingGiraDataEnabled)()&&s&&!s.viewIssue)return vm("Call to gira returned empty viewIssue with errors",e.getGiraErrors(),t),!1;if(Object($.is2afErrorCleanupGroup2Enabled)()&&n){
if(!n.issue)return vm("Call to graphql returned empty issue with errors",e.getGqlErrors(),t),!1;if(!n.project)return vm("Call to graphql returned empty project with errors",e.getGqlErrors(),t),!1}return!0})(e,d)&&f&&f.viewIssue&&b){const{readToken:e,uploadToken:g,userToken:h}=f.mediaContext||{};if(e){const t=Object(bm.b)(e);d.dispatch(yt(t))}else d.dispatch(ht());if(g)if(null!=g.clientId&&null!=g.endpointUrl&&null!=g.targetCollection&&null!=g.token&&null!=g.tokenDurationInMins){const e=an({clientId:g.clientId,endpointUrl:g.endpointUrl,targetCollection:g.targetCollection,token:g.token,tokenDurationInMins:g.tokenDurationInMins});d.dispatch(Object(nn.d)(e))}else null!=g.error?d.dispatch(Object(nn.b)(new Error(g.error))):d.dispatch(Object(nn.b)({statusCode:500}));else d.dispatch(Object(nn.c)());if(h){const e=Object(bm.c)(h);d.dispatch(ln(e))}const y=Object(gm.c)(b,u),O=Om(Om({},Object(fm.d)(f)),y);s(O.issue.tabs);const{project:j}=O;if(j){const e=O.issueTypes.map(hm)
;n(Object(je.s)(j.projectKey),Om(Om({},j),{},{issueTypes:e}))}a(O.issue.fields),i(O.issueSections),t(O.myPreferences),r(O.ecosystem),d.dispatch(Object(V.d)(O)),O.attachments&&o.setVisibleAttachments(m,O.attachments.nodes),O.attachments&&o.setTotalCount(m,O.attachments.totalCount),O.attachments&&"number"==typeof O.attachments.deletableCount&&o.setDeletableCount(m,O.attachments.deletableCount),O.permissions&&j&&c.setProjectPermissions(Object(je.s)(j.projectKey),O.permissions),O.jiraSettings&&l.setJiraSettings(O.jiraSettings),(e=>!!e)(O.issue.viewScreenId)&&p&&p.mergeIssueContext({viewScreenId:O.issue.viewScreenId})}}else d.dispatch(Object(V.b)({error:"NOT_FOUND_OR_NO_PERMISSION_ERROR",statusCode:404}))};function wm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function km(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?wm(Object(s),!0).forEach((function(t){Cm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Cm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Sm=(e,t)=>{const{baseUrl:s,cloudId:n,licensedProducts:a,locale:i,atlassianAccountId:r,productCrossSellConfig:o,siteAdminStatus:c,isAnonymous:l,appEditions:d,appPermissions:u,licenseStates:p,firstActivationDateMs:m}=t;return{analyticsSource:e.analyticsSource,appEditions:d,appPermissions:u,atlassianAccountId:r,baseUrl:s,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,cloudId:n,estimationStatistic:e.estimationStatistic,firstActivationDateMs:m,isAnonymous:l,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,
isSpaEnabled:e.isSpaEnabled,issueKey:e.issueKey,licensedProducts:a,licenseStates:p,locale:i,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(ve.a)(),onIssueKeyChange:e.onIssueKeyChange,productCrossSellConfig:o,rapidViewId:e.rapidViewId,rapidViewMap:e.rapidViewMap,siteAdminStatus:c,viewMode:e.viewMode}},Im=e=>{var t;return{analyticsSource:e.analyticsSource,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,estimationStatistic:e.estimationStatistic,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,isSpaEnabled:e.isSpaEnabled,issueId:e.issueId,issueKey:e.issueKey,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(ve.a)(),onIssueKeyChange:e.onIssueKeyChange,rapidViewId:e.rapidViewId,rapidViewMap:null===(t=e.rapidViewMap)||void 0===t?void 0:t.map((e=>e.map((e=>Object(je.m)(e))))),viewMode:e.viewMode}},Tm=["attributes"];function _m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Pm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_m(Object(s),!0).forEach((function(t){xm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Dm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}
const Am=({children:e,isModal:t})=>Object($.isEmptyStateEnabled)()&&!t?c.a.createElement(b.a,null,e):e,Mm=e=>{const{analyticsSource:t,backButtonUrl:s,boardId:n,boardType:a,dispatchExternalActionRef:i,estimationStatistic:r,isLoadedWithPage:l,isModal:d,issueKey:u,isSpaEnabled:b,loginRedirectUrl:_,rapidViewId:B,rapidViewMap:H,viewMode:G,children:q}=e,z=Object(R.c)(),Y=Object(M.a)(),Z=Object(P.a)(),[,X]=(()=>{const[,e]=Q(),t=Object(o.useCallback)((t=>e.getRecentIssue(t)),[e]),s=Object(o.useCallback)(((t,s)=>e.setRecentIssue(t,s)),[e]),n=Object(o.useCallback)((()=>e.getRecentIssuesCount()),[e]);return[null,Object(o.useMemo)((()=>({setRecentIssue:s,getRecentIssue:t,getRecentIssuesCount:n})),[t,s,n])]
})(),[,ee]=Object(y.b)(),[,se]=Object(O.e)(),[ne]=Object(J.a)(),[,ae]=Object(w.a)(),[,ie]=Object(g.b)(),[,re]=Object(v.b)(),[,oe]=Object(A.e)(),[,ce]=Object(h.e)(),[,le]=Object(S.a)(),[,de]=Object(C.a)(),[,ue]=Object(k.a)(),[,pe]=Object(E.a)(),[,me]=Object(L.a)(),[,fe]=Object(D.d)(),[,be]=Object(T.a)();if(Object($.isUseEditFieldLegacyEventsBackwardsCompatible)()){const[,{registerEventHandler:t}]=Object(I.a)();Object(o.useEffect)((()=>{const s=t("onChange",e.onChange);return()=>s()}),[e.onChange,t])}const he=Object(o.useMemo)((()=>((e,t,s,n,a,i,r,o,c,l,d,u,p,m,f,b,g,h,y)=>{const O=n.getRecentIssue(e.issueKey),j=O?km(km({},O),{},{context:km(km({},O.context),Sm(e,t))}):void 0;return mm({attachmentActions:u,onChange:e.onChange,onError:e.onError,dataProvider:s,history:e.history||ye()(),initialState:j,issueKey:e.issueKey,fieldsValueActions:a,fieldsConfigActions:i,issueViewLayoutActions:r,forgeActions:o,ecosystemActions:c,prefetchedResourceManager:d,recentIssuesActions:n,
userPreferenceActions:l,issueScrollActions:p,permissionActions:m,issueTabsActions:f,jiraSettingsActions:b,projectContextActions:g,issueContextActions:h,workflowTransitionsActions:y})})(e,z,Y,X,se,ee,le,de,ue,ae,ne,ie,re,oe,pe,me,fe,ce,be)),[]),Oe=Object(o.useCallback)((()=>{const e=he.getState(),t=Object(W.a)(e),{attributes:s}=t;return Pm(Pm({},Dm(t,Tm)),s)}),[he]),je=Object(o.useCallback)((e=>{const t=Object(U.d)(e);he.dispatch(t)}),[he]);Object(o.useMemo)((()=>{((e,t,s,n,a,i,r,o,c,l,d,u,p,m,f,b,g,h,y,O)=>{const j=a.getRecentIssue(e.issueKey),v=a.getRecentIssuesCount(),E={analyticsSource:e.analyticsSource,isLoadedWithPage:e.isLoadedWithPage||!1,isSPA:!e.isInitialRender,isRecentIssue:!!j,recentIssuesCount:v,dataProvider:s,store:n,route:f};Object($.isReportingAttachmentViewEnabled)()&&(E.userPreferenceActions=o),Object(K.a)(E),n.dispatch(F(Sm(e,t))),u.setIssueContext(Im(e)),e.dispatchExternalActionRef&&e.dispatchExternalActionRef(l),j?n.dispatch(Object(V.g)()):(c&&Em({resourceManager:c,
savePreferences:e=>o.setUserPreferences(e),storeFieldsWithContext:t=>Vr(t,i,r,e.issueKey),storeIssueLayoutData:t=>{b.setIssueViewLayout(e.issueKey,t)},storeEcosystemData:e=>{h.setEcosystem(e)},saveIssueTabs:t=>m.setIssueTabs(e.issueKey,t),saveProjectContext:(e,t)=>{O.setProjectContext(e,t)},permissionActions:p,attachmentActions:d,jiraSettingsActions:y,store:n,baseUrl:t.baseUrl,issueContextActions:u,issueKey:e.issueKey}),c&&c.isAllDataReady()?(Object(K.c)(),n.dispatch(Object(V.a)()),c.clearAll()):(Object(K.g)(),Object(K.h)(),n.dispatch(Object(V.c)())),n.dispatch((()=>({type:"FETCH_LOGGED_IN_USER_REQUEST"}))())),j||n.dispatch(Ee(e.issueKey))})(e,z,Y,he,X,se,ee,ae,ne,je,ie,ce,oe,pe,Z,le,0,ue,me,fe)}),[]),Object(o.useEffect)((()=>()=>{const e=he.getState();"COMPLETE"===e.ui.loadingStage&&X.setRecentIssue(u,e)}),[u,X,he]);const ve=Object(o.useRef)(!0);return Object(o.useEffect)((()=>{ve.current||(he.dispatch(F(Sm(e,z))),ce.setIssueContext(Im(e))),
Object($.isRemoveDuplicateGiraEnabled)()||(ve.current=!1)}),[s,u,_,B,a,n,l,d,H,r,t,G]),Object(o.useEffect)((()=>{if(!ve.current){X.getRecentIssue(e.issueKey)&&he.dispatch(Object(V.g)())}Object($.isRemoveDuplicateGiraEnabled)()&&(ve.current=!1)}),[e.issueKey,X,he]),Object(o.useEffect)((()=>()=>{ne&&ne.clearAll(),!1!==b&&null!=b||setTimeout((()=>he.dispatch(f.a))),i&&i(null)}),[]),Object(K.i)(),c.a.createElement(j.a,null,c.a.createElement(N.a,{scope:u},c.a.createElement(Am,{isModal:d},c.a.createElement(p.a,{store:he},c.a.createElement(x.a,{getAttributes:Oe},c.a.createElement(ge,null),c.a.createElement(te,null),c.a.createElement(m.a,null,q))))))};Mm.displayName="AppProvider";const Lm=e=>c.a.createElement(_.a,{scope:e.issueKey},c.a.createElement(Mm,e));Lm.displayName="ScopedAppProvider";var Rm=Lm;s.a=i()(r.a,(()=>e=>{var t,s;return s=t=class extends o.Component{constructor(...e){super(...e),this.MetricsContext=Object(u.b)(this.props.metrics)}render(){const{MetricsContext:t}=this
;return c.a.createElement(t.Provider,{value:Object(u.a)(this.props.metrics)},c.a.createElement(e,this.props))}},t.displayName=`WithMetricsProvider(${e.displayName||e.name})`,s})(),(function(e){return t=>c.a.createElement(l.a,null,(s=>c.a.createElement(e,d({},t,{isInitialRender:s.isInitialRender}))))}))(Rm)},"./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg":function(e,t,s){e.exports=s.p+"assets/auth-error.37d7a62ee1c48c2d5ae201ec8f798f18.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg":function(e,t,s){e.exports=s.p+"assets/permission-error.c932893e3cfcbf2f521d55c8596010e7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg":function(e,t,s){e.exports=s.p+"assets/unknown-error.0ae7398ce07e7e3c1125e09977c8fd48.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/issue-app.js":function(e,t,s){"use strict";s.r(t);const n=e=>{try{window.performance.mark(e)}catch(t){}
},a="jira.issue-view.issue-app.eval-start",i="jira.issue-view.issue-app.eval-end";n(a);var r=s("./node_modules/react/index.js"),o=s.n(r),c=s("./node_modules/lodash/noop.js"),l=s.n(c),d=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),u=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),m=s("./src/packages/growth/up-flow/persistent-upgrade-banner/src/async.js"),f=s("./src/packages/issue/issue-view/src/common/util/events/index.js");const b=[u.a.FULL_ISSUE,u.a.SERVICEDESK_QUEUES_ISSUE,u.a.SERVICEDESK_REPORTS_ISSUE];var g=s("./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js"),h=s("./src/packages/issue/issue-view/src/views/banner/index.js"),y=s("./node_modules/react-redux/es/index.js"),O=s("./node_modules/react-async-component/commonjs/index.js");const j=Object(O.asyncComponent)({
resolve:()=>s.e("async-issue-details-opt-in-back-onboarding").then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/onboarding/index.js")).then((e=>e.default)),name:"AsyncOptInBackOnboarding"});var v=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),E=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js");const w=({hasEditField:e,hasShowMoreLink:t})=>{const s={hasShowMoreLink:t,hasEditField:e};return o.a.createElement(j,s)};w.displayName="ChangeBoardingTour";var k=Object(y.connect)((e=>({hasEditField:Object(E.a)(e),hasShowMoreLink:Object(v.d)(e)
})),{})(w),C=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js"),S=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),I=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),T=s("./src/packages/platform/utils/types/src/general.js"),_=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),P=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),x=s("./src/packages/issue/issue-view/src/feedback-button/index.js"),D=s("./src/packages/platform/utils/constants/src/application-keys.js");const A={[D.a.SOFTWARE_ISSUE]:{feedbackGroupId:"jira-software-full-issueview",collectorId:"12f21050"},[D.a.CORE_ISSUE]:{feedbackGroupId:"jira-core-full-issueview",collectorId:"f7ac9eb0"},[D.a.SERVICE_DESK]:{feedbackGroupId:"jira-service-desk-full-issueview",collectorId:"3311e016"},[D.a.BITBUCKET_ISSUE]:{
feedbackGroupId:"bitbucket-jira-issueview",collectorId:"e7fdb917"}};function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const L=({applicationKey:e,baseUrl:t,locale:s,isCompact:n=!1})=>{if(null==e||!(e=>Boolean(A[e]))(e))return null;const a=A[e];return o.a.createElement(P.a,{name:"GIVE_FEEDBACK"},o.a.createElement(x.a,M({},a,{baseUrl:t,locale:s,isCompact:n})))};L.displayName="Feedback";var R=L;const N=Object(y.connect)((e=>({baseUrl:Object(T.c)(Object(_.f)(e)),locale:Object(_.y)(e),applicationKey:Object(_.e)(e)})),{})(R);const F=(e,t=!0)=>o.a.createElement(N,{isCompact:t});F.displayName="renderFeedback";s("./node_modules/react-magnetic-di/lib/esm/index.js")
;var U=s("./src/packages/platform/controllers/global/document-title/src/index.js"),V=s("./src/packages/issue/issue-context-service/src/main.js"),K=s("./src/packages/issue/fields/summary/src/services/index.js");const $=({location:e})=>{const t=Object(V.g)(),[{value:s}]=Object(K.a)({issueKey:t});return e!==u.a.FULL_ISSUE&&e!==u.a.SERVICEDESK_QUEUES_ISSUE&&e!==u.a.SERVICEDESK_REPORTS_ISSUE||null==s?null:o.a.createElement(U.a,{title:`[${t}] ${s}`})};$.displayName="ExtractedDocumentTitle"
;var W=$,B=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),H=s("./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js"),G=s("./src/packages/platform/utils/constants/src/project-types.js"),q=s("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js"),z=s("./src/packages/platform/services/providers-project-context/src/index.js"),Y=s("./src/packages/routes/src/ui/spa/servicedesk/is-itsm-project/resources/index.js"),Q=s("./src/packages/servicedesk/change-management-tour/src/async.js"),J=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),Z=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),X=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const ee=["isServiceDeskAgent","projectType","projectId"];function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function se(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ne=e=>{let{isServiceDeskAgent:t,projectType:s,projectId:n}=e,a=se(e,ee);const{data:i}=Object(Y.a)();return null===n||!0!==i||!0!==t?null:o.a.createElement(q.a,{id:"changeManagementTourIssue",packageName:"jiraServicedeskChangeManagementTourIssue",fallback:"flag"},o.a.createElement(z.a,null,(({data:e})=>e&&!0===e.isProjectAdmin?o.a.createElement(Q.a,te({projectId:Object(T.r)(n.toString())},a)):null)))};ne.displayName="ChangeManagementTour";var ae=Object(y.connect)((e=>({fields:Object(J.s)(e),
projectId:Object(Z.C)(e),projectType:Object(Z.F)(e),isServiceDeskAgent:Object(X.f)(e)})),{})((e=>e.projectType!==G.g?null:o.a.createElement(ne,e))),ie=s("./src/packages/servicedesk/incident-management-tour/src/async.js");const re=["isServiceDeskAgent","projectId","projectType"];function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ce(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const le=e=>{let{isServiceDeskAgent:t,projectId:s,projectType:n}=e,a=ce(e,re);const{data:i}=Object(Y.a)()
;return null===s||!0!==i||!0!==t?null:o.a.createElement(q.a,{id:"incidentManagementTourIssues",packageName:"jiraServicedeskIncidentManagementTour",fallback:"flag"},o.a.createElement(z.a,null,(({data:e})=>e&&!0===e.isProjectAdmin?o.a.createElement(ie.a,oe({projectId:Object(T.r)(s.toString())},a)):null)))};le.displayName="IncidentManagementTour";var de,ue,pe,me=Object(y.connect)((e=>({fields:Object(J.s)(e),projectId:Object(Z.C)(e),projectType:Object(Z.F)(e),isServiceDeskAgent:Object(X.f)(e)})),{})((e=>e.projectType!==G.g?null:o.a.createElement(le,e))),fe=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),be=s("./src/packages/issue/issue-view/src/views/issue-details/issue-view.js"),ge=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),he=s("./src/packages/issue/issue-view/src/common/metrics/index.js"),ye=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js")
;const Oe=new Set([u.a.SOFTWARE_ISSUE,u.a.AGILITY_BACKLOG]),je=[u.a.FULL_ISSUE,u.a.SERVICEDESK_QUEUES_ISSUE,u.a.SERVICEDESK_REPORTS_ISSUE];let ve=Object(d.b)("issue")((pe=ue=class extends r.PureComponent{constructor(e){super(e),this.onEscape=e=>{Object(f.c)(e)&&(this.props.onClose(),e.preventDefault())},this.canCloseOnEsc=()=>Oe.has(this.props.analyticsSource),this.getRenderFeedback=()=>{const{analyticsSource:e}=this.props;if(b.includes(e))return F},this.renderTopBanner=()=>{const{analyticsSource:e}=this.props;return b.includes(e)?o.a.createElement(m.a,{isBannerEnabled:!0,isFullWidth:!0}):null},this.renderIssueView=()=>{const e=this.getIssueViewProps();return o.a.createElement(be.default,e)},this.renderChangeboardingTour=()=>je.includes(this.props.analyticsSource)?o.a.createElement(k,null):null,this.isMobile=()=>this.props.analyticsSource===u.a.MOBILE_ISSUE,this.isFullPage=e=>e===u.a.FULL_ISSUE,this.getIssueViewProps=()=>({renderFeedback:this.getRenderFeedback(),issueDeleteCallbacks:{
onIssueDeleteSuccess:this.props.onIssueDeleteSuccess,onIssueDeleteFailure:this.props.onIssueDeleteFailure},viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:this.props.shouldShowCloseButton,issueMaxWidth:this.props.issueMaxWidth});const{analyticsSource:t}=e;Object(he.j)(this.isFullPage(t))}componentDidMount(){this.canCloseOnEsc()&&document.addEventListener("keydown",this.onEscape)}UNSAFE_componentWillReceiveProps(e){if(e.issueKey!==this.props.issueKey){const{analyticsSource:e}=this.props;Object(he.j)(this.isFullPage(e))}}componentWillUnmount(){this.canCloseOnEsc()&&document.removeEventListener("keydown",this.onEscape)}renderHeader(){
const{onClose:e,shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,onIssueDeleteSuccess:a,onIssueDeleteFailure:i,viewModeOptions:r}=this.props;return this.isMobile()?o.a.createElement(ge.a,{shouldUseDeprecatedScrollParent:!0,elementId:"jira-issue-header",customStyles:`padding-left: ${3*p.e}px; padding-right: ${3*p.e}px;`},o.a.createElement(B.a,{shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,issueDeleteCallbacks:{onIssueDeleteSuccess:a,onIssueDeleteFailure:i},onClose:e,renderFeedback:this.getRenderFeedback(),viewModeOptions:r})):null}render(){const{analyticsSource:e,backButtonUrl:t,dispatchExternalActionRef:s,ecosystemEnabled:n,estimationStatistic:a,history:i,isCompact:c,isLoadedWithPage:l,isSpaEnabled:d,issueActions:u,issueId:p,issueKey:m,loginRedirectUrl:f,metrics:b,onChange:y,onError:O,onIssueKeyChange:j,rapidViewId:v,rapidViewMap:E,viewModeOptions:w,issueMaxWidth:k}=this.props,T={
analyticsSource:e,backButtonUrl:t,dispatchExternalActionRef:s,ecosystemEnabled:n,estimationStatistic:a,history:i,isLoadedWithPage:l,isSpaEnabled:d,issueActions:u,issueId:p,issueKey:m,loginRedirectUrl:f,metrics:b,onChange:y,onError:O,onIssueKeyChange:j,rapidViewId:v,rapidViewMap:E,viewMode:w&&w.viewMode},_=this.isMobile()?r.Fragment:fe.a,P=this.isMobile()?r.Fragment:fe.b;return o.a.createElement(o.a.Fragment,null,"full-issue"===e&&o.a.createElement(ye.a,null),o.a.createElement(H.a,T,o.a.createElement(W,{location:e}),o.a.createElement(C.c,{defaultIsCompact:c},o.a.createElement(S.a,null,o.a.createElement(I.a,null,o.a.createElement(_,{issueMaxWidth:k},o.a.createElement(P,null,this.renderChangeboardingTour(),o.a.createElement(h.a,{renderTopBanner:this.renderTopBanner}),this.renderHeader())),o.a.createElement(g.a,null),this.renderIssueView(),o.a.createElement(ae,{currentIssueKey:m}),o.a.createElement(me,{currentIssueKey:m}))))))}},ue.defaultProps={isCompact:!1,isLoadedWithPage:!1,
isSpaEnabled:!1,shouldShowRootProjectsBreadcrumb:!1,viewModeOptions:{viewModeSwitchEnabled:!1},onClose:l.a,onIssueDeleteSuccess:l.a,onIssueDeleteFailure:l.a},de=pe))||de;t.default=ve;(()=>{n(i)})()},"./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js")
;const a=4*s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js").e,i=e=>`calc((100% - ${e}px) / 2)`,r=(e,t)=>`\n        ${e}: ${i(t)}; /* for browsers which do not support max(); negative padding is ignored by browsers */\n        ${e}: max(${i(t)}, 0px); /* for browsers which support max() */\n        \n        .msie-11 & { /* IE11 is the only browser which does not ignore negative padding */\n            ${e}: 0;\n        }\n    `,o=n.default.div.withConfig({componentId:"pt6h3e-0"})`flex-shrink:0;${({issueMaxWidth:e})=>void 0!==e?`\n        ${r("padding-left",e)}\n        ${r("padding-right",e)}    \n        `:""}`,c=n.default.div.withConfig({componentId:"pt6h3e-1"})`padding:0 ${a}px;`},"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return d})),s.d(t,"a",(function(){return u})),s.d(t,"g",(function(){return p})),s.d(t,"b",(function(){return m
})),s.d(t,"h",(function(){return f})),s.d(t,"f",(function(){return b})),s.d(t,"e",(function(){return g}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),i=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js"),r=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),o=s("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js");const c=1.5*a.e,l=n.default.div.withConfig({componentId:"mffpf0-0"})`padding:0 ${4*a.e}px ${i.c}px;${({issueMaxWidth:e})=>void 0!==e?`padding-top: ${i.b}px;`:""} ${({isLeftmost:e,isRightmost:t})=>e?`\n                padding-left: ${r.d}px;\n                padding-right: ${3*a.e}px;\n                `:t?`\n                padding-left: ${2*a.e}px;\n                padding-right: ${r.d-1.5*a.e}px;\n                `:""}`,d=n.default.div.withConfig({componentId:"mffpf0-1"
})`flex-grow:1;${({scrollHidden:e})=>e?n.css`overflow:hidden;${l}{border-right:${15}px solid transparent;}`:"\n        overflow-x: hidden; /* 2 value shorthand syntax is not supported in IE11 */\n        overflow-y: auto;\n   "};${({medium:e,isLeftmost:t,isRightmost:s,issueMaxWidth:n})=>{const a=e/10,i=s?c:t?-c:0,l=void 0!==n;return`\n            width: ${`${(100*a).toFixed(3)}%`};\n            width: ${`calc(${a} * min(${Object(o.a)()}px, 100%) + ${i}px)`};\n            ${t&&l?Object(r.c)("padding-left",n):""}\n            ${s&&l?Object(r.c)("padding-right",n):""}\n        `}}`,u=n.default.div.withConfig({componentId:"mffpf0-2"})`margin-top:${3*a.e}px;`,p=n.default.div.withConfig({componentId:"mffpf0-3"})`position:relative;height:100%;`,m=n.default.div.withConfig({componentId:"mffpf0-4"
})`display:flex;flex-wrap:wrap;flex-direction:row;align-items:flex-start;justify-content:space-between;align-content:stretch;margin-left:${-a.e}px;margin-bottom:${3*a.e}px;padding-left:${1.25*a.e}px;`,f=n.default.div.withConfig({componentId:"mffpf0-5"})`visibility:${e=>e.show?"visible":"hidden"};`,b=n.default.div.withConfig({componentId:"mffpf0-6"})`height:100%;${({scrollHidden:e})=>e?n.css`overflow:hidden;border-right:${15}px solid transparent;`:"\n        overflow: auto;\n   "};`,g=n.default.div.withConfig({componentId:"mffpf0-7"})`${({issueMaxWidth:e})=>void 0===e?`padding: 0 ${2.5*a.e}px;`:`padding: ${i.b}px ${4*a.e}px ${i.c}px;`}`;n.default.div.withConfig({componentId:"mffpf0-8"})``},"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>1680},"./src/packages/issue/issue-view/src/views/issue-details/issue-modal.styled.js":function(e,t,s){"use strict";s.d(t,"g",(function(){return o
})),s.d(t,"f",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"e",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),r=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js");const o=n.default.div.withConfig({componentId:"sc-9jew1s-0"})`width:100%;${r.a}{padding-left:0;}`,c=Object(n.default)(a.d).withConfig({componentId:"sc-9jew1s-1"})`&&&{padding-left:${4*i.e}px;padding-right:${4*i.e}px;padding-bottom:8px;}`,l=n.default.div.withConfig({componentId:"sc-9jew1s-2"})`position:fixed;top:0;left:0;`,d=n.default.div.withConfig({componentId:"sc-9jew1s-3"})`margin:0 ${-3*i.e}px;`,u=n.default.div.withConfig({
componentId:"sc-9jew1s-4"})`overflow-x:hidden;overflow-y:auto;> div{height:100%;}`,p=n.default.div.withConfig({componentId:"sc-9jew1s-5"})`height:100%;`,m=n.default.div.withConfig({componentId:"sc-9jew1s-6"})`padding-bottom:${r.c}px;`;n.default.div.withConfig({componentId:"sc-9jew1s-7"})``},"./src/packages/issue/issue-view/src/views/issue-details/issue-view.js":function(t,s,n){"use strict";n.r(s),n.d(s,"Issue",(function(){return iN}));var a={};n.r(a),n.d(a,"setSortableIssueIds",(function(){return MO})),n.d(a,"setSortBy",(function(){return LO}));var i={};n.r(i),n.d(i,"setAddFormButton",(function(){return xP}))
;var r=n("./node_modules/react/index.js"),o=n.n(r),c=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/lodash/noop.js"),d=n.n(l),u=n("./node_modules/query-string/index.js"),p=n.n(u),m=n("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),f=n("./node_modules/@atlaskit/smart-card/dist/es2019/state/context/provider.js"),b=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),g=n("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),h=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js"),y=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),O=n("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),j=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),v=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),E=n("./src/packages/servicedesk/incident-management/update-affected-services-flag/src/async.js"),w=n("./src/packages/servicedesk/incident-management/update-assignee-flag/src/async.js"),k=n("./src/packages/servicedesk/incident-management/update-incident-modal/src/async.js"),C=n("./src/packages/shortcuts-dialog/src/ui/main.js"),S=n("./src/packages/platform/ui/skeletons/src/ui/issue/index.js")
;var I=n("./node_modules/react-intl/lib/index.es.js"),T=n("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),_=n("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),P=n("./src/packages/issue/worklog/src/services/context/index.js"),x=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),D=n("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),A=n("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),M=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),L=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),R=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),N=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),F=n("./src/packages/issue/issue-view/src/selectors/status-selector.js"),U=n("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),V=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),K=n("./src/packages/time-tracking-formatter/src/main.js"),$=n("./src/packages/platform/ui/error-boundary/src/main.js"),W=n("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),B=n("./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js"),H=e=>""===e.trim()||Object(B.a)(e),G=n("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),q=n("./src/packages/issue/issue-view/src/common/util/types/type-check/index.js"),z=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),Y=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),Q=n("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),J=n("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),Z=n("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),X=Object(I.defineMessages)({
save:{id:"issue.log-time.modal.log-time-action.save",defaultMessage:"Save"},cancel:{id:"issue.log-time.modal.log-time-action.cancel",defaultMessage:"Cancel"}}),ee=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),te=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const se=ee.default.div.withConfig({componentId:"sc-4ej3cw-0"})`display:inline-flex;justify-content:flex-end;align-items:center;width:100%;>:not(:first-child){margin-left:${te.e/2}px;}`,ne=ee.default.div.withConfig({componentId:"sc-4ej3cw-1"})`> *{display:flex;}margin-right:${te.e}px;`,ae=()=>o.a.createElement(ne,null,o.a.createElement(Z.a,{size:"small"}));ae.displayName="renderSpinner";const ie=e=>{const{formState:t,onConfirm:s,onCancel:n,intl:a}=e;return o.a.createElement(se,null,"submitting"===t?ae():null,o.a.createElement(J.a,{appearance:"primary",onClick:s,isDisabled:"invalid"===t||"submitting"===t},a.formatMessage(X.save)),o.a.createElement(J.a,{appearance:"subtle",
onClick:n,isDisabled:"submitting"===t},a.formatMessage(X.cancel)))};ie.displayName="LogTimeModalFooter";var re=ie,oe=Object(I.injectIntl)(re),ce=n("./node_modules/@atlaskit/form/dist/es2019/field.js"),le=n("./node_modules/moment-timezone/index.js"),de=n.n(le);const ue=(e,t,s,n)=>{const a=de.a.tz(e,n);return a.isValid()&&e?{dateValue:a.format("YYYY-MM-DD"),timeValue:a.format("HH:mm"),zoneValue:a.format("ZZ")}:{dateValue:t,timeValue:s,zoneValue:de()().tz(n).format("ZZ")}};var pe=n("./node_modules/lodash/isNaN.js"),me=n.n(pe),fe=n("./node_modules/lodash/isNil.js"),be=n.n(fe),ge=n("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DateTimePicker.js"),he=n("./src/packages/platform/utils/constants/src/datetimepicker-available-times.js"),ye=n("./src/packages/common-legacy-do-not-add-anything-new/src/date/date-messages.js"),Oe=n("./src/packages/compatibility/src/main.js");class je extends r.Component{constructor(...e){super(...e),this.onChange=e=>{const t=Object(Oe.a)(e)
;this.props.onChange(me()(Date.parse(t))?null:t)},this.parseValue=(e,t,s)=>this.props.parseValue(e,t,s,this.props.timeZone)}render(){const{autoFocus:e,isDisabled:t,value:s,timeZone:n,intl:{formatMessage:a}}=this.props;return o.a.createElement(ge.a,{autoFocus:e,isDisabled:t,value:s||"",onChange:this.onChange,timeIsEditable:!0,parseValue:be()(n)||""===n?void 0:this.parseValue,datePickerSelectProps:{placeholder:a(ye.a.placeholderDate)},timePickerSelectProps:{formatCreateLabel:e=>e,filterOption:(e,t)=>!t||e.value===t||e.label===t},times:he.a})}}je.displayName="LegacyDateTimeFieldView",je.defaultProps={isDisabled:!1,value:void 0,autoFocus:!1};var ve=Object(I.injectIntl)(je),Ee=n("./node_modules/react-loosely-lazy/lib/esm/index.js"),we=n("./src/packages/issue/issue-view/src/common/component/editor/async.js"),ke=Object(I.defineMessages)({label:{id:"issue.log-time.modal.work-description.label",defaultMessage:"Work description"}})
;const Ce=Object(Ee.h)((()=>n.e("async-editor-view").then(n.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class Se extends r.Component{render(){const e=o.a.createElement(we.b,{useDeprecatedGetScrollParent:!0,mediaContext:this.props.mediaContext,defaultValue:this.props.defaultValue});return o.a.createElement(ce.b,{name:"work-description",label:this.props.intl.formatMessage(ke.label)},(()=>o.a.createElement(we.a,{packageName:"issue",fallback:e},o.a.createElement(Ce,{isExpanded:!0,externalId:this.props.externalId,isDisabled:this.props.isDisabled,defaultValue:this.props.defaultValue,portalElement:this.props.portalElement,onChange:this.props.onChange,onChangeFailure:this.props.onChangeFailure,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider}))))}}
Se.displayName="WorkDescription",Se.defaultProps={portalElement:void 0};var Ie=Object(I.injectIntl)(Se),Te=Object(I.defineMessages)({timeRemaining:{id:"issue.log-time.modal.time-remaining",defaultMessage:"Time remaining"},timeSpent:{id:"issue.log-time.modal.time-spent",defaultMessage:"Time spent"},dateStarted:{id:"issue.log-time.modal.date-started",defaultMessage:"Date started"}});const _e=ee.default.div.withConfig({componentId:"sc-1a3rced-0"})`align-items:center;display:flex;flex-direction:row;>:not(:first-child){margin-left:${te.e}px;}`,Pe=ee.default.div.withConfig({componentId:"sc-1a3rced-1"})`width:50%;`,xe=ee.default.div.withConfig({componentId:"sc-1a3rced-2"})`width:100%;`;var De=n("./src/packages/issue/issue-view/src/common/messages/time.js");class Ae extends r.Component{constructor(...e){super(...e),this.state={shouldAppearInvalid:!this.props.isValid},this.onBlur=()=>{this.setState({shouldAppearInvalid:!this.props.isValid})}}UNSAFE_componentWillReceiveProps(e){
!this.props.isValid&&e.isValid&&this.setState({shouldAppearInvalid:!1})}render(){return o.a.createElement("div",{onBlur:this.onBlur},this.props.children(this.state.shouldAppearInvalid))}}Ae.displayName="WithValidationOnBlur";var Me=n("./node_modules/@atlaskit/field-text/dist/esm/FieldTextStateless.js");class Le extends r.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e.target.value)}}render(){return o.a.createElement(Me.a,{value:this.props.value,label:this.props.label,placeholder:this.props.placeholder,isInvalid:this.props.isInvalid,invalidMessage:this.props.isInvalid?this.props.invalidMessage:void 0,disabled:this.props.isDisabled,required:this.props.isRequired,autoFocus:this.props.autoFocus,onChange:this.onChange,onBlur:this.props.onBlur,shouldFitContainer:!0})}}Le.displayName="TimeLogTextField",Le.defaultProps={isInvalid:!1,isRequired:!1,isDisabled:!1,autoFocus:!1,placeholder:void 0,invalidMessage:void 0,onBlur:d.a}
;var Re=n("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");const Ne=ee.default.div.withConfig({componentId:"sc-1hm079h-0"})`padding:${te.e-2}px ${te.e-6}px;`,Fe=ee.default.div.withConfig({componentId:"sc-1hm079h-1"})`list-style:inside;margin-top:${te.e}px;padding-left:${te.e/2}px;padding-bottom:${te.e/2}px;`;class Ue extends r.Component{tooltipContentRender(){const{intl:e}=this.props;return o.a.createElement(Ne,null,o.a.createElement("p",null,e.formatMessage(De.a.exampleFormat,{formatExample:"2w 4d 6h 45m"})),o.a.createElement(Fe,null,o.a.createElement("li",null,e.formatMessage(De.a.weeks,{w:"w"})),o.a.createElement("li",null,e.formatMessage(De.a.days,{d:"d"})),o.a.createElement("li",null,e.formatMessage(De.a.hours,{h:"h"})),o.a.createElement("li",null,e.formatMessage(De.a.minutes,{m:"m"}))))}render(){const{children:e,shouldRenderContent:t}=this.props;return o.a.createElement(Re.a,{content:t?this.tooltipContentRender():null},e)}}Ue.displayName="TimeTrackingTooltip";var Ve=Ue
;const Ke=e=>{const{isValid:t,value:s,onChange:n,onBlur:a,isDisabled:i,intl:r}=e;return o.a.createElement(Ae,{isValid:t},(e=>o.a.createElement(Ve,{shouldRenderContent:t&&!i,intl:r},o.a.createElement(Le,{value:s,isInvalid:e,invalidMessage:De.b,onChange:n,onBlur:a,isDisabled:i,label:r.formatMessage(Te.timeSpent),placeholder:"2w 4d 6h 45m",autoFocus:!0}))))};Ke.displayName="ValidatedLogTimeInput";var $e=Ke,We=({isValid:e,value:t,onChange:s,onBlur:n,isDisabled:a,intl:i})=>o.a.createElement(Ae,{isValid:e},(r=>o.a.createElement(Ue,{shouldRenderContent:e&&!a,intl:i},o.a.createElement(Le,{value:t,isInvalid:r,invalidMessage:De.b,onChange:s,onBlur:n,isDisabled:a,label:i.formatMessage(Te.timeRemaining),placeholder:"2w 4d 6h 45m"}))));class Be extends r.Component{constructor(...e){super(...e),this.onDateStartedChange=e=>{this.props.onDateStartedChange(e)}}render(){const{value:{timeLogged:e,timeRemaining:t,dateStarted:s,workDescription:n}}=this.props
;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_e,null,o.a.createElement(Pe,null,o.a.createElement($e,{value:e,isDisabled:this.props.isDisabled,isValid:this.props.isTimeLoggedValid,onChange:this.props.onTimeLoggedChange,onBlur:this.props.onTimeLoggedBlur,intl:this.props.intl})," "),o.a.createElement(Pe,null,o.a.createElement(We,{value:t,isDisabled:this.props.isDisabled,isValid:this.props.isTimeRemainingValid,onChange:this.props.onTimeRemainingChange,onBlur:this.props.onTimeRemainingBlur,intl:this.props.intl}))),!this.props.isCollapsed&&o.a.createElement(o.a.Fragment,null,o.a.createElement(xe,null,o.a.createElement(ce.b,{name:"date-started",label:this.props.intl.formatMessage(Te.dateStarted),isRequired:!0},(()=>o.a.createElement(ve,{value:s||null,timeZone:this.props.timeZone,parseValue:ue,onChange:this.onDateStartedChange,isDisabled:this.props.isDisabled})))),o.a.createElement(Ie,{defaultValue:n,isDisabled:this.props.isDisabled,portalElement:this.props.portalElement,
onChange:this.props.onWorkDescriptionChange,onChangeFailure:this.props.onWorkDescriptionChangeFailure,externalId:this.props.externalId,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider})))}}Be.displayName="LogTimeModalForm",Be.defaultProps={portalElement:void 0};var He=Object(I.injectIntl)(Be),Ge=(n("./node_modules/react-magnetic-di/lib/esm/index.js"),n("./node_modules/@atlaskit/checkbox/dist/es2019/checkbox.js")),qe=n("./src/packages/platform/controllers/intl/src/index.js"),ze=n("./src/packages/issue/fields/original-estimate/src/ui/view/main.js"),Ye=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Qe=n("./src/packages/issue/issue-view/src/common/component/logged-time/view.js"),Je=Object(I.defineMessages)({includeSubtasksLabel:{id:"issue.log-time-modal.include-subtasks",defaultMessage:"Include subtasks"},
includeChildIssueLabel:{id:"issue.log-time-modal.include-child-issues",defaultMessage:"Include child issues"}}),Ze=n("./node_modules/@atlaskit/theme/dist/es2019/index.js");const Xe=ee.default.p.withConfig({componentId:"sc-74lw5j-0"})`margin-top:${2*te.e}px;`,et=ee.default.div.withConfig({componentId:"sc-74lw5j-1"})`margin-left:-${te.e/2}px;padding-top:${te.e}px;& > label > span{color:${Ze.a.N500};}`;var tt=e=>{const{config:t,value:s,isDone:n,estimatedTime:a,shouldDisplayRollUpDataControl:i,isRollingUpData:c,onToggleRollingUpData:l,isClassicProject:d}=e,u=Object(qe.c)(),{formatMessage:p}=u,m=Object(r.useCallback)((e=>{const s=Object(K.a)(e,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit},u),n=d?()=>o.a.createElement(I.FormattedMessage,{id:"issue.log-time.modal.original-estimate.with-rollup-subtasks",defaultMessage:"The original estimate for this issue and subtasks was {time}.",values:{
time:o.a.createElement(ze.a,{value:s})}}):()=>o.a.createElement(I.FormattedMessage,{id:"issue.log-time.modal.original-estimate.with-rollup-child-issues",defaultMessage:"The original estimate for this issue and child issues was {time}.",values:{time:o.a.createElement(ze.a,{value:s})}});return o.a.createElement(Xe,null,c&&i?o.a.createElement(n,null):o.a.createElement(I.FormattedMessage,{id:"issue.log-time.modal.original-estimate",defaultMessage:"The original estimate for this issue was {time}.",values:{time:o.a.createElement(ze.a,{value:s})}}))}),[t,u,d,c,i]),f=Object(r.useCallback)((()=>o.a.createElement(et,null,o.a.createElement(Ge.a,{isChecked:c,onChange:({target:{checked:e}},t)=>{l(e,t)},label:p(d?Je.includeSubtasksLabel:Je.includeChildIssueLabel),name:"roll-up-time-tracking-toggle-from-dialog"}),o.a.createElement(Ye.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromWorklogDialog"}))),[p,d,c,l])
;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{config:t,value:s,estimatedTime:a,isDone:n,isCompact:!1,isEditable:!1}),i&&f(),"number"==typeof a?m(a):null)};class st extends r.Component{constructor(...e){super(...e),this.state={containerRef:void 0},this.setContainerRef=e=>{this.state.containerRef||this.setState({containerRef:e})},this.renderHeader=()=>o.a.createElement("h3",null,this.props.header),this.renderFooter=()=>o.a.createElement(oe,{formState:this.props.formState,onConfirm:this.props.onSubmit,onCancel:this.props.onCancel})}secondsToTimeString(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(Q.a)(t,s)(e)}timeStringToSeconds(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(G.a)(t,s)(e)}renderProgressTracker(){
const{progressTrackerValue:e,progressTrackerValue:{loggedTime:t,remainingTime:s},estimatedTime:n,rolledUpEstimatedTime:a,config:i,isDone:r,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:d,isClassicProject:u}=this.props;return void 0===t&&void 0===s&&void 0===n&&!1===c?null:o.a.createElement(tt,{config:i,value:e,estimatedTime:l?a:n,isDone:r,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:d,isClassicProject:u})}renderForm(){return o.a.createElement(He,{value:this.props.value,isCollapsed:this.props.isCollapsed,isDisabled:"submitting"===this.props.formState,isTimeLoggedValid:this.props.isTimeLoggedValid,onTimeLoggedBlur:this.props.onTimeLoggedBlur,isTimeRemainingValid:this.props.isTimeRemainingValid,onTimeRemainingBlur:this.props.onTimeRemainingBlur,timeZone:this.props.timeZone,portalElement:this.state.containerRef,onTimeLoggedChange:this.props.onTimeLoggedChange,onTimeRemainingChange:this.props.onTimeRemainingChange,
onDateStartedChange:this.props.onDateStartedChange,onWorkDescriptionChange:this.props.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,activityProvider:this.props.activityProvider,externalId:this.props.externalId})}render(){return o.a.createElement(Y.a,{header:this.renderHeader,footer:this.renderFooter,isOpen:!0,width:"small",onDialogDismissed:this.props.onCancel},o.a.createElement(z.a,{onEscape:this.props.onCancel},o.a.createElement("div",{ref:this.setContainerRef,"data-testid":"issue.issue-view.common.log-time-modal-dialog.contents"},this.renderProgressTracker(),this.renderForm())))}}st.displayName="LogTimeModal",st.defaultProps={isDone:!1,progressTrackerValue:{},estimatedTime:void 0};var nt=n("./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js");function at(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function it(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?at(Object(s),!0).forEach((function(t){rt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):at(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ot extends r.Component{constructor(e){super(e),this.onTimeLoggedBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeLogged,this.onTimeLoggedChange)},this.onTimeRemainingBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeRemaining,this.onTimeRemainingChange)},this.onTimeLoggedChange=e=>{
const t=H(e),s=this.timeStringToSeconds(e)||0;this.setState((({value:n})=>{let a={value:it(it({},n),{},{timeLogged:e,timeLoggedSeconds:s}),hasUserInteracted:!0,isTimeLoggedValid:t};if(t&&this.props.initialValue.timeRemaining){const e=(this.timeStringToSeconds(this.props.initialValue.timeLogged)||0)+(this.props.initialValue.timeRemainingSeconds||0)-s,t=e>0?e:0,n=this.secondsToTimeString(t);a=it(it({},a),{},{value:it(it({},a.value),{},{timeRemaining:n,timeRemainingSeconds:t}),isTimeRemainingValid:!0})}return a}))},this.onTimeRemainingChange=e=>{const t=this.timeStringToSeconds(e)||0;this.setState((({value:s})=>({value:it(it({},s),{},{timeRemaining:e,timeRemainingSeconds:t}),hasUserInteracted:!0,isTimeRemainingValid:H(e)})))},this.onDateStartedChange=e=>{this.setState((({value:t})=>({value:it(it({},t),{},{dateStarted:e}),defaultDateStarted:null,hasUserInteracted:!0})))},this.onWorkDescriptionChange=e=>{this.setState((({value:t})=>({value:it(it({},t),{},{workDescription:e}),
hasUserInteracted:!0})))},this.onSubmit=(e,t)=>{const{value:{workDescription:s}}=this.state,n="string"!=typeof this.state.value.workDescription?Object(V.i)(s):s,a=it(it({},this.getValue()),{},{workDescription:n});this.props.onSubmit(a,t)},this.applyDefaultTimeFormat=(e,t)=>{let s=e.trim();if(Object(q.a)(s)){const{defaultUnit:e}=this.props.config;s=`${s}${Object(nt.a)(e)}`}s!==e&&t(s)},this.state={value:e.initialValue,defaultDateStarted:Date.now(),isTimeLoggedValid:!0,isTimeRemainingValid:!0,hasUserInteracted:!1}}getIsCollapsed(){return this.props.isCollapsible&&!this.state.value.timeLogged}getDateStarted(){const{defaultDateStarted:e,value:{dateStarted:t,timeLogged:s}}=this.state;if(!this.props.shouldUpdateDate||t)return t;if(!e)return null;const n=this.timeStringToSeconds(s)||0;try{return new Date(e-1e3*n).toISOString()}catch(a){return new Date(e).toISOString()}}getValue(){return it(it({},this.state.value),{},{dateStarted:this.getDateStarted()})}getFormState(){
return this.props.isWaiting?"submitting":this.state.hasUserInteracted&&this.props.validator(this.getValue())?"valid":"invalid"}getProgressTrackerValue(){const{value:{timeLogged:e,timeRemaining:t}}=this.state,{initialValue:s,isRollingUpData:n}=this.props,a=n?this.props.rolledUpTimeTracking:this.props.timeTracking,i=(this.timeStringToSeconds(e)||0)-(this.timeStringToSeconds(s.timeLogged)||0),r=i||a.loggedTime?(i||0)+(a.loggedTime||0):void 0,o=this.timeStringToSeconds(t),c=(o||0)-(this.timeStringToSeconds(s.timeRemaining)||0),l="number"==typeof o;let{remainingTime:d}=a;return l&&(d=n?(a.remainingTime||0)+c:o||0),{loggedTime:r,remainingTime:d}}secondsToTimeString(e){const{config:t,intl:s}=this.props,n=it(it({},s),{},{formatMessage:({defaultMessage:e})=>e||""});return Object(K.a)(e,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit},n)}timeStringToSeconds(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config
;return Object(G.a)(t,s)(e)}render(){return o.a.createElement(st,{value:this.getValue(),progressTrackerValue:this.getProgressTrackerValue(),estimatedTime:this.props.estimatedTime,rolledUpEstimatedTime:this.props.rolledUpEstimatedTime,config:this.props.config,header:this.props.header,formState:this.getFormState(),timeZone:this.props.timeZone,isCollapsed:this.getIsCollapsed(),isDone:this.props.isDone,isTimeLoggedValid:this.state.isTimeLoggedValid,isTimeRemainingValid:this.state.isTimeRemainingValid,onSubmit:this.onSubmit,onCancel:this.props.onCancel,onTimeLoggedChange:this.onTimeLoggedChange,onTimeLoggedBlur:this.onTimeLoggedBlur,onTimeRemainingChange:this.onTimeRemainingChange,onTimeRemainingBlur:this.onTimeRemainingBlur,onDateStartedChange:this.onDateStartedChange,onWorkDescriptionChange:this.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,
mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject})}}ot.displayName="LogTimeModalWithValidation",ot.defaultProps={isCollapsible:!1,isDone:!1,isWaiting:!1,shouldUpdateDate:!1};const ct=Object(T.a)({onSubmit:"clicked",onCancel:"clicked",onToggleRollingUpData:"toggleRollingUpData"})(Object(_.b)("worklogModal")(Object(I.injectIntl)(ot)));var lt,dt=e=>o.a.createElement($.a,{id:"issue.issue-view.common.worklog-dialog"},o.a.createElement(W.a,{id:"common.worklog-dialog",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},o.a.createElement(ct,e))),ut=Object(I.defineMessages)({title:{id:"issue.activity.worklog.add-modal.title",defaultMessage:"Time tracking"}});function pt(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(s),!0).forEach((function(t){ft(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ft(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bt=({timeLogged:e,timeRemaining:t,dateStarted:s})=>(!!e||!!t)&&(H(e)||"0"===e)&&H(t)&&!!s;let gt=Object(_.a)("addWorklog",U.a.MODAL)(lt=class extends r.Component{render(){
const{timeTracking:e,rolledUpTimeTracking:t,timeTrackingConfiguration:s,intl:n}=this.props,{timeSpentSeconds:a,remainingEstimateSeconds:i,originalEstimateSeconds:r}=e;let c="";if("number"==typeof i){const e=mt(mt({},n),{},{formatMessage:({defaultMessage:e})=>e||""});c=Object(K.a)(i,{workingHoursPerDay:s.hoursPerDay,workingDaysPerWeek:s.daysPerWeek,timeFormat:s.format||"pretty",defaultUnit:s.defaultUnit},e)}const l={timeLogged:"",timeRemaining:c,timeRemainingSeconds:i,workDescription:V.c,dateStarted:null},u={loggedTime:a,remainingTime:i};return o.a.createElement(o.a.Fragment,null,o.a.createElement(dt,{initialValue:l,timeTracking:u,rolledUpTimeTracking:{loggedTime:t.timeSpentSeconds,remainingTime:t.remainingEstimateSeconds},estimatedTime:r,rolledUpEstimatedTime:t.originalEstimateSeconds,config:s,header:n.formatMessage(ut.title),timeZone:this.props.timeZone,isCollapsible:!0,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!0,validator:bt,
onSubmit:this.props.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:d.a,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject}),o.a.createElement(g.a,null))}})||lt;const ht=["timeTrackingValue","rolledUpTimeTrackingValue"];function yt(){return(yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ot(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a
}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const jt=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,n=Ot(e,ht),[a,{markRollingUpData:i,unmarkRollingUpData:c}]=Object(P.a)(),l=Object(r.useCallback)((e=>{e?i():c()}),[i,c]);return o.a.createElement(gt,yt({},n,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:a,onToggleRollingUpData:l}))};jt.displayName="WrappedWorklogModal";const vt=Object(I.injectIntl)(Object(T.a)({onSubmit:"submitAddWorklog",onCancel:"cancelAddWorklog"})(Object(_.b)("worklog")(jt)));var Et=Object(c.connect)((e=>({timeTrackingConfiguration:Object(N.h)(e),rolledUpTimeTrackingValue:Object(N.j)(e)(!0),timeTrackingValue:Object(N.i)(e),timeZone:Object(L.z)(e),isDone:"DONE"===Object(F.a)(e),isSaving:Object(N.d)(e),mediaContext:Object(R.a)(e),mentionEncoder:Object(D.a)(Object(M.f)(e)),
mentionProvider:Object(A.a)(e),shouldDisplayRollUpDataControl:Object(N.f)(e),isClassicProject:Object(L.m)(e)})),(e=>({onSubmit:(t,s)=>{const{timeLogged:n,timeRemaining:a}=t||{};e(!n&&a?Object(x.O)(a,s):Object(x.n)(t,s))},onCancel:()=>{e(Object(x.p)())}})))(vt),wt=n("./node_modules/lodash/flow.js"),kt=n.n(wt),Ct=n("./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js"),St=n("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),It=n.n(St),Tt=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),_t=Object(I.defineMessages)({delete:{id:"issue.activity.worklog.delete-modal.delete",defaultMessage:"Delete"},deleteHeading:{id:"issue.activity.worklog.delete-modal.delete-heading",defaultMessage:"Delete worklog entry?"},cancel:{id:"issue.activity.worklog.delete-modal.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.activity.worklog.delete-modal.delete-warning",defaultMessage:"Once you delete, it's gone for good."},
adjustCheckboxLabel:{id:"issue.activity.worklog.delete-modal.adjust-checkbox-label",defaultMessage:"Adjust time remaining"},adjustCurrentLabel:{id:"issue.activity.worklog.delete-modal.adjust-current-label",defaultMessage:"Current"},adjustNewLabel:{id:"issue.activity.worklog.delete-modal.adjust-new-label",defaultMessage:"New time remaining"},adjustNewSubtext:{id:"issue.activity.worklog.delete-modal.adjust-new-subtext",defaultMessage:"By default, deleted time ({timeSpent}) is added to the time remaining."}});const Pt=ee.default.div.withConfig({componentId:"sc-1dhj788-0"})`display:flex;margin-top:-${3*te.e}px;`,xt=ee.default.div.withConfig({componentId:"sc-1dhj788-1"})`display:flex;flex-direction:column;align-items:center;max-width:${11*te.e}px;`,Dt=ee.default.div.withConfig({componentId:"sc-1dhj788-2"})`color:#6b778c;font-size:${3*te.e/2}px;font-weight:600;line-height:1.3333333333333333;padding:${5*te.e/2}px 0 ${te.e/2}px 0;`,At=ee.default.div.withConfig({componentId:"sc-1dhj788-3"
})`text-align:center;padding:${1.25*te.e}px;`,Mt=ee.default.div.withConfig({componentId:"sc-1dhj788-4"})`margin:${6*te.e}px ${2*te.e}px ${6*te.e}px ${te.e}px;`,Lt=ee.default.div.withConfig({componentId:"sc-1dhj788-5"})`margin:${2*te.e}px 0 ${2*te.e}px -${.5*te.e}px;`,Rt=ee.default.div.withConfig({componentId:"sc-1dhj788-6"})`width:50%;`,Nt=ee.default.div.withConfig({componentId:"sc-1dhj788-7"})`font-size:${1.25*te.e}px;margin-top:${te.e/2}px;color:${Ze.a.N90};`;var Ft;function Ut(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(s),!0).forEach((function(t){Kt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ut(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Kt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let $t=Object(_.a)("deleteWorklog",U.a.MODAL)(Ft=class extends r.Component{constructor(...e){super(...e),this.secondsToTimeString=e=>{const{intl:t,timeTrackingConfig:s}=this.props,n=Vt(Vt({},t),{},{formatMessage:({defaultMessage:e})=>e||""});return Object(K.a)(e,{workingHoursPerDay:s.hoursPerDay,workingDaysPerWeek:s.daysPerWeek,timeFormat:s.format||"pretty",defaultUnit:s.defaultUnit},n)},this.timeStringToSeconds=Object(G.a)(this.props.timeTrackingConfig.daysPerWeek,this.props.timeTrackingConfig.hoursPerDay),this.state={isAdjustTimeRemainingChecked:!0,timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds+this.timeStringToSeconds(this.props.worklog.timeSpent))},this.onTimeRemainingChange=e=>this.setState({timeRemaining:e.target.value}),this.onCheckboxChange=()=>this.setState({
isAdjustTimeRemainingChecked:!this.state.isAdjustTimeRemainingChecked}),this.onConfirm=(e,t)=>this.props.onConfirm(this.state.isAdjustTimeRemainingChecked?this.state.timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds),this.state.isAdjustTimeRemainingChecked,t),this.originalTimeRemaining=this.secondsToTimeString(this.props.timeRemainingSeconds)}renderTimeRemainingInput(e){const{isDeleting:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n}=this.state;return o.a.createElement(Ae,{isValid:e},(e=>o.a.createElement(Me.a,{value:n,isInvalid:e,invalidMessage:e?De.b:void 0,onChange:this.onTimeRemainingChange,label:s(_t.adjustNewLabel),placeholder:s(De.a.timeInputPlaceholder),disabled:t,required:!0,shouldFitContainer:!0})))}renderContent(e){const{isDeleting:t,worklog:{timeSpent:s},intl:{formatMessage:n}}=this.props,{isAdjustTimeRemainingChecked:a}=this.state
;return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,n(_t.deleteWarning)),o.a.createElement(Lt,null,o.a.createElement(Ge.a,{isChecked:a,isDisabled:t,onChange:this.onCheckboxChange,label:n(_t.adjustCheckboxLabel),name:"adjust-checkbox"})),a&&o.a.createElement(Pt,null,o.a.createElement(xt,null,o.a.createElement(Dt,null,n(_t.adjustCurrentLabel)),o.a.createElement(At,null,this.originalTimeRemaining)),o.a.createElement(Mt,null,o.a.createElement(It.a,null)),o.a.createElement(Rt,null,this.renderTimeRemainingInput(e),o.a.createElement(Nt,null,n(_t.adjustNewSubtext,{timeSpent:s})))))}render(){const{isDeleting:e,onCancel:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n,isAdjustTimeRemainingChecked:a}=this.state,i=Object(B.a)(n);return o.a.createElement(Tt.b,{headerMessage:s(_t.deleteHeading),appearance:"danger",contentMessage:this.renderContent(i),confirmActionText:s(_t.delete),cancelActionText:s(_t.cancel),onConfirm:this.onConfirm,onCancel:t,isLoading:e,
isConfirmDisabled:e||a&&!i,isCancelDisabled:e,externalId:"issue.activity.worklog.delete-modal"},o.a.createElement(g.a,null))}})||Ft;function Wt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(s),!0).forEach((function(t){Ht(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ht(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Gt,qt=kt()(Object(_.b)("worklog"),Object(T.a)({onConfirm:"confirmDeleteWorklog",onCancel:"cancelDeleteWorklog"}),I.injectIntl,Object(c.connect)((e=>({
isDeleting:Object(N.d)(e),worklog:Object(N.a)(e),timeTrackingConfig:Object(N.h)(e),timeRemainingSeconds:Object(Ct.c)(e)})),{dispatchDeleteWorklog:x.r,onCancel:x.p},((e,{dispatchDeleteWorklog:t,onCancel:s})=>Bt(Bt({},e),{},{onCancel:s,onConfirm:(s,n,a)=>{e.worklog&&t(e.worklog.id,s,n,a)}}))))($t),zt=Object(I.defineMessages)({title:{id:"issue.activity.worklog.edit-modal.title",defaultMessage:"Edit work log"}});function Yt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(s),!0).forEach((function(t){Jt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function Jt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zt=()=>({timeLogged:e,timeRemaining:t,dateStarted:s})=>(Object(B.a)(e)||"0"===e)&&H(t)&&!!s;let Xt=Object(_.a)("editWorklog",U.a.MODAL)(Gt=class extends r.Component{constructor(...e){super(...e),this.onSubmit=(e,t)=>{const{worklog:s}=this.props;s&&this.props.onSubmit(s.id,e,t)}}render(){const{worklog:e,timeTracking:t,rolledUpTimeTracking:s,timeTrackingConfiguration:n,intl:a}=this.props;if(!e)return null;const{timeSpentSeconds:i,remainingEstimateSeconds:r,originalEstimateSeconds:c}=t,{daysPerWeek:l,hoursPerDay:u}=n;let p="";if("number"==typeof r){const e=Qt(Qt({},a),{},{formatMessage:({defaultMessage:e})=>e||""});p=Object(K.a)(r,{workingHoursPerDay:n.hoursPerDay,workingDaysPerWeek:n.daysPerWeek,timeFormat:n.format||"pretty",defaultUnit:n.defaultUnit},e)}const m={timeLogged:e.timeSpent,timeLoggedSeconds:Object(G.a)(l,u)(e.timeSpent)||0,timeRemaining:p,
timeRemainingSeconds:r,dateStarted:new Date(e.started).toISOString(),workDescription:e.comment||V.c},f={loggedTime:i,remainingTime:r};return o.a.createElement(o.a.Fragment,null,o.a.createElement(dt,{initialValue:m,timeTracking:f,rolledUpTimeTracking:{loggedTime:s.timeSpentSeconds,remainingTime:s.remainingEstimateSeconds},estimatedTime:c,rolledUpEstimatedTime:s.originalEstimateSeconds,config:n,header:a.formatMessage(zt.title),timeZone:this.props.timeZone,isCollapsible:!1,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!1,validator:Zt(),onSubmit:this.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:d.a,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,
onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject}),o.a.createElement(g.a,null))}})||Gt;const es=["timeTrackingValue","rolledUpTimeTrackingValue"];function ts(){return(ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ss(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ns=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,n=ss(e,es),[a,{markRollingUpData:i,unmarkRollingUpData:c}]=Object(P.a)(),l=Object(r.useCallback)((e=>{e?i():c()}),[i,c])
;return o.a.createElement(Xt,ts({},n,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:a,onToggleRollingUpData:l}))};ns.displayName="WrappedWorklogModal";const as=Object(I.injectIntl)(Object(T.a)({onSubmit:"submitEditWorklog",onCancel:"cancelEditWorklog"})(Object(_.b)("worklog")(ns)));var is=Object(c.connect)((e=>({worklog:Object(N.a)(e),timeTrackingConfiguration:Object(N.h)(e),rolledUpTimeTrackingValue:Object(N.j)(e)(!0),timeTrackingValue:Object(N.i)(e),timeZone:Object(L.z)(e),isDone:"DONE"===Object(F.a)(e),isSaving:Object(N.d)(e),mediaContext:Object(R.a)(e),mentionEncoder:Object(D.a)(Object(M.f)(e)),mentionProvider:Object(A.a)(e),shouldDisplayRollUpDataControl:Object(N.f)(e),isClassicProject:Object(L.m)(e)})),(e=>({onSubmit:(t,s,n)=>{e(Object(x.v)(t,s,n))},onCancel:()=>{e(Object(x.p)())}
})))(as),rs=n("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),os=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),cs=n("./src/packages/issue/issue-context-service/src/main.js"),ls=n("./src/packages/issue/fields/issue-type/src/services/main.js");const ds=ee.default.div.withConfig({componentId:"z43n84-0"})`display:flex;align-items:center;flex-shrink:0;padding:${te.e/2}px 0 ${te.e}px;box-sizing:border-box;`,us=ee.default.span.withConfig({componentId:"z43n84-1"})`margin:0 0 5px 5px;color:${"#6B778C"};`,ps=()=>{const e=Object(cs.g)(),[{value:t}]=Object(ls.a)({issueKey:e});return o.a.createElement(ds,null,o.a.createElement(Re.a,{content:(null==t?void 0:t.name)||"",position:"left"},o.a.createElement(os.a,{alt:(null==t?void 0:t.name)||"",url:null==t?void 0:t.iconUrl})),o.a.createElement(us,null,e))};ps.displayName="Header"
;var ms=ps,fs=n("./node_modules/react-resource-router/build/esm/index.js"),bs=n("./src/packages/platform/services/bento-transition-check/src/utils/index.js"),gs=n("./src/packages/platform/services/bento-transition-check/src/components/index.js"),hs=n("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js"),ys=n("./src/packages/platform/controllers/spa-state/src/common/index.js");class Os extends r.Component{constructor(...e){super(...e),this.hasErrored=!1,this.endOfCriticalPath=void 0,this.errorOnCriticalPath=void 0,this.hasSubmittedMetrics=!1,this.spaState=void 0}componentDidMount(){const{isPreview:e,isComplete:t,metrics:s,lastTransitionStartTime:n,isInitialRender:a}=this.props;this.hasErrored||((e||t)&&s.onPreviewRendered({isInitialRender:a,lastTransitionStartTime:n}),t&&(s.onInteractive({lastTransitionStartTime:n}),this.endOfCriticalPath&&this.endOfCriticalPath()))}componentDidUpdate(e){
const{error:t,metrics:s,isLoading:n,lastTransitionStartTime:a,issueKey:i,isInitialRender:r}=this.props;t&&(this.hasErrored=!0,this.errorOnCriticalPath&&this.errorOnCriticalPath()),this.resetSubmissionStateIfNewView(n,e,i),this.hasErrored||((this.isPreviewModeAfterBentoSpaTransition(e)||this.didBentoMoveOutOfLoadingState(e))&&s.onPreviewRendered({isInitialRender:r,lastTransitionStartTime:a}),(this.didJustMoveToComplete(e)||this.isFirstLoadOfRecentIssue(e))&&(s.onInteractive({lastTransitionStartTime:a}),this.endOfCriticalPath&&this.endOfCriticalPath()))}isFirstLoadOfRecentIssue(e){return this.props.issueKey!==e.issueKey&&this.props.isComplete}resetSubmissionStateIfNewView(e,t,s){(e&&!t.isLoading||s!==t.issueKey)&&(this.hasSubmittedMetrics=!1)}didBentoMoveOutOfLoadingState(e){const{isPreview:t,isComplete:s}=this.props;return e.isLoading&&(t||s)}isPreviewModeAfterBentoSpaTransition(e){const{isPreview:t,issueKey:s}=this.props;return e.issueKey!==s&&t}didJustMoveToComplete(e){
const{isComplete:t}=this.props;return t&&!e.isComplete}render(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ys.a,null,((e,{setAppReady:t,setAppErrorReady:s})=>(this.endOfCriticalPath=t,this.errorOnCriticalPath=s,this.spaState=e,null))))}}Os.displayName="BentoMetrics";var js=Os;function vs(){return(vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Es=e=>null!=e?e-performance.timing.navigationStart:e,ws=e=>{const[{isTransitionCurrentlyAllowed:t}]=Object(gs.b)(),[{isInitialRender:s,lastTransitionStartTime:n}]=Object(hs.b)();return o.a.createElement(fs.f,null,(({route:a})=>o.a.createElement(js,vs({},e,{bentoTransitionCheck:t,isInitialRender:s,lastTransitionStartTime:Es(n),hasBentoEnabledCheck:!!a&&Object(bs.a)(a)}))))};ws.displayName="BentoMetricsWithSpaTimingInfo"
;var ks=ws,Cs=n("./src/packages/issue/issue-view/src/common/metrics/context/index.js");function Ss(){return(Ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var Is=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),Ts=n("./src/packages/issue/issue-view/src/feature-flags.js"),_s=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),Ps=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js"),xs=n("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),Ds=n("./node_modules/@atlaskit/motion/dist/es2019/entering/exiting-persistence.js"),As=n("./node_modules/@atlaskit/motion/dist/es2019/entering/slide-in.js"),Ms=n("./src/packages/issue/issue-view/src/views/common/dropzone-overlay/assets/upload.svg"),Ls=n.n(Ms)
;const Rs=Object(I.defineMessages)({upload:{id:"issue.attachment-dropzone-message",defaultMessage:"Drop file anywhere to upload to this issue"},uploadImage:{id:"issue.attachment-dropzone-message-image",defaultMessage:"Upload Attachment"}});var Ns=n("./node_modules/@atlaskit/motion/dist/es2019/utils/accessibility.js");const Fs=ee.default.div.withConfig({componentId:"sc-1ixwt20-0"})`display:flex;align-items:center;position:absolute;width:290px;height:64px;bottom:${8*te.e}px;z-index:101;background:#ffffff;box-shadow:0px 3px 5px rgba(9,30,66,0.2),0px 0px 1px rgba(9,30,66,0.31);border-radius:3px;right:0;left:0;margin-left:auto;margin-right:auto;${Object(Ns.b)()};`,Us=ee.default.div.withConfig({componentId:"sc-1ixwt20-1"})`width:184px;font-size:16px;font-weight:500;line-height:20px;color:#172b4d;`,Vs=ee.default.img.withConfig({componentId:"sc-1ixwt20-2"})`height:51px;padding:0 20px;`,Ks=()=>{const{formatMessage:e}=Object(qe.c)();return o.a.createElement(Ds.a,{appear:!0
},o.a.createElement(As.a,{enterFrom:"bottom",fade:"inout",duration:800},(t=>o.a.createElement(Fs,t,o.a.createElement(Vs,{src:Ls.a,alt:e(Rs.uploadImage)}),o.a.createElement(Us,null,e(Rs.upload))))))};Ks.displayName="DropzoneOverlay";var $s=Ks,Ws=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),Bs=n("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),Hs=n("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),Gs=n("./node_modules/lodash/find.js"),qs=n.n(Gs),zs=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),Ys=n("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),Qs=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/op-triggers/on-mount-and-update/index.js"),Js=n("./src/packages/platform/ui/flags/src/ui/subscriber/index.js")
;var Zs=n("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),Xs=n("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),en=n("./node_modules/@atlaskit/icon/glyph/editor/error.js"),tn=n.n(en),sn=n("./node_modules/@atlaskit/icon/glyph/editor/success.js"),nn=n.n(sn),an=n("./src/packages/issue/issue-view/src/common/constants/flags.js");const rn=ee.default.span.withConfig({componentId:"sc-4uakfa-0"})`color:${e=>e.color};`,on=o.a.createElement(rn,{size:"medium",color:Ze.a.R300},o.a.createElement(tn.a,{label:""})),cn=o.a.createElement(rn,{size:"medium",color:Ze.a.G300},o.a.createElement(nn.a,{label:""})),ln={[an.i]:{messages:Object(I.defineMessages)({title:{id:"issue.generic-server-error-when-adding-comment-title",defaultMessage:"Comment could not be updated"},description:{id:"issue.generic-server-error-when-adding-comment-description",
defaultMessage:"There was a connection problem and your comment was not successfully updated. Check your network before trying to update or add another comment."}}),icon:on,type:"error"},[an.j]:{messages:Object(I.defineMessages)({title:{id:"issue.server-validation-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.server-validation-error-when-adding-comment-description",defaultMessage:"It might be empty or have invalid formatting. If you copy-pasted, try removing the formatting and adding it directly in the editor."}}),icon:on,type:"error"},[an.k]:{messages:Object(I.defineMessages)({title:{id:"issue.content-exceeded-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.content-exceeded-error-when-adding-comment-description",defaultMessage:"The comment is too long. Try reducing its length, splitting it, or attaching a file to the issue."}}),icon:on,type:"error"},[an.l]:{
messages:Object(I.defineMessages)({title:{id:"issue.server-error-when-deleting-comment-title",defaultMessage:"Comment could not be deleted"},description:{id:"issue.server-error-when-deleting-comment-description",defaultMessage:"There was a connection problem and the comment was not successfully deleted. Try checking your network connection."}}),icon:on,type:"error"},[an.t]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-retrieving-editor-value-title",defaultMessage:"The text editor failed"},description:{id:"issue.error-when-retrieving-editor-value-description",defaultMessage:"Retry your last action, or refresh the page."}}),icon:on,type:"error"},[an.D]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-confirming-rich-text-field-value-description",
defaultMessage:"It may contain formatting we don\u2019t recognize. Try removing the formatting before saving."}}),icon:on,type:"error"},[an.E]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-confirming-rich-text-field-value-description-maximum-length-exceeded",defaultMessage:"It's too long for the field. Try attaching a file or page to the issue, or adding part of the content as comments."}}),icon:on,type:"error"},[an.F]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-saving-empty-required-rich-text-field-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-saving-empty-required-rich-text-field",defaultMessage:"This field is required and cannot be empty."}}),icon:on,type:"error"},[an.d]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-adding-attachment-title",
defaultMessage:"We couldn't save your attachment"},description:{id:"issue.error-when-adding-attachment-description",defaultMessage:"Reload the issue then try adding it again."}}),icon:on,type:"error"},[an.p]:{messages:Object(I.defineMessages)({title:{id:"issue.server-error-when-deleting-issue-link-title",defaultMessage:"We couldn't remove the issue link"},description:{id:"issue.server-error-when-deleting-issue-link-description",defaultMessage:"Try reloading the page and removing the issue link again."}}),icon:on,type:"error"},[an.e]:{messages:Object(I.defineMessages)({title:{id:"issue.server-error-when-deleting-attachment-title",defaultMessage:"Attachment could not be deleted"},description:{id:"issue.server-error-when-deleting-attachment-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}}),icon:on,type:"error"},[an.M]:{messages:Object(I.defineMessages)({title:{
id:"issue.server-error-when-toggle-watch-title",defaultMessage:"We couldn't update your watch status"},description:{id:"issue.server-error-when-toggle-watch-description",defaultMessage:"Check your connection and try clicking watch again."}}),icon:on,type:"error"},[an.y]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-fetching-watchers-title",defaultMessage:"We couldn't load the watchers list"},description:{id:"issue.error-when-fetching-watchers-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},[an.I]:{messages:Object(I.defineMessages)({title:{id:"issue.start-watching-success-title",defaultMessage:"You're watching this issue"},description:{id:"issue.start-watching-success-description",defaultMessage:"We'll notify you when there's activity on it."}}),icon:cn,type:"success"},[an.J]:{messages:Object(I.defineMessages)({title:{id:"issue.stop-watching-success-title",defaultMessage:"You stopped watching this issue"},
description:{id:"issue.stop-watching-success-description",defaultMessage:"We won't notify you about activity on it."}}),icon:cn,type:"success"},[an.C]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-removing-watcher-title",defaultMessage:"We couldn't remove that watcher"},description:{id:"issue.error-when-removing-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},[an.a]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-adding-watcher-title",defaultMessage:"We couldn't add that watcher"},description:{id:"issue.error-when-adding-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},[an.K]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-reordering-subtask",defaultMessage:"We couldn't reorder those subtasks"},description:{id:"issue.error-when-reordering-subtask-description",
defaultMessage:"Wait a few moments, then give it another try."}}),icon:on,type:"error"},[an.A]:{messages:Object(I.defineMessages)({title:{id:"issue.server-error-when-logging-work-title",defaultMessage:"We couldn't add your time spent"},description:{id:"issue.server-error-when-logging-work-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},[an.c]:{messages:Object(I.defineMessages)({title:{id:"issue.assign-to-me-flag-title",defaultMessage:"Successfully assigned to you"},description:{id:"issue.assign-to-me-flag-description",defaultMessage:"You're now the assignee for {issueKey}."}}),icon:cn,type:"success",shouldAutoDismiss:!0},[an.m]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-creating-child-issue-title",defaultMessage:"We couldn't create the child issue"},description:{id:"issue.error-when-creating-child-issue-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},
[an.z]:{messages:Object(I.defineMessages)({title:{id:"issue.error-when-linking-child-issue-title",defaultMessage:"We couldn't link the child issue"},description:{id:"issue.error-when-linking-child-issue-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."}}),icon:on,type:"error"},[an.g]:{messages:Object(I.defineMessages)({title:{id:"change.issue.type.success.title",defaultMessage:"Issue type changed to {destType}"},description:{id:"change.issue.type.success.description",defaultMessage:"Issue type changed"}}),icon:cn,type:"success",shouldAutoDismiss:!1},[an.f]:{messages:Object(I.defineMessages)({title:{id:"change.issue.type.error.title",defaultMessage:"Error changing issue type"},description:{id:"change.issue.type.error.description",defaultMessage:"There was an error changing the issue type. Please try again."}}),icon:on,type:"error",shouldAutoDismiss:!1},[an.o]:{messages:Object(I.defineMessages)({title:{
id:"issue.error-when-deleting-issue-title",defaultMessage:"We couldn't delete {issueKey}"},description:{id:"issue.error-when-deleting-issue-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error",actions:[{messages:Object(I.defineMessages)({content:{id:"issue.error-when-deleting-issue-call-to-action",defaultMessage:"Try again"}}),onClick:({closeFlag:e,retryIssueDelete:t,deleteFailureIssueKey:s})=>{t&&null!=s&&""!==s&&t(s),e()}}]},[an.w]:{messages:Object(I.defineMessages)({title:{id:"issue.activity.worklog.flags.edit-success-title",defaultMessage:"Work log entry updated"}}),icon:cn,type:"success",shouldAutoDismiss:!0},[an.s]:{messages:Object(I.defineMessages)({title:{id:"issue.activity.worklog.flags.delete-success-title",defaultMessage:"Work log entry deleted"}}),icon:cn,type:"success",shouldAutoDismiss:!0},[an.h]:{messages:Object(I.defineMessages)({title:{id:"issue.clickthrough-banner.flags.dismissed.title",defaultMessage:"Banner be gone!"
},description:{id:"issue.clickthrough-banner.flags.dismissed.description",defaultMessage:"You can still open the old view through the \u2022\u2022\u2022 menu on an issue."}}),icon:cn,type:"success",shouldAutoDismiss:!0},[an.b]:{messages:Object(I.defineMessages)({title:{id:"issue.activity.worklog.flags.add-failure-title",defaultMessage:"We couldn't save your changes"},description:{id:"issue.activity.worklog.flags.add-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},[an.L]:{messages:Object(I.defineMessages)({title:{id:"issue.activity.worklog.flags.update-time-remaining-failure-title",defaultMessage:"We couldn't save your edit"},description:{id:"issue.activity.worklog.flags.update-time-remaining-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},[an.v]:{messages:Object(I.defineMessages)({title:{id:"issue.activity.worklog.flags.edit-failure-title",
defaultMessage:"We couldn't save your edit"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},[an.r]:{messages:Object(I.defineMessages)({title:{id:"issue.activity.worklog.flags.delete-failure-title",defaultMessage:"We couldn't delete the work log entry"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},[an.n]:{messages:Object(I.defineMessages)({title:{id:"issue.confluence-pages.delete-failure-title",defaultMessage:"We couldn\u2019t remove the page link"},description:{id:"issue.confluence-pages.delete-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"error"},[an.G]:{messages:Object(I.defineMessages)({title:{id:"issue.approval.action.save-error-title",defaultMessage:"We couldn\u2019t save your approval response"},
description:{id:"issue.approval.action.save-error-description",defaultMessage:"Give it a few seconds, then try again."}}),icon:on,type:"error",shouldAutoDismiss:!0},[an.H]:{messages:Object(I.defineMessages)({title:{id:"issue.approval.action.save-success-title",defaultMessage:"We've saved your response."}}),icon:cn,type:"success",shouldAutoDismiss:!0},[an.u]:{messages:Object(I.defineMessages)({title:{id:"issue.color.action.change-color-title",defaultMessage:"We couldn\u2019t change the epic color"},description:{id:"issue.color.action.change-color-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,type:"success",shouldAutoDismiss:!0},[an.x]:{messages:Object(I.defineMessages)({title:{id:"issue.link.jira-app-link-fetch-error-title",defaultMessage:"We couldn\u2019t fetch remote Jira application links"},description:{id:"issue.link.jira-app-link-fetch-error-description",defaultMessage:"Check your connection, then give it another try."}}),icon:on,
type:"error",shouldAutoDismiss:!0},[an.B]:{messages:Object(I.defineMessages)({title:{id:"issue.link.jira-remote-link-server-error-title",defaultMessage:"We couldn't link the issue to {remoteIssueKey}."},description:{id:"issue.link.jira-remote-link-server-error-description",defaultMessage:"Reason: {i18nServerErrorMessage}"}}),icon:on,type:"error",shouldAutoDismiss:!0}};function dn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function un(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(s),!0).forEach((function(t){pn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pn(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class mn extends r.Component{constructor(...e){super(...e),this.onFlagDismissed=e=>{const{flags:t,onFlagDismissed:s,fireAnalyticsEvent:n}=this.props,a=qs()(t,{id:e});if(a){const e=ln[a.type];e.onDismissed&&e.onDismissed({fireAnalyticsEvent:n})}s(e)}}render(){const{onFlagDismissed:e,flags:t,retryIssueDelete:s,fireAnalyticsEvent:n,deleteFailureIssueKey:a,FlagServiceSubscriber:i}=this.props;return o.a.createElement(i,null,(({showFlag:i})=>t.map((t=>{const r=ln[t.type],c=t.titleI18nValues?[r.messages.title,t.titleI18nValues]:r.messages.title,l=t.descriptionI18nValues&&r.messages.description?[r.messages.description,t.descriptionI18nValues]:r.messages.description,d=(r.actions||[]).map((({messages:i,onClick:r})=>({content:i.content,onClick:()=>r({closeFlag:()=>e(t.id),retryIssueDelete:s,deleteFailureIssueKey:a,fireAnalyticsEvent:n})}))),u=un(un({title:c},l&&{description:l}),{},{type:r.type,
actions:d,isAutoDismiss:r.shouldAutoDismiss});return o.a.createElement(Qs.a,{key:t.id,args:[u],op:i})}))))}}mn.displayName="UnsafeFlags",mn.displayName="Flags";var fn=kt()(Object(zs.a)((e=>({fireAnalyticsEvent:(t,s)=>e(t,s)}))),Object(Ys.a)("deleteIssueRetry",{retryIssueDelete:"deleteIssueRetry"}),Object(c.connect)((e=>({flags:Object(L.j)(e),deleteFailureIssueKey:Object(M.x)(e),FlagServiceSubscriber:Js.a})),(e=>({onFlagDismissed:t=>e((e=>({type:"DISMISS_FLAG",payload:e}))(t)),retryIssueDelete:(t,s)=>{e(Object(Zs.c)(t,s))}
}))),Object(Xs.a)())(mn),bn=n("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),gn=n("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js"),hn=n("./node_modules/@atlaskit/media-picker/dist/es2019/index.js"),yn=n("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),On=n("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),jn=n("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js");const vn=["onUploadStart","onUploadEnd","onUploadError","onGeneralError","uploadContext","eventHandlers","config","onDragEnter","onDragLeave","onDrop"];function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function wn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(s),!0).forEach((function(t){Cn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Cn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Sn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}
return a}var In=e=>kt()([Object(c.connect)((e=>({uploadContext:Object(R.a)(e).uploadContext})),(e=>({onUploadStart:t=>e(Object(On.c)(t)),onUploadEnd:t=>e(Object(On.d)(t)),onUploadError:t=>e(Object(On.e)(t)),onGeneralError:t=>e(Object(On.f)(t)),requestUploadToken:()=>e(Object(jn.c)())})))])((e=>t=>{const{onUploadStart:s,onUploadEnd:n,onUploadError:a,onGeneralError:i,uploadContext:c,eventHandlers:l,config:d,onDragEnter:u,onDragLeave:p,onDrop:m}=t,f=Sn(t,vn),b=Object(r.useRef)([]),g=Object(r.useCallback)((()=>{if(!c)return!1;const{tokenIssueTimestamp:e,tokenLifespanInMs:t}=c;return e+t>Date.now()}),[c]),h=Object(r.useCallback)((([e,t])=>{if(!c||!g())return void t();const{serviceHost:s,clientId:n,token:a}=c;e({clientId:n,token:a,baseUrl:s})}),[g,c]),y=Object(r.useCallback)((()=>{b.current.forEach(h),b.current=[]}),[h]),O={authProvider:()=>new Promise(((e,s)=>{g()?h([e,s]):(t.requestUploadToken(),b.current=[...b.current,[e,s]])}))},j=kn(kn({uploadParams:{
collection:null==c?void 0:c.collection}},d),{},{multiple:!0}),v=Object(cs.g)(),[,{addNewAttachments:E}]=Object(yn.b)(),w=l?l["upload-error"]:e=>{const{error:t}=e;["upload_fail","object_create_fail"].includes(t.name)?a(t):i(t)},k=l?l["uploads-start"]:e=>{const{files:t}=e;t.forEach((e=>{s({id:`${e.id}`,createdDate:Date.now()})}));const n=t.map((e=>({filename:e.name,filesize:e.size,mimetype:e.type,mediaApiFileId:e.id,createdDate:Date.now()})));E(v,n)},C=l&&l["upload-end"]?l["upload-end"]:e=>{const{file:t}=e;n({id:`${t.id}`})},S=l&&l["upload-preview-update"];return Object(r.useEffect)((()=>{y()}),[y,c]),c?o.a.createElement(e,En({mediaClientConfig:O,config:j,onUploadsStart:k,onError:w,onEnd:C,onPreviewUpdate:S,onDragEnter:()=>{u()},onDragLeave:()=>{p()},onDrop:()=>{m()}},f)):null})(e));var Tn=In(hn.a),_n=Object(c.connect)((e=>({isOpen:Object(gn.a)(e)})),(e=>({onClose:()=>e(Object(bn.a)())})))(Tn);const Pn=e=>{const{eventHandlers:t}=e;return o.a.createElement(_n,{eventHandlers:t})}
;Pn.displayName="PopupAttachmentPicker";var xn=Pn,Dn=n("./src/packages/issue/issue-view/src/actions/comment-actions.js"),An=n("./node_modules/lodash/reduce.js"),Mn=n.n(An),Ln=n("./node_modules/lodash/set.js"),Rn=n.n(Ln),Nn=n("./node_modules/lodash/some.js"),Fn=n.n(Nn),Un=n("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/doc.js"),Vn=n("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/paragraph.js"),Kn=n("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media-single.js"),$n=n("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media-group.js"),Wn=n("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media.js");const Bn="issue.issue-base.content.attachment.picker.servicedesk";class Hn extends r.Component{constructor(...e){super(...e),this.onUploadsStart=({files:e})=>{this.props.setCommentAttachmentInProgress(!0),this.commentAttachments=e.map((e=>({file:e,isUploadFinished:!1})))},this.onUploadFinished=({file:e})=>{
this.injectAttachmentsToCommentEditor(this.commentAttachments),this.markAttachmentAsUploadFinished(e.id)},this.onUploadError=({file:e,fileId:t})=>{v.a.safeErrorWithoutCustomerData(Bn,"Failed to upload an attachment.",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),Object(Ts.is2afErrorCleanupGroup2Enabled)()?this.markAttachmentAsUploadFinished(t):this.markAttachmentAsUploadFinished(e.id)},this.getAttachmentsDocNode=(e,t)=>{const s=this.separateImageAndNonImageAttachments(e),n=this.getMediaSingleNodes(s.images,t),a=s.nonImages.length>0?this.getMediaGroupNode(s.nonImages,t):null;return a?Object(Un.a)(a,...n,Object(Vn.a)()):Object(Un.a)(...n,Object(Vn.a)())},this.getMediaSingleNodes=(e,t)=>e.map((e=>this.getMediaSingleNode(e,t))),this.getMediaSingleNode=(e,t)=>{const s=this.getMediaNode(e,200,200,t);return Object(Kn.a)({layout:"center"})(s)},this.getMediaGroupNode=(e,t)=>Object($n.a)(...e.map((e=>this.getMediaNode(e,null,null,t)))),
this.getMediaNode=({file:e},t,s,n)=>Object(Wn.a)({id:e.id,collection:n,type:"file",name:e.name,size:e.size,width:t,height:s,__key:e.id,__fileName:e.name,__fileSize:e.size,__fileMimeType:e.type,__displayType:null}),this.markAttachmentAsUploadFinished=e=>{Rn()(qs()(this.commentAttachments,(t=>t.file.id===e)),"isUploadFinished",!0),Fn()(this.commentAttachments,{isUploadFinished:!1})||(this.props.setCommentAttachmentInProgress(!1),this.commentAttachments=[])},this.commentAttachments=void 0,this.separateImageAndNonImageAttachments=e=>Mn()(e,((e,t)=>(this.isImageAttachment(t.file.type)?e.images.push(t):e.nonImages.push(t),e)),{images:[],nonImages:[]}),this.injectAttachmentsToCommentEditor=e=>{const{uploadContext:t}=this.props;if(!t)return void v.a.safeErrorWithoutCustomerData(Bn,"Failed to upload attachments. Upload context not available.",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}));const s=this.getAttachmentsDocNode(e,t.collection);this.props.onEditCommentUpdate(s)},
this.isImageAttachment=e=>!!e&&(e.indexOf("image/")>-1||e.indexOf("video/")>-1),this.eventHandlers={"uploads-start":this.onUploadsStart,"upload-end":this.onUploadFinished,"upload-error":this.onUploadError}}render(){const{render:e}=this.props;return e(this.eventHandlers)}}Hn.displayName="EventHandlersProvider";var Gn=kt()([Object(c.connect)((e=>({uploadContext:Object(R.a)(e).uploadContext})),(e=>({onEditCommentUpdate:t=>{e(Object(Dn.d)("NEW_OPTIMISTIC_COMMENT",!0)),e(Object(Dn.l)("NEW_OPTIMISTIC_COMMENT",t))},setCommentAttachmentInProgress:t=>e(Object(Dn.E)(t))})))])(Hn),qn=()=>o.a.createElement(Gn,{render:e=>o.a.createElement(xn,{eventHandlers:e})}),zn=n("./node_modules/reselect/lib/index.js"),Yn=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),Qn=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js");const Jn=Object(zn.createSelector)(Yn.H,Qn.y,gn.a,Object(Yn.D)("timetracking"),N.e,((e,t,s,n,a)=>!(e||t||s||n||"EDIT_MODAL"===a)))
;var Zn=n("./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js");const Xn=["isEnabled"];function ea(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ta=In(hn.b),sa=e=>{let{isEnabled:t}=e,s=ea(e,Xn);return o.a.createElement(Zn.a,null,(e=>t&&0===e?o.a.createElement(ta,s):null))};sa.displayName="CommonClipboardMediaPicker";var na=kt()([Object(c.connect)((e=>({isEnabled:Jn(e)})),{})])(sa),aa=()=>o.a.createElement(Gn,{render:e=>o.a.createElement(na,{eventHandlers:e})});const ia=["isEnabled"];function ra(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s])
;return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const oa=In(hn.c);var ca=kt()([Object(c.connect)((e=>({isEnabled:Jn(e)})),{})])((e=>{const{isEnabled:t}=e,s=ra(e,ia);return t?o.a.createElement(oa,s):null}));class la extends r.Component{getConfig(){return{container:this.props.container}}render(){return o.a.createElement(Gn,{render:e=>o.a.createElement(ca,{config:this.getConfig(),onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop,eventHandlers:e})})}}la.displayName="ServiceDeskDropzonePicker";class da extends r.Component{getConfig(){return{container:this.props.container}}render(){return o.a.createElement(ca,{config:this.getConfig(),onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop})}}da.displayName="DropzoneMediaPicker"
;var ua=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),pa=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),ma=n("./src/packages/platform/utils/types/src/application.js"),fa=n("./src/packages/platform/utils/types/src/edition.js");class ba extends r.Component{constructor(e){super(e),this.state={noErrorsAfterTimeout:!1,caughtError:!1}}componentDidMount(){this.props.isReady&&setTimeout((()=>{this.setState({noErrorsAfterTimeout:!0})}),1e3)}shouldComponentUpdate(e,t){if(t.caughtError)return!0;if(!this.state.noErrorsAfterTimeout&&t.noErrorsAfterTimeout){const{experience:e,analyticsSource:t}=this.props,{application:s,edition:n}=this.getApplicationAndEdition();return Object(ua.a)({experience:e,wasExperienceSuccesful:!0,analyticsSource:t,application:s,edition:n}),!1}return!(this.props.isReady||!e.isReady)&&(setTimeout((()=>{this.setState({noErrorsAfterTimeout:!0})}),1e3),!0)}
componentDidCatch(e){const{experience:t,analyticsSource:s}=this.props,{application:n,edition:a}=this.getApplicationAndEdition();Object(ua.a)({experience:t,wasExperienceSuccesful:!1,analyticsSource:s,application:n,edition:a,additionalAttributes:{errorMessage:e.message||"unknown"}}),this.setState({caughtError:!0})}getApplicationAndEdition(){const{projectType:e}=this.props;if(null==e)return{application:null,edition:null};const t=Object(ma.f)(e),s=pa.f&&Object(pa.f)(),n=s&&s.appEditions;return{application:t,edition:n?Object(fa.f)(t,n):null}}render(){const{caughtError:e}=this.state;return e?null:this.props.children}}ba.displayName="AddAttachmentFrontendSlaTracker";var ga=n("./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js"),ha=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),ya=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");class Oa extends r.Component{constructor(...e){super(...e),
this.fireAnalytics=()=>{const{glances:e,contentPanels:t,activityPanels:s,operations:n,ecosystemCustomFieldIds:a}=this.props;this.props.ecosystemLoadedAnalytics(e,t,s,n,a.length)}}componentDidMount(){this.fireAnalytics()}componentDidUpdate(){this.fireAnalytics()}render(){return null}}Oa.displayName="EcosystemAnalyticsView";var ja=kt()(Object(zs.a)((e=>({ecosystemLoadedAnalytics:(t,s,n,a,i)=>e("addons-loaded",Object(ga.e)(t,s,n,a,i))}))),Object(c.connect)((e=>({glances:Object(ha.i)(e),contentPanels:Object(ha.g)(e),activityPanels:Object(ha.a)(e),operations:Object(ha.j)(e),ecosystemCustomFieldIds:Object(ya.b)(e)
})),{}),Object(Xs.a)())(Oa),va=n("./src/packages/connect-utils/connect-utils/src/common/utils/ecosystem-connect-host.js"),Ea=n("./node_modules/@atlassian/connect-module-core/dist/es6/index.js"),wa=n("./src/packages/common-legacy-do-not-add-anything-new/src/ecosystem/default-connect-iframe-provider.js"),ka=n("./src/packages/connect-utils/connect-utils-async/src/async.js"),Ca=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js");var Sa=()=>window.connectHost,Ia=n("./node_modules/@atlaskit/empty-state/dist/es2019/empty-state.js"),Ta=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/assets/error.svg"),_a=n.n(Ta);const Pa=Object(I.defineMessages)({timeout:{id:"issue.content.ecosystem-panels.timeout",defaultMessage:"We're having trouble connecting to {appName}.\nTry contacting the developer for support."}}),xa=e=>`https://marketplace.atlassian.com/plugins/${e}/cloud/support?rel="noopener noreferrer"`;class Da extends r.Component{
constructor(...e){super(...e),this.tertiaryAction=o.a.createElement(J.a,{appearance:"subtle-link",href:xa(this.props.appKey),target:"_blank"},this.props.appName)}render(){const{appName:e,intl:t}=this.props;return o.a.createElement(Ia.a,{size:"narrow",imageUrl:_a.a,maxImageWidth:80,maxImageHeight:80,isLoading:!1,description:t.formatMessage(Pa.timeout,{appName:e}),tertiaryAction:this.tertiaryAction})}}Da.displayName="TimeoutView",Da.displayName="TimeoutView";var Aa=Object(I.injectIntl)(Da);const Ma=3*te.e+"px",La=ee.default.div.withConfig({componentId:"sc-1dit3wv-0"})`margin-top:${Ma};`,Ra=e=>{const{options:t,appKey:s,moduleKey:n,appName:a,options:{url:i},refreshedOn:r}=e,c=new wa.a,l=r?`connect-iFrame-${s}-${n}-${r}`:`connect-iFrame-${s}-${n}`;return o.a.createElement(La,null,o.a.createElement(Ea.a,{key:l,appKey:s,moduleKey:n,url:i,connectHost:Sa(),connectIframeProvider:c,options:c.convertConnectOptions(t),width:"100%",height:"100%",timeoutIndicator:()=>o.a.createElement(Aa,{appName:a,
appKey:s})}))};Ra.displayName="EcosystemModuleBaseDeprecated";const Na=e=>{const{appKey:t,moduleKey:s,options:n,appName:a,refreshedOn:i,location:r}=e,c=i?`connect-iFrame-${t}-${s}-${i}`:`connect-iFrame-${t}-${s}`;return o.a.createElement(ka.a,{key:c,appKey:t,moduleKey:s,options:n,appName:a,location:r})};Na.displayName="EcosystemModuleBaseV2";const Fa=e=>Object(Ts.isMoveEcosystemModuleToSeparatePackageEnabled)()?o.a.createElement(Na,e):o.a.createElement(Ra,e);Fa.defaultProps={refreshedOn:0};const Ua=e=>o.a.createElement(Fa,e);Ua.displayName="EcosystemModuleBaseWithoutRefresh";const Va=Object(Xs.a)()(Ua);var Ka=Object(Is.a)([Object(c.connect)((e=>({refreshedOn:Object(L.e)(e)})),{})])(Fa);const $a=ee.default.div.withConfig({componentId:"ipvrcf-0"})`display:none;`;class Wa extends r.Component{constructor(...e){super(...e),this.state={connectHost:null}}componentDidMount(){Object(va.b)((e=>this.setState({connectHost:e})))}render(){const{connectHost:e}=this.state,{scripts:t}=this.props
;return e?o.a.createElement($a,null,t.map((({appKey:e,moduleKey:t,options:s,shouldReloadOnRefresh:n})=>{const a=n?Ka:Va,i=`${e}-${t}`;return o.a.createElement(a,{key:i,appKey:e,moduleKey:t,options:s,appName:i,location:"issueViewBackgroundScript"})}))):null}}Wa.displayName="EcosystemBackgroundScriptsView";var Ba=Object(Is.a)([Object(c.connect)((e=>({scripts:Object(ha.h)(e)})),{})])(Wa),Ha=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),Ga=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),qa=n("./src/packages/issue/issue-view/src/actions/login-actions.js"),za=n("./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg"),Ya=n.n(za),Qa=n("./src/packages/issue/issue-view/src/views/issue-details/issue-modal.styled.js");const Ja=ee.default.div.withConfig({componentId:"xhpzxv-0"
})`text-align:center;flex-direction:column;color:${Ze.a.N800};display:flex;justify-content:center;align-items:center;${()=>ee.css`padding-top:${8*te.e}px;${Qa.e} &{padding-bottom:${8*te.e}px;padding-top:0;}`}`,Za=ee.default.h2.withConfig({componentId:"xhpzxv-1"})`font-size:20px;font-weight:bold;margin-top:${1.5*te.e}px;margin-bottom:${1.5*te.e}px;max-width:100%;`,Xa=ee.default.p.withConfig({componentId:"xhpzxv-2"})`max-width:100%;`,ei=e=>o.a.createElement(Ja,null,e.image,o.a.createElement(Za,null,e.header),o.a.createElement(Xa,null,e.description),e.children);ei.displayName="ErrorDisplay",ei.defaultProps={description:void 0,children:null};var ti=ei;const si=Object(I.defineMessages)({authErrorHeader:{id:"issue.text-for-header-in-authentication-error",defaultMessage:"Log in to Jira to see this issue"},authBtn:{id:"issue.text-for-login-button-in-authentication-error",defaultMessage:"Log in"}}),ni=ee.default.img.withConfig({componentId:"sc-170rcje-0"
})`width:160px;margin-bottom:14px;`,ai=e=>{const t=Object(qe.c)();return o.a.createElement(ti,{header:t.formatMessage(si.authErrorHeader),image:o.a.createElement(ni,{src:Ya.a,alt:""})},o.a.createElement(Ga.a,{externalId:"issue.login",appearance:"primary",onClick:e.login},t.formatMessage(si.authBtn)))};ai.displayName="AuthenticationError";var ii=Object(c.connect)(null,(e=>({login:()=>e(Object(qa.a)())})))(ai),ri=n("./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg"),oi=n.n(ri);const ci=Object(I.defineMessages)({permissionErrorHeader:{id:"issue.text-for-header-in-permission-error",defaultMessage:"You don't have access to this issue"},permissionErrorDescription:{id:"issue.text-for-description-in-permission-error",defaultMessage:"Make sure the issue exists in this project. If it does, ask a project admin for permission to see the project's issues."}}),li=ee.default.img.withConfig({componentId:"qhz123-0"})`height:100px;width:145px;`,di=()=>{
const e=Object(qe.c)();return o.a.createElement(ti,{header:e.formatMessage(ci.permissionErrorHeader),description:e.formatMessage(ci.permissionErrorDescription),image:o.a.createElement(li,{src:oi.a,alt:""})})};di.displayName="HoistedComponent";var ui=di,pi=n("./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg"),mi=n.n(pi);const fi=Object(I.defineMessages)({unknownErrorHeader:{id:"issue.text-for-header-in-generic-error",defaultMessage:"We couldn't connect to that issue"},unknownErrorDescription:{id:"issue.text-for-description-in-generic-error",defaultMessage:"Make sure that this issue actually exists in that project. If it does, try again in a few minutes. If you still can't link to the issue, contact your Jira admin."}}),bi=ee.default.img.withConfig({componentId:"sc-18wwhqk-0"})`height:130px;width:120px;`,gi=()=>{const e=Object(qe.c)();return o.a.createElement(ti,{header:e.formatMessage(fi.unknownErrorHeader),
description:e.formatMessage(fi.unknownErrorDescription),image:o.a.createElement(bi,{src:mi.a,alt:""})})};gi.displayName="HoistedComponent";var hi=gi,yi=n("./node_modules/lodash/isEqual.js"),Oi=n.n(yi),ji=n("./node_modules/lodash/over.js"),vi=n.n(ji);const Ei=(e,t=0)=>{const[s,n]=Object(r.useState)(!1),a=Object(r.useRef)(0),i=Object(r.useRef)({}),o=Object(r.useCallback)((()=>{const e=Object.values(i.current).reduce(((e,t)=>{var s;return e+(null!==(s=null==t?void 0:t.clientWidth)&&void 0!==s?s:0)}),0);return a.current<e&&(a.current=e),a.current}),[]),c=Object(r.useCallback)((()=>{const s=o();void 0!==e&&0!==s&&n(e<=s+t)}),[e,t,o]);Object(r.useEffect)((()=>{void 0!==e&&c()}),[e,c]);return{shouldBeCompact:s,setMeasuredRef:Object(r.useCallback)((e=>t=>{i.current[e]=t}),[]),forceUpdate:c}}
;var wi=n("./src/packages/issue/issue-view/src/views/common/with-container-width/index.js"),ki=n("./src/packages/forge/forge-ui/src/utils/connect/index.js"),Ci=n("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),Si=n("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js");const Ii="FORGE_ENTITY_TYPE",Ti="CONNECT_ENTITY_TYPE";var _i=n("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),Pi=n("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),xi=n("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),Di=n("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),Ai=n("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");const Mi=ee.default.div.withConfig({componentId:"sc-1tkoj60-0"})`display:flex;`,Li=Object(ee.default)(xi.a).withConfig({componentId:"sc-1tkoj60-1"})`width:8px;`
;var Ri=()=>o.a.createElement(Di.a,null,o.a.createElement(xi.b,null),o.a.createElement(Pi.a,{paddingTop:0,paddingBottom:0},o.a.createElement(Pi.a,{paddingTop:32,paddingBottom:12},o.a.createElement(Ai.a,{fontSize:14,lineHeight:16,intrusion:300})),o.a.createElement(Mi,null,o.a.createElement(_i.a,null),o.a.createElement(Li,null),o.a.createElement(Ai.a,{fontSize:40,lineHeight:40,intrusion:0})))),Ni=n("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js");const Fi=Object(Ee.h)((()=>n.e("async-jsm-activity-feed-filter").then(n.bind(null,"./src/packages/issue/issue-actions/activity-feed-filter/src/ui/index.js")).then((e=>e.ActivityFeedFilter))),{moduleId:"./src/packages/issue/issue-actions/activity-feed-filter/src/ui/index.js"}),Ui=e=>o.a.createElement(Ee.a,{fallback:null},o.a.createElement(Fi,e));Ui.displayName="AsyncActivityFeedFilter"
;var Vi=n("./src/packages/platform/utils/permalinks/src/index.js"),Ki=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),$i=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),Wi=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),Bi=n("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),Hi=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js");var Gi=n("./src/packages/issue/issue-actions/activity-feed/src/messages.js");const qi=["buttonStyles"];function zi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Yi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?zi(Object(s),!0).forEach((function(t){Qi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ji(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Zi=ee.default.div.withConfig({componentId:"sc-150qlwp-0"})`align-self:flex-end;`,Xi=Object(ee.default)(Si.c).withConfig({componentId:"sc-150qlwp-1"})`margin-top:${te.e/2}px;`;Xi.displayName="ActivityItemHeading"
;const er=ee.default.div.withConfig({componentId:"sc-150qlwp-2"})`display:flex;`,tr=e=>(t,s)=>{const n=t(s),{buttonStyles:a}=n;return Yi(Yi({},Ji(n,qi)),{},{buttonStyles:Yi(Yi({},a),{},{padding:`0 ${te.e/2}px 0 ${te.e/2}px`,margin:`0 ${te.e/2}px 0 ${te.e/2}px`,backgroundColor:e?Ze.a.N400:Ze.a.N20,"&:hover":{backgroundColor:e?Ze.a.N400:Ze.a.N30},"&:active":{backgroundColor:e?Ze.a.N400:Ze.a.B50}})})};var sr=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hooks/useAnalyticsEvents.js");const nr=Object(I.defineMessages)({tooltip:{id:"issue-activity-feed.activity-sorting-toggle.tooltip",defaultMessage:"Reverse sort direction"},newestFirstLabel:{id:"issue-activity-feed.activity-sorting-toggle.newest-first-label",defaultMessage:"Newest first"},oldestFirstLabel:{id:"issue-activity-feed.activity-sorting-toggle.oldest-first-label",defaultMessage:"Oldest first"}});var ar=n("./node_modules/@atlaskit/icon/dist/es2019/components/icon.js");function ir(){return(ir=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const rr=e=>o.a.createElement("svg",ir({},e,{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}),o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("path",{d:"M6.8,4.3 C6.6,4.1 6.3,4 6,4 C5.7,4 5.4,4.1 5.2,4.3 L2.3,7.2 C1.9,7.6 1.9,8.3 2.3,8.7 C2.7,9.1 3.3,9.1 3.7,8.7 L5,7.4 L5,19.1 C5,19.6 5.4,20 6,20 C6.6,20 7,19.6 7,19.1 L7,7.4 L8.3,8.7 C8.7,9.1 9.3,9.1 9.7,8.7 C10.1,8.3 10.1,7.6 9.7,7.2 C9.04754611,6.54754611 8.5582057,6.0582057 8.23197876,5.73197876 C7.91376126,5.41376126 7.436435,4.936435 6.8,4.3 Z",id:"Path",fill:"currentColor",fillRule:"nonzero",transform:"translate(6.000000, 12.000000) rotate(180.000000) translate(-6.000000, -12.000000) "}),o.a.createElement("path",{
d:"M21,5 L13,5 C12.4,5 12,5.4 12,6 C12,6.6 12.4,7 13,7 L21,7 C21.6,7 22,6.6 22,6 C22,5.4 21.6,5 21,5 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),o.a.createElement("path",{d:"M13,13 L18,13 C18.6,13 19,12.6 19,12 C19,11.4 18.6,11 18,11 L13,11 C12.4,11 12,11.4 12,12 C12,12.6 12.4,13 13,13 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),o.a.createElement("path",{d:"M13,19 L16,19 C16.6,19 17,18.6 17,18 C17,17.4 16.6,17 16,17 L13,17 C12.4,17 12,17.4 12,18 C12,18.6 12.4,19 13,19 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"})));rr.displayName="ArrowDownGlyph";const or=({label:e})=>o.a.createElement(ar.b,{size:"small",label:e,glyph:rr});function cr(){return(cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}or.displayName="ArrowDownIcon";const lr=e=>o.a.createElement("svg",cr({},e,{width:"24px",height:"24px",viewBox:"0 0 24 24",
version:"1.1",xmlns:"http://www.w3.org/2000/svg"}),o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("path",{d:"M7.8,4.3 C7.6,4.1 7.3,4 7,4 C6.7,4 6.4,4.1 6.2,4.3 L3.3,7.2 C2.9,7.6 2.9,8.3 3.3,8.7 C3.7,9.1 4.3,9.1 4.7,8.7 L6,7.4 L6,19.1 C6,19.6 6.4,20 7,20 C7.6,20 8,19.6 8,19.1 L8,7.4 L9.3,8.7 C9.7,9.1 10.3,9.1 10.7,8.7 C11.1,8.3 11.1,7.6 10.7,7.2 C10.0475461,6.54754611 9.5582057,6.0582057 9.23197876,5.73197876 C8.91376126,5.41376126 8.436435,4.936435 7.8,4.3 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),o.a.createElement("path",{d:"M21,17 L13,17 C12.4,17 12,17.4 12,18 C12,18.6 12.4,19 13,19 L21,19 C21.6,19 22,18.6 22,18 C22,17.4 21.6,17 21,17 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),o.a.createElement("path",{d:"M13,13 L18,13 C18.6,13 19,12.6 19,12 C19,11.4 18.6,11 18,11 L13,11 C12.4,11 12,11.4 12,12 C12,12.6 12.4,13 13,13 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),o.a.createElement("path",{
d:"M13,7 L16,7 C16.6,7 17,6.6 17,6 C17,5.4 16.6,5 16,5 L13,5 C12.4,5 12,5.4 12,6 C12,6.6 12.4,7 13,7 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"})));lr.displayName="ArrowUpGlyph";const dr=({label:e})=>o.a.createElement(ar.b,{size:"small",label:e,glyph:lr});dr.displayName="ArrowUpIcon";const ur=e=>{const{selectedSortOrder:t,onSelectSortOrder:s,isDisabled:n=!1}=e,{formatMessage:a}=Object(qe.c)(),{createAnalyticsEvent:i}=Object(sr.a)(),r=(e=>[{key:"NEWEST_FIRST",type:"NEWEST_FIRST",name:e(nr.newestFirstLabel),icon:o.a.createElement(or,{label:e(nr.newestFirstLabel)})},{key:"OLDEST_FIRST",type:"OLDEST_FIRST",name:e(nr.oldestFirstLabel),icon:o.a.createElement(dr,{label:e(nr.newestFirstLabel)})}])(a).find((e=>e.type===t));if(!r)return pa.h.safeErrorWithoutCustomerData("issue.activity.activity-sorting.select-sort-order",`Failed to select a sort option with selected sort of ${t}`),null;return o.a.createElement(Wi.a,{sourceType:Bi.f,sourceName:"activityFeedSort"},o.a.createElement($i.a,{
onMount:Ki.d}),o.a.createElement(Re.a,{content:a(nr.tooltip),hideTooltipOnMouseDown:!0,position:"bottom"},o.a.createElement(J.a,{appearance:"subtle",isDisabled:n,onClick:()=>{const e=i({action:"clicked",actionSubject:"button"});"NEWEST_FIRST"===t&&s("OLDEST_FIRST",e,"sortOrderItemToggled"),"OLDEST_FIRST"===t&&s("NEWEST_FIRST",e,"sortOrderItemToggled")},iconAfter:r.icon,spacing:"compact"},r.name)))};ur.displayName="ActivitySortingToggle";var pr=ur,mr=n("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),fr=n("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),br=n("./src/packages/forge/forge-ui-analytics/src/common/ui/index.js"),gr=n("./src/packages/forge/forge-ui-analytics/src/services/issue-activity/index.js"),hr=n("./src/packages/forge/forge-ui-analytics/src/ui/issue-activity/index.js"),yr=n("./src/packages/forge/forge-ui/src/ui/extension-title/index.js");const Or=({item:e,component:t})=>{const s=t
;return o.a.createElement(s,null,o.a.createElement(yr.a,{extensionName:e.name,extensionEnvType:e.extension.environmentType}))};Or.displayName="ForgeIssueActivityTrigger";const jr=({component:e,item:t,onClick:s,isSelected:n})=>{const a=e,i=Object(r.useCallback)(((e,t)=>{Object(gr.a)(),s(e,t)}),[s]);return o.a.createElement(a,{onClick:i,isSelected:!!n},o.a.createElement(yr.a,{extensionName:t.name,extensionEnvType:t.extension.environmentType}),o.a.createElement(br.b,null))};jr.displayName="ForgeIssueActivityView";const vr=e=>o.a.createElement(hr.a,null,o.a.createElement(jr,e));vr.displayName="ForgeIssueActivityItem";var Er=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),wr=n("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),kr=n("./src/packages/issue/issue-view/src/common/styles/issue-value.js");const Cr=ee.default.span.withConfig({componentId:"x0e1n1-0"
})`max-width:${20*te.e}px;display:inline-block;line-height:normal;vertical-align:text-bottom;${kr.e};`;Cr.displayName="DropdownTrigger";const Sr=Object(ee.default)(wr.a).withConfig({componentId:"x0e1n1-1"})`min-width:${16*te.e}px;`;Sr.displayName="DropdownItem";const Ir=["buttonStyles"];function Tr(){return(Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function _r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Pr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(s),!0).forEach((function(t){xr(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Dr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ar=({children:e,onClick:t})=>o.a.createElement(Lr,{onClick:t},e);Ar.displayName="DropdownItemComponent";const Mr=({items:e,selectedItem:t,onSelectActivityItem:s})=>{const[n,a]=Object(r.useState)(!1),i=Object(r.useMemo)((()=>"FORGE_ENTITY_TYPE"===t.type?o.a.createElement(Or,{item:t,
component:Cr}):o.a.createElement(Cr,null,t.name)),[t]);return o.a.createElement(Wi.a,{sourceType:Bi.b,sourceName:"activityFeed"},o.a.createElement($i.a,{onMount:Ki.d}),o.a.createElement(mr.a,{isOpen:n,onOpenChange:({isOpen:e},t)=>{a(e),Object(Ki.h)(t,{isOpen:e})},trigger:i,triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",theme:(e,t)=>{const s=e(t),{buttonStyles:a}=s;return Pr(Pr({},Dr(s,Ir)),{},{buttonStyles:Pr(Pr({},a),{},{padding:`0 ${te.e/2}px 0 ${te.e/2}px`,margin:`0 ${te.e/2}px 0 ${te.e/2}px`,backgroundColor:n?Ze.a.N400:Ze.a.N20,"&:hover":{backgroundColor:n?Ze.a.N400:Ze.a.N30},"&:active":{backgroundColor:n?Ze.a.N400:Ze.a.B50}})})}},position:"bottom left"},o.a.createElement(fr.a,null,e.filter((e=>e.key!==t.key)).map((e=>{const t={key:e.key,onClick:(t,n)=>s(e,n,"dropdownItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?o.a.createElement(vr,Tr({},t,{component:Ar,item:e})):o.a.createElement(Ar,t,e.name)})))))};Mr.displayName="ActivityFeedDropdown"
;const Lr=Object(Er.a)("dropdownItem",{onClick:"clicked"})(Sr);var Rr=n("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js");function Nr(){return(Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Fr=({children:e,onClick:t,isSelected:s})=>o.a.createElement(Rr.a,{appearance:"subtle",spacing:"compact",isSelected:s,theme:tr(s),onClick:t},e);Fr.displayName="ButtonComponent";const Ur=({items:e,selectedItem:t,onSelectActivityItem:s})=>o.a.createElement(Wi.a,{sourceType:Bi.f,sourceName:"activityFeedButtons"},o.a.createElement($i.a,{onMount:e=>Object(Ki.e)(e)}),e.map((e=>{const n={key:e.key,isSelected:t.key===e.key,onClick:(t,n)=>s(e,n,"buttonItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?o.a.createElement(vr,Nr({},n,{component:Fr,item:e})):o.a.createElement(Fr,n,e.name)})))
;Ur.displayName="ActivityFeedButtons";var Vr=n("./src/packages/platform/utils/types/src/general.js"),Kr=n("./src/packages/platform/observability/browser-metrics/src/index.js"),$r=n("./node_modules/react-sweet-state/lib/esm/components/container.js"),Wr=n("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/store.js"),Br=Object($r.a)(Wr.a,{displayName:"CommentVisibilitiesContainer"}),Hr=n("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/components/subscriber.js");function Gr(){return(Gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var qr=e=>t=>{const{baseUrl:s,issueKey:n,shouldFetchCommentVisibilities:a,createAnalyticsEvent:i}=t;return o.a.createElement(Br,{baseUrl:s,issueKey:n,createAnalyticsEvent:i,scope:n
},o.a.createElement(Hr.a,null,((s,{fetch:n})=>o.a.createElement(e,Gr({},t,{fetchCommentVisibilities:a?n:void 0})))))},zr=n("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js"),Yr=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),Qr=n("./src/packages/issue/issue-view/src/actions/editor-actions.js"),Jr=n("./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js"),Zr=n("./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js"),Xr=n("./src/packages/issue/issue-view/src/common/state/selectors/comments-selector.js"),eo=n("./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js"),to=n("./src/packages/issue/issue-view/src/drafts/draft-utils.js"),so=n("./src/packages/issue/issue-view/src/selectors/drafts/selectors.js"),no=n("./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js"),ao=n("./src/packages/issue/issue-view/src/selectors/share-as-comment-selector.js")
;function io(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ro(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?io(Object(s),!0).forEach((function(t){oo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):io(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function oo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const co=Object(Ee.h)((()=>n.e("async-comment-item").then(n.bind(null,"./src/packages/issue/issue-actions/issue-comment-base/src/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-comment-base/src/index.js"}),lo=e=>o.a.createElement(Ee.a,{fallback:o.a.createElement(o.a.Fragment,null)
},o.a.createElement(co,e));lo.displayName="IssueComment";const uo=e=>o.a.createElement($.a,{id:"comment-item",packageName:"issue",render:()=>o.a.createElement(o.a.Fragment,null)},o.a.createElement(lo,e));uo.displayName="CommentWithMonitoring";var po=Object(Is.a)([I.injectIntl,Object(Ys.a)("issueFields",{onEditSave:"updated",onDeleteConfirm:"deleted",onScrolledToPermalink:"scrolled"}),Object(T.a)({onCopyClick:"copyCommentUrl"}),Object(c.connect)(((e,{commentId:t})=>(e,{isHighlighted:s})=>ro({bodyAdf:Object(Qn.j)(t)(e),bodyHtml:Object(Qn.f)(t)(e),hasDraft:Object(so.a)(Object(to.a)(t))(e),author:Object(Qn.e)(t)(e),updateAuthor:Object(Qn.q)(t)(e),createdDate:Object(Qn.g)(t)(e),updatedDate:Object(Qn.r)(t)(e),edited:Object(Qn.h)(t)(e),isOptimistic:Object(Qn.o)(t)(e),hasSaveFailed:Object(Qn.p)(t)(e),canEdit:Object(Qn.d)(t)(e),isEditing:Object(Qn.B)(t)(e),canDelete:Object(Qn.c)(t)(e),hasDeleteModal:Object(Qn.m)(t)(e),visibility:Object(Qn.s)(t)(e),visibilityEdited:Object(Qn.k)(t)(e),
isInternal:Object(Qn.D)(t)(e),showReactions:Object(eo.b)(e),shouldShowCommentVisibility:Object(Qn.z)(e),shouldScrollAfterAsyncComponentsLoaded:s&&Object(no.a)(e),hasScrolledPermalink:Object(Qn.v)(e)},((e,t)=>({baseUrl:Object(M.f)(e),isReactionsFeatureActive:Object(eo.b)(e),issueAri:Object(L.v)(e),commentAri:Object(eo.a)(t)(e),projectType:Object(L.F)(e),mentionProvider:Object(A.a)(e),mediaContext:Object(R.a)(e),contextIdentifier:Object(Xr.b)(e,t),sharedAtTimestamp:Object(ao.a)(e),sharedValue:Object(ao.b)(e),getEncodedMention:Object(D.a)(Object(M.f)(e)),activityProvider:Object(Zr.a)(e)}))(e,t))),((e,{commentId:t})=>ro({getOnEditClick:s=>e(Object(Dn.i)(t,s)),onEditCancel:()=>e(Object(Dn.j)(t)),onEditUpdate:s=>e(Object(Dn.l)(t,s)),onEditPaste:s=>e(Object(Dn.w)(t,s)),onBlur:()=>e(Object(Dn.k)(t)),getOnEditSave:(s,n)=>e(Object(Dn.A)(ro({id:t},s),n)),onCommentVisibilityChange:s=>{e(Object(Dn.m)(t,s))},onDeleteClick:()=>e(Object(Dn.G)(t)),getOnDeleteConfirm:s=>e(Object(Dn.g)(t,s)),
onDeleteCancel:()=>e(Object(Dn.e)()),onSaveRetry:()=>e(Object(Dn.B)(t,(new Date).toISOString(),(e=>e.includes("NEW_OPTIMISTIC_COMMENT"))(t))),onSaveEdit:()=>e(Object(Dn.y)(t)),onSaveCancel:()=>e(Object(Dn.x)(t)),setScrollStatus:t=>e(Object(Dn.F)(t))},(e=>({onEditorExpandedFailure:()=>{e(Object(Qr.b)())},onEditorSaveFailure:()=>{e(Object(Qr.c)())},onEditorClearSharedValues:()=>{e(Object(Jr.a)())}
}))(e))),((e,t,s)=>ro(ro(ro({},e),t),s)))])(uo),mo=n("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),fo=n("./src/packages/platform/services/refs-store/src/index.js"),bo=n("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/index.js"),go=n("./src/packages/issue/issue-view/src/common/model/comment-type.js"),ho=n("./node_modules/lodash/throttle.js"),yo=n.n(ho),Oo=n("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),jo=n("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),vo=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),Eo=n("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/styled.js"),wo=n("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),ko=n("./src/packages/issue/issue-view/src/views/constants.js"),Co=n("./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js")
;const So=ee.default.button.withConfig({componentId:"z0kpr2-0"})`text-align:left;color:grey;font:inherit;background:white;width:100%;height:40px;padding-left:${2.5*te.e}px;padding-right:${2.5*te.e}px;padding-top:${1.5*te.e}px;padding-bottom:${1.5*te.e}px;border:1px solid ${Ze.a.N40};border-radius:${te.a}px;box-sizing:border-box;`,Io=ee.default.div.withConfig({componentId:"z0kpr2-1"})`display:flex;justify-content:space-between;align-items:center;height:14px;padding-top:1px;letter-spacing:-0.005em;`,To=ee.default.span.withConfig({componentId:"z0kpr2-2"})`padding-top:${te.e/2}px;`,_o=ee.default.div.withConfig({componentId:"z0kpr2-3"})`text-align:center;`;class Po extends r.Component{constructor(...e){super(...e),this.state={changed:!1},this.onClick=()=>{this.props.onExpanded(),this.setState({changed:!0})}}static getServiceDeskFallbackEditor(){return o.a.createElement(_o,null,o.a.createElement(Z.a,{size:"medium"}))}getGeneralFallbackEditor(){return o.a.createElement(So,{
onClick:this.onClick},o.a.createElement(Io,null,this.props.placeholder,this.state.changed&&o.a.createElement(To,null,o.a.createElement(Z.a,{size:"small"}))))}render(){return this.props.isServiceDesk?Po.getServiceDeskFallbackEditor():this.getGeneralFallbackEditor()}}Po.displayName="FallbackAddCommentEditor",Po.defaultProps={placeholder:"",onExpanded:d.a};const xo=Object(Is.a)([Object(c.connect)((e=>({isServiceDesk:Object(M.t)(e)})),{})])(Po),Do=({children:e,fallback:t,packageName:s})=>o.a.createElement($.a,{id:"issue-add-comment-editor",packageName:s,render:()=>t},o.a.createElement(Ee.a,{fallback:t},e));Do.displayName="IssueAddCommentEditorBoundary";const Ao=Object(I.defineMessages)({placeholder:{id:"issue.placeholder-for-empty-comment-editor",defaultMessage:"Add a comment\u2026"},draftPlaceholder:{id:"issue.draft-placeholder-for-empty-comment-editor",defaultMessage:"You have an unsaved comment"},commentShortcutHintHeading:{id:"issue.comment.shortcut-hint-pro-tip-text",
defaultMessage:"Pro tip:"},commentShortcutHintMessage:{id:"issue.comment.shortcut-hint-message-with-pro-tip-text",defaultMessage:"{proTipText} press {shortcutKey} to comment"}});var Mo=n("./node_modules/@atlaskit/modal-dialog/dist/esm/styled/Content.js"),Lo=n("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js");const Ro=ee.default.small.withConfig({componentId:"g2cr8q-0"
})`color:${Ze.a.N200};display:block;margin-top:${te.e}px;white-space:nowrap;font-size:12px;line-height:1.33333333333333;`,No=ee.css`@supports (position:sticky) or (position:-webkit-sticky){position:sticky;z-index:${e=>e.isKeylineVisible?e.shouldApplyTopSticky?Lo.b+1:10:0};transition:transform 0.3s cubic-bezier(0.86,0,0.07,1) 0.1s;transform:translate( 0,${e=>e.isHidden?("OLDEST_FIRST"===e.sortOrder?100:-100)+"px":"0"} );bottom:-1px;${e=>e.shouldApplyTopSticky?"top: 0px;":""} background:white;padding-left:${te.e}px;margin-left:-${te.e}px;${Mo.c.toString()} &{bottom:-2px;}${e=>e.isHidden?(()=>Object(vo.c)()?"":"display: contents;")():""}}`,Fo=ee.css`@supports (position:sticky) or (position:-webkit-sticky){box-shadow:${e=>"NEWEST_FIRST"===e.sortOrder&&e.shouldApplyTopSticky?`0 2px 0 0 ${Ze.a.N30}, 0 -2px 0 0 ${Ze.a.N30}`:`0 -2px 0 0 ${Ze.a.N30}`};margin-top:${Ma};}`,Uo=ee.default.div.withConfig({componentId:"g2cr8q-1"})`${e=>e.shouldApplySticky&&No};`,Vo=ee.default.div.withConfig({
componentId:"g2cr8q-2"})`display:flex;padding-top:${2*te.e}px;padding-bottom:${2*te.e}px;background:white;${e=>e.isKeylineVisible&&e.shouldApplySticky?Fo:""} margin-bottom:${e=>"NEWEST_FIRST"===e.sortOrder?-2*te.e:0}px;margin-top:${e=>"NEWEST_FIRST"===e.sortOrder?te.e:0}px;`,Ko=ee.default.div.withConfig({componentId:"g2cr8q-3"})`margin-right:${1.5*te.e}px;margin-top:${te.e/4}px;`;function $o(){return($o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Wo=["avatarUrl","hasDraft","isExpanded","isServiceDesk","isEditorFocused","isLoading"],Bo=Object(Ee.h)((()=>n.e("async-editor-view").then(n.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js"});class Ho extends r.Component{constructor(...e){
super(...e),this.state={isKeylineVisible:!1,shouldHide:!1},this.onSave=e=>{Object(Kr.c)().markStartOfInteraction({key:ko.a.COMMENTS.TIME_TO_RENDER_SAVED_COMMENT,cancelExisting:!0});Object(V.g)(e)||(this.props.onSave(e),this.props.onCancel())},this.setAddCommentContainerRef=e=>{this.addCommentContainer=e},this.setEditorContainerRef=e=>{this.editorContainer=e},this.setContainerBottomRef=e=>{this.containerBottom=e},this.setContainerTopRef=e=>{this.containerTop=e},this.getScrollParent=e=>e&&"_issue-app-modal-dialog-wrapper"!==e.className?"auto"===window.getComputedStyle(e).overflowY||"scroll"===window.getComputedStyle(e).overflowY?e:this.getScrollParent(e.parentElement):null,this.setOverflowNode=()=>{this.overflowNode||(this.overflowNode=this.getScrollParent(this.containerBottom)),this.setSticky()},this.setSticky=()=>{const{containerTop:e,containerBottom:t}=this,{sortOrder:s}=this.props;if("OLDEST_FIRST"===s){if(this.overflowNode&&t){
const e=this.overflowNode.getBoundingClientRect(),s=t.getBoundingClientRect(),n=Math.min(e.bottom,window.innerHeight),a=!this.props.isExpanded&&s.bottom>=n;a!==this.state.isKeylineVisible&&this.setState({isKeylineVisible:a})}}else if("NEWEST_FIRST"===s&&this.overflowNode&&e&&t){const s=this.overflowNode.getBoundingClientRect(),n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),i=Math.min(s.bottom,window.innerHeight),r=Math.min(s.top,window.innerHeight),o=!this.props.isExpanded&&n.top<=r,c=!this.props.isExpanded&&a.bottom>=i,l=o||c;l!==this.state.isKeylineVisible&&this.setState({isKeylineVisible:l})}},this.addCommentContainer=void 0,this.editorContainer=void 0,this.containerBottom=void 0,this.containerTop=void 0,this.editorEndOrStartElement=void 0,this.overflowNode=void 0,this.observer=void 0,this.onEditorExpandedWithAnalytics=()=>{Object(Kr.c)().markStartOfInteraction({key:ko.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),
this.props.onEditorExpandedWithAnalytics()},this.onExpand=()=>{Object(Kr.c)().markStartOfInteraction({key:ko.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onExpand()}}componentDidMount(){requestAnimationFrame((()=>this.deferredComponentDidMount()))}shouldComponentUpdate(e,t){const s=!Wo.every((t=>this.props[t]===e[t])),n=!Object.entries(this.state).every((([e,s])=>s===t[e]));return s||n}componentDidUpdate(e){!e.isExpanded&&this.props.isExpanded&&(Object(Kr.c)().markTimeToFinishTask({key:ko.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR}),this.scrollEditorIntoView()),e.isEditorFocused!==this.props.isEditorFocused&&(this.props.isEditorFocused?this.setupStickyHidingObserver():this.removeStickyHidingObserver())}componentWillUnmount(){Object(vo.e)()||(window.removeEventListener("resize",this.setOverflowNode),this.overflowNode&&this.overflowNode.removeEventListener("scroll",this.setSticky)),
this.observer&&this.containerBottom&&this.observer.unobserve(this.containerBottom),this.observer&&this.containerTop&&this.observer.unobserve(this.containerTop),this.observer&&this.editorEndOrStartElement&&this.observer.unobserve(this.editorEndOrStartElement)}deferredComponentDidMount(){this.overflowNode=this.getScrollParent(this.containerBottom),Object(vo.e)()||(window.addEventListener("resize",this.setOverflowNode),this.overflowNode&&(this.overflowNode.addEventListener("scroll",yo()(this.setSticky,100)),this.setSticky())),this.props.isExpanded&&this.scrollEditorIntoView(),this.setupStickyObserver(),this.props.isEditorFocused&&this.setupStickyHidingObserver()}setupStickyObserver(){if(window.IntersectionObserver&&this.containerBottom&&this.containerTop){const{containerTop:e,containerBottom:t}=this,s=e=>{e.forEach((e=>{const t=!this.props.isExpanded&&!e.isIntersecting;switch(e.target){case this.containerBottom:case this.containerTop:this.state.isKeylineVisible!==t&&this.setState({
isKeylineVisible:t});break;case this.editorEndOrStartElement:{const t=Object(Ts.is2afErrorCleanupGroup2Enabled)()&&!e.rootBounds||!e.isIntersecting&&e.boundingClientRect.y>=0&&e.boundingClientRect.y>=e.rootBounds.y,s=Object(Ts.is2afErrorCleanupGroup2Enabled)()&&!e.rootBounds||!e.isIntersecting&&e.boundingClientRect.y<=e.rootBounds.y,n="OLDEST_FIRST"===this.props.sortOrder?t:s;this.state.shouldHide!==n&&this.setState({shouldHide:n});break}}}))},n={root:this.overflowNode,rootMargin:"0px",threshold:0};this.observer=new IntersectionObserver(s,n);const{observer:a}=this;a.observe(t),a.observe(e)}}setupStickyHidingObserver(){window.IntersectionObserver&&this.observer&&(()=>n.e("async-editor-view").then(n.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js")))().then((()=>setTimeout((()=>{
this.editorEndOrStartElement="OLDEST_FIRST"===this.props.sortOrder?document.getElementsByClassName("issue-editor-end")[0]:document.getElementsByClassName("issue-editor-start")[1],this.editorEndOrStartElement&&this.observer&&this.observer.observe(this.editorEndOrStartElement)}))))}removeStickyHidingObserver(){window.IntersectionObserver&&this.observer&&this.editorEndOrStartElement&&this.observer.unobserve(this.editorEndOrStartElement)}scrollEditorIntoView(){setTimeout((()=>{Object(wo.b)(this.addCommentContainer,{scrollMode:"if-needed",behavior:"auto",block:"end"})}))}renderAddCommentEditor(){const{hasDraft:e,newCommentDraft:t,isExpanded:s,intl:n,onEdit:a,onCancel:i,onPaste:r,onBlur:c,isServiceDesk:l,isLoading:d,editorSecondaryToolbarComponents:u}=this.props,p=e&&!Object(V.g)(t)?`\u2022 ${n.formatMessage(Ao.draftPlaceholder)}`:n.formatMessage(Ao.placeholder),m=o.a.createElement(xo,{placeholder:p,onExpanded:this.onEditorExpandedWithAnalytics}),f=o.a.createElement(Do,{packageName:"issue",
fallback:m},o.a.createElement(Bo,{externalId:"issue.comment.add-form",defaultValue:t,isExpanded:s,shouldFocus:!0,collapsedPlaceholder:p,placeholder:n.formatMessage(Ao.placeholder),onExpanded:this.onEditorExpandedWithAnalytics,onChange:a,onSave:this.onSave,onPaste:r,onBlur:c,onCancel:i,isLoading:d,secondaryToolbarComponents:u,scrollParent:this.overflowNode}));return l?o.a.createElement(Co.a,{isExpanded:s,onExpanded:this.onExpand,commentId:"NEW_OPTIMISTIC_COMMENT"},f):f}render(){const{isExpanded:e,isEditorFocused:t,avatarUrl:s,sortOrder:n,isCompact:a}=this.props,i=t&&this.state.shouldHide&&!e,r="OLDEST_FIRST"!==n&&!a,c=o.a.createElement(jo.a,null,"M"),l=o.a.createElement("strong",null,o.a.createElement(I.FormattedMessage,Ao.commentShortcutHintHeading)),d=()=>!e&&o.a.createElement(Ro,null,o.a.createElement(I.FormattedMessage,$o({},Ao.commentShortcutHintMessage,{values:{shortcutKey:c,proTipText:l}})));return o.a.createElement("span",{ref:this.setAddCommentContainerRef
},o.a.createElement("span",{ref:this.setContainerTopRef}),o.a.createElement(Uo,{isHidden:i,isKeylineVisible:this.state.isKeylineVisible,shouldApplySticky:!e,shouldApplyTopSticky:r},o.a.createElement(Vo,{isKeylineVisible:this.state.isKeylineVisible,sortOrder:n,shouldApplySticky:!e,shouldApplyTopSticky:r},o.a.createElement(Ko,null,o.a.createElement(Oo.a,{size:"medium",src:s})),o.a.createElement(Eo.a,{innerRef:this.setEditorContainerRef,"data-test-id":"issue.activity.comment"},this.renderAddCommentEditor(),o.a.createElement(d,null)))),o.a.createElement("span",{ref:this.setContainerBottomRef}))}}function Go(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(s),!0).forEach((function(t){zo(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Go(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Ho.displayName="AddCommentForm",Ho.displayName="AddCommentForm",Ho.defaultProps={isServiceDesk:!1,isLoading:!1,hasDraft:!1,avatarUrl:void 0,newCommentDraft:null,onExpand:d.a,onSave:d.a,onEdit:d.a,onPaste:d.a,onBlur:d.a,onCancel:d.a};var Yo=Object(Is.a)([I.injectIntl,Object(Ys.a)("issueFields",{onSave:"created",onEditorExpandedWithAnalytics:"commentExpanded"}),Object(c.connect)((e=>({authorId:Object(M.a)(e),avatarUrl:Object(L.x)(e),newCommentDraft:Object(Qn.j)("NEW_OPTIMISTIC_COMMENT")(e),hasDraft:Object(so.a)(Object(to.a)("NEW_OPTIMISTIC_COMMENT"))(e),isExpanded:Object(Qn.w)(e)||null!=Object(Qn.i)("NEW_OPTIMISTIC_COMMENT")(e),isServiceDesk:Object(M.t)(e),
isEditorFocused:Object(Yn.H)(e)||Object(Qn.A)(e),isLoading:Object(M.t)(e)&&Object(Qn.x)(e),shouldShowCommentVisibilitySelect:Object(Qn.z)(e),visibility:Object(Qn.l)("NEW_OPTIMISTIC_COMMENT")(e)||go.a,sortOrder:Object(Ni.b)(e)})),(e=>({onExpand:()=>e(Object(Dn.c)()),onEdit:t=>e(Object(Dn.l)("NEW_OPTIMISTIC_COMMENT",t)),onVisibilityChange:t=>e(Object(Dn.m)("NEW_OPTIMISTIC_COMMENT",t)),onPaste:t=>e(Object(Dn.w)("NEW_OPTIMISTIC_COMMENT",t)),onBlur:()=>e(Object(Dn.b)()),onCancel:()=>e(Object(Dn.a)()),getOnSave:(t,s)=>e(Object(Dn.A)(qo({id:`NEW_OPTIMISTIC_COMMENT_${(new Date).getTime()}`,createdDate:(new Date).toISOString(),isNewComment:!0},t),s))})),((e,t,s)=>qo(qo(qo(qo({},s),e),t),{},{editorSecondaryToolbarComponents:e.shouldShowCommentVisibilitySelect?[o.a.createElement(bo.a,{key:"commentVisibilitySelect",initialValue:e.visibility,onChange:t.onVisibilityChange})]:void 0,onSave:(s,n)=>{e.shouldShowCommentVisibilitySelect&&n.update({isCommentRestricted:"public"!==e.visibility.type}),
t.getOnSave({authorId:e.authorId,bodyAdf:s,bodyHtml:void 0,richContent:void 0,visibility:e.visibility},n)},onEditorExpandedWithAnalytics:s=>{t.onExpand(),Object(Ki.b)(s,"addCommentEditor expanded",{hasDraft:e.hasDraft})}})))])(Object(Hs.a)(Ho)),Qo=n("./src/packages/issue/issue-view/src/activity/common/styles/index.js"),Jo=n("./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js");const Zo=ee.default.div.withConfig({componentId:"sc-15of90x-0"})``;var Xo=e=>{const{list:t,loadingStage:s,canAddComments:n,numPrevCommentsToLoad:a,selectedSortOrder:i}=e,[,{register:c}]=Object(fo.b)(),l=Object(r.useCallback)((e=>{c("PERMALINK",e)}),[c]);return"LOADING"===s||"SAVE_COMMENT_LOADING"===s&&a>0?o.a.createElement(Qo.d,null,o.a.createElement(Jo.a,null)):o.a.createElement("span",null,o.a.createElement(mo.a,{name:"PERMALINK"},o.a.createElement(Zo,{innerRef:l})," "),n&&"NEWEST_FIRST"===i&&o.a.createElement(Yo,null),t,n&&"OLDEST_FIRST"===i&&o.a.createElement(Yo,null))
},ec=n("./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js");const tc="jira.fe.issue.activity.comments.time-to.render-load-more",sc=ee.default.div.withConfig({componentId:"hyxutn-0"})`margin:${Ma} 0 ${1.5*te.e}px 0;`;class nc extends r.Component{constructor(...e){super(...e),this.state={loadMoreButtonTypeClicked:void 0},this.onLoadOlderButtonClick=(e,t)=>{const{fetchMoreOlderComments:s}=this.props;Object(Ki.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_OLDER_BUTTON"}),Object(Kr.c)().cancel({key:tc},!0),Object(Kr.c)().markStartOfInteraction({key:tc}),this.setState({loadMoreButtonTypeClicked:"LOAD_OLDER_BUTTON"}),s()},this.onLoadNewerButtonClick=(e,t)=>{const{fetchMoreNewerComments:s}=this.props;Object(Ki.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_NEWER_BUTTON"}),Object(Kr.c)().cancel({key:tc},!0),Object(Kr.c)().markStartOfInteraction({key:tc}),this.setState({loadMoreButtonTypeClicked:"LOAD_NEWER_BUTTON"}),s()}}
componentDidMount(){const{fetchCommentVisibilities:e}=this.props;e&&e()}UNSAFE_componentWillReceiveProps(e){e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments()),e.isLoadingMoreComments||this.setState({loadMoreButtonTypeClicked:void 0}),this.props.isLoadingMoreComments&&!e.isLoadingMoreComments&&setTimeout((()=>{Object(Kr.c)().markTimeToFinishTask({key:tc})}))}renderLoadOlderButton(e){const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadOlderButtonClick:n}=this,a="LOAD_OLDER_BUTTON"===s&&t;return o.a.createElement(ec.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},e<100?o.a.createElement(I.FormattedMessage,{id:"issue.comments-view-sorted-older-remaining-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 older comment} other {{numberToLoad} remaining older comments}}",values:{numberToLoad:e}
}):o.a.createElement(I.FormattedMessage,{id:"issue.comments-view-sorted-older-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 older comment} other {{numberToLoad} older comments}}",values:{numberToLoad:e}}))}renderLoadNewerButton(e){const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadNewerButtonClick:n}=this,a="LOAD_NEWER_BUTTON"===s&&t;return o.a.createElement(ec.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},e<100?o.a.createElement(I.FormattedMessage,{id:"issue.comments-view-sorted-newer-remaining-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 newer comment} other {{numberToLoad} remaining newer comments}}",values:{numberToLoad:e}}):o.a.createElement(I.FormattedMessage,{id:"issue.comments-view-sorted-newer-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 newer comment} other {{numberToLoad} newer comments}}",values:{numberToLoad:e}}))}render(){
const{commentIds:e,canAddComments:t,totalComments:s,loadedComments:n,fullIssueUrl:a,startIndex:i,loadingStage:r,selectedSortOrder:c}=this.props;if(!e.length&&!t)return null;const{numPrevCommentsToLoad:l,numNextCommentsToLoad:d}=Object(zr.a)(s,n,i),{hasPermalink:u,permalinkId:p}=Object(Vi.a)("Comments"),m=e.length?o.a.createElement(o.a.Fragment,null,"NEWEST_FIRST"===c&&this.renderLoadNewerButton(l),"OLDEST_FIRST"===c&&this.renderLoadOlderButton(d),o.a.createElement(sc,{"data-test-id":"issue.activity.comments-list"},e.map((e=>o.a.createElement(po,{key:e,commentId:e,fullIssueUrl:a,isHighlighted:u&&e===p})))),"NEWEST_FIRST"===c&&this.renderLoadOlderButton(d),"OLDEST_FIRST"===c&&this.renderLoadNewerButton(l)):null;return o.a.createElement(Wi.a,{sourceType:Bi.f,sourceName:"commentsActivityFeed"},o.a.createElement(Xo,{loadingStage:r,canAddComments:t,list:m,numPrevCommentsToLoad:l,selectedSortOrder:c}))}}nc.displayName="Comments",nc.displayName="Comments",nc.defaultProps={canAddComments:!1}
;const ac=Object(c.connect)((e=>({commentIds:Object(Qn.I)(e),canAddComments:Object(Qn.b)(e),totalComments:Object(Qn.K)(e),startIndex:Object(Qn.J)(e),loadedComments:Object(Qn.F)(e),isLoadingMoreComments:Object(Qn.E)(e),baseUrl:Object(M.f)(e),issueKey:Object(M.x)(e),shouldFetchCommentVisibilities:Object(Qn.z)(e),fullIssueUrl:Object(Yr.b)(e),loadingStage:Object(Qn.G)(e),selectedSortOrder:Object(Ni.b)(e)})),(e=>({fetchMoreOlderComments:()=>{e(Object(Dn.s)())},fetchMoreNewerComments:()=>{e(Object(Dn.r)())}})))(qr(nc)),ic=Object(_.b)("comment")(Object(h.a)()(ac));var rc=()=>o.a.createElement($.a,{id:"issue.issue-view.activity.comments"},o.a.createElement(ic,null)),oc=n("./node_modules/lodash/get.js"),cc=n.n(oc);const lc=Object(zn.createSelector)(Object(Yn.q)("servicedesk-approvals"),(e=>e&&e.value&&e.value.completedApprovals||[])),dc=(e,t)=>(e.sort(((e,s)=>"OLDEST_FIRST"===t?e.timestamp-s.timestamp:s.timestamp-e.timestamp)),
e),uc=Object(zn.createSelector)(Qn.a,Qn.I,Ni.b,Qn.K,Qn.F,Qn.J,lc,((e,t,s,n,a,i,r)=>{const o=[];Object.keys(e).filter((e=>t.includes(e))).forEach((t=>{const s=e[t],n={comment:s,timestamp:new Date(s.createdDate).getTime(),type:"COMMENT"};o.push(n)})),r&&r.forEach((e=>{const t={approval:e,timestamp:cc()(e,"completedDate.epochMillis"),type:"APPROVAL"};o.push(t)})),o.sort(((e,t)=>e.timestamp-t.timestamp));let c=o.slice();const l=a+i;return i&&n>a&&c[c.length-1]&&"APPROVAL"===c[c.length-1].type&&(c=c.slice(0,c.map((e=>e.type)).lastIndexOf("COMMENT")+1)),n>l&&c[0]&&"APPROVAL"===c[0].type?(c=c.slice(c.map((e=>e.type)).indexOf("COMMENT")),dc(c,s)):dc(c,s)}));var pc=n("./node_modules/@atlaskit/logo/dist/es2019/JiraServiceManagementLogo/Icon.js"),mc=n("./src/packages/servicedesk/approval-decision/src/ui/index.js"),fc=Object(I.defineMessages)({approvalDecisionIconLabel:{id:"issue-view.activity.servicedesk.comments.approval-decision.approval-decision-icon-label",
defaultMessage:"Jira Service Management icon"}});const bc=e=>{const{approval:t,intl:s}=e;if(!t)return null;const n=t.completedDate||t.createdDate||{},a=new Date(n.epochMillis).toJSON();return o.a.createElement(mc.a,{icon:o.a.createElement(pc.a,{size:"small",label:s.formatMessage(fc.approvalDecisionIconLabel)}),finalDecision:t.finalDecision,status:t.status,time:a,approvers:t.approvers})};bc.displayName="ServicedeskApprovalDecision";var gc=Object(I.injectIntl)(bc);const hc="jira.fe.issue.activity.jsd-comments.time-to.render-load-more",yc=ee.default.div.withConfig({componentId:"sc-1bq6rii-0"})`margin:${Ma} 0 ${1.5*te.e}px 0;`;class Oc extends r.Component{constructor(...e){super(...e),this.state={loadMoreButtonTypeClicked:void 0},this.onLoadOlderButtonClick=(e,t)=>{const{fetchMoreOlderComments:s}=this.props;Object(Ki.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_OLDER_BUTTON"}),Object(Kr.c)().cancel({key:hc},!0),Object(Kr.c)().markStartOfInteraction({key:hc}),this.setState({
loadMoreButtonTypeClicked:"LOAD_OLDER_BUTTON"}),s()},this.onLoadNewerButtonClick=(e,t)=>{const{fetchMoreNewerComments:s}=this.props;Object(Ki.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_NEWER_BUTTON"}),Object(Kr.c)().cancel({key:hc},!0),Object(Kr.c)().markStartOfInteraction({key:hc}),this.setState({loadMoreButtonTypeClicked:"LOAD_NEWER_BUTTON"}),s()},this.renderJsdActivityItems=e=>{const{fullIssueUrl:t}=this.props,{hasPermalink:s,permalinkId:n}=Object(Vi.a)("Comments");return o.a.createElement(yc,{"data-test-id":"issue.issue-view.activity.servicedesk.jsd-activity-items-list"},e.map((e=>{switch(e.type){case"COMMENT":return e.comment&&o.a.createElement(po,{key:e.comment.id,commentId:e.comment.id,fullIssueUrl:t,isHighlighted:s&&e.comment.id===n});case"APPROVAL":return e.approval&&o.a.createElement(gc,{key:e.approval.id,approval:e.approval});default:return null}})))}}UNSAFE_componentWillReceiveProps(e){
e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments()),e.isLoadingMoreComments||this.setState({loadMoreButtonTypeClicked:void 0}),this.props.isLoadingMoreComments&&!e.isLoadingMoreComments&&setTimeout((()=>{Object(Kr.c)().markTimeToFinishTask({key:hc})}))}renderLoadMoreOlderButton(e){const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadOlderButtonClick:n}=this,a="LOAD_OLDER_BUTTON"===s&&t;return o.a.createElement(ec.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},o.a.createElement("div",{"data-test-id":"issue.issue-view.activity.servicedesk.comments-view.view-older-comments-button"},e<100?o.a.createElement(I.FormattedMessage,{id:"issue.comments-view-sorted-older-remaining-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} remaining older comments}}",values:{numComments:e}
}):o.a.createElement(I.FormattedMessage,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} older comments}}",values:{numComments:e}})))}renderLoadMoreNewerButton(e){const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadNewerButtonClick:n}=this,a="LOAD_NEWER_BUTTON"===s&&t;return o.a.createElement(ec.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},e<100?o.a.createElement(I.FormattedMessage,{id:"issue.comments-view-sorted-newer-remaining-comments-text",defaultMessage:"View {numComments, plural, one {1 newer comment} other {{numComments} remaining newer comments}}",values:{numComments:e}}):o.a.createElement(I.FormattedMessage,{id:"issue.comments-view-newer-comments-text",defaultMessage:"View {numComments, plural, one {1 newer comment} other {{numComments} newer comments}}",values:{numComments:e}}))}render(){
const{canAddComments:e,jsdActivityItems:t,startIndex:s,totalComments:n,loadedComments:a,totalApprovalDecisionsItems:i,loadingStage:r,selectedSortOrder:c}=this.props;if(!t.length&&!e)return null;const{numPrevActivityItemsToLoad:l,numNextActivityItemsToLoad:d}=Object(zr.b)(n,a,s,t,i),u=t.length?o.a.createElement(o.a.Fragment,null,"NEWEST_FIRST"===c&&this.renderLoadMoreNewerButton(l),"OLDEST_FIRST"===c&&this.renderLoadMoreOlderButton(d),this.renderJsdActivityItems(t),"NEWEST_FIRST"===c&&this.renderLoadMoreOlderButton(d),"OLDEST_FIRST"===c&&this.renderLoadMoreNewerButton(l)):null;return o.a.createElement(Wi.a,{sourceType:Bi.f,sourceName:"jsdCommentsActivityFeed"},o.a.createElement(Xo,{loadingStage:r,canAddComments:e,list:u,numPrevCommentsToLoad:l,selectedSortOrder:c}))}}Oc.displayName="ServicedeskComments",Oc.displayName="ServicedeskComments",Oc.defaultProps={canAddComments:!1};const jc=Object(c.connect)((e=>({canAddComments:Object(Qn.b)(e),totalComments:Object(Qn.K)(e),
startIndex:Object(Qn.J)(e),loadedComments:Object(Qn.F)(e),isLoadingMoreComments:Object(Qn.E)(e),jsdActivityItems:uc(e),totalApprovalDecisionsItems:lc(e),fullIssueUrl:Object(Yr.b)(e),loadingStage:Object(Qn.G)(e),selectedSortOrder:Object(Ni.b)(e)})),(e=>({fetchMoreOlderComments:()=>{e(Object(Dn.s)())},fetchMoreNewerComments:()=>{e(Object(Dn.r)())}})))(Oc),vc=Object(_.b)("ServicedeskComments")(jc);var Ec=()=>o.a.createElement($.a,{id:"issue.issue-view.activity.servicedesk-comments"},o.a.createElement(vc,null)),wc=n("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),kc=n("./src/packages/forge/forge-ui-async/src/ui/issue-activity/async.js");const Cc=ee.default.div.withConfig({componentId:"sc-1u1r17x-0"})`margin-top:${Ma};`,Sc=({source:e,extension:t,extensionData:s})=>o.a.createElement(Cc,null,o.a.createElement(kc.a,{extension:t,extensionData:s,analyticsAttributes:{source:e}}));Sc.displayName="ForgeIssueActivity";const Ic=e=>o.a.createElement(hr.b,{
attributes:{source:e.source}},o.a.createElement(Sc,e));Ic.displayName="ForgeIssueActivityWithAnalytics";var Tc=Ic;const _c=e=>t=>s=>o.a.createElement($.a,{id:e,packageName:"issue"},o.a.createElement(Ee.a,{fallback:o.a.createElement(Qo.d,null,o.a.createElement(Jo.a,null))},o.a.createElement(t,s))),Pc=_c("activity-feed-all-activity")(Object(Ee.h)((()=>n.e("async-activity-feed-item-all-activity").then(n.bind(null,"./src/packages/issue/issue-actions/issue-all-activity/src/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-all-activity/src/index.js"}));Pc.displayName="AllActivity";const xc=_c("activity-feed-item-history")(Object(Ee.h)((()=>n.e("async-activity-feed-item-history").then(n.bind(null,"./src/packages/issue/issue-actions/issue-history/src/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-history/src/index.js"}));xc.displayName="History"
;const Dc=_c("activity-feed-item-worklog")(Object(Ee.h)((()=>n.e("async-activity-feed-item-worklog").then(n.bind(null,"./src/packages/issue/issue-view/src/activity/worklog/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/activity/worklog/index.js"}));Dc.displayName="Worklog";var Ac=Object(c.connect)((e=>({baseUrl:Object(M.f)(e),issueKey:Object(M.x)(e),timeZone:void 0,extensionData:Object(wc.g)(e),source:Object(M.b)(e),mediaContext:Object(R.a)(e)})),{})((({selectedItem:e,baseUrl:t,issueKey:s,timeZone:n,selectedSortOrder:a,extensionData:i,source:r,mediaContext:c})=>{if(!e)return null;switch(e.type){case"AllActivity":return o.a.createElement(Pc,{sortOrder:a,mediaContext:c});case"JSDComments":return o.a.createElement(Ec,null);case"Comments":return o.a.createElement(rc,null);case Ti:return o.a.createElement(Ka,{appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,appName:e.name,location:"issueActionsActivityFeed"});case"FORGE_ENTITY_TYPE":return o.a.createElement(Tc,{
key:e.extension.id,source:r,extensionData:i,extension:e.extension});case"History":return o.a.createElement(xc,{baseUrl:Object(Vr.c)(t),issueKey:Object(Vr.m)(s),timeZone:n,sortOrder:a});case"Worklog":return o.a.createElement(Dc,{timeZone:n});default:return null}}));function Mc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(s),!0).forEach((function(t){Rc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const Nc=["AllActivity","Comments","JSDComments","History","Worklog"];class Fc extends r.Component{constructor(...e){super(...e),this.getAnalyticsData=e=>{switch(e.type){case Ii:return{extensionId:e.extension.id};case Ti:return Object(ga.a)(e.appKey,e.moduleKey);default:return{}}},this.getEcosystemActivity=()=>this.props.ecosystemModules.map((e=>{switch(e.type){case Ii:return Lc({key:Object(ki.e)(e.appKey,e.moduleKey)},e);case Ti:return Lc({key:`${e.moduleKey}${e.appKey}`},e);default:return v.a.safeErrorWithoutCustomerData("issue.issue-actions.activity-feed","Tried to show ecosystem activity with other type than connect or forge"),null}})).filter(Boolean),this.getAllActivity=()=>{const{intl:e}=this.props;return[{key:"AllActivity",type:"AllActivity",name:e.formatMessage(Gi.a.allActivity)}]},this.getJSDCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"JSDComments",type:"JSDComments",name:s.formatMessage(Gi.a.comments)}]:[]},
this.getCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"Comments",type:"Comments",name:s.formatMessage(Gi.a.comments)}]:[]},this.getHistoryActivity=()=>[{key:"History",type:"History",name:this.props.intl.formatMessage(Gi.a.history)}],this.getWorklogActivity=()=>this.props.shouldShowWorklog?[{key:"Worklog",type:"Worklog",name:this.props.intl.formatMessage(Gi.a.worklog)}]:[],this.getActivityItems=()=>{const{isServiceDesk:e}=this.props;return[...this.getAllActivity(),...e?this.getJSDCommentActivity():this.getCommentActivity(),...this.getHistoryActivity(),...this.getWorklogActivity(),...this.getEcosystemActivity()]},this.getSelectedItem=(e=[])=>{if(this.props.selectedItem)return this.props.selectedItem;const t=Object(Vi.b)();if(t){const{permalinkType:s}=t,n=e.find((e=>e.type===s));if(n)return this.props.onInitialSelectedActivityItem(n),n}return e[1]},this.selectActivityItem=(e,t,s)=>{const n=[s,this.getAnalyticsData(e)]
;Object(Ki.h)(t,...n),this.props.onSwitchSelectedActivityItem(e)},this.selectSortOrder=(e,t,s)=>{var n;Object(Ki.h)(t,s,{selectedSortOrder:e,selectedActivityFeed:null===(n=this.props.selectedItem)||void 0===n?void 0:n.key}),this.props.onSwitchSelectedActivitySortOrder(e)},this.renderChangeboardingMount=()=>{const{permalinkType:e}=Object(Vi.b)()||{};return"Comments"===e||"Worklog"===e?o.a.createElement($i.a,{onMount:t=>{Object(Ki.b)(t,"Comments"===e?"permalinkWithChangeboardingModalComments mounted":"permalinkWithChangeboardingModalWorklog mounted")}}):null},this.renderActivitySortDropdown=(e,t)=>{const{selectedSortOrder:s,setActivitySortRef:n}=this.props;if(!s)return null;const a=e.length>1?Zi:Xi,i=!Nc.includes(t.type);return o.a.createElement(a,{innerRef:n},o.a.createElement(pr,{selectedSortOrder:s,onSelectSortOrder:this.selectSortOrder,isDisabled:i}))},this.renderActvityHeadingRow=(e,t)=>{const{intl:{formatMessage:s},setActivityItemsRef:n,shouldDisplayDropdown:a}=this.props
;return e.length>1?o.a.createElement(Xi,null,o.a.createElement(er,{innerRef:n},o.a.createElement(Si.b,null,s(Gi.a.filterBy)),o.a.createElement(Si.d,{leftAlign:!0},a?o.a.createElement(Mr,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem}):o.a.createElement(Ur,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem}))),this.renderActivitySortDropdown(e,t)):this.renderActivitySortDropdown(e,t)}}componentDidMount(){const e=this.getActivityItems(),t=this.getSelectedItem(e);this.props.onInitialSelectedActivityItem(t)}render(){const{permalinkType:e}=Object(Vi.b)()||{};if(("Worklog"===e||!this.props.commentIds.length)&&this.props.isPreview)return o.a.createElement(Ri,null);const t=this.getActivityItems(),s=this.getSelectedItem(t);if(!t.length||!s)return null;const{intl:{formatMessage:n}}=this.props;return o.a.createElement(Wi.a,{sourceType:Bi.f,sourceName:"activityFeed"},this.renderChangeboardingMount(),o.a.createElement(Si.c,{leftAlign:!0
},o.a.createElement(Si.e,{"data-test-id":"issue-activity-feed.heading"},t.length>1?n(Gi.a.activity):s.name)),this.renderActvityHeadingRow(t,s),(()=>Object(Hi.b)("jsm-incident-timeline-in-issue-view_2yg9q",!1))()&&o.a.createElement(Ui,{selectedActivityFeed:s.key}),o.a.createElement(Ac,{selectedItem:s,selectedSortOrder:this.props.selectedSortOrder}))}}Fc.displayName="FeedDisplay",Fc.defaultProps={isServiceDesk:!1,shouldDisplayDropdown:!1,canAddComments:!1,selectedItem:null,ecosystemModules:[]},Fc.displayName="FeedDisplay";var Uc=Object(Is.a)([I.injectIntl,Object(c.connect)((e=>({isPreview:Object(L.s)(e),isServiceDesk:Object(M.t)(e),shouldShowWorklog:Object(N.c)(e),canAddComments:Object(Qn.b)(e),commentIds:Object(Qn.L)(e),ecosystemModules:Object(ha.e)(e),selectedItem:Object(Ni.a)(e),selectedSortOrder:Object(Ni.b)(e),projectKey:Object(M.B)(e)})),(e=>({onSwitchSelectedActivityItem:t=>{e(Object(Ci.d)(t))},onInitialSelectedActivityItem:t=>{e(Object(Ci.c)(t))},
onSwitchSelectedActivitySortOrder:t=>{e(Object(Ci.e)(t)),e(Object(Ci.f)(t))}})))])(Fc);const Vc=({containerWidth:e})=>{const{shouldBeCompact:t,setMeasuredRef:s}=Ei(e,15);return o.a.createElement(Uc,{shouldDisplayDropdown:t,setActivityItemsRef:s("activity-items"),setActivitySortRef:s("activity-sort")})};Vc.displayName="ActivityFeed";var Kc=Object(Is.a)([wi.a])(Vc),$c=n("./src/packages/issue/issue-view-layout/src/services/main.js"),Wc=n("./src/packages/issue/issue-view/src/views/connect-field.js"),Bc=n("./src/packages/issue/epic-color/src/common/utils.js"),Hc=n("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js")
;const Gc=Object(zn.createSelector)(Object(Yn.q)("issuetype"),(e=>e&&e.value.id)),qc=Object(zn.createSelector)(Object(Yn.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),Object(Yn.e)("com.pyxis.greenhopper.jira:gh-epic-color"),((e,t)=>e&&e.key||t&&t.key)),zc=Object(zn.createSelector)(Object(Yn.e)("com.pyxis.greenhopper.jira:gh-epic-color"),Object(Yn.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),((e,t)=>e||t));Object(zn.createSelector)(Gc,qc,Hc.d,((e,t,s)=>{if(!s)return!1;const n=s.find((t=>t.id===e));return!(!n||!n.fields)&&t in n.fields}));var Yc=n("./src/packages/platform/utils/fetch/src/utils/requests.js"),Qc=n("./src/packages/platform/utils/xsrf-token/src/index.js"),Jc=(e,t)=>Object(Yc.d)(`${e.baseUrl}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(u.stringify)({[e.fieldId]:e.value,issueId:Object(L.l)(t),skipScreenCheck:!0,atl_token:Object(Qc.a)(),singleFieldEdit:!0})
}),Zc=n("./node_modules/memoize-one/dist/memoize-one.esm.js"),Xc=n("./node_modules/@atlaskit/color-picker/dist/es2019/index.js"),el=Object(I.defineMessages)({readOnlyLabel:{id:"issue.views.issue-base.foundation.read-only-label",defaultMessage:"Read-only Color, {color} selected"},label:{id:"issue.views.issue-base.foundation.label",defaultMessage:"Edit color"},purple:{id:"issue.views.issue-base.foundation.purple",defaultMessage:"purple"},darkPurple:{id:"issue.views.issue-base.foundation.dark-purple",defaultMessage:"dark purple"},blue:{id:"issue.views.issue-base.foundation.blue",defaultMessage:"blue"},darkBlue:{id:"issue.views.issue-base.foundation.dark-blue",defaultMessage:"dark blue"},green:{id:"issue.views.issue-base.foundation.green",defaultMessage:"green"},darkGreen:{id:"issue.views.issue-base.foundation.dark-green",defaultMessage:"dark green"},teal:{id:"issue.views.issue-base.foundation.teal",defaultMessage:"teal"},darkTeal:{id:"issue.views.issue-base.foundation.dark-teal",
defaultMessage:"dark teal"},yellow:{id:"issue.views.issue-base.foundation.yellow",defaultMessage:"yellow"},darkYellow:{id:"issue.views.issue-base.foundation.dark-yellow",defaultMessage:"dark yellow"},orange:{id:"issue.views.issue-base.foundation.orange",defaultMessage:"orange"},darkOrange:{id:"issue.views.issue-base.foundation.dark-orange",defaultMessage:"dark orange"},grey:{id:"issue.views.issue-base.foundation.grey",defaultMessage:"grey"},darkGrey:{id:"issue.views.issue-base.foundation.dark-grey",defaultMessage:"dark grey"}});n("./node_modules/focus-visible/dist/focus-visible.js");const tl=ee.default.div.withConfig({componentId:"u5emq5-0"})`margin-left:-2px;padding-top:${te.e}px;padding-right:${te.e}px;height:${4*te.e}px;button:focus{box-shadow:none;}`,sl=ee.default.div.withConfig({componentId:"u5emq5-1"})`position:absolute;top:1px;left:1px;width:${3*te.e}px;height:${3*te.e}px;border-radius:3px;background:${e=>e.selectedColor};`,nl=ee.default.button.withConfig({componentId:"u5emq5-2"
})`display:inline-block;position:relative;width:${3.75*te.e}px;height:${3.75*te.e}px;border:2px solid transparent;box-sizing:border-box;border-radius:6px;border-color:transparent;background-color:transparent;padding:0;outline:none;transition:box-shadow 0.2s cubic-bezier(0.47,0.03,0.49,1.38);&:focus.focus-visible{border-color:${Ze.a.B100};}`;class al extends r.Component{constructor(...e){super(...e),this.onChange=e=>{const{onChange:t,onConfirm:s}=this.props;t(e),s()},this.generatePalette=Object(Zc.a)(((e,t)=>e.map((({value:e,label:s})=>({value:e,label:t.formatMessage(el[s])})))))}render(){const{value:e,intl:t,isEditable:s}=this.props,n=Object(Bc.g)();return o.a.createElement(tl,{"data-test-id":"issue.views.issue-base.foundation.color.color-picker-wrapper"},s?o.a.createElement(Xc.c,{label:t.formatMessage(el.label),popperProps:{positionFixed:!0,modifiers:{offset:{offset:"-10 5"}}},cols:n.length/2,selectedColor:e,palette:this.generatePalette(n,t),onChange:this.onChange
}):o.a.createElement(il,{intl:t,value:e,palette:this.generatePalette(n,t)}))}}al.displayName="UnsafeColorPicker",al.displayName="ColorPicker";const il=e=>{const t=e.palette.filter((t=>t.value===e.value))[0].label,s=e.intl.formatMessage(el.readOnlyLabel,{color:t});return o.a.createElement(nl,{"aria-label":s},o.a.createElement(sl,{selectedColor:e.value}))};function rl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ol(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(s),!0).forEach((function(t){cl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function cl(e,t,s){return t in e?Object.defineProperty(e,t,{
value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}il.displayName="ReadOnlyColorPicker";const ll=(e,t)=>{const s=Object(Yn.q)(t.fieldId)(e),n=!!s&&"com.pyxis.greenhopper.jira:gh-epic-color"===s.schema.custom;let a={shouldDiscardChangeOnFailure:!0,onSaveFailureFlagType:an.u};return n&&(a=ol({saveField:Jc},a)),ol(ol({},a),{},{fieldId:t.fieldId,transformFromStateValue:e=>((e,t=!1)=>t?Object(Bc.h)(Object(Bc.e)(e)):Object(Bc.h)(Object(Bc.j)(e)))(e,n),transformToStateValue:e=>((e,t=!1)=>t?Object(Bc.d)(Object(Bc.f)(e)):Object(Bc.i)(Object(Bc.f)(e)))(e,n)})},dl=Object(Is.a)([I.injectIntl,Object(Wc.a)(((e,t)=>ll(e,t)))])(al);var ul=Object(Is.a)([Object(c.connect)((e=>({field:zc(e)})),{})])((e=>e.field?o.a.createElement(dl,{fieldId:e.field.key
}):null)),pl=n("./src/packages/issue/fields/summary/src/ui/main.js"),ml=n("./src/packages/issue/fields/summary/src/common/constants.js"),fl=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/editing/view/common/context/index.js"),bl=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/view/common/context/index.js"),gl=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/view/experience-tracker-consumer/tracker-base/view.js");const hl=["forField","issueKey","failureEventAttributes","allowList"];function yl(){return(yl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ol(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const jl=e=>t=>{const{forField:s,issueKey:n,failureEventAttributes:a,allowList:i}=t,c=Ol(t,hl),l=Object(r.useContext)(bl.a),d=Object(r.useContext)(fl.a),u=d?d.onFailure:void 0;return null==l?o.a.createElement(e,yl({issueKey:n,onEditFailure:u},c)):o.a.createElement(gl.a,{location:s,experienceContext:l,failureEventAttributes:null!=a?a:null,parentProvidersWhitelist:null!=i?i:null},(({onExperienceSuccess:t})=>o.a.createElement(e,yl({onRenderSuccess:t,issueKey:n,onEditFailure:u},c))))};var vl=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js");function El(){return(El=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
const wl=jl(pl.a),kl=e=>{const t=Object(cs.g)(),s=Object(cs.a)();return o.a.createElement(wl,El({forField:"summary",issueKey:t,source:s,appearance:ml.a},e))};kl.displayName="ExtractedSummaryField";var Cl=Object(c.connect)(null,(e=>({onUpdate:t=>e(Object(vl.h)("summary",t))})))(kl),Sl=n("./node_modules/@atlaskit/section-message/dist/es2019/section-message.js"),Il=n("./src/packages/platform/utils/constants/src/project-types.js"),Tl=n("./src/packages/issue/project-context-service/src/main.js"),_l=n("./src/packages/platform/controllers/tenant-context/src/components/is-admin/index.js"),Pl=Object(I.defineMessages)({readOnlyIssueTitle:{id:"read-only-issue-info.read-only-issue-title",defaultMessage:"This issue can't be edited"},readOnlyIssueLink:{id:"read-only-issue-info.read-only-issue-link",defaultMessage:"Go to archived projects"},readOnlyIssueMessage:{id:"read-only-issue-info.read-only-issue-message",
defaultMessage:"Because it belongs to an archived project. Jira admins can restore projects from the archive."},jsmReadOnlyIssueMessage:{id:"read-only-issue-info.jsm-read-only-issue-message",defaultMessage:"Because it belongs to an archived service project. Jira admins can restore service projects from the archive."}});const xl=({title:e})=>o.a.createElement("h3",null,e);xl.displayName="Header";const Dl=({message:e})=>o.a.createElement("p",null,e);Dl.displayName="MainContent";const Al=({text:e})=>o.a.createElement("p",null,o.a.createElement("a",{href:"/jira/settings/projects/archive"},e));Al.displayName="ArchivedProjectsLink";const Ml=()=>{const{formatMessage:e}=Object(qe.c)(),t=Object(_l.a)(),s=Object(cs.g)(),n=Object(Tl.g)(s),a=Object(Tl.i)(n),i=Object(Tl.c)(n);if("PROJECT_ARCHIVED"!==(null==i?void 0:i.projectStatus))return null;const r=e(a===Il.g?Pl.jsmReadOnlyIssueMessage:Pl.readOnlyIssueMessage);return o.a.createElement(Sl.a,{appearance:"information"},o.a.createElement(xl,{
title:e(Pl.readOnlyIssueTitle)}),o.a.createElement(Dl,{message:r}),t?o.a.createElement(Al,{text:e(Pl.readOnlyIssueLink)}):null)};Ml.displayName="ReadOnlyIssueInfo";var Ll=Ml;const Rl=ee.default.div.withConfig({componentId:"iy9k0c-0"})`display:flex;flex:1 1 auto;min-width:0;width:100%;`,Nl=ee.default.div.withConfig({componentId:"iy9k0c-1"})`display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}`;var Fl=()=>o.a.createElement(o.a.Fragment,null,(()=>Object(pa.b)("jsm-project-archive-and-restore",!1))()&&o.a.createElement(Ll,null),o.a.createElement(Rl,null,o.a.createElement(ul,null),o.a.createElement(Nl,{key:"SUMMARY"
},o.a.createElement(Cl,null)))),Ul=n("./src/packages/platform/utils/constants/src/status-categories.js"),Vl=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Kl=n("./src/packages/issue/fields/field-base/src/services/custom-field-key-service/main.js"),$l=n("./src/packages/issue/fields/flagged/src/services/main.js"),Wl=n("./src/packages/issue/fields/resolution/src/services/main.js"),Bl=n("./src/packages/issue/fields/resolution/src/main.js"),Hl=n("./src/packages/issue/workflow-transitions-services/src/main.js"),Gl=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),ql=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),zl=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),Yl=n("./src/packages/issue/fields/status/src/ui/status-view/actions/main.js");const Ql=e=>o.a.createElement(Yl.a,e);Ql.displayName="ActionsMenu"
;var Jl=Ql,Zl=n("./node_modules/@atlaskit/icon/glyph/flag-filled.js"),Xl=n.n(Zl);const ed=25*te.e,td=ee.default.div.withConfig({componentId:"sc-1b9jtkm-0"})`margin-top:${te.e/2}px;display:inline-flex;vertical-align:baseline;margin-left:-${te.e/4}px;height:${3*te.e}px;`,sd=ee.default.span.withConfig({componentId:"sc-1b9jtkm-1"})`color:${Ze.a.N200};display:inline-block;overflow:hidden;line-height:${3*te.e}px;text-overflow:ellipsis;white-space:nowrap;max-width:${ed}px;`;class nd extends r.Component{constructor(...e){super(...e),this.state={hasOverflow:!1},this.altStatusLabel=null,this.renderAltStatus=()=>o.a.createElement(sd,{innerRef:e=>{this.altStatusLabel=e}},this.props.name),this.renderAltStatusWithTooltip=()=>o.a.createElement(Re.a,{content:this.props.name,position:"bottom"},this.renderAltStatus())}componentDidMount(){this.updateOverflow()}UNSAFE_componentWillReceiveProps(){this.setState({hasOverflow:!1})}componentDidUpdate(){this.updateOverflow()}updateOverflow(){
if(!this.altStatusLabel)return!1;const e=this.altStatusLabel.clientWidth>=ed;return e!==this.state.hasOverflow&&this.setState({hasOverflow:e}),e}render(){return o.a.createElement(td,{onClick:this.props.onClick,"data-test-id":"issue.views.issue-base.foundation.status.alt-view"},this.props.icon,this.state.hasOverflow?this.renderAltStatusWithTooltip():this.renderAltStatus())}}nd.displayName="AltStatusField",nd.defaultProps={onClick:d.a};const ad=Object(I.defineMessages)({flagged:{id:"issue.status-field.flagged",defaultMessage:"Flagged"}}),id=({onClick:e})=>{const{formatMessage:t}=Object(qe.c)(),s=t(ad.flagged);return o.a.createElement(nd,{onClick:e,name:s,icon:o.a.createElement(Xl.a,{size:"medium",primaryColor:Ze.a.R300,label:s})})};id.displayName="FlaggedField";var rd=Object(zs.a)((e=>({onClick:()=>{e("click")}})))(id),od=n("./src/packages/issue/fields/status/src/ui/main.js"),cd=n("./src/packages/servicedesk/common/src/global-spotlight-target/index.js")
;const ld=e=>o.a.createElement(cd.a,{id:"status-spotlight"},o.a.createElement(od.a,e));ld.displayName="StatusWithRef";var dd=ld;ee.default.div.withConfig({componentId:"yaa79-0"})`padding-top:${1.5*te.e}px;`,ee.default.div.withConfig({componentId:"yaa79-1"})`display:flex;flex-wrap:wrap;padding-bottom:unset;& > *:not(:last-child){margin-right:${te.e}px;}`,ee.default.div.withConfig({componentId:"yaa79-2"})`padding-right:unset;padding-bottom:${te.e}px;`;const ud=ee.default.div.withConfig({componentId:"yaa79-3"})`padding-bottom:${te.e}px;display:inline-flex;flex-wrap:nowrap;overflow:hidden;`,pd=ee.default.div.withConfig({componentId:"sc-1njt3iw-0"})`display:flex;flex-wrap:wrap;padding-top:${1.5*te.e}px;padding-bottom:unset;& > *:not(:last-child){margin-right:${te.e}px;}`,md=ee.default.div.withConfig({componentId:"sc-1njt3iw-1"})`padding-right:unset;padding-bottom:${te.e}px;`,fd=({isEditable:e,onStatusChanged:t,onEditCancel:s})=>{
const n=Object(cs.g)(),a=Object(cs.i)(),i=Object(Tl.i)(a),c=Object(r.useContext)(bl.a),[l]=Object(Vl.b)({issueKey:n,fieldKey:"status"}),[{value:d,fieldConfig:u}]=Object(Wl.a)({issueKey:n}),p=null==d?void 0:d.name,m=Object(Hl.b)(),[,f]=Object(Hl.a)(),b=Object(r.useMemo)((()=>(e=>null==e?{name:"",id:"",statusCategory:{id:0,name:""}}:{name:e.name,id:e.id,statusCategory:{id:e.statusCategory.id,name:e.statusCategory.name}})(l)),[l]),[g]=Object(Vl.b)({issueKey:n,fieldKey:"hierarchy-level-same-level"}),h=null==g?void 0:g.level,[y]=Object(Kl.a)(n,"com.atlassian.jira.plugin.system.customfieldtypes:flagged")||"",[{value:O}]=Object($l.a)({issueKey:n,fieldKey:y}),j=(e,t,s,n)=>{f.setTransitionInProgress(!0),Object(Ki.f)(n,"issueStatus updated",{oldValId:e.id,oldStatusCategoryId:e.statusCategory.id,oldStatusCategoryName:e.statusCategory.name,newValId:t.id,newStatusCategoryId:t.statusCategory.id,newStatusCategoryName:t.statusCategory.name,hasScreen:s.transition.hasScreen,
isConditional:s.transition.isConditional,issueHierarchyLevel:h})};return Object(r.useEffect)((()=>{null==c||c.consumerCallbacks.onSuccess()}),[]),o.a.createElement($.a,{onError:(e,t)=>{null==c||c.consumerCallbacks.onFailure("status",{errorMessage:t.message})}},o.a.createElement(pd,null,o.a.createElement(md,{"data-test-id":"issue.views.issue-base.foundation.status.status-field-wrapper"},o.a.createElement(dd,{issueKey:n,projectType:i,initialValue:b,isEditable:e,appearance:"button",onSubmit:j,onSuccess:t,onEditCancel:s,onFailure:()=>{f.setTransitionInProgress(!1)},preFetchTransitions:!0})),O&&o.a.createElement(ud,null,o.a.createElement(rd,{externalId:"issue.status.flagged"})),!m&&(null!=p||(null==u?void 0:u.isEditable)&&b.statusCategory.id===Object(Ul.categoryIdForStatusCategory)("DONE"))&&o.a.createElement("div",{"data-test-id":"issue.views.issue-base.foundation.status.resolution"},o.a.createElement(Bl.a,{issueKey:n})),!m&&o.a.createElement(ud,{
"data-test-id":"issue.views.issue-base.foundation.status.actions-wrapper"},o.a.createElement(Jl,{initialStatusValue:b,onSubmit:j,onSuccess:t}))))};fd.displayName="StatusView";const bd={canContainMediaContent:!1,isOptimistic:!1,isRichTextField:!1,shouldSaveDraft:!1,shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,saveField:()=>Promise.resolve()};var gd=Object(Is.a)([Object(c.connect)((e=>({isEditable:Object(L.n)(e)})),(e=>({onStatusChanged:(t,s)=>{e(Object(vl.e)("status",bd,t)),e(Object(vl.h)("status",t,{viaDialog:s}))},onEditCancel:()=>{e(Object(Gl.c)("status",bd))}}))),Object(ql.c)("status"),Object(zl.b)("status")])(fd);const hd=ee.default.div.withConfig({componentId:"l85bb2-0"})`margin-bottom:0;`;var yd=()=>o.a.createElement(hd,{"data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},o.a.createElement(gd,{key:"STATUS"
})),Od=n("./src/packages/issue/issue-view-layout-templates/components/item-list/src/index.js"),jd=n("./node_modules/@atlassiansox/engagekit/dist/esm/spotlight/index.js"),vd=n("./node_modules/@atlaskit/tabs/dist/es2019/components/TabItem.js"),Ed=n("./node_modules/@atlaskit/tabs/dist/es2019/components/Tabs.js"),wd=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),kd=n("./src/packages/issue/issue-tabs/src/services/main.js"),Cd=n("./src/packages/issue/issue-view-layout-templates/utils/src/main.js"),Sd=n("./src/packages/platform/ui/field-config/src/index.js"),Id=n("./src/packages/global-pages/directories/common-directory-v2/src/utils/log-safe-error/index.js");var Td=Object(I.defineMessages)({defaultTabName:{id:"issue-view-layout-templates-tab-view.default-tab-name",defaultMessage:"General"}});const _d=ee.default.div.withConfig({componentId:"nla5ek-0"})`padding-top:${2*te.e}px;display:flex;flex-direction:column;width:100%;`,Pd=ee.default.div.withConfig({
componentId:"nla5ek-1"})`position:relative;margin-left:-${te.e}px;width:calc(100% + ${2*te.e}px);div[role='tablist']{flex-wrap:wrap;}`,xd=ee.default.div.withConfig({componentId:"nla5ek-2"})`overflow:hidden;text-overflow:ellipsis;`,Dd=ee.default.div.withConfig({componentId:"nla5ek-3"})`visibility:hidden;position:absolute;z-index:-1;width:100%;`,Ad="TemplatesTabViewOnboardingSpotlightTarget",Md=e=>e.elementProps["aria-setsize"]>2?o.a.createElement(xd,null,o.a.createElement(Re.a,{content:e.data.label,position:"bottom"},o.a.createElement(vd.a,e))):o.a.createElement(xd,null,o.a.createElement(vd.a,e));Md.displayName="TooltipItem";const Ld=({tabsContent:e})=>{const{createAnalyticsEvent:t}=Object(sr.a)(),s=Object(cs.g)(),n=Object(Tl.g)(s),[a,i]=(e=>{const t=`tabs.state.${e}`,[s,n]=Object(r.useState)((()=>{try{var e;return null===(e=window.localStorage)||void 0===e?void 0:e.getItem(t)}catch(s){return}}));return Object(r.useEffect)((()=>{var e
;n(null===(e=window.localStorage)||void 0===e?void 0:e.getItem(t))}),[t]),[s,e=>{try{var s;n(e),null===(s=window.localStorage)||void 0===s||s.setItem(t,e)}catch(a){Object(Id.a)(a,"issue.issue-view-layout-templates.components.tab-view","issue.templates.tab-view")}}]})(n),c=e.findIndex((e=>e&&e.id===a));return o.a.createElement(Ed.a,{components:{Item:Md},selected:c,onSelect:(s,n)=>{const a={totalTabCount:e.length,selectedTabPosition:n+1},r=t({action:"selected",actionSubject:"tab",actionSubjectId:"issueFieldTabs"});Object(Ki.h)(r,"issueFieldTabs",a),i(s.id)},tabs:e})};Ld.displayName="StaticTabs";const Rd=({tabsContent:e})=>o.a.createElement(Ed.a,{components:{Content:()=>null},tabs:e});Rd.displayName="StaticTabsSpotlight";var Nd=({items:e,area:t})=>{const s=Object(qe.c)(),n=e.filter((e=>"TabLayout"!==e.type)),a={label:s.formatMessage(Td.defaultTabName),content:o.a.createElement(_d,null,o.a.createElement(Od.a,{items:n,area:t}))
},i=e.filter((e=>"TabLayout"===e.type)),c=Object(cs.g)(),[{issueTabs:l}]=Object(kd.b)(c),[{value:d}]=Object(wd.c)(c),[u]=Object(Vl.d)(c),p=Object(Sd.Y)(),m=Object(r.useCallback)((e=>{if(!d||!d[e])return!1;const t=u&&(null===u[e]||void 0===u[e]);if(!d[e].isEditable&&t)return!1;const{custom:s,system:n,type:a}=d&&d[e].schema||{},i=null!==n?n:"",r=Object(Cd.b)(s)||i||a;return void 0!==r&&Object.values(p).includes(r)}),[d,u,p]);if(0===Object.keys(l).length)return null;const f=i.map((({id:e})=>{const s=l[e];if(void 0!==s&&s.name&&s.items&&s.items.length>0){const e=s.items.filter((e=>m(e.id)));return e.length<1?null:{id:s.id,label:s.name,content:o.a.createElement(_d,null,o.a.createElement(Od.a,{items:e,area:t}))}}return null})).filter((e=>null!==e)),b=n.length>0?[a,...f]:f;if(0===b.length)return null;if(1===b.length){const e=b[0];return e&&e.content}return o.a.createElement(Pd,null,o.a.createElement(Dd,null,o.a.createElement(mo.a,{name:Ad},o.a.createElement(Rd,{tabsContent:b
}))),o.a.createElement(jd.a,{engagementId:Ad}),o.a.createElement($i.a,{onMount:e=>Object(Ki.b)(e,"TemplatesTabViewOnboarding mounted")}),o.a.createElement(Ld,{tabsContent:b}))};const Fd=({items:e})=>e.find((({type:e})=>"TabLayout"===e))?o.a.createElement(Nd,{items:e,area:"content"}):o.a.createElement(Od.a,{items:e,area:"content"});Fd.displayName="ContentSectionView";var Ud=()=>{var e;const t=Object(cs.g)(),[{contentSection:s}]=Object($c.d)(t);return(()=>Object(pa.b)("issue.details.fix-section-rendering-undefined-bug",!1))()?o.a.createElement(Fd,{items:null!==(e=null==s?void 0:s.items)&&void 0!==e?e:[]}):o.a.createElement(Fd,{items:s.items})
},Vd=n("./node_modules/lodash/uniqBy.js"),Kd=n.n(Vd),$d=n("./src/packages/platform/utils/constants/src/analytics-sources.js"),Wd=n("./src/packages/issue/fields/components/field-pin/src/utils.js"),Bd=n("./src/packages/issue/ecosystem-service/src/services/main.js"),Hd=n("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),Gd=n("./src/packages/issue/project-permissions-service/src/main.js"),qd=n("./src/packages/issue/jira-settings-service/src/main.js");var zd=n("./src/packages/forge/forge-ui/src/utils/conditions/index.js"),Yd=n("./src/packages/issue/forge-service/src/services/main.js"),Qd=n("./src/packages/issue/issue-view/src/configurations.js"),Jd=n("./src/packages/issue/issue-view/src/common/model/ecosystem-constants.js");function Zd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xd(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Zd(Object(s),!0).forEach((function(t){eu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function eu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tu=(e,t)=>{const s=t[e],n=Object(Qd.n)();if(!s&&Object.prototype.hasOwnProperty.call(n,e)){return((e,t)=>qs()(t,(t=>(t.schema&&t.schema.custom)===e)))(n[e],t)}return s},su=(e,t)=>e.filter((e=>Object(zd.a)(e,t))),nu=()=>{const[e]=Object(Yd.b)(),t=(()=>{const e=Object(cs.g)(),t=Object(cs.f)(),s=Object(Tl.g)(e),[n]=Object(Gd.d)(s),a=Object(Tl.i)(s),i=Object(Tl.e)(s),[r]=Object(Vl.b)({issueKey:e,fieldKey:"issuetype"});return{issueId:t||null,issueKey:e,issueType:r&&r.name,projectId:i,projectKey:s,projectType:a||null,
canAddComments:n.canAddComments,canAdministerJira:n.canAdministerJira,canAdministerProjects:n.canAdministerProject,canAssignIssues:n.canAssignIssues,canBeAssignedToIssues:n.canBeAssignedToIssues,canCloneIssues:n.canCloneIssue,canCreateAttachments:n.canCreateAttachments,canCreateChildren:n.canCreateChildren,canCreateSubtasks:n.canCreateSubtask,canDeleteAllAttachments:n.canDeleteAllAttachments,canDeleteAllComments:n.canDeleteAllComments,canDeleteAllWorklogs:n.canDeleteAllWorklogs,canDeleteIssues:n.canDeleteIssue,canDeleteOwnAttachments:n.canDeleteOwnAttachments,canDeleteOwnComments:n.canDeleteOwnComments,canDeleteOwnWorklogs:n.canDeleteOwnWorklogs,canEditAllComments:n.canEditAllComments,canEditAllWorklogs:n.canEditAllWorklogs,canEditIssues:n.canEditIssues,canEditOwnComments:n.canEditOwnComments,canEditOwnWorklogs:n.canEditOwnWorklogs,canLinkIssues:n.canLinkIssues,canLogWork:n.canLogWork,canManageWatchers:n.canManageWatchers,canModifyReporters:n.canModifyReporter,
canMoveIssues:n.canMoveIssue,canScheduleIssues:n.canScheduleIssues,canUseServiceManagementAgentFeatures:n.canUseServiceDeskAgentFeatures,canBrowseUsers:n.canBrowseUsers,canViewDevTools:n.canViewDevTools,canViewWatchers:n.canViewWatchers}})();return su(e,t).map((e=>{const{id:t,properties:{title:s,label:n,status:a}}=e;return{id:t,type:"forgeGlance",payload:{label:n,title:s,status:a,extension:e,glanceType:"FORGE_ENTITY_TYPE",moduleKey:t,appKey:t}}}))},au=()=>({primaryItems:[],secondaryItems:[],ecosystemItems:[],forgeItems:[],pinnedFields:[]}),iu=[{type:"PanelSectionItem",id:"devSummary"}],ru=(e=[])=>{var t,s,n,a,i,r;const o=Object(cs.g)(),c=Object(Tl.g)(o),{ecosystemEnabled:l}=Object(Tl.b)(c),d=Object(Tl.c)(c),[u]=Object(Wd.c)(o),[p]=Object(Bd.b)(),[m]=Object($c.d)(o),[f]=Object(Vl.d)(o),[{value:b}]=Object(wd.c)(o),[g]=Object(qd.c)(),[h]=Object(Gd.d)(c),y=Object(cs.a)(),O=nu(),j=void 0!==d&&d.isSimplified,v=Object(cs.c)();if(!b)return au();const E=(e=>Object.keys(e).reduce(((t,s)=>{
const n=e[s];return[...t,...Object.keys(n).map((e=>n[e]))]}),[]).map((e=>({id:`ecosystemGlance__${e.appKey}__${e.moduleKey}`,type:"ecosystemGlance",payload:Xd(Xd({},e),{},{glanceType:Jd.a})}))))(p),w=!0===l?O:[],k=g.isTimeTrackingEnabled&&void 0!==b.timetracking,C=(null==y?void 0:y.value)===$d.a.MOBILE_ISSUE,S=k&&h.canLogWork&&!C,I=(()=>Object(pa.b)("issue.details.fix-section-rendering-undefined-bug",!1))()?[...null!==(t=null===(s=m.primaryContextSection)||void 0===s?void 0:s.items)&&void 0!==t?t:[],...null!==(n=null===(a=m.secondaryContextSection)||void 0===a?void 0:a.items)&&void 0!==n?n:[],...j?iu:[]]:[...m.primaryContextSection.items,...m.secondaryContextSection.items,...j?iu:[]],T=Kd()(I,"id"),_=au(),P=new Set(u),x=new Set(e),D=new Set((null===(i=m.secondaryContextSection)||void 0===i||null===(r=i.items)||void 0===r?void 0:r.map((e=>e.id)))||[]);return T.forEach((e=>{P.has(e.id)||(e.id===v||x.has(e.id)||Object(Hd.c)(b[e.id])?_.primaryItems.push(e):((e,t,s,n,a)=>{
const i=tu(e,t),r=Object(Cd.c)(i);return!Object(ya.c)().includes(e)&&(!i||void 0===r||!(!Object(Cd.d)(s)||i.isEditable)&&"assignee"!==e&&"com.atlassian.servicedesk:vp-origin"!==r&&"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"!==r&&("timetracking"!==e||Object(Cd.f)(n,a)))})(e.id,b,f[e.id],S,k)||(D.has(e.id)?_.secondaryItems.push(e):_.primaryItems.push(e)))})),_.primaryItems=(e=>{let t=!1;const s=["FieldSectionItem","PanelSectionItem"],n=["assignee","SLA_PANEL"];return e.map((e=>{const a=void 0!==e.type?e.type:"";return t||n.includes(e.id)||!s.includes(a)?e:(t=!0,Xd(Xd({},e),{},{globalRef:"PIN_FIELD"}))}))})([..._.primaryItems]),_.ecosystemItems=E,_.forgeItems=w,_.pinnedFields=((e,t)=>t.reduce(((t,s)=>{const n=e.find((({id:e})=>e===s));return void 0!==n&&t.push(n),t}),[]))(T,u),_};const ou=(e=[])=>{
const t=ru(e),{pinnedFields:s,primaryItems:n,secondaryItems:a,forgeItems:i,ecosystemItems:o}=t,c=Object(cs.g)(),l=[...s,...n,...a],[d,u]=Object(r.useState)([]),[p,m]=Object(r.useState)([]),[f,b]=Object(r.useState)(s.length),[g,h]=Object(r.useState)(l.length),[y]=Object(Vl.d)(c),O=()=>{const e=a.filter((e=>Object(Cd.d)(y[e.id]))),t=a.filter((e=>!Object(Cd.d)(y[e.id])));u(e),m(t)};Object(r.useEffect)((()=>{O()}),[]);f!==s.length&&(b(s.length),O());g!==l.length&&(h(l.length),O());return[{pinnedFields:s,visibleItems:[...n,...p,...i,...o],hiddenItems:d},O]};var cu=n("./node_modules/@atlaskit/icon/glyph/editor/close.js"),lu=n.n(cu);const du=Object(I.defineMessages)({title:{id:"issue-view-layout-templates-pinned-fields-banner.common.with-grouping.title",defaultMessage:"Your pinned fields"},groupingTitle:{id:"issue-view-layout-templates-pinned-fields-banner.common.with-grouping.grouping-title",defaultMessage:"Pinned fields"},description:{
id:"issue-view-layout-templates-pinned-fields-banner.common.with-grouping.description",defaultMessage:"Click on the {pinnedIcon} next to a field label to start pinning."},dismissTooltip:{id:"issue-view-layout-templates-pinned-fields-banner.common.with-grouping.dismiss-tooltip",defaultMessage:"Hide message"}});var uu=n("./src/packages/issue/fields/components/field-heading/src/styled.js"),pu=n("./src/packages/issue/fields/components/field-pin/src/assets/pin-unfilled.js"),mu=n("./src/packages/issue/fields/components/field-pin/src/styled.js");const fu=ee.default.div.withConfig({componentId:"gvybh4-0"})``,bu=ee.default.div.withConfig({componentId:"gvybh4-1"})`display:flex;justify-content:space-between;margin-bottom:${te.e}px;padding:${te.e}px ${te.e}px ${te.e}px ${1.5*te.e}px;border:1px solid ${Ze.a.N40};border-radius:3px;&:hover ~ ${fu} ${mu.a}{visibility:visible;animation:${uu.h} 0.15s linear forwards;& ${mu.c}{color:${Ze.a.N800};}}`,gu=ee.default.div.withConfig({componentId:"gvybh4-2"
})`${Ze.d.h200} margin-top:${.5*te.e}px;margin-bottom:${2*te.e}px;color:${Ze.a.N800};font-size:14px;`,hu=ee.default.div.withConfig({componentId:"gvybh4-3"})`margin-bottom:${.5*te.e}px;color:${Ze.a.N800};`,yu=ee.default.div.withConfig({componentId:"gvybh4-4"})`flex-shrink:0;`,Ou=Object(ee.default)(pu.a).withConfig({componentId:"gvybh4-5"})`vertical-align:text-bottom;`;ee.default.div.withConfig({componentId:"pyqvvh-0"})`display:flex;justify-content:space-between;background-color:${Ze.a.N20};margin:-8px -12px 12px;padding:8px 12px 16px;border-radius:3px;&:hover ~ div ${mu.a}{visibility:visible;animation:${uu.h} 0.15s linear forwards;& ${mu.c}{color:${Ze.a.N800};}}`,ee.default.div.withConfig({componentId:"pyqvvh-1"})`${Ze.d.h300};margin-top:6px;margin-bottom:16px;color:${Ze.a.N200};font-size:11px;`,ee.default.div.withConfig({componentId:"pyqvvh-2"})`flex-shrink:0;height:${3*te.e}px;cursor:pointer;`,ee.default.div.withConfig({componentId:"pyqvvh-3"})`flex-shrink:0;color:${Ze.a.N500};`,
Object(ee.default)(pu.a).withConfig({componentId:"pyqvvh-4"})`vertical-align:text-bottom;`;var ju=n("./src/packages/issue/user-preferences-services/src/main.js"),vu=n("./node_modules/date-fns/esm/differenceInDays/index.js");const Eu=(e,t)=>{if(!(e=>null!=e&&!Number.isNaN(Number(e)))(e))return!1;const s=parseInt(null!==e&&e.toString(),10);return Object(vu.a)(new Date,s)>t};function wu(){return(wu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const ku=({children:e})=>{const[t,s]=(()=>{const[e,{setValue:t}]=Object(ju.b)("jira.user.issue.pinned-fields-banner.lastinteracted"),{createAnalyticsEvent:s}=Object(sr.a)(),n=Object(r.useCallback)((()=>{const e=s({eventName:"pinnedFieldsBanner closed",action:"clicked",actionSubject:"button",actionSubjectId:"pinnedFieldsBanner"});Object(Ki.h)(e,"pinnedFieldsBannerDismissSectionMessage"),
t("jira.user.issue.pinned-fields-banner.user_hidden_action")}),[s,t]),a=Object(r.useCallback)((()=>{const e=s({eventName:"pinnedFieldsBanner viewed",action:"viewed",actionSubject:"banner",actionSubjectId:"pinnedFieldsBannerViewed"});Object(Ki.h)(e,"pinnedFieldsBannerDismissSectionMessage")}),[s]),i=!(Eu(e,7)||"jira.user.issue.pinned-fields-banner.user_hidden_action"===e);return Object(r.useEffect)((()=>{null===e&&t(Date.now().toString()),i&&a()}),[]),[i,n]})();return t?e({onClick:s}):null},Cu=()=>{const{formatMessage:e}=Object(qe.c)(),t=e(du.dismissTooltip),s=du.groupingTitle;return o.a.createElement(ku,null,(({onClick:n})=>o.a.createElement(bu,null,o.a.createElement("div",null,o.a.createElement(gu,null,e(s)),o.a.createElement(hu,null,o.a.createElement(I.FormattedMessage,wu({},du.description,{values:{pinnedIcon:o.a.createElement(Ou,null)}})))),o.a.createElement(yu,null,o.a.createElement(Re.a,{content:t},o.a.createElement(J.a,{spacing:"none",appearance:"subtle",onClick:n,
iconBefore:o.a.createElement(lu.a,{label:t})}))))))};Cu.displayName="PinnedFieldsBanner";var Su=n("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),Iu=n.n(Su),Tu=n("./node_modules/@atlaskit/icon/glyph/chevron-up.js"),_u=n.n(Tu),Pu=n("./node_modules/@atlaskit/icon/glyph/settings.js"),xu=n.n(Pu);ee.default.div.withConfig({componentId:"j9h7gw-0"})``,ee.default.div.withConfig({componentId:"j9h7gw-1"})``;const Du=te.a+1,Au=ee.default.div.withConfig({componentId:"j9h7gw-2"})`box-sizing:border-box;margin-bottom:${te.e}px;`,Mu=(ee.default.div.withConfig({componentId:"j9h7gw-3"})`border-radius:${Du}px;position:absolute;width:100%;height:100%;top:0;left:0;`,Object(ee.default)(J.a).withConfig({componentId:"j9h7gw-4"})`display:none !important;margin-right:${te.e}px;padding:0 !important;svg{margin-bottom:-2px;}`),Lu=ee.default.div.withConfig({componentId:"j9h7gw-5"})`min-width:24px;margin-bottom:-3px;`,Ru=ee.default.strong.withConfig({componentId:"j9h7gw-6"
})`color:${Ze.a.N800};font-size:14px;padding-right:${te.e/2}px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:60%;font-weight:600;flex-shrink:0;`,Nu=ee.default.span.withConfig({componentId:"j9h7gw-7"})`color:${Ze.a.N90};font-size:12px;padding-right:${te.e}px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;@-moz-document url-prefix(){&&{margin-bottom:-1px;}}`,Fu=ee.default.div.withConfig({componentId:"j9h7gw-8"})`padding:${te.e}px ${1.5*te.e}px ${te.e}px ${12}px;box-sizing:border-box;${uu.c}{color:${Ze.a.N500};}${uu.d}{margin-bottom:${1.5*te.e}px;}> div > ${uu.d}:last-child{margin-bottom:0;}${({isOpen:e})=>e?ee.css`border:1px solid ${Ze.a.N40};border-top:0;border-bottom-right-radius:${Du}px;border-bottom-left-radius:${Du}px;`:ee.css`display:none;`}`,Uu={Title:Ru,SubTitle:Nu,Header:Object(ee.default)(Fu).withConfig({componentId:"j9h7gw-9"
})`position:relative;display:flex;padding-top:11px;padding-bottom:11px;height:48px;border-radius:${Du}px;border:1px solid ${Ze.a.N40};align-items:center;&:hover{background:${Ze.a.N20};cursor:pointer;${Mu}{display:block !important;}}&:focus{outline:0;}&:active{background-color:${Ze.a.B50};border-color:${Ze.a.B300};${Nu},${Ru},svg{color:${Ze.a.B300} !important;}}${({isOpen:e})=>e?ee.css`border-bottom-right-radius:0;border-bottom-left-radius:0;`:""}`,HeaderRightAligned:ee.default.div.withConfig({componentId:"j9h7gw-10"})`margin-left:auto;display:flex;`,Body:Fu,Group:Au},Vu=({Group:e=Au,Header:t,children:s})=>o.a.createElement(e,null,o.a.createElement(t,null),s);Vu.displayName="BaseGroup";var Ku=Vu;function $u(){return($u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Wu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wu(Object(s),!0).forEach((function(t){Hu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Hu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Gu=e=>{const{title:t,subTitle:s,children:n,isOpen:a,onHeaderClick:i,id:r,renderHeaderActions:c,components:l}=e,d=Bu(Bu({},Uu),l),{Group:u,Title:p,SubTitle:m,Header:f,Body:b,HeaderRightAligned:g}=d,h=null==r?void 0:{"data-test-id":`issue-view-layout-group.common.ui.collapsible-group-factory.${r}`};return o.a.createElement(Ku,{Header:()=>o.a.createElement(f,$u({
isOpen:a,onClick:i,tabIndex:0},h),o.a.createElement(p,null,t),void 0!==s&&!a&&o.a.createElement(m,null,s),"function"==typeof c&&o.a.createElement(g,null,c())),Group:u},void 0!==n&&o.a.createElement(b,{isOpen:a},n))};Gu.displayName="CollapsibleGroupFactory";var qu=Gu;var zu=Object(I.defineMessages)({arrowRight:{id:"issue-view-layout-group.arrow-right",defaultMessage:"Right Arrow"},arrowDown:{id:"issue-view-layout-group.arrow-down",defaultMessage:"Down Arrow"},configure:{id:"issue-view-layout-group.configure",defaultMessage:"Configure"}});const Yu=({children:e,title:t,subTitle:s,onChange:n,components:a,projectKey:i,id:c,onConfigButtonClick:l,initialOpened:d})=>{const{formatMessage:u}=Object(qe.c)(),[p,m]=((e,t,s)=>{const n=((e,t)=>`group.state.${e}.${t}`)(e,t),[a,i]=Object(r.useState)((()=>{try{const e=window.localStorage.getItem(n);if("true"===e)return!0;if("false"===e)return!1;throw Error("Invalid group state value")}catch(e){return s}}));return[a,e=>{try{i(e),
window.localStorage.setItem(n,e)}catch(t){}}]})(i,c,!!d),{createAnalyticsEvent:f}=Object(sr.a)(),b=e=>{e.preventDefault(),e.stopPropagation(),l&&l(e)};return o.a.createElement(qu,{id:c,title:t,subTitle:s,isOpen:p,onHeaderClick:()=>{m(!p);const e=p?"closed":"opened",s=f({eventName:`bentoCollapsibleGroup ${e}`,action:"clicked",actionSubject:"button",actionSubjectId:"bentoCollapsibleGroup"});Object(Ki.h)(s,"bentoCollapsibleGroup",{groupTitle:t,groupState:e}),"function"==typeof n&&n(!p)},components:a,renderHeaderActions:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(Re.a,{content:u(zu.configure)},"function"==typeof l&&o.a.createElement(Mu,{spacing:"compact",appearance:"subtle",onClick:b},o.a.createElement(xu.a,{label:u(zu.configure),size:"small",primaryColor:Ze.a.N90}))),o.a.createElement(Lu,null,p?o.a.createElement(_u.a,{label:u(zu.arrowDown),primaryColor:Ze.a.N500}):o.a.createElement(Iu.a,{label:u(zu.arrowRight),primaryColor:Ze.a.N500})))},e)};Yu.displayName="CollapsibleGroup"
;var Qu=Yu;const Ju=e=>e.children.length?Array.prototype.every.call(e.children,Ju):""===e.innerHTML,Zu=ee.default.div.withConfig({componentId:"sc-1s1hvgf-0"})`margin-bottom:${te.e}px;`,Xu=({alwaysVisible:e=!1,onChange:t,children:s,subTitle:n,groupId:a,title:i,initialOpened:c})=>{const l=Object(cs.g)(),d=Object(Tl.g)(l),[u,p]=Object(r.useState)(!1),m=Object(r.useRef)(null);Object(r.useEffect)((()=>{null!=m&&m.current&&(Ju(m.current)?u&&p(!1):!u&&p(!0))}),[m,s,u]);const f=document.getElementById("sla-panel"),b=((e,t,s)=>n=>{n.forEach((n=>{"childList"===n.type&&null!==e&&(Ju(e)?t&&s(!1):!t&&s(!0))}))})(f,u,p);Object(r.useEffect)((()=>{const e={attributes:!0,childList:!0,subtree:!0},t=new MutationObserver(b);return null!==f&&t.observe(f,e),()=>{t.disconnect()}}),[f]);const g=!0!==e&&!u;return o.a.createElement(Zu,{hidden:g},o.a.createElement(Qu,{id:a,projectKey:d,title:i,onChange:t,subTitle:n,initialOpened:c},o.a.createElement("div",{ref:m,
"data-test-id":`issue-view-layout-templates-views.ui.context.visible-hidden.ui.context-group.${a}`},s)))};Xu.displayName="ContextGroup";var ep=Xu,tp=Object(I.defineMessages)({moreFieldsText:{id:"issue-view-layout-templates-views.context.visible-hidden.more-fields-text",defaultMessage:"More fields"},pinnedFieldsText:{id:"issue-view-layout-templates-views.context.visible-hidden.pinned-fields-text",defaultMessage:"Pinned fields"},detailsText:{id:"issue-view-layout-templates-views.context.visible-hidden.details-text",defaultMessage:"Details"}});var sp=({items:e,onToggleExpanded:t})=>{const{formatMessage:s}=Object(qe.c)(),n=Object(cs.g)(),[{value:a}]=Object(wd.c)(n),{createAnalyticsEvent:i}=Object(sr.a)();Object(r.useEffect)((()=>{Object(Ki.f)(i({action:"success"}),"onboarding initialized","bentoCollapsibleGroup")}),[]);const c=(e,t)=>a&&a[t.id]?0===e.length?`${a[t.id].title}`:`${e}, ${a[t.id].title}`:e,l=e.hiddenItems.reduce(c,""),d=e.visibleItems.reduce(c,""),u=e.pinnedFields.reduce(c,"")
;return o.a.createElement("div",{"data-test-id":"issue-view-layout-templates-views.ui.context.visible-hidden.ui.context-items"},0===e.pinnedFields.length&&o.a.createElement(Cu,null),o.a.createElement(fu,null,o.a.createElement("div",{"data-test-id":"issue-view-layout-templates-views.ui.context.visible-hidden.ui.primary-items"},e.pinnedFields.length>=1&&o.a.createElement(ep,{title:s(tp.pinnedFieldsText),groupId:"pinned-context-items",subTitle:u,alwaysVisible:!0,initialOpened:!0},o.a.createElement(Od.a,{items:e.pinnedFields,area:"context"})),o.a.createElement(ep,{title:s(tp.detailsText),groupId:"details-group",subTitle:d,initialOpened:!0},o.a.createElement(Od.a,{items:e.visibleItems,area:"context"}))),e.hiddenItems.length>=1&&o.a.createElement(mo.a,{name:"SHOW_MORE"},o.a.createElement(ep,{title:s(tp.moreFieldsText),groupId:"secondary-context-items",onChange:t,subTitle:l,initialOpened:!1},o.a.createElement(Od.a,{items:e.hiddenItems,area:"context"})))))};const np=["devSummary"];var ap=()=>{
const[e,t]=ou(np);return o.a.createElement(sp,{items:e,onToggleExpanded:t})};const ip=ee.default.div.withConfig({componentId:"sc-1s4nl9d-0"})`display:flex;flex:1 1 auto;min-width:0;width:100%;`,rp=ee.default.div.withConfig({componentId:"sc-1s4nl9d-1"})`display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}`;var op=()=>o.a.createElement(ip,null,o.a.createElement(ul,null),o.a.createElement(rp,{key:"SUMMARY"},o.a.createElement(Cl,null)));var cp=n("./src/packages/issue/issue-view/src/views/issue-base/context/approval/index.js"),lp=n("./src/packages/routes/src/common/ui/resources/project-context/index.js");const dp=()=>Object(pa.b)("issue.details.fix-section-rendering-undefined-bug",!1),up=()=>Object(pa.b)("issue.details.2af.error-cleanup.group-1",!1),pp=()=>{const{data:e}=Object(fs.p)(lp.a);return(()=>Object(pa.b)("jsm-project-archive-and-restore",!1))()?!(null!=e&&e.isProjectArchived)&&o.a.createElement(cp.b,null):o.a.createElement(cp.b,null)};pp.displayName="ApprovalPanelWrapper"
;var mp=pp;const fp=ee.default.div.withConfig({componentId:"caaq53-0"})`margin-bottom:0;`,bp=()=>o.a.createElement(cd.a,{id:"status-and-approval-spotlight"},o.a.createElement(fp,{"data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},o.a.createElement(gd,{key:"WRAPPED_STATUS"}),o.a.createElement(mp,null)));bp.displayName="FoundationContext";var gp=bp,hp=n("./src/packages/servicedesk/request-details-panel/src/index.js");function yp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Op(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(s),!0).forEach((function(t){jp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yp(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vp=["com.atlassian.jira.plugin.system.customfieldtypes:select","description","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"];var Ep=()=>{var e,t,s,n;const a=Object(cs.g)(),[i]=Object($c.d)(a),[{value:r}]=Object(wd.c)(a),c=((e,t)=>e.map((e=>{const{type:s,id:n}=Object(Cd.a)(t[e.id],e);return vp.includes(s)?Op(Op({},e),{},{globalRef:`global-spotlight-target-${n}`}):e})))(dp()?null!==(e=null===(t=i.requestPortalSection)||void 0===t?void 0:t.items)&&void 0!==e?e:[]:i.requestPortalSection.items,r),l={id:"JSM_REQUEST_PANEL",type:"CustomItem",item:o.a.createElement(hp.a,{requestPanelItems:c})},d=dp()?[l,...null!==(s=null===(n=i.contentSection)||void 0===n?void 0:n.items)&&void 0!==s?s:[]]:[l,...i.contentSection.items];return o.a.createElement(Fd,{items:d})
},wp=Object(I.defineMessages)({slaText:{id:"issue-view-layout-templates-servicedesk.context.sla-text",defaultMessage:"SLAs"}});function kp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kp(Object(s),!0).forEach((function(t){Sp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Sp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const Ip=["com.atlassian.jira.plugin.system.customfieldtypes:select","description","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"],Tp=(e,t,s,n,a)=>{if((()=>Object(pa.b)("issue.details.2af.error-cleanup.group-2",!1))()){if(!t)return[];if(!(t.visibleItems&&n&&a&&s))return t}if(!e)return t;const i=t.visibleItems.find((e=>{var t;const s=n[e.id];return"com.atlassian.servicedesk:sd-request-feedback"===(null==s||null===(t=s.schema)||void 0===t?void 0:t.custom)}));if(void 0===i)return t;const r=t.visibleItems.filter((e=>{var t;const s=n[e.id];return"com.atlassian.servicedesk:sd-request-feedback"!==(null==s||null===(t=s.schema)||void 0===t?void 0:t.custom)})),o=void 0!==a[i.id]&&null!==a[i.id];return s.statusCategory.id===Object(Ul.categoryIdForStatusCategory)("DONE")&&o?Cp(Cp({},t),{},{visibleItems:[i,...r]}):Cp(Cp({},t),{},{visibleItems:r})},_p=(e,t)=>!up()||e&&t?e.map((e=>{const{type:s,id:n}=Object(Cd.a)(t[e.id],e);return Ip.includes(s)?Cp(Cp({},e),{},{
globalRef:`global-spotlight-target-${n}`}):e})):[],Pp=["SLA_PANEL","ASSET_ONBOARDING"];var xp=()=>{const[e,t]=ou(Pp),{formatMessage:s}=Object(qe.c)(),n=Object(cs.g)(),a=Object(Tl.g)(n),[i]=Object(Vl.b)({issueKey:n,fieldKey:"status"}),[{value:r}]=Object(wd.c)(n),[c]=Object(Vl.d)(n),l=Object(Tl.c)(a),d=void 0!==l&&l.isSimplified,u=((e,t)=>up()?{hiddenItems:_p(null==e?void 0:e.hiddenItems,t),pinnedFields:_p(null==e?void 0:e.pinnedFields,t),visibleItems:_p(null==e?void 0:e.visibleItems,t)}:{hiddenItems:_p(e.hiddenItems,t),pinnedFields:_p(e.pinnedFields,t),visibleItems:_p(e.visibleItems,t)})(Tp(d,e,i,r,c),r),p=u.visibleItems.findIndex((e=>"SLA_PANEL"===e.id)),m=-1!==p&&u.visibleItems.splice(p,1),f=!!m&&o.a.createElement(ep,{title:s(wp.slaText),groupId:"sla-group",initialOpened:!0},o.a.createElement(Od.a,{items:m,area:"context"}));return o.a.createElement(o.a.Fragment,null,f,o.a.createElement(sp,{items:u,onToggleExpanded:t}))};const Dp=()=>{const e=Object(cs.g)(),t=Object(Tl.g)(e)
;return Object(Tl.i)(t)===Il.g?"JSD_TEMPLATE":"DEFAULT_TEMPLATE"},Ap=()=>{const e=Dp();if((()=>Object(pa.b)("jsm-project-archive-and-restore",!1))())return o.a.createElement(Fl,null);switch(e){case"JSD_TEMPLATE":return o.a.createElement(op,null);default:return o.a.createElement(Fl,null)}},Mp=()=>{switch(Dp()){case"JSD_TEMPLATE":return o.a.createElement(gp,null);default:return o.a.createElement(yd,null)}},Lp=()=>{switch(Dp()){case"JSD_TEMPLATE":return o.a.createElement(Ep,null);default:return o.a.createElement(Ud,null)}},Rp=()=>{switch(Dp()){case"JSD_TEMPLATE":return o.a.createElement(xp,null);default:return o.a.createElement(ap,null)}};var Np=n("./node_modules/uuid/index.js"),Fp=n.n(Np),Up=n("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js"),Vp=n("./src/packages/platform/controllers/tenant-context/src/components/cloud-id/index.js");const Kp=()=>Object(Hi.b)("related-issues-smart-suggestions",!1)
;var $p=n("./node_modules/lodash/isEmpty.js"),Wp=n.n($p),Bp=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),Hp=n("./node_modules/react-sweet-state/lib/esm/components/hook.js"),Gp=n("./node_modules/lodash/memoize.js"),qp=n.n(Gp),zp=n("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),Yp=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),Qp=n("./node_modules/lodash/concat.js"),Jp=n.n(Qp),Zp=n("./node_modules/lodash/uniq.js"),Xp=n.n(Zp);const em=/(https?:\/\/.+?\/servicedesk\/customer\/kb\/view\/[\d]+)/g,tm=e=>{var t;let s=[];return null===(t=e.fields.comment)||void 0===t||t.comments.forEach((e=>{const t=e.body.match(em);null!==t&&(s=Jp()(s,t))})),Xp()(s)},sm=e=>e.issues.map((e=>({id:e.id}))),nm=qp()(((e,t,s,n)=>{const a=zp.d.now(),i=`${t}/gateway/api/similarity/issue/project`;return Object(Yp.a)(i,{body:JSON.stringify({context:{subProduct:"serviceDesk",product:"jira",sessionId:e.sessionId,containerId:e.projectId,objectId:e.issueId,
principalId:"context",tenantId:e.cloudId},filter:s,limit:15,estimatedTotalIssues:1e3}),headers:{"Content-Type":"application/json"},method:"POST"}).then((e=>(Object(Ki.b)(n({}),"fetchRelatedIssues succeeded",{elapsedTimeMilli:Math.floor(zp.d.now()-a),results:sm(e),resultsSize:e.issues.length}),e))).catch((e=>{throw Object(Ki.b)(n({}),"fetchRelatedIssues failed",{elapsedTimeMilli:Math.floor(zp.d.now()-a),traceId:e.traceId,statusCode:e.statusCode}),e}))}),((e,t,s)=>`${e.issueId} - ${s.jql}`)),am=["summary","issuetype"],im=nm,rm={data:void 0,isLoading:!1,error:void 0,baseUrl:Object(Vr.c)(""),issueId:Object(Vr.k)(""),projectId:Object(Vr.r)(""),projectKey:Object(Vr.s)(""),cloudId:Object(Vr.d)(""),status:"OPEN",requestTypeFieldId:""},om=async(e,t,s,n)=>{const{projectId:a,issueId:i,cloudId:r,projectKey:o,baseUrl:c,requestTypeFieldId:l}=s,d={projectId:a,issueId:i,sessionId:t,cloudId:r},u=Kp()?[...am,...Wp()(l)?[]:[l],"comment","assignee"]:am,p={
jql:(e=>"OPEN"===e?"statusCategory != Done":"statusCategory = Done")(e),fields:u,projectKey:o,columnTypesAsJson:u},m=await im(d,c,p,n);return Kp()?((e,t)=>e.issues.map(((e,s)=>{var n;return{id:e.id,issueKey:e.key,issueLink:e.self,issueTypeIconUrl:e.fields.issuetype.iconUrl,issueTypeName:e.fields.issuetype.name,issueSummary:e.fields.summary,assignee:e.fields.assignee,requestType:Wp()(t)||null===(n=e.fields[t])||void 0===n?void 0:n.requestType,articles:tm(e),position:s}})))(m,l):(e=>e.issues.map(((e,t)=>({id:e.id,issueKey:e.key,issueLink:e.self,issueTypeIconUrl:e.fields.issuetype.iconUrl,issueTypeName:e.fields.issuetype.name,issueSummary:e.fields.summary,position:t}))))(m)},cm={fetchRelatedIssuesForIssue:(e,t)=>async({getState:s,setState:n})=>{const a=s();n({isLoading:!0,error:void 0});try{const{status:i}=a;let r,o;if(Kp())[r,o]=await Promise.all([om("OPEN",e,a,t),om("RESOLVED",e,a,t)]),n({data:{OPEN:r,RESOLVED:o},isLoading:!1,error:void 0});else if("OPEN"===i){r=await om("OPEN",e,a,t)
;const i=s();n({data:{OPEN:r,RESOLVED:void 0===i.data?[]:i.data.RESOLVED},isLoading:!1,error:void 0})}else if("RESOLVED"===i){o=await om("RESOLVED",e,a,t);const i=s();n({data:{OPEN:void 0===i.data?[]:i.data.OPEN,RESOLVED:o},isLoading:!1,error:void 0})}}catch(r){var i;null===(i=im.cache)||void 0===i||i.clear(),n({isLoading:!1,error:r})}},setContext:()=>({setState:e},t)=>{e(t)},setIssueStatus:e=>({getState:t,setState:s})=>{const{status:n}=t();e!==n&&s({status:e})},setRequestTypeFieldId:e=>({getState:t,setState:s})=>{const{requestTypeFieldId:n}=t();e!==n&&s({requestTypeFieldId:e})}},lm=Object(Bp.a)({name:"FetchRelatedIssuesForIssue",initialState:rm,actions:cm}),dm=Object($r.a)(lm,{onInit:cm.setContext}),um=Object(Hp.a)(lm);var pm=n("./src/packages/issue/issue-view/src/common/service/issue/customer-request-type-server.js");function mm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bm=({issueKey:e})=>{const t=Object(cs.f)(),[s]=Object(wd.c)(e),n=s.value,[a,i]=Object(r.useState)("");Object(r.useEffect)((()=>{if(null!=n){const e=Object.keys(n).find((e=>"com.atlassian.servicedesk:vp-origin"===n[e].schema.custom));null!=e&&i(e)}}),[n]);const[o,{setFieldValue:c}]=Object(Vl.b)({issueKey:e,fieldKey:a});return[{value:o,fieldConfig:s,requestTypeFieldId:a},{saveValue:s=>{const n=s?+s.id:null,i=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mm(Object(s),!0).forEach((function(t){fm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},o);i.requestType=s,
c(e,a,i),Object(pm.a)("",t,n)}}]},gm=["buttonStyles"];function hm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ym(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?hm(Object(s),!0).forEach((function(t){Om(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):hm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Om(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function jm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){
var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const vm=e=>(t,s)=>{const n=t(s),{buttonStyles:a}=n;return ym(ym({},jm(n,gm)),{},{buttonStyles:ym(ym({},a),{},{padding:`0 ${te.e/2}px 0 ${te.e/2}px`,margin:`0 ${te.e/2}px 0 ${te.e/2}px`,backgroundColor:e?Ze.a.N400:Ze.a.N20,"&:hover":{backgroundColor:e?Ze.a.N400:Ze.a.N30},"&:active":{backgroundColor:e?Ze.a.N400:Ze.a.B50}})})},Em=({children:e,onClick:t,isSelected:s})=>o.a.createElement(Rr.a,{appearance:"subtle",spacing:"compact",isSelected:s,theme:vm(s),onClick:t},e);Em.displayName="ButtonComponent";const wm=({items:e,selectedItem:t,onSelectIssueStatusItem:s})=>o.a.createElement(o.a.Fragment,null,e.map((e=>o.a.createElement(Em,{key:e.key,isSelected:t.key===e.key,onClick:(t,n)=>s(e,n,"IssueStatusButton")},e.name))))
;var km=n("./node_modules/@atlaskit/button--next/dist/es2019/button-group.js"),Cm=n("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenu.js"),Sm=n("./node_modules/@atlaskit/icon/glyph/more.js"),Im=n.n(Sm),Tm=n("./node_modules/@atlaskit/icon/glyph/premium.js"),_m=n.n(Tm),Pm=n("./src/packages/platform/ui/feedback/feedback-dialog-base/src/model/types.js"),xm=n("./src/packages/platform/controllers/unified-feedback/src/actions/types.js"),Dm=n("./src/packages/platform/controllers/unified-feedback/src/components/unified-feedback-api.js"),Am=Object(I.defineMessages)({show:{id:"smart-related-issues-panel.header.expander.show",defaultMessage:"Show"},hide:{id:"smart-related-issues-panel.header.expander.hide",defaultMessage:"Hide"}});var Mm=({isContentExpanded:e,onExpand:t,onCollapse:s})=>{const{formatMessage:n}=Object(qe.c)(),a=(e,s)=>{t(),Object(Ki.h)(s,"showRelatedIssues")},i=(e,t)=>{s(),Object(Ki.h)(t,"hideRelatedIssues")};return e?(()=>o.a.createElement(J.a,{
"aria-label":n(Am.hide),appearance:"subtle-link",spacing:"default",iconBefore:o.a.createElement(_u.a,{label:"",size:"large"}),onClick:i}))():(()=>o.a.createElement(J.a,{"aria-label":n(Am.show),appearance:"subtle-link",spacing:"default",iconBefore:o.a.createElement(Iu.a,{label:"",size:"large"}),onClick:a}))()},Lm=Object(I.defineMessages)({feedback:{id:"smart-related-issues-panel.header.feedback",defaultMessage:"Give feedback"},hideSimilarRequests:{id:"smart-related-issues-panel.header.hide-similar-requests",defaultMessage:"Hide similar requests"},title:{id:"smart-related-issues-panel.header.title",defaultMessage:"Similar requests"}}),Rm=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");const Nm=ee.default.div.withConfig({componentId:"u06h2f-0"})`display:flex;flex-direction:row;justify-content:space-between;`,Fm=ee.default.div.withConfig({componentId:"u06h2f-1"})`margin-right:${1*te.e}px;`,Um=ee.default.div.withConfig({componentId:"u06h2f-2"
})`display:flex;flex-direction:row;align-items:center;`,Vm=Object(ee.default)(Si.c).withConfig({componentId:"u06h2f-3"})`${Rm.a};${Ze.d.h400()};margin:0;min-width:0;`,Km=({onExpand:e,onCollapse:t,isExpanded:s})=>{const{formatMessage:n}=Object(qe.c)(),a=Object(cs.i)(),i=Object(Gd.a)(a),[c,l]=Object(r.useState)(!1),d=({isOpen:e})=>{l(e)},u=`/jira/servicedesk/projects/${a}/settings/itsm-features`,p={feedbackGroupId:"jira-servicedesk-related-issues",feedbackType:xm.a,additionalFeedbackEntries:[{key:Pm.a.FEEDBACK_COLLECTOR_LOCATION,value:"jsm.issue-view"},{key:Pm.a.FEEDBACK_COLLECTOR_ID,value:"bento-similar-requests-panel"}]};return o.a.createElement(Nm,null,o.a.createElement(Um,null,o.a.createElement(Fm,null,o.a.createElement(_m.a,{size:"medium",label:""})),o.a.createElement(Vm,null,n(Lm.title))),o.a.createElement(km.a,null,(()=>o.a.createElement(Dm.a,null,((e,{openFeedbackDialog:t})=>o.a.createElement(o.a.Fragment,null,i?(e=>o.a.createElement(Cm.a,{onOpenChange:d,shouldFlip:!0,
triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"default",isSelected:c,iconBefore:o.a.createElement(Im.a,{label:"",size:"medium"})},boundariesElement:"scrollParent",position:"bottom center"},o.a.createElement(fr.a,null,o.a.createElement(wr.a,{onClick:()=>e(p)},n(Lm.feedback)),o.a.createElement(wr.a,{href:u},n(Lm.hideSimilarRequests)))))(t):(e=>s?o.a.createElement(J.a,{appearance:"link",onClick:()=>e(p)},n(Lm.feedback)):null)(t)))))(),o.a.createElement(Mm,{isContentExpanded:s,onExpand:e,onCollapse:t})))};Km.displayName="PanelHeader";var $m=Km,Wm=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/item-line-card/item-line-card-group-view.js"),Bm=n("./src/packages/issue/issue-view/src/common/util/events/index.js"),Hm=n("./node_modules/@atlaskit/icon/glyph/error.js"),Gm=n.n(Hm),qm=Object(I.defineMessages)({errorMessage:{id:"smart-related-issues-panel.issue-line-card-group.error-feedback.error-message",
defaultMessage:"We couldn't load any similar requests."},tryAgainLink:{id:"smart-related-issues-panel.issue-line-card-group.error-feedback.try-again-link",defaultMessage:"Try again?"}});const zm=ee.default.div.withConfig({componentId:"sc-197a2s2-0"})`margin-right:${te.e}px;`,Ym=ee.default.div.withConfig({componentId:"sc-197a2s2-1"})`display:flex;align-items:center;`,Qm=({onTryAgain:e,useIntl:t=qe.c})=>{const{formatMessage:s}=t();return o.a.createElement(Ym,null,(()=>o.a.createElement(zm,null,o.a.createElement(Gm.a,{label:"error",primaryColor:"#FF5630"})))(),s(qm.errorMessage),(()=>o.a.createElement(Ga.a,{appearance:"link",onClick:e},s(qm.tryAgainLink)))())};Qm.displayName="ErrorFeedback";var Jm=Qm;const Zm=Object(I.defineMessages)({issueTypeName:{id:"smart-related-issues-panel.issue-line-card-group.issue-line-card.issue-type-name",defaultMessage:"{issueTypeName}"}}),Xm=Object(ee.default)(J.a).withConfig({componentId:"vkd300-0"
})`&&{margin-top:4px;}`,ef=({issueTypeIconUrl:e,issueTypeName:t,issueKey:s,issueSummary:n})=>{const{formatMessage:a}=Object(qe.c)(),i=a(Zm.issueTypeName,{issueTypeName:t});return o.a.createElement(Xm,{appearance:"link",href:s,iconBefore:o.a.createElement(os.a,{alt:i,url:e})},s," ",n)};ef.displayName="IssueLineCard";var tf=ef,sf=n("./node_modules/@atlaskit/icon/glyph/info.js"),nf=n.n(sf),af=Object(I.defineMessages)({errorMessage:{id:"smart-related-issues-panel.issue-line-card-group.no-issues-feedback.error-message",defaultMessage:"We couldn't find any similar requests."},searchLink:{id:"smart-related-issues-panel.issue-line-card-group.no-issues-feedback.search-link",defaultMessage:"Search instead?"}});const rf=ee.default.div.withConfig({componentId:"mfqcq6-0"})`margin-right:${te.e}px;`,of=ee.default.div.withConfig({componentId:"mfqcq6-1"})`display:flex;align-items:center;`,cf=({useIntl:e=qe.c})=>{const{formatMessage:t}=e(),s=`/jira/servicedesk/projects/${Object(cs.i)()}/issues`
;return o.a.createElement(of,null,(()=>o.a.createElement(rf,null,o.a.createElement(nf.a,{label:"info",primaryColor:"#0747A6"})))(),t(af.errorMessage),(()=>o.a.createElement(Ga.a,{appearance:"link",target:"_blank",href:s},t(af.searchLink)))())};cf.displayName="NoIssuesFeedback";var lf=cf,df=Object(I.defineMessages)({show:{id:"smart-related-issues-panel.issue-line-card-group.show-more.show",defaultMessage:"Show more"}});const uf=ee.default.div.withConfig({componentId:"sc-4l43h1-0"})`margin:${te.e}px 0px;`;var pf=({issuesLength:e,isShowMoreExpanded:t,onExpand:s})=>{const{formatMessage:n}=Object(qe.c)(),a=(t,n)=>{s(),Object(Ki.h)(n,"showMoreRelatedIssues",{issuesLength:e})};return t?null:(()=>o.a.createElement(uf,null,o.a.createElement(Ga.a,{appearance:"link",onClick:a},n(df.show))))()},mf=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/skeleton/index.js");const ff=ee.default.div.withConfig({componentId:"sc-12p1g4z-0"
})`padding-left:${2*te.e}px;padding-right:${2*te.e}px;`,bf=ee.default.div.withConfig({componentId:"sc-12p1g4z-1"})`display:flex;flex-direction:row;justify-content:space-between;margin-bottom:${te.e}px;`,gf=()=>o.a.createElement(ff,null,o.a.createElement(bf,null,o.a.createElement(mf.l,{height:"16px",width:"6%"}),o.a.createElement(mf.l,{height:"16px",width:"90%"})),o.a.createElement(bf,null,o.a.createElement(mf.l,{height:"16px",width:"6%"}),o.a.createElement(mf.l,{height:"16px",width:"90%"})),o.a.createElement(bf,null,o.a.createElement(mf.l,{height:"16px",width:"6%"}),o.a.createElement(mf.l,{height:"16px",width:"90%"})),o.a.createElement(bf,null,o.a.createElement(mf.l,{height:"16px",width:"6%"}),o.a.createElement(mf.l,{height:"16px",width:"90%"})),o.a.createElement(bf,null,o.a.createElement(mf.l,{height:"16px",width:"6%"}),o.a.createElement(mf.l,{height:"16px",width:"90%"})));gf.displayName="LoadingSkeleton";var hf=gf;const yf=ee.default.div.withConfig({componentId:"nynbds-0"
})`display:flex;`,Of=Object(ee.default)(yf).withConfig({componentId:"nynbds-1"})`display:block;width:100%;max-height:${30*te.e}px;${({isExpanded:e})=>e&&"\n        overflow-y: scroll;\n    "} ul{box-shadow:none;}ul div{border-bottom:0px;}`,jf=({sessionId:e})=>{const[t,s]=Object(r.useState)(!1),{createAnalyticsEvent:n}=Object(sr.a)(),[{data:a,isLoading:i,error:c,status:l},{fetchRelatedIssuesForIssue:d}]=um();if(c)return o.a.createElement(Jm,{onTryAgain:()=>{d(e,n)}});if(i||!a)return o.a.createElement(hf,null);const u=a[l];if(u&&0===u.length)return o.a.createElement(lf,null);const p=t?u:u.slice(0,5);return o.a.createElement(yf,null,o.a.createElement(Of,{isExpanded:t},o.a.createElement(Wm.a,{items:p,groupId:e,onClick:(e,t)=>{null!=e&&(Object(Bm.e)(t)||Object(Bm.a)(t)?Object(Ki.h)(n({}),"relatedIssue clicked",{newTabOpened:!0,position:e.position,relatedIssueId:e.id}):(Object(Ki.h)(n({}),"relatedIssue clicked",{newTabOpened:!1,position:e.position,relatedIssueId:e.id}),
window.location.assign(e.issueKey)))}},((e,t,s,n)=>o.a.createElement(tf,n))),(()=>u.length>5&&o.a.createElement(pf,{isShowMoreExpanded:t,onExpand:()=>s(!0),issuesLength:u.length}))()))};jf.displayName="IssueLineCardGroup";var vf=jf,Ef=Object(I.defineMessages)({filterBy:{id:"smart-related-issues-panel.filter-by",defaultMessage:"Show:"},open:{id:"smart-related-issues-panel.open",defaultMessage:"Open"},resolved:{id:"smart-related-issues-panel.resolved",defaultMessage:"Resolved"}
}),wf=n("./node_modules/@atlassiansox/engagekit/dist/esm/coordination/useCoordination.js"),kf=n("./node_modules/scroll-into-view-if-needed/es/index.js"),Cf=n("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightManager.js"),Sf=n("./node_modules/@atlaskit/popper/dist/es2019/Popper.js"),If=n("./node_modules/@atlaskit/collab-provider/node_modules/react-popper/lib/esm/Manager.js"),Tf=n("./node_modules/@atlaskit/collab-provider/node_modules/react-popper/lib/esm/Reference.js"),_f=n("./src/packages/engagement/src/ui/coordination-client/index.js"),Pf=Object(I.defineMessages)({header:{id:"smart-related-issues-panel.onboarding.popper-content.header",defaultMessage:"Discover similar issues"},secondaryButton:{id:"smart-related-issues-panel.onboarding.popper-content.secondary-button",defaultMessage:"No thanks"},primaryButton:{id:"smart-related-issues-panel.onboarding.popper-content.primary-button",defaultMessage:"Try it now"}}),xf=Object(I.defineMessages)({modalBody:{
id:"smart-related-issues-panel.onboarding.popper-content.spotlight-messages.modal-body",defaultMessage:"Save time triaging and finding related solutions directly from the request view."},adminModalBody:{id:"smart-related-issues-panel.onboarding.popper-content.spotlight-messages.admin-modal-body",defaultMessage:'Save time triaging and finding related solutions directly from the request view. You can disable this feature at any time in your <a href="{url}" target="_blank" tabindex="-1">project settings</a>.'}});const Df=ee.default.p.withConfig({componentId:"sc-1iu91ez-0"})`margin:0px;a{&:hover{color:${Ze.a.P200};}&:active:{color:${Ze.a.B400};}&:visited,&:link{color:${Ze.a.N0};font-weight:bold;}}`;function Af(){return(Af=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Mf=()=>{const{formatMessage:e}=Object(qe.c)()
;return o.a.createElement(Df,null,e(xf.modalBody))};Mf.displayName="ModalBodyMessage";const Lf=({featuresPageUrl:e})=>o.a.createElement(Df,null,o.a.createElement(I.FormattedHTMLMessage,Af({},xf.adminModalBody,{values:{url:e}})));Lf.displayName="AdminModalBodyMessage";var Rf=n("./node_modules/@atlaskit/theme/dist/es2019/constants.js"),Nf=n("./node_modules/@atlaskit/theme/dist/es2019/utils/math.js"),Ff=n("./node_modules/@atlaskit/theme/dist/es2019/typography.js");function Uf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vf(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Uf(Object(s),!0).forEach((function(t){Kf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Uf(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Kf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $f=ee.default.div.withConfig({componentId:"sc-11zpjd5-0"})`margin:0px 4px;`,Wf=ee.default.div.withConfig({componentId:"sc-11zpjd5-1"})`background:${"#6554C0"};box-shadow:0 4px 8px -2px ${"rgba(9, 30, 66, 0.25)"},0 0 1px ${"rgba(9, 30, 66, 0.31)"};color:${"#FFFFFF"};display:flex;flex-direction:column;padding:${Object(Nf.multiply)(Rf.gridSize,2)}px ${Object(Nf.multiply)(Rf.gridSize,2.5)}px;max-width:${Object(Nf.multiply)(Rf.gridSize,34)}px;border-radius:3px;`,Bf=ee.default.div.withConfig({componentId:"sc-11zpjd5-2"})`${Ff.h600};font-size:20px;font-style:inherit;font-weight:500;letter-spacing:-0.008em;line-height:1.2;margin-bottom:${Rf.gridSize}px;margin-top:0px;color:${"#FFFFFF"};`,Hf=ee.default.div.withConfig({componentId:"sc-11zpjd5-3"
})`display:flex;justify-content:flex-end;align-items:center;padding-top:${Rf.gridSize}px;`,Gf={default:{background:{default:{light:Ze.a.P400,dark:Ze.a.P400},hover:{light:Ze.a.P200,dark:Ze.a.P200},active:{light:Ze.a.P500,dark:Ze.a.P500},disabled:{light:Ze.a.P400,dark:Ze.a.P400},selected:{light:Ze.a.R500,dark:Ze.a.R500},focus:{light:Ze.a.P400,dark:Ze.a.P400}},boxShadow:{focus:{light:`${Ze.a.P100} 0 0 0 2px`,dark:`${Ze.a.P100} 0 0 0 2px`}},color:{default:{light:Ze.a.N0,dark:Ze.a.N0},hover:{light:Ze.a.N0,dark:Ze.a.N0},active:{light:Ze.a.N0,dark:Ze.a.N0},disabled:{light:Ze.a.N0,dark:Ze.a.DN30},selected:{light:Ze.a.N0,dark:Ze.a.N0},focus:{light:Ze.a.N0,dark:Ze.a.N0}},outline:{focus:{light:"none",dark:"none"}}},subtle:{background:{default:{light:"none",dark:"none"},hover:{light:Ze.a.P200,dark:Ze.a.P200},active:{light:Ze.a.P500,dark:Ze.a.P500},disabled:{light:"none",dark:"none"},selected:{light:Ze.a.N700,dark:Ze.a.DN0},focusSelected:{light:Ze.a.N700,dark:Ze.a.DN0}},boxShadow:{focus:{
light:`${Ze.a.P100} 0 0 0 2px`,dark:`${Ze.a.P100} 0 0 0 2px`}},color:{default:{light:Ze.a.N0,dark:Ze.a.N0},hover:{light:Ze.a.N0,dark:Ze.a.N0},active:{light:Ze.a.N0,dark:Ze.a.N0},disabled:{light:Ze.a.N0,dark:Ze.a.N0},selected:{light:Ze.a.N0,dark:Ze.a.N0},focus:{light:Ze.a.N0,dark:Ze.a.N0}},outline:{focus:{light:"none",dark:"none"}}}},qf=()=>(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t),{appearance:a,state:i,mode:r}=t,o=Gf[`${a||""}`];let c={};return o&&(c=Object.keys(o).reduce(((e,t)=>{const s=o[t];return s[i]&&(e[t]=s[i][r]),e}),{})),{buttonStyles:Vf(Vf({},s),c),spinnerStyles:n}},zf=({onPrimaryActionClick:e,onSecondaryActionClick:t})=>{const{formatMessage:s}=Object(qe.c)(),n=Object(cs.i)(),a=Object(Gd.a)(n),i=`/jira/servicedesk/projects/${n}/settings/itsm-features`;return o.a.createElement(Wf,null,o.a.createElement(Bf,null,s(Pf.header)),a?o.a.createElement(Lf,{featuresPageUrl:i
}):o.a.createElement(Mf,null),o.a.createElement(Hf,null,o.a.createElement($f,null,o.a.createElement(Rr.a,{theme:qf(),appearance:"subtle",onClick:t},s(Pf.secondaryButton))),o.a.createElement($f,null,o.a.createElement(Rr.a,{theme:qf(),onClick:e,autoFocus:!0},s(Pf.primaryButton)))))};zf.displayName="PopperContent";var Yf=zf;function Qf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Jf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zf=ee.default.div.withConfig({componentId:"sc-1js68ii-0"})`${e=>e.styling};background-color:white;border-radius:4px;box-shadow:0 0 0 1px ${Ze.a.N40A},0 4px 11px ${Ze.a.N40A};opacity:${({isReferenceHidden:e,active:t})=>e||!t?0:1};transition:opacity 200ms ease-in-out;z-index:${te.f.layer};`,Xf=ee.default.div.withConfig({
componentId:"sc-1js68ii-1"})`${e=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qf(Object(s),!0).forEach((function(t){Jf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qf(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},e.extraStyles)};`,eb=Ze.a.P75,tb=ee.keyframes`0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}`,sb=ee.css`animation:${tb} 3000ms ${"cubic-bezier(0.55, 0.055, 0.675, 0.19)"} infinite;`,nb=ee.css`content:'';position:absolute;top:0;left:0;width:100%;height:100%;`,ab=ee.default.span.withConfig({componentId:"sc-1js68ii-2"
})`display:block;> *{position:relative;&::before{${nb} border-radius:${te.e/2}px;box-shadow:${({pulseColor:e=eb})=>`0 0 0 0px ${e}`};opacity:${e=>e.hasPulse?1:0};transition:opacity 0.1s ease-in-out;pointer-events:none;}&::after{${nb} border-radius:${te.e/2}px;box-shadow:${({pulseColor:e=eb,pulseShadowColor:t="rgba(101, 84, 192, 1)"})=>`0 0 0 0px ${e} , 0 0 ${te.e}px ${t}`};opacity:0;pointer-events:none;${e=>e.isPulsing&&sb}}}`,ib=({children:e,isExpanded:t,onPrimaryActionClick:s})=>{const n=Object(Vp.a)(),a=Object(r.useMemo)((()=>new _f.a(n,"/gateway/api")),[n]),[i,c]=Object(wf.a)(a,"related-issues-panel"),[l,d]=Object(r.useState)(!0),[u,p]=Object(r.useState)(!1),[m,f]=Object(r.useState)(!1),b=Object(r.useRef)(null),g=Object(r.useCallback)((()=>{d(!1),c&&c()}),[c]),h=()=>{g(),s()},y=l&&u&&i&&c&&!t;Object(r.useEffect)((()=>{y&&(Object(kf.a)(b.current,{inline:"end",behavior:"smooth"}),setTimeout((()=>{f(!0)}),300))}),[u,l,y]),Object(r.useEffect)((()=>{d(!!i)}),[i]),
Object(r.useEffect)((()=>{t&&(g(),d(!1),c&&c())}),[g,t,c]);return o.a.createElement(Cf.d,null,o.a.createElement(If.a,null,o.a.createElement(Tf.a,null,(({ref:s})=>o.a.createElement(o.a.Fragment,null,o.a.createElement(ab,{isPulsing:i&&c&&l&&!t},o.a.createElement("div",{ref:s,onMouseEnter:()=>p(!0)},e)),o.a.createElement(Xf,{innerRef:b}),(()=>y?o.a.createElement(Sf.a,{placement:"top-end"},(({ref:e,style:t,isReferenceHidden:s})=>o.a.createElement(Zf,{innerRef:e,styling:t,isReferenceHidden:s,active:m},o.a.createElement(Yf,{onPrimaryActionClick:h,onSecondaryActionClick:g})))):null)())))))};ib.displayName="OnboardingController";const rb=ee.default.div.withConfig({componentId:"cb0xo6-0"})`margin-top:${te.e}px;margin-bottom:${3*te.e}px;display:flex;flex-direction:column;border-radius:${te.e/2}px;border:1px solid #dfe1e6;background-color:${Ze.a.N0};padding:16px;${({isExpanded:e,hasContentItems:t})=>e&&t&&"padding-bottom: 0"};`,ob=(ee.default.div.withConfig({componentId:"cb0xo6-1"
})`display:flex;flex-direction:row;justify-content:space-between;`,ee.default.div.withConfig({componentId:"cb0xo6-2"})`margin-right:${1*te.e}px;`,ee.default.div.withConfig({componentId:"cb0xo6-3"})`display:flex;flex-direction:row;align-items:center;`,ee.default.div.withConfig({componentId:"cb0xo6-4"})`padding-top:${2*te.e}px;`),cb=(Object(ee.default)(Si.c).withConfig({componentId:"cb0xo6-5"})`${Rm.a};${Ze.d.h400()};margin:0;min-width:0;`,ee.default.div.withConfig({componentId:"cb0xo6-6"})`display:flex;margin-top:${te.e}px;`),lb=ee.default.div.withConfig({componentId:"cb0xo6-7"})`${Rm.a};min-width:0;`;ee.default.div.withConfig({componentId:"cb0xo6-8"})`min-width:150px;max-height:95vh;padding:4px 0px;&&{[role='menuitem']{padding:8px 12px 7px;}[class*='GroupTitle']{padding:8px 12px;> div[class*='GroupTitleText']{padding:0;}}}`;var db=n("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js");const ub=()=>{const e=Object(cs.g)(),[{value:t}]=Object(db.a)({issueKey:e
}),[s,n]=Object(r.useState)(void 0),[a,i]=Object(r.useState)(void 0),[o,c]=Object(r.useState)(!1),[l,d]=Object(r.useState)([]),[{data:u}]=um();return Object(r.useEffect)((()=>{if(u){const e=u.RESOLVED,t=u.OPEN,s=Jp()(e,t);if(e.length>0){const t=(e=>{const t=new Map;e.forEach((e=>{if(null===e.assignee||void 0===e.assignee)return;const s=t.get(e.assignee);void 0===s?t.set(e.assignee,1):t.set(e.assignee,s+1)}));let s,n=0;return t.forEach(((e,t)=>{e>n&&(s=t,n=e)})),s})(e);void 0!==t&&n(t)}const a=(e=>{const t=new Map;e.forEach((e=>{if(null===e.requestType||void 0===e.requestType)return;const s=t.get(e.requestType);void 0===s?t.set(e.requestType,1):t.set(e.requestType,s+1)}));let s,n=0;return t.forEach(((e,t)=>{e>n&&(s=t,n=e)})),s})(s);void 0!==a&&i(a),(e=>e.length>3)(t)&&c(!0);const r=(e=>{const t={};return e.forEach((e=>{null!==e.articles&&void 0!==e.articles&&e.articles.forEach((e=>{void 0===t[e]?t[e]=1:t[e]+=1}))})),Object.entries(t).sort((([,e],[,t])=>t-e)).map((([e])=>e)).slice(0,3)
})(s);d(r)}}),[t,u,o,a]),[{suggestedAssignee:s,suggestIncident:o,suggestedRequestType:a,suggestedArticles:l}]};var pb=Object(I.defineMessages)({show:{id:"smart-related-issues-panel.suggestions.header.expander.show",defaultMessage:"Show"},hide:{id:"smart-related-issues-panel.suggestions.header.expander.hide",defaultMessage:"Hide"}});var mb=({isContentExpanded:e,onExpand:t,onCollapse:s})=>{const{formatMessage:n}=Object(qe.c)(),a=(e,s)=>{t(),Object(Ki.h)(s,"showInsights")},i=(e,t)=>{s(),Object(Ki.h)(t,"hideInsights")};return e?(()=>o.a.createElement(J.a,{"aria-label":n(pb.hide),appearance:"subtle-link",spacing:"default",iconBefore:o.a.createElement(_u.a,{label:"",size:"large"}),onClick:i}))():(()=>o.a.createElement(J.a,{"aria-label":n(pb.show),appearance:"subtle-link",spacing:"default",iconBefore:o.a.createElement(Iu.a,{label:"",size:"large"}),onClick:a}))()},fb=Object(I.defineMessages)({hideSimilarRequests:{id:"smart-related-issues-panel.suggestions.header.hide-similar-requests",
defaultMessage:"Hide Insights"},title:{id:"smart-related-issues-panel.suggestions.header.title",defaultMessage:"Insights"}});const bb=ee.default.div.withConfig({componentId:"sc-3gt2zf-0"})`display:flex;flex-direction:row;justify-content:space-between;`,gb=ee.default.div.withConfig({componentId:"sc-3gt2zf-1"})`margin-right:${1*te.e}px;`,hb=ee.default.div.withConfig({componentId:"sc-3gt2zf-2"})`display:flex;flex-direction:row;align-items:center;`,yb=Object(ee.default)(Si.c).withConfig({componentId:"sc-3gt2zf-3"})`${Rm.a};${Ze.d.h400()};margin:0;min-width:0;`,Ob=({onExpand:e,onCollapse:t,isExpanded:s})=>{const{formatMessage:n}=Object(qe.c)();return o.a.createElement(bb,null,o.a.createElement(hb,null,o.a.createElement(gb,null,o.a.createElement(_m.a,{size:"medium",label:""})),o.a.createElement(yb,null,n(fb.title))),o.a.createElement(km.a,null,o.a.createElement(mb,{isContentExpanded:s,onExpand:e,onCollapse:t})))};Ob.displayName="PanelHeader";var jb=Object(I.defineMessages)({
suggestedRequestTypeHeading:{id:"smart-related-issues-panel.suggestions.suggested-request-type-heading",defaultMessage:"Suggested Request Type"},suggestedRequestTypeDesc:{id:"smart-related-issues-panel.suggestions.suggested-request-type-desc",defaultMessage:"'{requestType}' may be a more suitable request type for this emailed request."},suggestedAssigneeHeading:{id:"smart-related-issues-panel.suggestions.suggested-assignee-heading",defaultMessage:"Suggested Assignee"},suggestedAssigneeDesc:{id:"smart-related-issues-panel.suggestions.suggested-assignee-desc",defaultMessage:"{suggestedAssignee} has solved similar tickets in the past. They would make a good assignee."},subjectMatterExpertHeading:{id:"smart-related-issues-panel.suggestions.subject-matter-expert-heading",defaultMessage:"Need help resolving this issue?"},subjectMatterExpertDesc:{id:"smart-related-issues-panel.suggestions.subject-matter-expert-desc",
defaultMessage:"{subjectMatterExpert} has solved similar tickets in the past. Perhaps reach out to them for assistance."},suggestedArticlesHeading:{id:"smart-related-issues-panel.suggestions.suggested-articles-heading",defaultMessage:"Suggested Articles"},suggestedIncidentHeading:{id:"smart-related-issues-panel.suggestions.suggested-incident-heading",defaultMessage:"This might be an incident or a problem"},suggestedIncidentDesc:{id:"smart-related-issues-panel.suggestions.suggested-incident-desc",defaultMessage:"There are {numTickets} similar open tickets."}});const vb=ee.default.div.withConfig({componentId:"sc-1ysgy1p-0"})`margin-top:${te.e}px;margin-bottom:${3*te.e}px;display:flex;flex-direction:column;border-radius:${te.e/2}px;border:1px solid #dfe1e6;background-color:${Ze.a.N0};padding:16px;${({isExpanded:e,hasContentItems:t})=>e&&t&&"padding-bottom: 0"};`,Eb=(ee.default.div.withConfig({componentId:"sc-1ysgy1p-1"})`display:flex;flex-direction:row;justify-content:space-between;`,
ee.default.div.withConfig({componentId:"sc-1ysgy1p-2"})`margin-right:${1*te.e}px;`,ee.default.div.withConfig({componentId:"sc-1ysgy1p-3"})`display:flex;flex-direction:row;align-items:center;`,ee.default.div.withConfig({componentId:"sc-1ysgy1p-4"})`padding-top:${2*te.e}px;`,Object(ee.default)(Si.c).withConfig({componentId:"sc-1ysgy1p-5"})`${Rm.a};${Ze.d.h400()};margin:0;min-width:0;`,ee.default.div.withConfig({componentId:"sc-1ysgy1p-6"})`display:flex;margin-top:${te.e}px;`,ee.default.div.withConfig({componentId:"sc-1ysgy1p-7"})`${Rm.a};min-width:0;`,ee.default.div.withConfig({componentId:"sc-1ysgy1p-8"})`min-width:150px;max-height:95vh;padding:4px 0px;&&{[role='menuitem']{padding:8px 12px 7px;}[class*='GroupTitle']{padding:8px 12px;> div[class*='GroupTitleText']{padding:0;}}}`,()=>{var e,t;const{formatMessage:s}=Object(qe.c)(),n=Object(cs.g)(),[{value:a}]=Object(db.a)({issueKey:n
}),[{data:i}]=um(),[{suggestedRequestType:c,suggestedAssignee:l,suggestedArticles:d,suggestIncident:u}]=ub(),[p,m]=Object(r.useState)(!1),[{value:f}]=bm({issueKey:n}),b="Emailed request"===(null==f||null===(e=f.requestType)||void 0===e?void 0:e.name);return o.a.createElement(o.a.Fragment,null,(!Wp()(c)||!Wp()(l)||!Wp()(d)||!Wp()(u))&&o.a.createElement(vb,{isExpanded:p},o.a.createElement(Ob,{onExpand:()=>m(!0),onCollapse:()=>m(!1),isExpanded:p}),p&&o.a.createElement(o.a.Fragment,null,b&&c!==(null==f||null===(t=f.requestType)||void 0===t?void 0:t.name)&&!Wp()(c)&&o.a.createElement(Sl.a,{appearance:"information",title:s(jb.suggestedRequestTypeHeading)},o.a.createElement("p",null,s(jb.suggestedRequestTypeDesc,{requestType:c.name}))),!Wp()(l)&&!Wp()(a)&&l.displayName!==a.displayName&&o.a.createElement(Sl.a,{appearance:"information",title:s(jb.subjectMatterExpertHeading)},o.a.createElement("p",null,s(jb.subjectMatterExpertDesc,{subjectMatterExpert:l.displayName
}))),!Wp()(l)&&null===a&&o.a.createElement(Sl.a,{appearance:"information",title:s(jb.suggestedAssigneeHeading)},o.a.createElement("p",null,s(jb.suggestedAssigneeDesc,{suggestedAssignee:l.displayName}))),!Wp()(d)&&o.a.createElement(Sl.a,{appearance:"information",title:s(jb.suggestedArticlesHeading)},d.map((e=>o.a.createElement("p",{key:e},o.a.createElement("a",{href:e},e))))),u&&i&&o.a.createElement(Sl.a,{appearance:"warning",title:s(jb.suggestedIncidentHeading)},o.a.createElement("p",null,s(jb.suggestedIncidentDesc,{numTickets:i.OPEN.length}))))))});const wb=({sessionId:e})=>{const{formatMessage:t}=Object(qe.c)(),{createAnalyticsEvent:s}=Object(sr.a)(),[n,a]=Object(r.useState)(!1),i=Object(cs.g)(),[c]=bm({issueKey:i}),l={OPEN:{key:"OPEN",name:t(Ef.open)},RESOLVED:{key:"RESOLVED",name:t(Ef.resolved)}},d=[l.OPEN,l.RESOLVED],[{status:u,requestTypeFieldId:p},{setIssueStatus:m,fetchRelatedIssuesForIssue:f,setRequestTypeFieldId:b}]=um();Object(r.useEffect)((()=>{c&&b(c.requestTypeFieldId)
}),[c,b]),Object(r.useEffect)((()=>{n&&f(e,s)}),[s,f,n,e,p]);const g=o.a.createElement(cb,null,o.a.createElement(lb,null,t(Ef.filterBy)),o.a.createElement(wm,{items:d,selectedItem:l[u],onSelectIssueStatusItem:(t,n,a)=>{Object(Ki.h)(n,a,{selectedStatusFilter:t.key}),m(t.key),f(e,s)}}));return o.a.createElement(Wi.a,{attributes:{selectedStatusFilter:u}},o.a.createElement(ib,{isExpanded:n,onPrimaryActionClick:()=>{Object(Ki.h)(s({action:"clicked",actionSubject:"button"}),"showRelatedIssues",{fromOnboarding:!0,selectedStatusFilter:u}),a(!0)}},o.a.createElement(rb,{isExpanded:n},o.a.createElement($m,{onExpand:()=>a(!0),onCollapse:()=>a(!1),isExpanded:n}),n&&o.a.createElement(o.a.Fragment,null,g,o.a.createElement(ob,null,o.a.createElement(vf,{sessionId:e})),Kp()&&o.a.createElement(Eb,{sessionId:e})))))};wb.displayName="RelatedIssuesPanelView";var kb=wb;const Cb=e=>null!=e,Sb=e=>Cb(e)&&""!==e;var Ib=()=>{
const e=Fp.a.v4(),t=Object(cs.f)(),s=Object(cs.i)(),n=Object(Vr.r)(Object(Tl.e)(s)||""),a=Object(Tl.h)(s),i=Object(Vp.a)(),r=Object(Vr.c)(""),c=Object(cs.g)(),[l]=Object(Vl.b)({issueKey:c,fieldKey:"similar-issues"}),d=((e,t,s,n,a)=>{if(Sb(t)&&t!==Object(Vr.r)("")&&Cb(e)&&e!==Object(Vr.k)("")&&Sb(a))return{issueId:e,projectId:t,projectKey:s,baseUrl:n,cloudId:a}})(t,n,s,r,i),u=(()=>Object(Hi.b)("jsm-project-archive-and-restore",!1))()&&"PROJECT_ARCHIVED"===a;return l&&void 0!==d&&!u?o.a.createElement(Up.a,{id:"relatedIssuesPanel",packageName:"issueSmartRelatedIssuesPanel",fallback:"unmount",teamName:"smart-experiences"},o.a.createElement(dm,d,o.a.createElement(Wi.a,{sourceName:"RelatedIssuesPanel",attributes:{smartSessionId:e}},o.a.createElement(kb,{sessionId:e})))):null};const Tb=ee.default.div.withConfig({componentId:"ei7vuq-0"})`margin-top:${e=>e.isCompactMode?2.5*te.e:5*te.e}px;`,_b=ee.default.div.withConfig({componentId:"ei7vuq-1"
})`margin-top:${e=>e.isCompactMode?null:`${te.e}px`};`,Pb=ee.default.div.withConfig({componentId:"ei7vuq-2"})`margin-bottom:${e=>e.isCompactMode||e.isPanelCollapsed?2*te.e:5*te.e}px;`;var xb=n("./src/packages/issue/issue-view/src/selectors/web-links-selector.js"),Db=n("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),Ab=n("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),Mb=n("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const Lb=Object(Mb.b)("issue-ecosystem"),Rb="collapsed-panels",Nb="issue.ecosystem.local-storage",Fb=()=>{try{return Lb.get(Rb)||[]}catch(e){return v.a.safeErrorWithoutCustomerData(Nb,`getCollapsedPanels failed: ${e}`,new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),[]}},Ub=({children:e,isLoading:t=!1})=>o.a.createElement("span",null,o.a.createElement(Cm.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",
iconBefore:t?o.a.createElement(Z.a,{size:"small"}):o.a.createElement(Im.a,{size:"small",label:"meatball menu"})},position:"bottom right"},e));Ub.displayName="MeatBallMenu";const Vb=ee.default.div.withConfig({componentId:"sc-185kjqv-0"})`display:flex;align-items:center;height:${4*te.e}px;cursor:${e=>e.clickable?"pointer":void 0};`,Kb=ee.default.div.withConfig({componentId:"sc-185kjqv-1"})`align-items:center;display:flex;flex-flow:row-reverse wrap;& > * + *{margin-left:${te.e}px;}`;function $b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wb(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$b(Object(s),!0).forEach((function(t){Bb(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$b(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Bb(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hb=ee.default.span.withConfig({componentId:"sc-14ib96m-0"})`color:${Ze.a.link};margin-left:5px;display:${e=>e.alwaysShow?void 0:"none"};${Vb}:hover &{display:inline;}`,Gb=ee.default.div.withConfig({componentId:"sc-14ib96m-1"})`max-height:${e=>e.isCollapsed?"0":"1500px"};overflow-y:${e=>e.isCollapsed?"hidden":"auto"};overflow-x:hidden;${Object(kr.f)("&")};transition:max-height 1s ease-out;`,qb=ee.default.h1.withConfig({componentId:"sc-14ib96m-2"})`flex:1;${kr.e};${Ze.d.h400()};color:${Ze.a.heading};`,zb=Object(I.defineMessages)({actions:{id:"issue.content.ecosystem-panels.meatballs.actions",defaultMessage:"Actions"},hide:{id:"issue.content.ecosystem-panels.meatballs.hide",defaultMessage:"Hide {appName}"},collapse:{id:"issue.content.ecosystem-panels.collapse-content",defaultMessage:"hide"
},expand:{id:"issue.content.ecosystem-panels.expand-content",defaultMessage:"show"}});class Yb extends r.Component{constructor(e){super(e),this.setupConnectHost=e=>{e&&e.onIframeUnload((({extension:t})=>{e.destroy(t.id)}))},this.contentPanelContainer=void 0,this.handleRemoveContentPanel=()=>{const{appKey:e,moduleKey:t,removeContentPanel:s,onContentPanelRemoveAnalytics:n}=this.props;n(Object(ga.b)(e,t)),s(`${e}_${t}`)},this.toggleCollapsedState=()=>{const{appKey:e,moduleKey:t,onToggleCollapsedStateAnalytics:s}=this.props,{isCollapsed:n}=this.state,a=Object(Ab.b)(`${e}_${t}`,10);s(Object(ga.f)(e,t,n?"expand":"collapse")),n?(e=>{const t=Fb();try{Lb.set(Rb,t.filter((t=>t!==e)))}catch(s){v.a.safeErrorWithoutCustomerData(Nb,`unsetCollapsedPanel failed: ${s}`,new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}})(a):(e=>{const t=Fb();try{Lb.set(Rb,[...t,e])}catch(s){v.a.safeErrorWithoutCustomerData(Nb,`setCollapsedPanel failed: ${s}`,new b.a({eventNameSuffix:"issue.error",
type:"js",app:"issue",event:s}))}})(a),this.setState({isCollapsed:!n})},this.state={connectHost:window.connectHost,isCollapsed:Fb().includes(Object(Ab.b)(`${e.appKey}_${e.moduleKey}`,10))},this.setupConnectHost(this.state.connectHost)}componentDidMount(){this.state.connectHost||Object(va.b)((e=>{this.setupConnectHost(e),this.setState({connectHost:e})}))}componentDidUpdate(){this.props.isSelected&&(Object(wo.a)(this.contentPanelContainer),this.props.unSelectContentPanel(`${this.props.appKey}_${this.props.moduleKey}`))}renderHidePanelOption(){const{intl:e}=this.props;return o.a.createElement(fr.a,{title:e.formatMessage(zb.actions)},o.a.createElement(wr.a,{onClick:this.handleRemoveContentPanel},e.formatMessage(zb.hide,{appName:this.props.name})))}renderMeatBallMenu(){return o.a.createElement(Ub,null,this.renderHidePanelOption())}renderHeader(){const{showByDefault:e}=this.props.contentPanel
;if(!e)return o.a.createElement(Si.c,null,o.a.createElement(Vb,null,o.a.createElement(qb,null,this.props.name)),o.a.createElement(Kb,null,this.renderMeatBallMenu()));const{intl:t}=this.props,{isCollapsed:s}=this.state;return o.a.createElement(Si.c,null,o.a.createElement(Vb,{clickable:!0,onClick:this.toggleCollapsedState},o.a.createElement(qb,null,this.props.name),o.a.createElement(Hb,{alwaysShow:s},s?t.formatMessage(zb.expand):t.formatMessage(zb.collapse))),e?null:o.a.createElement(Kb,null,this.renderMeatBallMenu()))}render(){const{appKey:e,moduleKey:t}=this.props,{isCollapsed:s}=this.state,{options:n,options:{url:a,origin:i},showByDefault:r}=this.props.contentPanel,c=new wa.a,l=Object(Ts.isMoveEcosystemModuleToSeparatePackageEnabled)()?ka.b:Aa;return o.a.createElement("div",{ref:e=>{this.contentPanelContainer=e}},this.renderHeader(),o.a.createElement(Gb,{isCollapsed:s&&r},this.state.connectHost&&o.a.createElement(Ea.a,{key:`connect-iFrame-${i}-${this.props.refreshedOn}`,
connectHost:this.state.connectHost,appKey:e,moduleKey:t,url:a,options:c.convertConnectOptions(n),connectIframeProvider:c,width:"100%",height:"100%",timeoutIndicator:()=>o.a.createElement(l,{appName:this.props.contentPanel.name,appKey:e})})))}}Yb.displayName="ConnectContentPanel",Yb.displayName="ContentPanel",Yb.defaultProps={isSelected:!1,unSelectContentPanel:d.a,removeContentPanel:d.a,refreshedOn:0,onContentPanelRemoveAnalytics:d.a};var Qb=Object(Is.a)([I.injectIntl,Object(zs.a)((e=>({onContentPanelRemoveAnalytics:t=>e("remove",Wb({},t)),onToggleCollapsedStateAnalytics:t=>e("toggleCollapsedState",Wb({},t))}))),Object(c.connect)(((e,t)=>({contentPanel:Object(ha.d)(t.appKey,t.moduleKey)(e),isSelected:Object(ha.r)(t.appKey,t.moduleKey)(e),refreshedOn:Object(L.e)(e)})),(e=>({unSelectContentPanel:t=>e(Object(Db.e)(t)),removeContentPanel:t=>e(Object(Db.h)(t))
})))])(Yb),Jb=n("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),Zb=n("./src/packages/forge/forge-ui-analytics/src/ui/issue-panel/index.js"),Xb=n("./src/packages/forge/forge-ui-async/src/ui/issue-panel/async.js"),eg=n("./src/packages/issue/issue-view/src/actions/forge-actions.js"),tg=Object(I.defineMessages)({title:{id:"issue.content.ecosystem.forge.panel.actions.title",defaultMessage:"Actions"},remove:{id:"issue.content.ecosystem.forge.panel.actions.remove",defaultMessage:"Remove"},collapse:{id:"issue.content.ecosystem.forge.panel.actions.collapse",defaultMessage:"Collapse"},expand:{id:"issue.content.ecosystem.forge.panel.actions.expand",defaultMessage:"Expand"}});const sg=["extensionData","source","onContentPanelRemoveAnalytics","onRemove","appKey","moduleKey","name","isPanelCollapsed"];function ng(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s])
;return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ag(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ig(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ag(Object(s),!0).forEach((function(t){rg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ag(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const og=({actions:e})=>{const[t,s]=Object(r.useState)(!1),{formatMessage:n}=Object(qe.c)()
;if(0===e.length)return null;const a=e.map((e=>ig(ig({},e),{},{onClick:()=>(s(!0),e.onClick().finally((()=>{s(!1)})))})));return o.a.createElement(Ub,{isLoading:t},o.a.createElement(fr.a,{title:n(tg.title)},a.map((e=>o.a.createElement(wr.a,{onClick:e.onClick,key:e.key},e.text)))))};og.displayName="Actions";const cg=({name:e,extension:{environmentType:t},actions:s})=>o.a.createElement(Si.c,null,o.a.createElement(Vb,null,o.a.createElement(Si.e,null,o.a.createElement(yr.a,{extensionName:e,extensionEnvType:t}))),o.a.createElement(Kb,null,o.a.createElement(og,{actions:s})));cg.displayName="ForgeContentPanelHeader";const lg=e=>{let{extensionData:t,source:s,onContentPanelRemoveAnalytics:n,onRemove:a,appKey:i,moduleKey:c,name:l,isPanelCollapsed:d}=e,u=ng(e,sg);const{extension:p,panelKey:m,isJustAdded:f,isCompactMode:b,removeFromJustAdded:g,removeFromNewPanels:h,updatePanel:y}=u,O=Object(r.useRef)(null),{formatMessage:j}=Object(qe.c)();Object(r.useEffect)((()=>{
f&&O&&O.current&&(Object(wo.a)(O.current),g(m))}),[f,m,g]),Object(r.useEffect)((()=>()=>{t.isNewToIssue&&h(m)}),[t.isNewToIssue,m,h]);const v=Object(r.useMemo)((()=>({source:s,isNewToIssue:t.isNewToIssue})),[t.isNewToIssue,s]),[E,w]=Object(r.useState)([]),k=Object(r.useMemo)((()=>({onClick:()=>(n(Object(ga.b)(i,c)),Object(Jb.l)(s),a(m),Promise.resolve()),text:j(tg.remove),key:"internal__remove-action"})),[i,j,c,n,a,m,s]),C=Object(r.useCallback)((e=>(Object(Jb.k)(s,{collapsed:e}),e&&w([]),y({issueKey:t.issue.key,panelKey:m,collapsed:e}),Promise.resolve())),[t.issue.key,m,s,y]),S=Object(r.useMemo)((()=>({onClick:()=>C(!1),text:j(tg.expand),key:"internal__expand-action"})),[j,C]),I=Object(r.useMemo)((()=>({onClick:()=>C(!0),text:j(tg.collapse),key:"internal__collapse-action"})),[j,C]),T=d?S:I,_=[...E.slice(0,5).map((e=>ig(ig({},e),{},{onClick:()=>(Object(Jb.j)(s),e.onClick())}))),T,k];return o.a.createElement("div",{ref:O},o.a.createElement(Pb,{isCompactMode:b,isPanelCollapsed:d
},o.a.createElement(cg,{actions:_,extension:p,name:l}),!d&&o.a.createElement(Xb.a,{extensionData:t,extension:p,localId:m,setCustomActions:w,analyticsAttributes:v})))};lg.displayName="ForgeContentPanelView";const dg=e=>o.a.createElement(Zb.a,{attributes:{source:e.source,isNewToIssue:e.extensionData.isNewToIssue,isPanelCollapsed:e.isPanelCollapsed}},o.a.createElement(lg,e));dg.displayName="ForgeContentPanelViewWithAnalytics";var ug=Object(Is.a)([Object(zs.a)((e=>({onContentPanelRemoveAnalytics:t=>e("remove",ig({},t))}))),Object(c.connect)(((e,t)=>({isJustAdded:Object(wc.i)(t.panelKey)(e),extensionData:Object(wc.h)(t.panelKey)(e),source:Object(M.b)(e),isPanelCollapsed:Object(wc.d)(t.panelKey)(e)})),(e=>({removeFromJustAdded:t=>{e(Object(Db.e)(t))},removeFromNewPanels:t=>{e(Object(eg.i)(t))},onRemove:t=>{e(Object(Db.h)(t))},updatePanel:t=>{e(Object(eg.g)(t))}
})))])(dg),pg=n("./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg"),mg=n.n(pg),fg=Object(I.defineMessages)({errorStateTitle:{id:"issue-attachments-table.error.error-state-title",defaultMessage:"We couldn't load your attachments"},errorStateDescription:{id:"issue-attachments-table.error.error-state-description",defaultMessage:"Check your network connection, then try reloading your attachments."},primaryButton:{id:"issue-attachments-table.error.primary-button",defaultMessage:"Reload Attachments"}});const bg=ee.default.div.withConfig({componentId:"sc-1n57uym-0"})`& > div{margin:auto;}`,gg=({onClick:e,shouldHideImage:t})=>{const{formatMessage:s}=Object(qe.c)(),n=t?void 0:mg.a,a=o.a.createElement(J.a,{appearance:"primary",onClick:()=>e()},s(fg.primaryButton));return o.a.createElement(bg,null,o.a.createElement(Ia.a,{imageUrl:n,header:s(fg.errorStateTitle),description:s(fg.errorStateDescription),primaryAction:a}))};gg.displayName="AttachmentsError",
gg.defaultProps={shouldHideImage:!1};var hg=gg;const yg=ee.default.div.withConfig({componentId:"sc-12ov3s6-0"})`width:100%;display:flex;position:relative;&&{min-height:initial;}`,Og=ee.keyframes`0%{background-position:-300px 0;}100%{background-position:2000px 0;}`,jg=ee.default.div.withConfig({componentId:"sc-12ov3s6-1"})`animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:${Og};animation-timing-function:linear;background-color:${Ze.a.N30};background-image:linear-gradient( to right,${Ze.a.N30} 10%,${Ze.a.N20} 30%,${Ze.a.N30} 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;`,vg=ee.default.div.withConfig({componentId:"sc-12ov3s6-2"
})`min-height:${e=>e.height}px;min-width:${e=>e.minWidth}px;width:${e=>e.width};border-top:${e=>(e.lineHeight-e.height)/2}px solid ${Ze.a.N0};border-bottom:${e=>(e.lineHeight-e.height)/2}px solid ${Ze.a.N0};border-right:${e=>e.borderRight}px solid ${Ze.a.N0};border-left:${e=>e.borderLeft}px solid ${Ze.a.N0};`,Eg=ee.default.div.withConfig({componentId:"sc-12ov3s6-3"})`position:relative;width:100%;border-top:${e=>e.paddingTop}px solid ${Ze.a.N0};border-bottom:${e=>e.paddingBottom}px solid ${Ze.a.N0};`,wg=ee.default.div.withConfig({componentId:"sc-12ov3s6-4"})`background:${Ze.a.N0};width:${e=>e.width};`;function kg(){return(kg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Cg=({nameTextWidthPercentage:e,dateAddedWidth:t})=>o.a.createElement(yg,null,o.a.createElement(vg,{height:24,minWidth:24,lineHeight:40,borderLeft:6}),o.a.createElement(vg,{
height:14,width:`${e}%`,lineHeight:40,borderLeft:8,borderRight:20}),o.a.createElement(wg,{width:100-e+"%"}),o.a.createElement(vg,{height:14,minWidth:50,lineHeight:40}),o.a.createElement(vg,{height:14,minWidth:t,lineHeight:40,borderLeft:16}),o.a.createElement(vg,{height:24,minWidth:24,lineHeight:40,borderLeft:170-t+62,borderRight:12}));Cg.displayName="TableItem";const Sg=e=>{const{pageNumber:t,totalCount:s}=e,n=s-6*(t-1),a=Math.min(n,6),i=[{nameTextWidthPercentage:80,dateAddedWidth:170},{nameTextWidthPercentage:70,dateAddedWidth:150},{nameTextWidthPercentage:80,dateAddedWidth:160},{nameTextWidthPercentage:60,dateAddedWidth:140},{nameTextWidthPercentage:70,dateAddedWidth:155},{nameTextWidthPercentage:80,dateAddedWidth:170}],r=s>6?55:23;return o.a.createElement(yg,null,o.a.createElement(jg,null),o.a.createElement(Eg,{paddingTop:0,paddingBottom:r},o.a.createElement(yg,null,o.a.createElement(vg,{height:14,minWidth:50,lineHeight:26}),o.a.createElement(wg,{width:"100%"
}),o.a.createElement(vg,{height:14,minWidth:40,lineHeight:26,borderLeft:16}),o.a.createElement(vg,{height:14,minWidth:100,lineHeight:26,borderLeft:26}),o.a.createElement(vg,{height:0,minWidth:24,lineHeight:26,borderLeft:144})),o.a.createElement(vg,{height:2,lineHeight:2}),o.a.createElement(Eg,{paddingTop:0,paddingBottom:0},Array.from({length:a}).map(((e,t)=>o.a.createElement(Cg,kg({},i[t],{key:`table-item--${t}`}))))),o.a.createElement(vg,{height:2,lineHeight:2})))};Sg.displayName="AttachmentsTableSkeleton",Sg.defaultProps={pageNumber:1,totalCount:6}
;var Ig=Sg,Tg=n("./node_modules/lodash/debounce.js"),_g=n.n(Tg),Pg=n("./node_modules/@atlaskit/media-card/dist/es2019/utils/lightCards/cardLoading.js"),xg=n("./node_modules/@atlaskit/media-card/dist/es2019/root/card/cardLoader.js"),Dg=n("./node_modules/@atlaskit/media-filmstrip/dist/es2019/filmstripView/index.js"),Ag=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/with-props.js"),Mg=n("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js"),Lg=Object(I.defineMessages)({confirmationHeader:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-header",defaultMessage:"Delete this attachment?"},confirmationContent:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-content",defaultMessage:"Once you delete, it's gone for good."}});function Rg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ng(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Rg(Object(s),!0).forEach((function(t){Fg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Rg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ug(){return(Ug=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var Vg=(e,t="filmStripView")=>s=>{
const n=Object(cs.g)(),[{value:{attachments:a}},{deleteAttachment:i}]=Object(yn.a)(n),[c,l]=Object(r.useState)(),{formatMessage:d}=Object(qe.c)(),u=Object(cs.i)(),[p]=Object(Gd.d)(u),{createAnalyticsEvent:m}=Object(sr.a)(),f=Object(Mg.a)(),b=Object(r.useCallback)((e=>{if(void 0!==c){e.stopPropagation();const s=m({action:"clicked",actionSubject:"button"});Object(Ki.h)(s,"deleteAttachmentConfirm",{view:t}),i(n,c),l()}}),[m,i,c,n]),g=Object(r.useCallback)((e=>{e.stopPropagation(),l()}),[]),h=Object(r.useMemo)((()=>(({attachments:e,canDeleteAllAttachments:t,canDeleteOwnAttachments:s,accountIdLoggedInUser:n})=>e.reduce(((e,a)=>Ng(Ng({},e),{},{[a.id]:"issue"===a.parentName&&(t||null!==n&&null!==a.author&&s&&a.author.accountId===n)})),{}))({attachments:a,canDeleteAllAttachments:p.canDeleteAllAttachments,canDeleteOwnAttachments:p.canDeleteOwnAttachments,accountIdLoggedInUser:f})),[f,a,p.canDeleteAllAttachments,p.canDeleteOwnAttachments])
;return o.a.createElement(o.a.Fragment,null,o.a.createElement(e,Ug({},s,{onDeleteAttachment:l,canDeleteAttachmentMap:h})),void 0!==c&&o.a.createElement(Tt.b,{appearance:"danger",headerMessage:d(Lg.confirmationHeader),contentMessage:d(Lg.confirmationContent),onConfirm:b,onCancel:g,externalId:"issue.attachment.card.delete"}))},Kg=n("./src/packages/issue/media-provider/src/controllers/create-auth-provider/index.js"),$g=n("./src/packages/issue/media-provider/src/controllers/token-provider/index.js");const Wg=["tokenProvider"];function Bg(){return(Bg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Hg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Gg=e=>Object($g.a)((e=>t=>{const{tokenProvider:s}=t,n=Hg(t,Wg),{mediaContext:a}=n;if(!a.viewContext)return null;const{clientId:i,serviceHost:r}=a.viewContext,c={authProvider:Object(Kg.a)(s,i,r)};return o.a.createElement(e,Bg({viewMediaClientConfig:c},n))})(e)),qg=n("./src/packages/issue/issue-view/src/actions/card-cover-actions.js");const zg=()=>({type:"SCROLL_TO_ATTACHMENT_COMMENT"}),Yg=()=>({type:"SCROLL_TO_ATTACHMENT_WORKLOG"});var Qg=n("./src/packages/issue/issue-view/src/media-feature-flags.js"),Jg=n("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js"),Zg=n("./node_modules/@atlaskit/icon/glyph/trash.js"),Xg=n.n(Zg),eh=n("./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js");const th="listView"
;var sh=n("./node_modules/@atlaskit/icon/glyph/watch.js"),nh=n.n(sh),ah=n("./src/packages/issue/issue-scroll/src/services/main.js"),ih=n("./src/packages/issue/issue-scroll/src/services/types.js"),rh=Object(I.defineMessages)({goToComment:{id:"issue-attachments-base.goto-button.go-to-comment",defaultMessage:"Go to the comment with this attachment"},goToWorklog:{id:"issue-attachments-base.goto-button.go-to-worklog",defaultMessage:"Go to the work log entry with this attachment"},goToField:{id:"issue-attachments-base.goto-button.go-to-field",defaultMessage:"You can find this attachment in the {field} field"}});function oh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ch(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(s),!0).forEach((function(t){lh(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lh(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const dh=(e,t)=>e!==eh.a.customfield?e:t&&t.title||"custom field",uh=({attachmentParent:e,attachmentParentId:t,onScrollToComments:s,onScrollToWorklogs:n,attachmentView:a,issueKey:i,component:c})=>{const{formatMessage:l}=Object(qe.c)(),[,{setScrollTarget:d}]=Object(ah.a)(),[{value:u}]=Object(wd.a)(i,`customfield_${t}`),p=e!==eh.a.comment&&e!==eh.a.worklog,m=Object(r.useCallback)(((i,r)=>{i.stopPropagation(),i.preventDefault();const o=(e,s)=>{d({type:e,id:t}),s()};switch(e){case eh.a.comment:o(ih.a.COMMENT,s),Object(Ki.h)(r,"gotoComment",{view:a});break;case eh.a.worklog:o(ih.a.WORKLOG,n),Object(Ki.h)(r,"gotoWorklog",{view:a})}
}),[e,d,t,s,a,n]),f=Object(r.useCallback)((e=>{"Enter"===e.key&&e.stopPropagation()}),[]),b=Object(r.useMemo)((()=>{switch(e){case eh.a.comment:return l(rh.goToComment);case eh.a.worklog:return l(rh.goToWorklog);default:return l(rh.goToField,{field:dh(e,u)})}}),[e,u,l]),g=()=>p?{}:"listView"===a?{background:"#DFE1E6"}:{background:"#FFFFFF"};return o.a.createElement(Re.a,{content:b,position:"top"},o.a.createElement(Rr.a,{appearance:"subtle",iconBefore:o.a.createElement(nh.a,{label:b}),onClick:m,onKeyPress:f,theme:(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t);return ch({buttonStyles:ch(ch({},s),{},{display:"flex",justifyContent:"center","&:hover":g(),paddingLeft:"filmStripView"===a?"0px":void 0,paddingRight:"filmStripView"===a?"0px":void 0,margin:"0"})},n)},isDisabled:p,component:c}))};uh.displayName="GoToButton",uh.defaultProps={component:"button"};var ph=uh;function mh(){return(mh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const fh="show-icon",bh=e=>o.a.createElement("svg",mh({},e,{viewBox:"0 0 24 24"}),o.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},o.a.createElement("path",{d:"M2 11v5h14v-5H2zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),o.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),o.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));bh.displayName="hideIcon";const gh=e=>o.a.createElement("svg",mh({},e,{viewBox:"0 0 24 24"}),o.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},o.a.createElement("path",{
d:"M2 11v5h14v-5H2zm0-1V9h14v1-8H2v8zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),o.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),o.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));gh.displayName="showIcon";const hh=({icon:e,label:t})=>{const s=e===fh?gh:bh;return o.a.createElement(Re.a,{position:"top",content:t},o.a.createElement(ar.b,{glyph:s,label:t,size:"small"}))};hh.displayName="CardCoverIcon";var yh=hh,Oh=Object(I.defineMessages)({delete:{id:"attachments.delete-attachment-from-attachment-panel",defaultMessage:"Delete"},goto:{id:"attachments.goto-attachment-from-attachment-panel",defaultMessage:"GoTo"},show:{id:"attachments.show-on-card",defaultMessage:"Show on card"},hide:{id:"attachments.hide-on-card",defaultMessage:"Hide on card"},confirmationHeader:{id:"attachments.confirm-delete-attachment-modal-header",
defaultMessage:"Delete this attachment?"},confirmationContent:{id:"attachments.confirm-delete-attachment-modal-text",defaultMessage:"Once you delete, it's gone for good."}});const jh=(e,t,s,n,a,i,r,c,l)=>{const u=a.formatMessage(Oh.delete);return t===eh.b?n?[{label:u,handler:()=>r(e),icon:o.a.createElement(Xg.a,{label:u})}]:[]:[{label:a.formatMessage(Oh.goto),handler:d.a,icon:o.a.createElement(ph,{attachmentParent:t,attachmentParentId:s,attachmentView:"filmStripView",onScrollToComments:c,onScrollToWorklogs:l,issueKey:i,component:"div"})}]},vh=(e,t,s,n,a)=>{const i=Number(e),r=s.formatMessage(Oh.hide),c=s.formatMessage(Oh.show);return t&&t.isEnabled&&t.availableAttachmentIds.includes(i)?i===t.attachmentId?[{label:r,handler:()=>{a(i)},icon:o.a.createElement(yh,{icon:"hide-icon",label:r})}]:[{label:c,handler:()=>{n(t.attachmentId,i)},icon:o.a.createElement(yh,{icon:fh,label:c})}]:[]};function Eh(){return(Eh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function wh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kh(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ch={width:156,height:125},Sh=e=>o.a.createElement(Pg.a,{key:e,dimensions:Ch});Sh.displayName="fakeCard";const Ih=e=>{
const[t,s]=Object(r.useState)(0),[n,a]=Object(r.useState)(0),[i,c]=Object(r.useState)([]),[l,d]=Object(r.useState)(!1),{cardCover:u,intl:p,isMobile:m,isPreview:f,mediaContext:b,onCardCoverHide:g,onCardCoverShow:h,onScrollToComments:y,onScrollToWorklogs:O,viewMediaClientConfig:j,onDeleteAttachment:v,canDeleteAttachmentMap:E}=e,w=Object(cs.g)(),[{value:{attachments:k,totalCount:C},meta:{startAt:S},error:I},{refreshAttachments:T}]=Object(yn.a)(w),_=Object(r.useCallback)((({offset:e,offsets:t})=>{c(t),s(e)}),[]),P=Object(r.useCallback)(_g()(T,300),[T]);Object(r.useEffect)((()=>{0===S&&s(0)}),[S]);const x=Object(r.useCallback)((({animate:e,offset:t})=>{const n=i.findIndex((e=>e.left>t))-1;d(e),a(n),s(t),P(w,{startAt:n})}),[i,P,w]),D=k||[],A=Object(r.useMemo)((()=>D.map((e=>({identifier:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wh(Object(s),!0).forEach((function(t){kh(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({mediaItemType:"file",id:e.mediaApiFileId},b.viewContext&&null!==b.viewContext.collection?{collectionName:b.viewContext.collection}:{}),selectable:!1,actions:((e,t,s,n,a,i,r,o,c,l,d,u)=>[...jh(e,t,s,a,i,r,o,d,u),...vh(e,n,i,c,l)])(e.id,e.parentName,e.parentId,u,E[e.id],p,w,v,h,g,y,O),isLazy:!m,isParentCommentJsdInternal:e.isParentCommentJsdInternal})))),[D,E,u,p,m,w,b.viewContext,g,h,v,y,O]),M=Object(r.useCallback)((e=>{const t={list:e.map((e=>e.identifier))},s=e.map(((e,s)=>{if(f||I)return Sh(`card-${s}`);const n=e.isParentCommentJsdInternal;return o.a.createElement(xg.a,Eh({key:e.identifier.id,mediaClientConfig:j,mediaViewerDataSource:t,useInlinePlayer:!1,dimensions:Ch,shouldOpenMediaViewer:!0,featureFlags:Object(Qg.a)(),titleBoxBgColor:n?Ze.a.Y75:void 0,
titleBoxIcon:n?"LockFilledIcon":void 0,shouldEnableDownloadButton:!0},e))})),n=C-s.length-S,a=Array.from({length:S}).map(((e,t)=>Sh(`card-${t}`))),i=Array.from({length:n}).map(((e,t)=>Sh(`card-${C-n+t}`)));return[...a,...s,...i]}),[S,I,f,C,j]),L=Object(r.useCallback)((()=>{T(w,{startAt:n})}),[n,w,T]);return I?o.a.createElement(hg,{shouldHideImage:!0,onClick:L}):o.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.filmstrip-panel"},o.a.createElement(Dg.a,{offset:t,animate:l,onSize:_,onScroll:x,mediaClientConfig:j,featureFlags:Object(Qg.a)()},M(A)))};Ih.displayName="AttachmentFilmstrip";var Th=kt()([Vg,Gg,I.injectIntl,Object(zs.a)((e=>({onCardCoverShow:()=>{e("card-cover-show.click")},onCardCoverHide:()=>{e("card-cover-hide.click")}}))),Object(Ag.a)({externalId:"issue.attachment.card"}),Object(c.connect)((e=>({mediaContext:Object(R.a)(e),isMobile:Object(M.r)(e),cardCover:Object(Jg.c)(e)?Object(Jg.a)(e):null,isPreview:Object(L.s)(e)})),(e=>({
onCardCoverShow:(t,s)=>{e(Object(qg.d)(t,s))},onCardCoverHide:t=>{e(Object(qg.d)(t))},onScrollToComments:()=>{e(zg())},onScrollToWorklogs:()=>{e(Yg())}}))),Object(Xs.a)()])(Ih),_h=n("./src/packages/platform/ui/error-boundary/src/index.js"),Ph=n("./node_modules/@atlaskit/media-table/dist/es2019/component/mediaTable.js"),xh=n("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),Dh=n("./src/packages/accessibility/src/common/ui/screenreader-text/styled.js"),Ah=n("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js"),Mh=n("./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg"),Lh=n.n(Mh),Rh=Object(I.defineMessages)({emptyStateTitle:{id:"issue-attachments-table.empty.empty-state-title",defaultMessage:"All your attachments in one place"},emptyStateDescription:{id:"issue-attachments-table.empty.empty-state-description",
defaultMessage:"Attachments can be added to paragraph fields, comments, and worklog entries. When you have attachments on this issue, you can view and download them here."}});const Nh=()=>{const{formatMessage:e}=Object(qe.c)();return o.a.createElement(Ia.a,{imageUrl:Lh.a,header:e(Rh.emptyStateTitle),description:e(Rh.emptyStateDescription)})};Nh.displayName="NoAttachments";var Fh=Nh,Uh=Object(I.defineMessages)({fileName:{id:"issue-attachments-table.file-name",defaultMessage:"Name"},size:{id:"issue-attachments-table.size",defaultMessage:"Size"},date:{id:"issue-attachments-table.date",defaultMessage:"Date added"},loadingAriaLabel:{id:"issue-attachments-table.loading-aria-label",defaultMessage:"loading attachments"},loadedAriaLabel:{id:"issue-attachments-table.loaded-aria-label",defaultMessage:"Attachments table loaded. Press tab to enter the table"},internalOnlyLabel:{id:"issue-attachments-table.internal-only-label",defaultMessage:"Internal only"}});const Vh=ee.default.span.withConfig({
componentId:"sc-1du3joh-0"})`white-space:nowrap;`,Kh=ee.default.div.withConfig({componentId:"sc-1du3joh-1"})`margin:0 -${te.e}px;min-width:calc(100% + ${2*te.e}px);.${"jira-issue-view-attachments-table"} &{opacity:0;}.${"jira-issue-view-attachments-table"}:hover &,.${"jira-issue-view-attachments-table"}:focus &,.${"jira-issue-view-attachments-table"}:focus-within &{opacity:1;}`,$h=ee.default.div.withConfig({componentId:"sc-1du3joh-2"})`display:flex;flex-direction:column;align-items:center;.${"media-table-row-highlighted"}{background-color:${Ze.a.Y50};&:hover{background-color:${Ze.a.Y75};}button:hover{background:${Ze.a.Y100};}}`;var Wh=n("./node_modules/moment/moment.js"),Bh=n.n(Wh),Hh=n("./node_modules/@atlaskit/media-client/dist/es2019/index.js"),Gh=n("./node_modules/@atlaskit/media-ui/dist/es2019/humanReadableSize.js");const qh="date",zh="deleteOrGoto",Yh="download",Qh="file",Jh="size";var Zh=Object(I.defineMessages)({delete:{id:"issue-attachments-table.delete-button.delete",
defaultMessage:"Delete attachment"}});function Xh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ey(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xh(Object(s),!0).forEach((function(t){ty(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const sy=({attachmentId:e,onDeleteAttachment:t})=>{const s=Object(qe.c)(),{createAnalyticsEvent:n}=Object(sr.a)(),a=Object(r.useCallback)((s=>{s.stopPropagation();const a=n({action:"clicked",actionSubject:"button"});Object(Ki.h)(a,"deleteAttachment"),t(e)
}),[e,n,t]),i=Object(r.useCallback)((e=>{"Enter"===e.key&&e.stopPropagation()}),[]);return o.a.createElement(Rr.a,{appearance:"subtle",iconAfter:o.a.createElement(Xg.a,{label:s.formatMessage(Zh.delete)}),onClick:a,onKeyPress:i,theme:(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t);return ey({buttonStyles:ey(ey({},s),{},{display:"flex",justifyContent:"center","&:hover":{background:"#DFE1E6"},margin:"0"})},n)}})};sy.displayName="DeleteButton";var ny=sy,ay=n("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),iy=n.n(ay);const ry=ee.default.div.withConfig({componentId:"sc-7t3fe4-0"})`display:flex;align-content:center;align-items:center;padding-right:4px;`,oy=()=>{const{formatMessage:e}=Object(qe.c)(),t=e(Uh.internalOnlyLabel);return o.a.createElement(Re.a,{content:t},o.a.createElement(ry,null,o.a.createElement(iy.a,{primaryColor:Ze.a.DN80A,label:t})))};oy.displayName="InternalAttachmentIcon"
;var cy=oy,ly=n("./node_modules/@atlaskit/media-ui/dist/es2019/media-type-icon.js"),dy=n("./node_modules/@atlaskit/media-ui/dist/es2019/truncateText.js");const uy=ee.default.div.withConfig({componentId:"sc-7cs18z-0"})`display:flex;align-content:center;align-items:center;`,py=ee.default.div.withConfig({componentId:"sc-7cs18z-1"})`min-width:0;width:100%;span:first-of-type{&::first-letter{text-transform:capitalize;}}`,my=({mediaType:e,icon:t,text:s,startFixedChars:n,endFixedChars:a})=>o.a.createElement(uy,null,e&&o.a.createElement(ly.b,{type:e}),t,o.a.createElement(py,null,o.a.createElement(Re.a,{content:s},o.a.createElement(dy.a,{text:s,startFixedChars:n,endFixedChars:a}))));my.displayName="NameCell";var fy=my;function by(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gy(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?by(Object(s),!0).forEach((function(t){hy(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):by(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hy(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const yy=(e,t,s,{formatMessage:n})=>o.a.createElement("div",{"aria-label":`${e} ${s?`- ${n(Uh.internalOnlyLabel)}`:""}`},o.a.createElement(Vh,{"aria-hidden":!0},o.a.createElement(fy,{text:e,mediaType:Object(Hh.getMediaTypeFromMimeType)(null==t?"":t),startFixedChars:3,endFixedChars:4,icon:s?o.a.createElement(cy,null):void 0})));yy.displayName="createNameCell";const Oy=(e,t,s,n,a,i,r,c,l)=>t===eh.b?n?o.a.createElement(Kh,null,o.a.createElement(ny,{attachmentId:e,onDeleteAttachment:a})):null:c?null:o.a.createElement(Kh,null,o.a.createElement(ph,{attachmentParent:t,
attachmentParentId:s,attachmentView:th,onScrollToComments:i,onScrollToWorklogs:r,issueKey:l}));Oy.displayName="createDeleteOrGoToCell";const jy=e=>void 0===e||e>=430,vy=Object(Zc.a)(((e,t,s,n,a,i,r,o,c,l)=>{const d=jy(t);return e.map((e=>({data:gy(gy({file:yy(e.filename,e.mimetype,e.isParentCommentJsdInternal,l),date:Bh()(1e3*e.createdDate).locale(s).format("DD MMM YYYY h:mma")},d?{size:Object(Gh.a)(e.filesize)}:{}),{},{deleteOrGoto:Oy(e.id,e.parentName,e.parentId,a[e.id],n,r,i,o,c)}),identifier:{mediaItemType:"file",id:e.mediaApiFileId},rowProps:{className:e.isParentCommentJsdInternal?"media-table-row-highlighted":""}})))})),Ey=e=>{
const{viewMediaClientConfig:t,onPreviewOpen:s=d.a,onPreviewClose:n=d.a,onDeleteAttachment:a,canDeleteAttachmentMap:i,onScrollToComments:c=d.a,onScrollToWorklogs:l=d.a,isInModal:u=!1}=e,p=Object(qe.c)(),{createAnalyticsEvent:m}=Object(sr.a)(),f=Object(r.useRef)(!1),b=Object(cs.g)(),[{error:g,loading:h,meta:y,value:O},j]=Object(yn.a)(b),{orderDirection:v,orderField:E,startAt:w}=y,{attachments:k,totalCount:C}=O,{refreshAttachments:S,setOrderDirection:I,setOrderField:T}=j,_=Object(Zc.a)(_g()(S,50)),P=Object(r.useMemo)((()=>Math.ceil((w+1)/6)),[w]),[x,D]=Object(r.useState)(P),[A,M]=Object(r.useState)(void 0),L=_g()(M,100),R=Object(r.useCallback)((()=>{S(b,{orderDirection:v,orderField:E,startAt:6*(P-1)})}),[b,v,E,P,S]),N=Object(r.useCallback)((e=>{f.current=!0,D(e),_(b,{orderDirection:v,orderField:E,startAt:6*(e-1)})}),[_,b,v,E]),F=Object(r.useCallback)(((e,t)=>{f.current=!0;const s=(e=>{switch(e){case Jh:return eh.e.FILESIZE;case Qh:return eh.e.FILENAME;default:return eh.e.CREATED}
})(e),n=m({action:"sorted",actionSubject:"dynamicTable"});T(s),I(t),Object(Ki.h)(n,"issueAttachments",{key:e}),_(b,{orderDirection:t,orderField:s})}),[m,_,b,I,T]),U=Object(Ah.a)();if(g)return o.a.createElement(hg,{shouldHideImage:e.shouldHideErrorImage,onClick:R});if(0===C)return o.a.createElement(Fh,null);const V=vy(k||[],A,U,a,i,l,c,u,b,p),K=((e,{formatMessage:t})=>({cells:[{key:Qh,content:o.a.createElement(Vh,null,t(Uh.fileName)),isSortable:!0},...jy(e)?[{key:Jh,content:t(Uh.size),isSortable:!0,inlineStyles:{width:"66px"}}]:[],{key:qh,content:t(Uh.date),isSortable:!0,inlineStyles:{width:"188px"}},{key:zh,content:"",inlineStyles:{width:"36px"},width:10},{key:Yh,content:"",inlineStyles:{width:"48px"}}]}))(A,p),$=(e=>{switch(e){case eh.e.FILESIZE:return Jh;case eh.e.FILENAME:return Qh;case eh.e.CREATED:return qh;default:return}})(E);return o.a.createElement(o.a.Fragment,null,o.a.createElement(xh.a,{offscreen:!0,setWidth:e=>{L(e)}
}),h&&o.a.createElement(o.a.Fragment,null,f.current&&o.a.createElement(Dh.a,{"aria-live":"assertive"},p.formatMessage(Uh.loadingAriaLabel)),o.a.createElement(Ig,{pageNumber:x,totalCount:C})),!h&&o.a.createElement(o.a.Fragment,null,f.current&&o.a.createElement(Dh.a,{"aria-live":"assertive"},p.formatMessage(Uh.loadedAriaLabel)),o.a.createElement($h,null,o.a.createElement(Ph.a,{items:V,mediaClientConfig:t,columns:K,itemsPerPage:6,totalItems:C||0,pageNumber:P,onSetPage:N,onSort:F,sortKey:$,sortOrder:v,onPreviewOpen:s,onPreviewClose:n,rowProps:{className:"jira-issue-view-attachments-table"}}))))};Ey.defaultProps={shouldHideErrorImage:!1};var wy=Vg(Ey,th);const ky=ee.default.div.withConfig({componentId:"sc-1oufxv0-0"})`padding:${te.e/2}px;min-width:${37*te.e}px;position:relative;table{width:100%;}`,Cy=({viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})=>o.a.createElement(_h.b,{id:"issue.details.attachment.list-view"},o.a.createElement(ky,null,o.a.createElement(wy,{
shouldHideErrorImage:!0,viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})));Cy.displayName="ListView";const Sy=Gg(Cy);var Iy=Object(c.connect)((e=>({issueKey:Object(M.x)(e),mediaContext:Object(R.a)(e)})),(e=>({onScrollToComments:()=>e(zg()),onScrollToWorklogs:()=>e(Yg())})))(Sy);var Ty=({attachmentError:e,refreshAttachments:t,isPreview:s,totalCount:n})=>{const[a]=Object(ju.b)("jira.user.issue.attachment.view"),i=Object(cs.g)(),c=Object(r.useCallback)((()=>{t(i)}),[i,t]);if(e)return o.a.createElement(hg,{shouldHideImage:!0,onClick:c});switch(a){case"list-view":return s?o.a.createElement(Ig,{totalCount:n}):o.a.createElement(Iy,null);case"strip-view":default:return o.a.createElement(Th,null)}},_y=Object(c.connect)((e=>({isPreview:Object(L.s)(e)
})),{})(Ty),Py=n("./node_modules/@atlaskit/icon/glyph/warning.js"),xy=n.n(Py),Dy=n("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),Ay=n("./src/packages/platform/ui/flags/src/services/index.js"),My=n("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js");const Ly=Object(Hp.a)(My.a,{selector:e=>e.meta.isDeleteAllDialogOpen}),Ry={isDeleting:!1,didDelete:!1,error:void 0};var Ny=Object(I.defineMessages)({heading:{id:"attachments.delete-all-dialog.heading",defaultMessage:"Delete attachments"},deleteDetailsMessage:{id:"attachments.delete-all-dialog.delete-details-message",defaultMessage:"You can't delete {nonDeletableCount} of these attachments. Either you don't have permission, or they're in issue fields and comments."},deletingAllAttachmentsMessage:{id:"attachments.delete-all-dialog.deleting-all-attachments",defaultMessage:"This action will permanently delete all {deletableCount} attachments in the attachments panel."},
deletingAllAttachmentsMessageSingle:{id:"attachments.delete-all-dialog.deleting-all-attachments-single",defaultMessage:"This action will permanently delete the 1 attachment in the attachments panel."},deletingSomeAttachmentsMessage:{id:"attachments.delete-all-dialog.deleting-some-attachments",defaultMessage:"This action will permanently delete all other attachments in the attachments panel."},cancelButton:{id:"attachments.delete-all-dialog.cancel-button-label",defaultMessage:"Cancel"},deleteButton:{id:"attachments.delete-all-dialog.delete-button-label",defaultMessage:"Delete"},deletingButton:{id:"attachments.delete-all-dialog.deleting-button-label",defaultMessage:"Deleting"},deleteAllFailedNotificationTitle:{id:"attachments.delete-all-dialog.delete-all-failed-notification-title",defaultMessage:"We couldn\u2019t delete all your attachments"},deleteAllFailedNotificationDescription:{id:"attachments.delete-all-dialog.delete-all-failed-notification-description",
defaultMessage:"We didn\u2019t finish deleting all your attachments for {issueKey}. Check your connection and then try again."}});const Fy=ee.default.div.withConfig({componentId:"sc-13kkzqd-0"})`background-color:${Ze.a.Y50};display:flex;margin-bottom:${2*te.e}px;padding:${te.e}px;`,Uy=ee.default.div.withConfig({componentId:"sc-13kkzqd-1"})`padding-left:${te.e}px;`,{safeErrorWithoutCustomerData:Vy}=v.a,Ky=()=>{const e=Object(cs.g)(),{formatMessage:t}=Object(qe.c)(),{createAnalyticsEvent:s}=Object(sr.a)(),[{value:{totalCount:n,deletableCount:a}},{refreshAttachments:i}]=Object(yn.a)(e),[c,{setDeleteAllDialogOpen:l}]=Ly(),{showFlag:d}=Object(Ay.f)(),[{isDeleting:u,error:p},m]=(e=>{const[t,{setDeleteAllDialogOpen:s}]=Ly(),[,{refreshAttachments:n}]=Object(yn.b)(),[a,i]=Object(r.useState)(Ry);return Object(r.useEffect)((()=>{t||i(Ry)}),[t]),[a,Object(r.useCallback)((async()=>{i({isDeleting:!0,didDelete:!1,error:void 0});try{
await Object(Yc.a)(((e,t)=>`${""}/rest/api/2/issue/${t}/attachments`)(0,e)),s(!1),n(e),i({isDeleting:!1,didDelete:!0,error:void 0})}catch(t){i({isDeleting:!1,didDelete:!1,error:t})}}),["",e,n,s])]})(e),f="number"==typeof a?a:0,b="number"==typeof n?n:0,g=f===b;Object(r.useEffect)((()=>{p&&(Vy("issue.attachments.delete-all",p.message||p.toString()),Object(Dy.a)({error:p,meta:{id:"deleteAllDialog",packageName:"jiraIssueView",teamName:"bento"}}),d({type:"error",title:Ny.deleteAllFailedNotificationTitle,description:[Ny.deleteAllFailedNotificationDescription,{issueKey:e}],isAutoDismiss:!0}))}),[p,e,d]);const h=Object(r.useCallback)((()=>{const t=m(),n=s({action:"submitted",actionSubject:"form"});Object(Ki.h)(n,"deleteAllAttachmentsDialog",{deletableCount:f}),t&&i(e)}),[s,f,e,m,i]),y=Object(r.useCallback)((()=>{l(!1);const e=s({action:"closed",actionSubject:"modalDialog"});Object(Ki.h)(e,"deleteAllAttachmentsDialog",{deletableCount:f})
}),[s,f,l]),O=Object(r.useCallback)((()=>g?1===f?t(Ny.deletingAllAttachmentsMessageSingle):t(Ny.deletingAllAttachmentsMessage,{deletableCount:f}):t(Ny.deletingSomeAttachmentsMessage)),[g,f,t]);return"number"==typeof b&&0!==f&&c?o.a.createElement(Y.f,null,o.a.createElement(Y.g,{actions:[{text:t(u?Ny.deletingButton:Ny.deleteButton),onClick:h,isDisabled:u},{text:t(Ny.cancelButton),onClick:y}],heading:t(Ny.heading),appearance:"danger",width:"small",onClose:y,shouldCloseOnOverlayClick:!0,isHeadingMultiline:!1,body:()=>o.a.createElement(Y.b,null,!g&&o.a.createElement(Fy,null,o.a.createElement(xy.a,{primaryColor:Ze.a.Y500,label:""}),o.a.createElement(Uy,null,t(Ny.deleteDetailsMessage,{nonDeletableCount:b-f}))),o.a.createElement("p",null,O()))})):null};Ky.displayName="Dialog"
;var $y=Object(r.memo)(Ky),Wy=n("./src/packages/issue/issue-view/src/selectors/attachment-selector.js"),By=n("./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js"),Hy=Object(I.defineMessages)({title:{id:"attachments.heading.title",defaultMessage:"Attachments {totalCount}"},attachmentsMenuAriaLabel:{id:"attachments.heading.attachmentsMenuLabel",defaultMessage:"Attachments Menu"},addAttachmentAriaLabel:{id:"attachments.heading.addAttachmentLabel",defaultMessage:"Add Attachment"}});const Gy=ee.default.div.withConfig({componentId:"rljhjo-0"})`margin-left:${.75*te.e}px;`,qy=({canCreateAttachment:e,onClick:t})=>{const{createAnalyticsEvent:s}=Object(sr.a)(),{formatMessage:n}=Object(qe.c)(),a=Object(r.useCallback)((()=>{t();const e=s({action:"clicked",actionSubject:"button"});Object(Ki.h)(e,"addAttachment")}),[s,t]);return e?o.a.createElement(Gy,null,o.a.createElement(By.a,{label:n(Hy.addAttachmentAriaLabel),onClick:a})):null};qy.displayName="AddAttachments"
;var zy=Object(c.connect)((e=>({canCreateAttachment:!Object(M.t)(e)&&Object(Wy.b)(e)})),(e=>({onClick:()=>e(Object(bn.b)())})))(qy),Yy=Object(I.defineMessages)({deleteAll:{id:"attachments.heading.delete-all",defaultMessage:"Delete all"}});const Qy=()=>{const e=Object(cs.g)(),{formatMessage:t}=Object(qe.c)(),{createAnalyticsEvent:s}=Object(sr.a)(),[{value:n}]=Object(yn.a)(e),[,{setDeleteAllDialogOpen:a}]=Ly();if("number"!=typeof n.deletableCount||n.deletableCount<=0)return null;const{deletableCount:i}=n;return o.a.createElement(wr.a,{key:"delete-all-attachments",onClick:()=>{a(!0);const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(Ki.h)(e,"deleteAllAttachmentsDialog",{deletableCount:i})}},t(Yy.deleteAll))};Qy.displayName="DeleteAllItem"
;var Jy=Qy,Zy=n("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),Xy=n("./node_modules/file-saver/FileSaver.js"),eO=n("./src/packages/platform/utils/fetch/src/utils/errors.js"),tO=n("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),sO=n("./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js");const nO=Object(Hp.a)(My.a,{selector:(e,t)=>((e,t)=>e.issueAttachments[t]||sO.c)(e,t).isDownloading});var aO=Object(I.defineMessages)({downloadAll:{id:"attachments.heading.download-all",defaultMessage:"Download all"},downloading:{id:"attachments.heading.downloading",defaultMessage:"Downloading attachments"}});const iO=Object(r.memo)((e=>{const{issueId:t,issueKey:s}=e,{formatMessage:n}=Object(qe.c)(),{createAnalyticsEvent:a}=Object(sr.a)();if(!t)return null;const[{value:{totalCount:i}}]=Object(yn.a)(s),[c,l]=((e,t)=>{
const s=`${t}_attachments.zip`,[n,{setIsDownloading:a}]=nO(t),i=`/secure/issueAttachments/${e}.zip`,{createAnalyticsEvent:o}=Object(sr.a)(),{showFlag:c,dismissFlag:l}=Object(Ay.f)(),d=Object(r.useRef)();let u=Object(r.useCallback)((()=>{}),[]);const p=Object(r.useCallback)((()=>{d.current&&l(d.current)}),[l]),m=Object(r.useCallback)(((e,s)=>{let n=null,i=e.toString();e instanceof eO.b&&(n=e.statusCode,i=e.message),a(t,!1),Object(Dy.a)({error:e,meta:{id:s,packageName:"jiraIssueAttachmentsBase",teamName:"bento"}}),pa.h.safeErrorWithoutCustomerData("issue.attachments.download-all",i);const r=500===n?tO.a.downloadFailedExceedFileSizeDescription:tO.a.downloadFailedDescription;d.current=c({type:"error",title:tO.a.downloadFailedTitle,description:[r,{issueKey:t}],actions:[{onClick:u,content:tO.a.tryAgain}]})}),[t,u,a,c]),f=Object(r.useCallback)((async()=>{a(t,!0),Object(Ki.b)(o({}),"downloadAll requested"),c({type:"success",title:tO.a.downloadStartTitle,
description:tO.a.downloadStartDescription,isAutoDismiss:!0}),fetch(i).then((e=>{if(!e.ok)throw new eO.b(e.status,e.statusText);return Object(Ki.b)(o({}),"downloadAll started"),e.blob()})).then((e=>{try{Object(Xy.saveAs)(e,s),a(t,!1),Object(Ki.b)(o({}),"downloadAll completed")}catch(n){m(n,"useDownloadAllService-save-file")}})).catch((e=>m(e,"useDownloadAllService-fetch")))}),[o,s,t,m,i,a,c]);return u=Object(r.useCallback)((()=>{f(),p()}),[f,p]),[n,f]})(t,s),d=Object(r.useCallback)((()=>{l();const e=a({action:"clicked",actionSubject:"dropdownItem"});Object(Ki.h)(e,"downloadAllAttachments",{totalMedia:i})}),[a,l,i]);return o.a.createElement(wr.a,{key:"download-all-attachments",onClick:d,elemAfter:o.a.createElement(Zy.a,null,i),isDisabled:c},n(c?aO.downloading:aO.downloadAll))}));var rO=Object(c.connect)((e=>({issueId:Object(M.w)(e),issueKey:Object(M.x)(e)})),{})(iO),oO=Object(I.defineMessages)({switchToListView:{id:"attachments.heading.switch-to-listView",
defaultMessage:"Switch to list view"},switchToStripView:{id:"attachments.heading.switch-to-strip-view",defaultMessage:"Switch to strip view"}});var cO=Object(r.memo)((({refreshAttachments:e})=>{const t=Object(cs.g)(),{formatMessage:s}=Object(qe.c)(),[n,{setValue:a}]=Object(ju.b)("jira.user.issue.attachment.view"),{createAnalyticsEvent:i}=Object(sr.a)(),c=Object(r.useCallback)((s=>()=>{a(s),e(t);const n=i({action:"clicked",actionSubject:"dropdownItem"});Object(Ki.h)(n,"switchAttachmentsView",{view:s})}),[i,t,e,a]);switch(n){case"list-view":return o.a.createElement(wr.a,{onClick:c("strip-view")},s(oO.switchToStripView));case"strip-view":default:return o.a.createElement(wr.a,{onClick:c("list-view")},s(oO.switchToListView))}}));var lO=({refreshAttachments:e,isPreview:t})=>{const{formatMessage:s}=Object(qe.c)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(Cm.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:o.a.createElement(Im.a,{
size:"small",label:s(Hy.attachmentsMenuAriaLabel)}),isDisabled:t},position:"bottom right"},o.a.createElement(fr.a,null,o.a.createElement(cO,{refreshAttachments:e}),o.a.createElement(rO,null),o.a.createElement(Jy,null))),o.a.createElement($i.a,{onMount:e=>Object(Ki.b)(e,"AttachmentListViewOnboarding mounted")}))},dO=Object(c.connect)((e=>({isPreview:Object(L.s)(e)})),{})(lO);var uO=({totalCount:e,refreshAttachments:t})=>{const{formatMessage:s}=Object(qe.c)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(Si.e,null,s(Hy.title,{totalCount:e>0?`(${e})`:""})),o.a.createElement(Si.d,null,o.a.createElement(dO,{refreshAttachments:t}),o.a.createElement(zy,null)))};const pO=()=>{const e=Object(cs.g)(),[{error:t,value:{totalCount:s}},{refreshAttachments:n}]=Object(yn.a)(e);return 0===s?null:o.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.panel"},o.a.createElement(Si.c,null,o.a.createElement(uO,{totalCount:s,refreshAttachments:n
})),o.a.createElement(_y,{attachmentError:t,totalCount:s,refreshAttachments:n}),o.a.createElement($y,null))};pO.displayName="Attachments";const mO=()=>o.a.createElement($.a,{id:"issue.base.content.attachments-panel"},o.a.createElement(W.a,{id:"base.content.attachments-panel",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},o.a.createElement(pO,null)));mO.displayName="AttachmentsWithMonitoring";var fO=mO;const bO=(e,t)=>({type:"CHILD_ISSUE_ADD_SUCCESS",payload:{childIssue:e,fieldsData:t}}),gO=()=>({type:"CHILD_ISSUE_PANEL_ADD_CLICKED"});var hO=n("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js");const yO=Object(zn.createSelector)(L.H,(e=>e.childPanel)),OO=Object(zn.createSelector)(yO,(e=>e.subtaskQuickAddClickCount)),jO=Object(zn.createSelector)(yO,(e=>e.issueInEpicQuickAddClickCount)),vO=Object(zn.createSelector)(yO,(e=>e.childIssueQuickAddClickCount));var EO=n("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js")
;const wO="CHILD_ISSUE_ADDED",kO="ISSUE_CHILDREN_ORDER_CHANGED",CO={[wO]:wO,[kO]:kO};var SO=n("./src/packages/platform/utils/app-base/src/index.js"),IO=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),TO=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),_O=n("./src/packages/platform/ui/flags/src/ui/dispatcher/index.js"),PO=n("./src/packages/platform/utils/shallow-equal/src/index.js"),xO=n("./src/packages/platform/services/issue/src/components/context/consumer.js"),DO=Object(I.defineMessages)({linkParentErrorTitle:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-title",defaultMessage:"We couldn't link the child issue"},linkParentErrorDescription:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."},reorderErrorTitle:{
id:"issue.views.common.child-issues-panel.flags.reorder-error-title",defaultMessage:"We couldn't reorder those issues"},reorderErrorDescription:{id:"issue.views.common.child-issues-panel.flags.reorder-error-description",defaultMessage:"Wait a few moments, then give it another try."}}),AO=e=>{switch(e.type){case"state.entities.LINK_PARENT_FAILURE":return{type:"error",title:DO.linkParentErrorTitle,description:DO.linkParentErrorDescription};case"state.entities.REORDER_CHILDREN_FAILED":return{type:"error",title:DO.reorderErrorTitle,description:DO.reorderErrorDescription};default:return}};const MO=e=>({setState:t})=>{t({sortableIssueIds:e})},LO=e=>({setState:t})=>{t({sortBy:e})},RO=Object(Bp.a)({name:"child-issues",initialState:{sortableIssueIds:[],sortBy:null},actions:a}),NO=Object(Hp.a)(RO,{selector:e=>e.sortableIssueIds}),FO=Object(Hp.a)(RO,{selector:e=>e.sortBy}),UO=Object($r.a)(RO),VO=()=>{const[e,{setSortableIssueIds:t}]=NO(),s=Object(r.useCallback)((e=>t(e)),[t])
;return[e,Object(r.useMemo)((()=>({setSortableIssueIds:s})),[s])]},KO=()=>{const[e,{setSortBy:t}]=FO(),s=Object(r.useCallback)((e=>{t(e)}),[t]);return[e,Object(r.useMemo)((()=>({setSortBy:s})),[s])]},$O=["fields"];function WO(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function BO(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?WO(Object(s),!0).forEach((function(t){HO(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):WO(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function HO(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function GO(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const qO=["summary","issuetype","parent","project"],zO=e=>!!Object.keys(e).find((t=>!(e=>qO.find((t=>e===t)))(t)&&!e[t].hasDefaultValue&&e[t].required));var YO=n("./node_modules/redux-observable/lib/es/index.js")
;const QO=e=>e.context,JO=e=>e.entities,ZO=e=>e.ui,XO=Object(zn.createSelector)(JO,(e=>e.issues||[])),ej=Object(zn.createSelector)(XO,(e=>e.filter((e=>"DONE"===e.statusCategory)))),tj=Object(zn.createSelector)(XO,(e=>e.filter((e=>"DONE"!==e.statusCategory)))),sj=Object(zn.createSelector)(XO,(e=>e.filter((e=>"IN_PROGRESS"===e.statusCategory)))),nj=Object(zn.createSelector)(JO,(e=>e.issueHierarchyLevel)),aj=e=>Object(zn.createSelector)(XO,(t=>qs()(t,(t=>t.id===e)))),ij=Object(zn.createSelector)(JO,(e=>e.issueTypes)),rj=Object(zn.createSelector)(ij,(e=>`issuetype in (${e.map((e=>e.id)).join(",")})`)),oj=Object(zn.createSelector)(ZO,(e=>e.addClickCount)),cj=Object(zn.createSelector)(ZO,(e=>e.childPanelView)),lj=Object(zn.createSelector)(ZO,(e=>e.childCreateSummary)),dj=Object(zn.createSelector)(ZO,ij,((e,t)=>e.selectedIssueType||t[0])),uj=Object(zn.createSelector)(ZO,(e=>e.hideDone)),pj=Object(zn.createSelector)(ZO,(e=>e.fetchIssueTypesStatus)),mj=Object(zn.createSelector)(pj,(e=>"COMPLETE"===e)),fj=Object(zn.createSelector)(QO,(e=>e.baseUrl)),bj=(Object(zn.createSelector)(QO,(e=>e.locale)),
Object(zn.createSelector)(QO,(e=>e.childIssuesPanelType))),gj=Object(zn.createSelector)(bj,(e=>!!e&&"classicSubtasks"===e)),hj=Object(zn.createSelector)(bj,(e=>!!e&&"classicProjectEpicChildren"===e)),yj=Object(zn.createSelector)(bj,(e=>!!e&&"nextGenChildren"===e)),Oj=Object(zn.createSelector)(QO,(e=>e.supportsIssueCreation)),jj=Object(zn.createSelector)(QO,mj,((e,t)=>e.requiresFullCreate||!t)),vj=Object(zn.createSelector)(QO,(e=>e.parentKey)),Ej=Object(zn.createSelector)(QO,(e=>e.parentId)),wj=Object(zn.createSelector)(QO,(e=>e.customFieldIdRank)),kj=Object(zn.createSelector)(QO,(e=>e.epicLinkFieldKey)),Cj=Object(zn.createSelector)(QO,(e=>e.projectId)),Sj=Object(zn.createSelector)(QO,(e=>e.messages||{})),Ij=Object(zn.createSelector)(Sj,(e=>e.title)),Tj=Object(zn.createSelector)(Sj,(e=>e.noValueText||null)),_j=Object(zn.createSelector)(QO,(e=>e.onNavigateToNewIssue)),Pj=Object(zn.createSelector)(QO,(e=>e.onChange)),xj=(Object(zn.createSelector)(QO,(e=>e.isIssueViewComplete)),
Object(zn.createSelector)(QO,(e=>null===e.user||""===e.user))),Dj=Object(zn.createSelector)(QO,(e=>e.projectType)),Aj=Object(zn.createSelector)(QO,(e=>e.application)),Mj=Object(zn.createSelector)(QO,(e=>e.edition)),Lj=e=>"nextGenChildren"===e||"classicProjectEpicChildren"===e,Rj=Object(zn.createSelector)(bj,Lj);var Nj=(e,t)=>e.ofType("state.entities.LINK_CHILD_SUCCESS","state.entities.REORDER_CHILDREN_REQUEST","state.entities.REORDER_CHILDREN_FAILED","state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS").do((e=>{try{const s=t.getState(),n=Pj(s),a=bj(s);switch(e.type){case"state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS":n({type:CO.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.childIssue,fieldsData:e.payload.fieldsData}});break;case"state.entities.LINK_CHILD_SUCCESS":n({type:CO.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.linkedChild}});break;case"state.entities.REORDER_CHILDREN_REQUEST":{
const{currentOrder:t,newOrder:s,currentIndex:i,newIndex:r}=e.payload,{id:o}=t[i],c=o?[Object(Vr.k)(o)]:[],l=r>i,d=Number((s[l?r-1:r+1]||{}).id);"nextGenChildren"===a&&n({type:CO.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:c,rankId:d,isRankAfter:l}});break}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:t,originalIndex:s,newIndex:i}=e.payload,{id:r}=t[s],o=r?[Object(Vr.k)(r)]:[],c=s>i,l=Number((t[c?s-1:s+1]||{}).id);"nextGenChildren"===a&&l&&n({type:CO.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:o,rankId:l,isRankAfter:c}});break}}}catch(s){pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.change-notification","Failed to call onChange callback",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}})).ignoreElements(),Fj=n("./node_modules/rxjs/Rx.js");const Uj=(e,t)=>({type:"state.entities.CREATE_CHILD_REQUEST",payload:{optimisticUiChildIssue:e},meta:{analyticsEvent:t}}),Vj=(e,t,s,n=!1)=>({
type:"state.entities.CREATE_CHILD_SUCCESS",payload:{optimisticId:e,createdChild:t,usedGlobalCreateDialog:n},meta:{analyticsEvent:s}}),Kj=(e,t,s)=>({type:"state.entities.LINK_CHILD_SUCCESS",payload:{issueId:e,linkedChild:t},meta:{analyticsEvent:s}}),$j=e=>({type:"state.entities.LINKING_ISSUE_RETRY_FAILURE",payload:{issueId:e}}),Wj=e=>({type:"state.entities.FETCH_SINGLE_CHILD_SUCCESS",payload:{childIssue:e}}),Bj=()=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST"}),Hj=(e,t,s,n)=>({type:"state.entities.REORDER_CHILDREN_FAILED",payload:{originalOrder:e,newOrder:t,originalIndex:s,newIndex:n}}),Gj=e=>({type:"state.entities.REORDER_CHILDREN_SUCCESS",payload:{newOrder:e}});var qj=(e,t)=>e.ofType("state.entities.CHILD_CREATED_IN_FULL_DIALOG").mergeMap((({payload:e,meta:s})=>{const n=t.getState(),{optimisticId:a,createdChild:i}=e;if(!yj(n))return Fj.Observable.of(Vj(a,i,s.analyticsEvent,!0));const r=fj(n),o=Cj(n),c=Ej(n)
;if(!o||!c)throw new Error("Attempted to link a child issue without a project or parent issue ID");return Fj.Observable.from(((e,t,s,n)=>Object(Yc.d)(`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`,{body:JSON.stringify({issueIds:[n]})}))(r,o,c,i.id)).map((()=>Vj(a,i,s.analyticsEvent,!0))).catch((e=>Fj.Observable.of(((e,t)=>({type:"state.entities.LINK_PARENT_FAILURE",payload:{optimisticId:e,error:t}}))(a,e))))})),zj=(e,t)=>e.ofType("state.entities.CREATE_CHILD_FAILURE","state.entities.LINK_PARENT_FAILURE","state.entities.LINKING_ISSUE_FAILURE").do((({type:e,payload:{error:s}})=>{const n=t.getState(),a=bj(n)||"unknown_child",i=Aj(n),r=Mj(n);"state.entities.CREATE_CHILD_FAILURE"===e&&"ValidationError"===s.name?Object(ua.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:a,application:i,edition:r}):"AbortError"===s.name||Object(eO.c)(s)||Object(ua.a)({experience:"createIssue",wasExperienceSuccesful:!1,analyticsSource:a,application:i,edition:r,
additionalAttributes:{traceId:s.traceId,errorMessage:`${e} ${s.message}`}})})).switchMap((()=>Fj.Observable.empty()));const Yj=(e,t,s)=>Object(Yc.e)(`${e}/rest/greenhopper/1.0/epics/${t}/add`,{body:JSON.stringify({ignoreEpics:!0,issueKeys:[s]})});var Qj=(e,t,s)=>((e,t)=>Object(Yc.d)(`${e}/rest/api/2/issue`,{body:JSON.stringify(t)}))(e,t).then((t=>({id:t.id,issueKey:t.key,issueLink:`${e}/browse/${t.key}`,issueSummary:s.issueSummary,issueTypeIconUrl:s.issueTypeIconUrl,issueTypeName:s.issueTypeName,assigneeUrl:s.assigneeUrl,assigneeDisplayName:s.assigneeDisplayName,isLoading:!1,errorType:void 0})));function Jj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zj(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Jj(Object(s),!0).forEach((function(t){Xj(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Jj(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Xj(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ev=(e,t)=>e.ofType("state.entities.CREATE_CHILD_REQUEST").mergeMap((({payload:e,meta:s})=>{const n=t.getState(),{optimisticUiChildIssue:a}=e;return((e,t,s)=>{const n=fj(e),a=Cj(e),i=Ej(e),r=gj(e),o=yj(e),c=hj(e),l=dj(e);if(!a||!i)throw new Error("Attempted to create a new child issue without a project or parent issue ID");const d=r||o,{hasEpicLinkField:u}=l,p=c&&u,m=kj(e),f={fields:Zj(Zj({project:{id:a},issuetype:{id:t.issueTypeId},summary:t.issueSummary},d?{parent:{id:i}}:{}),p&&m?{[m]:vj(e)}:{})};return Fj.Observable.from(Qj(n,f,t)).mergeMap((e=>c&&!u?Fj.Observable.from(Yj(n,i,e.id)).map((()=>Vj(t.id,e,s))).catch((s=>Fj.Observable.of(((e,t,s)=>({
type:"state.entities.LINKING_ISSUE_FAILURE",payload:{createdChild:e,optimisticId:t,error:s}}))(e,t.id,s)))):Fj.Observable.of(Vj(t.id,e,s)))).catch((e=>Fj.Observable.of(((e,t)=>({type:"state.entities.CREATE_CHILD_FAILURE",payload:{optimisticId:e,error:t}}))(t.id,e))))})(n,a,s.analyticsEvent)}));const tv=["isLoading","hasError"];function sv(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var nv=(e,t)=>e.ofType("state.entities.CREATE_CHILD_RETRY").map((({payload:{optimisticId:e},meta:s})=>{const n=t.getState(),a=aj(e)(n),{isLoading:i,hasError:r}=a,o=sv(a,tv);return Uj(o,s.analyticsEvent)
})),av=n("./src/packages/issue/issue-fetch-services/src/services/issue-graphql-data/index.js"),iv=n("./src/packages/issue/issue-view/src/common/service/issue/child-issue-transformer-new.js"),rv=n("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js"),ov=n("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),cv=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),lv=n("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js"),dv=n("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js");var uv=(e,t)=>Object(Yp.a)(Object(dv.d)(e),{method:"POST",body:JSON.stringify({
query:"\nquery fetchChildIssue($issueKey: String!) {\n  viewIssue(issueKey:$issueKey) {\n    issueId\n    fields {\n      __typename\n      ... on TextField {\n        fieldKey\n        textValue\n      }\n      ... on IssueKeyField {\n        stringValue\n      }\n      ... on IssueTypeField {\n        name\n        iconUrl\n      }\n      ... on StatusField {\n        statusId\n        name\n        statusCategoryId\n      }\n      ... on UserField {\n        fieldKey\n        userValue {\n          avatarUrl\n          displayName\n        }\n      }\n      ... on PriorityField {\n        name\n        iconUrl\n      }\n    }\n  }\n}\n",variables:{issueKey:t}})});function pv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}var fv=(e,t)=>{let s="",n="";const a={};return t.fields.forEach((e=>{switch(e.__typename){case"IssueKeyField":s=e.stringValue;break;case"TextField":"summary"===e.fieldKey&&(n=e.textValue);break;case"IssueTypeField":a.issueTypeIconUrl=e.iconUrl,a.issueTypeName=e.name;break;case"StatusField":a.statusId=e.statusId,a.statusName=e.name,a.statusCategoryId=e.statusCategoryId,a.statusCategory=Object(Ul.statusCategoryForId)(e.statusCategoryId);break;case"UserField":"assignee"===e.fieldKey&&e.userValue&&(a.assigneeUrl=e.userValue.avatarUrl,a.assigneeDisplayName=e.userValue.displayName);break;case"PriorityField":a.issuePriorityName=e.name,a.issuePriorityUrl=e.iconUrl}})),function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pv(Object(s),!0).forEach((function(t){mv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pv(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:Object(Vr.k)(t.issueId.toString()),issueKey:Object(Vr.m)(s),issueLink:Object(cv.f)(e,Object(Vr.m)(s)),isLoading:!1,issueSummary:n},a)};const bv=(e,t)=>{const s=e.get(t);return s?s.value:void 0};var gv=(e,t,s)=>{if(Object(Ts.isDataProviderRemovedFromChildIssuesEnabled)())return uv(t,s).then((({data:e,errors:s})=>{if(s&&!e)throw new Error(s[0].message);if(!e||!e.viewIssue)throw new Error("No issue view data.");return fv(t,e.viewIssue)}));if(!e){const e="No data provider instance.",t=new Error(e);throw pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.fetch-single-issue.no-data-provider",e,new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),t}
return((e,t)=>e.getIssue$(t,!0).toPromise().then((({error:e,issue:t})=>e?Promise.reject(e):t?Promise.resolve(t):Promise.reject(new Error("Unexpected response from the dataprovider, expected an issue or an error but got neither")))))(e,s).then((e=>{const{id:s,key:n,fields:a}=e,i=bv(a,"summary"),r=bv(a,"issuetype"),o=bv(a,"priority"),c=bv(a,"status"),l=bv(a,"assignee")||null;return{id:s?s.toString():"",issueKey:n,issueLink:Object(cv.f)(Object(Vr.c)(t),Object(Vr.m)(n)),issueSummary:i,issueTypeIconUrl:r&&r.iconUrl,issueTypeName:r&&r.name,issuePriorityUrl:o&&o.iconUrl,issuePriorityName:o&&o.name,statusName:c&&c.name,statusId:c&&c.id,statusCategory:c&&Object(Ul.statusCategoryForId)(c.statusCategory.id),statusCategoryId:c&&c.statusCategory.id,assigneeUrl:l&&Object(lv.c)(l).avatarUrl,assigneeDisplayName:l&&l.displayName,errorType:void 0,isLoading:!1}}))
},hv=n("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js"),yv=(e,t)=>((e,t)=>Object(hv.b)(e,t,["assignee"]).toPromise())(e,t).then((e=>e.map((({id:e,fields:t})=>({id:e,assigneeUrl:t&&t.assignee&&Object(lv.c)(t.assignee).avatarUrl,assigneeDisplayName:t&&t.assignee&&Object(lv.c)(t.assignee).displayName}))))),Ov=(e,t)=>e.ofType("state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST").switchMap((()=>{const e=t.getState(),s=fj(e),n=XO(e).map((e=>e.issueKey)).filter((e=>void 0!==e));return Fj.Observable.from(yv(s,n)).map((e=>(e=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS",payload:{issues:e}}))(e))).catch((e=>(pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.fetch-details-for-issues","Failed to fetch details for issues",new b.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Fj.Observable.empty())))}));const jv=(e,t,s)=>{const n=fj(t),a=Ej(t),i=aj(e)(t)
;if(!a)throw new Error("Attempted to link a next-gen issue to a parent without issue ID ");return Fj.Observable.from(((e,t,s)=>Object(Yc.e)(`${e}/rest/api/3/issue/${s}`,{body:JSON.stringify({fields:{parent:{id:t}}})}))(n,a,e)).map((()=>Kj(e,i,s))).catch((t=>(pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.add-existing-issue","Failed to link a next-gen issue to a parent",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),Fj.Observable.of($j(e)))))};var vv=Object(YO.combineEpics)(((e,t)=>e.ofType("state.entities.LINKING_ISSUE_RETRY").mergeMap((({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(bj(n)){case"classicProjectEpicChildren":{const t=fj(n),a=Ej(n),i=aj(e)(n);if(!a)throw new Error("Attempted to link a classic issue to an epic without a parent issue ID")
;return Fj.Observable.from(Yj(t,a,e)).map((()=>Kj(e,i,s))).catch((t=>(pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.link-child-issue","Failed to link a classic issue to a parent",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),Fj.Observable.of($j(e)))))}case"nextGenChildren":return jv(e,n,s);default:return Fj.Observable.empty()}}))),((e,t)=>e.ofType("state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST").mergeMap((({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(bj(n)){case"nextGenChildren":return jv(e,n,s);default:return Fj.Observable.empty()}})))),Ev=(e,t)=>{const{id:s,key:n,fields:a}=e;return{id:s,issueKey:n,issueLink:Object(cv.f)(Object(Vr.c)(t),Object(Vr.m)(n)),issueSummary:a.summary,issueTypeIconUrl:a.issuetype.iconUrl,issueTypeName:a.issuetype.name,issuePriorityUrl:a.priority&&a.priority.iconUrl||void 0,issuePriorityName:a.priority&&a.priority.name||void 0,
statusCategory:Object(Ul.statusCategoryForId)(a.status.statusCategory.id),statusCategoryId:a.status.statusCategory.id,statusName:a.status.name,statusId:a.status.id,assigneeUrl:a.assignee&&Object(lv.c)(a.assignee).avatarUrl,assigneeDisplayName:a.assignee&&Object(lv.c)(a.assignee).displayName,isLoading:!1,errorType:void 0}},wv=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),kv=n("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js");const Cv=e=>wv.a`query {
      issue(issueIdOrKey: "${e}", latestVersion: true, screen:"view", fields:"subtasks") {
        fields {
          key
          value
        }
      }
    }`,Sv=e=>{if(!e||!e.data||!e.data.issue)return[];const t=e.data.issue.fields.find((e=>"children-issues"===e.key));return t&&t.value?t.value.map((({id:e,key:t,self:s,fields:{assignee:n,issuetype:a,priority:i,summary:r,status:o}})=>({id:e,key:t,self:s,fields:{issueType:a,priority:i,status:o,summary:r,assignee:n}}))):[]};var Iv=(e,t)=>((e,t)=>Object(kv.a)((e=>`${e}/rest/graphql/1/`)(e),{method:"POST",body:JSON.stringify({query:Cv(t)})}))(e,t).map(Sv),Tv=n("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js");var _v=(e,t,s,n)=>((e,t,s,n)=>Object(Tv.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/after`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankAfterId:n})}))(e,t,s,n);var Pv=(e,t,s,n)=>((e,t,s,n)=>Object(Tv.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/before`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankBeforeId:n})}))(e,t,s,n);function xv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Dv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xv(Object(s),!0).forEach((function(t){Av(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Av(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Mv=n("./src/packages/platform/utils/fetch/src/utils.js"),Lv=(e,t)=>((e,t)=>Object(Yc.b)(`${e}/rest/api/2/issue/${t}?fields=subtasks`))(e,t).then((e=>{const t=e&&e.fields;return t&&t.subtasks||[]}));function Rv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Nv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Rv(Object(s),!0).forEach((function(t){Fv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Rv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Uv=(e,t)=>{const s=fj(e),n=Ej(e);if(!n)throw new Error("Attempted to reorder subtasks without parentId");const{currentOrder:a,newOrder:i,currentIndex:r,newIndex:o}=t;return Fj.Observable.from(((e,t,s,n)=>{const a=`${e}/secure/MoveSubtask.jspa?id=${t}&currentSubTaskSequence=${s}&subTaskSequence=${n}&atl_token=${Object(Qc.a)()||""}`;return fetch(a).then((e=>e.ok?null:e.text().then((t=>{throw new Mv.a(e.status,t)}))))
})(s,n,r,o)).switchMap((()=>Lv(s,n))).flatMap(((e=[])=>{const t=e.map((({id:e})=>e)),n=i.map((({id:e})=>e));if(Oi()(t,n))return Fj.Observable.of(Gj(i));if(Oi()(t.slice().sort(),n.slice().sort())){const e=t.map((e=>i.find((t=>t.id===e))));return Fj.Observable.of(Gj(e))}const a=e.map((e=>{const{id:t}=e;return Nv(Nv({},i.find((e=>e.id===t))||{}),Ev(e,s))}));return Fj.Observable.of(Gj(a),Bj())})).catch((e=>(pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.reorder-subtask","Failed to reorder subtasks",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Fj.Observable.of(Hj(a,i,r,o)))))},Vv=(e,t)=>e.ofType("state.entities.REORDER_CHILDREN_REQUEST").mergeMap((e=>{const s=t.getState();switch(bj(s)){case"classicSubtasks":return Uv(s,e.payload);case"nextGenChildren":return((e,t,s)=>{const n=fj(e),a=Ej(e),i=wj(e);if(!a)throw new Error("Attempted to reorder children without parentId")
;if(!i)throw new Error("Attempted to reorder children without customFieldId");const{currentOrder:r,newOrder:o,currentIndex:c,newIndex:l}=t,{analyticsEvent:d}=s,{id:u}=r[c],p=u?[+u]:[],m=l>c,f=Number((o[m?l-1:l+1]||{}).id);if(!f)throw new Error("Attempted to reorder children without rankId");return(m?_v(n,i,p,f):Pv(n,i,p,f)).switchMap((()=>Iv(n,a))).flatMap(((e=[])=>{const t=e.map((({id:e})=>e)),s=o.map((({id:e})=>e));if(Object(Ki.f)(d,"issueRank updated",{numIssues:1,previousIssueIndex:c,currentIssueIndex:l,isRankAfter:m}),Oi()(t,s))return Fj.Observable.of(Gj(o));if(Oi()([...t].sort(),[...s].sort())){const e=t.map((e=>o.find((t=>t.id===e))));return Fj.Observable.of(Gj(e))}const a=e.map((e=>{const{id:t}=e;return Dv(Dv({},o.find((e=>e.id===t))||{}),Ev(e,n))}));return Fj.Observable.of(Gj(a),Bj())})).catch((e=>(pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.reorder-children","Failed to reorder children",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",
event:e})),Fj.Observable.of(Hj(r,o,c,l)))))})(s,e.payload,e.meta);default:return Fj.Observable.empty()}}));const Kv=e=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS",payload:{requiresFullCreate:e}}),$v=()=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED"});var Wv=n("./src/packages/issue/issue-view/src/common/util/errors/index.js"),Bv=(e,t)=>t?Fj.Observable.from(((e,t)=>Object(Yc.b)(`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`))(e,t)).map((e=>Kv(e))).catch((e=>(Object(Wv.a)("issue.views.common.child-issues-panel.has-validators-on-subtasks","Failed to check if project has validators on subtasks",e,new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Fj.Observable.of($v())))):Fj.Observable.of($v()),Hv=(e,t)=>e.ofType("state.context.REQUIRES_FULL_CREATE_CHECK").switchMap((()=>{const e=t.getState();switch(bj(e)){case"classicSubtasks":{const t=fj(e),s=Cj(e);return xj(e)?Fj.Observable.of(Kv(!0)):Bv(t,s)}default:return Fj.Observable.empty()}
})),Gv=e=>Object(YO.combineEpics)(ev,(e=>(t,s)=>t.ofType("state.entities.CREATE_CHILD_SUCCESS").do((({payload:{createdChild:e,usedGlobalCreateDialog:t},meta:n})=>{const a=s.getState(),i=gj(a),r={action:"created",actionSubjectId:e.id,attributes:{isInlineCreatedOnIssue:!0,isClassicSubtask:i}};Object(y.a)(n.analyticsEvent,r);const o=bj(a)||"unknown_child",c=Aj(a),l=Mj(a);Object(ua.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:o,application:c,edition:l,additionalAttributes:{isCreated:!0,wasCreatedInline:!t}})})).switchMap((({payload:{createdChild:t}})=>{const n=s.getState(),a=fj(n),i=void 0!==t.issueKey&&null!==t.issueKey?Object(Vr.m)(t.issueKey):void 0,r=void 0!==i?Object(ov.a)(i):void 0;if(!i||!r){const e="Issue or project key missing when handling create child success";return pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.create-child-success.missing-key",e,new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)
})),Fj.Observable.empty()}const o=()=>Fj.Observable.from(Object(av.a)(a,i,r)).map((({data:e})=>{const t=Object(rv.a)(e),s={id:e.issue.id,key:i,self:"",fields:Object.values(t)};return(e=>({type:"state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS",payload:e}))({childIssue:Object(iv.a)(s,a),fieldsData:t})})).catch((e=>(pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.create-child-success.fetch-issue-graphql","Failed to fetch issue after a successful create",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Fj.Observable.empty())));return Object(Ts.isDataProviderRemovedFromChildIssuesEnabled)()||r?o():Fj.Observable.from(gv(e,a,i)).map((e=>Wj(e))).catch((e=>(pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.create-child-success.fetch-single-issue","Failed to fetch single issue after a successful create",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Fj.Observable.empty())))
})))(e),zj,nv,Ov,qj,Hv,Vv,Nj,vv,(e=>(t,s)=>t.ofType("state.entities.LINK_CHILD_SUCCESS").do((({payload:{linkedChild:e},meta:t})=>{const n=s.getState(),a=bj(n),i={action:"linked",actionSubjectId:e.id,attributes:{isInlineChildAdded:!0,panelType:a}};Object(y.a)(t.analyticsEvent,i)})).switchMap((({payload:{linkedChild:t}})=>{const n=s.getState(),a=fj(n);return Fj.Observable.from(gv(e,a,t.issueKey)).map((e=>Wj(e))).catch((e=>(pa.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.link-child-success.fetch-single-issue","Failed to fetch single issue after a successful child issue linking",new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Fj.Observable.empty())))})))(e)),qv=n("./src/packages/common-legacy-do-not-add-anything-new/src/tangerine/state/initiate.js"),zv=n("./node_modules/redux/es/index.js");function Yv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yv(Object(s),!0).forEach((function(t){Jv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Jv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zv={baseUrl:Object(Vr.c)(""),locale:"en_US",user:null,childIssuesPanelType:null,supportsIssueCreation:!1,requiresFullCreate:!1,parentKey:null,customFieldIdRank:null,epicLinkFieldKey:null,parentId:null,projectId:null,messages:null,onNavigateToNewIssue:d.a,onChange:d.a,isIssueViewComplete:!1,projectType:null,application:null,edition:null};const Xv="create",eE="linkIssue";function tE(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tE(Object(s),!0).forEach((function(t){nE(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tE(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nE(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const aE={issues:[],issueTypes:[],issueHierarchyLevel:void 0};const iE=()=>({type:"state.ui.SHOW_INLINE_CREATE"}),rE=()=>({type:"state.ui.HIDE_ADD_CHILD_ISSUE"}),oE=Object.freeze({InlineCreate:"InlineCreate",AddExistingIssue:"AddExistingIssue"}),cE=e=>({type:"state.ui.SET_CHILD_PANEL_VIEW",view:e}),lE=e=>({
type:"state.ui.SET_CHILD_CREATE_SUMMARY",summary:e}),dE=e=>({type:"state.ui.SET_FETCH_ISSUE_TYPES_STATUS",payload:e});function uE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?uE(Object(s),!0).forEach((function(t){mE(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uE(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mE(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const fE={addClickCount:0,hideDone:!1,selectedIssueType:null,childPanelView:oE.InlineCreate,childCreateSummary:"",fetchIssueTypesStatus:"NONE"};var bE=Object(zv.combineReducers)({
context:(e=Zv,t)=>{switch(t.type){case"state.context.SET_CONTEXT":return Qv(Qv({},e),t.payload);case"state.context.SET_ONCHANGE":return Qv(Qv({},e),{},{onChange:t.payload});case"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS":return Qv(Qv({},e),t.payload);case"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED":return Qv(Qv({},e),{},{requiresFullCreate:!0});case"state.context.SET_IS_ISSUE_VIEW_COMPLETE":return Qv(Qv({},e),{},{isIssueViewComplete:t.payload});default:return e}},ui:(e=fE,t)=>{switch(t.type){case"state.ui.SHOW_INLINE_CREATE":return pE(pE({},e),{},{addClickCount:e.addClickCount+1});case"state.ui.HIDE_ADD_CHILD_ISSUE":return pE(pE({},e),{},{addClickCount:0,childPanelView:oE.InlineCreate,childCreateSummary:""});case"state.ui.SET_CHILD_PANEL_VIEW":return pE(pE({},e),{},{childPanelView:t.view});case"state.ui.SET_CHILD_CREATE_SUMMARY":return pE(pE({},e),{},{childCreateSummary:t.summary});case"state.ui.TOGGLE_HIDE_DONE":return pE(pE({},e),{},{hideDone:!e.hideDone})
;case"state.ui.SELECTED_ISSUE_TYPE_CHANGED":return pE(pE({},e),{},{selectedIssueType:t.payload});case"state.ui.SET_FETCH_ISSUE_TYPES_STATUS":return pE(pE({},e),{},{fetchIssueTypesStatus:t.payload});default:return e}},entities:(e=aE,t)=>{switch(t.type){case"state.entities.SET_ENTITIES":{const{issueTypes:s,issues:n,issueHierarchyLevel:a}=t.payload;return sE(sE({},e),{},{issues:n,issueTypes:s,issueHierarchyLevel:a})}case"state.entities.UPDATE_ISSUE":return e;case"state.entities.CREATE_CHILD_REQUEST":{const s=sE(sE({},t.payload.optimisticUiChildIssue),{},{isLoading:!0,errorType:void 0});return sE(sE({},e),{},{issues:e.issues.filter((e=>e.id!==s.id)).concat(s)})}case"state.entities.CREATE_CHILD_SUCCESS":{const{optimisticId:s,createdChild:n}=t.payload;return sE(sE({},e),{},{issues:e.issues.filter((e=>e.id!==s)).concat(n)})}case"state.entities.FETCH_SINGLE_CHILD_SUCCESS":{const{childIssue:s}=t.payload;return sE(sE({},e),{},{issues:e.issues.map((e=>e.id===s.id?s:e))})}
case"state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS":{const{childIssue:s}=t.payload;return sE(sE({},e),{},{issues:e.issues.map((e=>e.id===s.id?s:e))})}case"state.entities.CREATE_CHILD_FAILURE":{const{optimisticId:s}=t.payload;return sE(sE({},e),{},{issues:e.issues.map((e=>e.id===s?sE(sE({},e),{},{errorType:Xv,isLoading:!1}):e))})}case"state.entities.LINKING_ISSUE_FAILURE":{const{optimisticId:s,createdChild:n}=t.payload;return sE(sE({},e),{},{issues:e.issues.filter((e=>e.id!==s)).concat(sE(sE({},n),{},{errorType:eE,isLoading:!1}))})}case"state.entities.CREATE_CHILD_RETRY":{const{optimisticId:s}=t.payload;return sE(sE({},e),{},{issues:e.issues.map((e=>e.id===s?sE(sE({},e),{},{errorType:void 0,isLoading:!0}):e))})}case"state.entities.LINKING_ISSUE_RETRY":{const{issueId:s}=t.payload;return sE(sE({},e),{},{issues:e.issues.map((e=>e.id===s?sE(sE({},e),{},{errorType:void 0,isLoading:!0}):e))})}case"state.entities.LINKING_ISSUE_RETRY_FAILURE":{const{issueId:s}=t.payload;return sE(sE({},e),{},{
issues:e.issues.map((e=>e.id===s?sE(sE({},e),{},{errorType:eE,isLoading:!1}):e))})}case"state.entities.LINK_PARENT_FAILURE":case"state.entities.CANCEL_OPTIMISTIC_CHILD":{const{optimisticId:s}=t.payload;return sE(sE({},e),{},{issues:e.issues.filter((e=>e.id!==s))})}case"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS":{const{issues:s}=t.payload;return sE(sE({},e),{},{issues:e.issues.map((e=>sE(sE({},e),qs()(s,(t=>t.id===e.id)))))})}case"state.entities.REORDER_CHILDREN_REQUEST":case"state.entities.REORDER_CHILDREN_SUCCESS":{const{newOrder:s}=t.payload;return sE(sE({},e),{},{issues:s})}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:s}=t.payload;return sE(sE({},e),{},{issues:s})}case"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST":{const s={id:t.payload.issueId,issueKey:t.payload.issueKey,issueSummary:t.payload.issueSummary,issueTypeIconUrl:t.payload.issueTypeIconUrl,assigneeUrl:null,assigneeDisplayName:null,isLoading:!0,errorType:void 0};return sE(sE({},e),{},{
issues:e.issues.filter((e=>e.id!==s.id)).concat(s)})}default:return e}}});var gE=n("./node_modules/keycode/index.js"),hE=n.n(gE),yE=n("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js"),OE=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/index.js"),jE=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js"),vE=n("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),EE=n("./node_modules/debounce-promise/dist/index.js"),wE=n.n(EE),kE=n("./src/packages/common-legacy-do-not-add-anything-new/src/match-jira-url/index.js");const CE=({sections:e},t)=>{const s=e[0],n=e[1],a=s.issues,i=n?n.issues:[],r=Kd()([...a,...i],"key");return[{label:n?t.matchingIssues:t.recentIssues,options:r.map((e=>({issueId:Object(Vr.k)(String(e.id)),value:e.key,issueKey:e.key,summary:e.summaryText,imageUrl:e.img})))}]};class SE extends r.Component{constructor(...e){super(...e),
this.state={options:[],isLoading:!1,error:null},this.fetchData=e=>{const{baseUrl:t,issueKey:s,projectId:n,jql:a,labels:i}=this.props,r=Object(kE.a)(e,window.location.host,t)||e;return this.setState({isLoading:!0,error:null}),Object(Yp.a)(`${t}/rest/api/3/issue/picker?currentIssueKey=${s}&currentProjectId=${n}&showSubTasks=true&showSubTaskParent=true&currentJQL=${a}&query=${r}`).then((e=>(this.setState({options:CE(e,i),isLoading:!1}),e))).catch((e=>this.setState({isLoading:!1,options:[],error:e})))},this.debouncedFetchData=wE()(this.fetchData,300,{leading:!0})}componentDidMount(){this.fetchData(this.props.initialValue)}render(){const{children:e}=this.props,{options:t,isLoading:s,error:n}=this.state;return e({options:t,isLoading:s,error:n,loadOptions:this.debouncedFetchData})}}SE.displayName="IssueOptionService",SE.defaultProps={initialValue:""}
;var IE=n("./node_modules/@atlaskit/icon/glyph/add.js"),TE=n.n(IE),_E=n("./node_modules/@atlaskit/select/node_modules/react-select/dist/chunk-80640036.browser.esm.js");const PE=ee.default.div.withConfig({componentId:"sc-1hatli-0"})`display:flex;align-items:center;`,xE=ee.default.div.withConfig({componentId:"sc-1hatli-1"})`margin-right:${te.e}px;width:${2*te.e}px;height:${2*te.e}px;`,DE=ee.default.div.withConfig({componentId:"sc-1hatli-2"})`overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1 1 100%;min-width:0;`,AE=["children"];function ME(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}
const LE=({imageUrl:e,children:t})=>o.a.createElement(PE,null,o.a.createElement(xE,null,o.a.createElement("img",{src:e,alt:""})),t);LE.displayName="IssueCard";const RE=({label:e})=>o.a.createElement(PE,null,o.a.createElement(TE.a,{label:"",size:"small",primaryColor:Ze.a.B400}),o.a.createElement(J.a,{appearance:"link",isSelected:!1},e));RE.displayName="CreateIssueOption";const NE=({imageUrl:e,issueKey:t,summary:s})=>o.a.createElement(LE,{imageUrl:e},o.a.createElement(DE,null,t," ",s));NE.displayName="IssueOption";const FE=({imageUrl:e,issueKey:t,summary:s})=>o.a.createElement(LE,{imageUrl:e},o.a.createElement(DE,null,`${t} ${s}`));FE.displayName="SelectedValue";const UE=e=>{let{children:t}=e,s=ME(e,AE);return o.a.createElement(_E.z.SingleValue,s,o.a.createElement(FE,{imageUrl:s.data.imageUrl,issueKey:s.data.issueKey,summary:s.data.summary}))};UE.displayName="SingleValue";var VE=Object(I.defineMessages)({defaultPlaceholder:{id:"issue-picker.default-placeholder",
defaultMessage:"Search by issue key or summary"},defaultRecentIssues:{id:"issue-picker.default-recent-issues",defaultMessage:"Recent Issues"},defaultMatchingIssues:{id:"issue-picker.default-matching-issues",defaultMessage:"Matching Issues"},defaultFailedLoadingIssues:{id:"issue-picker.default-failed-loading-issues",defaultMessage:"Failed to load issues"},createIssue:{id:"issue-picker.create-issue",defaultMessage:"Create an issue for '{value}'"}});class KE extends r.Component{constructor(...e){super(...e),this.onBlur=e=>{e("")},this.onChange=(e,{action:t},s)=>{switch(t){case"select-option":{const{issueId:t,issueKey:n,summary:a,imageUrl:i}=e;this.props.onChange&&this.props.onChange({issueId:t,issueKey:n,issueSummary:a,issueTypeIconUrl:i}),s("");break}case"clear":this.props.onClear&&this.props.onClear()}},this.onCreate=e=>{this.props.onCreate&&this.props.onCreate(e)},this.onInputChange=e=>(t,{action:s})=>{"input-change"===s&&e(t)},this.onSetSelectRef=e=>{this.akSelect=e},
this.formatOptionLabel=(e,{context:t})=>{if(e.__isNew__){const t=this.props.intl.formatMessage(VE.createIssue,{value:e.value});return o.a.createElement(RE,{label:t})}return"menu"===t?o.a.createElement(NE,{imageUrl:e.imageUrl,issueKey:e.issueKey,summary:e.summary}):e.label},this.akSelect=void 0,this.filterOption=()=>!0,this.renderNoOptionsMessage=e=>{if(!e)return;const{intl:t}=this.props;return o.a.createElement(OE.a,{description:t.formatMessage(VE.defaultFailedLoadingIssues),imageWidth:56,isSubtle:!0})}}focus(){this.akSelect.focus()}reset(){this.akSelect.select.select.select.clearValue(),this.akSelect.blur(),this.akSelect.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:a}=this.props;return o.a.createElement(vE.b,null,(({tenantContext:{baseUrl:i}})=>o.a.createElement(SE,{labels:{recentIssues:a.formatMessage(VE.defaultRecentIssues),matchingIssues:a.formatMessage(VE.defaultMatchingIssues)},baseUrl:i,issueKey:t,projectId:s,jql:n,initialValue:e
},(({loadOptions:t,options:s,isLoading:n,error:i})=>o.a.createElement(yE.a,{ref:this.onSetSelectRef,styles:jE.f,isLoading:n,formatOptionLabel:this.formatOptionLabel,options:s,defaultInputValue:e,autoFocus:!0,allowCreateWhileLoading:!0,defaultOptions:!0,onCreateOption:this.onCreate,placeholder:a.formatMessage(VE.defaultPlaceholder),components:{SingleValue:UE},onChange:(e,s)=>this.onChange(e,s,t),onInputChange:this.onInputChange(t),onBlur:()=>this.onBlur(t),isClearable:!0,filterOption:this.filterOption,noOptionsMessage:()=>this.renderNoOptionsMessage(i),openMenuOnFocus:!0})))))}}KE.displayName="IssuePicker",KE.defaultProps={initialValue:""};var $E=KE,WE=Object(I.defineMessages)({childLinkButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-link-button",defaultMessage:"Add"},childCancelButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-cancel-button",defaultMessage:"Cancel"}});const BE=Object(ee.default)(J.a).withConfig({componentId:"w8wqbk-0"
})`margin-left:${te.e}px !important;`,HE=ee.default.div.withConfig({componentId:"w8wqbk-1"})`margin-top:${te.e}px;display:flex;justify-content:flex-end;`;class GE extends r.Component{constructor(...e){super(...e),this.state={selectedIssue:void 0,isDisabled:!0},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onAdd=()=>{this.state.selectedIssue&&(this.props.onAdd(this.state.selectedIssue),this.resetPicker())},this.onChange=e=>{this.setState({selectedIssue:e,isDisabled:!1})},this.onClear=()=>this.setState({selectedIssue:void 0,isDisabled:!0}),this.onCancelClicked=()=>{this.onClear(),this.props.onCancel()},this.onSetSelectRef=e=>{this.issuePicker=e},this.onKeyDown=e=>{e.keyCode===hE()("enter")&&(this.onAdd(),e.stopPropagation())},this.issuePicker=void 0,this.childContainer=void 0}async componentDidMount(){Object(wo.a)(this.childContainer)}componentDidUpdate(e){this.props.addClickCount!==e.addClickCount&&(Object(wo.a)(this.childContainer),this.focusPicker())}resetPicker(){
this.issuePicker&&this.issuePicker.reset()}focusPicker(){this.issuePicker&&this.issuePicker.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:a}=this.props;return t&&s?o.a.createElement(z.a,{onEscape:this.onCancelClicked},o.a.createElement("div",{onKeyDown:this.onKeyDown,ref:this.onChildContainerRefSet},o.a.createElement($E,{ref:this.onSetSelectRef,initialValue:e,issueKey:t,projectId:s,jql:n,onChange:this.onChange,onClear:this.onClear,intl:a,onCreate:this.props.onCreate}),o.a.createElement(HE,null,o.a.createElement(BE,{appearance:"primary",onClick:this.onAdd,isDisabled:this.state.isDisabled},a.formatMessage(WE.childLinkButton)),o.a.createElement(BE,{appearance:"subtle",onClick:this.onCancelClicked},a.formatMessage(WE.childCancelButton))))):null}}GE.displayName="AddExistingIssue",GE.defaultProps={initialValue:""};var qE=Object(Is.a)([I.injectIntl,Object(Ys.a)("button",{onAdd:"clicked",onCancel:"clicked",onCreate:"clicked"}),Object(T.a)({
onAdd:"addExistingChildIssueRequest",onCancel:"hideAddExistingChildIssue",onCreate:"switchToCreateChildIssue"}),Object(c.connect)((e=>({addClickCount:oj(e),initialValue:lj(e),issueKey:vj(e),jql:rj(e),projectId:Cj(e)})),(e=>({onAdd:(t,s)=>e(((e,t)=>({type:"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST",payload:e,meta:{analyticsEvent:t}}))(t,s)),onCancel:()=>e(rE()),onCreate:t=>{e(lE(t)),e(cE(oE.InlineCreate))}})))])(GE),zE=Object(I.defineMessages)({createChildLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-child-label",defaultMessage:"Create child"},createSubtaskLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-subtask-label",defaultMessage:"Create subtask"}});const YE=ee.default.div.withConfig({componentId:"sc-15cuulh-0"})`margin-left:${.75*te.e}px;`;class QE extends r.Component{render(){const{intl:{formatMessage:e},onClick:t,isClassicSubtaskPanel:s}=this.props,n=s?zE.createSubtaskLabel:zE.createChildLabel
;return o.a.createElement(YE,null,o.a.createElement(By.a,{onClick:t,label:e(n)}))}}QE.displayName="AddChild",QE.defaultProps={isClassicSubtaskPanel:!1};var JE=Object(Is.a)([I.injectIntl,Object(Ys.a)("button",{onClick:"clicked"}),Object(T.a)({onClick:"showChildIssuesInlineCreate"}),Object(c.connect)((e=>({isClassicSubtaskPanel:gj(e)})),((e,t)=>({onClick:(...s)=>{e(iE()),t.onClick(...s)}})))])(QE),ZE=n("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroupCheckbox.js"),XE=n("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItemCheckbox.js"),ew=Object(I.defineMessages)({actions:{id:"issue.views.common.child-issues-panel.heading.meatballs.actions",defaultMessage:"Actions"},filter:{id:"issue.views.common.child-issues-panel.heading.meatballs.filter",defaultMessage:"Filter"},bulkEdit:{id:"issue.views.common.child-issues-panel.heading.meatballs.bulk-edit",defaultMessage:"Bulk edit"},hideDone:{
id:"issue.views.common.child-issues-panel.heading.meatballs.hide-done",defaultMessage:"Hide done"},search:{id:"issue.views.common.child-issues-panel.heading.meatballs.search",defaultMessage:"View in search"},tooltip:{id:"issue.views.common.child-issues-panel.heading.meatballs.tooltip",defaultMessage:"Issue actions"}});const tw=ee.default.div.withConfig({componentId:"sc-4iyeeh-0"})`.childIssuesPanelMeatballButton{padding:0 ${.75*te.e}px;}`;class sw extends r.Component{constructor(...e){super(...e),this.onHideDoneClickedAnalytics=e=>{const{onHideDoneClicked:t,allIssues:s,incompleteIssues:n,hideDone:a}=this.props;t(s.length,n.length,!a,e)}}onBulkEditClickedAnalytics(e){return t=>{this.props.onBulkEditClicked(e,t)}}onViewInSearchClickedAnalytics(e){return t=>{this.props.onViewInSearchClicked(e,t)}}isHideDoneCheckboxVisible(){const{allIssues:e,incompleteIssues:t}=this.props;return!Wp()(t)&&t.length!==e.length}generateBulkEditLink(e){
return`${this.props.baseUrl}/secure/GHBulkChange.jspa?issueKeys=${encodeURIComponent(e)}`}generateSearchLink(e){const t=encodeURIComponent(`issueKey in (${e})`);return`${this.props.baseUrl}/issues/?jql=${t}`}renderHideDoneCheckbox(){const{intl:{formatMessage:e},hideDone:t}=this.props;return this.isHideDoneCheckboxVisible()?o.a.createElement(ZE.a,{title:e(ew.filter),id:"child-issues-panel-checkbox-group"},o.a.createElement(XE.a,{id:"hideDone",key:"hideDone",onClick:this.onHideDoneClickedAnalytics,isSelected:t},e(ew.hideDone))):null}renderActionLinks(){const{intl:{formatMessage:e},hideDone:t,allIssues:s,incompleteIssues:n}=this.props,a=t?n:s,i=a.length,r=a.map((e=>e.issueKey)).join(","),c=this.generateBulkEditLink(r),l=this.generateSearchLink(r),d=this.isHideDoneCheckboxVisible()?e(ew.actions):"";return o.a.createElement(fr.a,{title:d},o.a.createElement(wr.a,{onClick:this.onBulkEditClickedAnalytics(i),href:c},e(ew.bulkEdit)),o.a.createElement(wr.a,{
onClick:this.onViewInSearchClickedAnalytics(i),href:l},e(ew.search)))}render(){return o.a.createElement(tw,null,o.a.createElement(Cm.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:o.a.createElement(Im.a,{size:"small",label:this.props.intl.formatMessage(ew.tooltip)})},position:"bottom right"},this.renderHideDoneCheckbox(),this.renderActionLinks()))}}sw.displayName="Meatballs",sw.defaultProps={hideDone:!1};var nw=Object(Is.a)([I.injectIntl,Object(Ys.a)("item",{onBulkEditClicked:"clicked",onViewInSearchClicked:"clicked",onHideDoneClicked:"clicked"}),Object(T.a)({onBulkEditClicked:e=>({name:"bulkEdit",issueCount:e}),onViewInSearchClicked:e=>({name:"viewInSearch",issueCount:e}),onHideDoneClicked:(e,t,s)=>({name:"toggleHideDone",totalIssues:e,incompleteIssues:t,hideDone:s})}),Object(c.connect)((e=>({baseUrl:fj(e),parentKey:vj(e),hideDone:uj(e),allIssues:XO(e),incompleteIssues:tj(e)})),{onHideDoneClicked:()=>({type:"state.ui.TOGGLE_HIDE_DONE"})
})])(sw),aw=Object(I.defineMessages)({sortByLabel:{id:"issue.views.common.child-issues-panel.heading.sort-by.label",defaultMessage:"Order by {option}"},created:{id:"issue.views.common.child-issues-panel.heading.created.label",defaultMessage:"Created"},key:{id:"issue.views.common.child-issues-panel.heading.key.label",defaultMessage:"Key"},priority:{id:"issue.views.common.child-issues-panel.heading.priority.label",defaultMessage:"Priority"},status:{id:"issue.views.common.child-issues-panel.heading.status.label",defaultMessage:"Status"},assignee:{id:"issue.views.common.child-issues-panel.heading.assignee.label",defaultMessage:"Assignee"},ranking:{id:"issue.views.common.child-issues-panel.heading.ranking.label",defaultMessage:"Rank"},defaultOptionLabel:{id:"issue.views.common.child-issues-panel.heading.default-option.label",defaultMessage:"{option} (default)"}});const iw=ee.default.span.withConfig({componentId:"sc-3v5xte-0"})`padding-right:${.75*te.e}px;`,rw=ee.default.div.withConfig({
componentId:"sc-3v5xte-1"})`min-width:${20*te.e}px;`,ow=ee.default.div.withConfig({componentId:"sc-3v5xte-2"})`border-top:1px solid ${"#EBECF0"};padding:${te.e/2}px 0;span{color:${"#0052CC"};}`,cw=Object(Er.a)("dropdownItem",{onClick:"clicked"})(wr.a),lw="ranking",dw=["created","key","priority","status","assignee"],uw="defaultOptionLabel",pw=e=>{var t;const{sortedBy:s,onSelect:n}=e;let a=dw;const i=Object(cs.g)(),{formatMessage:c}=Object(qe.c)(),[l,d]=Object(r.useState)(!1),[{value:u}]=Object(wd.a)(i,"priority");(!u||!u.allowedValues||u.allowedValues.length<=1)&&(a=dw.filter((e=>"priority"!==e)));const p=Object(r.useMemo)((()=>{const e=new Map,t=c(aw.ranking),s=c(aw.defaultOptionLabel,{option:t});return e.set(lw,t),e.set(uw,s),a.forEach((t=>{e.set(t,c(aw[t]))})),e}),[a,c]),m=Object(r.useMemo)((()=>a.filter((e=>e!==s))),[a,s]);return o.a.createElement(mr.a,{trigger:o.a.createElement(J.a,{appearance:"subtle",isSelected:l,iconAfter:o.a.createElement(Iu.a,{label:""}),
testId:"issue.views.common.child-issues-panel.heading.sort-by-menu.trigger-button"},o.a.createElement(iw,null,c(aw.sortByLabel,{option:null!==s&&s!==lw?null===(t=p.get(s))||void 0===t?void 0:t.toLowerCase():""}))),isOpen:l,onOpenChange:()=>{d(!l)}},o.a.createElement(rw,null,o.a.createElement(fr.a,null,m.map((e=>o.a.createElement(cw,{key:e,"data-testId":`issue.views.common.child-issues-panel.heading.sort-by-menu.option-${e}`,onClick:(t,s)=>n(e,s)},p.get(e)))),s&&s!==lw&&o.a.createElement(ow,null,o.a.createElement(cw,{key:lw,"data-testId":"issue.views.common.child-issues-panel.heading.sort-by-menu.default-option",onClick:(e,t)=>n(lw,t)},p.get(uw))))))};pw.displayName="SortByMenu";const mw=({allIssueIds:e})=>{const[t,{setSortBy:s}]=KO(),[,{setSortableIssueIds:n}]=VO(),{createAnalyticsEvent:a}=Object(sr.a)(),i=Object(r.useCallback)((t=>{Object(Ki.h)(a({action:"clicked",actionSubject:"dropdown"}),"childIssuesSortBy",{selection:t}),n(e),s(t)}),[e,a,s,n]);return o.a.createElement(pw,{
sortedBy:t,onSelect:i})};mw.displayName="ConnectedComponent";var fw=Object(c.connect)((e=>({allIssueIds:XO(e).map((e=>Object(Vr.k)(e.id)))})),{})(mw),bw=Object(I.defineMessages)({title:{id:"issue.views.common.child-issues-panel.heading.title.title",defaultMessage:"Child issues"}});class gw extends r.Component{render(){const{intl:{formatMessage:e},title:t}=this.props;return o.a.createElement(Si.e,null,e(t))}}gw.displayName="Title",gw.defaultProps={title:bw.title};var hw=Object(Is.a)([I.injectIntl,Object(c.connect)((e=>({title:Ij(e)})),{})])(gw);class yw extends r.Component{render(){const{Title:e,Meatballs:t,AddChild:s,SortByMenu:n,supportsIssueCreation:a,allIssues:i,onAddChildClick:r,sourceName:c,isSortingAvailable:l}=this.props;return o.a.createElement(Si.c,null,o.a.createElement("label",{htmlFor:c},o.a.createElement(e,null)),o.a.createElement(Si.d,null,l&&o.a.createElement(n,null),i.length>0?o.a.createElement(t,null):null,a&&0!==i.length?o.a.createElement(s,{onClick:r}):null))}}
yw.displayName="Heading",yw.defaultProps={isSortingAvailable:!1,supportsIssueCreation:!1,allIssues:[]};var Ow=Object(Is.a)([Object(c.connect)((e=>({Title:hw,Meatballs:nw,AddChild:JE,SortByMenu:fw,allIssues:XO(e),supportsIssueCreation:Oj(e),isSortingAvailable:Rj(e)})),{})])(yw),jw=n("./node_modules/@atlaskit/select/dist/es2019/Select.js"),vw=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js"),Ew=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js"),ww=Object(I.defineMessages)({typesPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.child-types-select.types-placeholder",defaultMessage:"Issue type"}});ee.default.div.withConfig({componentId:"sc-13ov7lj-0"})`border:solid ${Ze.a.N50} ${te.e}px;padding:${te.e}px;`;const kw=ee.default.div.withConfig({componentId:"sc-13ov7lj-1"})`display:flex;align-items:center;`,Cw=ee.default.span.withConfig({
componentId:"sc-13ov7lj-2"})`padding-left:${te.e}px;display:inline-block;`;function Sw(){return(Sw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Iw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tw(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Iw(Object(s),!0).forEach((function(t){_w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Iw(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Pw={
singleValue:e=>Tw(Tw({},e),{},{position:"static",transform:"none"})},xw=e=>e.name,Dw=e=>e.id,Aw=e=>o.a.createElement(kw,null,o.a.createElement(os.a,{url:e.iconUrl,title:e.name}),o.a.createElement(Cw,null,e.name));Aw.displayName="formatOptionLabel";class Mw extends r.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{"select-option"===t.action&&null!=e&&this.props.onChange(e)}}render(){const{intl:{formatMessage:e},issueTypes:t,selectedIssueType:s}=this.props;return o.a.createElement(jw.a,Sw({},vw.b,{styles:Object(Ew.a)(jE.f,Pw),options:t,value:s,getOptionLabel:xw,getOptionValue:Dw,formatOptionLabel:Aw,onChange:this.onChange,placeholder:e(ww.typesPlaceholder)}))}}Mw.displayName="ChildTypesSelect",Mw.defaultProps={issueTypes:[]};var Lw=Object(Is.a)([I.injectIntl,Object(c.connect)((e=>({selectedIssueType:dj(e),issueTypes:ij(e)})),(e=>({onChange:t=>e((e=>({type:"state.ui.SELECTED_ISSUE_TYPE_CHANGED",payload:e}))(t))
})))])(Mw),Rw=n("./node_modules/lodash/trim.js"),Nw=n.n(Rw),Fw=n("./src/packages/issue-create/issue-create-modal/src/controllers/use-trigger-issue-create-modal/index.js"),Uw=n("./src/packages/issue-create/new-issue-create-trigger/src/utils.js"),Vw=n("./node_modules/@atlaskit/icon/glyph/search.js"),Kw=n.n(Vw);const $w=e=>{const{children:t,onClick:s}=e;return o.a.createElement(J.a,{appearance:"subtle-link",iconBefore:o.a.createElement(Kw.a,{label:""}),isSelected:!1,onClick:s},t)};$w.displayName="AddExistingIssueButton",$w.displayName="AddExistingIssueButton";var Ww=Object(I.defineMessages)({summaryLabel:{id:"issue.views.common.child-issues-panel.inline-create.summary-label",defaultMessage:"Child summary"},summaryPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.summary-placeholder",defaultMessage:"What needs to be done?"},summaryTooLong:{id:"issue.views.common.child-issues-panel.inline-create.summary-too-long",defaultMessage:"Summary must be less than 255 characters."
},childCreateButton:{id:"issue.views.common.child-issues-panel.inline-create.child-create-button",defaultMessage:"Create"},childCancelButton:{id:"issue.views.common.child-issues-panel.inline-create.child-cancel-button",defaultMessage:"Cancel"},addExistingIssuePlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.add-existing-issue-placeholder",defaultMessage:"Choose an existing issue"}}),Bw=n("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const Hw=ee.default.div.withConfig({componentId:"sc-10p591b-0"})`display:flex;align-items:center;background-color:${Ze.a.N10};width:100%;`,Gw=ee.default.div.withConfig({componentId:"sc-10p591b-1"})`flex-grow:1;`,qw=Object(Bw.a)(J.a,{target:"e1o0mbwp0"})("margin-left:",te.e,"px !important;"),zw=ee.default.div.withConfig({componentId:"sc-10p591b-2"})`margin-top:${te.e}px;display:flex;justify-content:space-between;`,Yw=ee.default.div.withConfig({componentId:"sc-10p591b-3"})`justify-content:flex-end;display:flex;`
;function Qw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Jw(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qw(Object(s),!0).forEach((function(t){Zw(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qw(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zw(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xw=e=>Nw()(e).length>255,ek=e=>{const t=Nw()(e);return Wp()(t)||Xw(e)};class tk extends r.Component{constructor(e){super(e),this.onSubmitClicked=()=>{this.createChild(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{this.closeAndReset(),this.props.onCancelClickAnalytics()},
this.onEnterPressed=()=>{this.createChild(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onUpdateChildSummary=e=>{const t=e.target.value;this.props.onChangeSummary(t)},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onFieldContainerRefSet=e=>{this.fieldContainer=e},this.onAddExisting=()=>{this.props.onAddExistingIssue(),this.props.onAddExistingClickAnalytics()},this.childContainer=void 0,this.fieldContainer=void 0,this.createIssueFormFactory=void 0,this.createIssueFormFactory=null}async componentDidMount(){Object(wo.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus();const e="classicSubtasks"===this.props.childIssuesPanelType?"quick-edit/form/factory/create-subtask":"quick-edit/form/factory/create-issue";this.createIssueFormFactory=await Object(Ca.a)({name:e,wrmKeys:"wrc!com.atlassian.jira.jira-quick-edit-plugin:quick-form"})}componentDidUpdate(e){
this.props.addClickCount!==e.addClickCount&&(Object(wo.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus())}createChild(){const e=`OPTIMISTIC_CHILD_${Date.now()}`,{baseUrl:t,epicLinkFieldKey:s,selectedIssueType:n,projectId:a,parentIssueId:i,parentIssueKey:r,childIssuesPanelType:o,requiresFullCreate:c,summary:l}=this.props;if((Object(Ts.is2afErrorCleanupGroup2Enabled)()?!ek(l)&&"function"==typeof this.createIssueFormFactory:!ek(l))&&n){const p={id:e,issueSummary:l,issueTypeId:`${n.id}`,issueTypeIconUrl:`${n.iconUrl}`,issueTypeName:`${n.name}`,assigneeUrl:null,assigneeDisplayName:null};if(n.hasRequiredField||c){const c="classicProjectEpicChildren"===o,p=Jw({pid:a,issueType:n&&n.id,fields:Jw({issuetype:n.id,summary:l||""},c&&s?{[s]:r}:{}),customFieldsToPreserveOnFormRecreation:[...c&&s?[s]:[]]},"classicSubtasks"===o?{parentIssueId:i}:{})
;if("classicSubtasks"!==o&&Object(Ts.isModernGlobalIssueCreateTriggerEnabled)()&&window.IssueCreate&&window.IssueCreate.Visibility.isEnabled){var d,u;const{pid:n,issueType:a,fields:i}=p,o=c&&s&&r?{epic:{fieldId:s,fieldValue:r}}:null,l=Object(Uw.b)({prefilledFields:Jw({pid:n,issuetype:a,summary:i.summary},o)});return void(null===(d=(u=this.props).openIssueCreateModal)||void 0===d||d.call(u,{payload:l,fieldsToAddInPublishedData:[s],onIssueCreate:n=>{c&&n.createdIssueDetails.fields[s]!==r||this.props.onFullDialogCreate(e,Ev(n.createdIssueDetails,t)),this.resetAndFocus()}}))}const m=this.createIssueFormFactory(p);m.bind("issueCreated",((n,a)=>{c&&a.createdIssueDetails.fields[s]!==r||this.props.onFullDialogCreate(e,Ev(a.createdIssueDetails,t)),this.resetAndFocus()})),m.asDialog({id:"classicSubtasks"===o?"create-subtask-dialog":"create-issue-dialog"}).show()}else this.props.onSubmit(p),this.resetAndFocus()}}closeAndReset(){this.reset(),this.props.onCancel()}resetAndFocus(){this.reset(),
this.fieldContainer&&this.fieldContainer.focus()}reset(){this.props.onChangeSummary("")}renderAddExistingIssueButton(){const{intl:{formatMessage:e}}=this.props;switch(this.props.childIssuesPanelType){case"nextGenChildren":return o.a.createElement(Re.a,{content:e(Ww.addExistingIssuePlaceholder)},o.a.createElement($w,{onClick:this.onAddExisting},e(Ww.addExistingIssuePlaceholder)));case"portfolioChildren":case"classicProjectEpicChildren":case"classicSubtasks":default:return o.a.createElement("div",null)}}render(){const{intl:{formatMessage:e},issueTypes:t,ChildTypesSelect:s,summary:n,inputId:a}=this.props,i=Xw(n)?e(Ww.summaryTooLong):"";return o.a.createElement("div",{ref:this.onChildContainerRefSet},o.a.createElement(Hw,null,t.length>1?o.a.createElement(s,null):null,o.a.createElement(Gw,null,o.a.createElement(z.a,{onEnter:this.onEnterPressed,onEscape:this.onEscPressed},o.a.createElement(Me.a,{ref:this.onFieldContainerRefSet,placeholder:e(Ww.summaryPlaceholder),label:e(Ww.summaryLabel),
onChange:this.onUpdateChildSummary,value:n,isInvalid:Xw(n),invalidMessage:i,isLabelHidden:!0,shouldFitContainer:!0,id:a})))),o.a.createElement(zw,null,this.renderAddExistingIssueButton(),o.a.createElement(Yw,null,o.a.createElement(qw,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:ek(n)},e(Ww.childCreateButton)),o.a.createElement(qw,{appearance:"subtle",onClick:this.onCancelClicked},e(Ww.childCancelButton)))))}}tk.displayName="InlineCreate",tk.defaultProps={addClickCount:0,requiresFullCreate:!1,parentIssueKey:void 0,epicLinkFieldKey:null};var sk=Object(TO.a)(Ts.isModernGlobalIssueCreateTriggerEnabled,Object(_.b)("issue")(Object(Fw.c)(tk)),Object(_.b)("issue")(tk)),nk=Object(Is.a)([I.injectIntl,Object(Ys.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked",onAddExistingClickAnalytics:"clicked"}),Object(Ys.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(Ys.a)("childIssuePanelInlineCreate",{
onSubmit:"onSubmit",onFullDialogCreate:"onFullDialogCreate"}),Object(T.a)({onSubmitClickAnalytics:"createChildIssue",onCancelClickAnalytics:"hideChildIssueInlineCreate",onEnterKeyPressedAnalytics:"confirmChildIssueCreate",onEscapeKeyPressedAnalytics:"cancelChildIssueCreate",onAddExistingClickAnalytics:"addExistingChildClick"}),Object(c.connect)((e=>({ChildTypesSelect:Lw,baseUrl:fj(e),issues:XO(e),addClickCount:oj(e),issueTypes:ij(e),selectedIssueType:dj(e),projectId:Cj(e),parentIssueId:Ej(e),parentIssueKey:vj(e),epicLinkFieldKey:kj(e),childIssuesPanelType:bj(e),requiresFullCreate:jj(e),summary:lj(e)})),{onCancel:rE,onAddExistingIssue:()=>cE(oE.AddExistingIssue),onChangeSummary:e=>lE(e),onSubmit:(e,t)=>Uj(e,t),onFullDialogCreate:(e,t,s)=>((e,t,s)=>({type:"state.entities.CHILD_CREATED_IN_FULL_DIALOG",payload:{optimisticId:e,createdChild:t},meta:{analyticsEvent:s}}))(e,t,s)
})])(sk),ak=n("./node_modules/lodash/partition.js"),ik=n.n(ak),rk=n("./src/packages/issue-line-card/src/ui/main.js"),ok=n("./node_modules/@atlaskit/inline-message/dist/es2019/components/inline-message/index.js");const ck=Object(I.defineMessages)({retry:{id:"issue.issue-line-card-retry",defaultMessage:"Try again"},cancel:{id:"issue.issue-line-card-cancel",defaultMessage:"Cancel"}}),lk=ee.default.h1.withConfig({componentId:"sc-1yohshg-0"})`${Ze.d.h400()} margin-bottom:${2*te.e}px;`,dk=ee.default.div.withConfig({componentId:"sc-1yohshg-1"})`margin-bottom:${2*te.e}px;`,uk=ee.default.div.withConfig({componentId:"sc-1yohshg-2"})`display:flex;justify-content:flex-start;`,pk=ee.default.div.withConfig({componentId:"sc-1yohshg-3"})`margin-left:${te.e}px;`,mk=(e,t,s,n,a)=>o.a.createElement(ok.a,{type:"warning",placement:"bottom-end"},o.a.createElement("div",null,o.a.createElement(lk,null,t),o.a.createElement(dk,null,s),o.a.createElement(uk,null,o.a.createElement(J.a,{onClick:n
},e.formatMessage(ck.retry)),o.a.createElement(pk,null,o.a.createElement(J.a,{appearance:"subtle",onClick:a},e.formatMessage(ck.cancel))))));mk.displayName="renderInlineMessage";var fk=Object(I.defineMessages)({createChildErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-child-error-title",defaultMessage:"We couldn't create the child issue"},createSubtaskErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-subtask-error-title",defaultMessage:"We couldn't create the subtask"},createErrorBody:{id:"issue.views.common.child-issues-panel.issues.create-error-body",defaultMessage:"Check your connection, then give it another try"},linkIssueErrorTitle:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-title",defaultMessage:"We couldn't link the child issue"},linkIssueErrorBody:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-body",defaultMessage:"Check your connection, then give it another try"},restrictedReorderingMessage:{
id:"issue.views.common.child-issues-panel.issues.restricted-reordering-message",defaultMessage:"To order these issues manually, choose 'Order by rank'"}}),bk=n("./src/packages/platform/utils/constants/src/index.js"),gk=n("./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js");const hk=ee.default.div.withConfig({componentId:"sc-1wm62xq-0"})`width:${5*te.e}px;position:relative;`;var yk=({issueTimeTracking:e,statusCategory:t})=>{const[s]=Object(qd.c)(),{remainingEstimateSeconds:n,originalEstimateSeconds:a,timeSpentSeconds:i}=e,r={loggedTime:i,remainingTime:n},c=a,l=t===bk.a.DONE;return o.a.createElement(hk,{"data-testid":"issue.views.common.issue-line-card.issue-line-card.mini-time-log-graph"},o.a.createElement(gk.a,{value:r,estimatedTime:c,config:s,isDone:l,isCompact:!0,shouldHighlightOnHover:!0}))};const Ok=ee.default.div.withConfig({componentId:"sc-17mfhod-0"})`margin-top:${te.e}px;margin-bottom:${te.e}px;padding-right:1px;`;function jk(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vk(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jk(Object(s),!0).forEach((function(t){Ek(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jk(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ek(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class wk extends r.Component{constructor(...e){super(...e),this.onChildIssueClick=(e,t)=>{const s=e.issueKey;"string"==typeof s&&Object(Bm.d)(t)?this.props.onNavigateToNewIssue({fromIssueKey:this.props.parentKey,toIssueKey:s}):"string"==typeof s&&(Object(Bm.e)(t)||Object(Bm.a)(t))&&window.open(e.issueLink,"_blank")
},this.onOrderChange=(e,t,s,n,a)=>{this.props.onReorderChildren(this.props.allIssues,e,s,n,a)}}inlineErrorMessage(e,t){const{intl:s,onInlineErrorCreateRetry:n,onInlineErrorLinkingRetry:a,onInlineErrorCancel:i,isClassicSubtaskPanel:r}=this.props;switch(t){case eE:return mk(s,s.formatMessage(fk.linkIssueErrorTitle),s.formatMessage(fk.linkIssueErrorBody),((t,s)=>a(e,s)),(()=>i(e)));case Xv:default:{const t=r?fk.createSubtaskErrorTitle:fk.createChildErrorTitle;return mk(s,s.formatMessage(t),s.formatMessage(fk.createErrorBody),((t,s)=>n(e,s)),(()=>i(e)))}}}renderIssueLineCardGroup({groupId:e,issues:t,projectType:s,isReorderEnabled:n,isInteractive:a,onEditIssue:i,shouldDisplayWorklogGraph:r,restrictedReorderingMessage:c}){return o.a.createElement(Wm.a,{items:t,onOrderChange:this.onOrderChange,groupId:e,isReorderEnabled:n,isInteractive:a,onClick:this.onChildIssueClick},((e,t,l,d)=>{
const{id:u,issueKey:p,issueLink:m,issueTypeIconUrl:f,issueTypeName:b,issuePriorityUrl:g,issuePriorityName:h,issueSummary:y,statusCategory:O,statusCategoryId:j,statusId:v,statusName:E,assigneeUrl:w,assigneeDisplayName:k,isLoading:C,errorInlineMessage:S,hasError:I,estimateFieldId:T,issueTimeTracking:_}=d,P=[];return r&&void 0!==(null==_?void 0:_.timeSpentSeconds)&&_.timeSpentSeconds>0&&P.push(o.a.createElement(yk,{issueTimeTracking:_,statusCategory:d.statusCategory})),o.a.createElement(rk.a,{id:Object(Vr.k)(u),issueKey:Object(Vr.m)(null!=p?p:""),issueLink:m,issueTypeIconUrl:f,issueTypeName:b,issuePriorityUrl:g,issuePriorityName:h,issueSummary:y,statusCategory:O,statusCategoryId:j,statusId:v,statusName:E,assigneeUrl:w,assigneeDisplayName:k,isLoading:C,errorInlineMessage:S,hasError:I,estimateFieldId:T,isHovering:e,isActive:t,isFocused:l,isDraggable:n,isInteractive:a,projectType:s,onEdit:i&&(e=>i&&i(vk(vk({},d),e))),restrictedReorderingMessage:c,additionalItems:P,isInlineEditEnabled:!0})}))
}render(){const{allIssues:e,incompleteIssues:t,hideDone:s,isClassicSubtaskPanel:n,isNextGenChildrenPanel:a,projectType:i,onEditIssue:r,shouldDisplayWorklogGraph:c,intl:{formatMessage:l},restrictReordering:d=!1}=this.props,u=e.length>1,p=e.filter((e=>e.isLoading)).length>0,m=(a||n)&&!s&&u&&!p&&!d,f=(s?t:e).map((e=>e.errorType?vk(vk({},e),{},{errorInlineMessage:this.inlineErrorMessage(e.id,e.errorType)}):e)),b={"data-testid":"issue.issue-view.views.common.child-issues-panel.issues-container"},g=(a||n)&&u&&d&&{restrictedReorderingMessage:l(fk.restrictedReorderingMessage)};return o.a.createElement(Ok,b,this.renderIssueLineCardGroup(vk({groupId:"child-issues-panel",issues:f,projectType:i,isReorderEnabled:m,onEditIssue:r,shouldDisplayWorklogGraph:c},g)))}}wk.displayName="Issues",wk.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,shouldDisplayWorklogGraph:!1,allIssues:[],incompleteIssues:[],projectType:null,restrictReordering:!1,onReorderChildren:d.a,onEditIssue:d.a}
;const kk=e=>[...e].sort(((e,t)=>void 0===e.created?1:void 0===t.created?-1:t.created-e.created)),Ck=e=>[...e].sort(((e,t)=>{const[s="",n=0]=(e.issueKey||"").split("-"),[a="",i=0]=(t.issueKey||"").split("-");return s.localeCompare(a)||parseInt(n,10)-parseInt(i,10)})),Sk={UNDEFINED:0,TODO:1,IN_PROGRESS:2,DONE:3},Ik=e=>Sk[null==e?"UNDEFINED":e]||0,Tk=e=>[...e].sort(((e,t)=>Ik(e.statusCategory)-Ik(t.statusCategory)||(e.statusName||"").localeCompare(t.statusName||""))),_k=e=>[...e].sort(((e,t)=>""===e.assigneeDisplayName||null==e.assigneeDisplayName?1:""===t.assigneeDisplayName||null==t.assigneeDisplayName?-1:e.assigneeDisplayName.localeCompare(t.assigneeDisplayName))),Pk=(e,t)=>{const s=e.indexOf(t);return s>=0?s:Number.MAX_SAFE_INTEGER},xk=["allIssues","incompleteIssues","sortBy"];function Dk(){return(Dk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
function Ak(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Mk=e=>{let{allIssues:t,incompleteIssues:s,sortBy:n}=e,a=Ak(e,xk);const i=Object(cs.g)(),[{value:c}]=Object(wd.a)(i,"priority"),l=(null==c?void 0:c.allowedValues)||[],d=Object(r.useMemo)((()=>l.map((e=>e.name))),[l]),[u]=VO(),[p,m]=Object(r.useMemo)((()=>ik()(t,(e=>u.includes(e.id)))),[t,u]),[f,b]=Object(r.useMemo)((()=>ik()(s,(e=>u.includes(e.id)))),[s,u]),g=Object(r.useMemo)((()=>{switch(n){case"created":return kk;case"key":return Ck;case"status":return Tk;case"assignee":return _k;case"priority":return e=>((e,t)=>[...e].sort(((e,s)=>Pk(t,e.issuePriorityName)-Pk(t,s.issuePriorityName))))(e,d);case"ranking":
default:return e=>e}}),[d,n]),h=Object(r.useMemo)((()=>g(p)),[p,g]),y=Object(r.useMemo)((()=>g(f)),[f,g]),O=null!==n&&"ranking"!==n;return o.a.createElement(wk,Dk({},a,{allIssues:[...h,...m],incompleteIssues:[...y,...b],restrictReordering:O}))};Mk.displayName="SortedIssues",Mk.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,shouldDisplayWorklogGraph:!1,allIssues:[],incompleteIssues:[],projectType:null,onReorderChildren:d.a,onEditIssue:d.a};const Lk=Object(_.b)("issue")(Mk);function Rk(){return(Rk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Nk=e=>{const{allIssues:t,onReorderChildren:s}=e,[,{setSortableIssueIds:n}]=VO(),a=Object(r.useCallback)(((...e)=>{n(t.map((e=>Object(Vr.k)(e.id)))),s(...e)}),[t,s,n]);return o.a.createElement(Lk,Rk({},e,{onReorderChildren:a}))};Nk.displayName="ReorderingObserverComponent";const Fk=e=>{
const[t]=KO();return o.a.createElement(Nk,Rk({},e,{sortBy:t}))};Fk.displayName="ConnectedIssuesList";var Uk=Object(Is.a)([I.injectIntl,Object(Ys.a)("button",{onInlineErrorCancel:"clicked",onInlineErrorCreateRetry:"clicked"}),Object(Ys.a)("inlineIssue",{onNavigateToNewIssue:"clicked",onReorderChildren:"dragged"}),Object(T.a)({onInlineErrorCancel:"cancelInlineErrorCreate",onInlineErrorCreateRetry:"retryInlineErrorCreate",onNavigateToNewIssue:"navigateToNewIssue",onReorderChildren:"reorderChildren"}),Object(c.connect)((e=>({allIssues:XO(e),incompleteIssues:tj(e),hideDone:uj(e),parentKey:vj(e),projectType:Dj(e),isClassicSubtaskPanel:gj(e),isNextGenChildrenPanel:yj(e),onNavigateToNewIssue:_j(e),shouldDisplayWorklogGraph:gj(e)||yj(e)&&0===nj(e)})),{onInlineErrorCancel:e=>({type:"state.entities.CANCEL_OPTIMISTIC_CHILD",payload:{optimisticId:e}}),onInlineErrorCreateRetry:(e,t)=>({type:"state.entities.CREATE_CHILD_RETRY",payload:{optimisticId:e},meta:{analyticsEvent:t}}),
onInlineErrorLinkingRetry:(e,t)=>({type:"state.entities.LINKING_ISSUE_RETRY",payload:{issueId:e},meta:{analyticsEvent:t}}),onReorderChildren:(e,t,s,n,a)=>({type:"state.entities.REORDER_CHILDREN_REQUEST",payload:{currentOrder:e,newOrder:t,currentIndex:s,newIndex:n},meta:{analyticsEvent:a}}),onEditIssue:e=>({type:"state.entities.UPDATE_ISSUE",payload:e})})])(Fk),Vk=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/progress-bar/index.js"),Kk=Object(I.defineMessages)({completionPercentageText:{id:"issue.views.common.child-issues-panel.progress-summary.completion-percentage-text",defaultMessage:"{completionPercentage}% Done"},todoIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-issues-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} issues"},todoSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-subtasks-segment-tooltip-text",
defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} subtasks"},inProgressIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-issues-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} issues"},inProgressSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-subtasks-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} subtasks"},completedIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-issues-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} issues"},completedSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-subtasks-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} subtasks"}})
;const $k=Ze.a.N30,Wk=Ze.a.B400,Bk=Ze.a.G300,Hk=ee.default.div.withConfig({componentId:"sc-1aqy3r5-0"})`display:flex;align-items:center;`,Gk=ee.default.div.withConfig({componentId:"sc-1aqy3r5-1"})`flex-grow:1;`,qk=ee.default.div.withConfig({componentId:"sc-1aqy3r5-2"})`margin-left:${2*te.e}px;margin-right:${.25*te.e}px;flex-shrink:0;color:${Ze.a.N200};`,zk=ee.default.span.withConfig({componentId:"sc-1aqy3r5-3"})`display:inline-block;width:${3*te.e}px;text-align:right;`;function Yk(){return(Yk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Qk={remainingTooltip:Kk.todoSubtasksSegmentTooltipText,completedTooltip:Kk.completedSubtasksSegmentTooltipText,inProgressTooltip:Kk.inProgressSubtasksSegmentTooltipText},Jk={remainingTooltip:Kk.todoIssuesSegmentTooltipText,completedTooltip:Kk.completedIssuesSegmentTooltipText,
inProgressTooltip:Kk.inProgressIssuesSegmentTooltipText};var Zk=Object(Is.a)([I.injectIntl,Object(c.connect)((e=>({isClassicSubtaskPanel:gj(e),totalIssueCount:XO(e).length,inProgressIssueCount:sj(e).length,completedIssueCount:ej(e).length})),{})])((e=>{const{isClassicSubtaskPanel:t,intl:{formatMessage:s},totalIssueCount:n,inProgressIssueCount:a,completedIssueCount:i}=e,r=n-a-i,c=Math.floor(i/n*100),{remainingTooltip:l,completedTooltip:d,inProgressTooltip:u}=t?Qk:Jk;return o.a.createElement(Hk,null,o.a.createElement(Gk,null,o.a.createElement(Vk.b,{sum:n,backgroundColor:$k,remainingTooltipContent:s(l,{todoIssueCount:r,totalIssueCount:n})},o.a.createElement(Vk.a,{value:i,color:Bk,tooltipContent:s(d,{completedIssueCount:i,totalIssueCount:n})}),o.a.createElement(Vk.a,{value:a,color:Wk,tooltipContent:s(u,{inProgressIssueCount:a,totalIssueCount:n})}))),o.a.createElement(qk,null,o.a.createElement(I.FormattedMessage,Yk({},Kk.completionPercentageText,{values:{
completionPercentage:o.a.createElement(zk,null,c)}}))))}));class Xk extends r.Component{hasIssues(){const{allIssues:e}=this.props;return e.length>0}hasContent(){const{noValueText:e,addClickCount:t}=this.props;return this.hasIssues()||t>0||!!e}renderEmptyValue(){const{noValueText:e,addClickCount:t,intl:{formatMessage:s}}=this.props;return this.hasIssues()||null===e||0!==t?null:o.a.createElement(kr.b,null,s(e))}renderIssues(){const{ProgressSummary:e,Issues:t,allIssues:s}=this.props,n=s.length>=2?o.a.createElement(e,null):null;return s.length>0?o.a.createElement(o.a.Fragment,null,n,o.a.createElement(t,null)):null}renderCreate(){const{InlineCreate:e,addClickCount:t,AddExistingIssue:s,childPanelView:n,sourceName:a}=this.props;if(t>0)switch(n){case oE.InlineCreate:return o.a.createElement(e,{inputId:a});case oE.AddExistingIssue:return o.a.createElement(s,null);default:return null}return null}render(){const{Heading:e,onAddChildClick:t,sourceName:s}=this.props
;return this.hasContent()?o.a.createElement(o.a.Fragment,null,o.a.createElement(e,{onAddChildClick:t,sourceName:s}),this.renderEmptyValue(),this.renderIssues(),this.renderCreate()):null}}Xk.displayName="ChildIssuesPanel",Xk.defaultProps={addClickCount:0,noValueText:null};var eC=Object(Is.a)([I.injectIntl,Object(c.connect)((e=>Object(Ts.is2afErrorCleanupGroup2Enabled)()&&!e?{Heading:Ow,InlineCreate:nk,Issues:Uk,ProgressSummary:Zk,AddExistingIssue:qE,childPanelView:oE.InlineCreate,allIssues:[],incompleteIssues:[],addClickCount:0,noValueText:null}:{Heading:Ow,InlineCreate:nk,Issues:Uk,ProgressSummary:Zk,AddExistingIssue:qE,childPanelView:cj(e),allIssues:XO(e),incompleteIssues:tj(e),addClickCount:oj(e),noValueText:Tj(e)}),{})])(Xk);function tC(){return(tC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function sC(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sC(Object(s),!0).forEach((function(t){aC(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function aC(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class iC extends r.Component{constructor(e){super(e),this.store=void 0;const{issues:t,parentKey:s,childIssuesPanelType:n}=this.props;this.store=((e,t,s)=>Object(qv.a)({appName:`${t}-child-issues-panel-${s}`,rootReducer:bE,rootEpic:e}))(Gv(this.props.dataProvider),s,n),this.dispatchContext(),this.store.dispatch((()=>({
type:"state.context.REQUIRES_FULL_CREATE_CHECK"}))()),this.dispatchEntities(),"classicSubtasks"!==n&&t.length>0&&this.store.dispatch(Bj());const{fetchIssueTypesStatus:a}=e;a&&this.store.dispatch(dE(a))}componentDidUpdate(e){if(Object(PO.a)(e,this.props))return;const{issues:t,quickAddClickCount:s,fetchIssueTypesStatus:n,onChange:a}=this.props;s>e.quickAddClickCount&&this.store.dispatch(iE()),t.length&&this.dispatchEntities(),n!==e.fetchIssueTypesStatus&&(this.store.dispatch(dE(n||"NONE")),this.dispatchEntities()),e.onChange!==a&&this.store.dispatch((e=>({type:"state.context.SET_ONCHANGE",payload:e}))(a))}dispatchEntities(){const{issueTypes:e,issues:t,epicLinkFieldKey:s,issueHierarchyLevel:n}=this.props;this.store.dispatch((e=>({type:"state.entities.SET_ENTITIES",payload:e}))({issueTypes:e.map((e=>((e,t)=>{const{fields:s}=e,n=GO(e,$O),a=!!s&&zO(s),i=!!s&&Object.keys(s).includes(t);return BO(BO({},n),{},{hasRequiredField:a,hasEpicLinkField:i})})(e,s))),issues:t,issueHierarchyLevel:n}))}
dispatchContext(){const{supportsIssueCreation:e,baseUrl:t,locale:s,user:n,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,parentId:o,projectId:c,projectType:l,messages:d,onNavigateToNewIssue:u,onChange:p,childIssuesPanelType:m,isIssueViewComplete:f}=this.props;let b=null,g=null;if(null!==l){const{appEditions:e}=Object(pa.f)();b=Object(ma.f)(l),g=Object(fa.f)(b,e)}this.store.dispatch((e=>({type:"state.context.SET_CONTEXT",payload:e}))({baseUrl:t,locale:s,user:n,projectId:c,parentId:o,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,supportsIssueCreation:e,messages:d,onNavigateToNewIssue:u,onChange:p,childIssuesPanelType:m,isIssueViewComplete:f,projectType:l,application:b,edition:g,requiresFullCreate:!1}))}render(){const{onAddChildClick:e,childIssuesPanelType:t,analyticsSource:s,issueHierarchyLevel:n}=this.props;return o.a.createElement(SO.a,{store:this.store},o.a.createElement(Wi.a,{sourceName:"childIssuesPanel",sourceType:Bi.f,attributes:{childIssuesPanelType:t,
issueHierarchyLevel:n-1,analyticsSource:`issue-view (${s})`}},o.a.createElement(IO.a,null,o.a.createElement(eC,{onAddChildClick:e,sourceName:"childIssuesPanel"}),o.a.createElement(_O.a,{mapper:AO}))))}}iC.displayName="ChildIssuesPanel",iC.defaultProps={issues:[],issueTypes:[],isIssueViewComplete:!1};const rC=e=>{const{issues:t}=e,s=Object(r.useRef)(!0),[,{setSortableIssueIds:n}]=VO();return Object(r.useEffect)((()=>{!0===s.current&&(n(t.map((e=>Object(Vr.k)(e.id)))),s.current=!1)})),o.a.createElement(iC,e)};rC.displayName="WrappedSortingChildIssuesPanel";const oC={nextGenChildren:"children-issues",classicProjectEpicChildren:"epic-issues",classicSubtasks:"subtasks",portfolioChildren:"portfolio-child-issues"},cC=e=>{const{childIssuesPanelType:t,issues:s}=e,n=(e=>{const t=Object(cs.g)(),[s]=Object(Vl.b)({issueKey:t,fieldKey:e}),n=(s||[]).map((e=>({key:e.key,id:e.id}))),a=n.map((e=>e.key)),[i]=Object(Vl.c)({issueKeys:a,fieldKey:"summary"}),[r]=Object(Vl.c)({issueKeys:a,
fieldKey:"timetracking"}),[o]=Object(Vl.c)({issueKeys:a,fieldKey:"assignee"}),[c]=Object(Vl.c)({issueKeys:a,fieldKey:"priority"}),[l]=Object(Vl.c)({issueKeys:a,fieldKey:"issuetype"}),[d]=Object(Vl.c)({issueKeys:a,fieldKey:"status"}),[u]=Object(Vl.c)({issueKeys:a,fieldKey:"created"}),[p]=Object(Vl.c)({issueKeys:a,fieldKey:"updated"});return n.map(((e,t)=>{var s,n,a,m,f,b,g,h,y,O,j,v,E;return{assigneeDisplayName:null===(s=o[t])||void 0===s?void 0:s.displayName,assigneeUrl:null===(n=o[t])||void 0===n||null===(a=n.avatarUrls)||void 0===a?void 0:a["48x48"],created:u[t]&&new Date(u[t]),id:e.id,isLoading:!1,issueKey:e.key,issueLink:`/browse/${e.key}`,issuePriorityName:null===(m=c[t])||void 0===m?void 0:m.name,issuePriorityUrl:null===(f=c[t])||void 0===f?void 0:f.iconUrl,issueSummary:i[t],issueTimeTracking:r[t],issueTypeIconUrl:null===(b=l[t])||void 0===b?void 0:b.iconUrl,issueTypeName:null===(g=l[t])||void 0===g?void 0:g.name,
statusCategory:Object(Ul.statusCategoryForId)(null===(h=d[t])||void 0===h||null===(y=h.statusCategory)||void 0===y?void 0:y.id),statusCategoryId:null===(O=d[t])||void 0===O||null===(j=O.statusCategory)||void 0===j?void 0:j.id,statusId:null===(v=d[t])||void 0===v?void 0:v.id,statusName:null===(E=d[t])||void 0===E?void 0:E.name,updated:p[t]&&new Date(p[t])}}))})(oC[t]),a=n.every((e=>Boolean(e.issueSummary)));let i=s;return n.length>0&&a&&s.length===n.length&&Lj(t)&&(i=n.map(((e,t)=>nC(nC({},e),{},{estimateFieldId:s[t].estimateFieldId,estimateValue:s[t].estimateValue})))),o.a.createElement(rC,tC({},e,{issues:i}))};cC.displayName="WrappedStateRefactorChildIssuesPanel";const lC=e=>{const{onNavigateToNewIssue:t}=e,s=Object(cs.h)(),n=Object(cs.g)(),a=Object(cs.i)(),i=Object(Tl.e)(a),c=Object(Tl.i)(a),l=Object(Vr.c)(""),d=Object(Mg.a)(),u=Object(Ah.a)(),p=Object(r.useCallback)((e=>{t(e),null==s||s(e)}),[s,t]);return o.a.createElement(cC,tC({},e,{onNavigateToNewIssue:p,
parentKey:n||Object(Vr.m)(""),projectId:Object(Vr.r)(i||""),projectType:c||null,baseUrl:l,user:d,locale:u}))};lC.displayName="ChildIssuesPanelWithHooks";const dC=e=>{const{childIssuesPanelType:t}=e,s=Object(cs.g)();return o.a.createElement($.a,{id:"issue.issue-view.common.child-issues-panel"},o.a.createElement(W.a,{id:"common.child-issues-panel",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},o.a.createElement(UO,{scope:`${s}-${t}`},o.a.createElement(lC,e))))};dC.displayName="DecoratedComponent";var uC=Object(TO.a)(Ts.isDataProviderRemovedFromChildIssuesEnabled,dC,Object(xO.a)(dC));var pC=Object(I.defineMessages)({title:{id:"issue.children-issues.title",defaultMessage:"Child issues"}});const mC=["onNavigateToNewIssueDispatchProp"];function fC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bC(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fC(Object(s),!0).forEach((function(t){gC(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function gC(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function hC(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function yC(){return(yC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const OC=e=>{const t=e.onChange,s=Object(cs.g)(),[n,{setFieldValue:a}]=Object(Vl.b)({issueKey:s,fieldKey:"children-issues"}),i=Object(r.useCallback)((e=>{switch(e.type){case CO.CHILD_ISSUE_ADDED:a(s,"children-issues",n.concat({id:e.meta.childIssue.id,key:e.meta.childIssue.issueKey}))}t(e)}),[n,s,t,a]);return o.a.createElement(uC,yC({},e,{onChange:i}))};OC.displayName="ConnectedComponent";var jC=Object(c.connect)((e=>({childIssuesPanelType:"nextGenChildren",parentId:Object(M.w)(e),customFieldIdRank:Object(Yn.b)("com.pyxis.greenhopper.jira:gh-lexo-rank")(e),issueTypes:Object(_s.h)(e),issues:Object(EO.a)(e),supportsIssueCreation:Object(_s.i)(e),quickAddClickCount:vO(e),isIssueViewComplete:Object(L.n)(e),messages:pC,fetchIssueTypesStatus:Object(Hc.a)(e),issueHierarchyLevel:Object(_s.b)(e),analyticsSource:Object(M.b)(e)})),(e=>({onChange:t=>{switch(t.type){case CO.CHILD_ISSUE_ADDED:
e(bO(t.meta.childIssue,t.meta.fieldsData));break;case CO.ISSUE_CHILDREN_ORDER_CHANGED:e((({issueIds:e,rankId:t,isRankAfter:s})=>({type:"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS",payload:{issueIds:e,rankId:t,isRankAfter:s}}))(t.meta))}},onAddChildClick:()=>e(gO()),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(hO.c)({fromIssueKey:t,toIssueKey:s}))}})),((e,t)=>{const{onNavigateToNewIssueDispatchProp:s}=t,n=hC(t,mC);return bC(bC(bC({},e),n),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t})}})}))(OC),vC=n("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),EC=n("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),wC=n("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),kC=n("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js")
;const CC=Object(zn.createSelector)(L.f,(e=>e.confluenceAppLinks||[])),SC=Object(zn.createSelector)(CC,(e=>e&&e.length>0)),IC=Object(zn.createSelector)(SC,wC.c,kC.b,((e,t,s)=>e&&t&&s)),TC=ee.default.div.withConfig({componentId:"sc-1xt8jvj-0"})`height:100%;margin-left:${te.e/4}px;transform:scale(${({show:e})=>e?1:0});margin-right:${-te.e}px;`,_C=ee.default.div.withConfig({componentId:"sc-1xt8jvj-1"})`display:inline-block;vertical-align:middle;margin-top:${te.e}px;width:${4*te.e}px;height:${3*te.e}px;margin-left:${te.e}px;`,PC=e=>{const{show:t,onClick:s,icon:n}=e;return o.a.createElement(TC,{show:t},o.a.createElement(_C,null,o.a.createElement(J.a,{iconBefore:n,appearance:"subtle",onClick:s,spacing:"none"})))};PC.displayName="LineCardHiddenButton";const xC=e=>{const{show:t,onClick:s}=e;return o.a.createElement(PC,{show:t,icon:o.a.createElement(lu.a,null),onClick:s})};xC.displayName="DeleteButton";const DC=ee.default.div.withConfig({componentId:"sc-1jk1iqt-0"
})`display:flex;align-items:center;`,AC=Object(ee.default)(DC).withConfig({componentId:"sc-1jk1iqt-1"})`width:100%;height:100%;position:relative;`,MC=ee.default.div.withConfig({componentId:"sc-1jk1iqt-2"})`margin-left:-2px;`,LC=ee.default.div.withConfig({componentId:"sc-1jk1iqt-3"})`margin-left:-1px;`,RC=ee.default.div.withConfig({componentId:"sc-1jk1iqt-4"})`padding-left:${te.e/2}px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;`,NC=ee.default.div.withConfig({componentId:"sc-1jk1iqt-5"})`padding-left:${te.e}px;overflow:hidden;`,FC=ee.default.div.withConfig({componentId:"sc-1jk1iqt-6"})`padding-left:${te.e}px;`;class UC extends r.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)},this.authenticateApplink=e=>{const{error:t,repairLinkHref:s,onAuthenticateApplink:n}=this.props;"APPLINK_REQ_AUTH"===t&&s&&n&&n(s),e.stopPropagation()},this.openRepairApplink=e=>{const{repairLinkHref:t}=this.props
;t&&window.open(t,"_blank"),e.stopPropagation()},this.openConfluenceLink=e=>{window.open(this.props.href,"_blank"),e.stopPropagation()},this.renderErrorIcon=()=>o.a.createElement(MC,null,o.a.createElement(xy.a,{label:"",primaryColor:Ze.a.Y300})),this.renderPadlockIcon=()=>o.a.createElement(LC,null,o.a.createElement(iy.a,{label:"",primaryColor:Ze.a.B300})),this.renderErrorText=()=>o.a.createElement(RC,null,o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.loading-error",defaultMessage:"We couldn't load this page."})),this.renderAuthRequiredText=()=>o.a.createElement(RC,null,o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.auth-required",defaultMessage:"Authenticate with Confluence to see this page."})),this.renderMissingApplinkText=()=>o.a.createElement(RC,null,o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.missing-applink",defaultMessage:"Confluence site not linked."
}))}renderIcon(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderPadlockIcon():this.renderErrorIcon()}renderText(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderAuthRequiredText():"APPLINK_MISSING"===e?this.renderMissingApplinkText():this.renderErrorText()}renderAuthorizationRepairLink(){return o.a.createElement(FC,null,o.a.createElement(J.a,{appearance:"link",spacing:"none",onClick:this.authenticateApplink},o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.auth-repair-link",defaultMessage:"Authenticate"})))}renderApplinkRepairLink(){return o.a.createElement(FC,null,o.a.createElement(J.a,{appearance:"link",spacing:"none",onClick:this.openRepairApplink},o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.applink-repair-link",defaultMessage:"Repair"})))}renderRepairLink(){const{error:e,href:t,repairLinkHref:s}=this.props;if(s){let s
;"APPLINK_MISSING"===e?s=this.renderApplinkRepairLink():"APPLINK_REQ_AUTH"===e&&(s=this.renderAuthorizationRepairLink());const n=t?o.a.createElement(NC,null,"\u2022"):null;return o.a.createElement(o.a.Fragment,null,s,n)}return null}renderLink(){return o.a.createElement(FC,null,o.a.createElement(J.a,{appearance:"link",spacing:"none",onClick:this.openConfluenceLink},o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.open-link",defaultMessage:"Open in Confluence"})))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return o.a.createElement(xC,{show:e||t,onClick:this.onDeleteClick})}render(){return o.a.createElement(AC,null,this.renderIcon(),this.renderText(),this.renderRepairLink(),this.renderLink(),this.renderDeleteButton())}}UC.displayName="ConfluencePageLineCardError";var VC=n("./node_modules/@atlaskit/icon-object/glyph/blog/16.js"),KC=n.n(VC),$C=n("./node_modules/@atlaskit/icon-object/glyph/page/16.js"),WC=n.n($C)
;const BC=ee.default.div.withConfig({componentId:"sc-1lvfme5-0"})`display:flex;align-items:center;`,HC=Object(ee.default)(BC).withConfig({componentId:"sc-1lvfme5-1"})`padding-left:${te.e}px;`,GC=Object(ee.default)(BC).withConfig({componentId:"sc-1lvfme5-2"})`width:100%;height:100%;position:relative;`,qC=ee.default.div.withConfig({componentId:"sc-1lvfme5-3"})`height:${3.5*te.e}px;padding-right:2px;`,zC=ee.default.div.withConfig({componentId:"sc-1lvfme5-4"})`${e=>e.isFocused&&`color: ${Ze.a.B400};`} padding-left:${te.e}px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;`;class YC extends r.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)}}renderPageIcon(){const e="blogpost"===this.props.pageType,t=e?o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.line-card.blog-icon",defaultMessage:"Confluence blog post"}):o.a.createElement(I.FormattedMessage,{
id:"issue.details.confluence-pages.line-card.page-icon",defaultMessage:"Confluence page"});return o.a.createElement(Re.a,{content:t,position:"bottom"},e?o.a.createElement(KC.a,{label:""}):o.a.createElement(WC.a,{label:""}))}renderPageTitle(){const{pageTitle:e,isFocused:t}=this.props;return o.a.createElement(zC,{isFocused:t},e)}renderLastUpdateAvatar(){const{userDisplayName:e,userAvatarUrl:t}=this.props;return t?e?o.a.createElement(HC,null,o.a.createElement(Re.a,{content:e,position:"bottom"},o.a.createElement(qC,null,o.a.createElement(Oo.a,{name:e,src:t,size:"small"})))):o.a.createElement(HC,null,o.a.createElement(Oo.a,{src:t,size:"small"})):null}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return o.a.createElement(xC,{show:e||t,onClick:this.onDeleteClick})}render(){return o.a.createElement(GC,null,this.renderPageIcon(),this.renderPageTitle(),this.renderLastUpdateAvatar(),this.renderDeleteButton())}}YC.displayName="ConfluencePageLineCard";var QC=YC
;class JC extends r.Component{constructor(...e){super(...e),this.state={modalOpen:!1,linkToDeleteId:null},this.onCancelDelete=()=>{this.setState({modalOpen:!1,linkToDeleteId:null})},this.onConfirmDelete=()=>{const{onDeleteConfluencePageLink:e}=this.props,{linkToDeleteId:t}=this.state;null!=t&&e(t),this.setState({modalOpen:!1,linkToDeleteId:null})},this.onDeleteClick=e=>{this.setState({modalOpen:!0,linkToDeleteId:e})},this.handleErrorLineCardClick=e=>{e.link&&e.link.href&&window.open(e.link.href,"_blank")},this.handleLineCardClick=e=>{e.href&&window.open(e.href,"_blank")},this.handleClick=(e,t)=>{this.props.onClick&&this.props.onClick(e,t),e.error?this.handleErrorLineCardClick(e):this.handleLineCardClick(e)},this.renderErrorLineCard=(e,t,s)=>o.a.createElement(UC,{globalId:e.link.globalId,error:e.error,href:e.link.href,repairLinkHref:e.repairLink?e.repairLink.href:null,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s}),
this.renderLineCard=(e,t,s)=>o.a.createElement(QC,{globalId:e.globalId,pageTitle:e.title,pageType:e.type,userDisplayName:e.lastUpdatedContext&&e.lastUpdatedContext.user.displayName,userAvatarUrl:e.lastUpdatedContext&&e.lastUpdatedContext.user.avatarUrl,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s})}render(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Wm.a,{items:this.props.pages,groupId:this.props.groupId,onClick:this.handleClick},((e,t,s,n)=>n.error?this.renderErrorLineCard(n,e,s):this.renderLineCard(n,e,s))),this.state.modalOpen&&o.a.createElement(Tt.a,{appearance:"danger",headerMessage:o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.title",defaultMessage:"Delete the Confluence page link?"}),contentMessage:o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.content",defaultMessage:"You can add the page later again if you need to."}),
confirmActionText:o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"}),cancelActionText:o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}),onConfirm:this.onConfirmDelete,onCancel:this.onCancelDelete}))}}JC.displayName="ConfluencePageLineCardGroup";var ZC=n("./node_modules/lodash/range.js"),XC=n.n(ZC);class eS extends r.Component{getItems(){return XC()(this.props.itemCount).map((e=>o.a.createElement(Ai.a,{key:e,fontSize:20,lineHeight:41,intrusion:0})))}render(){const{paddingTopInPixels:e,paddingBottomInPixels:t}=this.props;return o.a.createElement(Di.a,null,o.a.createElement(xi.b,null),o.a.createElement(Pi.a,{paddingTop:e,paddingBottom:t},this.getItems()))}}eS.displayName="ItemLineCardGroup",eS.defaultProps={paddingTopInPixels:0,paddingBottomInPixels:0};const tS=Object(I.defineMessages)({label:{
id:"issue.confluence-links-add-label",defaultMessage:"Link a Confluence Page"}}),sS=ee.default.span.withConfig({componentId:"jm7c6k-0"})`margin-left:auto;`;class nS extends r.Component{render(){return o.a.createElement(sS,null,o.a.createElement(By.a,{label:this.props.intl.formatMessage(tS.label),onClick:this.props.onClick}))}}nS.displayName="AddButton",nS.defaultProps={onClick:d.a};var aS=Object(I.injectIntl)(nS),iS=n("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js");const rS=Object(zn.createSelector)(L.H,wC.h,wC.j,((e,t=[],s=[])=>{const n=e.recentlyVisitedConfluencePages||[],a=t.concat(s).map((e=>e.href));return n.filter((e=>!a.includes(e.href)))}));var oS=Object(I.defineMessages)({defaultRecentPages:{id:"issue.views.confluence-search-view.default-recent-view",defaultMessage:"Recently visited"},defaultMatchingPages:{id:"issue.views.confluence-search-view.default-matching-pages",defaultMessage:"Matching pages"}
}),cS=n("./node_modules/@atlaskit/select/node_modules/react-select/dist/base/dist/react-select-cac0a5ae.browser.esm.js"),lS=n("./src/packages/issue/issue-view/src/common/model/confluence-page-type.js");function dS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function uS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dS(Object(s),!0).forEach((function(t){pS(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dS(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pS(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mS=["blogpost","page"],fS=Object(cS.b)(),bS=(e,t,s=[],n=[],a=[])=>{
const i=a.map((e=>e.page)),r=s.concat(i,n).map((e=>e.href||""));return[{label:t,options:e.filter((e=>mS.includes(e.type))).map((e=>({label:e.title,value:e.url,page:{id:Object(Vr.f)(e.id.toString()),globalId:Object(Vr.u)(""),href:Object(Vr.j)(e.url),title:e.title,type:Object(lS.a)(e.type),space:void 0!==e.spaceName?e.spaceName:"",lastModified:void 0!==e.lastModified?new Date(e.lastModified).getTime():0}}))).filter((e=>!r.includes(e.page.href)))}]},gS=(e,t)=>{const{type:s,payload:n={}}=t,{options:a=[],error:i=null}=n,r={loading:!1,options:a,error:i,type:"search"};switch(s){case"SEARCH_API_LOADING":return uS(uS({},r),{},{loading:!0});case"SEARCH_API_DONE":case"SEARCH_API_ERROR":return r;case"SEARCH_API_CLEAR":return uS(uS({},r),{},{options:[]});case"SEARCH_API_RESET":return uS(uS({},r),{},{type:"recent"});default:return e}},hS=(e,t,s)=>e.filter((e=>s?e.page.spaceKey===s&&fS(e,t):fS(e,t))),yS=(e,t)=>{if(t&&t.length>0&&e.length>0){const{options:s,label:n}=t[0];return[{label:n,
options:[...e,...s].slice(0,20)}]}return t},OS={value:0,input:""},jS=_g()(((e,t,s)=>{const{inputValue:n,appId:a,spaceKey:i}=e,r=""!==i?`"${i}"`:"";Object(Yc.b)(((e,t,s="")=>`/rest/confluenceIssueLink/1/confluence/search?query=${e}&appId=${t}&spaceKey=${s}&maxResults=20&_=${Date.now()}`)(n,a,r)).then(t).catch(s)}),300,{leading:!1});var vS=e=>{const{appId:t,spaceKey:s="",children:n,recentOptions:a,labels:i,linkedPages:o,mentionedPages:c}=e,l=((e,t,s)=>[{label:t,options:e.filter((e=>!s||e.page.spaceKey===s))}])(a,i.recentPages,s),[d,u]=Object(r.useReducer)(gS,{loading:!1,options:l,error:null,type:"recent"}),p=Object(r.useRef)(OS);Object(r.useEffect)((()=>{"recent"!==d.type||Oi()(d.options,l)||u({type:"SEARCH_API_RESET",payload:{options:l}})}),[l,d.options,d.type]);const{loading:m,error:f,type:b,options:g}=d,h=Object(r.useCallback)((()=>{u({type:"SEARCH_API_CLEAR",payload:{options:[]}}),p.current=OS}),[]),y=Object(r.useCallback)(((e,t)=>{if(t===p.current.value){
const t=hS(a,p.current.input,s),n=bS(e.result,i.matchingPages,o,c,t);u({type:"SEARCH_API_DONE",payload:{options:yS(t,n)}})}}),[i.matchingPages,o,c,a,s]),O=Object(r.useCallback)(((e,t)=>{if(Object(Dy.a)({error:e,meta:{id:"getConfluenceSearchService",packageName:"jiraIssueView",teamName:"bento"},sendToPrivacyUnsafeSplunk:!0}),t===p.current.value){const t=hS(a,p.current.input,s),n=bS([],i.matchingPages),r=yS(t,n);p.current=OS,u({type:"SEARCH_API_ERROR",payload:{options:r,error:0===r.length||0===r[0].options.length?e:null}})}}),[i.matchingPages,a,s]);return n({fetchSuggestions:Object(r.useCallback)((e=>{p.current.value+=1,p.current.input=e;const n=p.current.value;if(e&&""!==e)return u({type:"SEARCH_API_LOADING",payload:{options:bS([],i.matchingPages)}}),void jS({inputValue:e,appId:t,spaceKey:s},(e=>y(e,n)),(e=>O(e,n)));n===p.current.value&&(p.current=OS,u({type:"SEARCH_API_RESET",payload:{options:l}}))}),[t,O,y,i.matchingPages,l,s]),loading:m,error:f,type:b,options:g,clearState:h})}
;ee.default.div.withConfig({componentId:"sc-59idel-0"})`width:100%;display:flex;flex-direction:row;justify-content:start;flex-wrap:nowrap;`;const ES=ee.default.div.withConfig({componentId:"sc-59idel-1"})`margin:${te.e}px 0;padding-right:1px;`,wS=ee.default.div.withConfig({componentId:"sc-59idel-2"})`display:flex;flex-direction:${({isCompact:e})=>e?"column":"row"};justify-content:space-around;align-content:stretch;> *{margin-top:${te.e}px;}>:not(:last-child){margin-right:${({isCompact:e})=>e?"0":`${te.e}px`};}`,kS=ee.default.div.withConfig({componentId:"sc-59idel-3"})`max-width:${({isCompact:e})=>e?"none":25*te.e+"px"};width:${({isCompact:e})=>e?"100%":"27%"};min-width:${17*te.e}px;`,CS=ee.default.div.withConfig({componentId:"sc-59idel-4"})`flex:1;flex-basis:auto;`
;var SS=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-url.js"),IS=n("./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js"),TS=n("./node_modules/@atlaskit/icon/glyph/link-filled.js"),_S=n.n(TS);const PS=ee.default.div.withConfig({componentId:"xij48g-0"})`display:flex;align-items:center;height:34px;`,xS=ee.default.div.withConfig({componentId:"xij48g-1"})`margin-right:${2*te.e}px;line-height:1;`,DS=ee.default.div.withConfig({componentId:"xij48g-2"})`display:flex;flex-direction:column;`,AS=ee.default.div.withConfig({componentId:"xij48g-3"})`line-height:1.25em;font-size:14px;font-weight:500;`;class MS extends r.PureComponent{render(){const{href:e,onSelect:t}=this.props;return o.a.createElement(PS,{onClick:()=>t&&t(e)},o.a.createElement(xS,null,o.a.createElement(_S.a,{label:"",size:"medium",primaryColor:Ze.a.B200})),o.a.createElement(DS,null,o.a.createElement(AS,null,o.a.createElement(kr.a,null,e))))}}
MS.displayName="LinkItem";var LS=MS,RS=n("./node_modules/@atlaskit/icon-object/glyph/blog/24.js"),NS=n.n(RS),FS=n("./node_modules/@atlaskit/icon-object/glyph/page/24.js"),US=n.n(FS),VS=Object(I.defineMessages)({updated:{id:"issue.views.confluence-pages.link-list.page-item.updated",defaultMessage:"Updated"},recent:{id:"issue.views.confluence-pages.link-list.page-item.recent",defaultMessage:"Recently viewed"}});const KS=ee.default.div.withConfig({componentId:"v7o91n-0"})`display:flex;align-items:center;height:34px;`,$S=ee.default.div.withConfig({componentId:"v7o91n-1"})`margin-right:${te.e}px;line-height:1;`,WS=(ee.default.div.withConfig({componentId:"v7o91n-2"})`display:flex;flex-direction:column;`,ee.default.div.withConfig({componentId:"v7o91n-3"})`display:flex;flex-direction:column;flex-grow:1;overflow:hidden;`),BS=ee.default.div.withConfig({componentId:"v7o91n-4"})`line-height:1.42em;font-size:14px;font-weight:500;`,HS=(ee.default.div.withConfig({componentId:"v7o91n-5"
})`font-size:12px;color:${Ze.a.N200};`,ee.default.div.withConfig({componentId:"v7o91n-6"})`font-size:11px;line-height:1.27em;color:${Ze.a.N200};display:flex;flex-direction:row;justify-content:flex-start;`),GS=ee.default.div.withConfig({componentId:"v7o91n-7"})`color:${Ze.a.N200};margin:0 ${te.e/2}px;`,qS=({page:e,parent:t})=>{const{formatMessage:s}=Object(qe.c)(),{lastModified:n=0,space:a}=e||{},i=e=>`${s(VS.updated)} ${e}`,{additionalProps:r={}}=t||{},{type:c="search",spaceKey:l=""}=r;let d=null;const u=""===l?o.a.createElement(kr.a,null,a):null;if("recent"!==c)if(n>0){d=(Date.now()-new Date(n))/864e5<8?o.a.createElement(kr.a,null,o.a.createElement(I.FormattedRelative,{value:n},i)):o.a.createElement(kr.a,null,o.a.createElement(I.FormattedDate,{year:"numeric",month:"short",day:"2-digit",value:n},i))}else d=o.a.createElement(kr.a,null,s(VS.recent));return o.a.createElement(o.a.Fragment,null,u,null!==u&&null!==d?o.a.createElement(GS,null,"\u2022"):null,d)}
;class zS extends r.PureComponent{render(){if(!this.props.page)return null;const{title:e,type:t,href:s}=this.props.page;return o.a.createElement(KS,{onClick:()=>this.props.onSelect&&this.props.onSelect(s)},o.a.createElement($S,null,"blogpost"===t?o.a.createElement(NS.a,{label:""}):o.a.createElement(US.a,{label:""})),o.a.createElement(WS,null,o.a.createElement(BS,null,o.a.createElement(kr.a,null,e)),o.a.createElement(HS,null,o.a.createElement(qS,{page:this.props.page,parent:this.props.selectProps}))))}}zS.displayName="ConfluencePageItem";var YS=zS,QS=Object(I.defineMessages)({enterOrSelectConfluenceLink:{id:"issue.views.confluence-pages.link.selector.placeholder",defaultMessage:"Search pages or paste in a link"},noOptionsMessage:{id:"issue.views.confluence-pages.link.selector.noOptionsMessage",defaultMessage:"No recently visited pages"}});const JS=ee.default.div.withConfig({componentId:"sc-1gnwxmi-0"})`height:46px;`;function ZS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function XS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ZS(Object(s),!0).forEach((function(t){eI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ZS(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function eI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function tI(){return(tI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const sI=e=>{const{innerProps:t,innerRef:s,getStyles:n,data:a,selectProps:i}=e,r=n("option",e);return o.a.createElement(JS,{style:r
},o.a.createElement("div",tI({},t,{ref:s}),a.page?o.a.createElement(YS,tI({key:`item_key-${a.page.href}`},a,{selectProps:i})):o.a.createElement(LS,{href:Object(Vr.j)(e.value)})))};sI.displayName="Option";class nI extends r.Component{constructor(...e){super(...e),this.state={isMenuOpen:!1,value:void 0},this.onKeyDown=e=>{switch(e.keyCode){case hE()("enter"):this.props.onEnter&&!this.state.isMenuOpen&&(this.props.onEnter(),e.stopPropagation())}},this.onMenuOpen=()=>{const{onMenuOpen:e}=this.props;e&&e(),this.setState({isMenuOpen:!0})},this.onInputChange=(e,{action:t})=>{const{onInputChange:s}=this.props;"input-change"===t&&s&&s(e)},this.onBlur=()=>{const{onBlur:e}=this.props;e&&e()},this.onMenuClose=()=>{this.setState({isMenuOpen:!1});const{onMenuClose:e}=this.props;e&&e()},this.handleChange=e=>{e&&e.page&&this.props.onSelect&&this.props.onSelect(),this.setState({value:e}),this.props.onChange(e?e.value:null)},this.isValidNewOption=e=>{const{isValidNewOption:t}=this.props;return t&&t(e)}}
render(){const{value:e}=this.state,{options:t,intl:{formatMessage:s},link:n,isLoading:a,isLoadingOptions:i,filterOption:r=Object(cS.b)(),customComponents:c={},additionalProps:l={}}=this.props,d=a||i;return o.a.createElement(IS.a,{validationState:this.props.validationState||"default",validationMessage:this.props.validationMessage},o.a.createElement(yE.a,tI({isClearable:!0,isDisabled:a,filterOption:r,isLoading:d,onChange:this.handleChange,value:""!==n&&e?e:null,components:XS({Option:sI},c),options:t,placeholder:s(QS.enterOrSelectConfluenceLink),validationState:this.props.validationState||"default",getOptionLabel:e=>e.page?e.page.href:e.value,maxMenuHeight:256,autoFocus:!0,menuPlacement:"auto",minMenuHeight:256,onKeyDown:this.onKeyDown,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,noOptionsMessage:()=>s(QS.noOptionsMessage),isValidNewOption:this.isValidNewOption,additionalProps:l,onInputChange:this.onInputChange,onBlur:this.onBlur},this.props.noOptionsMessage?{
noOptionsMessage:this.props.noOptionsMessage}:null)))}}nI.displayName="LinkSelect",nI.defaultProps={isLoading:!1,isLoadingOptions:!1,link:void 0};var aI=e=>o.a.createElement(nI,e),iI=Object(I.defineMessages)({noRecentOptionsMessage:{id:"issue.views.confluence-search-view.noOptionsMessage",defaultMessage:"No recently visited pages"},noResultOptionsMessage:{id:"issue.views.confluence-search-view.noResultOptionsMessage",defaultMessage:"We can't find any pages matching your search"}});const rI=ee.default.div.withConfig({componentId:"sc-11bl2kc-0"})`height:${32*te.e}px;color:hsl(0,0%,60%);`,oI=ee.default.div.withConfig({componentId:"sc-11bl2kc-1"})``,cI=ee.default.div.withConfig({componentId:"sc-11bl2kc-2"})`display:flex;flex-direction:column;justify-content:start;flex-wrap:nowrap;height:calc(100% - ${2*te.e}px);`;function lI(){return(lI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}
return e}).apply(this,arguments)}const dI=(e,t,s)=>e||"search"===t?o.a.createElement("p",null,s(iI.noResultOptionsMessage)):o.a.createElement("p",null,s(iI.noRecentOptionsMessage));dI.displayName="getNoOptions";const uI=e=>{const{innerProps:t,innerRef:s,getStyles:n,options:a}=e,i=n("group",e),r=n("groupHeading",e);return o.a.createElement(rI,lI({ref:s},t),o.a.createElement(cI,{style:i},a.length>0?o.a.createElement(oI,{style:r},a[0].label):null))};uI.displayName="LoadingMessage";const pI=e=>{const{spaceKey:t,isLoading:s,isLoadingOptions:n,options:a,onChange:i,validationState:c,validationMessage:l,onSelect:d,onEnter:u,link:p,fetchSuggestions:m,optionsError:f,resultType:b,clearSearchState:g}=e,{formatMessage:h}=Object(qe.c)(),y=Object(r.useCallback)((e=>{Object(SS.a)(e)?g():m(e)}),[g,m]),O=Object(r.useCallback)((()=>{d&&d(),m("")}),[m,d]),j=Object(r.useCallback)((()=>{m("")}),[m]),v=Object(r.useCallback)((e=>Object(SS.a)(e)),[]);return o.a.createElement(aI,{options:a,onChange:i,
intl:Object(qe.c)(),validationMessage:l,validationState:c,onSelect:O,onEnter:u,link:p,isLoading:s,isLoadingOptions:n,filterOption:()=>!0,onInputChange:y,customComponents:{LoadingMessage:uI},onBlur:j,onMenuClose:j,isValidNewOption:v,noOptionsMessage:()=>dI(f,b,h),additionalProps:{error:f,type:b,spaceKey:t}})};pI.displayName="ConfluenceSearchSelect";var mI=pI;const fI=(e,t,s="")=>{const n=Object(cS.b)();return{filtered:e.filter((e=>n(e,s))).slice(0,t),overall:e}};var bI=e=>{const{renderOptionsLimit:t=25,appId:s}=e,[n,a]=Object(r.useState)(!1),[i,o]=Object(r.useState)({filtered:[],overall:[]}),[c,l]=Object(r.useState)(null),[d,u]=Object(r.useState)(!1),p=Object(r.useCallback)((async()=>{try{a(!0);const e=await Object(Yc.b)((e=>`/rest/confluenceIssueLink/1/confluence/space?appId=${e}&_=${Date.now()}`)(s));if(e.spaces){const s=(e=>e.map((e=>({label:e.name,value:e.key,space:e}))))(e.spaces);o(fI(s,t))}a(!1)}catch(e){a(!1),Object(Dy.a)({error:e,meta:{id:"getConfluenceSpaceService",
packageName:"jiraIssueView",teamName:"bento"},sendToPrivacyUnsafeSplunk:!0}),l(e)}}),[s,t]),m=Object(r.useMemo)((()=>_g()((e=>{const{overall:s}=i;u(""!==e),o(fI(s,t,e))}),300,{leading:!1})),[t,i]);return[{loading:n,spaces:i,error:c,isFilteredResult:d},{fetchSpaces:p,filterSpaces:m}]},gI=Object(I.defineMessages)({filterBySpace:{id:"issue.views.confluence-search-view.filter-space",defaultMessage:"Filter by space"},allSpaces:{id:"issue.views.confluence-search-view.all-space",defaultMessage:"All spaces"},matchingSpaces:{id:"issue.views.confluence-search-view.matching-space",defaultMessage:"Matching spaces"}});const hI=ee.default.div.withConfig({componentId:"sc-1ohktob-0"})``,yI=["children"];function OI(){return(OI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function jI(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function vI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function EI(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vI(Object(s),!0).forEach((function(t){wI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const kI=e=>EI(EI({},jE.f),{},{menu:(t,s)=>EI(EI({},jE.f.menu?jE.f.menu(t,s):{}),{},{minWidth:e?"auto":"140%"})}),CI=e=>{let{children:t}=e,s=jI(e,yI);const{formatMessage:n}=Object(qe.c)(),{data:a}=s;return o.a.createElement(_E.z.SingleValue,s,o.a.createElement(Re.a,{content:a.label,position:"top"},a?o.a.createElement("div",null,a.label):o.a.createElement(kr.b,null,n(gI.filterBySpace))))};CI.displayName="SingleValue";const SI=e=>{const{innerProps:t,innerRef:s,getStyles:n,data:a}=e,i=n("option",e);return o.a.createElement(hI,{style:i},o.a.createElement("div",OI({},t,{ref:s}),o.a.createElement(kr.a,null,a.label)))};SI.displayName="CustomOption";const II=()=>!0,TI=e=>{const{formatMessage:t}=Object(qe.c)(),{appId:s,onSpaceKeyChange:n,spaceKey:a,isCompact:i}=e,[{loading:c,spaces:l,isFilteredResult:d},{fetchSpaces:u,filterSpaces:p}]=bI({appId:s}),{filtered:m}=l;Object(r.useEffect)((()=>{u()}),[u]);const f=Object(r.useCallback)((e=>{e&&e.space?n(e.value):n("")
}),[n]),b=Object(r.useCallback)(((e,{action:t})=>{"input-change"===t&&p(e)}),[p]),g=Object(r.useCallback)((()=>{p("")}),[p]),h=t(d?gI.matchingSpaces:gI.allSpaces);return o.a.createElement(jw.a,{options:[{label:h,options:m}],onInputChange:b,onChange:f,onMenuClose:g,filterOption:II,value:m.find((e=>e.value===a)),isClearable:!0,placeholder:t(gI.filterBySpace),isLoading:c,maxMenuHeight:256,minMenuHeight:256,components:{SingleValue:CI,Option:SI},styles:kI(i)})};TI.displayName="ConfluenceSpaceSelect";var _I=TI;const PI=e=>{const{linkedPages:t,mentionedPages:s,recentOptions:n,validationState:a,validationMessage:i,onSelect:c,onEnter:l,link:d,confluenceAppLinks:u,isLoading:p,onChange:m,containerWidth:f}=e,[b]=Object(r.useState)(u.length>0?u[0].id:""),[g,h]=Object(r.useState)(""),{formatMessage:y}=Object(qe.c)(),O=void 0!==f&&f<=480;return o.a.createElement(Up.a,{id:"confluence-search",packageName:"jiraIssueViewConfluence",fallback:"unmount"},o.a.createElement(ES,null,o.a.createElement(wS,{
isCompact:O},o.a.createElement(kS,{isCompact:O},o.a.createElement(_I,{onSpaceKeyChange:e=>{h(e)},spaceKey:g,appId:b,isCompact:O})),o.a.createElement(CS,null,o.a.createElement(vS,{appId:b,spaceKey:g,linkedPages:t,mentionedPages:s,recentOptions:n,labels:{recentPages:y(oS.defaultRecentPages),matchingPages:y(oS.defaultMatchingPages)}},(({fetchSuggestions:e,options:t,loading:s,error:n,type:r,clearState:u})=>o.a.createElement(mI,{spaceKey:g,isLoading:p,isLoadingOptions:s,options:t,onChange:m,validationState:a,validationMessage:i,onSelect:c,onEnter:l,link:d,fetchSuggestions:e,optionsError:n,resultType:r,clearSearchState:u})))))))};PI.displayName="ConfluenceSearchGroupView";var xI=Object(wi.a)(PI)
;const DI="addconfluencelink.error.duplicate",AI="addconfluencelink.error.page.forbidden",MI="addconfluencelink.error.issueId.invalid",LI="addconfluencelink.error.no.matching.app.link",RI="addconfluencelink.error.pageid.notfound",NI="addconfluencelink.error.page.unauthorized",FI="addconfluencelink.error.url.invalid",UI="addconfluencelink.error.url.required";var VI=Object(I.defineMessages)({fieldLabel:{id:"issue.views.confluence-pages.link.label",defaultMessage:"Search pages or paste in a link"},fieldPlaceholder:{id:"issue.views.confluence-pages.link.placeholder",defaultMessage:"Search pages or paste in a link"},genericErrorText:{id:"issue.views.confluence-pages.link.error.generic",defaultMessage:"We're having trouble. Check your connection and try again."},duplicateErrorText:{id:"issue.views.confluence-pages.link.error.duplicate",defaultMessage:"That page is already linked to this issue."},forbiddenErrorText:{id:"issue.views.confluence-pages.link.error.forbidden",
defaultMessage:"You don't have permission to link to Confluence pages."},issueIdErrorText:{id:"issue.views.confluence-pages.link.error.issue-id",defaultMessage:"We're having trouble. Check your connection and try again."},noMatchingApplinkErrorText:{id:"issue.views.confluence-pages.link.error.no-matching-app-link",defaultMessage:"You don't have an application link set up for that Confluence site."},pageIdNotFoundErrorText:{id:"issue.views.confluence-pages.link.error.page-id-not-found",defaultMessage:"We can't find that page. It might be deleted or restricted."},unauthorizedErrorText:{id:"issue.views.confluence-pages.link.error.unauthorized",defaultMessage:"You need to authorize this pages' Confluence site."},urlInvalidErrorText:{id:"issue.views.confluence-pages.link.error.url-invalid",defaultMessage:"That URL doesn't look right. Try entering it again."},urlRequiredErrorText:{id:"issue.views.confluence-pages.link.error.url-required",
defaultMessage:"That URL doesn't look right. Try entering it again."},linkButton:{id:"issue.views.confluence-pages.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.confluence-pages.link.cancel-button",defaultMessage:"Cancel"}});const KI={[DI]:VI.duplicateErrorText,[AI]:VI.forbiddenErrorText,[MI]:VI.issueIdErrorText,[LI]:VI.noMatchingApplinkErrorText,[RI]:VI.pageIdNotFoundErrorText,[NI]:VI.unauthorizedErrorText,[FI]:VI.urlInvalidErrorText,[UI]:VI.urlRequiredErrorText};var $I=e=>KI[e]||VI.genericErrorText;const WI=Object(Bw.a)(J.a,{target:"eplslgz0"})("margin-left:",te.e,"px !important;"),BI=ee.default.div.withConfig({componentId:"sc-1ljp9hl-0"})`margin-top:${te.e}px;display:flex;justify-content:flex-end;`;class HI extends r.Component{constructor(e){super(e),this.onChildContainerRefSet=e=>{this.childContainer=e},this.onChange=e=>{const{isInvalid:t,onInvalidLinkModified:s}=this.props,n=Nw()(e),a=Wp()(n);this.setState({isDisabled:a,link:n}),t&&s()},
this.onSubmitClicked=()=>{this.onSubmit(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{this.closeAndReset(),this.props.onCancelClickAnalytics()},this.onEnterPressed=()=>{this.onSubmit(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onSelect=e=>{this.setState({link:e,isDisabled:!1}),this.props.onSelectAnalytics()},this.childContainer=void 0,this.initialState={link:"",isDisabled:!0,showList:!1},this.state=this.initialState}componentDidMount(){Object(wo.a)(this.childContainer),this.props.requestRecentlyViewedPages()}componentDidUpdate(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&Object(wo.a)(this.childContainer),this.props.linkedPagesCount>e.linkedPagesCount&&!this.props.isLoading&&e.isLoading&&this.resetAndFocus()}onSubmit(){const{isDisabled:e,link:t}=this.state,{isLoading:s,onSubmit:n}=this.props;e||s||n(t)}closeAndReset(){this.props.isLoading||(this.reset(),
this.props.onCancel())}resetAndFocus(){this.reset()}reset(){this.setState(this.initialState)}render(){const{intl:{formatMessage:e},errorMessage:t,isInvalid:s,isLoading:n,recentlyViewedPages:a,confluenceAppLinks:i,mentionedPages:r,linkedPages:c}=this.props,{link:l,isDisabled:d}=this.state,u=a.map((e=>({label:e.title,value:e.href,page:e})));return o.a.createElement("div",{ref:this.onChildContainerRefSet},o.a.createElement(z.a,{onEscape:this.onEscPressed},o.a.createElement(xI,{recentOptions:u,onChange:this.onChange,validationMessage:s?e($I(t)):void 0,validationState:s?"error":"default",onSelect:this.props.onSelectAnalytics,onEnter:this.onEnterPressed,link:l,isLoading:n,confluenceAppLinks:i||[],linkedPages:c||[],mentionedPages:r||[]})),o.a.createElement(BI,null,o.a.createElement(WI,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:d,isLoading:n},e(VI.linkButton)),o.a.createElement(WI,{appearance:"subtle",onClick:this.onCancelClicked},e(VI.cancelButton))))}}
HI.displayName="ConfluencePageCreateLinkView";var GI=Object(Is.a)([I.injectIntl,Object(Ys.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked"}),Object(Ys.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(Ys.a)("confluencePagesCreateLinkView",{onSubmit:"onSubmit"}),Object(T.a)({onSubmitClickAnalytics:"linkConfluencePage",onCancelClickAnalytics:"cancelLinkConfluencePage",onEnterKeyPressedAnalytics:"linkConfluencePage",onEscapeKeyPressedAnalytics:"cancelLinkConfluencePage"}),Object(Ys.a)("recentlyVisitedPages",{onSelectAnalytics:"selected"}),Object(T.a)({onSelectAnalytics:"selectConfluencePage"}),Object(c.connect)((e=>({linkedPagesCount:Object(wC.g)(e),errorMessage:Object(wC.b)(e),isInvalid:Object(wC.d)(e),isLoading:Object(wC.e)(e),createLinkClickedCount:Object(wC.a)(e),recentlyViewedPages:rS(e),confluenceAppLinks:CC(e),linkedPages:Object(wC.h)(e),mentionedPages:Object(wC.j)(e)})),(e=>({
onInvalidLinkModified:()=>e(Object(EC.b)()),onCancel:()=>e(Object(EC.i)()),onSubmit:(t,s)=>e(Object(EC.c)(Object(Vr.j)(t),s)),requestRecentlyViewedPages:()=>e(Object(iS.b)())})))])(HI);const qI=ee.default.h3.withConfig({componentId:"vlrd2g-0"})`${Ze.d.h200()} margin:0;`,zI=ee.default.div.withConfig({componentId:"vlrd2g-1"})`margin:${te.e}px 0;padding-right:1px;`;class YI extends r.Component{constructor(...e){super(...e),this.renderHeading=()=>{const{canLinkConfluencePage:e,onAddButtonClicked:t}=this.props;return o.a.createElement(Si.c,null,o.a.createElement(Si.e,null,o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.heading",defaultMessage:"Confluence pages"})),o.a.createElement(Si.d,null,e&&this.hasLinkedPages()&&o.a.createElement(aS,{onClick:t})))},this.renderLinkedPagesIfAny=()=>this.hasAnyLinkedPageLoaded()&&this.props.linkedPages?o.a.createElement(JC,{groupId:"linked-confluence-pages",pages:this.props.linkedPages,onClick:this.props.onLinkedPageClicked,
onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null,this.renderMentionedPagesIfAny=()=>this.hasAnyMentionedPageLoaded()&&this.props.mentionedPages?o.a.createElement(JC,{groupId:"mentioned-confluence-pages",pages:this.props.mentionedPages,onClick:this.props.onMentionedPageClicked,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null}shouldShowConfluencePages(){return this.props.isCreateLinkedPageOpened||this.hasLinkedPages()||this.hasMentionedPages()}hasLinkedPages(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasMentionedPages(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}hasAnyLinkedPageLoaded(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasAnyMentionedPageLoaded(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}renderLinkedPages(){
return o.a.createElement(zI,null,this.props.linkedPages?this.renderLinkedPagesIfAny():o.a.createElement(eS,{itemCount:this.props.linkedPagesCachedCount}))}renderMentionedPages(){return o.a.createElement(zI,null,o.a.createElement(qI,null,o.a.createElement(I.FormattedMessage,{id:"issue.details.confluence-pages.mentioned-on",defaultMessage:"mentioned on"})),this.props.mentionedPages?this.renderMentionedPagesIfAny():o.a.createElement(eS,{itemCount:this.props.mentionedPagesCachedCount}))}renderCreateLinkedPage(){return this.props.isCreateLinkedPageOpened?o.a.createElement(GI,null):null}renderConfluencePageFragment(){return o.a.createElement(o.a.Fragment,null,this.renderHeading(),this.hasLinkedPages()&&this.renderLinkedPages(),this.hasMentionedPages()&&this.renderMentionedPages(),this.renderCreateLinkedPage())}render(){return this.props.isConfluencePageLinksEnabled&&this.shouldShowConfluencePages()?this.renderConfluencePageFragment():null}}YI.displayName="ConfluencePagesView",
YI.defaultProps={isConfluencePageLinksEnabled:!1,linkedPagesCachedCount:0,mentionedPagesCachedCount:0};var QI=Object(Is.a)([Object(Ys.a)("ItemLineCardGroup",{onMentionedPageClicked:"clicked",onLinkedPageClicked:"clicked"}),Object(T.a)({onMentionedPageClicked:"MentionedConfluencePage",onLinkedPageClicked:"LinkedConfluencePage"}),Object(Ys.a)("DeleteConfluencePage",{onDeleteConfluencePageLink:"clicked"}),Object(T.a)({onDeleteConfluencePageLink:e=>({name:"onDeleteConfluencePageLink",globalId:e})}),Object(c.connect)((e=>({isCreateLinkedPageOpened:Object(wC.f)(e),linkedPages:Object(wC.h)(e),linkedPagesCachedCount:Object(wC.g)(e),mentionedPages:Object(wC.j)(e),mentionedPagesCachedCount:Object(wC.i)(e),isConfluencePageLinksEnabled:Object(wC.c)(e),canLinkConfluencePage:IC(e)})),(e=>({onAuthenticateApplink:t=>e(Object(vC.a)(t)),onDeleteConfluencePageLink:t=>e(Object(EC.f)(t)),onAddButtonClicked:()=>e(Object(EC.h)())
})))])(YI),JI=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const ZI=Object(zn.createSelector)(Hc.c,(e=>!!e.find(Hc.b))),XI=Object(zn.createSelector)(JI.h,ZI,M.r,M.o,(({canCreateIssuesInClassicProjectEpic:e},t,s,n)=>e&&!(!!t&&(s||n))));var eT=Object(I.defineMessages)({title:{id:"issue.epic-issues-title",defaultMessage:"Issues in this epic"}});const tT=["onNavigateToNewIssueDispatchProp"];function sT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sT(Object(s),!0).forEach((function(t){aT(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sT(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))
}))}return e}function aT(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function iT(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function rT(){return(rT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const oT=e=>{const t=e.onChange,s=Object(cs.g)(),[n,{setFieldValue:a}]=Object(Vl.b)({issueKey:s,fieldKey:"epic-issues"}),i=Object(r.useCallback)((e=>{switch(e.type){case CO.CHILD_ISSUE_ADDED:a(s,"epic-issues",n.concat({id:e.meta.childIssue.id,key:e.meta.childIssue.issueKey}))}t(e)
}),[n,s,t,a]);return o.a.createElement(uC,rT({},e,{onChange:i}))};oT.displayName="ConnectedComponent";var cT=Object(c.connect)((e=>({childIssuesPanelType:"classicProjectEpicChildren",parentId:Object(M.w)(e),epicLinkFieldKey:Object(L.g)(e),issueTypes:Object(Hc.c)(e),issues:Object(EO.a)(e),messages:eT,quickAddClickCount:jO(e),supportsIssueCreation:XI(e),isIssueViewComplete:Object(L.n)(e),fetchIssueTypesStatus:Object(Hc.a)(e)})),(e=>({onChange:t=>{switch(t.type){case CO.CHILD_ISSUE_ADDED:e(bO(t.meta.childIssue,t.meta.fieldsData))}},onAddChildClick:()=>e(gO()),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(hO.c)({fromIssueKey:t,toIssueKey:s}))}})),((e,t)=>{const{onNavigateToNewIssueDispatchProp:s}=t,n=iT(t,tT);return nT(nT(nT({},e),n),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t})}})
}))(oT),lT=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),dT=n("./src/packages/issue/issue-view/src/actions/issue-links-actions.js"),uT=n("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js"),pT=n("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),mT=n("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js"),fT=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),bT=n("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js");const gT=Object(zn.createSelector)(L.f,(e=>e.jiraAppLinks||{status:"NOT_LOADED",remoteLinks:[]})),hT=Object(zn.createSelector)(gT,(e=>e.status)),yT=Object(zn.createSelector)(pT.e,kC.b,((e,t)=>e&&t)),OT=Object(zn.createSelector)(gT,(e=>e.remoteLinks)),jT=/\/browse\/((?:\w+)-(?:\d+))/,vT=t=>{if(Wp()(t))return null;try{const e=new URL(t),s=e.origin,n=(e=>{const t=e.match(jT)
;return t&&t[1].match(/^(([A-Z][A-Z0-9]+)-([0-9]+))($|\?.*)/)&&t[1]||""})(e.pathname);return Wp()(n)?null:{host:s,issueKey:n}}catch(e){return null}},ET=e=>{const{selectItems:t,selectedItem:s,onChange:n}=e;return o.a.createElement(jw.a,{options:t,defaultValue:s,styles:jE.f,onChange:n})};ET.displayName="IssueLinkTypeSelect",ET.defaultProps={selectedItem:null};const wT=Object(I.defineMessages)({remoteLinkAuthText:{id:"issues.issue-links.jira-app-link-option.auth-required",defaultMessage:"Authenticate to search"}}),kT=ee.default.span.withConfig({componentId:"g72qtx-0"})`margin-right:10px;`,CT=({value:e,intl:t,onAuthenticateAppLink:s})=>e.fullObject.requireCredentials?o.a.createElement(Re.a,{content:e.fullObject.baseUrl,position:"bottom"},o.a.createElement("p",null,o.a.createElement(kT,null,e.label),o.a.createElement(J.a,{spacing:"none",appearance:"link",onClick:(t,n)=>((t,n)=>{t.preventDefault(),void 0!==s&&(s(e.fullObject.authUrl,n),n&&Object(Ki.h)(n,"JiraApplinkSelectAuthentication",{
appLinkId:e.fullObject.id}))})(t,n),iconBefore:o.a.createElement(iy.a,{size:"small",label:""})},o.a.createElement("span",null,t.formatMessage(wT.remoteLinkAuthText))))):o.a.createElement(Re.a,{content:e.fullObject.baseUrl,position:"bottom"},o.a.createElement(kT,null,e.label));CT.displayName="JiraAppLinkOption";var ST=CT;const IT=Object(h.a)({onMenuOpen:{action:"opened",component:"select"},onMenuClose:{action:"closed",component:"select"}})(jw.a);function TT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _T(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?TT(Object(s),!0).forEach((function(t){PT(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):TT(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function PT(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const xT=_T(_T({},jE.f),{},{menu:(e,t)=>_T(_T({},jE.f.menu?jE.f.menu(e,t):{}),{},{minWidth:t.selectProps.containerWidth||"auto"}),option:(...e)=>_T(_T({},jE.f.option?jE.f.option(...e):{}),{},{overflow:"initial"})});class DT extends r.Component{handleClick(e,t,s){e.preventDefault(),void 0!==this.props.onAuthenticateAppLink&&(this.props.onAuthenticateAppLink(t.fullObject.authUrl,s),s&&Object(Ki.h)(s,"JiraApplinkSelectAuthentication",{appLinkId:t.fullObject.id}))}formatOptionLabel(e){return o.a.createElement(ST,{value:e,intl:this.props.intl,onAuthenticateAppLink:this.props.onAuthenticateAppLink})}getNumAppLinksRequiringAuth(){return this.props.selectItems.filter((e=>e.fullObject.requireCredentials)).length}sendMenuAnalytics(e,t){
e&&Object(Ki.h)(e,`issueView.JiraAppLinksSelect ${t}`,"JiraAppLinksSelect",{numAppLinks:this.props.selectItems.length-1,numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}onChange(e,t){this.props.onChange(e),t&&Object(Ki.h)(t,"issueView.JiraAppLinksSelect changed","JiraAppLinksSelect",{appLinkId:e.fullObject.id})}render(){const{selectItems:e,value:t,containerWidth:s}=this.props;return o.a.createElement($.a,null,o.a.createElement(W.a,{packageName:"jiraIssueView",id:"JiraAppLinksSelect"},o.a.createElement(IT,{options:e,value:t,onChange:(e,t,s)=>this.onChange(e,s),formatOptionLabel:e=>this.formatOptionLabel(e),isOptionDisabled:e=>e.fullObject.requireCredentials,styles:xT,onMenuOpen:e=>this.sendMenuAnalytics(e,"opened"),onMenuClose:e=>this.sendMenuAnalytics(e,"closed"),containerWidth:s}),o.a.createElement($i.a,{onMount:t=>{t&&Object(Ki.h)(t,"issueView.JiraAppLinksSelect mounted","JiraAppLinksSelect",{numAppLinks:e.length-1,
numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}})))}}DT.displayName="JiraAppLinksSelect";const AT=Object(I.injectIntl)(DT);var MT=kt()([Object(c.connect)((()=>({})),(e=>({onAuthenticateAppLink:(t,s)=>e(Object(vC.a)(t,s))})))])(AT);const LT=/^(([A-Z][A-Z0-9]+)-([0-9]+))($|\?.*)/,RT=()=>""!==window.location.port?Object(Vr.c)(`${window.location.protocol}//${window.location.hostname}:${window.location.port}`):Object(Vr.c)(`${window.location.protocol}//${window.location.hostname}`);var NT=(e,t)=>{let s=e;if(void 0===s||void 0===t)return t||"";if(s.endsWith("/")||(s+="/"),s+="browse/",0!==t.indexOf(s))return t;const n=t.slice(s.length).match(LT);return null===n?t:n[1]||""};const FT="local",UT="Local",VT={label:UT,value:FT,fullObject:{id:FT,name:UT,baseUrl:RT(),authUrl:Object(Vr.j)(""),requireCredentials:!1}}
;var KT=n("./node_modules/lodash/keys.js"),$T=n.n(KT),WT=n("./src/packages/platform/utils/constants/src/issue-link-types.js"),BT=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-ui-event.js"),HT=Object(I.defineMessages)({createLinkedIssueButtonLabel:{id:"issue.linked-issue-create.button-label",defaultMessage:"Create linked issue"},createLinkedIssueDialogTitle:{id:"issue.linked-issue-create.dialog-title",defaultMessage:"Create linked issue"}});function GT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qT(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zT=(e,t)=>{let s={};const n=qs()(cc()(e,["fields","issuelinks"]),(e=>cc()(e.outwardIssue||e.inwardIssue,"id")===t));if(void 0!==n){
const e=(e=>e.outwardIssue?"INWARD":"OUTWARD")(n);s={issueLink:{id:n.id,direction:e,linkType:{id:cc()(n,["type","id"],""),label:"INWARD"===e?cc()(n,["type","inward"],""):cc()(n,["type","outward"],"")}}}}return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?GT(Object(s),!0).forEach((function(t){qT(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):GT(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:Object(Vr.k)(e.id),key:Object(Vr.m)(e.key),summary:cc()(e,["fields","summary"],""),issueTypeIconUrl:cc()(e,["fields","issuetype","iconUrl"],"")},s)};const YT="issue.views.issue-base-content.issue-links.add.create-linked-issue-button.view";class QT extends r.Component{constructor(...e){super(...e),this.showCreateLinkedIssueDialog=async()=>{const{baseUrl:e,sourceIssueId:t,sourceIssueKey:s,onLinkedIssueCreated:n}=this.props
;this.showLoadingIndicator();try{const a=await Object(Ca.a)({name:"wrm/require"});await new Promise((e=>{a("wr!com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue",e)}));(await Object(Ca.a)({name:"quick-edit/create-linked-issue/create-linked-issue-dialog"})).show({sourceIssueId:t,sourceIssueKey:s}).getQuickForm().bind("issueCreated",((s,{createdIssueDetails:a})=>{n(((e,t,s)=>{const n=zT(e,t);if(void 0===n.issueLink)return{issueLinks:{},linkedIssues:{}};const{issueLink:a}=n;return{issueLinks:{[`${a.id}`]:{id:a.id,linkedIssueKey:n.key,direction:a.direction,typeName:a.linkType.label,typeId:a.linkType.id}},linkedIssues:{[`${n.key}`]:{id:n.id,issueKey:n.key,issueLink:Object(cv.f)(s,n.key),issueSummary:n.summary,issueTypeIconUrl:n.issueTypeIconUrl}}}})(a,t,e))}))}catch(a){this.hideLoadingIndicator(),v.a.safeErrorWithoutCustomerData(YT,a)}},this.onCreateLinkedIssueClick=(e,t)=>{Object(BT.a)(t,{name:"createLinkedIssue"}),this.showCreateLinkedIssueDialog()},
this.showLoadingIndicator=async()=>{try{(await Object(Ca.a)({name:"quick-edit/util/loading-indicator",wrmKeys:"wrc!com.atlassian.jira.jira-quick-edit-plugin:loading-indicator"})).showLoadingIndicator()}catch(e){v.a.safeErrorWithoutCustomerData(YT,e)}},this.hideLoadingIndicator=async()=>{try{(await Object(Ca.a)({name:"quick-edit/util/loading-indicator",wrmKeys:"wrc!com.atlassian.jira.jira-quick-edit-plugin:loading-indicator"})).hideLoadingIndicator()}catch(e){v.a.safeErrorWithoutCustomerData(YT,e)}}}render(){const{intl:{formatMessage:e}}=this.props;return o.a.createElement(J.a,{spacing:"compact",onClick:this.onCreateLinkedIssueClick,appearance:"link",iconBefore:o.a.createElement(TE.a,{size:"small",label:e(HT.createLinkedIssueButtonLabel)})},e(HT.createLinkedIssueButtonLabel))}}QT.displayName="CreateLinkedIssueButton";const JT="created";var ZT=Object(Is.a)([I.injectIntl,Object(Ys.a)("createLinkedIssueButton",{onLinkedIssueCreated:JT}),Object(c.connect)((e=>({baseUrl:Object(M.f)(e),
sourceIssueKey:Object(M.x)(e),sourceIssueId:Object(Vr.k)(String(Object(M.w)(e)))})),(e=>({onLinkedIssueCreated:(t,s)=>{e(Object(dT.c)(t)),e(Object(dT.b)()),(({issueLinks:e,linkedIssues:t},s)=>{const n=$T()(e)[0];if(void 0!==n){const a=e[n],i=t[a.linkedIssueKey],r={action:JT,actionSubjectId:i.id,attributes:{linkTypeName:Object(WT.a)(a.typeName),linkTypeId:a.typeId,issueLinkId:n}};Object(y.a)(s,r)}})(t,s)}})))])(QT),XT=n("./node_modules/@atlaskit/icon/glyph/editor/info.js"),e_=n.n(XT),t_=Object(I.defineMessages)({createReciprocalLinkCheckboxLabel:{id:"issue.create-reciprocal-link.checkbox-label",defaultMessage:"Create reciprocal link"},createReciprocalLinkCheckboxTooltip:{id:"issue.create-reciprocal-link.checkbox-tooltip",defaultMessage:"Jira will create a link from the issue on the remote Jira instance back to this issue"}});const s_=ee.default.div.withConfig({componentId:"sc-1yosl4y-0"})`flex-grow:1;display:flex;`,n_=({isChecked:e,onChange:t,onShow:s})=>{
const{formatMessage:n}=Object(qe.c)();return o.a.createElement(s_,null,o.a.createElement(Ge.a,{isChecked:e,onChange:t,label:n(t_.createReciprocalLinkCheckboxLabel),name:"create-reciprocal-link"}),o.a.createElement(Re.a,{content:n(t_.createReciprocalLinkCheckboxTooltip),onShow:s,position:"bottom"},o.a.createElement(e_.a,{size:"medium",label:""})))};n_.displayName="CreateReciprocalLink";const a_=/^([A-Z][A-Z0-9]+)-([0-9]+)$/i,i_=(e,t)=>({sections:s=[]}={})=>{const{baseUrl:n=Object(Vr.c)(""),id:a}=t||{};return s.map((e=>e.issues)).filter((e=>!!e)).reduce(((t,s)=>t.concat(s.map((t=>({content:`${t.key} ${t.summaryText}`,value:t.key,id:t.id?t.id.toString():"",elemBefore:Object(r.createElement)("img",{src:`${n}${t.img}`,width:16,height:16}),fullObject:t,filterValues:[e],iconUrl:`${n}${t.img}`,appLinkId:a}))))),[]).reduce(((e,t)=>e.findIndex((e=>e.value===t.value))<0?[...e,t]:e),[])},r_=(e,t,s,n)=>(e=>{if(e){const t=a_.exec(e);return!(!t||3!==t.length)}return!1})(s)?((e,t,s,n)=>{
const a=void 0===n?Object(cv.a)(e,t,s):Object(cv.k)(e,s,n.id);return Object(kv.a)(a)})(e,t,Object(Vr.m)(s),n).map(i_(s,n)).catch((()=>Fj.Observable.of([]))):Fj.Observable.of([]);var o_=n("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),c_=Object(I.defineMessages)({searchPlaceholder:{id:"issue.issue-links-search-placeholder",defaultMessage:"Search for issues"},openIssues:{id:"issue.issue-links-search-open-issues",defaultMessage:"Open Issues"},exactKey:{id:"issue.issue-links-exact-key",defaultMessage:"Exact key"},noHistoryResults:{id:"issue.issue-link-no-history-results",defaultMessage:"Type to search for an issue summary or key"}});class l_ extends r.Component{constructor(...e){super(...e),this.fetchSuggestions=e=>{const{baseUrl:t,remoteAppLink:s,issueKey:n,intl:a}=this.props,i=a.formatMessage(c_.openIssues),r=a.formatMessage(c_.noHistoryResults);return((e,t,s,n)=>{const a=void 0===n?Object(cv.p)(e,t,s):Object(cv.l)(e,s,n.id)
;return Object(kv.a)(a).map(i_(s,n))})(t,n,e,s).map((e=>e.length?[{heading:i,items:e}]:[{items:[{content:r,isDisabled:!0,value:""}]}])).toPromise()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(Kr.c)().markStartOfInteraction({key:ko.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE,cancelExisting:!0}):"remove-value"===t.action&&Object(Kr.c)().markStartOfInteraction({key:ko.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE,cancelExisting:!0})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(Kr.c)().markStartOfInteraction({key:ko.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e})=>{e||Object(Kr.c)().markTimeToFinishTask({key:ko.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT})},this.stripQueryValueToIssueKey=e=>{const{remoteAppLink:t}=this.props,s=void 0===t?RT():t.baseUrl;return NT(s,e)},this.filterIssueOptions=(e,t)=>this.filterIssueSuggestionByAppLink(e)&&Object(o_.a)(e,t),
this.filterIssueSuggestionByAppLink=e=>{if(Boolean(e.data&&e.data.fullObject)){var t,s;return(null===(t=e.data)||void 0===t?void 0:t.appLinkId)===(null===(s=this.props.remoteAppLink)||void 0===s?void 0:s.id)}return!0}}componentDidUpdate(e){const t=this.props.value.length,s=e.value.length;s<t?Object(Kr.c)().markTimeToFinishTask({key:ko.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE}):s>t&&Object(Kr.c)().markTimeToFinishTask({key:ko.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE})}render(){const{value:e,intl:t,remoteAppLink:s,invalidMessage:n}=this.props,a={isRemote:void 0!==s};return o.a.createElement(vw.a,{fieldId:"issue-link-search",classNamePrefix:"issue-links-search",value:e,fetchSuggestions:this.fetchSuggestions,onChangeMulti:this.onChange,canCreateNewItem:!0,formatCreateLabel:e=>`${e} (${t.formatMessage(c_.exactKey)})`,placeholder:t.formatMessage(c_.searchPlaceholder),invalidMessage:n,changeQueryValue:this.stripQueryValueToIssueKey,isMulti:!0,autoFocus:!0,errorMessagePosition:"bottom",
onDataLoaded:this.onDataLoaded,onDataRequest:this.onDataRequest,inputId:"issue-link-search",additionalAnalyticsProps:a,filterOption:this.filterIssueOptions})}}l_.displayName="IssueSearchSelect";var d_=Object(I.injectIntl)(l_),u_=Object(I.defineMessages)({selfLinkInvalidIssue:{id:"issue.issue-link-invalid-self-link",defaultMessage:"Can't link the issue {issueKey} to itself."},unauthenticatedAppLink:{id:"issue.unauthenticated-app-link",defaultMessage:"Unauthenticated site. Try authenticating before, then link again."},unauthenticatedAppLinkWithSiteName:{id:"issue.unauthenticated-app-link-with-site-name",defaultMessage:"Unauthenticated site. Try authenticating the site {appLinkName}, then link again."},invalidIssue:{id:"issue.issue-link-invalid-issue",defaultMessage:"Can't find {issueKey}. Try searching for another issue key, or in another site."},twoInvalidIssues:{id:"issue.issue-link-two-invalid-issues",
defaultMessage:"Can't find {issueKeys}. Try searching for other issue keys or in another site."},multipleInvalidIssues:{id:"issue.issue-link-multiple-invalid-issues",defaultMessage:"Can\u2019t find {firstTwoIssueKeys} and {countRemainingIssues} other {countRemainingIssues, plural, one {issue} other {issues}}. Try searching for other issue keys or in another site."},otherAppLink:{id:"issue.other-applink",defaultMessage:"We can only link issues from one site at a time. Try linking issues from one site first."}});const p_=ee.default.div.withConfig({componentId:"sc-1r9r2al-0"})`display:flex;flex-direction:${({isCompact:e})=>e?"column":"row"};justify-content:space-around;align-content:stretch;> *{margin-top:${te.e}px;}>:not(:last-child){margin-right:${({isCompact:e})=>e?"0":`${te.e}px`};}`,m_=ee.default.div.withConfig({componentId:"sc-1r9r2al-1"})`flex:1;flex-basis:auto;`,f_=ee.default.div.withConfig({componentId:"sc-1r9r2al-2"
})`margin-top:${te.e}px;display:flex;flex-wrap:wrap;justify-content:flex-end;margin-left:auto;`,b_=ee.default.div.withConfig({componentId:"sc-1r9r2al-3"})`flex-grow:1;margin-left:-${1.5*te.e}px;`,g_=ee.default.div.withConfig({componentId:"sc-1r9r2al-4"})`max-width:${({isCompact:e})=>e?"none":25*te.e+"px"};width:${({isCompact:e})=>e?"100%":"27%"};min-width:${17*te.e}px;`;function h_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h_(Object(s),!0).forEach((function(t){O_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O_(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j_=(e,t,s,n)=>({issueLinks:{[e]:{id:e,linkedIssueKey:s.key,direction:t.direction,typeName:t.label,typeId:t.id}},linkedIssues:{[`${s.key}`]:{id:s.key,issueKey:s.key,issueId:null!==s.id&&void 0!==s.id?s.id.toString():null,issueLink:Object(cv.f)(n,s.key),issueSummary:s.summaryText?s.summaryText:"",issueTypeIconUrl:s.img?s.img:""}}}),v_=(e,t)=>Object(Vr.u)(`appId=${e}&issueId=${t}`);function E_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E_(Object(s),!0).forEach((function(t){k_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E_(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k_(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const C_={newIssueLinks:[],isDisabled:!0,invalidSelections:[],invalidSelectionsWithReason:[]},S_=(e,t)=>{if(Wp()(t))return;let s=t[0].reason;t.some((({reason:e})=>"invalid"===e))?s="invalid":t.some((({reason:e})=>"unauthenticated"===e))&&(s="unauthenticated");const n=t.filter((e=>e.reason===s)),a=n.filter((e=>{var t;return(null==e||null===(t=e.jiraAppLink)||void 0===t?void 0:t.requireCredentials)||!1})).map((e=>{var t;return null==e||null===(t=e.jiraAppLink)||void 0===t?void 0:t.name})).pop();switch(s){case"self_link":return e.formatMessage(u_.selfLinkInvalidIssue,{issueKey:t[0].value});case"other_applink":return e.formatMessage(u_.otherAppLink);case"unauthenticated":return a?e.formatMessage(u_.unauthenticatedAppLinkWithSiteName,{appLinkName:a}):e.formatMessage(u_.unauthenticatedAppLink)
;case"invalid":return((e,t)=>1===t.length?e.formatMessage(u_.invalidIssue,{issueKey:t[0]}):2===t.length?e.formatMessage(u_.twoInvalidIssues,{issueKeys:t.join(", ")}):t.length>=3?e.formatMessage(u_.multipleInvalidIssues,{firstTwoIssueKeys:t.slice(0,2).join(", "),countRemainingIssues:t.length-2}):"")(e,n.map((e=>e.value)));default:return}},I_=e=>{const t=e.map((e=>(e=>({label:`${e.name}`,value:e.id,fullObject:e}))(e)));return[VT,...t]};class T_ extends r.Component{constructor(e){super(e),this.getInitialState=()=>w_({issueLinkType:this.transformIssueLinkTypesForSelect()[0],jiraAppLink:VT,createReciprocalLink:!0},C_),this.isLocalJira=e=>e.value===VT.value,this.getRemoteAppLink=()=>{const{jiraAppLink:e}=this.state;return this.isLocalJira(e)?void 0:e.fullObject},this.onIssueLinkTypeChange=e=>this.setState({issueLinkType:e}),this.onJiraAppLinkChange=e=>this.setState(w_({jiraAppLink:e,createReciprocalLink:!this.isLocalJira(e)},C_)),this.getInvalidSelectionForIssuesWithDifferentAppLinks=e=>{
if(e.some((e=>!Wp()(e.issueLink.fullObject)))&&e.some((e=>!Wp()(e.appLink)&&e.appLink.fullObject.baseUrl!==this.state.jiraAppLink.fullObject.baseUrl)))return{value:"",reason:"other_applink"}},this.getInvalidSelectionForUnauthenticatedAppLink=e=>{const t=e.filter((e=>{var t,s;return null===(t=e.appLink)||void 0===t||null===(s=t.fullObject)||void 0===s?void 0:s.requireCredentials})).shift();var s;if(t)return{value:t.issueKey,jiraAppLink:null==t||null===(s=t.appLink)||void 0===s?void 0:s.fullObject,reason:"unauthenticated"}},this.getInvalidSelectionForSelfLink=e=>{if(e.some((e=>this.props.issueKey===e.issueKey)))return{value:this.props.issueKey,reason:"self_link"}},this.getNewIssueLinksWrapperFrom=e=>{const{jiraAppLinks:t}=this.props,s=I_(t);return e.map((e=>{if(Wp()(e.fullObject)){const t=vT(e.value),n=t&&s.filter((e=>e.fullObject.baseUrl===t.host)).shift();return{issueLink:e,issueKey:n&&t?t.issueKey:e.value,appLink:n}}return{issueLink:e,issueKey:e.value}}))},
this.getCommonAppLinkFromIssueCandidates=e=>{var t,s;return 1===e.length&&!1===(null===(t=e[0].appLink)||void 0===t||null===(s=t.fullObject)||void 0===s?void 0:s.requireCredentials)&&e[0].appLink},this.onIssueSearchChange=e=>{const t=[],s=this.getNewIssueLinksWrapperFrom(e),n=this.getInvalidSelectionForIssuesWithDifferentAppLinks(s)||this.getInvalidSelectionForUnauthenticatedAppLink(s)||this.getInvalidSelectionForSelfLink(s),a=this.getCommonAppLinkFromIssueCandidates(s)||this.state.jiraAppLink,i=s.map((e=>{const{issueLink:s,issueKey:i,appLink:r}=e,o=Wp()(r)||r.fullObject.baseUrl===a.fullObject.baseUrl;return!s.fullObject&&o&&(n&&n.value===i||t.push((()=>this.query$.next({queryIssueKey:i,remoteAppLink:this.isLocalJira(a)?void 0:a.fullObject})))),w_(w_({},s),{},{value:o?i:s.value,content:o?i:s.content,tag:{elemBefore:s.elemBefore}})})),r=!(!n&&!Wp()(e));this.setState({newIssueLinks:i,isDisabled:r,invalidSelectionsWithReason:n&&[n]||[],jiraAppLink:a}),t.map((e=>e()))},
this.updateInvalidSelections=e=>{const t=e?e.map((e=>e.value)):[];return this.state.invalidSelections.filter((e=>t.includes(e)))},this.onCreateReciprocalLinkChange=(e,t)=>{const s=!this.state.createReciprocalLink;this.setState({createReciprocalLink:s}),Object(Ki.h)(t,"createReciprocalLink",{isChecked:s})},this.onShowReciprocalLinkTooltip=e=>{Object(Ki.h)(e,"createReciprocalLink")},this.onSave=(e,t)=>{const{issueLinkType:s,newIssueLinks:n,jiraAppLink:a,createReciprocalLink:i}=this.state,{issueLinks:r}=this.props,o=this.isLocalJira(a);Object(Ki.h)(t,"addLinkedIssueButton",{isRemote:!o,newLinkedIssueIds:n.map((e=>e.id))}),s&&n&&n.length>0&&(Object(Kr.c)().markStartOfInteraction({key:ko.a.ISSUE_LINKS.TIME_TO_RENDER_LINKED_ISSUE}),o?this.saveLocalIssueLink(s,n,r):this.saveRemoteIssueLink(s,n,a,r,i))},this.saveLocalIssueLink=(e,t,s)=>{const{createAnalyticsEvent:n}=this.props,a=e.fullObject&&e.fullObject.label,i=(s&&s[a]||[]).filter((e=>!e.isRemote)).map((e=>e.linkedIssueKey))
;t.map((e=>e.fullObject?e:w_(w_({},e),{},{fullObject:{key:e.value}}))).filter((e=>!i.includes(e.fullObject.key))).forEach(((t,s)=>{const a=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${s}`;this.props.onAdd({optimisticId:a,linkedIssueKey:t.fullObject.key,issueLinkType:e.fullObject,issueLinks:j_(a,e.fullObject,t.fullObject,this.props.baseUrl)},n({action:"succeeded"}))})),this.props.onClose()},this.saveRemoteIssueLink=(e,t,s,n,a)=>{const{createAnalyticsEvent:i}=this.props,r=n?Object.keys(n).reduce(((e,t)=>[...e,...n[t]]),[]).filter((e=>e.isRemote)).map((e=>e.globalId)):[];t.filter((e=>e.fullObject)).map(((t,n)=>((e,t,s,n,a)=>{const i=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${e}`,{fullObject:{id:r,key:o,summaryText:c},iconUrl:l}=t,{id:d,name:u,baseUrl:p}=s,m={id:i,applicationType:"com.atlassian.jira",applicationName:u,issueLinkUrl:Object(cv.f)(p,o),relationship:n.label,summary:c,iconUrl:Object(cv.q)(l),issueKey:o,createReciprocalLink:a};if(!r)return y_(y_({},m),{},{appLinkId:d,
payloadType:"WITHOUT_ISSUE_ID"});const f=Object(Vr.k)(r.toString());return y_(y_({},m),{},{globalId:v_(d,f),remoteIssueId:f,payloadType:"WITH_ISSUE_ID"})})(n,t,s.fullObject,e,a))).filter((e=>!e.globalId||!r.includes(e.globalId))).forEach((e=>{this.props.onAddRemote(e,i({action:"succeeded",isRemote:!0,withReciprocalLink:Boolean(e.createReciprocalLink)}))})),this.props.onClose()},this.handleUpdate=({issue:e,results:t})=>{if(Wp()(t))this.setState((t=>({newIssueLinks:t.newIssueLinks.slice(),isDisabled:!0,invalidSelectionsWithReason:[...t.invalidSelectionsWithReason,{value:e,reason:"invalid"}]})));else{const e=t.map((e=>w_(w_({},e),{},{tag:{elemBefore:e.elemBefore}}))).pop();this.setState((t=>({newIssueLinks:t.newIssueLinks.map((t=>t.value.toLowerCase()===e.value.toLowerCase()?e:t))})))}},this.transformIssueLinkTypesForSelect=()=>this.props.issueLinkTypes.map((e=>({label:e.label,value:e.id+e.direction,fullObject:e}))),this.subscription=void 0,this.query$=void 0,this.addLinkContainer=void 0,
this.renderLoading=()=>o.a.createElement(Z.a,null),this.state=this.getInitialState(),this.query$=new Fj.Subject,this.subscription=this.query$.flatMap((({queryIssueKey:t,remoteAppLink:s})=>r_(e.baseUrl,e.issueKey,t,s).map((e=>({issue:t,results:e}))))).subscribe(this.handleUpdate)}componentDidMount(){this.addLinkContainer&&Object(wo.a)(this.addLinkContainer),!this.props.canLinkRemoteIssues||"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus&&"ERROR"!==this.props.jiraAppLinksFetchStatus||this.props.fetchJiraAppLinks()}componentDidUpdate(e){e.quickAddClickedCount!==this.props.quickAddClickedCount&&Object(wo.a)(this.addLinkContainer)}componentWillUnmount(){this.subscription.unsubscribe()}renderFullAddForm(){
const{intl:e,baseUrl:t,issueKey:s,containerWidth:n,onClose:a,canCreateLinkedIssue:i,canLinkRemoteIssues:r,jiraAppLinks:c}=this.props,{jiraAppLink:l,issueLinkType:d,newIssueLinks:u,isDisabled:p,invalidSelectionsWithReason:m}=this.state,f=this.transformIssueLinkTypesForSelect(),b=I_(c),g=n&&n<=480,h=b.length>1,y=this.isLocalJira(this.state.jiraAppLink)&&i;return o.a.createElement("div",{ref:e=>{this.addLinkContainer=e}},o.a.createElement(p_,{isCompact:g},r&&h&&o.a.createElement(g_,{isCompact:g},o.a.createElement(MT,{selectItems:b,value:l,onChange:this.onJiraAppLinkChange,containerWidth:n})),o.a.createElement(g_,{isCompact:g},o.a.createElement(ET,{selectItems:f,selectedItem:d,onChange:this.onIssueLinkTypeChange})),o.a.createElement(m_,null,o.a.createElement(d_,{value:u,baseUrl:t,issueKey:s,onChange:this.onIssueSearchChange,remoteAppLink:this.getRemoteAppLink(),invalidMessage:S_(e,m)}))),o.a.createElement(f_,null,!this.isLocalJira(this.state.jiraAppLink)&&o.a.createElement(n_,{
isChecked:this.state.createReciprocalLink,onChange:this.onCreateReciprocalLinkChange,onShow:this.onShowReciprocalLinkTooltip}),y&&o.a.createElement(b_,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.create-linked-issue"},o.a.createElement(ZT,null)),o.a.createElement(km.a,null,o.a.createElement("div",{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.link-button"},o.a.createElement(J.a,{appearance:"primary",onClick:this.onSave,isDisabled:p},o.a.createElement(I.FormattedMessage,{id:"issue.issue-links-add-button-label",defaultMessage:"Link"}))),o.a.createElement(J.a,{appearance:"subtle",onClick:a},o.a.createElement(I.FormattedMessage,{id:"issue.issue-links-cancel-button-label",defaultMessage:"Cancel"})))))}render(){return!this.props.canLinkRemoteIssues||"LOADING"!==this.props.jiraAppLinksFetchStatus&&"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus?this.renderFullAddForm():this.renderLoading()}}
T_.displayName="AddIssueLinkView",T_.displayName="AddIssueLinkView",T_.defaultProps={issueLinks:null,quickAddClickedCount:0,containerWidth:null,onAdd:d.a,onAddRemote:d.a,onClose:d.a};var __=Object(Is.a)([I.injectIntl,Object(h.a)({onAdd:{action:"added"},onAddRemote:{action:"added",isRemote:!0}}),Object(c.connect)((e=>({quickAddClickedCount:Object(pT.j)(e),canCreateLinkedIssue:Object(pT.a)(e),canLinkRemoteIssues:yT(e),jiraAppLinksFetchStatus:hT(e),jiraAppLinks:OT(e)})),(e=>({onAdd:(t,s,n)=>e(Object(dT.n)(t,s,n)),onAddRemote:(t,s,n)=>e(Object(uT.f)(t,s,n.update({withReciprocalLink:Boolean(t.createReciprocalLink)}))),fetchJiraAppLinks:()=>e(Object(bT.a)())}))),wi.a])(T_),P_=Object(I.defineMessages)({label:{id:"issue.issue-links-add-label",defaultMessage:"Link an issue"}});const x_=ee.default.span.withConfig({componentId:"sc-1s47urc-0"})`margin-left:auto;`;class D_ extends r.Component{render(){return o.a.createElement(x_,null,o.a.createElement(By.a,{
label:this.props.intl.formatMessage(P_.label),onClick:this.props.onClick}))}}D_.displayName="AddIssueLinkButton",D_.defaultProps={onClick:d.a};var A_=Object(I.injectIntl)(D_),M_=n("./node_modules/@atlaskit/icon/glyph/shortcut.js"),L_=n.n(M_),R_=n("./src/packages/project-settings/common/src/i18n/formatted-react-message.js");const N_=Object(I.defineMessages)({issueTypeTitle:{id:"issues.issue-links.remote-issue-link-error.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},remoteLinkAuthSummary:{id:"issues.issue-links.remote-issue-link-error.auth-required.summary",defaultMessage:"{tagStart}Authenticate{tagEnd} to see additional information"},remoteLinkGeneralError:{id:"issues.issue-links.remote-issue-link-error.general-error",defaultMessage:"Failed to load remote issue"},remoteLinkMissingApplink:{id:"issues.issue-links.remote-issue-link-error.missing-applink",defaultMessage:"Failed to load remote issue because remote site is not linked"},remoteLinkAuthTooltip:{
id:"issues.issue-links.remote-issue-link-error.auth-required.tooltip",defaultMessage:"Authenticate to {remoteServerHostname}"},remoteLinkOpenLinkTooltip:{id:"issues.issue-links.remote-issue-link-error.link-button.tooltip",defaultMessage:"Open link in a new tab"},remoteLinkDeleteLinkTooltip:{id:"issues.issue-links.remote-issue-link-error.delete-button.tooltip",defaultMessage:"Unlink remote issue"}}),F_=ee.default.div.withConfig({componentId:"sc-17yrz6r-0"})`display:flex;align-items:center;`,U_=Object(ee.default)(F_).withConfig({componentId:"sc-17yrz6r-1"})`width:100%;height:100%;position:relative;`,V_=ee.default.span.withConfig({componentId:"sc-17yrz6r-2"})`outline:none;margin-left:${te.e/2}px;color:${Ze.a.N90};font-weight:600;font-size:12px;white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:${Ze.a.N90};}`,K_=ee.default.div.withConfig({componentId:"sc-17yrz6r-3"})`margin-left:-${te.e/2}px;`,$_=ee.default.div.withConfig({componentId:"sc-17yrz6r-4"
})`padding-left:${te.e}px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;color:${e=>"red"===e.color?Ze.a.R400:"inherit"};`,W_=ee.default.div.withConfig({componentId:"sc-17yrz6r-5"})`overflow:hidden;text-overflow:ellipsis;display:block;`,B_=ee.default.span.withConfig({componentId:"sc-17yrz6r-6"})`color:${Ze.a.B400};text-decoration:underline;`,H_=(ee.default.div.withConfig({componentId:"sc-17yrz6r-7"})`background-color:${Ze.a.N20};width:${5*te.e}px;height:${2*te.e}px;border-radius:3px;margin-left:${2*te.e}px;margin-right:${te.e/2}px;`,ee.default.div.withConfig({componentId:"sc-17yrz6r-8"})`width:${3*te.e}px;height:${3*te.e}px;padding:${te.e/2}px;box-sizing:border-box;`),G_="{tagStart}",q_="{tagEnd}";class z_ extends r.Component{constructor(...e){super(...e),this.renderErrorIcon=()=>o.a.createElement(K_,null,o.a.createElement(Gm.a,{label:"Issue link loading error",primaryColor:Ze.a.R300})),this.renderIcon=()=>{const{error:e}=this.props
;return"APPLINK_REQ_AUTH"===e?this.renderIssueTypeIcon():this.renderErrorIcon()},this.authLinkWithAnalytics=e=>o.a.createElement(B_,{onClick:()=>{this.props.handleUserClickAnalytics("errorCard.authenticationLink")}},e.children),this.renderAuthRequiredText=()=>{const{intl:e,remoteServerHostname:t}=this.props;return o.a.createElement($_,null,o.a.createElement(Re.a,{content:e.formatMessage(N_.remoteLinkAuthTooltip,{remoteServerHostname:t}),position:"bottom"},o.a.createElement(W_,null,o.a.createElement(iy.a,{label:"",size:"small",primaryColor:Ze.a.B400}),o.a.createElement(R_.a,{message:e.formatMessage(N_.remoteLinkAuthSummary,{tagStart:G_,tagEnd:q_}),openingTag:G_,closingTag:q_,Component:this.authLinkWithAnalytics}))))},this.openIssueLink=e=>{void 0!==this.props.issueLink&&window.open(this.props.issueLink,"_blank"),this.props.handleUserClickAnalytics("errorCard.linkIcon"),e.stopPropagation()},this.handleDelete=e=>{const{issueKey:t,globalId:s,onDelete:n}=this.props
;null!=t&&null!=s&&n&&n(Object(Vr.m)(t),s),e.stopPropagation()}}renderIssueTypeIcon(){const{intl:e,issueTypeIconUrl:t,issueTypeName:s}=this.props,n=be()(s)?s:e.formatMessage(N_.issueTypeTitle,{issueTypeName:s});return o.a.createElement(Re.a,{content:s||"",position:"bottom"},o.a.createElement(F_,null,o.a.createElement(os.a,{alt:n,url:t})))}renderKey(){return o.a.createElement(V_,{onClick:()=>this.props.handleUserClickAnalytics("errorCard.issueKey")},this.props.issueKey)}renderText(){const{error:e}=this.props;switch(e){case"APPLINK_REQ_AUTH":return this.renderAuthRequiredText();case"APPLINK_MISSING":return o.a.createElement($_,{color:"red"},this.props.intl.formatMessage(N_.remoteLinkMissingApplink));default:return o.a.createElement($_,{color:"red"},this.props.intl.formatMessage(N_.remoteLinkGeneralError))}}renderLinkButton(){const{isHovering:e,isFocused:t,intl:s}=this.props,n=o.a.createElement(Re.a,{content:s.formatMessage(N_.remoteLinkOpenLinkTooltip),position:"bottom"
},o.a.createElement(H_,null,o.a.createElement(L_.a,{label:"Open remote issue",size:"small"})));return o.a.createElement(PC,{show:e||t,icon:n,onClick:this.openIssueLink})}renderDeleteButton(){const{canRemove:e,onDelete:t,isHovering:s,isFocused:n,intl:a}=this.props;return e&&t?o.a.createElement(PC,{show:s||n,icon:o.a.createElement(Re.a,{content:a.formatMessage(N_.remoteLinkDeleteLinkTooltip),position:"bottom"},o.a.createElement(lu.a,{label:"Remove issue link"})),onClick:this.handleDelete}):null}render(){return o.a.createElement(U_,null,this.renderIcon(),this.renderKey(),this.renderText(),this.renderLinkButton(),this.renderDeleteButton())}}z_.displayName="RemoteIssueLinkLineCardError";var Y_=Object(I.injectIntl)(z_);const Q_=({isHovering:e,isActive:t,isFocused:s,issue:n,groupId:a,isInteractive:i,onDelete:c,canAddIssueLinks:l,projectType:d})=>{const u=Object(r.useCallback)((()=>({projectType:d,groupId:a,linkedIssueId:n.id,isRemote:n.isRemote||!1,hasError:n.hasError||!1,
errorType:n.errorType||"",remoteIssueLinkError:n.remoteIssueLinkError&&n.remoteIssueLinkError.error?n.remoteIssueLinkError.error:"NONE"})),[d,a,n]),{createAnalyticsEvent:p}=Object(sr.a)(),m=Object(r.useCallback)((e=>{const t=p({action:"clicked",actionSubject:"issueView.IssueLinkLineCard"}),s=u();Object(Ki.h)(t,e,s)}),[p,u]);return o.a.createElement(W.a,{id:"IssueLinkLineCard",packageName:"jiraIssueView",attributes:u()},(()=>{const r=(e,t)=>c&&c(a,e,t);if(n.remoteIssueLinkError)return o.a.createElement(Y_,{issueTypeIconUrl:n.issueTypeIconUrl,issueTypeName:n.issueTypeName,issueKey:n.issueKey,remoteServerHostname:n.remoteServerHostname,globalId:n.globalId,isHovering:e,isFocused:s,issueLink:n.issueLink,error:n.remoteIssueLinkError.error,handleUserClickAnalytics:m,canRemove:l,onDelete:c&&r})
;const u=i&&!n.remoteServerHostname,{id:p,issueKey:f,issueLink:b,issueTypeIconUrl:g,issueTypeName:h,issuePriorityUrl:y,issuePriorityName:O,issueSummary:j,statusCategory:v,statusCategoryId:E,statusId:w,statusName:k,assigneeUrl:C,assigneeDisplayName:S,isLoading:I,errorInlineMessage:T,hasError:_,estimateFieldId:P,isRemote:x,globalId:D,remoteServerHostname:A}=n;return o.a.createElement(rk.a,{id:Object(Vr.k)(p),issueKey:Object(Vr.m)(null!=f?f:""),issueLink:b,issueTypeIconUrl:g,issueTypeName:h,issuePriorityUrl:y,issuePriorityName:O,issueSummary:j,statusCategory:v,statusCategoryId:E,statusId:w,statusName:k,assigneeUrl:C,assigneeDisplayName:S,isLoading:I,errorInlineMessage:T,hasError:_,estimateFieldId:P,isRemote:x,globalId:D,remoteServerHostname:A,isHovering:e,isActive:t,isFocused:s,isInteractive:u,onDelete:c&&r,canRemove:l,projectType:d,onHandleUserClickAnalytics:m,isInlineEditEnabled:!1})})(),(()=>o.a.createElement($i.a,{
onMount:e=>Object(Ki.b)(e,"issueView.IssueLinkLineCard loaded","IssueLinkLineCard",u())}))())};Q_.displayName="IssueLinkLineCard";var J_=Object(I.defineMessages)({removeIssueLinkHeader:{id:"issues.confirm-delete-issuelink-modal-header",defaultMessage:"Remove the link to {issueKey}?"},removeIssueLinkContent:{id:"issues.confirm-delete-issuelink-modal-text",defaultMessage:"You can add it again later if you need to."},removeIssueLinkButton:{id:"issues.conirm-delete-issue-link-confirm-btn-text",defaultMessage:"Remove"},issueLinkFailureHeader:{id:"issue.issue-links-failure-header",defaultMessage:"We couldn't link the issue"},issueLinkFailureContent:{id:"issue.issue-links-failure-content",defaultMessage:"Wait a few moments, then give it another try."}});const Z_=ee.default.h3.withConfig({componentId:"sc-1s4g2ob-0"})`${Ze.d.h200()};margin:0;`,X_=ee.default.div.withConfig({componentId:"sc-1s4g2ob-1"})`margin:${te.e}px 0;padding-right:1px;`,eP=ee.default.div.withConfig({
componentId:"sc-1s4g2ob-2"})`margin:${te.e}px 0;padding-right:1px;`,tP=ee.default.label.withConfig({componentId:"sc-1s4g2ob-3"})`display:flex;align-items:center;justify-content:space-between;`;function sP(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nP(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sP(Object(s),!0).forEach((function(t){aP(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sP(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function aP(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const iP=(e={})=>e?Object.keys(e).reduce(((t,s)=>e[s].length+t),0):0,rP=Object(_.a)("removeLinkedIssue",U.a.MODAL)(Tt.b);class oP extends r.Component{constructor(...e){super(...e),this.state={hasDeleteModal:!1,groupId:null,issueKey:null,globalId:void 0},this.onIssueClickNew=({id:e,issueKey:t,issueLink:s,remoteIssueLinkError:n,projectType:a=null,isRemote:i}={},r)=>{if(t){const{onIssueLinkClicked:t,linkActions:c,onAuthenticateApplink:l}=this.props,d="APPLINK_REQ_AUTH"===(null==n?void 0:n.error);if(t&&t(e,a,iP(this.props.issueLinks)),Object(Bm.d)(r))if(d){var o;const e=null==n||null===(o=n.repairLink)||void 0===o?void 0:o.href;e&&l&&l(Object(Vr.j)(e))}else s&&Object(fT.a)(s,r.metaKey,c.push);(Object(Bm.e)(r)||Object(Bm.a)(r))&&!d&&s&&window.open(s,"_blank");const{createAnalyticsEvent:u}=this.props,p=u({action:"clicked",actionSubject:"card"});Object(Ki.h)(p,"issueLinkedCard",{clickedIssueId:e,linkedIssuesCount:iP(this.props.issueLinks),issueNeedsAuthentication:d,isRemote:i})}},
this.onIssueClick=({id:e,issueKey:t,issueLink:s,projectType:n=null}={},a)=>{if(t){const{onIssueLinkClicked:t,linkActions:i}=this.props;t&&t(e,n,iP(this.props.issueLinks)),Object(Bm.d)(a)&&s&&Object(fT.a)(s,a.metaKey,i.push)}},this.getLinkByGroupAndIssueKey=(e,t,s)=>(this.props.issueLinks&&e&&this.props.issueLinks[e]||[]).find((e=>e.linkedIssueKey===t&&e.globalId===s)),this.renderIssueLinkInlineMessage=(e,t)=>{const{intl:s,retryLinkedIssue:n,cancelLinkedIssue:a,createAnalyticsEvent:i}=this.props;return mk(s,s.formatMessage(J_.issueLinkFailureHeader),s.formatMessage(J_.issueLinkFailureContent),((s,a)=>n(e,t,i({action:"succeeded",isRemote:t}),a.update({isRemote:t}))),(()=>a(e,t)))}}componentDidMount(){const{issueLinks:e,onIssueLinkRendered:t,hasLinks:s,onMountCreatePermissionFetching:n}=this.props;s&&t(iP(e)),n()}componentDidUpdate(e){const{displayAddIssueLinks:t}=this.props,s=!e.displayAddIssueLinks&&t,n=e.displayAddIssueLinks&&!t;s&&Object(Kr.c)().markTimeToFinishTask({
key:ko.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT}),n&&Object(Kr.c)().markTimeToFinishTask({key:ko.a.ISSUE_LINKS.TIME_TO_RENDER_LINKED_ISSUE})}onDeleteConfirm(e,t,s){const n=this.getLinkByGroupAndIssueKey(e,t,s);if(n){const e=n.id;this.props.deleteLinkedIssue({linkId:e,globalId:s});const t=this.flattenedIssueLinks().findIndex((t=>t.id===e&&t.globalId===s));this.props.onRemoveIssueLinkInitiated(t)}this.modalClosedStateChanges()}onDeleteCancel(){this.modalClosedStateChanges()}onDeleteAction(e,t,s){this.setState({groupId:e,issueKey:t,globalId:s,hasDeleteModal:!0});const{createAnalyticsEvent:n}=this.props,a=this.getLinkByGroupAndIssueKey(e,t,s),i=n({action:"clicked",actionSubject:"button"});Object(Ki.h)(i,"linkedIssueCardDeleteButton",{issueLinkToDeleteId:cc()(a,["linkedIssue","id"]),isRemote:!Wp()(s)})}getRemovalConfirmationText(e){const{intl:{formatMessage:t}}=this.props;return{confirmationHeader:t(J_.removeIssueLinkHeader,{issueKey:e}),
confirmationContent:t(J_.removeIssueLinkContent)}}modalClosedStateChanges(){this.setState({groupId:null,issueKey:null,hasDeleteModal:!1,globalId:void 0})}flattenedIssueLinks(){const{issueLinks:e}=this.props;return e?Object.keys(e).reduce(((t,s)=>[...t,...e[s]]),[]):[]}renderDeleteConfirmationModal(){const{intl:{formatMessage:e}}=this.props,{groupId:t,issueKey:s,globalId:n}=this.state,a=this.getRemovalConfirmationText(s),{confirmationHeader:i,confirmationContent:r}=a;return o.a.createElement("div",null,o.a.createElement(rP,{appearance:"warning",headerMessage:i,contentMessage:r,onConfirm:()=>this.onDeleteConfirm(t,s,n),onCancel:()=>this.onDeleteCancel(),externalId:"issue.issueLinks.delete",confirmActionText:e(J_.removeIssueLinkButton)}),o.a.createElement(g.a,null))}renderLineCardGroup(e,t){const{projectType:s}=this.props;return o.a.createElement(Wm.a,{items:e,groupId:t,isInteractive:this.props.isIssueViewComplete,onClick:this.onIssueClickNew},((e,n,a,i)=>o.a.createElement(Q_,{
isHovering:e,isActive:n,isFocused:a,issue:i,groupId:t,isInteractive:this.props.isIssueViewComplete,onDelete:(e,t,s)=>this.onDeleteAction(e,Object(Vr.m)(t),s),canAddIssueLinks:this.props.canAddIssueLinks,projectType:s})))}renderGroup(e,t){const s=t.map((e=>nP(nP({},e.linkedIssue),{},{projectType:e.linkedIssue.projectType||null,isLoading:e.isLoading||!1,hasError:e.hasError,errorInlineMessage:e.hasError?this.renderIssueLinkInlineMessage(e.id,!!e.isRemote):void 0,id:e.globalId||e.linkedIssue.id,isRemote:e.isRemote,globalId:e.isRemote?e.globalId:void 0,remoteServerHostname:e.isRemote?e.remoteServerHostname:void 0,remoteIssueLinkError:e.isRemote?e.remoteIssueLinkError:void 0})));return o.a.createElement(X_,{key:e},o.a.createElement(Z_,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.issue-links-view.relationship-heading"},e),this.renderLineCardGroup(s,e))}renderHeading(){const{hasLinks:e,canAddIssueLinks:t,onIssueLinkAddClick:s}=this.props
;return o.a.createElement(Si.c,null,o.a.createElement(tP,{htmlFor:"issue-link-search"},o.a.createElement(Si.e,null,o.a.createElement(I.FormattedMessage,{id:"issue.issue-links-heading",defaultMessage:"Linked issues"}))),o.a.createElement(Si.d,null,t&&e&&o.a.createElement(A_,{onClick:s})))}renderExistingLinks(){const{issueLinks:e}=this.props;return o.a.createElement("div",null,e&&Object.keys(e).sort().map((t=>this.renderGroup(t,e[t]))))}renderAddIssueLink(){const{issueLinkTypes:e,baseUrl:t,issueKey:s,onIssueLinkAddClosed:n,issueLinks:a}=this.props;return o.a.createElement(eP,null,o.a.createElement("div",null,o.a.createElement(__,{issueLinkTypes:e,baseUrl:t,issueKey:s,onClose:n,issueLinks:a})))}render(){const{issueLinks:e,hasLinks:t,displayAddIssueLinks:s}=this.props,n=t&&!Wp()(e),a=this.state.hasDeleteModal;return o.a.createElement($.a,null,n||s?this.renderHeading():null,n?this.renderExistingLinks():null,s?this.renderAddIssueLink():null,a?this.renderDeleteConfirmationModal():null)}}
oP.displayName="IssueLinksView",oP.displayName="IssueLinksView",oP.defaultProps={issueLinks:null,issueLinkTypes:[],isIssueViewComplete:!1,onIssueLinkClicked:d.a,onIssueLinkRendered:d.a,onIssueLinkAddClick:d.a,onIssueLinkAddClosed:d.a};var cP=Object(Is.a)([I.injectIntl,Object(h.a)({deleteLinkedIssue:{action:"deleted"},onAuthenticateApplink:{action:"authenticate"}}),Object(_.b)("linkedIssue"),Object(zs.a)((e=>({onIssueLinkClicked:(t,s,n)=>e("linked-issue-clicked",{targetIssueId:t,targetProjectType:Object(pa.i)(...Il.e)(s),linkedIssuesCount:n}),onIssueLinkRendered:t=>e("linked-issue-render",{linkedIssuesCount:t}),onRemoveIssueLinkInitiated:t=>e("linked-issue-removed",{indexOfDeletedLink:t})}))),lT.a,Object(c.connect)((e=>({canAddIssueLinks:Object(mT.a)(e),hasLinks:Object(pT.d)(e),issueLinks:Object(pT.c)(e),issueLinkTypes:Object(mT.b)(e),baseUrl:Object(M.f)(e),issueKey:Object(M.x)(e),externalId:"issue.issue-links",displayAddIssueLinks:Object(pT.l)(e),projectType:Object(L.F)(e),
isIssueViewComplete:Object(L.n)(e)})),(e=>({onAuthenticateApplink:(t,s)=>e(Object(vC.a)(t,s)),deleteLinkedIssue:({linkId:t,globalId:s},n)=>{e(void 0!==s?Object(uT.b)(s,n):Object(dT.e)(t,n))},cancelLinkedIssue:(t,s)=>{e(s?Object(uT.d)(t):Object(dT.l)(t))},retryLinkedIssue:(t,s,n,a)=>{e(s?Object(uT.g)(t,n,a):Object(dT.o)(t,n,a))},onIssueLinkAddClick:()=>e(Object(dT.a)()),onIssueLinkAddClosed:()=>e(Object(dT.b)()),onMountCreatePermissionFetching:()=>e(Object(dT.g)())})))])(oP),lP=n("./src/packages/servicedesk/incident-management/issue-view/linked-alerts/src/async.js");var dP=()=>{const e=Object(cs.g)(),t=Object(Tl.g)(e),s="service_desk"===Object(Tl.i)(t),n=Object(Tl.c)(t),a=Object(Ts.isJsmProjectArchiveAndRestoreEnabled)()&&"PROJECT_ARCHIVED"===(null==n?void 0:n.projectStatus);return Object(Ts.isJsmLinkedAlertsEnabled)()&&s&&!a?o.a.createElement(o.a.Fragment,null,o.a.createElement(lP.c,null),o.a.createElement(lP.b,null)):null};const uP=()=>({type:"LINK_INCIDENT_CLICKED"
}),pP=Object(zn.createSelector)(L.f,(e=>e.incidentManagement)),mP=Object(zn.createSelector)(pP,(e=>e.createMajorIncident)),fP=(Object(zn.createSelector)(mP,(e=>e.clickedCount)),Object(zn.createSelector)(L.H,(e=>e.incidentManagement))),bP=Object(zn.createSelector)(fP,(e=>e.showCreateMajorIncidentModal)),gP=Object(zn.createSelector)(L.f,(e=>e.incidentManagement)),hP=Object(zn.createSelector)(gP,(e=>e.createLinkedIncident)),yP=(Object(zn.createSelector)(hP,(e=>e.errorMessage)),Object(zn.createSelector)(hP,(e=>e.isInvalid)),Object(zn.createSelector)(hP,(e=>e.isLoading)),Object(zn.createSelector)(hP,(e=>e.clickedCount))),OP=Object(zn.createSelector)(L.H,(e=>e.incidentManagement)),jP=Object(zn.createSelector)(OP,(e=>e.showCreateIncidentPanel)),vP=Object(Yn.e)("com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"),EP=Object(zn.createSelector)(vP,(e=>e&&e.renderedValue));var wP=n("./src/packages/servicedesk/incident-management/issue-view/link-incident/src/async.js")
;const kP=Object(Is.a)([Object(c.connect)((e=>({issueSummary:Object(Yn.g)("summary")(e),issueDescription:Object(Yn.g)("description")(e),impactedServices:EP(e),issueKey:Object(M.x)(e),issueId:Object(M.w)(e),projectKey:Object(M.B)(e),projectId:Object(L.C)(e),isCreateVisible:jP(e),isCreateMajorIncidentModalVisible:bP(e),createLinkedIncidentCount:yP(e)})),(e=>({onCreateLinkedIncidentClick:()=>e(uP()),onCloseLinkedIncidentPanelClick:()=>e((()=>({type:"LINK_INCIDENT_PANEL_CLOSED"}))()),onCloseCreateMajorIncidentModal:()=>e((()=>({type:"CREATE_MAJOR_INCIDENT_MODAL_CLOSED"}))())})))])((({issueSummary:e,issueDescription:t,impactedServices:s,issueKey:n,useFieldValue:a=Vl.b,issueId:i,isCreateVisible:r,isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:d,onCloseLinkedIncidentPanelClick:u,onCloseCreateMajorIncidentModal:p,projectId:m,projectKey:f})=>{const[b]=a({issueKey:n,fieldKey:"servicedesk-incident-linking"}),g=(e=>e?e.map((e=>e.name)):null)(s)
;return b&&void 0!==i?o.a.createElement(wP.a,{issueSummary:e,issueDescription:t,impactedServiceNames:g,issueKey:n,issueId:i,projectId:m,projectKey:f,isCreateVisible:r,isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:d,onCloseLinkedIncidentPanelClick:u,onCloseCreateMajorIncidentModal:p}):null}));var CP=n("./src/packages/servicedesk/common/src/itsm-practices/constants.js"),SP=n("./src/packages/servicedesk/object-related-requests-panel/src/async.js");var IP=Object(r.memo)((()=>{var e;const t=Object(cs.g)(),[s]=Object(Kl.a)(t,"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"),[n]=Object(Vl.b)({issueKey:t,fieldKey:s}),a=null!==(e=null==n?void 0:n.map((({id:e})=>e)))&&void 0!==e?e:[],[i]=Object(Vl.b)({issueKey:t,fieldKey:"servicedesk-practices"}),r=(e=>{switch(e){case CP.a:return CP.a;case CP.c:return CP.c;default:return null}})(null==i?void 0:i[0]);return s&&0!==a.length&&null!=r?o.a.createElement(Up.a,{
id:"AsyncObjectRelatedRequestsPanel",packageName:"jiraIssueView",fallback:"unmount",sendToPrivacyUnsafeSplunk:!0},o.a.createElement(Ee.a,{fallback:o.a.createElement(mf.l,{width:"100%",height:"60px"})},o.a.createElement(SP.a,{affectedServicesFieldId:s,itsmPractice:r,serviceIds:a}))):null})),TP=Object(I.defineMessages)({title:{id:"issue.portfolio-child-issues.title",defaultMessage:"Child issues"},noValueText:{id:"issue.placeholder-for-empty-child-issues-field",defaultMessage:"There are no child issues."}}),_P=Object(Is.a)([Object(c.connect)((e=>({childIssuesPanelType:"portfolioChildren",baseUrl:Object(M.f)(e),locale:Object(M.y)(e),user:Object(M.a)(e),projectId:Object(L.C)(e),projectType:Object(L.F)(e),parentKey:Object(M.x)(e),parentId:Object(M.w)(e),issues:Object(EO.a)(e),isIssueViewComplete:Object(L.n)(e),messages:TP})),(e=>({onNavigateToNewIssue:({fromIssueKey:t,toIssueKey:s})=>e(Object(hO.c)({fromIssueKey:t,toIssueKey:s})),onChange:t=>{switch(t.type){case CO.CHILD_ISSUE_ADDED:
e(bO(t.meta.childIssue))}}})))])(uC),PP=n("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const xP=()=>({setState:e})=>{e({addFormButtonClicked:!0})},DP=Object(Bp.a)({name:"issue-forms",initialState:{addFormButtonClicked:!1},actions:i}),AP=Object(Hp.a)(DP,{selector:e=>e.addFormButtonClicked}),MP=({issueKey:e,onSuccess:t,onFailure:s})=>{const[n]=Object(wd.a)(e,"proforma-forms"),a=cc()(n.value,"schema.type","proforma-forms"),[{value:i,error:r}]=Object(PP.a)({fieldKey:"proforma-forms",issueKey:e,fieldType:a,initialValue:{hasIssueForms:void 0,hasProjectForms:void 0},onSuccess:t,onFailure:s}),[o,{setAddFormButton:c}]=AP();return[{value:{hasIssueForms:i.hasIssueForms,hasProjectForms:i.hasProjectForms,addFormButtonClicked:o},error:r,fieldConfig:n},{setAddFormButton:c}]};var LP=n("./src/packages/proforma/issue-view/src/async.js");const RP=e=>{const{issueKey:t}=e,[{value:{hasIssueForms:s,addFormButtonClicked:n}}]=MP({issueKey:Object(Vr.m)(t)});let a=!1
;return Object(Ts.isProformaIssueViewEnabled)()&&(a=!!n||!0===s),a?o.a.createElement(LP.a,null):null};var NP=Object(r.memo)(RP),FP=n("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),UP=n("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),VP=Object(I.defineMessages)({title:{id:"issue.subtasks-heading",defaultMessage:"Subtasks"},createSubtaskErrorHeader:{id:"issue.subtask-error-header",defaultMessage:"We couldn't create the subtask"},createSubtaskErrorContent:{id:"issue.subtask-error-content",defaultMessage:"Wait a few moments, then give it another try."}});const KP=["onNavigateToNewIssueDispatchProp"];function $P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function WP(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?$P(Object(s),!0).forEach((function(t){BP(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function BP(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function HP(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function GP(){return(GP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const qP=e=>{
const t=e.onChange,s=Object(cs.g)(),[n,{setFieldValue:a}]=Object(Vl.b)({issueKey:s,fieldKey:"subtasks"}),i=Object(r.useCallback)((e=>{switch(e.type){case CO.CHILD_ISSUE_ADDED:a(s,"subtasks",n.concat({id:e.meta.childIssue.id,key:e.meta.childIssue.issueKey}))}t(e)}),[n,s,t,a]);return o.a.createElement(uC,GP({},e,{onChange:i}))};qP.displayName="ConnectedComponent";var zP=Object(c.connect)((e=>({childIssuesPanelType:"classicSubtasks",parentId:Object(M.w)(e),issueTypes:Object(FP.c)(e),issues:Object(UP.d)(e),messages:VP,supportsIssueCreation:Object(UP.a)(e),quickAddClickCount:OO(e),isIssueViewComplete:Object(L.n)(e),fetchIssueTypesStatus:Object(Hc.a)(e)})),(e=>({onChange:t=>{switch(t.type){case CO.CHILD_ISSUE_ADDED:e(((e,t)=>({type:"SUBTASK_ADD_SUCCESS",payload:{childIssue:e,fieldsData:t}}))(t.meta.childIssue,t.meta.fieldsData))}},onAddChildClick:()=>e(gO()),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(hO.c)({fromIssueKey:t,toIssueKey:s}))}
})),((e,t)=>{const{onNavigateToNewIssueDispatchProp:s}=t,n=HP(t,KP);return WP(WP(WP({},e),n),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t})}})}))(qP),YP=n("./node_modules/lodash/clamp.js"),QP=n.n(YP),JP=n("./src/packages/issue/issue-view/src/actions/web-links-actions.js");const ZP=Object(I.defineMessages)({heading:{id:"issue.details.web-links.heading",defaultMessage:"Web links"},showMoreLabel:{id:"issue.details.web-links.show-more-label",defaultMessage:"{nextPageCount, plural, one {Show {nextPageCount} more} other {Show {nextPageCount} more}}"},webLinkAddedFlagTitle:{id:"issue.details.web-links.web-link-added-flag-title",defaultMessage:"We\u2019ve added your web link"},webLinkAddedFlagDescription:{id:"issue.details.web-links.web-link-added-flag-description",defaultMessage:"If you can\u2019t find the web link, go to the issue\u2019s web links section and select Show more."}});const XP=Object(I.defineMessages)({headerMessage:{
id:"issue.details.web-links.delete-confirmation-modal.title",defaultMessage:"Delete the web link?"},contentMessage:{id:"issue.details.web-links.delete-confirmation-modal.content",defaultMessage:"You can add the link later again if you need to."},confirmActionText:{id:"issue.details.web-links.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"},cancelActionText:{id:"issue.details.web-links.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}});const ex=({intl:e,onDelete:t,onCancel:s})=>o.a.createElement(Tt.b,{appearance:"danger",headerMessage:e.formatMessage(XP.headerMessage),contentMessage:e.formatMessage(XP.contentMessage),confirmActionText:e.formatMessage(XP.confirmActionText),cancelActionText:e.formatMessage(XP.cancelActionText),onConfirm:t,onCancel:s});ex.displayName="DeleteModal"
;var tx=Object(I.injectIntl)(ex),sx=n("./node_modules/shortid/index.js"),nx=n("./node_modules/@atlaskit/icon/glyph/world.js"),ax=n.n(nx),ix=n("./src/packages/platform/ui/flags/src/services/types.js"),rx=Object(I.defineMessages)({createErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-heading",defaultMessage:"We couldn't create the web link"},deleteErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.delete-error-heading",defaultMessage:"We couldn't delete the web link"},errorBody:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-body",defaultMessage:"Wait a few moments, then give it another try."},retryAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.retry-action",defaultMessage:"Try again"},cancelAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.cancel-action",defaultMessage:"Cancel"}
});const ox=e=>e.stopPropagation(),cx=({errorHeading:e,errorBody:t,onRetry:s,onCancel:n,intl:a})=>o.a.createElement("div",{onClick:ox,onKeyPress:ox},mk(a,a.formatMessage(e),a.formatMessage(t),s,n));cx.displayName="ErrorMessage";var lx=kt()([Object(Ys.a)("webLinks",{onRetry:"retry"}),Object(c.connect)(null,((e,{webLink:t})=>({onCreateWebLinkRetry:()=>{e(Object(JP.d)(t.id))},onCreateWebLinkCancel:()=>{e(Object(JP.f)(t.id))},onDeleteWebLinkRetry:()=>{e(Object(JP.h)(t.id))},onDeleteWebLinkCancel:()=>{e(Object(JP.a)(t.id))}})),((e,t,s)=>({intl:s.intl,errorHeading:!0===s.webLink.createFailed?rx.createErrorHeading:rx.deleteErrorHeading,errorBody:rx.errorBody,onRetry:(e,n,a)=>{!0===s.webLink.createFailed?(t.onCreateWebLinkRetry(),Object(BT.a)(a,{name:"createRetry"})):(t.onDeleteWebLinkRetry(),Object(BT.a)(a,{name:"deleteRetry"}))},onCancel:!0===s.webLink.createFailed?t.onCreateWebLinkCancel:t.onDeleteWebLinkCancel}))),I.injectIntl])(cx);const dx=ee.default.div.withConfig({
componentId:"sc-11glk4w-0"})`display:flex;align-items:center;`,ux=Object(ee.default)(dx).withConfig({componentId:"sc-11glk4w-1"})`width:100%;height:100%;position:relative;`,px=ee.default.div.withConfig({componentId:"sc-11glk4w-2"})`flex:1;overflow:hidden;align-items:center;`,mx=ee.default.div.withConfig({componentId:"sc-11glk4w-3"})`flex-grow:1;overflow:hidden;align-items:left;`,fx=ee.default.div.withConfig({componentId:"sc-11glk4w-4"})`flex-shrink:0;max-width:80%;overflow:hidden;align-items:left;`,bx=ee.default.div.withConfig({componentId:"sc-11glk4w-5"})`flex-grow:1;overflow:hidden;align-items:left;`,gx=ee.default.div.withConfig({componentId:"sc-11glk4w-6"})`${e=>e.isFocused&&`color: ${Ze.a.B400};`} padding-left:${te.e}px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;${e=>!0===e.isResolved&&"text-decoration: line-through;"} ${e=>!0===e.isResolved&&`color: ${Ze.a.N200};`}`,hx=ee.default.div.withConfig({componentId:"sc-11glk4w-7"
})`${e=>e.isFocused&&`color: ${Ze.a.B400};`} padding-left:${te.e}px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:${Ze.a.N200};`,yx=ee.default.div.withConfig({componentId:"sc-11glk4w-8"})`display:inline-flex;flex-shrink:0;margin-left:${te.e/4}px;margin-right:${te.e/4}px;`,Ox=e=>!(!e.createFailed&&!e.deleteFailed);class jx extends r.Component{constructor(...e){super(...e),this.state={validIconUrl:!1},this.onDeleteClick=e=>{const{onDelete:t,webLink:{id:s}}=this.props;e.stopPropagation(),t(s)}}componentDidMount(){const{iconUrl:e}=this.props.webLink;if(this.props.webLink.deleteFailed){const{onDeleteWebLinkRetry:e,onDeleteWebLinkCancel:t}=this.props;this.showErrorFlag(rx.deleteErrorHeading,e,t),v.a.safeErrorWithoutCustomerData("issue-view.web-links.line-card","failedToDelete")}if(null!=e){const t=new Image;t.onload=()=>this.setState({validIconUrl:!0}),t.onerror=()=>this.setState({validIconUrl:!1}),t.src=e}}componentDidUpdate(e){
if(!e.webLink.createFailed&&this.props.webLink.createFailed){const{onCreateWebLinkRetry:e,onCreateWebLinkCancel:t}=this.props;this.showErrorFlag(rx.createErrorHeading,e,t),v.a.safeErrorWithoutCustomerData("issue-view.web-links.line-card","failedToCreate")}}showErrorFlag(e,t,s){const{showFlag:n,dismissFlag:a}=this.props,i=Object(ix.c)(Object(sx.generate)());n(((e,t,s,n)=>({id:e,title:t,description:rx.errorBody,type:"warning",isAutoDismiss:!0,actions:[{content:rx.retryAction,onClick:s},{content:rx.cancelAction,onClick:n}]}))(i,e,(()=>{a({id:i,command:"DISMISS"}),t()}),(()=>{a({id:i,command:"DISMISS"}),s()})))}shouldRenderDeleteButton(){const{webLink:e,canDelete:t}=this.props;return t&&!(e.isCreating||Ox(e))}renderLinkIcon(){const{webLink:{iconUrl:e,linkText:t=""}}=this.props;return this.state.validIconUrl?o.a.createElement(Oo.a,{src:e,size:"small",appearance:"square"}):o.a.createElement(yx,null,o.a.createElement(ax.a,{label:t}))}renderLinkTextOld(){
const{webLink:e,isFocused:t}=this.props,{linkText:s,href:n}=e;return o.a.createElement(px,null,o.a.createElement(Re.a,{content:n,truncate:!0,position:"bottom"},o.a.createElement(gx,{isFocused:t,isResolved:e.resolved},s||n)))}renderLinkText(){const{webLink:{linkText:e,href:t,summary:s,resolved:n},isFocused:a}=this.props,i=null==s?mx:fx,r=e===t||Wp()(e)?`${t}`:`${t} - ${e}`;return o.a.createElement(i,null,o.a.createElement(Re.a,{content:r,position:"bottom"},o.a.createElement(gx,{isFocused:a,isResolved:n},e||t)))}renderLinkSummary(){const{webLink:{summary:e,href:t},isFocused:s}=this.props,n=Wp()(e)?t:`${t} - ${e}`;return Wp()(e)?null:o.a.createElement(bx,null,o.a.createElement(Re.a,{content:n,position:"bottom"},o.a.createElement(hx,{isFocused:s},e||t)))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return o.a.createElement(xC,{show:e||t,onClick:this.onDeleteClick})}render(){const{webLink:e}=this.props,t={
"data-testId":"issue.views.common.web-link.line-card.card-container"};return Object(Ts.isWebAndIssueLinkSummaryEnabled)()?o.a.createElement(ux,t,this.renderLinkIcon(),this.renderLinkText(),this.renderLinkSummary(),this.shouldRenderDeleteButton()&&this.renderDeleteButton(),Ox(e)&&o.a.createElement(lx,{webLink:e})):o.a.createElement(ux,t,this.renderLinkIcon(),this.renderLinkTextOld(),this.shouldRenderDeleteButton()&&this.renderDeleteButton(),Ox(e)&&o.a.createElement(lx,{webLink:e}))}}jx.displayName="WebLinkLineCard";var vx=jx;function Ex(){return(Ex=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const wx=e=>o.a.createElement(Js.a,null,(({showFlag:t,dismissFlag:s})=>o.a.createElement(vx,Ex({showFlag:t,dismissFlag:s},e))));wx.displayName="WithFlagSubscriber";var kx=kt()([Object(Ys.a)("webLinks",{onCreateWebLinkRetry:"retry",onDeleteWebLinkRetry:"retry"
}),Object(c.connect)(null,((e,{webLink:t})=>({onCreateWebLinkRetry:s=>{e(Object(JP.d)(t.id)),Object(BT.a)(s,{name:"createRetry"})},onCreateWebLinkCancel:()=>{e(Object(JP.f)(t.id))},onDeleteWebLinkRetry:s=>{e(Object(JP.h)(t.id)),Object(BT.a)(s,{name:"deleteRetry"})},onDeleteWebLinkCancel:()=>{e(Object(JP.a)(t.id))}})))])(wx);const Cx=ee.default.div.withConfig({componentId:"fjuhoc-0"})`div[class*='item-line-card-view__Card']:focus{border-bottom-color:${Ze.a.N30};}`,Sx=e=>{const[t,s]=Object(r.useState)(!1),[n,a]=Object(r.useState)(null),i=e=>{s(!0),a(e)},c=()=>{s(!1),a(null)},l=c,{canDelete:d}=e;return o.a.createElement(Cx,null,o.a.createElement($i.a,{onMount:t=>Object(Ki.b)(t,"webLinkLineCardGroup rendered",{linkCount:e.links.length})}),o.a.createElement(Wm.a,{items:e.links,groupId:"web-links",onClick:(t,s)=>{e.onClick&&e.onClick(t,s),s&&s.currentTarget&&s.currentTarget.blur(),(e=>{e.href&&window.open(e.href,"_blank")})(t)}
},((e,t,s,n)=>(({link:e,isHovering:t,isFocused:s})=>o.a.createElement(kx,{webLink:e,isHovering:t,isFocused:s,onDelete:i,canDelete:d}))({link:n,isHovering:e,isFocused:s}))),t?o.a.createElement(tx,{onDelete:()=>{n&&e.onDelete(n),c()},onCancel:l}):null)};Sx.displayName="WebLinkLineCardGroup";var Ix=Sx;const Tx=kt()([Object(Ys.a)("webLinkCard",{onClick:"clicked",onDelete:"deleted"}),Object(T.a)({onClick:"visitWebLink",onDelete:"deleteWebLink"}),Object(c.connect)(null,(e=>({onDelete:t=>e(Object(JP.h)(t))})))])(Ix),_x=e=>o.a.createElement(_h.b,{id:"^web-links-card-group"},o.a.createElement(Tx,e));_x.displayName="ConnectedView";var Px=_x;const xx=Object(I.defineMessages)({label:{id:"issue.web-links-add-label",defaultMessage:"Link to a web page"}}),Dx=ee.default.span.withConfig({componentId:"vv7x55-0"})`margin-left:auto;`,Ax=({onClick:e})=>{const t=Object(qe.c)();return o.a.createElement(Dx,{"data-testId":"issue.views.issue-base.content.web-links.add-button"},o.a.createElement(By.a,{
label:t.formatMessage(xx.label),onClick:e}))};Ax.displayName="AddButton";var Mx=Ax,Lx=n("./node_modules/url-parse/index.js"),Rx=n.n(Lx);const Nx="null",Fx=e=>{const t=e.trim();return/^(((https?):)?\/\/)[^\s/$.?#].[^\s]*$/i.test(t)};var Ux=n("./node_modules/@atlaskit/textfield/dist/es2019/text-field.js");const Vx=ee.default.span.withConfig({componentId:"gfz1xh-0"})`color:${Ze.a.N300};font-weight:600;font-size:${1.5*te.e}px;`,Kx=ee.default.div.withConfig({componentId:"gfz1xh-1"})`flex:auto;`,$x=["headingText"];function Wx(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Bx=e=>{let{headingText:t}=e,s=Wx(e,$x)
;return o.a.createElement(Kx,null,o.a.createElement(Vx,null,t),o.a.createElement(Ux.a,s))};Bx.displayName="InlineField";var Hx=Object(I.defineMessages)({url:{id:"issue.views.web-links.addLink.label.url",defaultMessage:"URL"},linkText:{id:"issue.views.web-links.addLink.label.linkText",defaultMessage:"Link text"},linkTextPlaceholder:{id:"issue.views.web-links.addLink.label.linkTextPlaceholder",defaultMessage:"Add a description..."},invalidUrlMessage:{id:"issue.views.web-links.addLink.label.invalidUrlMessage",defaultMessage:"Enter a valid URL starting with http:// or https://"},errorIconLabel:{id:"issue.views.web-links.addLink.label.errorIcon",defaultMessage:"Error icon"}});const Gx=ee.default.div.withConfig({componentId:"dfy01n-0"})`margin-top:${2*te.e}px;display:flex;`,qx=ee.default.div.withConfig({componentId:"dfy01n-1"})`margin-right:${te.e}px;flex:1;`,zx=ee.default.div.withConfig({componentId:"dfy01n-2"})`margin-left:${te.e}px;flex:1;`,Yx=ee.default.div.withConfig({
componentId:"dfy01n-3"})`align-items:center;color:${e=>e.colour};display:flex;margin-top:${te.e/2}px;`,Qx=ee.default.div.withConfig({componentId:"dfy01n-4"})`margin-left:${te.e/2}px;`;class Jx extends r.Component{constructor(...e){super(...e),this.state={isHrefFocused:!0}}render(){const{href:e,linkText:t,onHrefChange:s,intl:n,onLinkTextChange:a,isHrefValid:i}=this.props;return o.a.createElement(Gx,null,o.a.createElement(qx,null,o.a.createElement(Bx,{value:e,headingText:n.formatMessage(Hx.url),autoFocus:!0,placeholder:"https://www.example.com",onChange:s,onBlur:()=>{this.setState({isHrefFocused:!1})},onFocus:()=>this.setState({isHrefFocused:!0}),isInvalid:!i,testId:"issue.views.issue-base.content.web-links.create-link.inline-fields.url"}),!i&&!this.state.isHrefFocused&&o.a.createElement(Yx,{colour:Ze.a.R400},o.a.createElement(Gm.a,{label:n.formatMessage(Hx.errorIconLabel),role:"presentation"
}),o.a.createElement(Qx,null,n.formatMessage(Hx.invalidUrlMessage)))),o.a.createElement(zx,null,o.a.createElement(Bx,{value:t,headingText:n.formatMessage(Hx.linkText),autoFocus:!1,placeholder:n.formatMessage(Hx.linkTextPlaceholder),onChange:a,testId:"issue.views.issue-base.content.web-links.create-link.inline-fields.text"})))}}Jx.displayName="InlineFields";var Zx=Object(I.injectIntl)(Jx),Xx=Object(I.defineMessages)({linkButton:{id:"issue.views.web-links.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.web-links.link.cancel-button",defaultMessage:"Cancel"}});ee.default.div.withConfig({componentId:"sc-97w2lf-0"})`display:flex;align-items:center;background-color:${Ze.a.N10};width:100%;`,ee.default.div.withConfig({componentId:"sc-97w2lf-1"})`flex-grow:1;`;const eD=Object(ee.default)(J.a).withConfig({componentId:"sc-97w2lf-2"})`margin-left:${te.e}px !important;`,tD=ee.default.div.withConfig({componentId:"sc-97w2lf-3"
})`margin-top:${te.e}px;display:flex;justify-content:flex-end;`,sD={href:"",linkText:"",isDisabled:!0,isHrefValid:!0};class nD extends r.Component{constructor(...e){super(...e),this.state=sD,this.onChildContainerRefSet=e=>{this.childContainer=e},this.onHrefChange=e=>{const t=e.target.value;this.updateDisabledState(t),this.setState({href:t,isHrefValid:Fx(t)})},this.onLinkTextChange=e=>{const t=e.target.value.slice(0,255);t!==this.state.linkText&&(this.updateDisabledState(this.state.href),this.setState({linkText:t}))},this.onSubmit=()=>{const{href:e,linkText:t}=this.state,s=e.trim(),n=(e=>{const{origin:t}=new Rx.a(e.trim(),Nx),s=t===Nx?"":`${t}/favicon.ico`;return Object(Vr.j)(s)})(s);this.props.onSubmit(s,Wp()(t.trim())?s:t.trim(),n)},this.childContainer=void 0,this.closeAndReset=()=>{this.resetState(),this.props.onCancel()}}componentDidMount(){Object(wo.a)(this.childContainer),this.updateDisabledState(this.state.href)}componentDidUpdate(e){
this.props.createLinkClickedCount!==e.createLinkClickedCount&&(Object(wo.a)(this.childContainer),this.focusOnInput()),this.props.linkedPagesCount>e.linkedPagesCount&&(this.resetState(),this.focusOnInput())}focusOnInput(){if(null!==this.childContainer){const e=this.childContainer.querySelector("input");null!==e&&e.focus()}}updateDisabledState(e){const t=Wp()(e)||!Fx(e);this.setState({isDisabled:t})}resetState(){this.setState(sD)}render(){const{intl:{formatMessage:e}}=this.props,{href:t,linkText:s,isDisabled:n,isHrefValid:a}=this.state,i=n?null:this.onSubmit;return o.a.createElement("div",{ref:this.onChildContainerRefSet},o.a.createElement(z.a,{onEscape:this.closeAndReset,onEnter:i},o.a.createElement(Zx,{href:t,linkText:s,isHrefValid:a,onHrefChange:this.onHrefChange,onLinkTextChange:this.onLinkTextChange})),o.a.createElement(tD,null,o.a.createElement(eD,{appearance:"primary",onClick:this.onSubmit,isDisabled:n,testId:"issue.views.issue-base.content.web-links.create-link.submit-button"
},e(Xx.linkButton)),o.a.createElement(eD,{appearance:"subtle",onClick:this.closeAndReset,testId:"issue.views.issue-base.content.web-links.create-link.cancel-button"},e(Xx.cancelButton))))}}nD.displayName="WebLinkCreateLinkView";var aD=Object(Is.a)([I.injectIntl,Object(Ys.a)("button",{onSubmit:"clicked",onCancel:"clicked"}),Object(T.a)({onSubmit:"webLinkSubmit",onCancel:"webLinkCancel"}),Object(c.connect)((e=>({linkedPagesCount:Object(xb.f)(e),createLinkClickedCount:Object(xb.c)(e)})),(e=>({onCancel:()=>e(Object(JP.j)()),onSubmit:(t,s,n)=>e(Object(JP.c)(Object(Vr.j)(t),s,n))})))])(nD);const iD=ee.default.div.withConfig({componentId:"sc-17qx2ju-0"})`margin:${te.e}px 0;padding-right:1px;`,rD=Object(ee.default)(J.a).withConfig({componentId:"sc-17qx2ju-1"})`margin-top:${te.e/2}px;padding-left:0 !important;padding-right:0 !important;`;class oD extends r.Component{renderHeading(){
const{intl:e,isCreateWebLinkOpened:t,onAddButtonClicked:s,links:n,canAddWebLinks:a,applicationName:i,applicationId:r}=this.props,c=Boolean(n&&n.length),l=null==r||""===(null==r?void 0:r.trim());return t||c?o.a.createElement(Si.c,null,o.a.createElement(Si.e,null,l?e.formatMessage(ZP.heading):i),o.a.createElement(Si.d,null,a&&l&&o.a.createElement(Mx,{onClick:s}))):null}renderLineCards(){const{links:e,canAddWebLinks:t}=this.props;return e&&e.length?o.a.createElement(iD,null,o.a.createElement(Px,{links:e,canDelete:t})):null}renderCreateLinkView(){const{applicationId:e,isCreateWebLinkOpened:t}=this.props;return(null==e||""===(null==e?void 0:e.trim()))&&t?o.a.createElement(aD,null):null}renderShowMore(){const{onShowMore:e,nextPageCount:t,intl:s}=this.props;return o.a.createElement(rD,{appearance:"link",onClick:e,testId:"issue.views.issue-base.content.web-links.show-more-link"},s.formatMessage(ZP.showMoreLabel,{nextPageCount:t}))}render(){
const{applicationId:e,nextPageCount:t}=this.props,s="string"==typeof e?e:"generic";return o.a.createElement("div",{"data-testid":`issue.views.issue-base.content.web-links.top-container.scope-${s}`},this.renderHeading(),this.renderLineCards(),t>0&&this.renderShowMore(),this.renderCreateLinkView())}}function cD(){return(cD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}oD.displayName="WebLinksView";const lD=e=>{const{createAnalyticsEvent:t}=Object(sr.a)(),[s,n]=Object(r.useState)(0),{links:a}=e,i=Object(r.useCallback)((()=>{n(s+1);const e=t({action:"clicked",actionSubject:"button"});Object(Ki.h)(e,"webLinksShowMore",{currentPage:s})
}),[t,s]),c=10+50*s,l=Object(r.useMemo)((()=>a.slice(0,c)),[a,c]),d=Object(r.useMemo)((()=>QP()(a.length-c,0,50)),[a.length,c]),u=a.filter((e=>null==e.isCreating||!e.isCreating)).length,p=Object(r.useRef)(u),{showFlag:m}=Object(Ay.f)();return Object(r.useEffect)((()=>{p.current>0&&u>10&&u>p.current&&m({type:"success",title:ZP.webLinkAddedFlagTitle,description:ZP.webLinkAddedFlagDescription}),p.current=u}),[u,m]),o.a.createElement(oD,cD({},e,{links:l,nextPageCount:d,onShowMore:i}))};lD.displayName="PaginationAwareView";const dD=kt()([I.injectIntl,Object(T.a)({onAddButtonClicked:"addWebLink"}),Object(c.connect)(((e,t)=>{const{applicationId:s}=t;return{isCreateWebLinkOpened:Object(xb.d)(e),links:Object(xb.h)(e,s),canAddWebLinks:Object(xb.b)(e)}}),(e=>({onAddButtonClicked:()=>e(Object(JP.k)())})))])(lD),uD=e=>o.a.createElement(_h.b,{id:"^web-links-general-container"},o.a.createElement(dD,e));uD.displayName="ConnectedView";var pD=uD;class mD extends r.Component{maybeWrapInSectionWrapper(e){
const{isCompactMode:t}=this.props;return e?o.a.createElement(Tb,{isCompactMode:t},e):e}renderEcosystemContentPanels(){const{contentPanels:e,isCompactMode:t}=this.props,s=e.map((e=>{if("FORGE_ENTITY_TYPE"===e.type){const{name:s,appKey:n,moduleKey:a,dateAdded:i,panelInstanceId:r,extension:c}=e,l=Object(ki.g)(n,a,r,i);return o.a.createElement(ug,{key:l,panelKey:l,name:s,appKey:n,moduleKey:a,extension:c,isCompactMode:t,externalId:"issue.ecosystem.content-panel.forge"})}return o.a.createElement(Qb,{key:e.name,name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,externalId:"issue.ecosystem.content-panel"})}));return o.a.createElement(o.a.Fragment,null,s)}renderAdditionalWebLinksSections(){const{additionalWebLinksSections:e}=this.props;return o.a.createElement(o.a.Fragment,null,e.length>0&&o.a.createElement(Ye.c,{eventName:"additionalWebLinksSections shown",componentName:"additionalWebLinksSections"}),e.map((({applicationId:e,applicationName:t})=>o.a.createElement(r.Fragment,{key:e
},this.maybeWrapInSectionWrapper(o.a.createElement(pD,{applicationId:e,applicationName:t}))))))}render(){const{isComplete:e,isCompactMode:t,issueKey:s,isEpic:n,hasIssueLinks:a,hasSubtasks:i,hasChildrenIssues:r,hasPortfolioChildIssues:c}=this.props,l=a?o.a.createElement(cP,null):null,d=i?o.a.createElement(zP,{key:s}):null,u=r?o.a.createElement(jC,{key:s}):null,p=c?o.a.createElement(_P,{key:s}):null,m=n?o.a.createElement(cT,{key:s}):null,f=e?o.a.createElement(fO,null):null;return o.a.createElement(_b,{isCompactMode:t
},o.a.createElement(Lp,null),this.maybeWrapInSectionWrapper(f),this.maybeWrapInSectionWrapper(m),this.maybeWrapInSectionWrapper(u),this.maybeWrapInSectionWrapper(p),this.maybeWrapInSectionWrapper(d),this.maybeWrapInSectionWrapper(o.a.createElement(kP,null)),this.maybeWrapInSectionWrapper(l),this.maybeWrapInSectionWrapper(o.a.createElement(IP,null)),this.maybeWrapInSectionWrapper(o.a.createElement(Ib,null)),this.maybeWrapInSectionWrapper(o.a.createElement(QI,null)),this.maybeWrapInSectionWrapper(o.a.createElement(pD,null)),this.renderAdditionalWebLinksSections(),this.maybeWrapInSectionWrapper(this.renderEcosystemContentPanels()),this.maybeWrapInSectionWrapper(o.a.createElement(dP,null)),Object(Ts.isProformaIssueViewEnabled)()&&this.maybeWrapInSectionWrapper(o.a.createElement(NP,{issueKey:s})))}}mD.displayName="ContentItems",mD.displayName="ContentItems",mD.defaultProps={isComplete:!1,isCompactMode:!1,isEpic:!1,hasIssueLinks:!1,hasSubtasks:!1,hasPortfolioChildIssues:!1,
hasChildrenIssues:!1,contentPanels:[],additionalWebLinksSections:[]};var fD=Object(c.connect)((e=>({issueKey:Object(M.x)(e),contentPanels:Object(ha.f)(e),isComplete:Object(L.n)(e),isEpic:Object(L.q)(e),hasIssueLinks:Object(Yn.x)(e),hasSubtasks:Object(Yn.z)(e),hasPortfolioChildIssues:Object(Yn.y)(e),hasChildrenIssues:Object(Yn.w)(e),additionalWebLinksSections:Object(xb.a)(e)})),{})(mD),bD=n("./node_modules/@atlaskit/icon/glyph/arrow-left.js"),gD=n.n(bD),hD=n("./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js"),yD=n("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js"),OD=n("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js"),jD=n("./src/packages/platform/observability/analytics-web-react/src/components/analytics-data.js");var vD=n("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js");const ED="issue.views.issue-base.context.tab-panel";var wD=(e,t)=>{const s=Object(hD.a)()
;return e.reduce(((e,n)=>{switch(n.type){case"FIELD":{const a=Object(vD.a)(Object(Yn.u)(n.id,t));if(!a||!Object.keys(s).includes(a))return pa.h.safeErrorWithoutCustomerData(ED,`Could not find a matching component for field '${a||"(unknown type)"}' with id '${n.id}'`,new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e;const i=s[a].item,r=o.a.createElement(i,{key:n.id,fieldId:n.id,area:"tab-panel"});return e.push({fieldType:a,component:r}),e}default:return pa.h.safeErrorWithoutCustomerData(ED,`Unknown tab item '${JSON.stringify(n)}'`,new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e}}),[])};const kD=ee.default.div.withConfig({componentId:"sc-189sz4d-0"})`flex-shrink:0;background:${Ze.a.N0};outline:0;min-height:40px;`,CD=ee.default.div.withConfig({componentId:"sc-189sz4d-1"
})`display:flex;align-items:center;position:relative;box-sizing:border-box;box-shadow:inset 0 ${-2}px 0 0 ${Ze.a.N30};margin-left:${-Lo.c}px;padding-left:${Lo.c}px;${({maxWidth:e})=>`max-width: ${e}px;`} &:hover{cursor:pointer;}&:focus{box-shadow:inset 0 0 0 ${2}px ${Ze.a.B100};outline:0;}`,SD=ee.default.div.withConfig({componentId:"sc-189sz4d-2"})`height:100%;display:inline-block;width:100%;${({maxWidth:e})=>`max-width: ${e}px;`}`,ID=ee.default.button.withConfig({componentId:"sc-189sz4d-3"})`display:flex;height:28px;width:28px;border:none;border-radius:50%;background:${Ze.a.N30};color:${Ze.a.N60};align-items:center;padding-left:2px;margin-left:${te.e/2}px;&:hover{cursor:pointer;}`;var TD=Object(I.defineMessages)({emptyStateHeader:{id:"issue.context.tab-panel.empty-state.header",defaultMessage:"No fields to show"},emptyStateMessage:{id:"issue.context.tab-panel.empty-state.message",
defaultMessage:"If you expect to see fields here, ask your Jira admin to check permissions and field configuration."},emptyStateMessageAdmin:{id:"issue.context.tab-panel.empty-state.message.admin",defaultMessage:"If you expect to see fields here, check your permission and field configuration settings."}});const _D=ee.default.div.withConfig({componentId:"sc-1xqv8ny-0"})`padding:${2*te.e}px ${te.e}px ${te.e}px ${1.25*te.e}px;overflow:auto;height:100%;`;function PD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?PD(Object(s),!0).forEach((function(t){DD(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):PD(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function DD(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class AD extends r.Component{componentDidMount(){const{renderedItems:e,tabItems:t}=this.props,s=new Set(e.map((e=>e.fieldType))),n=t.map((e=>e.id)).filter((e=>!s.has(e)));this.props.onComponentMounted({renderedFieldsCount:s.size,unrenderedFieldsCount:n.length,unrenderedFieldTypes:n.join(",")})}render(){const{renderedItems:e,isProjectAdmin:t,contentWidth:s,intl:{formatMessage:n}}=this.props;return e.every((e=>null==e.component))?o.a.createElement(OE.a,{size:"narrow",isSubtle:!0,header:n(TD.emptyStateHeader),description:n(t?TD.emptyStateMessageAdmin:TD.emptyStateMessage)}):o.a.createElement(_D,null,o.a.createElement(SD,{maxWidth:s},e.map((e=>e.component))))}}AD.displayName="TabPanel";var MD=Object(Is.a)([I.injectIntl,Object(Ys.a)("fieldTab",{onComponentMounted:"rendered"
}),Object(c.connect)(((e,t)=>({onComponentMounted:(e,s)=>{Object(BT.a)(s,{name:t.panelKey,attributes:xD({contextPanelType:t.type},e)})}})),{})])(AD),LD=Object(Is.a)([Object(jD.a)({attributes:{contextPanelType:"TAB"}}),Object(c.connect)(((e,{type:t,panelKey:s,payload:{tabItems:n}})=>({renderedItems:wD(n,Object(Yn.s)(e)),tabItems:n,type:t,panelKey:s,isProjectAdmin:Object(JI.c)(e)})),{})])(MD);const RD=e=>{const{refs:t}=e,s=Object(cs.g)(),[n]=Object($c.b)(s),[,{setIssueViewLayoutContextPanel:a}]=Object($c.a)(),i=Object(hD.a)(),c=void 0!==n,l=Object(r.useCallback)((()=>{a(s,void 0)}),[s,a]);let d=null;if(n){const e=i[n.type];d="TAB"===n.type?LD:e&&e.panel}return o.a.createElement(_h.b,{id:"issue.issue-view.issue-base.context.context-panel"},o.a.createElement(yD.a,{refs:t,isOpen:c},(e=>o.a.createElement(o.a.Fragment,null,o.a.createElement(kD,{"data-test-id":"issue.views.issue-base.context.context-panel.back"},o.a.createElement(CD,{maxWidth:e.headerWidth,onClick:l,tabIndex:"0"
},o.a.createElement(ID,null,o.a.createElement(gD.a,{size:"medium",label:"Return"})),o.a.createElement(OD.c,null,n&&n.title))),d&&n?o.a.createElement(d,{contentWidth:e.contentWidth,type:n.type,panelKey:n.key,payload:n.payload}):null))))};RD.displayName="ContextPanel",RD.displayName="ContextPanel";var ND=n("./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js");const FD=ee.default.div.withConfig({componentId:"sc-71mhyq-0"})`${({panelWidth:e})=>`min-width: ${e}px;`};width:100%;height:100%;overflow:auto;position:relative;padding:${te.e}px;`;function UD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function VD(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const KD=(e,t)=>{
const s=e.appKey!==t.appKey,n=e.moduleKey!==t.moduleKey,a=e.statusCategory!==t.statusCategory,i=e.refreshedOn!==t.refreshedOn,r=e.styles!==t.styles;return!(s||n||a||r||i)},$D=Object(r.memo)((({refreshedOn:e=0,onGlanceHideAnalytics:t=d.a,appKey:s,moduleKey:n,glance:a,styles:i,statusCategory:c})=>{if(!a)return null;const[l,u]=Object(r.useState)(window.connectHost),p=Object(cs.g)(),[,{setIssueViewLayoutGlance:m}]=Object($c.a)(),{options:{origin:f}}=a;Object(r.useEffect)((()=>{l||(pa.h.safeInfoWithoutCustomerData("issue.ecosystem.glance.panel","Delayed initialization of ecosystem glance panel"),Object(va.b)((e=>u(e))))}),[l]);const b=Object(wa.b)({isAutoresizeBugfixEnabled:Object(Ts.isConnectGlanceAutoresizeBugfixEnabled)()}),g=Object(Ts.isMoveEcosystemModuleToSeparatePackageEnabled)()?ka.b:Aa;return o.a.createElement(o.a.Fragment,null,o.a.createElement(kD,null,o.a.createElement(CD,{maxWidth:i.headerWidth,onClick:()=>{t(Object(ga.d)(s,n,a.status)),m(p,void 0)},tabIndex:"0"
},o.a.createElement(ID,null,o.a.createElement(gD.a,{size:"medium",label:"Return"})),o.a.createElement(OD.c,null,a.name))),l&&o.a.createElement(FD,{panelWidth:i.contentWidth},o.a.createElement(SD,{maxWidth:i.contentWidth},o.a.createElement(Ea.a,{key:`connect-iFrame-${f}-${c}-${e}`,connectHost:l,appKey:s,moduleKey:n,url:a.options.url,options:b.convertConnectOptions(a.options),height:"100%",width:"100%",connectIframeProvider:b,timeoutIndicator:()=>o.a.createElement(g,{appName:a.name,appKey:s})}))))}),KD);var WD=Object(Is.a)([Object(zs.a)((e=>({onGlanceHideAnalytics:t=>e("hide",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?UD(Object(s),!0).forEach((function(t){VD(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):UD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))}))),Object(c.connect)(((e,t)=>({
glance:Object(ha.l)(t.appKey,t.moduleKey)(e),statusCategory:Object(F.a)(e),refreshedOn:Object(L.e)(e)})),(e=>({onHideGlance:()=>{e(Object(ND.a)()),e(Object(rs.e)())}})))])($D),BD=n("./src/packages/forge/forge-ui-analytics/src/ui/issue-glance/index.js"),HD=n("./src/packages/forge/forge-ui-async/src/ui/issue-glance/async.js");const GD=({glance:e,extensionData:t,styles:s,source:n,isOpen:a})=>{const[i,c]=Object(r.useState)(!1),l=Object(cs.g)(),[,{setIssueViewLayoutGlance:d}]=Object($c.a)(),u=Object(r.useCallback)((()=>{d(l,void 0)}),[l,d]);return Object(r.useEffect)((()=>{a&&!i&&c(!0)}),[a,i]),o.a.createElement(o.a.Fragment,null,o.a.createElement(kD,{onClick:void 0,tabIndex:void 0},o.a.createElement(CD,{maxWidth:s.headerWidth,onClick:u,tabIndex:"0"},o.a.createElement(ID,null,o.a.createElement(gD.a,{size:"medium",label:"Return"})),o.a.createElement(OD.c,null,e.title))),o.a.createElement(FD,{panelWidth:s.contentWidth},o.a.createElement(SD,{maxWidth:s.contentWidth},i&&o.a.createElement(HD.a,{
extensionData:t,extension:e.extension,analyticsAttributes:{source:n}}))))};GD.displayName="ForgeGlancePanel";const qD=e=>o.a.createElement(BD.b,{attributes:{source:e.source}},o.a.createElement(GD,e));qD.displayName="ForgeGlancePanelWithAnalytics";var zD=Object(Is.a)([Object(c.connect)((e=>({extensionData:Object(wc.g)(e),source:Object(M.b)(e)})),{onHideForgeGlance:ND.a})])(qD);class YD extends r.Component{renderGlance(e,t){const{glance:s}=this.props;switch(s.glanceType){case"CONNECT_ENTITY_TYPE":return o.a.createElement(WD,{panelWidth:e.panelWidth,styles:e,appKey:s.appKey,moduleKey:s.moduleKey,key:`issue.ecosystem.glance.panel_${s.appKey}_${s.moduleKey}`});case"FORGE_ENTITY_TYPE":return o.a.createElement(zD,{panelWidth:e.panelWidth,styles:e,key:`issue.forge.glance.panel_${s.appKey}_${s.moduleKey}`,glance:s,isOpen:t});default:return null}}render(){const{openedGlance:e,glance:t,refs:s}=this.props,n=!!e&&e.appKey===t.appKey&&e.moduleKey===t.moduleKey;return o.a.createElement(yD.a,{refs:s,
isOpen:n},(e=>this.renderGlance(e,n)))}}YD.displayName="GlanceAnimatedPanel",YD.defaultProps={openedGlance:null};var QD=Object(zs.a)((e=>({onMount:t=>e("mounted",t)})))(YD),JD=Object(I.defineMessages)({move:{id:"issue.move",defaultMessage:"Move"},clone:{id:"issue.clone",defaultMessage:"Clone"},delete:{id:"issue.delete",defaultMessage:"Delete"},print:{id:"issue.print",defaultMessage:"Print"},exportXML:{id:"issue.export-xml",defaultMessage:"Export XML"},exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word"},switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"},switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"},newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"},swiftLink:{id:"issue.swift-link",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"},startTour:{id:"issue.start-guided-tour",
defaultMessage:"Show me the highlights"},findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more"},seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"},turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view"},turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now"},triggerButtonLabel:{id:"issue.label-for-issue-actions-button",defaultMessage:"Actions"},configure:{id:"issue.configure",defaultMessage:"Configure"},addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent"},convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"},convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}
}),ZD=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js"),XD=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-configuration-href.js"),eA=Object(I.defineMessages)({configureTooltipAdmin:{id:"issue.details.configuration-button.configure-fields.tooltip-admin",defaultMessage:"Configure fields"},configureTooltipEndUser:{id:"issue.details.configuration-button.configure-fields.tooltip-end-user",defaultMessage:"Contact your admin to change the field order & layout"},configureTooltipAdminNoRequestType:{id:"issue.details.configuration-button.configure-fields.tooltip-admin-no-request-type",defaultMessage:"You can\u2019t configure the layout of an issue while it doesn\u2019t have a request type."}});var tA=ee.default.div.withConfig({componentId:"sc-10td9h3-0"
})`margin:${te.e/2}px ${1.5*te.e}px 0 0;display:block;min-width:0;max-width:50%;[type='button']{padding:0;font-size:12px;span{margin:0;text-overflow:unset;}span[class*='Icon__IconWrapper']{width:16px;}}margin-right:0;a{margin-right:0;}`;const sA=Object(r.memo)((e=>{const{intl:{formatMessage:t}}=e,s=((e,t)=>{switch(e){case"show":return{tooltipText:t(eA.configureTooltipAdmin),isDisabled:!1};case"disabled_permission":return{tooltipText:t(eA.configureTooltipEndUser),isDisabled:!0};case"disabled_no_request_type":return{tooltipText:t(eA.configureTooltipAdminNoRequestType),isDisabled:!0};case"disabled_no_screen_id":return{tooltipText:"",isDisabled:!0};case"hide":default:return{isHidden:!0}}})((()=>{const e=Object(cs.i)(),t=Object(Gd.c)(e),s=Object(Gd.b)(e),n=Object(Tl.i)(e),a=!Object(Tl.a)(e),i=Object(cs.g)(),r=Object(cs.l)(),[{value:o}]=Object(wd.c)(i);let c="issuetype"
;a&&n===Il.g&&(Object(Ts.is2afErrorCleanupGroup2Enabled)()?o:null!==o)&&(c=Object(ZD.a)("com.atlassian.servicedesk:vp-origin",o));const l=void 0!==c?c:"issuetype",[d]=Object(Vl.b)({issueKey:i,fieldKey:l}),[u]=Object(Vl.b)({issueKey:i,fieldKey:"issuetype"});if(!s)return"disabled_permission";switch(n){case Il.g:if(!t)return"disabled_permission";if(a&&(null===c||null==d||void 0===d.requestType||void 0===d.requestType.id)||!a&&(!u||!u.id))return"disabled_no_request_type"}return null!=r&&0!==r||!a?"show":"disabled_no_screen_id"})(),t);if(s.isHidden)return null;const{tooltipText:n,isDisabled:a}=s,i=t(JD.configure),r=Object(XD.a)(t);return o.a.createElement(tA,null,o.a.createElement(Re.a,{position:"mouse",mousePosition:"left",content:n},o.a.createElement(J.a,{isDisabled:a,appearance:"subtle-link",iconBefore:o.a.createElement(xu.a,{label:""}),href:r,target:"_blank",rel:"noopener noreferrer",onClick:(e,t)=>Object(Ki.h)(t,"configureButton")},i)))}))
;var nA=Object(Is.a)([I.injectIntl])(sA),aA=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),iA=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js");var rA=({issueKey:e})=>{const[t]=Object(Vl.b)({issueKey:e,fieldKey:"created"});return[{value:t}]},oA=n("./src/packages/issue/fields/components/timestamp/src/index.js");const cA=ee.default.div.withConfig({componentId:"q5g49g-0"})`display:flex;margin-top:${te.e/2}px;`,lA=ee.default.small.withConfig({componentId:"q5g49g-1"})`color:${Ze.a.N200};padding-top:${te.e/4}px;white-space:nowrap;margin-top:0;font-size:${1.5*te.e}px;line-height:${te.e/6};`,dA={whenDisplaySettingSwitchable:ee.css`:hover{color:${Ze.a.N500};}`},uA=e=>{const{text:t,date:s}=e;return null==s?null:o.a.createElement(cA,null,o.a.createElement(lA,null,t,"\xa0",o.a.createElement(oA.a,{value:s,extraStyles:dA,tooltipPosition:"right"})))};uA.displayName="MetaDate"
;var pA=uA,mA=Object(I.defineMessages)({createdLabel:{id:"created-date.read.created-label",defaultMessage:"Created"}});const fA=({date:e})=>{const{formatMessage:t}=Object(qe.c)();return null!==e&&""!==e?o.a.createElement(_h.b,null,o.a.createElement(pA,{date:e,text:t(mA.createdLabel)})):null},bA=({issueKey:e})=>{const[{value:t}]=rA({issueKey:e});return o.a.createElement(fA,{date:t})};bA.displayName="CreatedDateField";var gA=bA;var hA=({issueKey:e})=>{const[t]=Object(Vl.b)({issueKey:e,fieldKey:"resolutiondate"});return[{value:t}]},yA=Object(I.defineMessages)({resolvedLabel:{id:"resolved-date.read.resolved-label",defaultMessage:"Resolved"}});const OA=({date:e})=>{const{formatMessage:t}=Object(qe.c)();return null!==e&&""!==e?o.a.createElement(_h.b,null,o.a.createElement(pA,{date:e,text:t(yA.resolvedLabel)})):null},jA=({issueKey:e})=>{const[{value:t}]=hA({issueKey:e});return o.a.createElement(OA,{date:t})};jA.displayName="ResolvedDateField";var vA=jA;var EA=({issueKey:e})=>{
const[t]=Object(Vl.b)({issueKey:e,fieldKey:"updated"});return[{value:t}]},wA=Object(I.defineMessages)({updatedLabel:{id:"updated-date.read.updated-label",defaultMessage:"Updated"}});const kA=({date:e})=>{const{formatMessage:t}=Object(qe.c)();return null!==e&&""!==e?o.a.createElement(_h.b,null,o.a.createElement(pA,{date:e,text:t(wA.updatedLabel)})):null},CA=({issueKey:e})=>{const[{value:t}]=EA({issueKey:e});return o.a.createElement(kA,{date:t})};CA.displayName="UpdatedDateField";var SA=CA;const IA=ee.default.div.withConfig({componentId:"sc-19b1za8-0"})`margin-top:${te.e/2}px;margin-right:${2*te.e}px;flex:1;padding-left:10px;`;var TA=()=>{const e=Object(cs.g)();return o.a.createElement(IA,null,o.a.createElement(gA,{issueKey:e}),o.a.createElement(SA,{issueKey:e}),o.a.createElement(vA,{issueKey:e}))},_A=n("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js");function PA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?PA(Object(s),!0).forEach((function(t){DA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):PA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function DA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var AA=({fieldKey:e,propName:t,isEnabled:s=(()=>!0),FieldValueSubscriber:n=Vl.a})=>a=>i=>{if(!s())return o.a.createElement(a,i);const{issueKey:r}=i;return o.a.createElement(n,{issueKey:r,fieldKey:e},(e=>{const s=xA(xA({},i),{},{[t]:e});return o.a.createElement(a,s)}))}
;const MA=Object(zn.createSelector)(UP.a,XI,_s.i,L.q,Wy.b,mT.a,M.t,IC,xb.b,kC.a,((e,t,s,n,a,i,r,o,c,l)=>{const d=t&&!s&&n;return{canCreateAttachment:a,shouldShowCreateSubtaskButton:e&&!s&&!d,shouldShowIssueInEpicButton:d,supportsChildCreation:s,canCreateIssueLink:i,isServiceDesk:r,canLinkConfluencePage:o,canAddWebLinks:c,canEditIssues:l}}));var LA=n("./src/packages/servicedesk/incident-management/issue-view/linked-alerts/src/services/main.js"),RA=n("./src/packages/wrm/src/wrm-module-loader/index.js"),NA=n("./src/packages/wrm/src/common-modules/calendar-locale-module.js");const FA=ee.default.div.withConfig({componentId:"sc-14y9r8v-0"})`display:flex;flex-direction:row;width:100%;`,UA=Object(ee.default)(xi.a).withConfig({componentId:"sc-14y9r8v-1"})`flex-grow:1;`,VA=Object(ee.default)(xi.a).withConfig({componentId:"sc-14y9r8v-2"})`width:8px;`,KA=ee.default.div.withConfig({componentId:"sc-14y9r8v-3"
})`width:32px;height:32px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMngzMl9yb3VuZGVkZWRnZTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9IjMyeDMyX3JvdW5kZWRlZGdlIiBmaWxsPSIjRkZGRkZGIj4gICAgICAgICAgICA8cGF0aCBkPSJNMywwIEMxLjM0MzE0NTc1LDMuMDQzNTkxODhlLTE2IC0yLjAyOTA2MTI1ZS0xNiwxLjM0MzE0NTc1IDAsMyBMMCwwIEwzLDAgWiBNMjksMCBMMzIsMCBMMzIsMyBDMzIsMS4zNDMxNDU3NSAzMC42NTY4NTQyLC0zLjA0MzU5MTg4ZS0xNiAyOSwwIFogTTMyLDI5IEwzMiwzMiBMMjksMzIgQzMwLjY1Njg1NDIsMzIgMzIsMzAuNjU2ODU0MiAzMiwyOSBaIE0zLDMyIEwwLDMyIEwwLDI5IEMyLjAyOTA2MTI1ZS0xNiwzMC42NTY4NTQyIDEuMzQzMTQ1NzUsMzIgMywzMiBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==);`
;var $A=()=>o.a.createElement(Di.a,null,o.a.createElement(xi.b,null),o.a.createElement(Pi.a,{paddingTop:4,paddingBottom:9},o.a.createElement(FA,null,o.a.createElement(KA,null),o.a.createElement(VA,null),o.a.createElement(KA,null),o.a.createElement(VA,null),o.a.createElement(KA,null),o.a.createElement(UA,null)))),WA=n("./node_modules/lodash/differenceBy.js"),BA=n.n(WA),HA=n("./node_modules/@atlaskit/icon/glyph/addon.js"),GA=n.n(HA),qA=n("./src/packages/common-legacy-do-not-add-anything-new/src/analytics-v2-wrapped-components/dropdown-item.js"),zA=n("./src/packages/connect-utils/connect-utils/src/common/utils/broadcast-connect-event.js");function YA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function QA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?YA(Object(s),!0).forEach((function(t){JA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):YA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function JA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ZA=3*te.e,XA=ee.default.span.withConfig({componentId:"lm5en9-0"})`padding:${te.e/2}px;`,eM=ee.default.div.withConfig({componentId:"lm5en9-1"})`display:inline-flex;`,tM=ee.default.span.withConfig({componentId:"lm5en9-2"})`color:${Ze.a.B400};`,sM=Object(I.defineMessages)({quickAddAddonLabel:{id:"issue.quickadd.addon",defaultMessage:"Add app"},addMore:{id:"issue.quickadd.addon.add.more",defaultMessage:"Add apps"}}),nM=e=>!!e.tooltip&&!!e.iconUrl;class aM extends r.Component{constructor(...e){super(...e),this.getExtensionsToShowIconsFor=()=>this.props.availableAddons.filter(nM).slice(0,3),
this.getExtensionsToShowInDropdown=()=>BA()(this.props.availableAddons,this.getExtensionsToShowIconsFor(),"moduleKey"),this.transformExtension=e=>{const t=o.a.createElement(qA.b,{key:e.moduleKey,elemBefore:aM.getIcon(e),onClick:this.itemSelected(e)},e.name);return e.tooltip?o.a.createElement(Re.a,{content:e.tooltip,key:e.moduleKey},t):t},this.createDropdownItems=e=>o.a.createElement(fr.a,null,e.map(this.transformExtension),this.props.canInstallAddons&&o.a.createElement(qA.b,{key:sM.addMore.id,elemBefore:o.a.createElement(tM,null,o.a.createElement(TE.a,{label:this.props.intl.formatMessage(sM.addMore)})),onClick:this.props.onAddExtensionsClick,href:`${this.props.baseUrl}/plugins/servlet/upm/marketplace/featured`,target:"_new"},o.a.createElement(tM,null,this.props.intl.formatMessage(sM.addMore)))),this.itemSelected=e=>()=>{const t=Object(Ab.b)(e.moduleKey,10),s="FORGE_ENTITY_TYPE"===e.type;let n=s?Object(ki.e)(e.appKey,e.moduleKey):Object(ki.c)(e.appKey,e.moduleKey);if(s){
const t=`${n}-`,s=this.props.contentPanelsInIssue.find((e=>Object(ki.b)(e,t)));null!=s&&!1===e.allowMultiple&&(n=s)}e.showByDefault||this.props.contentPanelsInIssue.includes(`${e.appKey}_${t}`)||this.props.contentPanelsInIssue.includes(n)?(this.props.onContentPanelFocusAnalytics(Object(ga.b)(e.appKey,e.moduleKey)),this.props.onSelectContentPanel(n),this.sendQuickAddClickedEvent(!1,e.appKey,e.moduleKey,s)):(this.props.onContentPanelAddAnalytics(Object(ga.b)(e.appKey,e.moduleKey)),this.props.onAddExtension(n),this.sendQuickAddClickedEvent(!0,e.appKey,e.moduleKey,s))},this.sendQuickAddClickedEvent=(e,t,s,n)=>{this.props.onQuickAddClick("ISSUE_QUICK_ADD_CLICKED",{addon_key:t,key:s},{isNewToIssue:e.toString()}),n&&Object(Jb.m)(this.props.source,{isNewToIssue:e})},this.transformExtensionToQuickIcon=(e,t)=>this.props.createItemView({id:`${e.appKey}_${e.moduleKey}`,label:e.tooltip||e.name,icon:aM.getIcon(e),onClick:this.itemSelected(e),itemIndex:this.props.startIndex+t}),
this.renderVisibleExtensionIcons=()=>this.getExtensionsToShowIconsFor().map(((e,t)=>this.transformExtensionToQuickIcon(e,t))),this.renderDropdownExtensions=()=>{const{intl:e,canInstallAddons:t}=this.props,s=this.getExtensionsToShowInDropdown();return s.length>0||t?o.a.createElement(Cm.a,{key:"ecosystem-actions-dropdown",boundariesElement:"scrollParent",triggerType:"button",triggerButtonProps:{spacing:"none",theme:(e,t)=>{const s=e(t);return QA(QA({},s),{},{buttonStyles:QA(QA({},s.buttonStyles),{},{margin:0})})},iconBefore:o.a.createElement(XA,null,o.a.createElement(Im.a,{size:"medium",label:""})),"aria-label":e.formatMessage(sM.quickAddAddonLabel)}},this.createDropdownItems(s)):null}}static getIcon(e){return e.iconUrl?o.a.createElement(os.a,{title:e.name,url:e.iconUrl,width:ZA,height:ZA,fallback:()=>this.getFallbackIcon({name:e.name})}):this.getFallbackIcon({name:e.name})}componentDidMount(){const{availableAddons:e,contentPanelsInIssue:t,onContentPanelListLoadedAnalytics:s}=this.props
;e.length>0&&s(Object(ga.c)(e,t))}render(){const e=this.renderVisibleExtensionIcons(),t=this.renderDropdownExtensions();return o.a.createElement(eM,null,[...e,t])}}aM.displayName="UnsafeAddonsQuickAdd",aM.defaultProps={canInstallAddons:!1,availableAddons:[],contentPanelsInIssue:[],onContentPanelListLoadedAnalytics:d.a,onContentPanelAddAnalytics:d.a,onContentPanelFocusAnalytics:d.a,onAddExtensionsClick:d.a,onQuickAddClick:d.a,onAddWebLinkClick:d.a},aM.getFallbackIcon=e=>o.a.createElement(GA.a,{size:"medium",label:e.name});const iM=(e,t,s)=>{Object(zA.a)(e,t,s)};var rM=kt()(Object(zs.a)((e=>({onContentPanelListLoadedAnalytics:t=>e("load",QA({},t)),onContentPanelAddAnalytics:t=>e("add",QA({},t)),onContentPanelFocusAnalytics:t=>e("focus",QA({},t))}))),Object(T.a)({onAddExtensionsClick:"quickAddDropdownMenuItem",onAddWebLinkClick:"quickAddWebLink"}),Object(c.connect)((e=>({availableAddons:Object(ha.k)(e),contentPanelsInIssue:Object(ha.p)(e),baseUrl:Object(M.f)(e),
canInstallAddons:Object(ha.c)(e),source:Object(M.b)(e),onQuickAddClick:iM})),(e=>({onAddWebLinkClick:()=>e(Object(JP.k)())}))),Object(Xs.a)())(Object(I.injectIntl)(aM)),oM=n("./node_modules/@atlaskit/icon/glyph/link.js"),cM=n.n(oM);const lM=ee.default.span.withConfig({componentId:"sc-5w3scg-0"})`margin-right:${te.e}px;`,dM=ee.default.span.withConfig({componentId:"sc-5w3scg-1"})`padding:${e=>e.compactMode?te.e/2:0}px;margin-left:${e=>e.compactMode?0:-4}px;margin-right:${e=>e.compactMode?0:-2}px;`,uM=ee.default.span.withConfig({componentId:"miy8ek-0"})`display:flex;margin-right:${te.e}px;`,pM=ee.default.span.withConfig({componentId:"miy8ek-1"})`padding:${te.e/2}px;`;var mM=Object(r.memo)((e=>{const{id:t,icon:s,label:n,onClick:a,testId:i}=e.item,c=Object(r.useCallback)(((e,s)=>{Object(Ki.h)(s,"createLink",{actionItemId:t,name:"linkDropdownListItem"}),a&&a()}),[t,a]);return o.a.createElement(qA.b,{id:t,elemBefore:s,onClick:c,"data-test-id":i},n)}));function fM(){
return(fM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const bM=e=>{const[t,s]=Object(r.useState)(!1),{position:n,actions:a,tooltip:i,triggerButtonProps:c}=e,l=o.a.createElement(Rr.a,fM({spacing:"none","aria-label":i,"aria-expanded":t},c,{testId:"issue.views.issue-base.foundation.quick-add.link-button.ui.link-dropdown-button"})),d=void 0!==i?o.a.createElement(Re.a,{content:i,position:"bottom",hideTooltipOnClick:!0},l):l;return o.a.createElement(Cm.a,{key:"web-link-actions-dropdown",position:n,trigger:d,onOpenChange:({isOpen:e},t)=>{s(e),Object(Ki.h)(t,"moreLinksDropdownToggled",{isOpen:e,name:"linkDropdownListButton"})}},o.a.createElement(fr.a,null,a.map((e=>o.a.createElement(mM,{key:e.id,item:e})))))};bM.displayName="DropdownListButton";var gM=bM;const hM=["actions"];function yM(){return(yM=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function OM(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function jM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jM(Object(s),!0).forEach((function(t){EM(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function EM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const wM=({compactMode:e,actions:t,tooltipLabel:s})=>{if(e){const e={iconBefore:o.a.createElement(pM,null,o.a.createElement(cM.a,{size:"medium",label:""}))};return o.a.createElement(gM,{actions:t,triggerButtonProps:e,tooltip:s})}const[{id:n,onClick:a,label:i,tooltip:r,testId:c},...l]=t,d=o.a.createElement(dM,{compactMode:e},o.a.createElement(cM.a,{size:"medium",label:""})),u=(e,t)=>{Object(Ki.h)(t,"AddLink",{name:"AddLinkButton"}),a()};return 0===l.length?o.a.createElement(Re.a,{content:r,position:"bottom",key:n},o.a.createElement(J.a,{"aria-label":r,spacing:"default",iconBefore:d,onClick:u,testId:c
},i)):o.a.createElement(o.a.Fragment,null,o.a.createElement(Re.a,{content:r,position:"bottom",key:n},o.a.createElement(Rr.a,{"aria-label":r,spacing:"default",iconBefore:d,onClick:u,testId:c,theme:(e,t)=>{const s=e(t);return vM(vM({},s),{},{buttonStyles:vM(vM({},s.buttonStyles),{},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:`2px solid ${Ze.a.N40}`,margin:0})})}},i)),o.a.createElement(gM,{actions:l,position:"bottom right",tooltip:s,triggerButtonProps:{iconBefore:o.a.createElement(pM,null,o.a.createElement(Iu.a,{size:"medium",label:""})),theme:(e,t)=>{const s=e(t);return vM(vM({},s),{},{buttonStyles:vM(vM({},s.buttonStyles),{},{borderTopLeftRadius:0,borderBottomLeftRadius:0,margin:0})})}}}))},kM=e=>{let{actions:t}=e,s=OM(e,hM);return 0===t.length?null:o.a.createElement(uM,null,o.a.createElement(wM,yM({actions:t},s)))};kM.displayName="LinkButtonWithWrapper";var CM=kM;function SM(){return(SM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function IM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function TM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?IM(Object(s),!0).forEach((function(t){_M(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):IM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class PM extends r.Component{render(){const{id:e,icon:t,onClick:s,extraAttributes:n,label:a,compactMode:i,testId:r,hasGlobalSpotlightTarget:c}=this.props,l=o.a.createElement(Rr.a,{"aria-label":a,
spacing:i?"none":"default",iconBefore:o.a.createElement(dM,{compactMode:i},t),onClick:s,theme:(e,t)=>{const s=e(t);return TM(TM({},s),{},{buttonStyles:TM(TM({},s.buttonStyles),{},{margin:0})})}},!i&&a),d=o.a.createElement(cd.a,{id:`global-spotlight-target-${e}`},l);return o.a.createElement(lM,SM({},n,{"data-test-id":r}),c?d:l)}}PM.displayName="View",PM.defaultProps={hasGlobalSpotlightTarget:!1,extraAttributes:{},label:"",compactMode:!0,testId:void 0};var xM=n("./node_modules/@atlaskit/icon/glyph/calendar.js"),DM=n.n(xM),AM=Object(I.defineMessages)({label:{id:"issue.foundation.quick-add.quick-add-items.schedule-change-button.label",defaultMessage:"Schedule change"},tooltip:{id:"issue.foundation.quick-add.quick-add-items.schedule-change-button.tooltip",defaultMessage:"Schedule change"}});const MM=({createItemView:e,onClick:t})=>{const s=Object(qe.c)();return e({id:"schedule-change",label:s.formatMessage(AM.label),tooltip:s.formatMessage(AM.tooltip),icon:o.a.createElement(DM.a,{
size:"medium",label:""}),itemIndex:4,shouldRender:!0,onClick:t,testId:"",hasGlobalSpotlightTarget:!0})};var LM=n("./src/packages/servicedesk/change-management/schedule-change-modal/src/async.js");const RM=({isOpen:e,onClose:t})=>{const s=Object(cs.g)();return o.a.createElement(LM.a,{issueKey:s,isOpen:e,onClose:t})};RM.displayName="ScheduleChangeModal";const NM=Object(Ee.g)((()=>n.e("async-issue-view-schedule-change-spotlight").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/schedule-change-button/schedule-change-spotlight/view.js")).then((e=>e.ScheduleChangeSpotlight))),{ssr:!1,moduleId:"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/schedule-change-button/schedule-change-spotlight/view.js"}),FM=()=>o.a.createElement(Ee.a,{fallback:null},o.a.createElement(NM,null));FM.displayName="ScheduleChangeSpotlight";const UM=({createItemView:e})=>{const[t,s]=Object(r.useState)(!1),n=Object(r.useCallback)((()=>{s(!0)
}),[]),a=Object(r.useCallback)((()=>{s(!1)}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(MM,{createItemView:e,onClick:n}),o.a.createElement(FM,null),o.a.createElement(RM,{isOpen:t,onClose:a}))},VM=()=>o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",version:"1.1",viewBox:"0 0 283.5 283.5",xmlSpace:"preserve"},o.a.createElement("linearGradient",{id:"SVGID_1_",x1:"31.506",x2:"199.673",y1:"66.925",y2:"96.578",gradientUnits:"userSpaceOnUse"},o.a.createElement("stop",{offset:"0.1",stopColor:"#505f79",stopOpacity:"0.3"}),o.a.createElement("stop",{offset:"0.4",stopColor:"#505f79",stopOpacity:"0.6"}),o.a.createElement("stop",{offset:"0.7",stopColor:"#505f79",stopOpacity:"0.9"}),o.a.createElement("stop",{offset:"1",stopColor:"#505F79"})),o.a.createElement("path",{fill:"url(#SVGID_1_)",d:"M92.1 149.5V60.3h100.5v58.1l31.3 31.3V29H89.6c-15.9 0-28.7 12.9-28.7 28.7v60.4l31.2 31.4z"}),o.a.createElement("path",{fill:"#505F79",
d:"M192.7 133.7v89.1H92.1v-58.1l-31.3-31.3v120.7h134.4c15.9 0 28.7-12.9 28.7-28.7V165l-31.2-31.3z"}),o.a.createElement("path",{fill:"#505F79",d:"M114.7 100.8H172.4V113.2H114.7z"}),o.a.createElement("g",null,o.a.createElement("path",{fill:"#505F79",d:"M114.7 133.2H172.4V145.6H114.7z"})),o.a.createElement("g",null,o.a.createElement("path",{fill:"#505F79",d:"M114.7 165.7H172.4V178.1H114.7z"})));VM.displayName="ProformaIcon"
;var KM=VM,$M=n("./node_modules/@atlaskit/icon/glyph/attachment.js"),WM=n.n($M),BM=n("./node_modules/@atlaskit/icon/glyph/child-issues.js"),HM=n.n(BM),GM=n("./node_modules/@atlaskit/icon/glyph/issues.js"),qM=n.n(GM),zM=n("./node_modules/@atlaskit/icon/glyph/page.js"),YM=n.n(zM),QM=n("./node_modules/@atlaskit/icon/glyph/subtask.js"),JM=n.n(QM),ZM=n("./src/packages/servicedesk/incident-management/common/src/assets/index.js"),XM=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg"),eL=n.n(XM),tL=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg"),sL=n.n(tL),nL=Object(I.defineMessages)({addFormTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-form-label",defaultMessage:"Add Form"},addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment"},
createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask"},addIssueLinkTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page"},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic"},addFormLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-form-button-label",defaultMessage:"Add Form"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach"},createSubtaskLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue"},createChildLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link Confluence page"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",defaultMessage:"Create issue in epic"},linkAlertsLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-label",defaultMessage:"Link alerts"},linkAlertsTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-tooltip",defaultMessage:"Link alerts"},linkIncidentLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident"},createIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-label",defaultMessage:"Create major incident"},createIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-tooltip",defaultMessage:"Create major incident"},addWebLinkLabel:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-label",defaultMessage:"Add web link"},addWebLinkTooltip:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-tooltip",defaultMessage:"Link web pages and more"},linkDropdownButtonLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-label",defaultMessage:"Link web pages and more"},linkDropdownButtonCompactLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-compact-label",defaultMessage:"Link issues, web pages, and more"}});const aL=ee.default.div.withConfig({componentId:"um2giz-0"})`margin-bottom:${te.e/2}px;padding:${te.e/2}px 0;display:inline-flex;`,iL=ee.default.img.withConfig({componentId:"um2giz-1"})`height:${3*te.e}px;width:${3*te.e}px;`,rL=e=>!!e&&e.alertLinking.enabled;var oL=e=>{const{formatMessage:t,canCreateAttachment:s,shouldShowCreateSubtaskButton:n,shouldShowIssueInEpicButton:a,canCreateIssueLink:i,onAddAttachmentClick:r,onCreateSubtaskClick:c,onCreateIssueInEpicClick:l,onChildCreateClick:d,supportsChildCreation:u,isServiceDesk:p,canLinkConfluencePage:m,onLinkConfluencePageClick:f,onCreateMajorIncidentClick:b,incidentLinking:g,incidentEscalate:h,incidentManagement:y,onLinkIncidentClick:O,onLinkAlertsClick:j,canAddWebLinks:v,onAddWebLinkClick:E,onAddIssueLinkClick:w}=e,k=[{id:"attachment",tooltip:t(nL.addAttachmentTooltip),
label:t(nL.addAttachmentLabel),icon:o.a.createElement(WM.a,{size:"medium",label:""}),onClick:r,itemIndex:0,shouldRender:!p&&s,testId:""},{id:"create-subtask",tooltip:t(nL.createSubtaskTooltip),label:t(nL.createSubtaskLabel),icon:o.a.createElement(JM.a,{size:"medium",label:""}),onClick:c,itemIndex:1,shouldRender:n,testId:""},{id:"create-issue-in-epic",tooltip:t(nL.createIssueInEpicTooltip),label:t(nL.createIssueInEpicLabel),icon:o.a.createElement(HM.a,{size:"medium",label:""}),onClick:l,itemIndex:1,shouldRender:a,testId:""},{id:"create-child",tooltip:t(nL.createChildTooltip),label:t(nL.createChildLabel),icon:o.a.createElement(HM.a,{size:"medium",label:""}),onClick:d,itemIndex:1,shouldRender:u,testId:""},{id:"create-incident",tooltip:t(nL.createIncidentTooltip),label:t(nL.createIncidentLabel),icon:o.a.createElement(o.a.Fragment,null,o.a.createElement(Ye.d,{eventName:"escalateMajorIncidentButton viewed",componentName:"BentoQuickAddItems"}),o.a.createElement(iL,{src:eL.a})),onClick:b,
itemIndex:3,shouldRender:!!h,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.create-incident",hasGlobalSpotlightTarget:!0}],C=[{id:"issue-links",tooltip:t(nL.addIssueLinkTooltip),label:t(nL.addIssueLinkLabel),icon:o.a.createElement(qM.a,{size:"medium",label:""}),onClick:w,itemIndex:2,shouldRender:i,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:t(nL.linkConfluencePageTooltip),label:t(nL.linkConfluencePageLabel),icon:o.a.createElement(YM.a,{size:"medium",label:""}),onClick:f,itemIndex:3,shouldRender:m,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-incident",tooltip:t(nL.linkIncidentTooltip),label:t(nL.linkIncidentLabel),icon:o.a.createElement(iL,{src:sL.a}),onClick:O,itemIndex:3,shouldRender:!!g,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"},{id:"link-alerts",
tooltip:t(nL.linkAlertsTooltip),label:t(nL.linkAlertsLabel),icon:o.a.createElement(ar.b,{glyph:ZM.a,size:"medium",label:""}),onClick:j||(()=>{}),itemIndex:3,shouldRender:rL(y),testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-alerts"},{id:"add-web-link",tooltip:t(nL.addWebLinkTooltip),label:t(nL.addWebLinkLabel),icon:o.a.createElement(ax.a,{size:"medium",label:""}),onClick:E,itemIndex:3,shouldRender:v,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-web"}];return{issueActions:k.filter((e=>e.shouldRender)),linkingActions:C.filter((e=>e.shouldRender))}},cL=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/utils.js");function lL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dL(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lL(Object(s),!0).forEach((function(t){uL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function uL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const pL=()=>o.a.createElement($A,null);pL.displayName="renderSkeleton";const mL=e=>{var t;const{formatMessage:s}=Object(qe.c)(),{fetchConfluenceAppLinks:n,triggerButtonClickAnalytics:a,onSelectContentPanel:i,onAddExtension:c,issueKey:l,containerWidth:d,locale:u}=e;let p,m;if(Object(Ts.isQuickAddItemsOptimisationEnabled)()){const{shouldBeCompact:e,setMeasuredRef:t}=Ei(d);p=e,m=t("quick-add-items")}else{
const[e,t]=Object(r.useState)(!1),s=Object(r.useRef)(0),n=Object(r.useRef)(null),a=Object(r.useCallback)((()=>n.current?n.current.clientWidth:0),[]),i=Object(r.useCallback)((()=>(s.current<a()&&(s.current=a()),s.current)),[a]),o=Object(r.useCallback)((()=>{const s=!d||d<=i();e!==s&&t(s)}),[d,i,e]);Object(r.useMemo)((()=>{o()}),[o]),Object(r.useEffect)((()=>{o()}),[d,o]),m=Object(r.useCallback)((e=>{n.current=e,o()}),[o]),p=e}const[,{openLinkAlertsModal:f}]=Object(Ts.isJsmLinkedAlertsEnabled)()?Object(LA.f)():[void 0,{}];let b=!1,g=Object(r.useCallback)((()=>{}),[]);if(Object(Ts.isProformaIssueViewEnabled)()){const[{value:{hasProjectForms:e}},{setAddFormButton:t}]=MP({issueKey:Object(Vr.m)(l)});g=t,b=!0===e}Object(r.useEffect)((()=>{n()}),[n,l]);const h=Object(r.useCallback)(((e,t,s)=>()=>{s(),a(e,t,4)}),[a]),y=Object(r.useCallback)((e=>{const{id:t,tooltip:s,label:n,icon:a,onClick:i,itemIndex:r,testId:c,hasGlobalSpotlightTarget:l}=e;return o.a.createElement(Re.a,{content:s,
position:"bottom",key:t},o.a.createElement(PM,{key:t,id:t,icon:a,onClick:h(t,r,i),label:n,compactMode:p,testId:c,hasGlobalSpotlightTarget:l}))}),[h,p]),O=Object(Tl.g)(l),[{canEditIssues:j}]=Object(Gd.d)(O),[v]=Object(cL.b)({issueKey:l}),E=j&&null!==(t=null==v?void 0:v.some((e=>e===CP.a)))&&void 0!==t&&t,w=Object(r.useCallback)((()=>{const{issueActions:t,linkingActions:n}=oL(dL(dL({},e),{},{formatMessage:s,onLinkAlertsClick:f})),r=t.map(y),l=p?nL.linkDropdownButtonCompactLabel:nL.linkDropdownButtonLabel,d=s(l),u=o.a.createElement(CM,{key:"quick-add-web-link-button",compactMode:p,actions:n,tooltipLabel:d}),m=[E&&o.a.createElement(UM,{key:"schedule-change",createItemView:y})].filter(Boolean),h=o.a.createElement(rM,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{i(e),a("select_contentpanel",3,4)},onAddExtension:e=>{c(e),a("add_contentpanel",3,4)},createItemView:y,startIndex:r.length}),O=b?[y({id:"add-form",
tooltip:s(nL.addFormTooltip),label:s(nL.addFormLabel),icon:o.a.createElement(ar.b,{glyph:KM,label:"",size:"medium"}),onClick:g,itemIndex:3,shouldRender:!0,testId:""})]:[];return[...r,u,...m,...O,h]}),[y,s,c,f,i,e,E,p,a,g,b]);if(e.isPreview)return pL();const k=w();return o.a.createElement($.a,{id:"jira.issuebase.quickadditems"},o.a.createElement(mo.a,{name:"QUICK_ADDS"},k.length?o.a.createElement(RA.a,{modules:[Object(NA.a)(u)]},(()=>o.a.createElement(aL,{innerRef:m},k))):o.a.createElement("div",null)))};function fL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fL(Object(s),!0).forEach((function(t){gL(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function gL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}mL.displayName="QuickAddItems",mL.defaultProps={canCreateIssueLink:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,triggerButtonClickAnalytics:d.a};const hL=e=>({onAddAttachmentClick:()=>{e(Object(bn.b)())},onCreateSubtaskClick:()=>{e((()=>({type:"SUBTASK_QUICK_ADD_CLICKED"}))())},onCreateIssueInEpicClick:()=>{e((()=>({type:"ISSUE_IN_EPIC_QUICK_ADD_CLICKED"}))())},onAddIssueLinkClick:()=>{Object(Kr.c)().markStartOfInteraction({key:ko.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT,cancelExisting:!0}),e(Object(dT.a)())},onChildCreateClick:()=>{e((()=>({type:"CHILD_ISSUE_QUICK_ADD_CLICKED"}))())},onLinkConfluencePageClick:()=>{
e(Object(EC.h)())},onLinkIncidentClick:()=>{e(uP())},onCreateMajorIncidentClick:()=>{e((()=>({type:"CREATE_MAJOR_INCIDENT_CLICKED"}))())},onAddWebLinkClick:()=>{e(Object(JP.k)())}});var yL=kt()(AA({fieldKey:"servicedesk-incident-linking",propName:"incidentEscalate"}),AA({fieldKey:"servicedesk-incident-linking",propName:"incidentLinking"}),AA({fieldKey:"servicedesk-incident-management",propName:"incidentManagement",isEnabled:()=>Object(Ts.isJsmLinkedAlertsEnabled)()}),Object(c.connect)((e=>bL(bL({},MA(e)),{},{isPreview:Object(L.s)(e),locale:Object(M.y)(e),projectType:Object(L.F)(e),issueKey:Object(M.x)(e)})),(e=>bL(bL({},hL(e)),{},{onAddExtension:t=>{e(Object(Db.b)(t))},onSelectContentPanel:t=>{e(Object(Db.d)(t))},fetchConfluenceAppLinks:()=>{e(Object(_A.a)())}}))),Object(zs.a)((e=>({triggerButtonClickAnalytics:(t,s,n)=>e(`${t}.click`,{index:s,actions:n})
}))),wi.a)(mL),OL=n("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),jL=n("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js");const vL=["refs"],EL=["refs"];function wL(){return(wL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function kL(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function CL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function SL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?CL(Object(s),!0).forEach((function(t){IL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):CL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function IL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const TL="QUICK_ADD_ITEMS",_L="CONTEXT_ITEMS",PL="issue.context-items",xL="META_CONTAINER",DL="CONTENT_ITEMS",AL="ACTIVITY_FEED",ML="issue.activity-feed",LL="issue.glance-panel",RL="CONFIGURE_FIELDS";class NL extends r.Component{constructor(e){super(e),this.setBreadcrumbsScrollContainer=e=>{this.setState({breadcrumbsScrollContainer:e})},this.setCompactHeaderScrollContainer=e=>{this.setState({compactHeaderScrollContainer:e})},
this.setHeaderActionsScrollContainer=e=>{this.setState({headerActionsScrollContainer:e})},this.setSidePanelContainer=e=>{e&&this.setState((t=>({refs:SL(SL({},t.refs),{},{refSidePanelContainerElement:this.props.isMobile&&this.props.isCompact?document.body:e})})))},this.setLayoutContainer=e=>{e&&this.setState((t=>({refs:SL(SL({},t.refs),{},{refLayoutContainer:e})})))},this.setPanelColumn=e=>{e&&this.setState((t=>({refs:SL(SL({},t.refs),{},{refPanelColumnElement:e})})))},this.setVisibilityContainer=e=>{e&&this.setState((t=>({refs:SL(SL({},t.refs),{},{refVisibilityContainer:e}),contextWidth:e.offsetWidth})))},this.getPassedDownRefs=()=>this.state.refs,this.shouldRenderHeaderFF=()=>this.props.shouldRenderHeader,this.renderFullSizeLayoutSideContent=()=>o.a.createElement(jL.h,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},o.a.createElement(Mp,null),o.a.createElement(Rp,{key:_L,externalId:PL}),o.a.createElement(jL.b,{
"data-test-id":"issue.views.issue-details.issue-layout.footnote"},o.a.createElement(TA,{key:xL}),o.a.createElement(nA,{key:RL}))),this.renderCompactHeader=()=>this.shouldRenderHeaderFF()?o.a.createElement(OL.a,{key:"SPLIT_HEADER",elementId:"jira-issue-header",scrollContainer:this.state.compactHeaderScrollContainer||void 0},o.a.createElement(aA.a,{shouldShowCloseButton:this.props.shouldShowCloseButton,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,issueDeleteCallbacks:this.props.issueDeleteCallbacks,renderFeedback:this.props.renderFeedback,viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose})):null,this.renderHeaderBreadcrumbs=()=>this.shouldRenderHeaderFF()?o.a.createElement(OL.a,{elementId:"jira-issue-header",scrollContainer:this.state.breadcrumbsScrollContainer},o.a.createElement(iA.a,{
shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,isCompact:this.props.isCompact})):null,this.renderHeaderActions=()=>this.shouldRenderHeaderFF()?o.a.createElement(OL.a,{elementId:"jira-issue-header-actions",customStyles:"margin-right: -7px",scrollContainer:this.state.headerActionsScrollContainer||void 0},o.a.createElement(Ha.a,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowCloseButton:this.props.shouldShowCloseButton})):null,this.renderFullSizeLayout=()=>{const e=jL.d,t=jL.c;return Object(Ts.isSwitcherooExperimentAATest)(),o.a.createElement(Bs.a,{hasMultipleScrollingColumns:!0},o.a.createElement(e,{issueMaxWidth:this.props.issueMaxWidth,medium:6.5,isLeftmost:!0,innerRef:this.setBreadcrumbsScrollContainer},o.a.createElement(t,{isLeftmost:!0,
issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.left-most-column"},this.renderHeaderBreadcrumbs(),o.a.createElement(Ap,null),o.a.createElement(yL,{key:TL,externalId:"issue.quick-add"}),o.a.createElement(fD,{key:DL,isCompactMode:!1}),o.a.createElement(Kc,{key:AL,externalId:ML}))),o.a.createElement(e,{medium:3.5,issueMaxWidth:this.props.issueMaxWidth,isRightmost:!0,scrollHidden:!this.props.arePanelsClosed,innerRef:vi()(this.setSidePanelContainer,this.setHeaderActionsScrollContainer)},o.a.createElement(t,{isRightmost:!0,innerRef:this.setPanelColumn,issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.right-most-column"},this.renderHeaderActions(),this.renderFullSizeLayoutSideContent())))},this.renderCompactLayoutItems=()=>[o.a.createElement(Ap,{key:"FOUNDATION_CONTENT"}),o.a.createElement(yL,{key:TL,externalId:"issue.quick-add"}),o.a.createElement(Mp,{key:"FOUNDATION_CONTEXT"}),o.a.createElement(fD,{
key:DL,isCompactMode:!0}),o.a.createElement(jL.a,{key:_L},o.a.createElement(Rp,{externalId:PL})),o.a.createElement(jL.b,{"data-test-id":"issue.views.issue-details.issue-layout.footnote",key:"FOOTNOTE_WRAPPER_KEY"},o.a.createElement(TA,{key:xL}),o.a.createElement(nA,{key:RL})),o.a.createElement(Kc,{key:AL,externalId:ML})],this.renderCompactLayout=()=>o.a.createElement(jL.f,{scrollHidden:!this.props.arePanelsClosed,innerRef:vi()(this.setSidePanelContainer,this.setCompactHeaderScrollContainer)},o.a.createElement(jL.e,{issueMaxWidth:this.props.issueMaxWidth,innerRef:this.setPanelColumn},this.renderCompactHeader(),o.a.createElement(jL.h,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},o.a.createElement(Bs.a,{isCompact:!0},o.a.createElement(m.a,null,this.renderCompactLayoutItems()))))),this.state={contextWidth:0,refs:{refVisibilityContainer:null,refSidePanelContainerElement:null,refPanelColumnElement:null,refLayoutContainer:null},
breadcrumbsScrollContainer:void 0,compactHeaderScrollContainer:void 0,headerActionsScrollContainer:void 0}}shouldComponentUpdate(e,t){return this.didPropsChange(e)||this.didStateChange(t)}didStateChange(e){const t=this.state,{refs:s}=t,n=kL(t,vL),{refs:a}=e,i=kL(e,EL);return(!this.props.arePanelsClosed||!Oi()(n,i))&&!Oi()(this.state,e)}didPropsChange(e){return!Oi()(this.props,e)}renderConnectGlancePanels(){return this.props.glances.map((e=>o.a.createElement(QD,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:LL,glanceType:"CONNECT_ENTITY_TYPE",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})))}renderGlancePanels(){return this.props.glances.map((e=>o.a.createElement(QD,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:LL,refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})))}renderContextPanel(){return o.a.createElement(RD,{
key:"context-panel",refs:this.getPassedDownRefs()})}render(){const e=this.props.isCompact?this.renderCompactLayout():this.renderFullSizeLayout();return o.a.createElement(jL.g,{innerRef:this.setLayoutContainer,"data-test-id":"issue.views.issue-details.issue-layout.issue-layout"},e,this.renderGlancePanels(),this.renderContextPanel())}}NL.displayName="IssueLayout",NL.displayName="IssueLayout",NL.defaultProps={isCompact:!1,shouldRenderHeader:!1,openedGlance:null,glances:[]};const FL=e=>{const t=Object(cs.g)(),[s]=Object($c.b)(t),[n]=Object($c.c)(t);return o.a.createElement(NL,wL({},e,{arePanelsClosed:void 0===s&&void 0===n,openedGlance:n}))};FL.displayName="IssueLayoutWithIssueLayoutState";var UL=Object(c.connect)((e=>({glances:Object(ha.i)(e),shouldRenderHeader:Object(M.E)(e),isMobile:Object(M.r)(e)})),{})(FL),VL=n("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js");const KL=ee.default.div.withConfig({componentId:"sc-1nyj9su-0"
})`height:100%;position:relative;`,$L=ee.default.div.withConfig({componentId:"sc-1nyj9su-1"})`position:absolute;height:100%;box-sizing:border-box;width:100%;${({attachmentHover:e})=>e?"\n                    border: 2px dashed #2684FF\n                    background: #deebff;\n                    mix-blend-mode: normal;\n                    opacity: 0.54;\n                    z-index: 100;\n                ":"border: 2px dashed transparent"}`;var WL=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcuts/index.js"),BL=n("./src/packages/shortcuts-dialog/src/controllers/shortcuts-service/main.js"),HL=n("./src/packages/issue/issue-view/src/actions/external-actions.js");const GL=Object(I.defineMessages)({nextIssue:{id:"issue.shortcuts.navigatingIssues.nextIssue",defaultMessage:"Next issue"},previousIssue:{id:"issue.shortcuts.navigatingIssues.previousIssue",defaultMessage:"Previous issue"},nextActivity:{
id:"issue.shortcuts.navigatingIssues.nextActivity",defaultMessage:"Next activity"},previousActivity:{id:"issue.shortcuts.navigatingIssues.previousActivity",defaultMessage:"Previous activity"},editAssignee:{id:"issue.shortcuts.editAssignee",defaultMessage:"Edit assignee"},commentOnIssue:{id:"issue.shortcuts.commentOnIssue",defaultMessage:"Comment on issue"},editLabels:{id:"issue.shortcuts.editLabels",defaultMessage:"Edit labels"},assignToMe:{id:"issue.shorctus.assignToMe",defaultMessage:"Assign to me"},openShortcutDialog:{id:"issue.shorctus.openShortcutDialog",defaultMessage:"Open shortcut dialog"}});function qL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qL(Object(s),!0).forEach((function(t){YL(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function YL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var QL=e=>Object(r.useMemo)((()=>({a:{callback:()=>{Object(Kr.c)().markStartOfInteraction({key:ko.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0,collectors:[e=>zL(zL({},e),{},{viaShortcut:1})]});const t=Object(HL.d)(Object(HL.c)("assignee"));e(t,"assignIssue","a")},label:o.a.createElement(I.FormattedMessage,GL.editAssignee),priority:999},i:{callback:()=>{Object(Kr.c)().markStartOfInteraction({key:ko.a.ASSIGNEE.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT,cancelExisting:!0});const t=Object(HL.d)(Object(HL.b)());e(t,"assignToMe","i")},label:o.a.createElement(I.FormattedMessage,GL.assignToMe),priority:999},l:{callback:()=>{
Object(Kr.c)().markStartOfInteraction({key:ko.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0});const t=Object(HL.d)(Object(HL.c)("labels"));e(t,"editLabels","l")},label:o.a.createElement(I.FormattedMessage,GL.editLabels),priority:999},m:{callback:()=>{Object(Kr.c)().markStartOfInteraction({key:ko.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0});const t=Object(HL.d)(Object(HL.a)());e(t,"commentIssue","m")},label:o.a.createElement(I.FormattedMessage,GL.commentOnIssue),priority:999}})),[e]);var JL=e=>Object(r.useMemo)((()=>({".":{callback:()=>{e("triggerShortcutDialogOpen",".")},label:o.a.createElement(I.FormattedMessage,GL.openShortcutDialog),priority:999}})),[e]);const ZL=(e,t)=>{const s=e.find((e=>e.length));return s&&(s[t]||s[s.length-1])},XL=(e,t)=>{const s=e.find((e=>e.includes(t)))||[],n=s.indexOf(t);return[s,n]},eR=(e,t)=>{const s=e.findIndex((e=>e.includes(t)));return[s,e[s].indexOf(t)]};var tR=e=>{const t=Object(cs.g)(),s=Object(cs.k)()
;return Object(r.useMemo)((()=>s?{j:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=XL(e,t);return s[n+1]||t})(s,t))},label:o.a.createElement(I.FormattedMessage,GL.nextIssue),priority:999},k:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=XL(e,t);return s[n-1]||t})(s,t))},label:o.a.createElement(I.FormattedMessage,GL.previousIssue),priority:999},n:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=eR(e,t),a=e.slice(s+1);return ZL(a,n)||t})(s,t))},label:o.a.createElement(I.FormattedMessage,GL.nextActivity),priority:999},p:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=eR(e,t),a=e.slice(0,s).reverse();return ZL(a,n)||t})(s,t))},label:o.a.createElement(I.FormattedMessage,GL.previousActivity),priority:999}}:{}),[t,e,s])};function sR(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nR(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sR(Object(s),!0).forEach((function(t){aR(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sR(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function aR(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const iR=e=>{const{dispatch:t}=e,s=Object(cs.g)(),{createAnalyticsEvent:n}=Object(sr.a)(),[,{setShortcutsDialogVisibility:a}]=Object(BL.b)(),i=Object(r.useCallback)(((e,s,a)=>{setTimeout((()=>t(e)),0),Object(Ki.h)(n({}),"keyboardShortcut pressed",`${s}KeyboardShortcut`,{key:a})}),[n,t]),c=Object(r.useCallback)(((e,t)=>{requestAnimationFrame((()=>a(!0))),Object(Ki.h)(n({}),"keyboardShortcut pressed",`${e}KeyboardShortcut`,{key:t}),Object(Ki.h)(n({}),"keyboardShortcut pressed","dotDialogKeyboardShortcut",{key:t,view:"NEW_ISSUE_VIEW"
})}),[n,a]),l=Object(r.useCallback)((e=>{e!==s&&t(Object(hO.c)({fromIssueKey:s,toIssueKey:e}))}),[t,s]),d=QL(i),u=JL(c),p=tR(l),m=Object(r.useMemo)((()=>nR(nR(nR({},d),p),u)),[p,d,u]);return o.a.createElement(WL.a,{keyMap:m})};iR.displayName="KeyboardShortcutsView";var rR=Object(r.memo)(iR),oR=Object(c.connect)(null,(e=>({dispatch:e})))((e=>o.a.createElement($.a,{id:"keyboard-shortcuts",packageName:"issue-view"},o.a.createElement(rR,e)))),cR=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/parent-issue-selector.js"),lR=n("./src/packages/issue/fields/status/src/services/use-status-service/main.js"),dR=n("./src/packages/issue/fields/status/src/services/status-transitions-service/main.js"),uR=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/add-to-issue-dropdown-group/main.js"),pR=n("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-manipulation-dropdown-group/main.js"),mR=Object(I.defineMessages)({
fieldsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.fields-section-label",defaultMessage:"Fields"},issueActionsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions-section-label",defaultMessage:"Issue Actions"},issueWorkflowsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-workflows-section-label",defaultMessage:"Workflow"},issueActionComment:{id:"issue.issue-view.issue-details.register-shortcuts.issue-action-comment",defaultMessage:"Comment"},issueActionAssignToMe:{id:"issue.issue-base.foundation.quick-add.quick-add-items.issue-action-assign-to-me",defaultMessage:"Assign to me"},assignToMeSuccessTitle:{id:"issue.issue-base.foundation.quick-add.quick-add-items.assign-to-me-success-title",defaultMessage:"Successfully assigned to you"},assignToMeSuccessDescription:{id:"issue.issue-base.foundation.quick-add.quick-add-items.assign-to-me-success-description",defaultMessage:"You're now the assignee for {issueKey}."},
assignToMeFailureTitle:{id:"issue.issue-base.foundation.quick-add.quick-add-items.assign-to-me-failure-title",defaultMessage:"We couldn't set the assignee"},assignToMeFailureDescription:{id:"issue.issue-base.foundation.quick-add.quick-add-items.assign-to-me-failure-description",defaultMessage:"Check your connection, then give it another try."}});const fR=({id:e})=>e,bR=e=>({type:t})=>t===e;var gR=n("./src/packages/shortcuts-dialog/src/common/constants.js"),hR=n("./src/packages/issue/fields/labels/src/ui/main.js");const yR=Object(Ee.g)((()=>n.e("async-jira-issue-field-sprint-main").then(n.bind(null,"./src/packages/issue/fields/sprint/src/ui/index.js"))),{ssr:!1,moduleId:"./src/packages/issue/fields/sprint/src/ui/index.js"}),OR=e=>o.a.createElement(Ee.a,{fallback:null},o.a.createElement(yR,e));OR.displayName="AsyncSprintField";var jR=()=>{const{LABELS_CF_TYPE:e,LABELS_TYPE:t,SPRINT_TYPE:s}=Object(Sd.Y)(),n={actionId:"Labels",item:hR.a};return{[t]:n,[e]:n,[s]:{actionId:"Sprint",item:OR}}}
;const vR=()=>{const e=Object(cs.g)(),t=Object(cs.f)(),s=Object(Tl.g)(e),n=Object(Tl.e)(s),[{value:a}]=Object(wd.c)(e),[,{setShortcutsDialogVisibility:i,setSelectedItemKey:c}]=Object(BL.a)(),l=Object(r.useCallback)((()=>{c(null),i(!1)}),[c,i]),d=Object(r.useMemo)((()=>jR()),[]),[{issueLayoutFields:u}]=(()=>{const e=Object(cs.g)(),[t]=Object($c.d)(e),[{issueTabs:s}]=Object(kd.b)(e);return[{issueLayoutFields:Object(r.useMemo)((()=>Object.keys(t).reduce(((e,n)=>{const a=t[n];if(Array.isArray(null==a?void 0:a.items)){const t=a.items.filter(bR("FieldSectionItem")).map(fR),n=a.items.filter(bR("TabLayout")).reduce(((e,t)=>{const n=s[t.id];return n?e.concat(n.items.filter(bR("FIELD")).map(fR)):e}),[]);return e.concat(t,n)}return e}),[])),[t,s])}]})();return Object(r.useMemo)((()=>u.reduce(((s,i)=>{const r=null==a?void 0:a[i];if(!r)return s;if(!r.isEditable)return s;const u=Object(Cd.c)(r);if("string"!=typeof u)return s;const p=d[u];return p?[...s,{label:r.title,key:`field-${i}-${u}`,
onClick:()=>{c(`field-${i}-${u}`)},type:gR.a,analytics:{attributes:{actionId:`editIssue${p.actionId}`,fieldType:u,issueFieldId:i}},render:()=>{const s=p.item;return o.a.createElement(s,{fieldKey:i,issueId:t,issueKey:e,projectId:n,onCancel:l,onConfirm:l,onEscape:l,startWithEditViewOpen:!0,menuPosition:"fixed"})}}]:s}),[])),[d,a,t,e,u,l,n,c])};var ER=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),wR=n("./src/packages/issue/fields/field-base/src/services/field-flags-service/main.js"),kR=n("./src/packages/platform/services/user/src/main.js");const CR=(e,t,s)=>e.filter((e=>e.to.id!==(null==t?void 0:t.id))).map((e=>({onClick:()=>s(e),label:e.name,key:String(e.id)}))),SR={},IR=[]
;var TR=({canCreateAttachment:e,shouldShowCreateSubtaskButton:t,shouldShowIssueInEpicButton:s,canCreateIssueLink:n,canEditIssues:a,onAddAttachmentClick:i,onCreateSubtaskClick:o,onCreateIssueInEpicClick:c,onChildCreateClick:l,supportsChildCreation:d,isServiceDesk:u,canLinkConfluencePage:p,onLinkConfluencePageClick:m,onCreateMajorIncidentClick:f,onLinkIncidentClick:b,canAddWebLinks:g,onAddWebLinkClick:h,onAddIssueLinkClick:y,onChangeWorkflow:O,onAddComment:j,ecosystemActions:v,hasParent:E})=>{const{formatMessage:w}=Object(qe.c)(),k=Object(cs.f)(),C=Object(cs.g)(),[S]=Object(Vl.b)({fieldKey:"servicedesk-incident-linking",issueKey:C}),[I]=Object(Vl.b)({fieldKey:"servicedesk-incident-linking",issueKey:C}),[T]=Object(Ts.isJsmLinkedAlertsEnabled)()?Object(Vl.b)({fieldKey:"servicedesk-incident-management",issueKey:C
}):[void 0],_=!!C&&!!k,[{isShortcutsDialogVisible:P},{registerShortcuts:x,setShortcutsLoading:D,setHasError:A}]=Object(BL.a)(),{onAssignToMeLinkClick:M,onAddCommentLinkClick:L,onWorkflowSelected:R}=(({onChangeWorkflow:e,onAddComment:t})=>{const s=Object(cs.g)(),{createAnalyticsEvent:n}=Object(sr.a)(),a=Object(Tl.g)(s),[i]=Object(Gd.d)(a),[{data:o}]=Object(kR.b)(),{onSuccess:c,onFailure:l}=Object(Ts.isDotDialogFieldsMilestone1Enabled)()?Object(wR.a)():SR,{onSuccess:d,onFailure:u}=Object(Ts.isDotDialogFieldsMilestone1Enabled)()?SR:Object(wR.b)(),p=Object(r.useCallback)((()=>{Object(Ts.isDotDialogFieldsMilestone1Enabled)()?c({title:mR.assignToMeSuccessTitle,description:[mR.assignToMeSuccessDescription,{issueKey:s}]}):d(mR.assignToMeSuccessTitle,[mR.assignToMeSuccessDescription,{issueKey:s}])}),[c,d,s]),m=Object(r.useCallback)((e=>{Object(Ts.isDotDialogFieldsMilestone1Enabled)()?l({error:e,title:mR.assignToMeFailureTitle,description:mR.assignToMeFailureDescription
}):u(mR.assignToMeFailureTitle,mR.assignToMeFailureDescription)}),[l,u]),[{value:f,fieldConfig:b},{saveValue:g}]=Object(db.a)({issueKey:s,onSuccess:p,onFailure:m}),h=Object(r.useCallback)((()=>{const e=n({});g(o,null,e)}),[o,g,n]),y=Object(r.useCallback)((async t=>{t.hasScreen?new ER.default({baseUrl:Object(Vr.c)(""),transitionId:t.id,issueKey:s}).onDialogSuccess((()=>{e(t,!0)})).show():(await Object(Yc.d)(`/rest/api/2/issue/${s}/transitions`,{body:JSON.stringify({transition:t})}),e(t,!1),Object(Ki.f)(n({}),"issueStatus updated",{newValId:t.to.id,newStatusCategoryId:t.to.statusCategory.id,newStatusCategoryName:t.to.statusCategory.name,hasScreen:t.hasScreen,isConditional:t.isConditional}))}),[n,s,e]);return{onAssignToMeLinkClick:null!=b&&b.isEditable&&i.canBeAssignedToIssues&&(null==f?void 0:f.accountId)!==(null==o?void 0:o.accountId)?h:void 0,onAddCommentLinkClick:i.canAddComments?t:void 0,onWorkflowSelected:y}})({onChangeWorkflow:O,onAddComment:j
}),[,{openLinkAlertsModal:N}]=Object(Ts.isJsmLinkedAlertsEnabled)()?Object(LA.f)():[void 0,{}],F=Object(uR.b)(v),U=Object(pR.b)(E),[{value:V}]=Object(lR.a)({issueKey:C}),K=Object(Ts.isDotDialogFieldsMilestone1Enabled)()?vR():IR,$=Object(r.useCallback)((async()=>{const r=(e=>Object.keys(e).map((t=>e[t])).flat().map((({id:e,label:t,onClick:s})=>({label:t,onClick:s,key:e}))))(oL({formatMessage:w,canCreateAttachment:e,canEditIssues:a,shouldShowCreateSubtaskButton:t,shouldShowIssueInEpicButton:s,canCreateIssueLink:n,onAddAttachmentClick:i,onCreateSubtaskClick:o,onCreateIssueInEpicClick:c,onChildCreateClick:l,supportsChildCreation:d,isServiceDesk:u,canLinkConfluencePage:p,onLinkConfluencePageClick:m,onCreateMajorIncidentClick:f,incidentLinking:I,incidentEscalate:S,incidentManagement:T,onLinkIncidentClick:b,onLinkAlertsClick:N,canAddWebLinks:g,onAddWebLinkClick:h,onAddIssueLinkClick:y})),O=(({onAddCommentLinkClick:e,onAssignToMeLinkClick:t,formatMessage:s})=>[...t?[{key:"assign-to-me",
label:s(mR.issueActionAssignToMe),onClick:t}]:[],...e?[{key:"add-comment",label:s(mR.issueActionComment),onClick:e}]:[]])({onAddCommentLinkClick:L,onAssignToMeLinkClick:M,formatMessage:w}),j={key:"issueActions",label:w(mR.issueActionsSectionLabel),isLoaded:!0,weight:2,options:[...r,...O,...F,...U]},v=await Object(dR.a)(C),E={key:"workflow",label:w(mR.issueWorkflowsSectionLabel),isLoaded:!0,weight:3,options:v?CR(v.transitions,V,R):[]};if(v||A(!0),Object(Ts.isDotDialogFieldsMilestone1Enabled)()){const e={isLoaded:!0,key:"fields",label:w(mR.fieldsSectionLabel),weight:1,options:K};x([e,j,E])}else x([j,E])}),[w,e,a,t,s,n,i,o,c,l,d,u,p,m,f,I,S,T,U,b,N,g,h,y,L,M,C,F,V,R,x,A,K]);return Object(r.useEffect)((()=>{_&&P&&(D(!0),$())}),[_,P,$,D]),null};function _R(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function PR(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_R(Object(s),!0).forEach((function(t){xR(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_R(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xR(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const DR=e=>o.a.createElement($.a,{id:"issue-register-shortcuts-dialog",packageName:"issue"},o.a.createElement(Wi.a,{sourceName:"dotDialog",sourceType:Bi.d},o.a.createElement(TR,e)));DR.displayName="RegisterShortcutsDialog";var AR=Object(c.connect)((e=>PR(PR({},MA(e)),{},{ecosystemActions:Object(ha.j)(e),hasParent:Object(cR.a)(e)})),(e=>PR(PR({},hL(e)),{},{onChangeWorkflow:(t,s)=>{e(Object(vl.e)("status",bd,t.to)),e(Object(vl.h)("status",t.to,{viaDialog:s}))},onAddComment:()=>{e(Object(Ci.d)(Ci.a)),e(Object(Dn.c)())}
})))(DR),MR=n("./node_modules/lodash/toString.js"),LR=n.n(MR),RR=n("./src/packages/issue/smart-field-prefetch/src/context.js");const NR=qp()(((e,t,s)=>Object(Yp.a)(((e,t,s="")=>`${t}/rest/api/3/user/assignable/search?issueKey=${e}&recommend=true&query=&sessionId=${s}`)(e,t,s)))),FR=qp()(((e,t,s,n,a)=>{const i=`${e.baseUrl}/gateway/api/fields/v2/prefetch`;return Object(Yp.a)(i,{body:JSON.stringify({context:{product:"jira",sessionId:n,containerId:e.projectId,objectId:e.issueId,principalId:e.accountIdloggedInUser,tenantId:e.cloudId,additionalContext:{properties:t,type:"issue",customPropertyMappings:s}},prefetchFields:a}),headers:{"Content-Type":"application/json"},method:"POST"})}),(e=>+e.issueId)),UR=qp()(((e,t,s,n)=>Object(Yp.a)(((e,t,s="",n)=>`${t}/rest/api/1.0/labels/${n}/suggest?query=&sessionId=${s}`)(0,t,s,n))));function VR(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function KR(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?VR(Object(s),!0).forEach((function(t){$R(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):VR(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $R(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const WR=e=>null!=e,BR=e=>WR(e)&&""!==e;function HR(){return(HR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const GR={assignee:NR,labels:UR},qR=Object(r.memo)((e=>{const t=(e=>{
if(BR(e.projectId)&&WR(e.issueId)&&e.issueId!==Object(Vr.k)("")&&BR(e.cloudId)&&BR(e.issueKey)&&WR(e.fields))return KR(KR({},e),{},{issueId:e.issueId,projectId:e.projectId})})(e);if(void 0===t)return null;const[s,n]=Object(RR.b)(t.issueKey)(),{issueId:a,cloudId:i,projectId:o,accountIdloggedInUser:c,fields:l,baseUrl:d,issueKey:u,customFieldMappings:p,createAnalyticsEvent:m}=t,f={issueId:a,cloudId:i,projectId:o,accountIdloggedInUser:c,baseUrl:d};return Object(r.useEffect)((()=>{if(s&&Object.values(s).filter((e=>e)).length>0)return;const e=Object.keys(GR||{}),t=e.filter((e=>!!l[e]&&l[e].editable));if(!((e,t,s)=>!(e.length<t.length&&(s&&v.a.safeInfoWithoutCustomerData("smart-field-prefetch.index","Prefetch request skipped for non-editable fields.",s({action:"skipped",actionSubject:"prefetch"}).update({prefetchableFields:t,permissiableFields:e})),0===e.length)))(t,e,m))return;const i=Fp.a.v4();FR(f,l,p,i,t).then((({prefetchFields:e=[]})=>{((e,t,s,n)=>{if(null==e)return;const a=e({
action:"requested",actionSubject:"prefetchFields",actionSubjectId:n}),i={prefetchSessionId:n,requestedFields:t,positiveFields:s};Object(Ki.c)(a,"prefetchFields requested",n,i)})(m,t,e,i),t.forEach((t=>{if(e.includes(t)){const e=Fp.a.v4(),s=GR[t](u,d,e,a);n.setField(t,i,!0,e,s),((e,t,s,n)=>{if(null==e)return;const a="prefetched",i=e({action:a,actionSubject:"field"}),r={fieldFetchSessionId:n,prefetchSessionId:s,fieldId:t};Object(Ki.c)(i,`field ${a}`,r)})(m,t,i,e)}else n.setField(t,i,!1,null,null)}))})).catch((e=>{v.a.safeErrorWithoutCustomerData("smart-field-prefetch.index","error while calling frs prefetch",e)}))}),[d,f,l,u,p,n,m,a,s]),null}),((e,t)=>LR()(e.issueId)===LR()(t.issueId)&&LR()(e.projectId)===LR()(t.projectId))),zR=e=>{const t=Object(Vp.a)(),s=Object(cs.i)(),n=Object(Tl.e)(s),a=Object(cs.g)(),i=Object(Vr.c)(""),r=Object(Mg.a)();return o.a.createElement(qR,HR({},e,{cloudId:t,projectId:n,issueKey:a,baseUrl:i,accountIdloggedInUser:r}))};zR.displayName="SmartFieldPrefetchApp"
;var YR=zR;function QR(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function JR(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?QR(Object(s),!0).forEach((function(t){ZR(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):QR(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ZR(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const XR=["epic","sprint","storyPointsField","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:jsw-story-points"],eN=e=>e?XR.map((t=>{const s=Object(Yn.q)(t)(e);return s?{[t]:s.key}:{}})).reduce(((e,t)=>JR(JR({},e),t)),{}):{};var tN=Object(h.a)()(Object(c.connect)(((e,t)=>({fields:Object(Yn.s)(e),issueId:Object(M.w)(e),customFieldMappings:eN(e),createAnalyticsEvent:t.createAnalyticsEvent})),{})(YR));function sN(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nN(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sN(Object(s),!0).forEach((function(t){aN(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sN(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function aN(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class iN extends r.Component{constructor(...e){super(...e),this.state={isIssueContainerReady:!1,attachmentHover:!1},this.setIssueBodyContainerRef=e=>{e&&(this.issueBodyContainerRef=e,this.setState({isIssueContainerReady:!0}))},this.setAttachmentHover=e=>{this.setState({attachmentHover:e})},this.setAttachmentHoverFalse=()=>{this.setState({attachmentHover:!1})},this.setAttachmentHoverTrue=()=>{this.setState({attachmentHover:!0})},this.hasErrored=!1,this.issueBodyContainerRef=void 0,this.renderError=(e,t)=>{const{isComplete:s}=this.props,n=nN({},t);switch(e){case"AUTHENTICATION_ERROR":return s?o.a.createElement(Ws.c,{location:"auth-error"
},o.a.createElement(ii,null)):o.a.createElement(ii,null);case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return s?o.a.createElement(Ws.c,{location:"not-found-or-no-permission-error"},o.a.createElement(ui,null)):o.a.createElement(ui,null);case"UNKNOWN_ERROR":case"CONNECTIVITY_ERROR":default:return s&&"CONNECTIVITY_ERROR"!==e?o.a.createElement(Ws.a,{location:"unknown-error",failureEventAttributes:n},o.a.createElement(hi,null)):o.a.createElement(hi,null)}},this.renderAttachmentPickers=()=>{const{isServiceDesk:e,isComplete:t,projectType:s}=this.props;return t?o.a.createElement(ba,{experience:"renderAttachmentPickers",analyticsSource:e?"issue-view-jsd":"issue-view-non-jsd",projectType:s,isReady:this.state.isIssueContainerReady&&!!this.issueBodyContainerRef},e?o.a.createElement(o.a.Fragment,null,o.a.createElement(qn,null),o.a.createElement(aa,null),this.state.isIssueContainerReady&&this.issueBodyContainerRef&&o.a.createElement(la,{container:this.issueBodyContainerRef,
onDragEnter:this.setAttachmentHoverTrue,onDragLeave:this.setAttachmentHoverFalse,onDrop:this.setAttachmentHoverFalse})):o.a.createElement("div",null,o.a.createElement(xn,null),o.a.createElement(na,null),this.state.isIssueContainerReady&&this.issueBodyContainerRef&&o.a.createElement(da,{container:this.issueBodyContainerRef,onDragEnter:this.setAttachmentHoverTrue,onDragLeave:this.setAttachmentHoverFalse,onDrop:this.setAttachmentHoverFalse}))):null}}componentDidMount(){const{onRefresh:e,onMount:t}=this.props;t(),j.a.addRefreshIssueListener(e),this.props.isComplete&&this.props.onLoadedIssueView()}shouldComponentUpdate(e){const{error:t,isLoading:s}=this.props,n=s&&e.isLoading;return e.error!==t||!n}componentDidUpdate(e){const{error:t}=this.props;null!=t&&(this.hasErrored=!0),this.hasErrored||this.isCompleteStateForFirstTime(e)&&this.props.onLoadedIssueView()}componentWillUnmount(){j.a.removeRefreshIssueListener(this.props.onRefresh)}isCompleteStateForFirstTime(e){
const{isComplete:t}=this.props;return t&&!e.isComplete}renderWorklogModal(){switch(this.props.worklogModal){case"ADD_MODAL":return o.a.createElement(Et,null);case"EDIT_MODAL":return o.a.createElement(is,null);case"DELETE_MODAL":return o.a.createElement(qt,null);case"NO_MODAL":default:return null}}renderJsmIncidentChangeboarding(){return this.props.isComplete?o.a.createElement(o.a.Fragment,null,o.a.createElement(k.a,null),o.a.createElement(w.a,null),o.a.createElement(E.a,null)):null}renderMainContent(){const{error:e,errorMessage:t,isLoading:s,isCompact:n,issueMaxWidth:a,shouldShowCloseButton:i,onClose:r,isModal:c}=this.props;return null!=e?o.a.createElement(Bs.a,{isCompact:n},o.a.createElement(m.a,{medium:10},i&&o.a.createElement(Ha.a,{viewModeOptions:this.props.viewModeOptions,shouldShowCloseButton:!0,onClose:r}),this.renderError(e,t))):s?o.a.createElement(S.a,{isEmbedView:a!==Object(VL.a)(),isModalView:c}):o.a.createElement(KL,{innerRef:this.setIssueBodyContainerRef
},o.a.createElement($L,{attachmentHover:this.state.attachmentHover}),this.state.attachmentHover&&o.a.createElement($s,null),o.a.createElement(UL,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,isStickyHeaderOffset:this.props.isStickyHeaderOffset,onClose:r,isCompact:n,issueMaxWidth:a,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:i}),this.renderWorklogModal(),this.renderAttachmentPickers(),this.props.isServiceDesk&&Object(Ts.isIncidentConsolidationEnabled)()&&this.renderJsmIncidentChangeboarding(),o.a.createElement(ja,{externalId:"issue.ecosystem"}),this.props.isComplete&&o.a.createElement(Ba,null),o.a.createElement(tN,null))}render(){const{jql:e,filter:t}=p.a.parse(window.location.search),s=null!=e||null!=t
;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ks,{isLoading:this.props.isLoading,isPreview:this.props.isPreview,isComplete:this.props.isComplete,error:this.props.error,metrics:this.props.metrics,issueKey:this.props.issueKey}),this.props.isComplete?o.a.createElement(g.a,null):null,o.a.createElement(fn,{externalId:"issue.flags"}),o.a.createElement(oR,null),o.a.createElement(f.a,null,this.renderMainContent()),!s&&o.a.createElement(o.a.Fragment,null,o.a.createElement(C.a,{header:o.a.createElement(ms,null),menuTitle:this.props.issueKey}),o.a.createElement(AR,null)))}}iN.displayName="Issue",iN.displayName="Issue",iN.defaultProps={projectType:null,onLoadedIssueView:d.a,onMount:d.a};s.default=Object(Is.a)([Object(h.a)({onLoadedIssueView:{action:"mounted"}}),Object(c.connect)((e=>({isLoading:Object(L.r)(e),isPreview:Object(L.s)(e),isComplete:Object(L.n)(e),isModal:Object(M.s)(e),error:Object(L.i)(e),errorMessage:Object(L.h)(e),issueKey:Object(M.x)(e),
isServiceDesk:Object(M.t)(e),projectType:Object(L.F)(e),worklogModal:Object(N.e)(e)})),(e=>({onRefresh:()=>e(Object(rs.g)()),onMount:()=>{e((()=>({type:"ISSUE_VIEW_MOUNTED"}))())},onLoadedIssueView:e=>{const t={action:"viewed",attributes:{isBoardSearchFieldChangeboardingEnabled:Object(Ts.isBoardSearchFieldChangeboardingEnabled)(),isBacklogSearchFieldChangeboardingEnabled:Object(Ts.isBacklogSearchFieldChangeboardingEnabled)()}};try{Object(y.a)(e,t)}catch(s){v.a.safeErrorWithoutCustomerData("issue.viewed",s,new b.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}}}))),Hs.a,(()=>e=>{var t,s;return s=t=class extends r.Component{constructor(...e){super(...e),this.MetricsContext=Object(Cs.c)()}render(){const{MetricsContext:t}=this;return o.a.createElement(t.Consumer,null,(t=>o.a.createElement(e,Ss({},this.props,{metrics:t}))))}},t.displayName=`WithMetricsConsumer(${e.displayName||e.name})`,s})(),Object(O.a)((e=>{
const t=Object(xs.a)(e),s=Object(Ps.b)(e),n=nN(nN(nN({},t.attributes),s),{},{issueHierarchyLevel:Object(_s.b)(e)});return nN(nN({},t),{},{attributes:n})}))])(iN)},"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),c=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),l=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js");class d extends n.Component{constructor(e){super(e),this.state={shouldShowKeyline:!1},this.getScrollContainerDeprecated=()=>(this.scrollContainer||(this.scrollContainer=Object(c.a)(this.innerEl.current)),this.scrollContainer),this.calculateShouldShowKeyline=r()((()=>{
const e=!0===this.props.shouldUseDeprecatedScrollParent?this.getScrollContainerDeprecated():this.props.scrollContainer,t=this.innerEl.current;if(!e||!t)return;const s=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=Math.max(s.top,0),i=e.scrollTop>0&&n.top<=a;i!==this.state.shouldShowKeyline&&this.setState({shouldShowKeyline:i})}),100),this.scrollContainer=null,this.innerEl=void 0,this.innerEl=Object(n.createRef)()}componentDidMount(){if(!Object(o.e)()){const e=!0===this.props.shouldUseDeprecatedScrollParent?this.getScrollContainerDeprecated():this.props.scrollContainer;e&&e.addEventListener("scroll",this.calculateShouldShowKeyline),!0===this.props.shouldUseDeprecatedScrollParent&&this.calculateShouldShowKeyline()}}componentDidUpdate(e){if(!0===this.props.shouldUseDeprecatedScrollParent)return;const{scrollContainer:t}=e,{scrollContainer:s}=this.props;!t&&s&&s.addEventListener("scroll",this.calculateShouldShowKeyline),
t&&s&&t!==s&&(t.removeEventListener("scroll",this.calculateShouldShowKeyline),s.addEventListener("scroll",this.calculateShouldShowKeyline)),t&&!s&&t.removeEventListener("scroll",this.calculateShouldShowKeyline)}componentWillUnmount(){if(!Object(o.e)()){const e=!0===this.props.shouldUseDeprecatedScrollParent?this.getScrollContainerDeprecated():this.props.scrollContainer;e&&e.removeEventListener("scroll",this.calculateShouldShowKeyline)}}render(){return a.a.createElement(l.a,{topOffset:0,id:this.props.elementId,showKeyline:this.state.shouldShowKeyline,innerRef:this.innerEl,customStyles:this.props.customStyles},this.props.children)}}d.displayName="StickyHeaderContainer"},"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}))
;var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=i.e,o=i.f.card-1,c=n.default.div.withConfig({componentId:"p21ks7-0"})`@supports (position:sticky) or (position:-webkit-sticky){position:sticky;background:white;z-index:${o};padding-left:${r}px;margin-left:-${r}px;padding-top:${1}px;top:${e=>e.topOffset+-1}px;${e=>e.showKeyline?`box-shadow: 0 2px ${a.a.N30}`:""};${e=>e.customStyles||""};}`},"./src/packages/issue/jira-settings-service/src/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n="LOCK_IN_NEW_ISSUE_VIEW"},"./src/packages/issue/jira-settings-service/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return f}));var n={};s.r(n),s.d(n,"setJiraSettings",(function(){return o}))
;var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const o=e=>({setState:t})=>{t(e)},c=Object(i.a)({name:"jiraSettings",initialState:{newIssueViewTransitionSettings:{newIssueViewTransitionLockingStatus:"DEFAULT_TO_NEW_ISSUE_VIEW",shouldDelayChangeboarding:!1},issueLinkTypes:[],subtasksConfiguration:{enabled:!0},timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"}},actions:n}),l=Object(r.a)(c,{selector:e=>e.timeTrackingConfiguration}),d=Object(r.a)(c,{selector:e=>e.newIssueViewTransitionSettings||void 0}),u=(Object(r.a)(c,{selector:e=>e.subtasksConfiguration}),Object(r.a)(c,{selector:e=>e.issueLinkTypes}),Object(r.a)(c,{selector:null})),p=()=>{const[e]=l();return[e]},m=()=>{const[e]=d();return[e]},f=()=>{const[,{setJiraSettings:e}]=u();return[null,Object(a.useMemo)((()=>({setJiraSettings:e})),[e])]}},
"./src/packages/issue/media-provider/src/controllers/create-auth-provider/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t,s)=>async n=>({clientId:t,token:await e(n?n.collectionName:void 0),baseUrl:s}),a=e=>()=>Promise.resolve(e)},"./src/packages/issue/media-provider/src/controllers/create-media-provider/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n=e=>e.length>0?e[0].token:null,a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,collection:void 0!==e.collection&&""!==e.collection?e.collection:null,tokenIssueTimestamp:Date.now()-1e4})},"./src/packages/issue/media-provider/src/controllers/token-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n);class i{constructor(){this.status=void 0,this.promise=void 0,this.resolvePromise=void 0,
this.rejectPromise=void 0,this.reset()}get(){return this.promise}resolve(e){this.resetIfSettled(),this.resolvePromise(e),this.status="resolved"}reject(){this.resetIfSettled(),this.rejectPromise(),this.status="rejected"}resetIfSettled(){"pending"!==this.status&&this.reset()}reset(){this.promise=new Promise(((e,t)=>{this.resolvePromise=e,this.rejectPromise=t})),this.status="pending"}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>{var t,s;return s=t=class extends n.Component{constructor(e){super(e),this.viewTokenPromiseProvider=void 0,this.updateViewTokenPromise=e=>{const{viewContext:t}=e;t&&t.areTokenPermissionsUpToDate&&t.token?this.viewTokenPromiseProvider.resolve(t.token):this.viewTokenPromiseProvider.resetIfSettled()},this.tokenProvider=async e=>{if(!e)return this.viewTokenPromiseProvider.get()
;const{uploadContext:t}=this.props.mediaContext;if(t)return t.token;throw new Error("Upload token not available")},this.viewTokenPromiseProvider=new i,this.updateViewTokenPromise(e.mediaContext)}UNSAFE_componentWillReceiveProps(e){this.updateViewTokenPromise(e.mediaContext)}render(){return a.a.createElement(e,r({tokenProvider:this.tokenProvider},this.props))}},t.displayName=`WithTokenProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s}},"./src/packages/issue/media-provider/src/controllers/with-media-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),r=s("./src/packages/issue/media-provider/src/controllers/create-auth-provider/index.js"),o=s("./src/packages/issue/media-provider/src/controllers/create-media-provider/utils.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var u=s("./src/packages/issue/media-provider/src/controllers/token-provider/index.js");const p=["mediaContext","tokenProvider"];function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const b=e=>{var t,s;return s=t=class extends n.Component{constructor(...e){super(...e),this.setDropzoneRef=e=>{this.dropzoneRef=e},this.resolve=void 0,this.mediaProviderPromise=new Promise((e=>{this.resolve=e})),this.resolved=!1,this.dropzoneRef=null}componentDidMount(){this.resolveMediaProviderPromise()}componentDidUpdate(){this.resolveMediaProviderPromise()}resolveMediaProviderPromise(){const{mediaContext:e,tokenProvider:t,baseUrl:s}=this.props;if(!this.resolved&&this.dropzoneRef&&e.viewContext){this.resolved=!0;const n=((e,t,s)=>{const{viewContext:n,uploadContext:a,userAuth:c}=e
;if(!n)throw new TypeError("mediaContext.viewContext was null. Check that the server response has been processed.");let d={viewMediaClientConfig:{authProvider:Object(r.a)(t,n.clientId,n.serviceHost)}};return a&&(d=l(l({},d),{},{uploadParams:{collection:a.collection},uploadMediaClientConfig:{authProvider:Object(r.a)(t,a.clientId,a.serviceHost),userAuthProvider:c?Object(r.b)(l(l({},c),{},{baseUrl:a.serviceHost})):void 0,getAuthFromContext:async e=>{const t=await Object(i.b)(s,e,65536).map(o.a).toPromise();return{baseUrl:t.serviceHost,clientId:t.clientId,token:t.token||""}}}})),d})(e,t,s);this.resolve(n)}}render(){const t=this.props,{mediaContext:s,tokenProvider:n}=t,i=f(t,p);return a.a.createElement("div",{ref:this.setDropzoneRef},a.a.createElement(e,m({mediaProvider:this.mediaProviderPromise},i)))}},t.displayName=`WithMediaProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s};t.a=e=>Object(u.a)(b(e))},
"./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return u}));var n={};s.r(n),s.d(n,"setTourIsActive",(function(){return o})),s.d(n,"setTourIsInactive",(function(){return c}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const o=()=>({setState:e})=>{e({isTourActive:!0})},c=()=>({setState:e})=>{e({isTourActive:!1})},l=Object(a.a)({name:"new-issue-view-onboarding",initialState:{isTourActive:!1},actions:n}),d=Object(i.a)(l,{selector:e=>e}),u=Object(r.a)(l)},"./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js");const i=()=>{
const[{isTourActive:e},{setTourIsActive:t,setTourIsInactive:s}]=Object(a.b)();return[{isTourActive:e},Object(n.useMemo)((()=>({setTourIsActive:t,setTourIsInactive:s})),[t,s])]}},"./src/packages/issue/project-context-service/src/main.js":function(e,t,s){"use strict";s.d(t,"g",(function(){return w})),s.d(t,"d",(function(){return k})),s.d(t,"i",(function(){return C})),s.d(t,"c",(function(){return S})),s.d(t,"a",(function(){return I})),s.d(t,"e",(function(){return T})),s.d(t,"h",(function(){return _})),s.d(t,"b",(function(){return P})),s.d(t,"f",(function(){return x}));var n={};s.r(n),s.d(n,"setProjectContext",(function(){return u})),s.d(n,"mergeProjectProperty",(function(){return p}));var a=s("./node_modules/react/index.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=(s("./src/packages/platform/utils/types/src/application.js"),s("./src/packages/platform/utils/types/src/edition.js"),
s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),s("./node_modules/react-sweet-state/lib/esm/store/create.js")),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=(e,t)=>({setState:s})=>{s({[e]:t})
},p=(e,t)=>({setState:s,getState:n})=>{const a=l(l({},n()[e]),t);s({[e]:a})},m=Object(r.a)({name:"project-context",initialState:{},actions:n}),f=Object(o.a)(m,{selector:null}),b=(e,{projectKey:t})=>e[t],g=Object(o.a)(m,{selector:b}),h=Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=b(e,{projectKey:t});return null==s?void 0:s.projectType}}),y=(Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=b(e,{projectKey:t});return null==s?void 0:s.projectName}}),Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=b(e,{projectKey:t});return null==s?void 0:s.issueTypes}}));var O=s("./src/packages/platform/utils/constants/src/application-keys.js");const j="flagActions",v=()=>({applicationKey:O.a.SOFTWARE_ISSUE,issueActions:[j],ecosystemEnabled:!0}),E=e=>{if(e)switch(e.projectType){case"software":return e.isSimplified?(()=>({applicationKey:O.a.SIMPLE_SOFTWARE_BOARD,issueActions:[j,"cardCoverActions"],ecosystemEnabled:!0}))():v();case"business":return(()=>({applicationKey:O.a.CORE_ISSUE,
issueActions:[],ecosystemEnabled:!0}))();case"service_desk":return(()=>({applicationKey:O.a.SERVICE_DESK,issueActions:[],ecosystemEnabled:!0}))();default:return v()}return v()},w=e=>Object(i.s)(e.split("-")[0]),k=()=>{const[,{setProjectContext:e,mergeProjectProperty:t}]=f();return[null,Object(a.useMemo)((()=>({setProjectContext:e,mergeProjectProperty:t})),[e,t])]},C=e=>{const[t]=h({projectKey:e});return t},S=e=>{const[t]=g({projectKey:e});return t},I=e=>{const[t]=g({projectKey:e});return(null==t?void 0:t.isSimplified)||!1},T=e=>{const[t]=g({projectKey:e});return null==t?void 0:t.projectId},_=e=>{const[t]=g({projectKey:e});return null==t?void 0:t.projectStatus},P=e=>{const t=C(e),s=I(e);return E({isSimplified:s,projectType:t})},x=e=>{const[t]=y({projectKey:e});return t}},"./src/packages/issue/project-permissions-service/src/context.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return d}));var n={};s.r(n),
s.d(n,"setProjectPermissions",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=(e,t)=>({setState:s})=>{s({[e]:t})},o={canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteAllWorklogs:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canDeleteOwnWorklogs:!1,canEditAllComments:!1,canEditAllWorklogs:!1,canEditIssues:!1,canEditOwnComments:!1,canEditOwnWorklogs:!1,canLinkIssues:!1,canLogWork:!1,canManageWatchers:!1,canMoveIssue:!1,canModifyReporter:!1,canScheduleIssues:!1,canUseServiceDeskAgentFeatures:!1,canBrowseUsers:!1,canViewDevTools:!1,canViewWatchers:!1,canViewVoters:!1,canCreateIssuesInClassicProjectEpic:!1,canResolveIssues:!1},c=Object(a.a)({
name:"project-permissions",initialState:{},actions:n}),l=Object(i.a)(c,{selector:(e,{projectKey:t})=>e[t]||o}),d=Object(i.a)(c,{selector:null})},"./src/packages/issue/project-permissions-service/src/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"e",(function(){return l}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/project-permissions-service/src/context.js");const i=e=>{const[t,{setProjectPermissions:s}]=Object(a.b)({projectKey:e});return[t,Object(n.useMemo)((()=>({setProjectPermissions:s})),[s])]},r=e=>{const[t]=Object(a.b)({projectKey:e});return t.canAdministerProject},o=e=>{const t=r(e),s=(e=>{const[t]=Object(a.b)({projectKey:e});return t.canAdministerJira})(e);return t||s},c=e=>{const[t]=Object(a.b)({projectKey:e});return t.canUseServiceDeskAgentFeatures},l=()=>{const[,{setProjectPermissions:e}]=Object(a.c)()
;return[null,Object(n.useMemo)((()=>({setProjectPermissions:e})),[e])]}},"./src/packages/issue/smart-field-prefetch/src/context.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return b})),s.d(t,"c",(function(){return g})),s.d(t,"a",(function(){return h}));var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c={assignee:null,labels:null},l={setField:(e,t,s,n,a)=>({setState:i})=>{i({[e]:{prefetchSessionId:t,prefetched:s,fieldValuePromise:a,sessionId:n}})}
},d={},u=e=>(d[e]||(d[e]=(e=>Object(n.a)({name:`smart-issue-prefetch-${e}`,initialState:c,actions:l}))(e)),d[e]),p={},m=(e,{fieldId:t}={})=>e[t],f={},b=e=>(f[e]||(f[e]=Object(a.a)(u(e))),f[e]),g=(e,t)=>{const[s]=b(e)();return s[t]},h=(e,t)=>{if(void 0!==p[e]&&null!==p[e]){if(void 0!==p[e][t]&&null!==p[e][t])return p[e][t]}else p[e]=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({labels:null,assignee:null},p[e]);return p[e][t]=Object(i.a)(u(e),{selector:m}),p[e][t]}},"./src/packages/issue/user-preferences-services/src/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return y})),s.d(t,"a",(function(){return O}))
;var n=s("./node_modules/react/index.js"),a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function r(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u={setUserPreferenceValue:(e,t)=>({setState:s,getState:n})=>{s({preferences:l(l({},n().preferences),{},{[e]:t})})},deleteUserPreferenceValue:e=>({setState:t,getState:s})=>{const n=s().preferences,{[e]:a}=n;t({preferences:r(n,[e].map(o))})},setUserPreferences:e=>({setState:t})=>{t({preferences:e})},getUserPreferenceValue:e=>({getState:t})=>{const{preferences:s}=t();return s[e]}},p=Object(a.a)({
name:"user-preferences",initialState:{preferences:{}},actions:u}),m=Object(i.a)(p,{selector:(e,t)=>e.preferences[t]}),f=Object(i.a)(p,{selector:null});var b=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const g=async(e,t,s)=>Object(b.e)(`${e}/rest/api/2/mypreferences?key=${t}`,{body:s}),h=async(e,t)=>Object(b.a)(`${e}/rest/api/2/mypreferences?key=${t}`),y=e=>{const[t,{setUserPreferenceValue:s,deleteUserPreferenceValue:a}]=m(e);return[t,{setValue:Object(n.useCallback)((t=>(s(e,t),g("",e,t))),["",s,e]),deleteValue:Object(n.useCallback)((()=>(a(e),h("",e))),["",a,e])}]},O=()=>{const[,e]=f();return[null,Object(n.useMemo)((()=>({setUserPreferenceValue:(t,s)=>{e.setUserPreferenceValue(t,s),g("",t,s)},setUserPreferences:t=>{t&&0!==Object.keys(t).length&&e.setUserPreferences(t)},deleteUserPreferenceValue:t=>{e.deleteUserPreferenceValue(t),h("",t)},getUserPreferenceValue:e.getUserPreferenceValue})),[e,""])]}},
"./src/packages/issue/workflow-transitions-services/src/context.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return f}));var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/container.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l={setState:(e={})=>({setState:t,getState:s})=>{t(o(o({},s()),e))},setTransitionInProgress:e=>({setState:t,getState:s})=>{t({ui:o(o({},s().ui),{},{transitionInProgress:e})})}},d=Object(n.a)({name:"workflow-transitions",initialState:{data:null,loading:!1,error:null,ui:{transitionInProgress:!1}},actions:l}),u=Object(a.a)(d,{selector:e=>e}),p=Object(a.a)(d,{selector:e=>e.ui.transitionInProgress}),m=Object(a.a)(d,{selector:null}),f=Object(i.a)(d)},"./src/packages/issue/workflow-transitions-services/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/workflow-transitions-services/src/context.js");const i=()=>{
const[e,{setState:t}]=Object(a.d)();return[e,t]},r=()=>{const[e]=Object(a.c)();return e},o=()=>{const[,e]=Object(a.b)();return[null,Object(n.useMemo)((()=>({setState:t=>{e.setState(t)},setTransitionInProgress:t=>{e.setTransitionInProgress(t)}})),[e])]}},"./src/packages/issue/worklog/src/services/context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),a=s("./src/packages/issue/worklog/src/services/store/index.js");const i=Object(n.a)(a.b,{selector:e=>e.isRollingUp})},"./src/packages/issue/worklog/src/services/store/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n={};s.r(n),s.d(n,"markRollingUpData",(function(){return r})),s.d(n,"unmarkRollingUpData",(function(){return o}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/container.js")
;const r=()=>({setState:e})=>{e({isRollingUp:!0})},o=()=>({setState:e})=>{e({isRollingUp:!1})},c=Object(a.a)({name:"worklog-time-tracking",initialState:{isRollingUp:!0},actions:n}),l=Object(i.a)(c)}}]);try{window.__jsEvalStop("async-issue-app~issue.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-issue-app~issue.1c76d7039ab821aac89a.8.js.map